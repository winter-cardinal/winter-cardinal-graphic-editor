{"version":3,"file":"wcardinal-geditor.min.js","sources":["../../../node_modules/tslib/tslib.es6.mjs","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-composition.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-all.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-background.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-category.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-description.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-height.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-name.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-open.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-size.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-toggle-visibility.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-target-toggle-visibility.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-target-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-summary.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer-value-background.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-change.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-search.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-deleter.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-group.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-selection-updated-part.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-all.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability-lock.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability-unlock.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-corner-off.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-corner-on.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-cursor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-recursive.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-recursive-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-direction.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-percent.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-focusable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-id.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image-clear.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image-fit-to.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-interactive.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-points-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-and-rotation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-left.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-top.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-radius.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-rotation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-shortcut.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-skew.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-align.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-side-off.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-side-on.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-align-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-align-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-clipping.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-direction.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-family.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-fitting.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-offset-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-offset-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-padding-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-padding-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-size-delta.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-size.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-spacing-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-spacing-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-weight.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-title.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-replace-one.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-bring-to-front.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-send-to-back.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-transforms.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-ungroup.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/new-graphic-tester.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-csv.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-object.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-serialized.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-action-extensions.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-select-with-thumbnails.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/get-shape-type-theme.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-mode.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-action-extension-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-extension.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-extension-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-extensions.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-side.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-subtype.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-vvisible.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-editor-shape-embedded-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-shape-embedded-acceptor-edges.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-active.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-grouped.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-editor-shape-button.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-shape-buttons.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-button-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-button-value-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-dialog-shape-button-layer-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-editor-shape-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layers.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick-major.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick-minor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-axis-x-padding.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-axis-y-padding.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-x-major-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-x-minor-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-y-major-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-y-minor-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axes.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-editor-shape-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-action-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-lines.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/input/e-shape-inputs.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-cell.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-body.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-header.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-row-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-row.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-row-height.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-row-selection-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-dialog-shape-table-column.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-editor-shape-table.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-action-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-cell-action-value-change-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-body-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-body.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-header-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-header.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-tables.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-extension-factories.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-keyword-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-keyword-board.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-data-mapping-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-data-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-processing.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-snap.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-action.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-coordinate.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-data-mapping.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-data.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-layer-item.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/to-shape-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/to-shape-type-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search-condition-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search-condition-state.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-shape.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editors.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-snap.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-text.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-tree-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-tree.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-validation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-group-impl.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-impl.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier-hit-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-connector-transforms.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-area-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-hit-test.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-acceptor-edge-renderer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-line-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-elbow-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-polygon.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-base-hit-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-base.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-polygon.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-ajax.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-canvas-category.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-data-values.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-date.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-canvas-legacy.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-editor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-tester.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-viewer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/load-shape-extension-button.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/load-shape-extension-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/load-shape-extension-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/load-shape-extension-embedded-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/input/load-shape-extension-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/load-shape-extension-table.js","../../../winter-cardinal-graphic-editor/wcardinal-geditor.browser.js"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandComposition = /** @class */ (function (_super) {\n    __extends(ECommandComposition, _super);\n    function ECommandComposition(commands, selection) {\n        var _this = _super.call(this) || this;\n        _this._commands = commands;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandComposition.prototype, \"commands\", {\n        get: function () {\n            return this._commands;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandComposition.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandComposition.prototype.execute = function () {\n        return true;\n    };\n    ECommandComposition.prototype.redo = function () {\n        var selection = this._selection;\n        var commands = this._commands;\n        selection.lock();\n        for (var i = 0, imax = commands.length; i < imax; ++i) {\n            commands[i].redo();\n        }\n        selection.unlock();\n        return true;\n    };\n    ECommandComposition.prototype.undo = function () {\n        var selection = this._selection;\n        selection.lock();\n        var commands = this._commands;\n        for (var i = commands.length - 1; 0 <= i; --i) {\n            commands[i].undo();\n        }\n        selection.unlock();\n        return true;\n    };\n    ECommandComposition.prototype.destroy = function () {\n        var commands = this._commands;\n        for (var i = 0, imax = commands.length; i < imax; ++i) {\n            commands[i].destroy();\n        }\n    };\n    return ECommandComposition;\n}(DCommandBase));\nexport { ECommandComposition };\n//# sourceMappingURL=e-command-composition.js.map","import { __extends } from \"tslib\";\nimport { DBaseStateSetImpl, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentAll = /** @class */ (function (_super) {\n    __extends(ECommandDocumentAll, _super);\n    function ECommandDocumentAll(diagram, canvas, name, label, width, height, category, summary, description, backgroundColor, backgroundAlpha) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._name = name;\n        _this._label = label;\n        _this._width = width;\n        _this._height = height;\n        _this._category = category;\n        _this._summary = summary;\n        _this._description = description;\n        _this._backgroundColor = backgroundColor;\n        _this._backgroundAlpha = backgroundAlpha;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentAll.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"name\", {\n        get: function () {\n            return this._name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"category\", {\n        get: function () {\n            return this._category;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"summary\", {\n        get: function () {\n            return this._summary;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"description\", {\n        get: function () {\n            return this._description;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"backgroundColor\", {\n        get: function () {\n            return this._backgroundColor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"backgroundAlpha\", {\n        get: function () {\n            return this._backgroundAlpha;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentAll.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentAll.prototype.redo = function () {\n        var canvas = this._canvas;\n        var name = this._name;\n        this._name = canvas.name;\n        canvas.name = name;\n        var label = this._label;\n        this._label = canvas.label;\n        canvas.label = label;\n        var width = this._width;\n        this._width = canvas.width;\n        canvas.width = width;\n        var height = this._height;\n        this._height = canvas.height;\n        canvas.height = height;\n        var category = this._category;\n        this._category = canvas.category;\n        canvas.category = category;\n        var summary = this._summary;\n        this._summary = canvas.summary;\n        canvas.summary = summary;\n        var description = this._description;\n        this._description = canvas.description;\n        canvas.description = description;\n        var backgroundColor = this._backgroundColor;\n        var backgroundAlpha = this._backgroundAlpha;\n        var state = new DBaseStateSetImpl();\n        var background = canvas.background;\n        this._backgroundColor = background.getColor(state);\n        this._backgroundAlpha = background.getAlpha(state);\n        background.color = backgroundColor;\n        background.alpha = backgroundAlpha;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentAll.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentAll;\n}(DCommandBase));\nexport { ECommandDocumentAll };\n//# sourceMappingURL=e-command-document-all.js.map","import { __extends } from \"tslib\";\nimport { DBaseStateSetImpl, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentBackground = /** @class */ (function (_super) {\n    __extends(ECommandDocumentBackground, _super);\n    function ECommandDocumentBackground(diagram, color, alpha) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._color = color;\n        _this._alpha = alpha;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentBackground.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentBackground.prototype, \"color\", {\n        get: function () {\n            return this._color;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentBackground.prototype, \"alpha\", {\n        get: function () {\n            return this._alpha;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentBackground.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentBackground.prototype.redo = function () {\n        var canvas = this._diagram.canvas;\n        if (canvas != null) {\n            var background = canvas.background;\n            var color = this._color;\n            var alpha = this._alpha;\n            var state = new DBaseStateSetImpl();\n            this._color = background.getColor(state);\n            this._alpha = background.getAlpha(state);\n            background.color = color;\n            background.alpha = alpha;\n            this._diagram.emit(\"change\", this._diagram);\n        }\n        return true;\n    };\n    ECommandDocumentBackground.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentBackground;\n}(DCommandBase));\nexport { ECommandDocumentBackground };\n//# sourceMappingURL=e-command-document-background.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentCategory = /** @class */ (function (_super) {\n    __extends(ECommandDocumentCategory, _super);\n    function ECommandDocumentCategory(diagram, canvas, category) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._category = category;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentCategory.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentCategory.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentCategory.prototype, \"category\", {\n        get: function () {\n            return this._category;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentCategory.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentCategory.prototype.redo = function () {\n        var canvas = this._canvas;\n        var category = this._category;\n        this._category = canvas.category;\n        canvas.category = category;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentCategory.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentCategory;\n}(DCommandBase));\nexport { ECommandDocumentCategory };\n//# sourceMappingURL=e-command-document-category.js.map","import { __extends } from \"tslib\";\nimport { DCommandCreate } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentCreate = /** @class */ (function (_super) {\n    __extends(ECommandDocumentCreate, _super);\n    function ECommandDocumentCreate(diagram, canvas) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentCreate.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentCreate.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentCreate.prototype.execute = function () {\n        return true;\n    };\n    return ECommandDocumentCreate;\n}(DCommandCreate));\nexport { ECommandDocumentCreate };\n//# sourceMappingURL=e-command-document-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentDescription = /** @class */ (function (_super) {\n    __extends(ECommandDocumentDescription, _super);\n    function ECommandDocumentDescription(diagram, canvas, description) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._description = description;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentDescription.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentDescription.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentDescription.prototype, \"description\", {\n        get: function () {\n            return this._description;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentDescription.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentDescription.prototype.redo = function () {\n        var canvas = this._canvas;\n        var description = this._description;\n        this._description = canvas.description;\n        canvas.description = description;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentDescription.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentDescription;\n}(DCommandBase));\nexport { ECommandDocumentDescription };\n//# sourceMappingURL=e-command-document-description.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentHeight = /** @class */ (function (_super) {\n    __extends(ECommandDocumentHeight, _super);\n    function ECommandDocumentHeight(diagram, canvas, height) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._height = height;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentHeight.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentHeight.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentHeight.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentHeight.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentHeight.prototype.redo = function () {\n        var canvas = this._canvas;\n        var height = this._height;\n        this._height = canvas.height;\n        canvas.y = canvas.y + (canvas.height - height) * 0.5;\n        canvas.height = height;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentHeight.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentHeight;\n}(DCommandBase));\nexport { ECommandDocumentHeight };\n//# sourceMappingURL=e-command-document-height.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentLabel = /** @class */ (function (_super) {\n    __extends(ECommandDocumentLabel, _super);\n    function ECommandDocumentLabel(diagram, canvas, label) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._label = label;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentLabel.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentLabel.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentLabel.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentLabel.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentLabel.prototype.redo = function () {\n        var canvas = this._canvas;\n        var label = this._label;\n        this._label = canvas.label;\n        canvas.label = label;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentLabel.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentLabel;\n}(DCommandBase));\nexport { ECommandDocumentLabel };\n//# sourceMappingURL=e-command-document-label.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentName = /** @class */ (function (_super) {\n    __extends(ECommandDocumentName, _super);\n    function ECommandDocumentName(diagram, canvas, name) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._name = name;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentName.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentName.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentName.prototype, \"name\", {\n        get: function () {\n            return this._name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentName.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentName.prototype.redo = function () {\n        var canvas = this._canvas;\n        var name = this._name;\n        this._name = canvas.name;\n        canvas.name = name;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentName.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentName;\n}(DCommandBase));\nexport { ECommandDocumentName };\n//# sourceMappingURL=e-command-document-name.js.map","import { __extends } from \"tslib\";\nimport { DCommandCreate } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentOpen = /** @class */ (function (_super) {\n    __extends(ECommandDocumentOpen, _super);\n    function ECommandDocumentOpen(diagram, canvas) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentOpen.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentOpen.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentOpen.prototype.execute = function () {\n        return true;\n    };\n    return ECommandDocumentOpen;\n}(DCommandCreate));\nexport { ECommandDocumentOpen };\n//# sourceMappingURL=e-command-document-open.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapBringForward = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapBringForward, _super);\n    function ECommandDocumentSnapBringForward(snapper, index) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._index = index;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapBringForward.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapBringForward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapBringForward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapBringForward.prototype.redo = function () {\n        var index = this._index;\n        this._snapper.target.swap(index - 1, index);\n        return true;\n    };\n    ECommandDocumentSnapBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapBringForward;\n}(DCommandBase));\nexport { ECommandDocumentSnapBringForward };\n//# sourceMappingURL=e-command-document-snap-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapCreate = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapCreate, _super);\n    function ECommandDocumentSnapCreate(snapper, target) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._target = target;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapCreate.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapCreate.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapCreate.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapCreate.prototype.redo = function () {\n        this._snapper.target.add(this._target);\n        return true;\n    };\n    ECommandDocumentSnapCreate.prototype.undo = function () {\n        var target = this._snapper.target;\n        target.remove(target.size - 1);\n        return true;\n    };\n    return ECommandDocumentSnapCreate;\n}(DCommandBase));\nexport { ECommandDocumentSnapCreate };\n//# sourceMappingURL=e-command-document-snap-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapDelete = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapDelete, _super);\n    function ECommandDocumentSnapDelete(snapper, index, target) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._index = index;\n        _this._target = target;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapDelete.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapDelete.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapDelete.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapDelete.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapDelete.prototype.redo = function () {\n        this._snapper.target.remove(this._index);\n        return true;\n    };\n    ECommandDocumentSnapDelete.prototype.undo = function () {\n        this._snapper.target.add(this._target, this._index);\n        return true;\n    };\n    return ECommandDocumentSnapDelete;\n}(DCommandBase));\nexport { ECommandDocumentSnapDelete };\n//# sourceMappingURL=e-command-document-snap-delete.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapGridSize = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapGridSize, _super);\n    function ECommandDocumentSnapGridSize(snapper, size) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._size = size;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapGridSize.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapGridSize.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapGridSize.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapGridSize.prototype.redo = function () {\n        var snapper = this._snapper;\n        var size = this._size;\n        this._size = snapper.grid.size;\n        snapper.grid.size = size;\n        return true;\n    };\n    ECommandDocumentSnapGridSize.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapGridSize;\n}(DCommandBase));\nexport { ECommandDocumentSnapGridSize };\n//# sourceMappingURL=e-command-document-snap-grid-size.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapGridToggleVisibility = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapGridToggleVisibility, _super);\n    function ECommandDocumentSnapGridToggleVisibility(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapGridToggleVisibility.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapGridToggleVisibility.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapGridToggleVisibility.prototype.redo = function () {\n        var grid = this._snapper.grid;\n        grid.visible = !grid.visible;\n        return true;\n    };\n    ECommandDocumentSnapGridToggleVisibility.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapGridToggleVisibility;\n}(DCommandBase));\nexport { ECommandDocumentSnapGridToggleVisibility };\n//# sourceMappingURL=e-command-document-snap-grid-toggle-visibility.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapGridToggle = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapGridToggle, _super);\n    function ECommandDocumentSnapGridToggle(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapGridToggle.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapGridToggle.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapGridToggle.prototype.redo = function () {\n        var grid = this._snapper.grid;\n        grid.enable = !grid.enable;\n        return true;\n    };\n    ECommandDocumentSnapGridToggle.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapGridToggle;\n}(DCommandBase));\nexport { ECommandDocumentSnapGridToggle };\n//# sourceMappingURL=e-command-document-snap-grid-toggle.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapReplace = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapReplace, _super);\n    function ECommandDocumentSnapReplace(snapper, oldValue, newValue, list) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._index = snapper.target.values.indexOf(_this._oldValue);\n        _this._list = list;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapReplace.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapReplace.prototype.redo = function () {\n        var index = this._index;\n        if (0 <= index) {\n            var list = this._list;\n            var newValue = this._newValue;\n            var snapper = this._snapper;\n            if (list.data.selection.contains(this._oldValue)) {\n                snapper.target.replace(index, newValue);\n                list.data.selection.clearAndAdd(newValue);\n            }\n            else {\n                snapper.target.replace(index, newValue);\n            }\n        }\n        return true;\n    };\n    ECommandDocumentSnapReplace.prototype.undo = function () {\n        var index = this._index;\n        if (0 <= index) {\n            var list = this._list;\n            var oldValue = this._oldValue;\n            var snapper = this._snapper;\n            if (list.data.selection.contains(this._newValue)) {\n                snapper.target.replace(index, oldValue);\n                list.data.selection.clearAndAdd(oldValue);\n            }\n            else {\n                snapper.target.replace(index, oldValue);\n            }\n        }\n        return true;\n    };\n    return ECommandDocumentSnapReplace;\n}(DCommandBase));\nexport { ECommandDocumentSnapReplace };\n//# sourceMappingURL=e-command-document-snap-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapSendBackward, _super);\n    function ECommandDocumentSnapSendBackward(snapper, index) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._index = index;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapSendBackward.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapSendBackward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapSendBackward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapSendBackward.prototype.redo = function () {\n        var index = this._index;\n        this._snapper.target.swap(index, index + 1);\n        return true;\n    };\n    ECommandDocumentSnapSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapSendBackward;\n}(DCommandBase));\nexport { ECommandDocumentSnapSendBackward };\n//# sourceMappingURL=e-command-document-snap-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapTargetToggleVisibility = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapTargetToggleVisibility, _super);\n    function ECommandDocumentSnapTargetToggleVisibility(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapTargetToggleVisibility.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapTargetToggleVisibility.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapTargetToggleVisibility.prototype.redo = function () {\n        var target = this._snapper.target;\n        target.visible = !target.visible;\n        return true;\n    };\n    ECommandDocumentSnapTargetToggleVisibility.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapTargetToggleVisibility;\n}(DCommandBase));\nexport { ECommandDocumentSnapTargetToggleVisibility };\n//# sourceMappingURL=e-command-document-snap-target-toggle-visibility.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapTargetToggle = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapTargetToggle, _super);\n    function ECommandDocumentSnapTargetToggle(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapTargetToggle.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapTargetToggle.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapTargetToggle.prototype.redo = function () {\n        var target = this._snapper.target;\n        target.enable = !target.enable;\n        return true;\n    };\n    ECommandDocumentSnapTargetToggle.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapTargetToggle;\n}(DCommandBase));\nexport { ECommandDocumentSnapTargetToggle };\n//# sourceMappingURL=e-command-document-snap-target-toggle.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapToggle = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapToggle, _super);\n    function ECommandDocumentSnapToggle(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapToggle.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapToggle.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapToggle.prototype.redo = function () {\n        var snapper = this._snapper;\n        snapper.enable = !snapper.enable;\n        return true;\n    };\n    ECommandDocumentSnapToggle.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapToggle;\n}(DCommandBase));\nexport { ECommandDocumentSnapToggle };\n//# sourceMappingURL=e-command-document-snap-toggle.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSummary = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSummary, _super);\n    function ECommandDocumentSummary(diagram, canvas, summary) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._summary = summary;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSummary.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSummary.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSummary.prototype, \"summary\", {\n        get: function () {\n            return this._summary;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSummary.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSummary.prototype.redo = function () {\n        var canvas = this._canvas;\n        var summary = this._summary;\n        this._summary = canvas.summary;\n        canvas.summary = summary;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentSummary.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSummary;\n}(DCommandBase));\nexport { ECommandDocumentSummary };\n//# sourceMappingURL=e-command-document-summary.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentWidth = /** @class */ (function (_super) {\n    __extends(ECommandDocumentWidth, _super);\n    function ECommandDocumentWidth(diagram, canvas, width) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._width = width;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentWidth.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentWidth.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentWidth.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentWidth.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentWidth.prototype.redo = function () {\n        var canvas = this._canvas;\n        var width = this._width;\n        this._width = canvas.width;\n        canvas.x = canvas.x + (canvas.width - width) * 0.5;\n        canvas.width = width;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentWidth.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentWidth;\n}(DCommandBase));\nexport { ECommandDocumentWidth };\n//# sourceMappingURL=e-command-document-width.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerBringForward = /** @class */ (function (_super) {\n    __extends(ECommandLayerBringForward, _super);\n    function ECommandLayerBringForward(index, layerContainer) {\n        var _this = _super.call(this) || this;\n        _this._index = index;\n        _this._layerContainer = layerContainer;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerBringForward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerBringForward.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerBringForward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandLayerBringForward.prototype.redo = function () {\n        var index = this._index;\n        var layerContainer = this._layerContainer;\n        var children = layerContainer.children;\n        var tmp = children[index];\n        children[index] = children[index + 1];\n        children[index + 1] = tmp;\n        layerContainer.onChildrenChange(index);\n        layerContainer.emit(\"change\", layerContainer);\n        DApplications.update(layerContainer);\n        return true;\n    };\n    ECommandLayerBringForward.prototype.undo = function () {\n        this.redo();\n        return true;\n    };\n    return ECommandLayerBringForward;\n}(DCommandBase));\nexport { ECommandLayerBringForward };\n//# sourceMappingURL=e-command-layer-bring-forward.js.map","var EDialogLayerValueBackground = /** @class */ (function () {\n    function EDialogLayerValueBackground(enable, color, alpha) {\n        this.enable = enable;\n        this.color = color;\n        this.alpha = alpha;\n    }\n    EDialogLayerValueBackground.prototype.isEqual = function (target) {\n        return (this.enable === target.enable &&\n            this.color === target.color &&\n            this.alpha === target.alpha);\n    };\n    EDialogLayerValueBackground.from = function (layer) {\n        return new EDialogLayerValueBackground(layer.background.enable, layer.background.color, layer.background.alpha);\n    };\n    return EDialogLayerValueBackground;\n}());\nexport { EDialogLayerValueBackground };\n//# sourceMappingURL=e-dialog-layer-value-background.js.map","import { EShapeActionValueGestureOperationType, EShapeLayerState } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValueBackground } from \"./e-dialog-layer-value-background\";\nvar EDialogLayerValue = /** @class */ (function () {\n    function EDialogLayerValue(name, x, y, width, height, background, visible, interactive, gesture) {\n        this.name = name;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.background = background;\n        this.visible = visible;\n        this.interactive = interactive;\n        this.gesture = gesture;\n    }\n    EDialogLayerValue.prototype.isEqual = function (target) {\n        return (this.name === target.name &&\n            this.x === target.x &&\n            this.y === target.y &&\n            this.width === target.width &&\n            this.height === target.height &&\n            this.background.isEqual(target.background) &&\n            this.visible === target.visible &&\n            this.interactive === target.interactive &&\n            this.gesture === target.gesture);\n    };\n    EDialogLayerValue.prototype.copyTo = function (layer) {\n        layer.name = this.name;\n        layer.position.set(this.x, this.y);\n        layer.width = this.width;\n        layer.height = this.height;\n        layer.background.copy(this.background);\n        var state = layer.state;\n        state.lock();\n        state.set(EShapeLayerState.INVISIBLE, !this.visible);\n        state.set(EShapeLayerState.INTERACTIVE, this.interactive);\n        var gesture = this.gesture;\n        state.set(EShapeLayerState.DRAGGABLE, !!(gesture & EShapeActionValueGestureOperationType.DRAG));\n        state.set(EShapeLayerState.PINCHABLE, !!(gesture & EShapeActionValueGestureOperationType.PINCH));\n        state.unlock();\n        return this;\n    };\n    EDialogLayerValue.from = function (layer) {\n        var drag = layer.state.is(EShapeLayerState.DRAGGABLE)\n            ? EShapeActionValueGestureOperationType.DRAG\n            : EShapeActionValueGestureOperationType.NONE;\n        var pinch = layer.state.is(EShapeLayerState.PINCHABLE)\n            ? EShapeActionValueGestureOperationType.PINCH\n            : EShapeActionValueGestureOperationType.NONE;\n        var gesture = drag | pinch;\n        return new EDialogLayerValue(layer.name, layer.position.x, layer.position.y, layer.width, layer.height, EDialogLayerValueBackground.from(layer), !layer.state.is(EShapeLayerState.INVISIBLE), layer.state.is(EShapeLayerState.INTERACTIVE), gesture);\n    };\n    return EDialogLayerValue;\n}());\nexport { EDialogLayerValue };\n//# sourceMappingURL=e-dialog-layer-value.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValue } from \"../editor/e-dialog-layer-value\";\nvar ECommandLayerChange = /** @class */ (function (_super) {\n    __extends(ECommandLayerChange, _super);\n    function ECommandLayerChange(layer, value, layerContainer) {\n        var _this = _super.call(this) || this;\n        _this._layer = layer;\n        _this._layerContainer = layerContainer;\n        _this._oldValue = EDialogLayerValue.from(layer);\n        _this._newValue = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerChange.prototype, \"layer\", {\n        get: function () {\n            return this._layer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerChange.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerChange.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerChange.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerChange.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandLayerChange.prototype.redo = function () {\n        this._newValue.copyTo(this._layer);\n        var layerContainer = this._layerContainer;\n        layerContainer.emit(\"change\", layerContainer);\n        return true;\n    };\n    ECommandLayerChange.prototype.undo = function () {\n        this._oldValue.copyTo(this._layer);\n        var layerContainer = this._layerContainer;\n        layerContainer.emit(\"change\", layerContainer);\n        return true;\n    };\n    return ECommandLayerChange;\n}(DCommandBase));\nexport { ECommandLayerChange };\n//# sourceMappingURL=e-command-layer-change.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerCreate = /** @class */ (function (_super) {\n    __extends(ECommandLayerCreate, _super);\n    function ECommandLayerCreate(value, layerContainer, selection) {\n        var _this = _super.call(this) || this;\n        _this._value = value;\n        _this._layerContainer = layerContainer;\n        _this._layerActive = layerContainer.active;\n        _this._layerCreated = null;\n        _this._selection = selection;\n        _this._selectionStored = null;\n        return _this;\n    }\n    ECommandLayerCreate.prototype.newLayer = function (value, layerContainer) {\n        var result = layerContainer.create(value.name, true);\n        value.copyTo(result);\n        return result;\n    };\n    Object.defineProperty(ECommandLayerCreate.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"layerActive\", {\n        get: function () {\n            return this._layerActive;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"layerCreated\", {\n        get: function () {\n            return this._layerCreated;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"selectionStored\", {\n        get: function () {\n            return this._selectionStored;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerCreate.prototype.execute = function () {\n        var selection = this._selection;\n        if (!selection.isEmpty()) {\n            this._selectionStored = selection.store();\n            selection.clear();\n        }\n        else {\n            this._selectionStored = null;\n        }\n        this._layerCreated = this.newLayer(this._value, this._layerContainer);\n        this._layerCreated.reference += 1;\n        return true;\n    };\n    ECommandLayerCreate.prototype.redo = function () {\n        var selectionStored = this._selectionStored;\n        if (selectionStored != null) {\n            this._selection.clear();\n        }\n        var layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            this._layerContainer.attach(layerCreated, true);\n        }\n        return true;\n    };\n    ECommandLayerCreate.prototype.undo = function () {\n        var layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            this._layerContainer.detach(layerCreated, this._layerActive);\n        }\n        var selectionStored = this._selectionStored;\n        if (selectionStored != null) {\n            this._selection.restore(selectionStored);\n        }\n        return true;\n    };\n    ECommandLayerCreate.prototype.destroy = function () {\n        var layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            layerCreated.reference -= 1;\n            if (layerCreated.parent == null && layerCreated.reference <= 0) {\n                layerCreated.destroy();\n            }\n        }\n        this._layerActive = null;\n    };\n    return ECommandLayerCreate;\n}(DCommandBase));\nexport { ECommandLayerCreate };\n//# sourceMappingURL=e-command-layer-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerDelete = /** @class */ (function (_super) {\n    __extends(ECommandLayerDelete, _super);\n    function ECommandLayerDelete(layer, layerContainer, selection) {\n        var _this = _super.call(this) || this;\n        _this._layerContainer = layerContainer;\n        _this._layerActive = layerContainer.active;\n        _this._layer = layer;\n        layer.reference += 1;\n        _this._layerIndex = -1;\n        _this._selection = selection;\n        _this._selectionStored = null;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layerActive\", {\n        get: function () {\n            return this._layerActive;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layer\", {\n        get: function () {\n            return this._layer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layerIndex\", {\n        get: function () {\n            return this._layerIndex;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"selectionStored\", {\n        get: function () {\n            return this._selectionStored;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerDelete.prototype.execute = function () {\n        var layer = this._layer;\n        var layerContainer = this._layerContainer;\n        var selection = this._selection;\n        if (layer === layerContainer.active && !selection.isEmpty()) {\n            this._selectionStored = selection.store();\n            selection.clear();\n        }\n        else {\n            this._selectionStored = null;\n        }\n        this._layerIndex = layerContainer.delete(layer, true);\n        return true;\n    };\n    ECommandLayerDelete.prototype.redo = function () {\n        if (this._selectionStored != null) {\n            this._selection.clear();\n        }\n        this._layerContainer.delete(this._layer, true);\n        return true;\n    };\n    ECommandLayerDelete.prototype.undo = function () {\n        this._layerContainer.attachAt(this._layer, this._layerIndex, this._layer === this._layerActive);\n        if (this._selectionStored != null) {\n            this._selection.restore(this._selectionStored);\n        }\n        return true;\n    };\n    ECommandLayerDelete.prototype.destroy = function () {\n        var layer = this._layer;\n        layer.reference -= 1;\n        if (layer.parent == null && layer.reference <= 0) {\n            layer.destroy();\n        }\n        this._layerActive = null;\n        this._selectionStored = null;\n    };\n    return ECommandLayerDelete;\n}(DCommandBase));\nexport { ECommandLayerDelete };\n//# sourceMappingURL=e-command-layer-delete.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandLayerSendBackward, _super);\n    function ECommandLayerSendBackward(index, layerContainer) {\n        var _this = _super.call(this) || this;\n        _this._index = index;\n        _this._layerContainer = layerContainer;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerSendBackward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerSendBackward.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerSendBackward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandLayerSendBackward.prototype.redo = function () {\n        var index = this._index;\n        var layerContainer = this._layerContainer;\n        var children = layerContainer.children;\n        var tmp = children[index];\n        children[index] = children[index - 1];\n        children[index - 1] = tmp;\n        layerContainer.onChildrenChange(index);\n        layerContainer.emit(\"change\", layerContainer);\n        DApplications.update(layerContainer);\n        return true;\n    };\n    ECommandLayerSendBackward.prototype.undo = function () {\n        this.redo();\n        return true;\n    };\n    return ECommandLayerSendBackward;\n}(DCommandBase));\nexport { ECommandLayerSendBackward };\n//# sourceMappingURL=e-command-layer-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueAdd, _super);\n    function ECommandShapeActionValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueAdd.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueAdd.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeActionValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].action.add(value);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.action.remove(shape.action.size() - 1);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeActionValueAdd;\n}(DCommandBase));\nexport { ECommandShapeActionValueAdd };\n//# sourceMappingURL=e-command-shape-action-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueBringForward, _super);\n    function ECommandShapeActionValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        _this._indices = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueBringForward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueBringForward.prototype.execute = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.action.indexOf(target);\n            indices.push(index);\n            if (0 < index) {\n                shape.action.swap(index - 1, index);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 < index) {\n                shape.action.swap(index - 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeActionValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeActionValueBringForward };\n//# sourceMappingURL=e-command-shape-action-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueRemove, _super);\n    function ECommandShapeActionValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        _this._indices = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueRemove.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueRemove.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueRemove.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueRemove.prototype.execute = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.action.indexOf(target);\n            indices.push(index);\n            if (0 <= index) {\n                shape.action.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.action.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.action.add(target, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeActionValueRemove;\n}(DCommandBase));\nexport { ECommandShapeActionValueRemove };\n//# sourceMappingURL=e-command-shape-action-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueReplace, _super);\n    function ECommandShapeActionValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        _this._indices = [];\n        _this._oldValues = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"oldValues\", {\n        get: function () {\n            return this._oldValues;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueReplace.prototype.execute = function () {\n        var oldValue = this._oldValue;\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.action.indexOf(oldValue);\n            indices.push(index);\n            if (0 <= index) {\n                oldValues.push(shape.action.get(index));\n                shape.action.set(index, newValue);\n            }\n            else {\n                oldValues.push(newValue);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].action.set(index, newValue);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].action.set(index, oldValues[i]);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeActionValueReplace;\n}(DCommandBase));\nexport { ECommandShapeActionValueReplace };\n//# sourceMappingURL=e-command-shape-action-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueSendBackward, _super);\n    function ECommandShapeActionValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var action = shape.action;\n            var index = action.indexOf(target);\n            indices.push(index);\n            if (0 <= index && index < action.size() - 1) {\n                action.swap(index + 1, index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueSendBackward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeActionValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var action = shape.action;\n            var index = indices[i];\n            if (0 <= index && index < action.size() - 1) {\n                action.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeActionValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeActionValueSendBackward };\n//# sourceMappingURL=e-command-shape-action-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeCreate = /** @class */ (function (_super) {\n    __extends(ECommandShapeCreate, _super);\n    function ECommandShapeCreate(shapes, parent, selection, select) {\n        var _this = _super.call(this) || this;\n        _this._shapes = shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].reference += 1;\n        }\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._select = select;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeCreate.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"shapes\", {\n        get: function () {\n            return this._shapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"selectionStored\", {\n        get: function () {\n            return this._selectionStored;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"select\", {\n        get: function () {\n            return this._select;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeCreate.prototype.execute = function () {\n        var selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            this._selectionStored = selection.store();\n            selection.clearAndAddAll(this._shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeCreate.prototype.redo = function () {\n        var shapes = this._shapes;\n        var parent = this._parent;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].attach(parent);\n        }\n        var selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            selection.clearAndAddAll(shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeCreate.prototype.undo = function () {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].detach();\n        }\n        var selection = this._selection;\n        var selectionStored = this._selectionStored;\n        selection.lock();\n        if (this._select && selectionStored != null) {\n            selection.restore(selectionStored);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeCreate.prototype.destroy = function () {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.reference -= 1;\n            if (shape.parent == null && shape.reference <= 0) {\n                shape.destroy();\n            }\n        }\n    };\n    return ECommandShapeCreate;\n}(DCommandBase));\nexport { ECommandShapeCreate };\n//# sourceMappingURL=e-command-shape-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueAdd, _super);\n    function ECommandShapeDataMappingValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueAdd.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueAdd.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeDataMappingValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                shape.data.mapping.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.remove(mapping.size() - 1);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataMappingValueAdd;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueAdd };\n//# sourceMappingURL=e-command-shape-data-mapping-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueBringForward, _super);\n    function ECommandShapeDataMappingValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 < index) {\n                        mapping.swap(index - 1, index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueBringForward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 < index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataMappingValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueBringForward };\n//# sourceMappingURL=e-command-shape-data-mapping-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueRemove, _super);\n    function ECommandShapeDataMappingValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 <= index) {\n                        mapping.remove(index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueRemove.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueRemove.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueRemove.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueRemove.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataMappingValueRemove;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueRemove };\n//# sourceMappingURL=e-command-shape-data-mapping-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueReplace, _super);\n    function ECommandShapeDataMappingValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(oldValue);\n                    indices.push(index);\n                    if (0 <= index) {\n                        oldValues.push(mapping.get(index));\n                        mapping.set(index, newValue);\n                    }\n                    else {\n                        oldValues.push(newValue);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"oldValues\", {\n        get: function () {\n            return this._oldValues;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.set(index, newValue);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.set(index, oldValues[i]);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataMappingValueReplace;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueReplace };\n//# sourceMappingURL=e-command-shape-data-mapping-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueSendBackward, _super);\n    function ECommandShapeDataMappingValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 <= index && index < mapping.size() - 1) {\n                        mapping.swap(index + 1, index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueSendBackward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            var mapping = shape.data.getMapping();\n            if (mapping && 0 <= index && index < mapping.size() - 1) {\n                mapping.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataMappingValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueSendBackward };\n//# sourceMappingURL=e-command-shape-data-mapping-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueAdd, _super);\n    function ECommandShapeDataValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueAdd.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueAdd.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeDataValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].data.add(value);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.data.remove(shape.data.size() - 1);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataValueAdd;\n}(DCommandBase));\nexport { ECommandShapeDataValueAdd };\n//# sourceMappingURL=e-command-shape-data-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueBringForward, _super);\n    function ECommandShapeDataValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.data.indexOf(target);\n            indices.push(index);\n            if (0 < index) {\n                shape.data.swap(index - 1, index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueBringForward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 < index) {\n                shape.data.swap(index - 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeDataValueBringForward };\n//# sourceMappingURL=e-command-shape-data-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueRemove, _super);\n    function ECommandShapeDataValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.data.indexOf(target);\n            indices.push(index);\n            if (0 <= index) {\n                shape.data.remove(index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueRemove.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueRemove.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueRemove.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.data.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.data.add(target, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataValueRemove;\n}(DCommandBase));\nexport { ECommandShapeDataValueRemove };\n//# sourceMappingURL=e-command-shape-data-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueReplace, _super);\n    function ECommandShapeDataValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.data.indexOf(oldValue);\n            indices.push(index);\n            if (0 <= index) {\n                oldValues.push(shape.data.get(index));\n                shape.data.set(index, newValue);\n            }\n            else {\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"oldValues\", {\n        get: function () {\n            return this._oldValues;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].data.set(index, newValue);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].data.set(index, oldValues[i]);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataValueReplace;\n}(DCommandBase));\nexport { ECommandShapeDataValueReplace };\n//# sourceMappingURL=e-command-shape-data-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueSendBackward, _super);\n    function ECommandShapeDataValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var data = shape.data;\n            var index = data.indexOf(target);\n            indices.push(index);\n            if (0 <= index && index < data.size() - 1) {\n                data.swap(index + 1, index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueSendBackward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var data = shape.data;\n            var index = indices[i];\n            if (0 <= index && index < data.size() - 1) {\n                data.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeDataValueSendBackward };\n//# sourceMappingURL=e-command-shape-data-value-send-backward.js.map","import { EShapeBase } from \"@wcardinal/wcardinal-ui\";\n/**\n * {@link EShape} search utility.\n */\nvar UtilShapeSearch = /** @class */ (function () {\n    function UtilShapeSearch() {\n    }\n    /**\n     * Returns indices of the given shapes.\n     *\n     * @param shapes shapes\n     * @return indices\n     */\n    UtilShapeSearch.toIndices = function (shapes) {\n        var result = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            result.push(shapes[i].index);\n        }\n        return result;\n    };\n    /**\n     * Returns a depth of the given shape.\n     *\n     * @param shape a shape\n     * @return a depth\n     */\n    UtilShapeSearch.toDepth = function (shape) {\n        var result = 0;\n        var parent = shape.parent;\n        while (parent instanceof EShapeBase) {\n            result += 1;\n            parent = parent.parent;\n        }\n        return result;\n    };\n    /**\n     * Returns a deepest shape on the path to the given shapes.\n     *\n     * @param shapeA a shape\n     * @param shapeB a shape\n     * @return a found shape\n     */\n    UtilShapeSearch.toSharedParent = function (shapeA, shapeB) {\n        var depthA = this.toDepth(shapeA);\n        var depthB = this.toDepth(shapeB);\n        if (depthA < depthB) {\n            var parent_1 = shapeA.parent;\n            while (parent_1 instanceof EShapeBase) {\n                if (this.isParent(shapeB, parent_1)) {\n                    return parent_1;\n                }\n                parent_1 = parent_1.parent;\n            }\n            return parent_1;\n        }\n        else {\n            var parent_2 = shapeB.parent;\n            while (parent_2 instanceof EShapeBase) {\n                if (this.isParent(shapeA, parent_2)) {\n                    return parent_2;\n                }\n                parent_2 = parent_2.parent;\n            }\n            return parent_2;\n        }\n    };\n    /**\n     * Returns a shape on the path to the given shape whose parent is equals to the given parent.\n     * If there is no such shape, returns a root shape on the path.\n     *\n     * @param shape a shape\n     * @param parent a parent\n     * @returns a found shape\n     */\n    UtilShapeSearch.toOfParent = function (shape, parent) {\n        var shapeParent = shape.parent;\n        while (shapeParent !== parent && shapeParent instanceof EShapeBase) {\n            shape = shapeParent;\n            shapeParent = shapeParent.parent;\n        }\n        return shape;\n    };\n    /**\n     * Returns true if the given target is on the path to the given shape.\n     *\n     * @param shape a shape\n     * @param target a check target\n     * @return true if the given target is on the path to the given shape\n     */\n    UtilShapeSearch.isParent = function (shape, target) {\n        var parent = shape.parent;\n        while (parent instanceof EShapeBase) {\n            if (parent === target) {\n                return true;\n            }\n            parent = parent.parent;\n        }\n        return false;\n    };\n    /**\n     * Returns a selected shape on the path to the given shape.\n     * If there are more than one selected shapes, returns a deepest selected shape.\n     *\n     * @param shape a shape\n     * @return a found selected shape or null\n     */\n    UtilShapeSearch.toSelected = function (shape) {\n        var target = shape;\n        while (target instanceof EShapeBase) {\n            if (target.selected) {\n                return target;\n            }\n            target = target.parent;\n        }\n        return null;\n    };\n    UtilShapeSearch.findChildById = function (shape, id, recursively) {\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.id === id) {\n                return child;\n            }\n            if (recursively === true) {\n                var result = UtilShapeSearch.findChildById(child, id, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilShapeSearch.findChildByType = function (shape, type, recursively) {\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.type === type) {\n                return child;\n            }\n            if (recursively === true) {\n                var result = UtilShapeSearch.findChildByType(child, type, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilShapeSearch.findChild = function (shape, matcher, recursively) {\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (matcher(child)) {\n                return child;\n            }\n            if (recursively === true) {\n                var result = UtilShapeSearch.findChild(child, matcher, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilShapeSearch.findChildrenByType = function (shape, type, recursively, result) {\n        result = result || [];\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.type === type) {\n                result.push(child);\n            }\n            if (recursively === true) {\n                UtilShapeSearch.findChildrenByType(child, type, recursively, result);\n            }\n        }\n        return result;\n    };\n    UtilShapeSearch.findChildren = function (shape, matcher, recursively, result) {\n        result = result || [];\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (matcher(child)) {\n                result.push(child);\n            }\n            if (recursively === true) {\n                UtilShapeSearch.findChildren(child, matcher, recursively, result);\n            }\n        }\n        return result;\n    };\n    UtilShapeSearch.COMPARATOR_INDEX = function (a, b) {\n        return a.index - b.index;\n    };\n    return UtilShapeSearch;\n}());\nexport { UtilShapeSearch };\n//# sourceMappingURL=util-shape-search.js.map","import { UtilShapeSearch } from \"./util-shape-search\";\nvar UtilShapeDeleter = /** @class */ (function () {\n    function UtilShapeDeleter() {\n    }\n    UtilShapeDeleter.addAll = function (shapes, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            result.add(shape);\n            this.addAll(shape.children, result);\n        }\n        return result;\n    };\n    UtilShapeDeleter.delete = function (parent, shapes, generateDeletedShapeList, deletedShapeSet) {\n        var _a;\n        var children = parent.children;\n        var length = children.length;\n        // Update indices\n        deletedShapeSet !== null && deletedShapeSet !== void 0 ? deletedShapeSet : (deletedShapeSet = (_a = UtilShapeDeleter.EXCEPTIONS) !== null && _a !== void 0 ? _a : (UtilShapeDeleter.EXCEPTIONS = new Set()));\n        for (var i = 0; i < length; ++i) {\n            var child = children[i];\n            if (child.selected) {\n                child.index = length + i;\n                deletedShapeSet.add(child);\n                this.addAll(child.children, deletedShapeSet);\n            }\n            else {\n                child.index = i;\n            }\n        }\n        // Sort\n        children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n        // Detach\n        if (generateDeletedShapeList === true) {\n            for (var i = length - 1; 0 <= i; --i) {\n                var child = children[i];\n                if (child.selected) {\n                    child.index -= length;\n                    child.parent = null;\n                    child.selected = false;\n                    child.uploaded = undefined;\n                    child.onDetach(deletedShapeSet);\n                }\n                else {\n                    if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                        deletedShapeSet.clear();\n                    }\n                    var size = children.length - (i + 1);\n                    if (0 < size) {\n                        var result = children.splice(i + 1, size);\n                        if (shapes != null) {\n                            shapes.length = 0;\n                        }\n                        parent.onChildTransformChange();\n                        parent.toDirty();\n                        return result;\n                    }\n                    else {\n                        if (shapes != null) {\n                            shapes.length = 0;\n                        }\n                        return null;\n                    }\n                }\n            }\n            if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                deletedShapeSet.clear();\n            }\n            if (0 < children.length) {\n                var result = children.splice(0, children.length);\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                parent.onChildTransformChange();\n                parent.toDirty();\n                return result;\n            }\n            else {\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                return null;\n            }\n        }\n        else {\n            for (var i = length - 1; 0 <= i; --i) {\n                var child = children[i];\n                if (child.selected) {\n                    child.parent = null;\n                    child.selected = false;\n                    child.uploaded = undefined;\n                    child.onDetach(deletedShapeSet);\n                }\n                else {\n                    if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                        deletedShapeSet.clear();\n                    }\n                    children.length = i + 1;\n                    if (shapes != null) {\n                        shapes.length = 0;\n                    }\n                    parent.onChildTransformChange();\n                    parent.toDirty();\n                    return null;\n                }\n            }\n            if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                deletedShapeSet.clear();\n            }\n            if (0 < children.length) {\n                children.length = 0;\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                parent.onChildTransformChange();\n                parent.toDirty();\n            }\n            else {\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n            }\n            return null;\n        }\n    };\n    return UtilShapeDeleter;\n}());\nexport { UtilShapeDeleter };\n//# sourceMappingURL=util-shape-deleter.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nvar ECommandShapeDelete = /** @class */ (function (_super) {\n    __extends(ECommandShapeDelete, _super);\n    function ECommandShapeDelete(shapes, indices, parent, selection, select) {\n        var _this = _super.call(this) || this;\n        _this._shapes = shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].reference += 1;\n        }\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._select = select;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDelete.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"shapes\", {\n        get: function () {\n            return this._shapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"select\", {\n        get: function () {\n            return this._select;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDelete.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDelete.prototype.redo = function () {\n        var selection = this._selection;\n        if (this._select) {\n            selection.delete(false);\n        }\n        else {\n            var shapes = this._shapes;\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = true;\n            }\n            UtilShapeDeleter.delete(this._parent, undefined, false);\n            selection.update(\"TREE\");\n        }\n        return true;\n    };\n    ECommandShapeDelete.prototype.undo = function () {\n        var shapes = this._shapes;\n        var indices = this._indices;\n        var parent = this._parent;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].attach(parent, indices[i]);\n        }\n        var selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            selection.clearAndAddAll(shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeDelete.prototype.destroy = function () {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.reference -= 1;\n            if (shape.parent == null && shape.reference <= 0) {\n                shape.destroy();\n            }\n        }\n        shapes.length = 0;\n    };\n    return ECommandShapeDelete;\n}(DCommandBase));\nexport { ECommandShapeDelete };\n//# sourceMappingURL=e-command-shape-delete.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeConnectors, EShapeGroup, EShapeLockPart, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nvar ECommandShapeGroup = /** @class */ (function (_super) {\n    __extends(ECommandShapeGroup, _super);\n    function ECommandShapeGroup(parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._before = [];\n        _this._deleteds = [];\n        _this._indices = [];\n        _this._createds = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeGroup.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"before\", {\n        get: function () {\n            return this._before;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"deleteds\", {\n        get: function () {\n            return this._deleteds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"createds\", {\n        get: function () {\n            return this._createds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeGroup.prototype.execute = function () {\n        // Save the current selection\n        var selection = this._selection;\n        this._before = selection.store();\n        selection.lock();\n        // Unselect shapes that do not have the grouping capability\n        var shapes = selection.get();\n        for (var i = shapes.length - 1; 0 <= i; --i) {\n            var shape = shapes[i];\n            if (!EShapeCapabilities.contains(shape, EShapeCapability.GROUPING)) {\n                shape.selected = false;\n                shapes.splice(i, 1);\n            }\n        }\n        // Delete selected shapes\n        var parent = this._parent;\n        var deletedSet = new Set();\n        var deleteds = UtilShapeDeleter.delete(parent, shapes, true, deletedSet) || [];\n        this._deleteds = deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].reference += 1;\n        }\n        // Create a new group\n        var modifier = selection.modifier;\n        var x = modifier.position.x + modifier.width * 0.5;\n        var y = modifier.position.y + modifier.height * 0.5;\n        var w = modifier.width;\n        var h = modifier.height;\n        var group = new EShapeGroup(EShapeResourceManagerDeserializationMode.EDITOR);\n        group.transform.position.set(x, y);\n        group.size.set(w, h);\n        group.attach(parent);\n        var groupChildren = group.children;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var clone = deleteds[i].clone();\n            clone.lock(EShapeLockPart.ALL);\n            var clonePosition = clone.transform.position;\n            clonePosition.set(clonePosition.x - x, clonePosition.y - y);\n            if (clone instanceof EShapeConnectorLine) {\n                var edge = clone.edge;\n                var tail = edge.tail;\n                var tailAcceptor = tail.acceptor;\n                var tailAcceptorShape = tailAcceptor.shape;\n                var tailLocal = tail.local;\n                if (tailAcceptorShape == null) {\n                    tailLocal.set(tailLocal.x - x, tailLocal.y - y);\n                }\n                else if (!deletedSet.has(tailAcceptorShape)) {\n                    tailAcceptor.shape = null;\n                    tailLocal.set(tailLocal.x - x, tailLocal.y - y);\n                }\n                var head = edge.head;\n                var headAcceptor = head.acceptor;\n                var headAcceptorShape = headAcceptor.shape;\n                var headLocal = head.local;\n                if (headAcceptorShape == null) {\n                    headLocal.set(headLocal.x - x, headLocal.y - y);\n                }\n                else if (!deletedSet.has(headAcceptorShape)) {\n                    headAcceptor.shape = null;\n                    headLocal.set(headLocal.x - x, headLocal.y - y);\n                }\n            }\n            clone.parent = group;\n            groupChildren.push(clone);\n        }\n        EShapeConnectors.moveAll(deleteds, groupChildren, deleteds, groupChildren);\n        for (var i = 0, imax = groupChildren.length; i < imax; ++i) {\n            groupChildren[i].unlock(EShapeLockPart.ALL, true);\n        }\n        group.onChildTransformChange();\n        group.toDirty();\n        group.onAttach();\n        group.reference += 1;\n        this._createds = [group];\n        deletedSet.clear();\n        // Indices\n        this._indices = UtilShapeSearch.toIndices(deleteds);\n        // Select a group\n        selection.clearAndAddAll(this._createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeGroup.prototype.redo = function () {\n        // Delete shapes\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(this._deleteds);\n        selection.delete(false);\n        // Add a group and select it\n        var parent = this._parent;\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            createds[i].attach(parent);\n        }\n        // Select created shapes\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeGroup.prototype.undo = function () {\n        // Delete a group\n        var parent = this._parent;\n        var selection = this._selection;\n        selection.lock();\n        var createds = this._createds;\n        for (var i = createds.length - 1; 0 <= i; --i) {\n            createds[i].detach();\n        }\n        // Restore deleted shapes\n        var deleteds = this._deleteds;\n        var indices = this._indices;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].attach(parent, indices[i]);\n        }\n        // Restore the selection\n        this._selection.restore(this._before);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeGroup.prototype.destroy = function () {\n        // Stored selection\n        this._before.length = 0;\n        // Deleted shapes\n        var deleteds = this._deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var deleted = deleteds[i];\n            deleted.reference -= 1;\n            if (deleted.parent == null && deleted.reference <= 0) {\n                deleted.destroy();\n            }\n        }\n        deleteds.length = 0;\n        // Created shapes\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            var created = createds[i];\n            created.reference -= 1;\n            if (created.parent == null && created.reference <= 0) {\n                created.destroy();\n            }\n        }\n        createds.length = 0;\n    };\n    return ECommandShapeGroup;\n}(DCommandBase));\nexport { ECommandShapeGroup };\n//# sourceMappingURL=e-command-shape-group.js.map","var NONE = 0;\nvar PROPERTY = 1;\nvar PROPERTY_ID = 2;\nvar SELECTION = 4;\nvar TREE = 8;\nexport var EToolSelectSelectionUpdatedPart = {\n    NONE: NONE,\n    PROPERTY: PROPERTY,\n    PROPERTY_ID: PROPERTY_ID,\n    SELECTION: SELECTION,\n    TREE: TREE,\n    ALL: PROPERTY | PROPERTY_ID | SELECTION | TREE\n};\n//# sourceMappingURL=e-tool-select-selection-updated-part.js.map","import { __extends } from \"tslib\";\nimport { EShapeGroup } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeCapabilities } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeProperty = /** @class */ (function (_super) {\n    __extends(ECommandShapeProperty, _super);\n    function ECommandShapeProperty(selection, property, targets) {\n        if (targets === void 0) { targets = selection.get(); }\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._shapes = [];\n        _this._capabilities = [];\n        _this._data = [];\n        _this._property = property;\n        _this._targets = targets;\n        _this._isMerged = false;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeProperty.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeProperty.prototype, \"shapes\", {\n        get: function () {\n            return this._shapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeProperty.prototype, \"capabilities\", {\n        get: function () {\n            return this._capabilities;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeProperty.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeProperty.prototype.toCapability = function (shape) {\n        return EShapeCapability.ALL;\n    };\n    ECommandShapeProperty.prototype.isRecursive = function () {\n        return false;\n    };\n    ECommandShapeProperty.prototype.isMergeable = function () {\n        return false;\n    };\n    ECommandShapeProperty.prototype.isClassMergeable = function (target) {\n        return target.constructor === this.constructor;\n    };\n    ECommandShapeProperty.prototype.execute = function () {\n        var shapes = this._shapes;\n        var capabilities = this._capabilities;\n        var property = this._property;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            this.initProperty(shapes[i], capabilities[i], property);\n        }\n        this._selection.update(this.getParts());\n        return true;\n    };\n    ECommandShapeProperty.prototype.init = function (targets, shapes, capabilities, data, recursive) {\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (recursive && target instanceof EShapeGroup) {\n                if (EShapeCapabilities.contains(target, EShapeCapability.CHILDREN)) {\n                    this.init(target.children, shapes, capabilities, data, recursive);\n                }\n            }\n            else {\n                var capability = this.toCapability(target);\n                if (capability !== EShapeCapability.NONE) {\n                    shapes.push(target);\n                    data.push(this.getProperty(target, capability));\n                    capabilities.push(capability);\n                }\n            }\n        }\n    };\n    ECommandShapeProperty.prototype.merge = function (target) {\n        if (this.isMergeable() && this.isClassMergeable(target)) {\n            this._isMerged = true;\n            this._shapes = target.shapes;\n            this._capabilities = target.capabilities;\n            this._data = target.data;\n            return true;\n        }\n        this.init(this._targets, this._shapes, this._capabilities, this._data, this.isRecursive());\n        return false;\n    };\n    ECommandShapeProperty.prototype.isMerged = function () {\n        return this._isMerged;\n    };\n    ECommandShapeProperty.prototype.redo = function () {\n        var shapes = this._shapes;\n        var data = this._data;\n        var capabilities = this._capabilities;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var datum = data[i];\n            var capability = capabilities[i];\n            data[i] = this.getProperty(shape, capability);\n            this.setProperty(shape, capability, datum);\n        }\n        this._selection.update(this.getParts());\n        return true;\n    };\n    ECommandShapeProperty.prototype.undo = function () {\n        return this.redo();\n    };\n    ECommandShapeProperty.prototype.destroy = function () {\n        this._shapes.length = 0;\n        this._data.length = 0;\n    };\n    ECommandShapeProperty.prototype.getParts = function () {\n        return EToolSelectSelectionUpdatedPart.PROPERTY;\n    };\n    return ECommandShapeProperty;\n}(DCommandBase));\nexport { ECommandShapeProperty };\n//# sourceMappingURL=e-command-shape-property.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyAll = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyAll, _super);\n    function ECommandShapePropertyAll(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyAll.prototype.toCapability = function (shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.ALL;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            var result = EShapeCapability.NONE;\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                result |= EShapeCapability.POSITION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n                result |= EShapeCapability.WIDTH;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n                result |= EShapeCapability.HEIGHT;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                result |= EShapeCapability.ROTATION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n                result |= EShapeCapability.SKEW;\n            }\n            return result;\n        }\n    };\n    ECommandShapePropertyAll.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y, 0, 0];\n        }\n        else {\n            var transform = shape.transform;\n            var position = transform.position;\n            var size = shape.size;\n            var skew = transform.skew;\n            return [position.x, position.y, size.x, size.y, transform.rotation, skew.x];\n        }\n    };\n    ECommandShapePropertyAll.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            var transform = shape.transform;\n            if (capability & EShapeCapability.POSITION) {\n                transform.position.set(property[0], property[1]);\n            }\n            if (capability & EShapeCapability.HEIGHT) {\n                if (capability & EShapeCapability.WIDTH) {\n                    shape.size.set(property[2], property[3]);\n                }\n                else {\n                    shape.size.y = property[3];\n                }\n            }\n            else if (capability & EShapeCapability.WIDTH) {\n                shape.size.x = property[2];\n            }\n            if (capability & EShapeCapability.ROTATION) {\n                transform.rotation = property[4];\n            }\n            if (capability & EShapeCapability.SKEW) {\n                transform.skew.set(property[5], property[5]);\n            }\n        }\n    };\n    ECommandShapePropertyAll.prototype.initProperty = function (shape, capability, property) {\n        // DO NOTHING\n    };\n    return ECommandShapePropertyAll;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyAll };\n//# sourceMappingURL=e-command-shape-property-all.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyCapability = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCapability, _super);\n    function ECommandShapePropertyCapability() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCapability.prototype.getProperty = function (shape, capability) {\n        var shapeCapability = shape.getCapability();\n        if (shapeCapability != null) {\n            return shapeCapability.locked;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyCapability.prototype.setProperty = function (shape, capability, property) {\n        if (property !== EShapeCapability.NONE) {\n            shape.capability.locked = property;\n        }\n        else {\n            var shapeCapability = shape.getCapability();\n            if (shapeCapability != null) {\n                shapeCapability.locked = property;\n            }\n        }\n    };\n    return ECommandShapePropertyCapability;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyCapability };\n//# sourceMappingURL=e-command-shape-property-capability.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyCapability } from \"./e-command-shape-property-capability\";\nvar ECommandShapePropertyCapabilityLock = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCapabilityLock, _super);\n    function ECommandShapePropertyCapabilityLock() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCapabilityLock.prototype.initProperty = function (shape, capability, property) {\n        shape.capability.locked |= property;\n    };\n    return ECommandShapePropertyCapabilityLock;\n}(ECommandShapePropertyCapability));\nexport { ECommandShapePropertyCapabilityLock };\n//# sourceMappingURL=e-command-shape-property-capability-lock.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyCapability } from \"./e-command-shape-property-capability\";\nvar ECommandShapePropertyCapabilityUnlock = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCapabilityUnlock, _super);\n    function ECommandShapePropertyCapabilityUnlock() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCapabilityUnlock.prototype.initProperty = function (shape, capability, property) {\n        shape.capability.locked &= ~property;\n    };\n    return ECommandShapePropertyCapabilityUnlock;\n}(ECommandShapePropertyCapability));\nexport { ECommandShapePropertyCapabilityUnlock };\n//# sourceMappingURL=e-command-shape-property-capability-unlock.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyCornerOff = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCornerOff, _super);\n    function ECommandShapePropertyCornerOff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCornerOff.prototype.getProperty = function (shape, capability) {\n        return shape.corner;\n    };\n    ECommandShapePropertyCornerOff.prototype.setProperty = function (shape, capability, property) {\n        shape.corner = property;\n    };\n    ECommandShapePropertyCornerOff.prototype.initProperty = function (shape, capability, property) {\n        shape.corner &= ~property;\n    };\n    return ECommandShapePropertyCornerOff;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyCornerOff };\n//# sourceMappingURL=e-command-shape-property-corner-off.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyCornerOn = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCornerOn, _super);\n    function ECommandShapePropertyCornerOn() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCornerOn.prototype.getProperty = function (shape, capability) {\n        return shape.corner;\n    };\n    ECommandShapePropertyCornerOn.prototype.setProperty = function (shape, capability, property) {\n        shape.corner = property;\n    };\n    ECommandShapePropertyCornerOn.prototype.initProperty = function (shape, capability, property) {\n        shape.corner |= property;\n    };\n    return ECommandShapePropertyCornerOn;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyCornerOn };\n//# sourceMappingURL=e-command-shape-property-corner-on.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertySimple = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySimple, _super);\n    function ECommandShapePropertySimple() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySimple.prototype.initProperty = function (shape, capability, property) {\n        this.setProperty(shape, capability, property);\n    };\n    return ECommandShapePropertySimple;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertySimple };\n//# sourceMappingURL=e-command-shape-property-simple.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyCursor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCursor, _super);\n    function ECommandShapePropertyCursor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCursor.prototype.getProperty = function (shape, capability) {\n        return shape.cursor;\n    };\n    ECommandShapePropertyCursor.prototype.setProperty = function (shape, capability, property) {\n        shape.cursor = property;\n    };\n    return ECommandShapePropertyCursor;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyCursor };\n//# sourceMappingURL=e-command-shape-property-cursor.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyRecursive = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRecursive, _super);\n    function ECommandShapePropertyRecursive(selection, property) {\n        return _super.call(this, selection, property) || this;\n    }\n    ECommandShapePropertyRecursive.prototype.isRecursive = function () {\n        return true;\n    };\n    return ECommandShapePropertyRecursive;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyRecursive };\n//# sourceMappingURL=e-command-shape-property-recursive.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyRecursiveSimple = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRecursiveSimple, _super);\n    function ECommandShapePropertyRecursiveSimple() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyRecursiveSimple.prototype.initProperty = function (shape, capability, property) {\n        this.setProperty(shape, capability, property);\n    };\n    return ECommandShapePropertyRecursiveSimple;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyRecursiveSimple };\n//# sourceMappingURL=e-command-shape-property-recursive-simple.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyFillColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFillColor, _super);\n    function ECommandShapePropertyFillColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFillColor.prototype.getProperty = function (shape, capability) {\n        return [shape.fill.color, shape.fill.alpha];\n    };\n    ECommandShapePropertyFillColor.prototype.setProperty = function (shape, capability, property) {\n        shape.fill.set(undefined, property[0], property[1]);\n    };\n    return ECommandShapePropertyFillColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyFillColor };\n//# sourceMappingURL=e-command-shape-property-fill-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyFillDirection = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFillDirection, _super);\n    function ECommandShapePropertyFillDirection() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFillDirection.prototype.getProperty = function (shape, capability) {\n        return shape.fill.direction;\n    };\n    ECommandShapePropertyFillDirection.prototype.setProperty = function (shape, capability, property) {\n        shape.fill.direction = property;\n    };\n    return ECommandShapePropertyFillDirection;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyFillDirection };\n//# sourceMappingURL=e-command-shape-property-fill-direction.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyFillEnable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFillEnable, _super);\n    function ECommandShapePropertyFillEnable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFillEnable.prototype.getProperty = function (shape, capability) {\n        return shape.fill.enable;\n    };\n    ECommandShapePropertyFillEnable.prototype.setProperty = function (shape, capability, property) {\n        shape.fill.enable = property;\n    };\n    return ECommandShapePropertyFillEnable;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyFillEnable };\n//# sourceMappingURL=e-command-shape-property-fill-enable.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyFillPercent = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFillPercent, _super);\n    function ECommandShapePropertyFillPercent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFillPercent.prototype.getProperty = function (shape, capability) {\n        return shape.fill.percent;\n    };\n    ECommandShapePropertyFillPercent.prototype.setProperty = function (shape, capability, property) {\n        shape.fill.percent = property;\n    };\n    return ECommandShapePropertyFillPercent;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyFillPercent };\n//# sourceMappingURL=e-command-shape-property-fill-percent.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyFocusable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFocusable, _super);\n    function ECommandShapePropertyFocusable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFocusable.prototype.getProperty = function (shape, capability) {\n        return shape.state.isFocusable;\n    };\n    ECommandShapePropertyFocusable.prototype.setProperty = function (shape, capability, property) {\n        shape.state.isFocusable = property;\n    };\n    return ECommandShapePropertyFocusable;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyFocusable };\n//# sourceMappingURL=e-command-shape-property-focusable.js.map","import { __extends } from \"tslib\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyId = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyId, _super);\n    function ECommandShapePropertyId() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyId.prototype.getProperty = function (shape, capability) {\n        return shape.id;\n    };\n    ECommandShapePropertyId.prototype.setProperty = function (shape, capability, property) {\n        shape.id = property;\n    };\n    ECommandShapePropertyId.prototype.getParts = function () {\n        return EToolSelectSelectionUpdatedPart.PROPERTY_ID;\n    };\n    return ECommandShapePropertyId;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyId };\n//# sourceMappingURL=e-command-shape-property-id.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyImageClear = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyImageClear, _super);\n    function ECommandShapePropertyImageClear(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyImageClear.prototype.getProperty = function (shape, capability) {\n        return shape.image;\n    };\n    ECommandShapePropertyImageClear.prototype.setProperty = function (shape, capability, property) {\n        shape.image = property;\n    };\n    ECommandShapePropertyImageClear.prototype.initProperty = function (shape, capability, property) {\n        shape.image = undefined;\n        shape.gradient = undefined;\n    };\n    return ECommandShapePropertyImageClear;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyImageClear };\n//# sourceMappingURL=e-command-shape-property-image-clear.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyImageFitTo = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyImageFitTo, _super);\n    function ECommandShapePropertyImageFitTo(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyImageFitTo.prototype.getProperty = function (shape, capability) {\n        var size = shape.size;\n        return [size.x, size.y];\n    };\n    ECommandShapePropertyImageFitTo.prototype.setProperty = function (shape, capability, property) {\n        shape.size.set(property[0], property[1]);\n    };\n    ECommandShapePropertyImageFitTo.prototype.initProperty = function (shape, capability, property) {\n        var image = shape.image;\n        if (image) {\n            shape.size.set(image.width, image.height);\n        }\n    };\n    return ECommandShapePropertyImageFitTo;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyImageFitTo };\n//# sourceMappingURL=e-command-shape-property-image-fit-to.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyImage = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyImage, _super);\n    function ECommandShapePropertyImage(selection, image, gradient) {\n        return _super.call(this, selection, [image, gradient]) || this;\n    }\n    ECommandShapePropertyImage.prototype.getProperty = function (shape, capability) {\n        return shape.image;\n    };\n    ECommandShapePropertyImage.prototype.setProperty = function (shape, capability, property) {\n        shape.image = property;\n    };\n    ECommandShapePropertyImage.prototype.initProperty = function (shape, capability, property) {\n        shape.image = property[0];\n        shape.gradient = property[1];\n    };\n    return ECommandShapePropertyImage;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyImage };\n//# sourceMappingURL=e-command-shape-property-image.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyInteractive = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyInteractive, _super);\n    function ECommandShapePropertyInteractive() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyInteractive.prototype.getProperty = function (shape, capability) {\n        return shape.interactive;\n    };\n    ECommandShapePropertyInteractive.prototype.setProperty = function (shape, capability, property) {\n        shape.interactive = property;\n    };\n    return ECommandShapePropertyInteractive;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyInteractive };\n//# sourceMappingURL=e-command-shape-property-interactive.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadColor, _super);\n    function ECommandShapePropertyLineHeadColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadColor.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadColor.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            var fill = points.marker.head.fill;\n            return [fill.color, fill.alpha];\n        }\n        return [0, 0];\n    };\n    ECommandShapePropertyLineHeadColor.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.fill.set(undefined, property[0], property[1]);\n        }\n    };\n    return ECommandShapePropertyLineHeadColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadColor };\n//# sourceMappingURL=e-command-shape-property-line-head-color.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadMargin = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadMargin, _super);\n    function ECommandShapePropertyLineHeadMargin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadMargin.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadMargin.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            return shape.edge.head.margin;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineHeadMargin.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            shape.edge.head.margin = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadMargin;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadMargin };\n//# sourceMappingURL=e-command-shape-property-line-head-margin.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadSizeX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadSizeX, _super);\n    function ECommandShapePropertyLineHeadSizeX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadSizeX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadSizeX.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.head.size.x;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineHeadSizeX.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.size.x = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadSizeX;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadSizeX };\n//# sourceMappingURL=e-command-shape-property-line-head-size-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadSizeY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadSizeY, _super);\n    function ECommandShapePropertyLineHeadSizeY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadSizeY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadSizeY.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.head.size.y;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineHeadSizeY.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.size.y = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadSizeY;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadSizeY };\n//# sourceMappingURL=e-command-shape-property-line-head-size-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapePointsMarkerType } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadType = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadType, _super);\n    function ECommandShapePropertyLineHeadType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadType.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadType.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.head.type;\n        }\n        return EShapePointsMarkerType.NONE;\n    };\n    ECommandShapePropertyLineHeadType.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.type = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadType;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadType };\n//# sourceMappingURL=e-command-shape-property-line-head-type.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailColor, _super);\n    function ECommandShapePropertyLineTailColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailColor.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailColor.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            var fill = points.marker.tail.fill;\n            return [fill.color, fill.alpha];\n        }\n        return [0, 0];\n    };\n    ECommandShapePropertyLineTailColor.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.fill.set(undefined, property[0], property[1]);\n        }\n    };\n    return ECommandShapePropertyLineTailColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailColor };\n//# sourceMappingURL=e-command-shape-property-line-tail-color.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailMargin = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailMargin, _super);\n    function ECommandShapePropertyLineTailMargin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailMargin.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailMargin.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            return shape.edge.tail.margin;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineTailMargin.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            shape.edge.tail.margin = property;\n        }\n    };\n    return ECommandShapePropertyLineTailMargin;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailMargin };\n//# sourceMappingURL=e-command-shape-property-line-tail-margin.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailSizeX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailSizeX, _super);\n    function ECommandShapePropertyLineTailSizeX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailSizeX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailSizeX.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.tail.size.x;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineTailSizeX.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.size.x = property;\n        }\n    };\n    return ECommandShapePropertyLineTailSizeX;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailSizeX };\n//# sourceMappingURL=e-command-shape-property-line-tail-size-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailSizeY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailSizeY, _super);\n    function ECommandShapePropertyLineTailSizeY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailSizeY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailSizeY.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.tail.size.y;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineTailSizeY.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.size.y = property;\n        }\n    };\n    return ECommandShapePropertyLineTailSizeY;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailSizeY };\n//# sourceMappingURL=e-command-shape-property-line-tail-size-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapePointsMarkerType } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailType = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailType, _super);\n    function ECommandShapePropertyLineTailType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailType.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailType.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.tail.type;\n        }\n        return EShapePointsMarkerType.NONE;\n    };\n    ECommandShapePropertyLineTailType.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.type = property;\n        }\n    };\n    return ECommandShapePropertyLineTailType;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailType };\n//# sourceMappingURL=e-command-shape-property-line-tail-type.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapePointsStyle } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPointsStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPointsStyle, _super);\n    function ECommandShapePropertyPointsStyle(selection, added, removed) {\n        return _super.call(this, selection, [added, removed]) || this;\n    }\n    ECommandShapePropertyPointsStyle.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE)) {\n            return EShapeCapability.LINE;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPointsStyle.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points != null) {\n            return points.style;\n        }\n        return EShapePointsStyle.NONE;\n    };\n    ECommandShapePropertyPointsStyle.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points != null) {\n            points.style = property;\n        }\n    };\n    ECommandShapePropertyPointsStyle.prototype.initProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points != null) {\n            points.style = (points.style & ~property[1]) | property[0];\n        }\n    };\n    return ECommandShapePropertyPointsStyle;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPointsStyle };\n//# sourceMappingURL=e-command-shape-property-points-style.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPositionAndRotate = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionAndRotate, _super);\n    function ECommandShapePropertyPositionAndRotate(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyPositionAndRotate.prototype.toCapability = function (shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.ALL;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            var result = EShapeCapability.NONE;\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                result |= EShapeCapability.POSITION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                result |= EShapeCapability.ROTATION;\n            }\n            return result;\n        }\n    };\n    ECommandShapePropertyPositionAndRotate.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y];\n        }\n        else {\n            var transform = shape.transform;\n            var position = transform.position;\n            return [position.x, position.y, transform.rotation, 0];\n        }\n    };\n    ECommandShapePropertyPositionAndRotate.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            var transform = shape.transform;\n            if (capability & EShapeCapability.POSITION) {\n                transform.position.set(property[0], property[1]);\n            }\n            if (capability & EShapeCapability.ROTATION) {\n                transform.rotation = property[2];\n            }\n        }\n    };\n    ECommandShapePropertyPositionAndRotate.prototype.initProperty = function (shape, capability, property) {\n        // DO NOTHING\n    };\n    return ECommandShapePropertyPositionAndRotate;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPositionAndRotate };\n//# sourceMappingURL=e-command-shape-property-position-and-rotation.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPositionLeft = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionLeft, _super);\n    function ECommandShapePropertyPositionLeft() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionLeft.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionLeft.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.x;\n    };\n    ECommandShapePropertyPositionLeft.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.x = property;\n    };\n    ECommandShapePropertyPositionLeft.prototype.initProperty = function (shape, capability, property) {\n        var _a;\n        var rectangle = ((_a = ECommandShapePropertyPositionLeft.WORK) !== null && _a !== void 0 ? _a : (ECommandShapePropertyPositionLeft.WORK = new Rectangle()));\n        shape.getBoundsLocal(false, rectangle);\n        shape.transform.position.x += property - rectangle.x;\n    };\n    ECommandShapePropertyPositionLeft.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionLeft;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPositionLeft };\n//# sourceMappingURL=e-command-shape-property-position-left.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPositionTop = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionTop, _super);\n    function ECommandShapePropertyPositionTop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionTop.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionTop.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.y;\n    };\n    ECommandShapePropertyPositionTop.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.y = property;\n    };\n    ECommandShapePropertyPositionTop.prototype.initProperty = function (shape, capability, property) {\n        var _a;\n        var rectangle = ((_a = ECommandShapePropertyPositionTop.WORK) !== null && _a !== void 0 ? _a : (ECommandShapePropertyPositionTop.WORK = new Rectangle()));\n        shape.getBoundsLocal(false, rectangle);\n        shape.transform.position.y += property - rectangle.y;\n    };\n    ECommandShapePropertyPositionTop.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionTop;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPositionTop };\n//# sourceMappingURL=e-command-shape-property-position-top.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyPositionX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionX, _super);\n    function ECommandShapePropertyPositionX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionX.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.x;\n    };\n    ECommandShapePropertyPositionX.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.x = property;\n    };\n    ECommandShapePropertyPositionX.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionX;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyPositionX };\n//# sourceMappingURL=e-command-shape-property-position-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyPositionY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionY, _super);\n    function ECommandShapePropertyPositionY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionY.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.y;\n    };\n    ECommandShapePropertyPositionY.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.y = property;\n    };\n    ECommandShapePropertyPositionY.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionY;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyPositionY };\n//# sourceMappingURL=e-command-shape-property-position-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPosition = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPosition, _super);\n    function ECommandShapePropertyPosition(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyPosition.prototype.toCapability = function (shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.POSITION;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                return EShapeCapability.POSITION;\n            }\n            return EShapeCapability.NONE;\n        }\n    };\n    ECommandShapePropertyPosition.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y];\n        }\n        else {\n            var position = shape.transform.position;\n            return [position.x, position.y, 0, 0];\n        }\n    };\n    ECommandShapePropertyPosition.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            shape.transform.position.set(property[0], property[1]);\n        }\n    };\n    ECommandShapePropertyPosition.prototype.initProperty = function (shape, capability, property) {\n        // DO NOTHING\n    };\n    return ECommandShapePropertyPosition;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPosition };\n//# sourceMappingURL=e-command-shape-property-position.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyRadius = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRadius, _super);\n    function ECommandShapePropertyRadius() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyRadius.prototype.getProperty = function (shape, capability) {\n        return shape.radius;\n    };\n    ECommandShapePropertyRadius.prototype.setProperty = function (shape, capability, property) {\n        shape.radius = property;\n    };\n    ECommandShapePropertyRadius.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyRadius;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyRadius };\n//# sourceMappingURL=e-command-shape-property-radius.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyRotation = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRotation, _super);\n    function ECommandShapePropertyRotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyRotation.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n            return EShapeCapability.ROTATION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyRotation.prototype.getProperty = function (shape, capability) {\n        return shape.transform.rotation;\n    };\n    ECommandShapePropertyRotation.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.rotation = property;\n    };\n    ECommandShapePropertyRotation.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyRotation;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyRotation };\n//# sourceMappingURL=e-command-shape-property-rotation.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyShortcut = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyShortcut, _super);\n    function ECommandShapePropertyShortcut() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyShortcut.prototype.getProperty = function (shape, capability) {\n        return shape.shortcut;\n    };\n    ECommandShapePropertyShortcut.prototype.setProperty = function (shape, capability, property) {\n        shape.shortcut = property;\n    };\n    return ECommandShapePropertyShortcut;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyShortcut };\n//# sourceMappingURL=e-command-shape-property-shortcut.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertySizeX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySizeX, _super);\n    function ECommandShapePropertySizeX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySizeX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n            return EShapeCapability.WIDTH;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertySizeX.prototype.getProperty = function (shape, capability) {\n        return shape.size.x;\n    };\n    ECommandShapePropertySizeX.prototype.setProperty = function (shape, capability, property) {\n        shape.size.x = property;\n    };\n    ECommandShapePropertySizeX.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertySizeX;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertySizeX };\n//# sourceMappingURL=e-command-shape-property-size-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertySizeY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySizeY, _super);\n    function ECommandShapePropertySizeY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySizeY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n            return EShapeCapability.HEIGHT;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertySizeY.prototype.getProperty = function (shape, capability) {\n        return shape.size.y;\n    };\n    ECommandShapePropertySizeY.prototype.setProperty = function (shape, capability, property) {\n        shape.size.y = property;\n    };\n    ECommandShapePropertySizeY.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertySizeY;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertySizeY };\n//# sourceMappingURL=e-command-shape-property-size-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertySkew = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySkew, _super);\n    function ECommandShapePropertySkew() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySkew.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n            return EShapeCapability.SKEW;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertySkew.prototype.getProperty = function (shape, capability) {\n        return shape.transform.skew.x;\n    };\n    ECommandShapePropertySkew.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.skew.set(property, property);\n    };\n    ECommandShapePropertySkew.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertySkew;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertySkew };\n//# sourceMappingURL=e-command-shape-property-skew.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeAlign = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeAlign, _super);\n    function ECommandShapePropertyStrokeAlign() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeAlign.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.align;\n    };\n    ECommandShapePropertyStrokeAlign.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.align = property;\n    };\n    ECommandShapePropertyStrokeAlign.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyStrokeAlign;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeAlign };\n//# sourceMappingURL=e-command-shape-property-stroke-align.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeColor, _super);\n    function ECommandShapePropertyStrokeColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeColor.prototype.getProperty = function (shape, capability) {\n        return [shape.stroke.color, shape.stroke.alpha];\n    };\n    ECommandShapePropertyStrokeColor.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.set(undefined, property[0], property[1]);\n    };\n    return ECommandShapePropertyStrokeColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeColor };\n//# sourceMappingURL=e-command-shape-property-stroke-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeEnable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeEnable, _super);\n    function ECommandShapePropertyStrokeEnable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeEnable.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.enable;\n    };\n    ECommandShapePropertyStrokeEnable.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.enable = property;\n    };\n    return ECommandShapePropertyStrokeEnable;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeEnable };\n//# sourceMappingURL=e-command-shape-property-stroke-enable.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyStrokeSideOff = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeSideOff, _super);\n    function ECommandShapePropertyStrokeSideOff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeSideOff.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.side;\n    };\n    ECommandShapePropertyStrokeSideOff.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.side = property;\n    };\n    ECommandShapePropertyStrokeSideOff.prototype.initProperty = function (shape, capability, property) {\n        shape.stroke.side &= ~property;\n    };\n    return ECommandShapePropertyStrokeSideOff;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyStrokeSideOff };\n//# sourceMappingURL=e-command-shape-property-stroke-side-off.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyStrokeSideOn = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeSideOn, _super);\n    function ECommandShapePropertyStrokeSideOn() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeSideOn.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.side;\n    };\n    ECommandShapePropertyStrokeSideOn.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.side = property;\n    };\n    ECommandShapePropertyStrokeSideOn.prototype.initProperty = function (shape, capability, property) {\n        shape.stroke.side |= property;\n    };\n    return ECommandShapePropertyStrokeSideOn;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyStrokeSideOn };\n//# sourceMappingURL=e-command-shape-property-stroke-side-on.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyStrokeStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeStyle, _super);\n    function ECommandShapePropertyStrokeStyle(selection, added, removed) {\n        return _super.call(this, selection, [added, removed]) || this;\n    }\n    ECommandShapePropertyStrokeStyle.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.style;\n    };\n    ECommandShapePropertyStrokeStyle.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.style = property;\n    };\n    ECommandShapePropertyStrokeStyle.prototype.initProperty = function (shape, capability, property) {\n        var stroke = shape.stroke;\n        stroke.style = (stroke.style & ~property[1]) | property[0];\n    };\n    return ECommandShapePropertyStrokeStyle;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyStrokeStyle };\n//# sourceMappingURL=e-command-shape-property-stroke-style.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeWidth = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeWidth, _super);\n    function ECommandShapePropertyStrokeWidth() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeWidth.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.width;\n    };\n    ECommandShapePropertyStrokeWidth.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.width = property;\n    };\n    ECommandShapePropertyStrokeWidth.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyStrokeWidth;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeWidth };\n//# sourceMappingURL=e-command-shape-property-stroke-width.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextAlignHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextAlignHorizontal, _super);\n    function ECommandShapePropertyTextAlignHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextAlignHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.align.horizontal;\n    };\n    ECommandShapePropertyTextAlignHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.align.horizontal = property;\n    };\n    return ECommandShapePropertyTextAlignHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextAlignHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-align-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextAlignVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextAlignVertical, _super);\n    function ECommandShapePropertyTextAlignVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextAlignVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.align.vertical;\n    };\n    ECommandShapePropertyTextAlignVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.align.vertical = property;\n    };\n    return ECommandShapePropertyTextAlignVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextAlignVertical };\n//# sourceMappingURL=e-command-shape-property-text-align-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextClipping = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextClipping, _super);\n    function ECommandShapePropertyTextClipping() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextClipping.prototype.getProperty = function (shape, capability) {\n        return shape.text.clipping;\n    };\n    ECommandShapePropertyTextClipping.prototype.setProperty = function (shape, capability, property) {\n        shape.text.clipping = property;\n    };\n    return ECommandShapePropertyTextClipping;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextClipping };\n//# sourceMappingURL=e-command-shape-property-text-clipping.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextColor, _super);\n    function ECommandShapePropertyTextColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextColor.prototype.getProperty = function (shape, capability) {\n        var text = shape.text;\n        return [text.color, text.alpha];\n    };\n    ECommandShapePropertyTextColor.prototype.setProperty = function (shape, capability, property) {\n        var text = shape.text;\n        text.color = property[0];\n        text.alpha = property[1];\n    };\n    return ECommandShapePropertyTextColor;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextColor };\n//# sourceMappingURL=e-command-shape-property-text-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextDirection = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextDirection, _super);\n    function ECommandShapePropertyTextDirection() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextDirection.prototype.getProperty = function (shape, capability) {\n        return shape.text.direction;\n    };\n    ECommandShapePropertyTextDirection.prototype.setProperty = function (shape, capability, property) {\n        shape.text.direction = property;\n    };\n    return ECommandShapePropertyTextDirection;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextDirection };\n//# sourceMappingURL=e-command-shape-property-text-direction.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextFamily = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextFamily, _super);\n    function ECommandShapePropertyTextFamily() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextFamily.prototype.getProperty = function (shape, capability) {\n        return shape.text.family;\n    };\n    ECommandShapePropertyTextFamily.prototype.setProperty = function (shape, capability, property) {\n        shape.text.family = property;\n    };\n    return ECommandShapePropertyTextFamily;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextFamily };\n//# sourceMappingURL=e-command-shape-property-text-family.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextFitting = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextFitting, _super);\n    function ECommandShapePropertyTextFitting() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextFitting.prototype.getProperty = function (shape, capability) {\n        return shape.text.fitting;\n    };\n    ECommandShapePropertyTextFitting.prototype.setProperty = function (shape, capability, property) {\n        shape.text.fitting = property;\n    };\n    return ECommandShapePropertyTextFitting;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextFitting };\n//# sourceMappingURL=e-command-shape-property-text-fitting.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOffsetHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOffsetHorizontal, _super);\n    function ECommandShapePropertyTextOffsetHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOffsetHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.offset.horizontal;\n    };\n    ECommandShapePropertyTextOffsetHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.offset.horizontal = property;\n    };\n    return ECommandShapePropertyTextOffsetHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOffsetHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-offset-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOffsetVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOffsetVertical, _super);\n    function ECommandShapePropertyTextOffsetVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOffsetVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.offset.vertical;\n    };\n    ECommandShapePropertyTextOffsetVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.offset.vertical = property;\n    };\n    return ECommandShapePropertyTextOffsetVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOffsetVertical };\n//# sourceMappingURL=e-command-shape-property-text-offset-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOutlineColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOutlineColor, _super);\n    function ECommandShapePropertyTextOutlineColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOutlineColor.prototype.getProperty = function (shape, capability) {\n        var outline = shape.text.outline;\n        return [outline.color, outline.alpha];\n    };\n    ECommandShapePropertyTextOutlineColor.prototype.setProperty = function (shape, capability, property) {\n        var outline = shape.text.outline;\n        outline.color = property[0];\n        outline.alpha = property[1];\n    };\n    return ECommandShapePropertyTextOutlineColor;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOutlineColor };\n//# sourceMappingURL=e-command-shape-property-text-outline-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOutlineEnable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOutlineEnable, _super);\n    function ECommandShapePropertyTextOutlineEnable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOutlineEnable.prototype.getProperty = function (shape, capability) {\n        return shape.text.outline.enable;\n    };\n    ECommandShapePropertyTextOutlineEnable.prototype.setProperty = function (shape, capability, property) {\n        shape.text.outline.enable = property;\n    };\n    return ECommandShapePropertyTextOutlineEnable;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOutlineEnable };\n//# sourceMappingURL=e-command-shape-property-text-outline-enable.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOutlineWidth = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOutlineWidth, _super);\n    function ECommandShapePropertyTextOutlineWidth() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOutlineWidth.prototype.getProperty = function (shape, capability) {\n        return shape.text.outline.width;\n    };\n    ECommandShapePropertyTextOutlineWidth.prototype.setProperty = function (shape, capability, property) {\n        shape.text.outline.width = property;\n    };\n    ECommandShapePropertyTextOutlineWidth.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextOutlineWidth;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOutlineWidth };\n//# sourceMappingURL=e-command-shape-property-text-outline-width.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextPaddingHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextPaddingHorizontal, _super);\n    function ECommandShapePropertyTextPaddingHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextPaddingHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.padding.horizontal;\n    };\n    ECommandShapePropertyTextPaddingHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.padding.horizontal = property;\n    };\n    return ECommandShapePropertyTextPaddingHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextPaddingHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-padding-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextPaddingVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextPaddingVertical, _super);\n    function ECommandShapePropertyTextPaddingVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextPaddingVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.padding.vertical;\n    };\n    ECommandShapePropertyTextPaddingVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.padding.vertical = property;\n    };\n    return ECommandShapePropertyTextPaddingVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextPaddingVertical };\n//# sourceMappingURL=e-command-shape-property-text-padding-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyTextSizeDelta = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSizeDelta, _super);\n    function ECommandShapePropertyTextSizeDelta() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSizeDelta.prototype.getProperty = function (shape, capability) {\n        return shape.text.size;\n    };\n    ECommandShapePropertyTextSizeDelta.prototype.setProperty = function (shape, capability, property) {\n        shape.text.size = property;\n    };\n    ECommandShapePropertyTextSizeDelta.prototype.initProperty = function (shape, capability, property) {\n        var text = shape.text;\n        text.size = Math.max(0, text.size + property);\n    };\n    return ECommandShapePropertyTextSizeDelta;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyTextSizeDelta };\n//# sourceMappingURL=e-command-shape-property-text-size-delta.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextSize = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSize, _super);\n    function ECommandShapePropertyTextSize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSize.prototype.getProperty = function (shape, capability) {\n        return shape.text.size;\n    };\n    ECommandShapePropertyTextSize.prototype.setProperty = function (shape, capability, property) {\n        shape.text.size = property;\n    };\n    return ECommandShapePropertyTextSize;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextSize };\n//# sourceMappingURL=e-command-shape-property-text-size.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextSpacingHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSpacingHorizontal, _super);\n    function ECommandShapePropertyTextSpacingHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSpacingHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.spacing.horizontal;\n    };\n    ECommandShapePropertyTextSpacingHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.spacing.horizontal = property;\n    };\n    ECommandShapePropertyTextSpacingHorizontal.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextSpacingHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextSpacingHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-spacing-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextSpacingVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSpacingVertical, _super);\n    function ECommandShapePropertyTextSpacingVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSpacingVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.spacing.vertical;\n    };\n    ECommandShapePropertyTextSpacingVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.spacing.vertical = property;\n    };\n    ECommandShapePropertyTextSpacingVertical.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextSpacingVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextSpacingVertical };\n//# sourceMappingURL=e-command-shape-property-text-spacing-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextStyle, _super);\n    function ECommandShapePropertyTextStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextStyle.prototype.getProperty = function (shape, capability) {\n        return shape.text.style;\n    };\n    ECommandShapePropertyTextStyle.prototype.setProperty = function (shape, capability, property) {\n        shape.text.style = property;\n    };\n    return ECommandShapePropertyTextStyle;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextStyle };\n//# sourceMappingURL=e-command-shape-property-text-style.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextValue = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextValue, _super);\n    function ECommandShapePropertyTextValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextValue.prototype.getProperty = function (shape, capability) {\n        return shape.text.value;\n    };\n    ECommandShapePropertyTextValue.prototype.setProperty = function (shape, capability, property) {\n        shape.text.value = property;\n    };\n    ECommandShapePropertyTextValue.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextValue;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextValue };\n//# sourceMappingURL=e-command-shape-property-text-value.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextWeight = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextWeight, _super);\n    function ECommandShapePropertyTextWeight() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextWeight.prototype.getProperty = function (shape, capability) {\n        return shape.text.weight;\n    };\n    ECommandShapePropertyTextWeight.prototype.setProperty = function (shape, capability, property) {\n        shape.text.weight = property;\n    };\n    return ECommandShapePropertyTextWeight;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextWeight };\n//# sourceMappingURL=e-command-shape-property-text-weight.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTitle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTitle, _super);\n    function ECommandShapePropertyTitle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTitle.prototype.getProperty = function (shape, capability) {\n        return shape.title;\n    };\n    ECommandShapePropertyTitle.prototype.setProperty = function (shape, capability, property) {\n        shape.title = property;\n    };\n    return ECommandShapePropertyTitle;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTitle };\n//# sourceMappingURL=e-command-shape-property-title.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeReplaceOne = /** @class */ (function (_super) {\n    __extends(ECommandShapeReplaceOne, _super);\n    function ECommandShapeReplaceOne(newShape, oldShape, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._newShape = newShape;\n        _this._oldShape = oldShape;\n        _this._selection = selection;\n        _this._index = parent.children.indexOf(oldShape);\n        newShape.reference += 1;\n        oldShape.reference += 1;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"oldShape\", {\n        get: function () {\n            return this._oldShape;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"newShape\", {\n        get: function () {\n            return this._newShape;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeReplaceOne.prototype.execute = function () {\n        this._oldShape.detach();\n        this._newShape.attach(this._parent, this._index);\n        this._selection.swapLast(this._oldShape, this._newShape);\n        return true;\n    };\n    ECommandShapeReplaceOne.prototype.redo = function () {\n        this._newShape.attach(this._parent, this._index);\n        this._oldShape.detach();\n        this._selection.swapLast(this._oldShape, this._newShape);\n        return true;\n    };\n    ECommandShapeReplaceOne.prototype.undo = function () {\n        this._newShape.detach();\n        this._oldShape.attach(this._parent, this._index);\n        this._selection.swapLast(this._newShape, this._oldShape);\n        return true;\n    };\n    ECommandShapeReplaceOne.prototype.destroy = function () {\n        // Destroy new shapes\n        var newShape = this._newShape;\n        newShape.reference -= 1;\n        if (newShape.parent == null && newShape.reference <= 0) {\n            newShape.destroy();\n        }\n        // Destroy old shapes\n        var oldShape = this._oldShape;\n        oldShape.reference -= 1;\n        if (oldShape.parent == null && oldShape.reference <= 0) {\n            oldShape.destroy();\n        }\n    };\n    return ECommandShapeReplaceOne;\n}(DCommandBase));\nexport { ECommandShapeReplaceOne };\n//# sourceMappingURL=e-command-shape-replace-one.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeGroup, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeReplace, _super);\n    function ECommandShapeReplace(parent, factory, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._factory = factory;\n        _this._selection = selection;\n        _this._newShapes = [];\n        _this._oldShapes = [];\n        _this._indices = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeReplace.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"oldShapes\", {\n        get: function () {\n            return this._oldShapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"newShapes\", {\n        get: function () {\n            return this._newShapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeReplace.prototype.execute = function () {\n        var parent = this._parent;\n        var indices = this._indices;\n        var newShapes = this._newShapes;\n        var oldShapes = this._oldShapes;\n        var children = parent.children;\n        var factory = this._factory;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.selected) {\n                var newShape = void 0;\n                if (EShapeCapabilities.contains(child, EShapeCapability.REPLACING)) {\n                    if (child instanceof EShapeGroup) {\n                        var pivot = child.transform.pivot;\n                        var pivotX = pivot.x;\n                        var pivotY = pivot.y;\n                        if (pivotX !== 0 || pivotY !== 0) {\n                            child.lock(EShapeLockPart.TRANSFORM);\n                            pivot.set(0, 0);\n                            newShape = factory(child) || child;\n                            pivot.set(pivotX, pivotY);\n                            child.unlock(EShapeLockPart.TRANSFORM, false);\n                        }\n                        else {\n                            newShape = factory(child) || child;\n                        }\n                    }\n                    else {\n                        newShape = factory(child) || child;\n                    }\n                    if (newShape !== child) {\n                        child.reference += 1;\n                        newShape.reference += 1;\n                        child.detach();\n                        newShape.attach(parent, i);\n                    }\n                }\n                else {\n                    newShape = child;\n                }\n                indices.push(i);\n                newShapes.push(newShape);\n                oldShapes.push(child);\n            }\n        }\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(newShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeReplace.prototype.redo = function () {\n        var parent = this._parent;\n        var indices = this._indices;\n        var oldShapes = this._oldShapes;\n        var newShapes = this._newShapes;\n        for (var i = 0, imax = newShapes.length; i < imax; ++i) {\n            var oldShape = oldShapes[i];\n            var newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                oldShape.detach();\n                newShape.attach(parent, indices[i]);\n            }\n        }\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(newShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeReplace.prototype.undo = function () {\n        var parent = this._parent;\n        var indices = this._indices;\n        var oldShapes = this._oldShapes;\n        var newShapes = this._newShapes;\n        for (var i = 0, imax = newShapes.length; i < imax; ++i) {\n            var oldShape = oldShapes[i];\n            var newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                newShape.detach();\n                oldShape.attach(parent, indices[i]);\n            }\n        }\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(oldShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeReplace.prototype.destroy = function () {\n        // Destroy Shapes\n        var oldShapes = this._oldShapes;\n        var newShapes = this._newShapes;\n        for (var i = 0, imax = newShapes.length; i < imax; ++i) {\n            var oldShape = oldShapes[i];\n            var newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                newShape.reference -= 1;\n                if (newShape.parent == null && newShape.reference <= 0) {\n                    newShape.destroy();\n                }\n                oldShape.reference -= 1;\n                if (oldShape.parent == null && oldShape.reference <= 0) {\n                    oldShape.destroy();\n                }\n            }\n        }\n        oldShapes.length = 0;\n        newShapes.length = 0;\n        this.indices.length = 0;\n    };\n    return ECommandShapeReplace;\n}(DCommandBase));\nexport { ECommandShapeReplace };\n//# sourceMappingURL=e-command-shape-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeSelect = /** @class */ (function (_super) {\n    __extends(ECommandShapeSelect, _super);\n    function ECommandShapeSelect(before, after, selection) {\n        var _this = _super.call(this) || this;\n        _this._before = before;\n        _this._after = after;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeSelect.prototype, \"before\", {\n        get: function () {\n            return this._before;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeSelect.prototype, \"after\", {\n        get: function () {\n            return this._after;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeSelect.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeSelect.prototype.isClean = function () {\n        return true;\n    };\n    ECommandShapeSelect.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeSelect.prototype.redo = function () {\n        this._selection.restore(this._after);\n        return true;\n    };\n    ECommandShapeSelect.prototype.undo = function () {\n        this._selection.restore(this._before);\n        return true;\n    };\n    ECommandShapeSelect.prototype.destroy = function () {\n        this._before.length = 0;\n        this._after.length = 0;\n    };\n    return ECommandShapeSelect;\n}(DCommandBase));\nexport { ECommandShapeSelect };\n//# sourceMappingURL=e-command-shape-select.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeTreeBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeBringForward, _super);\n    /**\n     *\n     * @param indices indices of moved children sorted in the \"descending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeBringForward(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringForward.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeBringForward.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            children[index] = children[index + 1];\n            children[index + 1] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringForward.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = indices.length - 1; 0 <= i; --i) {\n            var index = indices[i];\n            var child = children[index + 1];\n            children[index + 1] = children[index];\n            children[index] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringForward.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeBringForward;\n}(DCommandBase));\nexport { ECommandShapeTreeBringForward };\n//# sourceMappingURL=e-command-shape-tree-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar SHAPE_COMPARATOR = function (a, b) {\n    return a.index - b.index;\n};\nvar ECommandShapeTreeBringToFront = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeBringToFront, _super);\n    /**\n     *\n     * @param indices indices of moved children sorted in the \"descending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeBringToFront(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeBringToFront.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringToFront.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringToFront.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeBringToFront.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeBringToFront.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var offset = children.length;\n        for (var i = 0; i < offset; ++i) {\n            children[i].index = i;\n        }\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            child.index = offset + index;\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringToFront.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var offset = children.length;\n        var indexSize = indices.length;\n        for (var i = 0, imax = indexSize; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[offset - 1 - i];\n            child.index = index;\n        }\n        var indexIndex = indexSize - 1;\n        var indexCurrent = indices[indexIndex];\n        var indexOffset = 0;\n        for (var i = 0, imax = offset - indexSize; i < imax; ++i) {\n            var child = children[i];\n            var index = i + indexOffset;\n            if (index < indexCurrent) {\n                child.index = index;\n            }\n            else {\n                indexOffset += 1;\n                indexIndex -= 1;\n                if (0 <= indexIndex) {\n                    indexCurrent = indices[indexIndex];\n                }\n                else {\n                    indexCurrent = Number.MAX_SAFE_INTEGER;\n                }\n                i -= 1;\n            }\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringToFront.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeBringToFront;\n}(DCommandBase));\nexport { ECommandShapeTreeBringToFront };\n//# sourceMappingURL=e-command-shape-tree-bring-to-front.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeTreeSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeSendBackward, _super);\n    /**\n     * @param indices indices of moved children sorted in the \"ascending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeSendBackward(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendBackward.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeSendBackward.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            children[index] = children[index - 1];\n            children[index - 1] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendBackward.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = indices.length - 1; 0 <= i; --i) {\n            var index = indices[i];\n            var child = children[index - 1];\n            children[index - 1] = children[index];\n            children[index] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendBackward.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeSendBackward;\n}(DCommandBase));\nexport { ECommandShapeTreeSendBackward };\n//# sourceMappingURL=e-command-shape-tree-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar SHAPE_COMPARATOR = function (a, b) {\n    return a.index - b.index;\n};\nvar ECommandShapeTreeSendToBack = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeSendToBack, _super);\n    /**\n     * @param indices indices of moved children sorted in the \"ascending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeSendToBack(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeSendToBack.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendToBack.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendToBack.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeSendToBack.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeSendToBack.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var offset = children.length;\n        for (var i = 0; i < offset; ++i) {\n            children[i].index = i;\n        }\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            child.index = index - offset;\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendToBack.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var indexSize = indices.length;\n        for (var i = 0, imax = indexSize; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[i];\n            child.index = index;\n        }\n        var indexIndex = 0;\n        var indexCurrent = indices[indexIndex];\n        var indexOffset = -indexSize;\n        var offset = children.length;\n        for (var i = indexSize; i < offset; ++i) {\n            var child = children[i];\n            var index = i + indexOffset;\n            if (index < indexCurrent) {\n                child.index = index;\n            }\n            else {\n                indexOffset += 1;\n                indexIndex += 1;\n                if (indexIndex < indexSize) {\n                    indexCurrent = indices[indexIndex];\n                }\n                else {\n                    indexCurrent = Number.MAX_SAFE_INTEGER;\n                }\n                i -= 1;\n            }\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendToBack.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeSendToBack;\n}(DCommandBase));\nexport { ECommandShapeTreeSendToBack };\n//# sourceMappingURL=e-command-shape-tree-send-to-back.js.map","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { EShapeBase, EShapeCapability, EShapeEditor, EShapeLockPart, toSizeNormalized } from \"@wcardinal/wcardinal-ui\";\nvar UtilShapeTransforms = /** @class */ (function () {\n    function UtilShapeTransforms() {\n    }\n    UtilShapeTransforms.prepare = function (shape) {\n        var editor = shape.editor;\n        if (editor == null) {\n            editor = new EShapeEditor();\n            shape.editor = editor;\n        }\n        // Transform\n        shape.updateTransform();\n        var parent = shape.parent;\n        if (parent instanceof EShapeBase) {\n            parent.transform.internalTransform\n                .copyTo(editor.internalTransformParentInverse)\n                .invert();\n        }\n        else {\n            editor.internalTransformParentInverse.identity();\n        }\n        shape.transform.internalTransform.copyTo(editor.internalTransform);\n        // Rotation\n        editor.rotation = shape.transform.rotation;\n        // Size\n        editor.size.copyFrom(shape.size);\n        //\n        shape.lock(EShapeLockPart.TRANSFORM_CHILD);\n    };\n    UtilShapeTransforms.finalize = function (shape) {\n        shape.unlock(EShapeLockPart.TRANSFORM_CHILD, true);\n    };\n    UtilShapeTransforms.apply = function (shape, transform, capability) {\n        var editor = shape.editor;\n        if (editor != null) {\n            var newLocalTransform = editor.localTransform;\n            editor.internalTransformParentInverse\n                .copyTo(newLocalTransform)\n                .append(transform)\n                .append(editor.internalTransform);\n            this.applyLocal(shape, newLocalTransform, capability, editor.size);\n        }\n    };\n    UtilShapeTransforms.applyLocal = function (shape, localTransform, capability, size) {\n        // Reconstruct the position, the rotation and the size\n        var a = localTransform.a;\n        var b = localTransform.b;\n        var c = localTransform.c;\n        var d = localTransform.d;\n        var tx = localTransform.tx;\n        var ty = localTransform.ty;\n        shape.lock(EShapeLockPart.UPLOADED);\n        // Transform\n        var transform = shape.transform;\n        // Capability\n        var cposition = !!(capability & EShapeCapability.POSITION);\n        var crotation = !!(capability & EShapeCapability.ROTATION);\n        var cskew = !!(capability & EShapeCapability.SKEW);\n        var cwidth = !!(capability & EShapeCapability.WIDTH);\n        var cheight = !!(capability & EShapeCapability.HEIGHT);\n        // Rotation and skew\n        if (crotation || cskew) {\n            // Rotation\n            var rx = Math.atan2(-c, d); // rotation - skewX\n            var ry = Math.atan2(+b, a); // rotation + skewY\n            if (crotation) {\n                transform.rotation = (rx + ry) * 0.5; // Here, assumes `skewX` === `skewY`\n            }\n            // Skew\n            if (cskew) {\n                var skew = (ry - rx) * 0.5;\n                transform.skew.set(skew, skew);\n            }\n        }\n        // Position\n        if (cposition) {\n            // Assumes the pivot is invariant.\n            // tx = position.x - (a * px + c * py)\n            // ty = position.y - (b * px + d * py)\n            //\n            // Thus,\n            // position.x = tx + (a * px + c * py)\n            // position.y = ty + (b * px + d * py)\n            var pivot = transform.pivot;\n            var px = pivot.x;\n            var py = pivot.y;\n            transform.position.set(tx + (a * px + c * py), ty + (b * px + d * py));\n        }\n        // Scale\n        if (size != null && (cwidth || cheight)) {\n            var w = toSizeNormalized(size.x * Math.sqrt(a * a + b * b));\n            var h = toSizeNormalized(size.y * Math.sqrt(c * c + d * d));\n            var s = shape.size;\n            if (cwidth && cheight) {\n                s.set(w, h);\n            }\n            else if (cwidth) {\n                s.x = w;\n            }\n            else {\n                s.y = h;\n            }\n        }\n        //\n        shape.unlock(EShapeLockPart.UPLOADED, true);\n    };\n    return UtilShapeTransforms;\n}());\nexport { UtilShapeTransforms };\n//# sourceMappingURL=util-shape-transforms.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeConnectors, EShapeGroup, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeTransforms } from \"../util/util-shape-transforms\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nvar ECommandShapeUngroup = /** @class */ (function (_super) {\n    __extends(ECommandShapeUngroup, _super);\n    function ECommandShapeUngroup(parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._before = [];\n        _this._deleteds = [];\n        _this._indices = [];\n        _this._createds = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"before\", {\n        get: function () {\n            return this._before;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"deleteds\", {\n        get: function () {\n            return this._deleteds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"createds\", {\n        get: function () {\n            return this._createds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeUngroup.prototype.execute = function () {\n        // Save the current selection\n        var selection = this._selection;\n        selection.lock();\n        this._before = selection.store();\n        // Unselect non-group shapes\n        var shapes = selection.get();\n        for (var i = shapes.length - 1; 0 <= i; --i) {\n            var shape = shapes[i];\n            if (!this.isUngroupable(shape)) {\n                shape.selected = false;\n                shapes.splice(i, 1);\n            }\n        }\n        // Delete groups\n        var parent = this._parent;\n        var deleteds = UtilShapeDeleter.delete(parent, shapes, true) || [];\n        this._deleteds = deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].reference += 1;\n        }\n        // Create shapes\n        var createds = [];\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var target = deleteds[i];\n            var targetLocalTransform = target.transform.localTransform;\n            var a = targetLocalTransform.a;\n            var b = targetLocalTransform.b;\n            var c = targetLocalTransform.c;\n            var d = targetLocalTransform.d;\n            var tx = targetLocalTransform.tx;\n            var ty = targetLocalTransform.ty;\n            var targetChildren = target.children;\n            var clones = [];\n            for (var j = 0, jmax = targetChildren.length; j < jmax; ++j) {\n                var clone = targetChildren[j].clone();\n                clone.lock(EShapeLockPart.ALL);\n                clone.parent = null;\n                clone.updateTransform();\n                var localTransform = clone.transform.localTransform;\n                localTransform.prepend(targetLocalTransform);\n                var capability = EShapeCapability.NONE;\n                if (EShapeCapabilities.contains(clone, EShapeCapability.POSITION)) {\n                    capability |= EShapeCapability.POSITION;\n                }\n                if (EShapeCapabilities.contains(clone, EShapeCapability.ROTATION)) {\n                    capability |= EShapeCapability.ROTATION;\n                }\n                if (EShapeCapabilities.contains(clone, EShapeCapability.SKEW)) {\n                    capability |= EShapeCapability.SKEW;\n                }\n                if (capability !== EShapeCapability.NONE) {\n                    UtilShapeTransforms.applyLocal(clone, localTransform, capability);\n                }\n                if (clone instanceof EShapeConnectorLine) {\n                    var edge = clone.edge;\n                    var tail = edge.tail;\n                    if (tail.acceptor.shape == null) {\n                        // Local\n                        var tailLocal = tail.local;\n                        var tailLocalX = tailLocal.x;\n                        var tailLocalY = tailLocal.y;\n                        tailLocal.set(a * tailLocalX + c * tailLocalY + tx, b * tailLocalX + d * tailLocalY + ty);\n                        // Normal\n                        var tailNormal = tail.normal;\n                        var tailNormalX = tailNormal.x;\n                        var tailNormalY = tailNormal.y;\n                        var ndx = a * tailNormalX + c * tailNormalY;\n                        var ndy = b * tailNormalX + d * tailNormalY;\n                        var nd = ndx * ndx + ndy * ndy;\n                        if (0.000001 < nd) {\n                            var f = Math.sqrt(1 / nd);\n                            tailNormal.set(ndx * f, ndy * f);\n                        }\n                    }\n                    var head = edge.head;\n                    if (head.acceptor.shape == null) {\n                        // Local\n                        var headLocal = head.local;\n                        var headLocalX = headLocal.x;\n                        var headLocalY = headLocal.y;\n                        headLocal.set(a * headLocalX + c * headLocalY + tx, b * headLocalX + d * headLocalY + ty);\n                        // Normal\n                        var headNormal = head.normal;\n                        var headNormalX = headNormal.x;\n                        var headNormalY = headNormal.y;\n                        var ndx = a * headNormalX + c * headNormalY;\n                        var ndy = b * headNormalX + d * headNormalY;\n                        var nd = ndx * ndx + ndy * ndy;\n                        if (0.000001 < nd) {\n                            var f = Math.sqrt(1 / nd);\n                            headNormal.set(ndx * f, ndy * f);\n                        }\n                    }\n                }\n                clones.push(clone);\n            }\n            EShapeConnectors.moveAll(targetChildren, clones, targetChildren, clones);\n            for (var j = 0, jmax = clones.length; j < jmax; ++j) {\n                var clone = clones[j];\n                clone.unlock(EShapeLockPart.ALL, true);\n                clone.attach(parent);\n                clone.reference += 1;\n                createds.push(clone);\n            }\n        }\n        this._createds = createds;\n        // Indices\n        this._indices = UtilShapeSearch.toIndices(deleteds);\n        // Select created shapes\n        selection.clearAndAddAll(createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeUngroup.prototype.isUngroupable = function (shape) {\n        return (shape instanceof EShapeGroup &&\n            EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n            EShapeCapabilities.contains(shape, EShapeCapability.UNGROUPING));\n    };\n    ECommandShapeUngroup.prototype.redo = function () {\n        // Delete shapes\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(this._deleteds);\n        selection.delete(false);\n        // Add created shapes\n        var parent = this._parent;\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            createds[i].attach(parent);\n        }\n        // Select created shapes\n        selection.clearAndAddAll(createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeUngroup.prototype.undo = function () {\n        // Delete created shapes\n        var parent = this._parent;\n        var selection = this._selection;\n        selection.lock();\n        var createds = this._createds;\n        for (var i = createds.length - 1; 0 <= i; --i) {\n            createds[i].detach();\n        }\n        // Restore deleted shapes\n        var deleteds = this._deleteds;\n        var indices = this._indices;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].attach(parent, indices[i]);\n        }\n        // Restore the selection\n        this._selection.restore(this._before);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeUngroup.prototype.destroy = function () {\n        // Stored selection\n        this._before.length = 0;\n        // Deleted shapes\n        var deleteds = this._deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var deleted = deleteds[i];\n            deleted.reference -= 1;\n            if (deleted.parent == null && deleted.reference <= 0) {\n                deleted.destroy();\n            }\n        }\n        deleteds.length = 0;\n        // Created shapes\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            var created = createds[i];\n            created.reference -= 1;\n            if (created.parent == null && created.reference <= 0) {\n                created.destroy();\n            }\n        }\n        createds.length = 0;\n    };\n    return ECommandShapeUngroup;\n}(DCommandBase));\nexport { ECommandShapeUngroup };\n//# sourceMappingURL=e-command-shape-ungroup.js.map","export function newGraphicTester(name, graphic) {\n    return {\n        id: undefined,\n        graphicId: graphic.id,\n        name: name,\n        mappings: new Map()\n    };\n}\n//# sourceMappingURL=new-graphic-tester.js.map","var UtilCsvState = /** @class */ (function () {\n    function UtilCsvState(lines) {\n        this.lines = lines;\n        this.linesLength = lines.length;\n        this.cursor = -1;\n        this.line = \"\";\n        this.lineLength = 0;\n    }\n    UtilCsvState.prototype.next = function () {\n        var newCursor = this.cursor + 1;\n        if (newCursor < this.linesLength) {\n            this.cursor = newCursor;\n            var nextLine = this.lines[newCursor];\n            this.line = nextLine;\n            this.lineLength = nextLine.length;\n            return true;\n        }\n        return false;\n    };\n    return UtilCsvState;\n}());\nexport { UtilCsvState };\nvar UtilCsv = /** @class */ (function () {\n    function UtilCsv() {\n    }\n    UtilCsv.parseLine = function (state) {\n        var result = [];\n        var icomma = -1;\n        var line = state.line;\n        var length = state.lineLength;\n        for (var i = 0; i < length; ++i) {\n            if (line.charAt(i) === '\"') {\n                // Find the corresponding double quote\n                for (var j = i + 1; j < length; ++j) {\n                    var k = line.indexOf('\"', j);\n                    if (k < 0) {\n                        // Not found.\n                        if (state.next()) {\n                            // Consumes the next line\n                            line += \"\\n\" + state.line;\n                            length += 1 + state.lineLength;\n                            // And try again\n                            j -= 1;\n                            continue;\n                        }\n                        else {\n                            // Skip to the end.\n                            j = length + 1;\n                            result.push(this.unescape(line.substring(i + 1, j - 1)));\n                            i = j;\n                        }\n                    }\n                    else {\n                        j = k + 1;\n                        // If the next character is a double quote, then continues.\n                        if (j < length && line.charAt(j) === '\"') {\n                            continue;\n                        }\n                        // The next character isn't a double quote\n                        result.push(this.unescape(line.substring(i + 1, j - 1)));\n                        i = j;\n                    }\n                    break;\n                }\n            }\n            else {\n                if (icomma < i) {\n                    icomma = line.indexOf(\",\", i);\n                    if (icomma < 0) {\n                        icomma = length;\n                    }\n                }\n                result.push(line.substring(i, icomma));\n                i = icomma;\n            }\n        }\n        return result;\n    };\n    UtilCsv.parse = function (str) {\n        var lines = str.split(/(?:\\r\\n?|\\n)/g);\n        var result = [];\n        var state = new UtilCsvState(lines);\n        while (state.next()) {\n            var row = this.parseLine(state);\n            if (0 < row.length) {\n                result.push(row);\n            }\n        }\n        return result;\n    };\n    UtilCsv.stringifyLine = function (line) {\n        var result = \"\";\n        var delimiter = \"\";\n        for (var i = 0, imax = line.length; i < imax; ++i) {\n            result += delimiter + this.escape(String(line[i]));\n            delimiter = \",\";\n        }\n        return result;\n    };\n    UtilCsv.stringify = function (lines) {\n        var result = \"\";\n        var delimiter = \"\";\n        for (var i = 0, imax = lines.length; i < imax; ++i) {\n            result += delimiter + this.stringifyLine(lines[i]);\n            delimiter = \"\\n\";\n        }\n        return result;\n    };\n    UtilCsv.escape = function (target) {\n        var result = target.replace(/\"/g, '\"\"');\n        if (result.length !== target.length ||\n            0 <= target.indexOf(\",\") ||\n            0 <= target.indexOf(\"\\n\") ||\n            0 <= target.indexOf(\"\\r\")) {\n            return \"\\\"\".concat(result, \"\\\"\");\n        }\n        return target;\n    };\n    UtilCsv.unescape = function (target) {\n        return target.replace(/\"\"/g, '\"');\n    };\n    return UtilCsv;\n}());\nexport { UtilCsv };\n//# sourceMappingURL=util-csv.js.map","import { UtilCsv } from \"../util/util-csv\";\nexport function toGraphicTesterObject(data) {\n    var rows = UtilCsv.parse(data);\n    var result = new Map();\n    for (var i = 0, imax = rows.length; i < imax; ++i) {\n        var row = rows[i];\n        var uuid = parseInt(row[0], 10);\n        if (uuid === uuid) {\n            var original = row[1] || \"\";\n            var value = row[2] || \"\";\n            if (0 < original.length && 0 < value.length) {\n                var object = result.get(uuid);\n                if (object == null) {\n                    object = {};\n                    result.set(uuid, object);\n                }\n                object[original] = value;\n            }\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=to-graphic-tester-object.js.map","export function toGraphicTesterSerialized(simple) {\n    var parsed = JSON.parse(simple.mappings);\n    var uuids = parsed[0];\n    var objects = parsed[1];\n    var mappings = new Map();\n    for (var i = 0, imax = Math.min(uuids.length, objects.length); i < imax; ++i) {\n        mappings.set(uuids[i], objects[i]);\n    }\n    return {\n        id: simple.id,\n        graphicId: simple.graphicId,\n        name: simple.name,\n        mappings: mappings\n    };\n}\n//# sourceMappingURL=to-graphic-tester-serialized.js.map","export function toGraphicTesterSimple(serialized) {\n    var mappings = serialized.mappings;\n    var uuids = [];\n    var objects = [];\n    mappings.forEach(function (object, key) {\n        uuids.push(key);\n        objects.push(object);\n    });\n    return {\n        id: serialized.id,\n        graphicId: serialized.graphicId,\n        name: serialized.name,\n        mappings: JSON.stringify([uuids, objects])\n    };\n}\n//# sourceMappingURL=to-graphic-tester-simple.js.map","import { EShapeActionValueDeserializers } from \"@wcardinal/wcardinal-ui\";\nvar EShapeActionExtensions = /** @class */ (function () {\n    function EShapeActionExtensions() {\n    }\n    EShapeActionExtensions.add = function (extension) {\n        var _a, _b;\n        ((_a = this._typeToExtension) !== null && _a !== void 0 ? _a : (this._typeToExtension = new Map())).set(extension.type, extension);\n        ((_b = this._extensions) !== null && _b !== void 0 ? _b : (this._extensions = [])).push(extension);\n        EShapeActionValueDeserializers[extension.type] = extension.deserializer;\n    };\n    EShapeActionExtensions.get = function (type) {\n        var typeToExtension = this._typeToExtension;\n        if (typeToExtension != null) {\n            return typeToExtension.get(type);\n        }\n    };\n    EShapeActionExtensions.each = function (iteratee) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                iteratee(extension);\n            }\n        }\n    };\n    return EShapeActionExtensions;\n}());\nexport { EShapeActionExtensions };\n//# sourceMappingURL=e-shape-action-extensions.js.map","import { DDialogSelect, DDialogSelectListItem, isString, toSvgTexture } from \"@wcardinal/wcardinal-ui\";\nimport { Texture } from \"pixi.js\";\nvar dialogSelectThumbnailSize = 128;\nexport var getDialogSelectThumbnailSize = function () {\n    return dialogSelectThumbnailSize;\n};\nexport var setDialogSelectThumbnailSize = function (size) {\n    dialogSelectThumbnailSize = size;\n};\nvar dialogSelectTHumbnailNotFound;\nexport var getDialogSelectThumbnailNotFound = function () {\n    var result = dialogSelectTHumbnailNotFound;\n    if (result == null) {\n        result = newDialogTHumbnailNotFound();\n        dialogSelectTHumbnailNotFound = result;\n    }\n    return result;\n};\nexport var newDialogTHumbnailNotFound = function () {\n    var thumbnailSize = getDialogSelectThumbnailSize();\n    var resolution = window.devicePixelRatio || 1;\n    var svgSize = thumbnailSize * resolution;\n    return toSvgTexture(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"\".concat(svgSize, \"px\\\" width=\\\"\").concat(svgSize, \"px\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"#000000\\\" fill-opacity=\\\"0.05\\\">\") +\n        \"<path d=\\\"M19,5v11.17l2,2V5c0-1.1-0.9-2-2-2H5.83l2,2H19z\\\"/>\" +\n        \"<path d=\\\"M2.81,2.81L1.39,4.22L3,5.83V19c0,1.1,0.9,2,2,2h13.17l1.61,1.61l1.41-1.41L2.81,2.81z M5,19V7.83l7.07,7.07L11.25,16 L9,13l-3,4h8.17l2,2H5z\\\"/>\" +\n        \"</svg>\", resolution);\n};\nexport var newDialogSelectWithThumbnailsOptions = function (controller, toThumbnail, onSelect) {\n    var thumbnailSize = getDialogSelectThumbnailSize();\n    var thumbnailNotFound = getDialogSelectThumbnailNotFound();\n    var itemPadding = 8;\n    var itemLabelHeight = 30;\n    var itemSize = itemPadding + thumbnailSize + itemLabelHeight + itemPadding;\n    var textures = new Map();\n    var items = new Set();\n    var toImage = function (item) {\n        if (toThumbnail) {\n            var image_1 = toThumbnail(item.id);\n            if (isString(image_1)) {\n                var texture = textures.get(image_1);\n                if (texture == null) {\n                    var newTexture_1 = Texture.from(image_1);\n                    newTexture_1.baseTexture.on(\"error\", function () {\n                        checkTextures(newTexture_1, image_1);\n                    });\n                    texture = newTexture_1;\n                    textures.set(image_1, newTexture_1);\n                }\n                return texture;\n            }\n            else if (image_1 != null) {\n                return image_1;\n            }\n        }\n        return thumbnailNotFound;\n    };\n    var openTextures = function () {\n        items.forEach(function (item) {\n            var value = item.value;\n            if (value != null) {\n                item.image = toImage(value);\n            }\n        });\n    };\n    var clearTimeoutId = null;\n    var clearTextures = function () {\n        items.forEach(function (item) {\n            item.image = null;\n        });\n        textures.forEach(function (texture, url) {\n            if (texture !== thumbnailNotFound) {\n                var baseTexture = texture.baseTexture;\n                texture.destroy();\n                if (baseTexture) {\n                    baseTexture.destroy();\n                    baseTexture.off(\"error\");\n                }\n            }\n        });\n        textures.clear();\n    };\n    var checkTextures = function (texture, url) {\n        if (texture !== thumbnailNotFound && !texture.valid) {\n            items.forEach(function (item) {\n                var image = item.image.get(0);\n                if (image != null && image.source === texture) {\n                    image.source = thumbnailNotFound;\n                }\n            });\n            var baseTexture = texture.baseTexture;\n            texture.destroy();\n            if (baseTexture) {\n                baseTexture.destroy();\n                baseTexture.off(\"error\");\n            }\n            textures.set(url, thumbnailNotFound);\n        }\n    };\n    return {\n        width: \"auto\",\n        height: \"auto\",\n        layout: {\n            width: \"auto\",\n            height: \"auto\"\n        },\n        content: {\n            width: \"auto\",\n            height: \"auto\"\n        },\n        list: {\n            width: itemSize * 3,\n            height: itemSize * 2 + itemPadding * 4,\n            data: {\n                toImage: toImage\n            },\n            updater: {\n                newItem: function (data) {\n                    var result = new DDialogSelectListItem(data, {\n                        width: itemSize,\n                        height: itemSize,\n                        padding: itemPadding,\n                        text: {\n                            align: {\n                                vertical: \"BOTTOM\",\n                                horizontal: \"CENTER\"\n                            }\n                        },\n                        image: {\n                            align: {\n                                vertical: \"TOP\",\n                                horizontal: \"CENTER\",\n                                with: \"PADDING\"\n                            },\n                            margin: {\n                                vertical: 0\n                            },\n                            tint: {\n                                color: 0xffffff,\n                                alpha: 1.0\n                            }\n                        }\n                    });\n                    items.add(result);\n                    return result;\n                }\n            }\n        },\n        controller: controller,\n        on: {\n            open: function () {\n                if (clearTimeoutId != null) {\n                    window.clearTimeout(clearTimeoutId);\n                    clearTimeoutId = null;\n                    clearTextures();\n                }\n                openTextures();\n            },\n            close: function () {\n                if (clearTimeoutId == null) {\n                    clearTimeoutId = window.setTimeout(function () {\n                        clearTimeoutId = null;\n                        clearTextures();\n                    }, 1000);\n                }\n            },\n            select: onSelect\n        }\n    };\n};\nexport var newDialogSelectWithThumbnails = function (controller, toThumbnail, onSelect) {\n    return new DDialogSelect(newDialogSelectWithThumbnailsOptions(controller, toThumbnail, onSelect));\n};\n//# sourceMappingURL=e-dialog-select-with-thumbnails.js.map","import { DThemes } from \"@wcardinal/wcardinal-ui\";\nvar shapeTypeTheme;\nexport var getShapeTypeTheme = function () {\n    return (shapeTypeTheme !== null && shapeTypeTheme !== void 0 ? shapeTypeTheme : (shapeTypeTheme = DThemes.get(\"FShapeType\")));\n};\n//# sourceMappingURL=get-shape-type-theme.js.map","export var EToolSelectMode;\n(function (EToolSelectMode) {\n    EToolSelectMode[EToolSelectMode[\"NONE\"] = 0] = \"NONE\";\n    EToolSelectMode[EToolSelectMode[\"SELECT\"] = 1] = \"SELECT\";\n    EToolSelectMode[EToolSelectMode[\"TRANSLATE\"] = 2] = \"TRANSLATE\";\n    EToolSelectMode[EToolSelectMode[\"SCALE\"] = 3] = \"SCALE\";\n    EToolSelectMode[EToolSelectMode[\"ROTATE\"] = 4] = \"ROTATE\";\n})(EToolSelectMode || (EToolSelectMode = {}));\n//# sourceMappingURL=e-tool-select-mode.js.map","export var EShapeActionExtensionInputType = {\n    TEXT: 0\n};\n//# sourceMappingURL=e-shape-action-extension-input.js.map","import { DInputLabel, DInputText, DLayoutHorizontal, DLayoutSpace, DSelect } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeActionExtensionInputType } from \"../extension/e-shape-action-extension-input\";\nvar EDialogActionExtension = /** @class */ (function () {\n    function EDialogActionExtension(extension, dialog, condition, layout) {\n        this._extension = extension;\n        this._dialog = dialog;\n        this._condition = condition;\n        this._layout = layout;\n    }\n    Object.defineProperty(EDialogActionExtension.prototype, \"select\", {\n        get: function () {\n            var result = this._select;\n            if (result === undefined) {\n                result = this.newSelect();\n                this._select = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newSelect = function () {\n        var extensionItems = this._extension.items;\n        if (extensionItems != null && 0 < extensionItems.length) {\n            var result = new DSelect({\n                weight: 1,\n                value: extensionItems[0].type,\n                menu: {\n                    items: this.newSelectMenuItems(extensionItems)\n                }\n            });\n            return result;\n        }\n        return null;\n    };\n    EDialogActionExtension.prototype.newSelectMenuItems = function (items) {\n        var result = [];\n        for (var i = 0, imax = items.length; i < imax; ++i) {\n            var item = items[i];\n            result.push({\n                value: item.type,\n                text: {\n                    value: item.label\n                }\n            });\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"selectLayout\", {\n        get: function () {\n            var result = this._selectLayout;\n            if (result === undefined) {\n                result = this.newSelectLayout();\n                if (result != null) {\n                    var layout = this._layout;\n                    var conditionIndex = layout.getChildIndex(this._condition);\n                    if (0 <= conditionIndex) {\n                        layout.addChildAt(result, conditionIndex);\n                    }\n                    else {\n                        layout.addChild(result);\n                    }\n                }\n                this._selectLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newSelectLayout = function () {\n        var select = this.select;\n        if (select != null) {\n            return this.newLabeled(\"\", select);\n        }\n        return null;\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"inputs\", {\n        get: function () {\n            var result = this._inputs;\n            if (result === undefined) {\n                result = this.newInputs();\n                this._inputs = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newInputs = function () {\n        var result = [];\n        var extensionInputs = this._extension.inputs;\n        if (extensionInputs != null) {\n            for (var i = 0, imax = extensionInputs.length; i < imax; ++i) {\n                var input = extensionInputs[i];\n                switch (input.type) {\n                    case EShapeActionExtensionInputType.TEXT:\n                        var inputText = this.newInputText();\n                        result.push(inputText);\n                        break;\n                }\n            }\n        }\n        return result;\n    };\n    EDialogActionExtension.prototype.newInputText = function () {\n        var _this = this;\n        return new DInputText({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    EDialogActionExtension.prototype.newLabel = function (label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    };\n    EDialogActionExtension.prototype.newSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    EDialogActionExtension.prototype.newLabeled = function (label, input) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                input,\n                this.newSpace()\n            ]\n        });\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"inputLayouts\", {\n        get: function () {\n            var result = this._inputLayouts;\n            if (result === undefined) {\n                result = this.newInputLayouts();\n                this._inputLayouts = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newInputLayouts = function () {\n        var result = [];\n        var inputs = this.inputs;\n        var layout = this._layout;\n        var extensionInputs = this._extension.inputs;\n        if (extensionInputs != null) {\n            var conditionIndex = layout.getChildIndex(this._condition);\n            for (var i = 0, imax = inputs.length; i < imax; ++i) {\n                var labeled = this.newLabeled(extensionInputs[i].label, inputs[i]);\n                result.push(labeled);\n                if (0 <= conditionIndex) {\n                    layout.addChildAt(labeled, conditionIndex + 1 + i);\n                }\n                else {\n                    layout.addChild(labeled);\n                }\n            }\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"value\", {\n        get: function () {\n            return this._extension.toValue(this.select, this._condition.input, this.inputs);\n        },\n        set: function (value) {\n            if (value != null) {\n                this._extension.fromValue(value, this.select, this._condition.input, this.inputs);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.show = function () {\n        // Select\n        var selectLayout = this.selectLayout;\n        if (selectLayout != null) {\n            selectLayout.show();\n        }\n        // Inputs\n        var inputLayouts = this.inputLayouts;\n        if (0 < inputLayouts.length) {\n            var extension = this._extension;\n            if (extension.onShow != null) {\n                extension.onShow(inputLayouts);\n            }\n            else {\n                for (var i = 0, imax = inputLayouts.length; i < imax; ++i) {\n                    inputLayouts[i].show();\n                }\n            }\n        }\n    };\n    EDialogActionExtension.prototype.hide = function () {\n        // Select\n        var selectLayout = this._selectLayout;\n        if (selectLayout != null) {\n            selectLayout.hide();\n        }\n        // Inputs\n        var inputLayouts = this._inputLayouts;\n        if (inputLayouts != null) {\n            for (var i = 0, imax = inputLayouts.length; i < imax; ++i) {\n                inputLayouts[i].hide();\n            }\n        }\n    };\n    EDialogActionExtension.prototype.reset = function () {\n        // Select\n        var select = this._select;\n        if (select) {\n            var items = this._extension.items;\n            if (items != null && 0 < items.length) {\n                select.value = items[0].type;\n            }\n            else {\n                select.value = null;\n            }\n        }\n        // Inputs\n        var inputs = this._inputs;\n        if (inputs) {\n            var extensionInputs = this._extension.inputs;\n            if (extensionInputs != null) {\n                for (var i = 0, imax = inputs.length; i < imax; ++i) {\n                    inputs[i].value = extensionInputs[i].initial || \"\";\n                }\n            }\n        }\n    };\n    EDialogActionExtension.prototype.ok = function () {\n        this._dialog.ok();\n    };\n    return EDialogActionExtension;\n}());\nexport { EDialogActionExtension };\n//# sourceMappingURL=e-dialog-action-extension.js.map","import { EShapeActionExtensions } from \"../extension/e-shape-action-extensions\";\nimport { EDialogActionExtension } from \"./e-dialog-action-extension\";\nvar EDialogActionExtensionContainer = /** @class */ (function () {\n    function EDialogActionExtensionContainer(dialog, condition, layout) {\n        this._data = new Map();\n        this._dialog = dialog;\n        this._condition = condition;\n        this._layout = layout;\n    }\n    Object.defineProperty(EDialogActionExtensionContainer.prototype, \"value\", {\n        get: function () {\n            var selected = this._selected;\n            if (selected) {\n                return selected.value;\n            }\n            return null;\n        },\n        set: function (value) {\n            if (value != null) {\n                var datum = this._data.get(value.type);\n                if (datum != null) {\n                    datum.value = value;\n                }\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtensionContainer.prototype.get = function (type) {\n        var data = this._data;\n        var result = data.get(type);\n        if (result != null) {\n            return result;\n        }\n        var e = EShapeActionExtensions.get(type);\n        if (e == null) {\n            return null;\n        }\n        result = new EDialogActionExtension(e, this._dialog, this._condition, this._layout);\n        data.set(type, result);\n        return result;\n    };\n    EDialogActionExtensionContainer.prototype.show = function (type) {\n        if (type != null) {\n            var datum = this.get(type);\n            if (datum != null) {\n                var selected = this._selected;\n                if (selected !== datum) {\n                    if (selected != null) {\n                        selected.hide();\n                    }\n                    this._selected = datum;\n                    datum.show();\n                }\n            }\n            else {\n                this.hide();\n            }\n        }\n        else {\n            this.hide();\n        }\n    };\n    EDialogActionExtensionContainer.prototype.hide = function () {\n        var selected = this._selected;\n        if (selected != null) {\n            selected.hide();\n            this._selected = null;\n        }\n    };\n    EDialogActionExtensionContainer.prototype.reset = function () {\n        this._data.forEach(function (datum) {\n            datum.reset();\n        });\n    };\n    EDialogActionExtensionContainer.prototype.onChange = function (type) {\n        this.show(type);\n    };\n    return EDialogActionExtensionContainer;\n}());\nexport { EDialogActionExtensionContainer };\n//# sourceMappingURL=e-dialog-action-extension-container.js.map","import { createGroupUploaded, EShapeCapabilities, EShapeDeserializers, EShapeOnDeserializeds, EShapeRuntimes, EShapeUploadeds } from \"@wcardinal/wcardinal-ui\";\nvar toIconName = function (index) {\n    return \"extension_icon_\".concat(index);\n};\nvar EShapeExtensions = /** @class */ (function () {\n    function EShapeExtensions() {\n    }\n    EShapeExtensions.add = function (extension) {\n        var _a, _b;\n        if (\"type\" in extension) {\n            var type = extension.type;\n            // Name\n            ((_a = this._typeToExtension) !== null && _a !== void 0 ? _a : (this._typeToExtension = new Map())).set(type, extension);\n            // Deserializer\n            var deserializer = extension.deserializer;\n            if (deserializer != null) {\n                EShapeDeserializers[type] = deserializer;\n            }\n            // OnDeserialized\n            var onDeserialized = extension.onDeserialized;\n            if (onDeserialized != null) {\n                EShapeOnDeserializeds[type] = onDeserialized;\n            }\n            // Runtime\n            var runtime = extension.runtime;\n            if (runtime) {\n                EShapeRuntimes[type] = runtime;\n            }\n            // Capability\n            var capability = extension.capability;\n            if (capability != null) {\n                EShapeCapabilities.set(type, capability);\n            }\n            // Uploaded\n            var uploaded = extension.uploaded;\n            if (uploaded != null) {\n                EShapeUploadeds[type] = uploaded;\n            }\n            else {\n                if (EShapeUploadeds[type] == null) {\n                    EShapeUploadeds[type] = createGroupUploaded;\n                }\n            }\n        }\n        ((_b = this._extensions) !== null && _b !== void 0 ? _b : (this._extensions = [])).push(extension);\n    };\n    EShapeExtensions.get = function (type) {\n        var typeToExtension = this._typeToExtension;\n        if (typeToExtension != null) {\n            return typeToExtension.get(type);\n        }\n    };\n    EShapeExtensions.each = function (iteratee) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                iteratee(extension);\n            }\n        }\n    };\n    EShapeExtensions.merge = function (iconBuilder) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                if (\"icon\" in extension) {\n                    var icon = extension.icon;\n                    iconBuilder.add(toIconName(i), icon.width, icon.height, icon.svg);\n                }\n            }\n        }\n    };\n    EShapeExtensions.build = function (icons) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                if (\"icon\" in extension) {\n                    extension.icon.texture = icons[toIconName(i)];\n                }\n            }\n        }\n    };\n    return EShapeExtensions;\n}());\nexport { EShapeExtensions };\n//# sourceMappingURL=e-shape-extensions.js.map","import { __extends } from \"tslib\";\nimport { EShapeAcceptorEdgeSide, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeEmbeddedAcceptorEdgePropertySide = /** @class */ (function (_super) {\n    __extends(ECommandShapeEmbeddedAcceptorEdgePropertySide, _super);\n    function ECommandShapeEmbeddedAcceptorEdgePropertySide() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeEmbeddedAcceptorEdgePropertySide.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.side;\n        }\n        return EShapeAcceptorEdgeSide.NONE;\n    };\n    ECommandShapeEmbeddedAcceptorEdgePropertySide.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.side = property;\n        }\n    };\n    return ECommandShapeEmbeddedAcceptorEdgePropertySide;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeEmbeddedAcceptorEdgePropertySide };\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-side.js.map","import { __extends } from \"tslib\";\nimport { EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeEmbeddedAcceptorEdgePropertySubtype = /** @class */ (function (_super) {\n    __extends(ECommandShapeEmbeddedAcceptorEdgePropertySubtype, _super);\n    function ECommandShapeEmbeddedAcceptorEdgePropertySubtype() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeEmbeddedAcceptorEdgePropertySubtype.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.subtype;\n        }\n        return EShapeAcceptorEdgeType.HEAD;\n    };\n    ECommandShapeEmbeddedAcceptorEdgePropertySubtype.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.subtype = property;\n        }\n    };\n    return ECommandShapeEmbeddedAcceptorEdgePropertySubtype;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeEmbeddedAcceptorEdgePropertySubtype };\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-subtype.js.map","import { __extends } from \"tslib\";\nimport { EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeEmbeddedAcceptorEdgePropertyVvisible = /** @class */ (function (_super) {\n    __extends(ECommandShapeEmbeddedAcceptorEdgePropertyVvisible, _super);\n    function ECommandShapeEmbeddedAcceptorEdgePropertyVvisible() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeEmbeddedAcceptorEdgePropertyVvisible.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.vvisible;\n        }\n        return false;\n    };\n    ECommandShapeEmbeddedAcceptorEdgePropertyVvisible.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.vvisible = property;\n        }\n    };\n    return ECommandShapeEmbeddedAcceptorEdgePropertyVvisible;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeEmbeddedAcceptorEdgePropertyVvisible };\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-vvisible.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheckRight, DControllers, DLayoutVertical, DPane, DSelect, DSelectMultiple, DText, DThemes, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertySide } from \"./e-command-shape-embedded-acceptor-edge-property-side\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertySubtype } from \"./e-command-shape-embedded-acceptor-edge-property-subtype\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertyVvisible } from \"./e-command-shape-embedded-acceptor-edge-property-vvisible\";\nvar EEditorShapeEmbeddedAcceptorEdge = /** @class */ (function (_super) {\n    __extends(EEditorShapeEmbeddedAcceptorEdge, _super);\n    function EEditorShapeEmbeddedAcceptorEdge(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        // Layout\n        _this.initLayout();\n        return _this;\n    }\n    EEditorShapeEmbeddedAcceptorEdge.prototype.initLayout = function () {\n        var _this = this;\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [this.newTextLabel(), this.selectSubtype, this.selectSide, this.checkVvisible]\n        });\n        // Selection\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n            _this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"selectSubtype\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectSubtype) !== null && _a !== void 0 ? _a : (this._selectSubtype = this.newSelectSubtype()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newSelectSubtype = function () {\n        var _this = this;\n        var subtheme = this.subtheme;\n        return new DSelect({\n            width: \"padding\",\n            value: EShapeAcceptorEdgeType.HEAD,\n            menu: {\n                items: [\n                    {\n                        value: EShapeAcceptorEdgeType.HEAD,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.HEAD)\n                        }\n                    },\n                    {\n                        value: EShapeAcceptorEdgeType.TAIL,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.TAIL)\n                        }\n                    },\n                    {\n                        value: EShapeAcceptorEdgeType.ALL,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.ALL)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this.onSelectSubtypeChanged(value);\n                }\n            }\n        });\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onSelectSubtypeChanged = function (value) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertySubtype(this._selection, value));\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"selectSide\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectSide) !== null && _a !== void 0 ? _a : (this._selectSide = this.newSelectSide()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newSelectSide = function () {\n        var _this = this;\n        var subtheme = this.subtheme;\n        return new DSelectMultiple({\n            width: \"padding\",\n            values: [EShapeAcceptorEdgeSide.LEFT],\n            menu: {\n                items: [\n                    {\n                        value: EShapeAcceptorEdgeSide.LEFT,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.LEFT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.TOP,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.TOP)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.RIGHT,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.RIGHT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.BOTTOM,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.BOTTOM)\n                        },\n                        check: true\n                    }\n                ]\n            },\n            on: {\n                change: function (values) {\n                    _this.onSelectSideChange(values);\n                }\n            }\n        });\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onSelectSideChange = function (values) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertySide(this._selection, this.fromSelectSideValues(values)));\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.toSelectSideValues = function (value) {\n        var result = [];\n        if (value & EShapeAcceptorEdgeSide.LEFT) {\n            result.push(EShapeAcceptorEdgeSide.LEFT);\n        }\n        if (value & EShapeAcceptorEdgeSide.TOP) {\n            result.push(EShapeAcceptorEdgeSide.TOP);\n        }\n        if (value & EShapeAcceptorEdgeSide.RIGHT) {\n            result.push(EShapeAcceptorEdgeSide.RIGHT);\n        }\n        if (value & EShapeAcceptorEdgeSide.BOTTOM) {\n            result.push(EShapeAcceptorEdgeSide.BOTTOM);\n        }\n        return result;\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.fromSelectSideValues = function (values) {\n        var result = EShapeAcceptorEdgeSide.NONE;\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            result |= values[i];\n        }\n        return result;\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"checkVvisible\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkVvisible) !== null && _a !== void 0 ? _a : (this._checkVvisible = this.newCheckIsVvisible()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newCheckIsVvisible = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsVvisibleLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckVvisibleChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckVvisibleChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onCheckVvisibleChanged = function (isVvisible) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertyVvisible(this._selection, isVvisible));\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onSelectionChange = function (selection) {\n        var selectSubtype = this.selectSubtype;\n        var selectSide = this.selectSide;\n        var checkVvisible = this.checkVvisible;\n        var last = selection.last();\n        if (last instanceof EShapeEmbeddedAcceptorEdge) {\n            selectSubtype.value = last.subtype;\n            selectSubtype.state.isEnabled = true;\n            selectSide.values = this.toSelectSideValues(last.side);\n            selectSide.state.isEnabled = true;\n            checkVvisible.state.isActive = last.vvisible;\n            checkVvisible.state.isEnabled = true;\n        }\n        else {\n            selectSubtype.state.isEnabled = false;\n            selectSide.state.isEnabled = false;\n            checkVvisible.state.isEnabled = false;\n        }\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeEmbeddedAcceptorEdge\");\n    };\n    return EEditorShapeEmbeddedAcceptorEdge;\n}(DPane));\nexport { EEditorShapeEmbeddedAcceptorEdge };\n//# sourceMappingURL=e-editor-shape-embedded-acceptor-edge.js.map","import { DThemes, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeEmbeddedAcceptorEdge } from \"./e-editor-shape-embedded-acceptor-edge\";\nvar EShapeEmbeddedAcceptorEdges = /** @class */ (function () {\n    function EShapeEmbeddedAcceptorEdges() {\n    }\n    EShapeEmbeddedAcceptorEdges.getTheme = function () {\n        return DThemes.get(\"EShapeEmbeddedAcceptorEdge\");\n    };\n    EShapeEmbeddedAcceptorEdges.create = function (existing) {\n        var result = new EShapeEmbeddedAcceptorEdge();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            result.subtype = EShapeAcceptorEdgeType.HEAD; // Connectable to heads only\n            result.side = EShapeAcceptorEdgeSide.LEFT; // Connectable from the left side\n            result.vvisible = true; // True if visible in the viewer mode\n            result.stroke.set(false, 0x3399ff, 1);\n            result.fill.set(true, 0x3399ff, 1);\n        }\n        return result;\n    };\n    EShapeEmbeddedAcceptorEdges.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeType.EMBEDDED_ACCEPTOR_EDGE,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(0.667,0.667) translate(480, 480) rotate(+90) translate(-480, 480)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M480-640 280-440l56 56 104-103v407h80v-407l104 103 56-56-200-200ZM146-260q-32-49-49-105T80-480q0-83 31.5\" +\n                    \"-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 59-17 115t-49 105l-58-58q22-37\" +\n                    \" 33-78t11-84q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 43 11 84t33 78l-58 58Z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeEmbeddedAcceptorEdges.create(existing); },\n            editor: EEditorShapeEmbeddedAcceptorEdge\n        });\n    };\n    return EShapeEmbeddedAcceptorEdges;\n}());\nexport { EShapeEmbeddedAcceptorEdges };\n//# sourceMappingURL=e-shape-embedded-acceptor-edges.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeButtonPropertyIsActive = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonPropertyIsActive, _super);\n    function ECommandShapeButtonPropertyIsActive() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeButtonPropertyIsActive.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.state.isActive;\n        }\n        return false;\n    };\n    ECommandShapeButtonPropertyIsActive.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.state.isActive = property;\n        }\n    };\n    return ECommandShapeButtonPropertyIsActive;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeButtonPropertyIsActive };\n//# sourceMappingURL=e-command-shape-button-property-is-active.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeButtonPropertyIsGrouped = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonPropertyIsGrouped, _super);\n    function ECommandShapeButtonPropertyIsGrouped() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeButtonPropertyIsGrouped.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.isGrouped;\n        }\n        return false;\n    };\n    ECommandShapeButtonPropertyIsGrouped.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.isGrouped = property;\n        }\n    };\n    return ECommandShapeButtonPropertyIsGrouped;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeButtonPropertyIsGrouped };\n//# sourceMappingURL=e-command-shape-button-property-is-grouped.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeButtonPropertyIsToggle = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonPropertyIsToggle, _super);\n    function ECommandShapeButtonPropertyIsToggle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeButtonPropertyIsToggle.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.isToggle;\n        }\n        return false;\n    };\n    ECommandShapeButtonPropertyIsToggle.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.isToggle = property;\n        }\n    };\n    return ECommandShapeButtonPropertyIsToggle;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeButtonPropertyIsToggle };\n//# sourceMappingURL=e-command-shape-button-property-is-toggle.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheckRight, DControllers, DLayoutVertical, DPane, DText, DThemes, EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeButtonPropertyIsActive } from \"./e-command-shape-button-property-is-active\";\nimport { ECommandShapeButtonPropertyIsGrouped } from \"./e-command-shape-button-property-is-grouped\";\nimport { ECommandShapeButtonPropertyIsToggle } from \"./e-command-shape-button-property-is-toggle\";\nvar EEditorShapeButton = /** @class */ (function (_super) {\n    __extends(EEditorShapeButton, _super);\n    function EEditorShapeButton(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        // Layout\n        _this.initLayout();\n        return _this;\n    }\n    EEditorShapeButton.prototype.initLayout = function () {\n        var _this = this;\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                this.newTextLabel(),\n                this.checkIsToggle,\n                this.checkIsGrouped,\n                this.checkIsActive\n            ]\n        });\n        // Selection\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n            _this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    };\n    EEditorShapeButton.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"checkIsToggle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsToggle) !== null && _a !== void 0 ? _a : (this._checkIsToggle = this.newCheckIsToggle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newCheckIsToggle = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsToggleLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckIsToggleChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckIsToggleChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeButton.prototype.onCheckIsToggleChanged = function (isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsToggle(this._selection, isActive));\n    };\n    EEditorShapeButton.prototype.onSelectionChangeCheckIsToggle = function (selection) {\n        var state = this.checkIsToggle.state;\n        var last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.isToggle;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"checkIsGrouped\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsGrouped) !== null && _a !== void 0 ? _a : (this._checkIsGrouped = this.newCheckIsGrouped()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newCheckIsGrouped = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsGroupedLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckIsGroupedChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckIsGroupedChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeButton.prototype.onCheckIsGroupedChanged = function (isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsGrouped(this._selection, isActive));\n    };\n    EEditorShapeButton.prototype.onSelectionChangeCheckIsGrouped = function (selection) {\n        var state = this.checkIsGrouped.state;\n        var last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.isGrouped;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"checkIsActive\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsActive) !== null && _a !== void 0 ? _a : (this._checkIsActive = this.newCheckIsActive()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newCheckIsActive = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsActiveLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckIsActiveChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckIsActiveChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeButton.prototype.onCheckIsActiveChanged = function (isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsActive(this._selection, isActive));\n    };\n    EEditorShapeButton.prototype.onSelectionChangeCheckIsActive = function (selection) {\n        var state = this.checkIsActive.state;\n        var last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.state.isActive;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    };\n    EEditorShapeButton.prototype.onSelectionChange = function (selection) {\n        this.onSelectionChangeCheckIsToggle(selection);\n        this.onSelectionChangeCheckIsGrouped(selection);\n        this.onSelectionChangeCheckIsActive(selection);\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeButton\");\n    };\n    return EEditorShapeButton;\n}(DPane));\nexport { EEditorShapeButton };\n//# sourceMappingURL=e-editor-shape-button.js.map","import { DThemes, EShapeButton, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeButton } from \"./e-editor-shape-button\";\nvar EShapeButtons = /** @class */ (function () {\n    function EShapeButtons() {\n    }\n    EShapeButtons.getTheme = function () {\n        return DThemes.get(\"EShapeButton\");\n    };\n    EShapeButtons.create = function (existing) {\n        var result = new EShapeButton();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            var label = this.getTheme().getLabel();\n            result.stroke.set(false, 0x3399ff, 1);\n            result.fill.set(true, 0x3399ff, 1);\n            result.text.set(label, 0xffffff, 1);\n            result.cursor = \"pointer\";\n            result.state.isFocusable = true;\n            result.interactive = true;\n        }\n        return result;\n    };\n    EShapeButtons.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeType.BUTTON,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2\" +\n                    \"-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z M14.5,19 l1.\" +\n                    \"09-2.41L18,15.5l-2.41-1.09L14.5,12l-1.09,2.41L11,15.5l2.41,1.0\" +\n                    \"9L14.5,19z M17,14l0.62-1.38L19,12l-1.38-0.62L17,10l-0.62,1.38 \" +\n                    \"L15,12l1.38,0.62L17,14z M14.5,19l1.09-2.41L18,15.5l-2.41-1.09L\" +\n                    \"14.5,12l-1.09,2.41L11,15.5l2.41,1.09L14.5,19z M17,14l0.62-1.38\" +\n                    \" L19,12l-1.38-0.62L17,10l-0.62,1.38L15,12l1.38,0.62L17,14z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeButtons.create(existing); },\n            editor: EEditorShapeButton\n        });\n    };\n    return EShapeButtons;\n}());\nexport { EShapeButtons };\n//# sourceMappingURL=e-shape-buttons.js.map","import { EShapeActionValueShowHideLayer } from \"@wcardinal/wcardinal-ui\";\nvar EShapeButtonLayerButtonValue = /** @class */ (function () {\n    function EShapeButtonLayerButtonValue(label, weight, layers, bringToFront, isGrouped, isActive) {\n        this.label = label;\n        this.weight = weight;\n        this.layers = layers;\n        this.bringToFront = bringToFront;\n        this.isGrouped = isGrouped;\n        this.isActive = isActive;\n        this.action = new EShapeActionValueShowHideLayer(\"isActive\", layers, bringToFront);\n    }\n    EShapeButtonLayerButtonValue.prototype.isEquals = function (target) {\n        if (this.label !== target.label) {\n            return false;\n        }\n        if (this.weight !== target.weight) {\n            return false;\n        }\n        if (this.bringToFront !== target.bringToFront) {\n            return false;\n        }\n        if (this.isGrouped !== target.isGrouped) {\n            return false;\n        }\n        if (this.isActive !== target.isActive) {\n            return false;\n        }\n        var layers = this.layers;\n        var layersLength = layers.length;\n        var targetLayers = target.layers;\n        if (layersLength !== targetLayers.length) {\n            return false;\n        }\n        for (var i = 0; i < layersLength; ++i) {\n            if (layers[i] !== targetLayers[i]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    EShapeButtonLayerButtonValue.prototype.serizlize = function (manager) {\n        var layersId = this.serializedLayers(manager);\n        var bringToFront = this.bringToFront ? 1 : 0;\n        var isGrouped = this.isGrouped ? 2 : 0;\n        var isActive = this.isActive ? 4 : 0;\n        var type = bringToFront | isGrouped | isActive;\n        return manager.addResource(\"[\".concat(manager.addResource(this.label), \",\").concat(this.weight, \",\").concat(layersId, \",\").concat(type, \"]\"));\n    };\n    EShapeButtonLayerButtonValue.prototype.serializedLayers = function (manager) {\n        var layers = this.layers;\n        var serialized = \"[\";\n        var delimiter = \"\";\n        for (var i = 0, imax = layers.length; i < imax; ++i) {\n            serialized += delimiter + layers[i];\n            delimiter = \",\";\n        }\n        serialized += \"]\";\n        return manager.addResource(serialized);\n    };\n    EShapeButtonLayerButtonValue.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeButtonLayerButtonValue(resources[parsed[0]], parsed[1], this.deserializeLayers(parsed[2], manager), !!(parsed[3] & 0x1), !!(parsed[3] & 0x2), !!(parsed[3] & 0x4));\n        }\n        return null;\n    };\n    EShapeButtonLayerButtonValue.deserializeLayers = function (target, manager) {\n        var result = [];\n        var resources = manager.resources;\n        var resourcesLength = resources.length;\n        if (0 <= target && target < resourcesLength) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            for (var i = 0, imax = parsed.length; i < imax; ++i) {\n                result.push(parsed[i]);\n            }\n        }\n        return result;\n    };\n    return EShapeButtonLayerButtonValue;\n}());\nexport { EShapeButtonLayerButtonValue };\n//# sourceMappingURL=e-shape-button-layer-button-value.js.map","import { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nvar EShapeButtonLayerButtonValueContainer = /** @class */ (function () {\n    function EShapeButtonLayerButtonValueContainer(onChange) {\n        this._values = [];\n        this._sizeX = 1;\n        this._margin = 2;\n        this._onChange = onChange;\n    }\n    Object.defineProperty(EShapeButtonLayerButtonValueContainer.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EShapeButtonLayerButtonValueContainer.prototype, \"margin\", {\n        get: function () {\n            return this._margin;\n        },\n        set: function (margin) {\n            if (this._margin !== margin) {\n                this._margin = margin;\n                this._onChange();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeButtonLayerButtonValueContainer.prototype.add = function (value, at) {\n        if (at != null) {\n            this._values.splice(at, 0, value);\n        }\n        else {\n            this._values.push(value);\n        }\n        this._onChange();\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.remove = function (index) {\n        var values = this._values;\n        if (0 <= index && index < values.length) {\n            var result = values.splice(index, 1)[0];\n            this._onChange();\n            return result;\n        }\n        return null;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.indexOf = function (target) {\n        var values = this._values;\n        // Instance-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value === target) {\n                return i;\n            }\n        }\n        // Data-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value.isEquals(target)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.get = function (index) {\n        var result = this._values[index];\n        if (result != null) {\n            return result;\n        }\n        return null;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.set = function (index, value) {\n        this._values[index] = value;\n        this._onChange();\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.swap = function (indexA, indexB) {\n        var values = this._values;\n        var tmp = values[indexB];\n        values[indexB] = values[indexA];\n        values[indexA] = tmp;\n        this._onChange();\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.size = function () {\n        return this._values.length;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.copy = function (source) {\n        // Values\n        var values = this._values;\n        var sourceValues = source._values;\n        var sourceValuesLength = sourceValues.length;\n        for (var i = 0; i < sourceValuesLength; ++i) {\n            values[i] = sourceValues[i];\n        }\n        if (values.length !== sourceValuesLength) {\n            values.length = sourceValuesLength;\n        }\n        //\n        this._sizeX = source._sizeX;\n        this._onChange();\n        return this;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.serialize = function (manager) {\n        var serialized = \"\";\n        var delimiter = \"[\";\n        var values = this._values;\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            serialized += delimiter + values[i].serizlize(manager);\n            delimiter = \",\";\n        }\n        serialized += delimiter + this._margin + \"]\";\n        return manager.addResource(serialized);\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var isChanged = false;\n            var values = this._values;\n            if (0 < values.length) {\n                values.length = 0;\n                isChanged = true;\n            }\n            for (var i = 0, imax = parsed.length - 1; i < imax; ++i) {\n                var value = EShapeButtonLayerButtonValue.deserialize(parsed[i], manager);\n                if (value != null) {\n                    values.push(value);\n                }\n            }\n            var margin = parsed[parsed.length - 1];\n            if (this._margin !== margin) {\n                this._margin = margin;\n                isChanged = true;\n            }\n            if (0 < values.length) {\n                isChanged = true;\n            }\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    };\n    return EShapeButtonLayerButtonValueContainer;\n}());\nexport { EShapeButtonLayerButtonValueContainer };\n//# sourceMappingURL=e-shape-button-layer-button-value-container.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nvar EShapeButtonLayerIds = /** @class */ (function () {\n    function EShapeButtonLayerIds() {\n    }\n    EShapeButtonLayerIds.ID = EShapeType.EXTENSION + 200;\n    return EShapeButtonLayerIds;\n}());\nexport { EShapeButtonLayerIds };\n//# sourceMappingURL=e-shape-button-layer-ids.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton, EShapeCopyPart, EShapeCorner, EShapeGroupShadowed, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayerButtonValueContainer } from \"./e-shape-button-layer-button-value-container\";\nimport { EShapeButtonLayerIds } from \"./e-shape-button-layer-ids\";\nvar EShapeButtonLayer = /** @class */ (function (_super) {\n    __extends(EShapeButtonLayer, _super);\n    function EShapeButtonLayer(mode, type) {\n        if (type === void 0) { type = EShapeButtonLayerIds.ID; }\n        var _this = _super.call(this, mode, type) || this;\n        _this._button = new EShapeButtonLayerButtonValueContainer(function () {\n            _this.onButtonValueChange();\n        });\n        _this._corner = EShapeCorner.ALL;\n        return _this;\n    }\n    Object.defineProperty(EShapeButtonLayer.prototype, \"button\", {\n        get: function () {\n            return this._button;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EShapeButtonLayer.prototype, \"corner\", {\n        get: function () {\n            return this._corner;\n        },\n        set: function (corner) {\n            if (this._corner !== corner) {\n                this._corner = corner;\n                this.updateUploaded();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeButtonLayer.prototype.onButtonValueChange = function () {\n        this.newButtons();\n        this.layoutButtons();\n    };\n    EShapeButtonLayer.prototype.onSizeChange = function () {\n        _super.prototype.onSizeChange.call(this);\n        this.layoutButtons();\n    };\n    EShapeButtonLayer.prototype.newButtons = function () {\n        var shapeButton = this.button;\n        var buttonCount = shapeButton.size();\n        var values = shapeButton.values;\n        var children = this.children;\n        var childrenLength = children.length;\n        // Create / delete children\n        if (childrenLength < buttonCount) {\n            var master = 0 < childrenLength ? children[childrenLength - 1] : null;\n            for (var i = childrenLength; i < buttonCount; ++i) {\n                var button = new EShapeButton();\n                var value = values[i];\n                if (master != null) {\n                    button.copy(master);\n                    button.text.value = value.label;\n                }\n                else {\n                    button.stroke.set(false, 0x3399ff, 1);\n                    button.fill.set(true, 0x3399ff, 1);\n                    button.text.set(value.label, 0xffffff, 1);\n                    button.state.isFocusable = true;\n                    button.interactive = true;\n                }\n                if (0 < button.action.size()) {\n                    button.action.set(0, value.action);\n                }\n                else {\n                    button.action.add(value.action);\n                }\n                button.isToggle = true;\n                button.isGrouped = true;\n                button.attach(this);\n            }\n        }\n        else if (buttonCount < childrenLength) {\n            for (var i = childrenLength - 1; buttonCount <= i; --i) {\n                children[i].detach();\n            }\n        }\n        // Update corner, action and state\n        var corner = this.corner;\n        for (var i = 0; i < buttonCount; ++i) {\n            var child = children[i];\n            var value = values[i];\n            child.corner = this.toCorner(i, buttonCount, corner);\n            child.text.value = value.label;\n            if (0 < child.action.size()) {\n                child.action.set(0, value.action);\n            }\n            else {\n                child.action.add(value.action);\n            }\n            child.state.isActive = value.isActive;\n        }\n    };\n    EShapeButtonLayer.prototype.layoutButtons = function () {\n        var button = this.button;\n        var buttonValues = button.values;\n        var buttonValuesLength = buttonValues.length;\n        var buttonMargin = button.margin;\n        var size = this.size;\n        var sizeX = size.x;\n        var sizeY = size.y;\n        var children = this.children;\n        var childrenLength = children.length;\n        // Total weight\n        var totalWeight = 0;\n        for (var i = 0; i < buttonValuesLength; ++i) {\n            totalWeight += buttonValues[i].weight;\n        }\n        totalWeight = Math.max(0.0001, totalWeight);\n        var buttonSpace = Math.max(0, sizeX - (buttonValuesLength - 1) * buttonMargin);\n        var buttonSpaceFactor = buttonSpace / totalWeight;\n        // Update\n        var x = -sizeX * 0.5;\n        for (var i = 0; i < childrenLength; ++i) {\n            var buttonValue = buttonValues[i];\n            var width = buttonValue.weight * buttonSpaceFactor;\n            var child = children[i];\n            child.lock(EShapeLockPart.ALL);\n            child.size.set(width, sizeY);\n            child.transform.position.set(x + width * 0.5, 0);\n            child.unlock(EShapeLockPart.ALL, true);\n            x += width + buttonMargin;\n        }\n    };\n    EShapeButtonLayer.prototype.toCorner = function (index, size, corner) {\n        var result = EShapeCorner.NONE;\n        if (index === 0) {\n            result |= EShapeCorner.LEFT & corner;\n        }\n        if (index === size - 1) {\n            result |= EShapeCorner.RIGHT & corner;\n        }\n        return result;\n    };\n    EShapeButtonLayer.prototype.copy = function (source, part) {\n        if (part === void 0) { part = EShapeCopyPart.ALL; }\n        var result = _super.prototype.copy.call(this, source, part);\n        if (source instanceof EShapeButtonLayer) {\n            this._button.copy(source.button);\n        }\n        return result;\n    };\n    EShapeButtonLayer.prototype.serialize = function (manager) {\n        var result = _super.prototype.serialize.call(this, manager);\n        var resource = result[15];\n        result[15] = manager.addResource(\"[\".concat(this._button.serialize(manager), \",\").concat(resource, \"]\"));\n        return result;\n    };\n    return EShapeButtonLayer;\n}(EShapeGroupShadowed));\nexport { EShapeButtonLayer };\n//# sourceMappingURL=e-shape-button-layer.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueAdd, _super);\n    function ECommandShapeButtonLayerValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    ECommandShapeButtonLayerValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeButtonLayerValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                shape.button.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                shape.button.remove(shape.button.size() - 1);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeButtonLayerValueAdd;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueAdd };\n//# sourceMappingURL=e-command-shape-button-layer-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueBringForward, _super);\n    function ECommandShapeButtonLayerValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = shape.button.indexOf(target);\n                indices.push(index);\n                if (0 < index) {\n                    shape.button.swap(index - 1, index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 < index) {\n                    shape.button.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeButtonLayerValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueBringForward };\n//# sourceMappingURL=e-command-shape-button-layer-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueMargin = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueMargin, _super);\n    function ECommandShapeButtonLayerValueMargin(value, selection) {\n        var _this = _super.call(this) || this;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                values.push(shape.button.margin);\n                shape.button.margin = value;\n            }\n            else {\n                values.push(0);\n            }\n        }\n        _this._values = values;\n        _this._selection = selection;\n        return _this;\n    }\n    ECommandShapeButtonLayerValueMargin.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueMargin.prototype.redo = function () {\n        var selection = this._selection;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var value = values[i];\n                values[i] = shape.button.margin;\n                shape.button.margin = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueMargin.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeButtonLayerValueMargin;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueMargin };\n//# sourceMappingURL=e-command-shape-button-layer-value-margin.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueRemove, _super);\n    function ECommandShapeButtonLayerValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = shape.button.indexOf(target);\n                indices.push(index);\n                if (0 <= index) {\n                    shape.button.remove(index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeButtonLayerValueRemove;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueRemove };\n//# sourceMappingURL=e-command-shape-button-layer-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueReplace, _super);\n    function ECommandShapeButtonLayerValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = shape.button.indexOf(oldValue);\n                indices.push(index);\n                if (0 <= index) {\n                    oldValues.push(shape.button.get(index));\n                    shape.button.set(index, newValue);\n                }\n                else {\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.set(index, newValue);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.set(index, oldValues[i]);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeButtonLayerValueReplace;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueReplace };\n//# sourceMappingURL=e-command-shape-button-layer-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueSendBackward, _super);\n    function ECommandShapeButtonLayerValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var button = shape.button;\n                var index = button.indexOf(target);\n                indices.push(index);\n                if (0 <= index && index < button.size() - 1) {\n                    button.swap(index + 1, index);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var button = shape.button;\n                var index = indices[i];\n                if (0 <= index && index < button.size() - 1) {\n                    button.swap(index + 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeButtonLayerValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueSendBackward };\n//# sourceMappingURL=e-command-shape-button-layer-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheck, DDialogLayered, DInputLabel, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DMenu, DSelectMultiple } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nvar EDialogShapeButtonLayerValue = /** @class */ (function (_super) {\n    __extends(EDialogShapeButtonLayerValue, _super);\n    function EDialogShapeButtonLayerValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogShapeButtonLayerValue.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.inputLabel, this.inputWidth, this.newLayoutOf(theme.getSelectLayerLabel(), this.selectLayer), this.newLayoutOf(null, this.checkBringToFront), this.newLayoutOf(null, this.checkIsGrouped), this.newLayoutOf(null, this.checkIsActive));\n        return result;\n    };\n    EDialogShapeButtonLayerValue.prototype.newLayoutOf = function (label, target) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLayoutLabel(label), target, this.newLayoutSpace()]\n        });\n    };\n    EDialogShapeButtonLayerValue.prototype.newLayoutLabel = function (label) {\n        if (label != null) {\n            return new DInputLabel({\n                width: 60,\n                text: {\n                    value: label\n                }\n            });\n        }\n        else {\n            return this.newLayoutSpace();\n        }\n    };\n    EDialogShapeButtonLayerValue.prototype.newLayoutSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"inputLabel\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLabel) !== null && _a !== void 0 ? _a : (this._inputLabel = this.newInputLabel()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newInputLabel = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"inputWidth\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputWidth) !== null && _a !== void 0 ? _a : (this._inputWidth = this.newInputWidth()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newInputWidth = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                min: 0,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"selectLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayer) !== null && _a !== void 0 ? _a : (this._selectLayer = this.newSelectLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newSelectLayer = function () {\n        return new DSelectMultiple({\n            weight: 1\n        });\n    };\n    EDialogShapeButtonLayerValue.prototype.newSelectLayerMenuItemOptions = function () {\n        var _a;\n        var diagram = (_a = this.options) === null || _a === void 0 ? void 0 : _a.diagram;\n        if (diagram != null) {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var result = [];\n                var layers = canvas.layer.children;\n                for (var i = layers.length - 1; 0 <= i; --i) {\n                    var layer = layers[i];\n                    result.push({\n                        value: i,\n                        text: {\n                            value: layer.name\n                        },\n                        check: true\n                    });\n                }\n                return result;\n            }\n        }\n        return [];\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"checkBringToFront\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkBringToFront) !== null && _a !== void 0 ? _a : (this._checkBringToFront = this.newCheckBringToFront()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newCheckBringToFront = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBringToFromLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"checkIsGrouped\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsGrouped) !== null && _a !== void 0 ? _a : (this._checkIsGrouped = this.newCheckIsGrouped()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newCheckIsGrouped = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckIsGroupedLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"checkIsActive\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsActive) !== null && _a !== void 0 ? _a : (this._checkIsActive = this.newCheckIsActive()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newCheckIsActive = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckIsActiveLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    EDialogShapeButtonLayerValue.prototype.reset = function () {\n        this.inputLabel.input.value = this.theme.newInputLabel();\n        this.inputWidth.input.value = 1;\n        this.selectLayer.values = [];\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        this.checkBringToFront.state.isActive = false;\n        this.checkIsGrouped.state.isActive = true;\n        return this;\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"value\", {\n        get: function () {\n            return new EShapeButtonLayerButtonValue(this.inputLabel.input.value, this.inputWidth.input.value, this.selectLayer.values.slice(0), this.checkBringToFront.state.isActive, this.checkIsGrouped.state.isActive, this.checkIsActive.state.isActive);\n        },\n        set: function (value) {\n            this.selectLayer.menu = new DMenu({\n                fit: true,\n                items: this.newSelectLayerMenuItemOptions()\n            });\n            if (value != null) {\n                this.inputLabel.input.value = value.label;\n                this.inputWidth.input.value = value.weight;\n                this.selectLayer.values = value.layers;\n                this.checkBringToFront.state.isActive = value.bringToFront;\n                this.checkIsGrouped.state.isActive = value.isGrouped;\n                this.checkIsActive.state.isActive = value.isActive;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogShapeButtonLayerValue.prototype.getType = function () {\n        return \"EDialogShapeButtonLayerValue\";\n    };\n    return EDialogShapeButtonLayerValue;\n}(DDialogLayered));\nexport { EDialogShapeButtonLayerValue };\n//# sourceMappingURL=e-dialog-shape-button-layer-value.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DInputRealAndLabel, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DPane, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeButtonLayerValueAdd } from \"./e-command-shape-button-layer-value-add\";\nimport { ECommandShapeButtonLayerValueBringForward } from \"./e-command-shape-button-layer-value-bring-forward\";\nimport { ECommandShapeButtonLayerValueMargin } from \"./e-command-shape-button-layer-value-margin\";\nimport { ECommandShapeButtonLayerValueRemove } from \"./e-command-shape-button-layer-value-remove\";\nimport { ECommandShapeButtonLayerValueReplace } from \"./e-command-shape-button-layer-value-replace\";\nimport { ECommandShapeButtonLayerValueSendBackward } from \"./e-command-shape-button-layer-value-send-backward\";\nimport { EDialogShapeButtonLayerValue } from \"./e-dialog-shape-button-layer-value\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar EEditorShapeButtonLayer = /** @class */ (function (_super) {\n    __extends(EEditorShapeButtonLayer, _super);\n    function EEditorShapeButtonLayer(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        // Layout\n        _this.initLayout();\n        return _this;\n    }\n    EEditorShapeButtonLayer.prototype.initLayout = function () {\n        var _this = this;\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        this.newTextLabel(),\n                        this.buttonNew,\n                        this.buttonDelete,\n                        this.buttonBringForward,\n                        this.buttonSendBackward\n                    ]\n                }),\n                this.columnList,\n                this.inputMargin\n            ]\n        });\n        // Selection\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n            _this.onSelectionChange(selection);\n        });\n        var columnList = this.columnList;\n        columnList.data.selection.on(\"change\", function () {\n            _this.onListSelectionChange(columnList);\n        });\n        this.onSelectionChange(selection);\n    };\n    EEditorShapeButtonLayer.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonNew\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.subtheme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.dialogButton\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandShapeButtonLayerValueAdd(value, _this._selection));\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChangeButtonNew = function (selection) {\n        var buttonNew = this.buttonNew;\n        if (selection.last() instanceof EShapeButtonLayer) {\n            buttonNew.state.isDisabled = false;\n        }\n        else {\n            buttonNew.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.subtheme.getButtonDeleteTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.data.selection.first;\n                    if (first != null && 1 < columnList.data.size()) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueRemove(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChangeButtonDelete = function (columnList) {\n        this.buttonDelete.state.isDisabled =\n            columnList.data.size() <= 1 || columnList.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.subtheme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    if (first != null && columnList.data.items[0] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueBringForward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChangeButtonBringForward = function (columnList) {\n        var first = columnList.data.selection.first;\n        var items = columnList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.subtheme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    var items = columnList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueSendBackward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChangeButtonSendBackward = function (columnList) {\n        var first = columnList.selection.first;\n        var items = columnList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"dialogButton\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogButton) !== null && _a !== void 0 ? _a : (this._dialogButton = this.newDialogButton()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newDialogButton = function () {\n        return new EDialogShapeButtonLayerValue({\n            diagram: this._diagram\n        });\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"columnList\", {\n        get: function () {\n            var _a;\n            return ((_a = this._columnList) !== null && _a !== void 0 ? _a : (this._columnList = this.newColumnList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newColumnList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"100%\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return value.label;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onColumnListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorShapeButtonLayer.prototype.onColumnListDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var columnDialog = this.dialogButton;\n            columnDialog.value = oldValue;\n            columnDialog.open(item).then(function (newValue) {\n                if (newValue != null) {\n                    DControllers.getCommandController().push(new ECommandShapeButtonLayerValueReplace(oldValue, newValue, _this._selection, list));\n                }\n            });\n        }\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChangeColumnList = function (selection) {\n        var last = selection.last();\n        var columnList = this.columnList;\n        columnList.data.items = last instanceof EShapeButtonLayer ? last.button.values : [];\n        this.onListSelectionChange(columnList);\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"inputMargin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputMargin) !== null && _a !== void 0 ? _a : (this._inputMargin = this.newInputMargin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newInputMargin = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.subtheme.getInputMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueMargin(value, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChangeInputRowHeight = function (selection) {\n        var last = selection.last();\n        var input = this.inputMargin;\n        if (last instanceof EShapeButtonLayer) {\n            input.input.value = last.button.margin;\n            input.state.isDisabled = false;\n        }\n        else {\n            input.state.isDisabled = true;\n        }\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChange = function (selection) {\n        this.onSelectionChangeButtonNew(selection);\n        this.onSelectionChangeColumnList(selection);\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChange = function (columnList) {\n        this.onListSelectionChangeButtonDelete(columnList);\n        this.onListSelectionChangeButtonBringForward(columnList);\n        this.onListSelectionChangeButtonSendBackward(columnList);\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeButtonLayer\");\n    };\n    return EEditorShapeButtonLayer;\n}(DPane));\nexport { EEditorShapeButtonLayer };\n//# sourceMappingURL=e-editor-shape-button-layer.js.map","import { createGroupUploaded, deserializeBase, DThemes, EShapeCapability, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nimport { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EShapeButtonLayerIds } from \"./e-shape-button-layer-ids\";\nimport { EEditorShapeButtonLayer } from \"./e-editor-shape-button-layer\";\nvar EShapeButtonLayers = /** @class */ (function () {\n    function EShapeButtonLayers() {\n    }\n    EShapeButtonLayers.getTheme = function () {\n        return DThemes.get(\"EShapeButtonLayer\");\n    };\n    EShapeButtonLayers.create = function (existing) {\n        var result = new EShapeButtonLayer(EShapeResourceManagerDeserializationMode.EDITOR);\n        if (existing) {\n            result.copy(existing);\n            if (!(existing instanceof EShapeButtonLayer)) {\n                var label = this.getTheme().getLabel();\n                result.button.add(new EShapeButtonLayerButtonValue(label, 1, [], false, true, false));\n            }\n        }\n        else {\n            var label = this.getTheme().getLabel();\n            result.button.add(new EShapeButtonLayerButtonValue(label, 1, [], false, true, false));\n        }\n        result.onSizeChange();\n        return result;\n    };\n    EShapeButtonLayers.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeButtonLayerIds.ID,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2\" +\n                    \"-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z\\\"/>\" +\n                    \"<path d=\\\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7\" +\n                    \".36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16zm0-11.47L17.74 9 12 13.47 6.\" +\n                    \"26 9 12 4.53z\\\" transform=\\\"translate(7.25,8) scale(0.6)\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeButtonLayers.create(existing); },\n            deserializer: function (item, manager) { return EShapeButtonLayers.deserialize(item, manager); },\n            editor: EEditorShapeButtonLayer,\n            uploaded: createGroupUploaded,\n            capability: (EShapeCapability.PRIMITIVE |\n                EShapeCapability.STROKE_SIDE |\n                EShapeCapability.BORDER_RADIUS) &\n                ~EShapeCapability.CHILDREN\n        });\n    };\n    EShapeButtonLayers.deserialize = function (item, manager) {\n        var shape = new EShapeButtonLayer(manager.mode);\n        var index = item[15];\n        var resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            var parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.button.deserialize(parsed[0], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    return EShapeButtonLayers;\n}());\nexport { EShapeButtonLayers };\n//# sourceMappingURL=e-shape-button-layers.js.map","var EShapeChartTick = /** @class */ (function () {\n    function EShapeChartTick(major, minor) {\n        this.major = major;\n        this.minor = minor;\n    }\n    EShapeChartTick.prototype.copy = function (source) {\n        this.major.copy(source.major);\n        this.minor.copy(source.minor);\n        return this;\n    };\n    EShapeChartTick.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.major.serialize(manager), \",\").concat(this.minor.serialize(manager), \"]\"));\n    };\n    EShapeChartTick.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.major.deserialize(parsed[0], manager);\n            this.minor.deserialize(parsed[1], manager);\n        }\n    };\n    return EShapeChartTick;\n}());\nexport { EShapeChartTick };\n//# sourceMappingURL=e-shape-chart-tick.js.map","var EShapeChartTickMajor = /** @class */ (function () {\n    function EShapeChartTickMajor(count) {\n        this.count = count;\n    }\n    EShapeChartTickMajor.prototype.copy = function (source) {\n        this.count = source.count;\n        return this;\n    };\n    EShapeChartTickMajor.prototype.serialize = function (manager) {\n        return manager.addResource(\"\".concat(this.count));\n    };\n    EShapeChartTickMajor.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.count = parsed;\n        }\n    };\n    return EShapeChartTickMajor;\n}());\nexport { EShapeChartTickMajor };\n//# sourceMappingURL=e-shape-chart-tick-major.js.map","var EShapeChartTickMinor = /** @class */ (function () {\n    function EShapeChartTickMinor(count) {\n        this.count = count;\n    }\n    EShapeChartTickMinor.prototype.copy = function (source) {\n        this.count = source.count;\n        return this;\n    };\n    EShapeChartTickMinor.prototype.serialize = function (manager) {\n        return manager.addResource(\"\".concat(this.count));\n    };\n    EShapeChartTickMinor.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.count = parsed;\n        }\n    };\n    return EShapeChartTickMinor;\n}());\nexport { EShapeChartTickMinor };\n//# sourceMappingURL=e-shape-chart-tick-minor.js.map","import { EShapeChartTick } from \"./e-shape-chart-tick\";\nimport { EShapeChartTickMajor } from \"./e-shape-chart-tick-major\";\nimport { EShapeChartTickMinor } from \"./e-shape-chart-tick-minor\";\nvar EShapeChartAxisX = /** @class */ (function () {\n    function EShapeChartAxisX() {\n        this.padding = 10;\n        this.tick = new EShapeChartTick(new EShapeChartTickMajor(3), new EShapeChartTickMinor(3));\n    }\n    EShapeChartAxisX.prototype.copy = function (source) {\n        this.padding = source.padding;\n        this.tick.copy(source.tick);\n        return this;\n    };\n    EShapeChartAxisX.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.padding, \",\").concat(this.tick.serialize(manager), \"]\"));\n    };\n    EShapeChartAxisX.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.padding = parsed[0];\n            this.tick.deserialize(parsed[1], manager);\n        }\n    };\n    return EShapeChartAxisX;\n}());\nexport { EShapeChartAxisX };\n//# sourceMappingURL=e-shape-chart-axis-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeChartAxisX } from \"./e-shape-chart-axis-x\";\nvar EShapeChartAxisY = /** @class */ (function (_super) {\n    __extends(EShapeChartAxisY, _super);\n    function EShapeChartAxisY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EShapeChartAxisY;\n}(EShapeChartAxisX));\nexport { EShapeChartAxisY };\n//# sourceMappingURL=e-shape-chart-axis-y.js.map","import { EShapeChartAxisX } from \"./e-shape-chart-axis-x\";\nimport { EShapeChartAxisY } from \"./e-shape-chart-axis-y\";\nvar EShapeChartAxis = /** @class */ (function () {\n    function EShapeChartAxis() {\n        this.x = new EShapeChartAxisX();\n        this.y = new EShapeChartAxisY();\n    }\n    EShapeChartAxis.prototype.copy = function (source) {\n        this.x.copy(source.x);\n        this.y.copy(source.y);\n        return this;\n    };\n    EShapeChartAxis.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.x.serialize(manager), \",\").concat(this.y.serialize(manager), \"]\"));\n    };\n    EShapeChartAxis.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.x.deserialize(parsed[0], manager);\n            this.y.deserialize(parsed[1], manager);\n        }\n    };\n    return EShapeChartAxis;\n}());\nexport { EShapeChartAxis };\n//# sourceMappingURL=e-shape-chart-axis.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nvar EShapeChartLineIds = /** @class */ (function () {\n    function EShapeChartLineIds() {\n    }\n    EShapeChartLineIds.ID = EShapeType.EXTENSION + 0;\n    EShapeChartLineIds.PLOT_AREA_ID = \"plot-area\";\n    EShapeChartLineIds.LINE_ID = \"line\";\n    EShapeChartLineIds.X_AXIS_ID = \"x-axis\";\n    EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID = \"x-axis-tick-major\";\n    EShapeChartLineIds.X_AXIS_TICK_MINOR_ID = \"x-axis-tick-minor\";\n    EShapeChartLineIds.Y_AXIS_ID = \"y-axis\";\n    EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID = \"y-axis-tick-major\";\n    EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID = \"y-axis-tick-minor\";\n    return EShapeChartLineIds;\n}());\nexport { EShapeChartLineIds };\n//# sourceMappingURL=e-shape-chart-line-ids.js.map","import { __extends } from \"tslib\";\nimport { EShapeCopyPart, EShapeGroup } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartAxis } from \"./e-shape-chart-axis\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nvar EShapeChartLine = /** @class */ (function (_super) {\n    __extends(EShapeChartLine, _super);\n    function EShapeChartLine(mode, type) {\n        if (type === void 0) { type = EShapeChartLineIds.ID; }\n        var _this = _super.call(this, mode, type) || this;\n        _this.axis = new EShapeChartAxis();\n        return _this;\n    }\n    EShapeChartLine.prototype.copy = function (source, part) {\n        if (part === void 0) { part = EShapeCopyPart.ALL; }\n        var result = _super.prototype.copy.call(this, source, part);\n        if (source instanceof EShapeChartLine) {\n            this.axis.copy(source.axis);\n        }\n        return result;\n    };\n    EShapeChartLine.prototype.serialize = function (manager) {\n        var result = _super.prototype.serialize.call(this, manager);\n        var resource = result[15];\n        result[15] = manager.addResource(\"[\".concat(this.axis.serialize(manager), \",\").concat(resource, \"]\"));\n        return result;\n    };\n    return EShapeChartLine;\n}(EShapeGroup));\nexport { EShapeChartLine };\n//# sourceMappingURL=e-shape-chart-line.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartAxisXPadding = /** @class */ (function (_super) {\n    __extends(ECommandChartAxisXPadding, _super);\n    function ECommandChartAxisXPadding() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartAxisXPadding.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.padding;\n        }\n        return 0;\n    };\n    ECommandChartAxisXPadding.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.padding = property;\n        }\n    };\n    ECommandChartAxisXPadding.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartAxisXPadding;\n}(ECommandShapePropertySimple));\nexport { ECommandChartAxisXPadding };\n//# sourceMappingURL=e-command-chart-axis-x-padding.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartAxisYPadding = /** @class */ (function (_super) {\n    __extends(ECommandChartAxisYPadding, _super);\n    function ECommandChartAxisYPadding() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartAxisYPadding.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.padding;\n        }\n        return 0;\n    };\n    ECommandChartAxisYPadding.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.padding = property;\n        }\n    };\n    ECommandChartAxisYPadding.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartAxisYPadding;\n}(ECommandShapePropertySimple));\nexport { ECommandChartAxisYPadding };\n//# sourceMappingURL=e-command-chart-axis-y-padding.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickXMajorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickXMajorCount, _super);\n    function ECommandChartTickXMajorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickXMajorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.tick.major.count;\n        }\n        return 0;\n    };\n    ECommandChartTickXMajorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.tick.major.count = property;\n        }\n    };\n    ECommandChartTickXMajorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickXMajorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickXMajorCount };\n//# sourceMappingURL=e-command-chart-tick-x-major-count.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickXMinorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickXMinorCount, _super);\n    function ECommandChartTickXMinorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickXMinorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.tick.minor.count;\n        }\n        return 0;\n    };\n    ECommandChartTickXMinorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.tick.minor.count = property;\n        }\n    };\n    ECommandChartTickXMinorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickXMinorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickXMinorCount };\n//# sourceMappingURL=e-command-chart-tick-x-minor-count.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickYMajorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickYMajorCount, _super);\n    function ECommandChartTickYMajorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickYMajorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.tick.major.count;\n        }\n        return 0;\n    };\n    ECommandChartTickYMajorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.tick.major.count = property;\n        }\n    };\n    ECommandChartTickYMajorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickYMajorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickYMajorCount };\n//# sourceMappingURL=e-command-chart-tick-y-major-count.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickYMinorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickYMinorCount, _super);\n    function ECommandChartTickYMinorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickYMinorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.tick.minor.count;\n        }\n        return 0;\n    };\n    ECommandChartTickYMinorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.tick.minor.count = property;\n        }\n    };\n    ECommandChartTickYMinorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickYMinorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickYMinorCount };\n//# sourceMappingURL=e-command-chart-tick-y-minor-count.js.map","import { createLine, DControllers, DThemes, EShapeBar, EShapeBarPosition, EShapeDefaults, EShapePointsStyle, EShapeRectangle, EShapeTextAlignHorizontal, EShapeTextAlignVertical, EShapeTextDirection } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandChartAxisXPadding } from \"./e-command-chart-axis-x-padding\";\nimport { ECommandChartAxisYPadding } from \"./e-command-chart-axis-y-padding\";\nimport { ECommandChartTickXMajorCount } from \"./e-command-chart-tick-x-major-count\";\nimport { ECommandChartTickXMinorCount } from \"./e-command-chart-tick-x-minor-count\";\nimport { ECommandChartTickYMajorCount } from \"./e-command-chart-tick-y-major-count\";\nimport { ECommandChartTickYMinorCount } from \"./e-command-chart-tick-y-minor-count\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nvar EShapeChartAxes = /** @class */ (function () {\n    function EShapeChartAxes() {\n    }\n    EShapeChartAxes.getTheme = function () {\n        return DThemes.get(\"EShapeChartLine\");\n    };\n    EShapeChartAxes.getPlotArea = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.PLOT_AREA_ID);\n    };\n    EShapeChartAxes.newPlotArea = function (shape) {\n        var result = new EShapeRectangle();\n        result.id = EShapeChartLineIds.PLOT_AREA_ID;\n        result.size.set(shape.size.x, shape.size.y);\n        result.stroke.enable = false;\n        result.fill.alpha = EShapeDefaults.FILL_ALPHA * 0.5;\n        result.text.value = this.getTheme().newPlotAreaLabel();\n        result.text.align.vertical = EShapeTextAlignVertical.OUTSIDE_TOP;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.getLine = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.LINE_ID);\n    };\n    EShapeChartAxes.newLine = function (shape) {\n        var sx = 0.8 * shape.size.x;\n        var sy = 0.8 * shape.size.y;\n        var sxh = sx * 0.5;\n        var syh = sy * 0.5;\n        var result = createLine([-sxh, +syh, +sxh, -syh], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n        result.id = EShapeChartLineIds.LINE_ID;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.getXAxis = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_ID);\n    };\n    EShapeChartAxes.getXAxisTickMajor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID);\n    };\n    EShapeChartAxes.getXAxisTickMinor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MINOR_ID);\n    };\n    EShapeChartAxes.newXAxis = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_ID;\n        result.size.set(shape.size.x, 0);\n        result.transform.position.set(0, shape.size.y * 0.5);\n        result.points.position = EShapeBarPosition.LEFT;\n        result.points.size = -1;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = this.getTheme().newXAxisLabel();\n        result.text.align.vertical = EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n        result.text.padding.set(50, 50);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createXAxis = function (selection) {\n        selection.createChildren(function (shape) {\n            return [EShapeChartAxes.newXAxis(shape)];\n        });\n    };\n    EShapeChartAxes.deleteXAxis = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                result = [axis];\n            }\n            var major = EShapeChartAxes.getXAxisTickMajor(shape);\n            if (major != null) {\n                if (result == null) {\n                    result = [major];\n                }\n                else {\n                    result.push(major);\n                }\n            }\n            var minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setXAxisPadding = function (padding, selection) {\n        DControllers.getCommandController().push(new ECommandChartAxisXPadding(selection, padding));\n    };\n    EShapeChartAxes.newXAxisTickMajor = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(0, shape.size.y * 0.5);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = 10;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = \"%YMD\\n%Hms.%mi\";\n        result.text.align.vertical = EShapeTextAlignVertical.TOP;\n        result.text.padding.set(12.5, 12.5);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.newXAxisTickMinor = function (shape, x, y) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_TICK_MINOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(x, y);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = 5;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH * 0.5;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createXAxisTickMajor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                return [_this.newXAxisTickMajor(shape)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteXAxisTickMajor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var major = EShapeChartAxes.getXAxisTickMajor(shape);\n            if (major != null) {\n                result = [major];\n            }\n            var minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setXAxisTickMajorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickXMajorCount(selection, count));\n    };\n    EShapeChartAxes.createXAxisTickMinor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                var sizeX = axis.size.x;\n                var position = axis.transform.position;\n                return [_this.newXAxisTickMinor(shape, position.x - sizeX * 0.25, position.y)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteXAxisTickMinor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                return [minor];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.setXAxisTickMinorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickXMinorCount(selection, count));\n    };\n    EShapeChartAxes.getYAxis = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_ID);\n    };\n    EShapeChartAxes.getYAxisTickMajor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID);\n    };\n    EShapeChartAxes.getYAxisTickMinor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID);\n    };\n    EShapeChartAxes.newYAxis = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_ID;\n        result.size.set(0, shape.size.y);\n        result.transform.position.set(-shape.size.x * 0.5, 0);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = -1;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = this.getTheme().newYAxisLabel();\n        result.text.align.horizontal = EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n        result.text.direction = EShapeTextDirection.BOTTOM_TO_TOP;\n        result.text.padding.set(50, 50);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createYAxis = function (selection) {\n        selection.createChildren(function (shape) {\n            return [EShapeChartAxes.newYAxis(shape)];\n        });\n    };\n    EShapeChartAxes.deleteYAxis = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                result = [axis];\n            }\n            var major = EShapeChartAxes.getYAxisTickMajor(shape);\n            if (major != null) {\n                if (result == null) {\n                    result = [major];\n                }\n                else {\n                    result.push(major);\n                }\n            }\n            var minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setYAxisPadding = function (padding, selection) {\n        DControllers.getCommandController().push(new ECommandChartAxisYPadding(selection, padding));\n    };\n    EShapeChartAxes.newYAxisTickMajor = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(-shape.size.x * 0.5, 0);\n        result.points.position = EShapeBarPosition.RIGHT;\n        result.points.size = 10;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = \"%ssi\";\n        result.text.align.horizontal = EShapeTextAlignHorizontal.RIGHT;\n        result.text.padding.set(12.5, 12.5);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.newYAxisTickMinor = function (shape, x, y) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(x, y);\n        result.points.position = EShapeBarPosition.RIGHT;\n        result.points.size = 5;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH * 0.5;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createYAxisTickMajor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                return [_this.newYAxisTickMajor(shape)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteYAxisTickMajor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var major = EShapeChartAxes.getYAxisTickMajor(shape);\n            if (major != null) {\n                result = [major];\n            }\n            var minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setYAxisTickMajorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickYMajorCount(selection, count));\n    };\n    EShapeChartAxes.createYAxisTickMinor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                var sizeY = axis.size.y;\n                var position = axis.transform.position;\n                return [_this.newYAxisTickMinor(shape, position.x, position.y + sizeY * 0.25)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteYAxisTickMinor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                return [minor];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.setYAxisTickMinorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickYMinorCount(selection, count));\n    };\n    return EShapeChartAxes;\n}());\nexport { EShapeChartAxes };\n//# sourceMappingURL=e-shape-chart-axes.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheckRight, DInputInteger, DLayoutHorizontal, DLayoutVertical, DPane, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartAxes } from \"./e-shape-chart-axes\";\nvar EEditorShapeChartLine = /** @class */ (function (_super) {\n    __extends(EEditorShapeChartLine, _super);\n    function EEditorShapeChartLine(options) {\n        var _this = _super.call(this, options) || this;\n        var selection = options.selection;\n        _this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n        });\n        var subtheme = _this.subtheme;\n        new DLayoutVertical({\n            parent: _this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisLabel()\n                    },\n                    padding: 0,\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    self.state.isActive = EShapeChartAxes.getXAxis(last) != null;\n                                    self.state.isDisabled = false;\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createXAxis(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteXAxis(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisMajorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getXAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getXAxisTickMajor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createXAxisTickMajor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteXAxisTickMajor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisMinorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getXAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getXAxisTickMinor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createXAxisTickMinor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteXAxisTickMinor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisLabel()\n                    },\n                    padding: 0,\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    self.state.isActive = EShapeChartAxes.getYAxis(last) != null;\n                                    self.state.isDisabled = false;\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createYAxis(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteYAxis(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisMajorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getYAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getYAxisTickMajor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createYAxisTickMajor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteYAxisTickMajor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisMinorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getYAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getYAxisTickMinor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createYAxisTickMinor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteYAxisTickMinor(selection);\n                        }\n                    }\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextMajorTickCountLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.tick.major.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setXAxisTickMajorCount(count, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.tick.major.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setYAxisTickMajorCount(count, selection);\n                                }\n                            }\n                        })\n                    ]\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextMinorTickCountLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.tick.minor.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setXAxisTickMinorCount(count, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.tick.minor.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setYAxisTickMinorCount(count, selection);\n                                }\n                            }\n                        })\n                    ]\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextPaddingLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.padding;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (padding) {\n                                    EShapeChartAxes.setXAxisPadding(padding, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.padding;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (padding) {\n                                    EShapeChartAxes.setYAxisPadding(padding, selection);\n                                }\n                            }\n                        })\n                    ]\n                })\n            ],\n            on: {\n                init: function (self) {\n                    var update = function () {\n                        self.state.isDisabled = !(selection.last() instanceof EShapeChartLine);\n                    };\n                    update();\n                    selection.on(\"change\", update);\n                }\n            }\n        });\n        return _this;\n    }\n    EEditorShapeChartLine.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeChartLine.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeChartLine.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeChartLine\");\n    };\n    return EEditorShapeChartLine;\n}(DPane));\nexport { EEditorShapeChartLine };\n//# sourceMappingURL=e-editor-shape-chart-line.js.map","import { __extends } from \"tslib\";\nimport { NumberFormatters, EShapeActionRuntimeBase, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nvar EShapeChartLineActionRuntime = /** @class */ (function (_super) {\n    __extends(EShapeChartLineActionRuntime, _super);\n    function EShapeChartLineActionRuntime(shape) {\n        var _this = _super.call(this) || this;\n        // Lines\n        var line = UtilShapeSearch.findChildById(shape, \"line\");\n        if (line != null) {\n            var data = shape.data;\n            if (data.size() <= 0) {\n                line.detach();\n                _this.lines = [];\n            }\n            else {\n                var lines = [line];\n                for (var i = 1, imax = data.size(); i < imax; ++i) {\n                    var cloned = line.clone();\n                    cloned.attach(shape);\n                    lines.push(cloned);\n                }\n                _this.lines = lines;\n            }\n        }\n        else {\n            _this.lines = [];\n        }\n        // Ticks\n        var xmajorCount = 3;\n        var ymajorCount = 3;\n        var xminorCount = 3;\n        var yminorCount = 3;\n        if (shape instanceof EShapeChartLine) {\n            xmajorCount = shape.axis.x.tick.major.count;\n            ymajorCount = shape.axis.y.tick.major.count;\n            xminorCount = shape.axis.x.tick.minor.count;\n            yminorCount = shape.axis.y.tick.minor.count;\n        }\n        _this.xmajorCount = xmajorCount;\n        _this.ymajorCount = ymajorCount;\n        _this.xminorCount = xminorCount;\n        _this.yminorCount = yminorCount;\n        _this.xmajors = _this.initTicks(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID, xmajorCount);\n        _this.ymajors = _this.initTicks(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID, ymajorCount);\n        _this.xminors = _this.initTicks(shape, EShapeChartLineIds.X_AXIS_TICK_MINOR_ID, (xmajorCount + 1) * xminorCount);\n        _this.yminors = _this.initTicks(shape, EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID, (ymajorCount + 1) * yminorCount);\n        _this.workMajorPositions = new Float64Array(Math.max(xmajorCount, ymajorCount));\n        // Tick format\n        var xtick = UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID);\n        _this.xformatter = NumberFormatters.create(xtick != null ? xtick.text.value : \"\");\n        var ytick = UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID);\n        _this.yformatter = NumberFormatters.create(ytick != null ? ytick.text.value : \"\");\n        // Plot area\n        _this.plotArea = UtilShapeSearch.findChildById(shape, \"plot-area\");\n        // Padding\n        var xpadding = 10;\n        var ypadding = 10;\n        if (shape instanceof EShapeChartLine) {\n            xpadding = shape.axis.x.padding;\n            ypadding = shape.axis.y.padding;\n        }\n        _this.xpadding = xpadding;\n        _this.ypadding = ypadding;\n        return _this;\n    }\n    EShapeChartLineActionRuntime.prototype.initTicks = function (shape, id, count) {\n        var tick = UtilShapeSearch.findChildById(shape, id);\n        if (tick != null) {\n            if (count <= 0) {\n                tick.detach();\n                return [];\n            }\n            else {\n                var ticks = [tick];\n                for (var i = 1; i < count; ++i) {\n                    var cloned = tick.clone();\n                    cloned.attach(shape);\n                    ticks.push(cloned);\n                }\n                return ticks;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.toStepScale = function (scale) {\n        if (5.5 <= scale) {\n            return 10;\n        }\n        else if (2.2 <= scale) {\n            return 5;\n        }\n        else if (1.1 <= scale) {\n            return 2;\n        }\n        return 1;\n    };\n    EShapeChartLineActionRuntime.prototype.getStep = function (min, max, count) {\n        if (count <= 0 || max <= min) {\n            return -1;\n        }\n        // Calculate the step\n        var span = (max - min) / count;\n        var power = Math.floor(Math.log(span) / Math.LN10);\n        var base = Math.pow(10, power);\n        return this.toStepScale(span / base) * base;\n    };\n    EShapeChartLineActionRuntime.prototype.getTickPositions = function (min, max, count, step, padding, ratio, result) {\n        if (count <= 0) {\n            return result;\n        }\n        if (max <= min || step <= 0) {\n            result[0] = min;\n            for (var i = 1; i < count; ++i) {\n                result[i] = NaN;\n            }\n            return result;\n        }\n        // Set positions\n        var start = min / step;\n        var istart = Math.floor(start);\n        var dstart = start - istart;\n        if (padding < dstart * step * ratio) {\n            istart = Math.ceil(start);\n        }\n        var stop = max / step;\n        var istop = Math.ceil(stop);\n        var dstop = istop - stop;\n        if (padding < dstop * step * ratio) {\n            istop = Math.floor(stop);\n        }\n        var nticks = Math.min(count, Math.ceil(istop - istart + 1));\n        for (var i = 0; i < nticks; ++i) {\n            result[i] = (istart + i) * step;\n        }\n        for (var i = nticks; i < count; ++i) {\n            result[i] = NaN;\n        }\n        //\n        return result;\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksXMinor = function (mstep, index, position, min, ratio, lmin, lmax) {\n        var mticks = this.xminors;\n        if (0 < mticks.length) {\n            var minorCount = this.xminorCount;\n            if (0 < mstep) {\n                var padding = this.xpadding;\n                if (index < 0) {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var x = (position - (minorCount - i) * mstep - min) * ratio + lmin;\n                        if (lmin - padding <= x) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.x = x;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n                else {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var x = (position + (i + 1) * mstep - min) * ratio + lmin;\n                        if (x <= lmax + padding) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.x = x;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n            }\n            else {\n                for (var i = (index + 1) * minorCount, imax = i + minorCount; i < imax; ++i) {\n                    mticks[i].visible = false;\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.toStepMinor = function (step, minorCount) {\n        if (0 <= step) {\n            return step / (minorCount + 1);\n        }\n        else {\n            return -1;\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksX = function (min, max, ratio, lmin, lmax) {\n        var ticks = this.xmajors;\n        var mticks = this.xminors;\n        var minorCount = this.xminorCount;\n        var padding = this.xpadding;\n        // Major tick positions\n        var step = this.getStep(min, max, ticks.length);\n        var positions = this.getTickPositions(min, max, ticks.length, step, padding, ratio, this.workMajorPositions);\n        // First minors\n        var mstep = this.toStepMinor(step, minorCount);\n        this.updateTicksXMinor(mstep, -1, positions[0], min, ratio, lmin, lmax);\n        // Major and minor ticks\n        for (var i = 0, imax = ticks.length; i < imax; ++i) {\n            var tick = ticks[i];\n            var position = positions[i];\n            if (position === position) {\n                // Major tick\n                tick.lock(EShapeLockPart.UPLOADED);\n                tick.visible = true;\n                tick.transform.position.x = (position - min) * ratio + lmin;\n                tick.text.value = this.xformatter.format(position, step);\n                tick.unlock(EShapeLockPart.UPLOADED, true);\n                // Minor ticks\n                this.updateTicksXMinor(mstep, i, positions[i], min, ratio, lmin, lmax);\n            }\n            else {\n                // Major tick\n                tick.visible = false;\n                // Minor ticks\n                if (0 < mticks.length) {\n                    for (var j = (i + 1) * minorCount, jmax = j + minorCount; j < jmax; ++j) {\n                        mticks[j].visible = false;\n                    }\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksYMinor = function (mstep, index, position, min, ratio, lmin, lmax) {\n        var mticks = this.yminors;\n        if (0 < mticks.length) {\n            var minorCount = this.yminorCount;\n            if (0 < mstep) {\n                var padding = this.ypadding;\n                if (index < 0) {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var y = lmax - (position - (minorCount - i) * mstep - min) * ratio;\n                        if (y <= lmax + padding) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.y = y;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n                else {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var y = lmax - (position + (i + 1) * mstep - min) * ratio;\n                        if (lmin - padding <= y) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.y = y;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n            }\n            else {\n                for (var i = (index + 1) * minorCount, imax = i + minorCount; i < imax; ++i) {\n                    mticks[i].visible = false;\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksY = function (min, max, ratio, lmin, lmax) {\n        var ticks = this.ymajors;\n        var mticks = this.yminors;\n        var minorCount = this.yminorCount;\n        var padding = this.ypadding;\n        // Major tick positions\n        var step = this.getStep(min, max, ticks.length);\n        var positions = this.getTickPositions(min, max, ticks.length, step, padding, ratio, this.workMajorPositions);\n        // First minors\n        var mstep = this.toStepMinor(step, minorCount);\n        this.updateTicksYMinor(mstep, -1, positions[0], min, ratio, lmin, lmax);\n        // Major and minor ticks\n        for (var i = 0, imax = ticks.length; i < imax; ++i) {\n            var tick = ticks[i];\n            var position = positions[i];\n            if (position === position) {\n                // Major tick\n                tick.lock(EShapeLockPart.UPLOADED);\n                tick.visible = true;\n                tick.transform.position.y = lmax - (position - min) * ratio;\n                tick.text.value = this.yformatter.format(position, step);\n                tick.unlock(EShapeLockPart.UPLOADED, true);\n                // Minor ticks\n                this.updateTicksYMinor(mstep, i, positions[i], min, ratio, lmin, lmax);\n            }\n            else {\n                // Major tick\n                tick.visible = false;\n                // Minor ticks\n                if (0 < mticks.length) {\n                    for (var j = (i + 1) * minorCount, jmax = j + minorCount; j < jmax; ++j) {\n                        mticks[j].visible = false;\n                    }\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateLines = function (data, xmin, xratio, lxmin, ymin, yratio, lymax) {\n        var lines = this.lines;\n        for (var i = 0, imax = Math.min(lines.length, data.size()); i < imax; ++i) {\n            var value = data.get(i);\n            if (value != null) {\n                var line = lines[i];\n                var points = line.points;\n                if (points != null) {\n                    var pointsValues = points.values;\n                    var valueValues = value.values;\n                    var valueValuesLength = valueValues.length;\n                    if (2 <= valueValuesLength) {\n                        var valueTimes = value.times;\n                        var valueTimesLength = valueTimes.length;\n                        if (valueTimesLength < valueValuesLength) {\n                            // Index mode\n                            for (var j = 0; j < valueValuesLength; ++j) {\n                                var index = j << 1;\n                                pointsValues[index + 0] = (j + 1 - xmin) * xratio + lxmin;\n                                pointsValues[index + 1] = lymax - (valueValues[j] - ymin) * yratio;\n                            }\n                        }\n                        else {\n                            // Time mode\n                            for (var j = 0; j < valueValuesLength; ++j) {\n                                var index = j << 1;\n                                pointsValues[index + 0] = (valueTimes[j] - xmin) * xratio + lxmin;\n                                pointsValues[index + 1] = lymax - (valueValues[j] - ymin) * yratio;\n                            }\n                        }\n                        line.lock(EShapeLockPart.UPLOADED);\n                        line.visible = true;\n                        points.values = pointsValues;\n                        line.unlock(EShapeLockPart.UPLOADED, true);\n                    }\n                    else {\n                        line.visible = false;\n                    }\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.execute = function (shape, runtime, time) {\n        var data = shape.data;\n        if (data.isChanged) {\n            // Calculate the plot range in the time-value coordinate\n            var xmin = +Infinity;\n            var xmax = -Infinity;\n            var ymin = +Infinity;\n            var ymax = -Infinity;\n            for (var i = 0, imax = data.size(); i < imax; ++i) {\n                var value = data.get(i);\n                if (value != null) {\n                    var values = value.values;\n                    var valuesLength = values.length;\n                    var times = value.times;\n                    var timesLength = times.length;\n                    // X\n                    if (timesLength < valuesLength) {\n                        // Index mode\n                        if (1 < xmin) {\n                            xmin = 1;\n                        }\n                        if (xmax < valuesLength) {\n                            xmax = valuesLength;\n                        }\n                    }\n                    else {\n                        // Time mode\n                        for (var j = 0; j < timesLength; ++j) {\n                            var t = times[j];\n                            if (t < xmin) {\n                                xmin = t;\n                            }\n                            if (xmax < t) {\n                                xmax = t;\n                            }\n                        }\n                    }\n                    // Y\n                    for (var j = 0; j < valuesLength; ++j) {\n                        var v = values[j];\n                        if (v < ymin) {\n                            ymin = v;\n                        }\n                        if (ymax < v) {\n                            ymax = v;\n                        }\n                    }\n                }\n            }\n            if (xmax < xmin) {\n                xmin = 0;\n                xmax = 1;\n            }\n            else if (xmax <= xmin) {\n                xmax = xmin + 1;\n            }\n            if (ymax < ymin) {\n                ymax = 1;\n                ymin = 0;\n            }\n            else if (ymax <= ymin) {\n                ymax = ymin + 1;\n            }\n            var xspan = xmax - xmin;\n            var yspan = ymax - ymin;\n            // Calculate plot range in the local coordinate\n            var plotArea = this.plotArea;\n            var size = plotArea != null ? plotArea.size : shape.size;\n            var sx = size.x * 0.5;\n            var sy = size.y * 0.5;\n            var xpadding = this.xpadding;\n            var ypadding = this.ypadding;\n            var lxmin = -sx + xpadding;\n            var lxmax = +sx - xpadding;\n            var lymin = -sy + ypadding;\n            var lymax = +sy - ypadding;\n            if (lxmax <= lxmin) {\n                lxmax = lxmin + 1;\n            }\n            if (lymax <= lymin) {\n                lymax = lymin + 1;\n            }\n            var lxspan = lxmax - lxmin;\n            var lyspan = lymax - lymin;\n            // x (in the time-value coordinate)\n            // lx (in the local coordinate)\n            // lx = (x - xmin) / (xmax - xmin) * (lxmax - lxmin) + lxmin\n            //    = (x - xmin) * xratio + lxmin\n            // where xratio := (lxmax - lxmin) / (xmax - xmin)\n            //\n            // Please note thay the y coordinate in the local coordinate is upside down.\n            // Namely, ly = lymax - (y - ymin) * yratio.\n            var xratio = lxspan / xspan;\n            var yratio = lyspan / yspan;\n            // X ticks\n            this.updateTicksX(xmin, xmax, xratio, lxmin, lxmax);\n            // Y ticks\n            this.updateTicksY(ymin, ymax, yratio, lymin, lymax);\n            // Lines\n            this.updateLines(data, xmin, xratio, lxmin, ymin, yratio, lymax);\n        }\n    };\n    return EShapeChartLineActionRuntime;\n}(EShapeActionRuntimeBase));\nexport { EShapeChartLineActionRuntime };\n//# sourceMappingURL=e-shape-chart-line-action-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLineActionRuntime } from \"./e-shape-chart-line-action-runtime\";\nvar EShapeChartLineRuntime = /** @class */ (function (_super) {\n    __extends(EShapeChartLineRuntime, _super);\n    function EShapeChartLineRuntime(shape) {\n        var _this = _super.call(this, shape) || this;\n        _this.actions.push(new EShapeChartLineActionRuntime(shape));\n        return _this;\n    }\n    return EShapeChartLineRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeChartLineRuntime };\n//# sourceMappingURL=e-shape-chart-line-runtime.js.map","import { deserializeBase, DThemes, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeChartLine } from \"./e-editor-shape-chart-line\";\nimport { EShapeChartLineRuntime } from \"./e-shape-chart-line-runtime\";\nimport { EShapeChartAxes } from \"./e-shape-chart-axes\";\nvar EShapeChartLines = /** @class */ (function () {\n    function EShapeChartLines() {\n    }\n    EShapeChartLines.getTheme = function () {\n        return DThemes.get(\"EShapeChartLine\");\n    };\n    EShapeChartLines.deserialize = function (item, manager) {\n        var shape = new EShapeChartLine(manager.mode);\n        var index = item[15];\n        var resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            var parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.axis.deserialize(parsed[0], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    EShapeChartLines.create = function (existing) {\n        var result = new EShapeChartLine(EShapeResourceManagerDeserializationMode.EDITOR);\n        if (existing) {\n            result.copy(existing);\n        }\n        // Plot area\n        EShapeChartAxes.newPlotArea(result);\n        // Line\n        EShapeChartAxes.newLine(result);\n        // Axis\n        EShapeChartAxes.newXAxis(result);\n        EShapeChartAxes.newXAxisTickMajor(result);\n        EShapeChartAxes.newYAxis(result);\n        EShapeChartAxes.newYAxisTickMajor(result);\n        if (existing instanceof EShapeChartLine) {\n            result.axis.copy(existing.axis);\n        }\n        return result;\n    };\n    EShapeChartLines.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeChartLineIds.ID,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M23,8c0,1.1-0.9,2-2,2c-0.18,0-0.35-0.02-0.51-0.07l-3.56,\" +\n                    \"3.55C16.98,13.64,17,13.82,17,14c0,1.1-0.9,2-2,2s-2-0.9-2-2 c0-0.1\" +\n                    \"8,0.02-0.36,0.07-0.52l-2.55-2.55C10.36,10.98,10.18,11,10,11c-0.18\" +\n                    \",0-0.36-0.02-0.52-0.07l-4.55,4.56 C4.98,15.65,5,15.82,5,16c0,1.1-\" +\n                    \"0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2c0.18,0,0.35,0.02,0.51,0.07l4.56-4.\" +\n                    \"55C8.02,9.36,8,9.18,8,9 c0-1.1,0.9-2,2-2s2,0.9,2,2c0,0.18-0.02,0.\" +\n                    \"36-0.07,0.52l2.55,2.55C14.64,12.02,14.82,12,15,12c0.18,0,0.36,0.0\" +\n                    \"2,0.52,0.07 l3.55-3.56C19.02,8.35,19,8.18,19,8c0-1.1,0.9-2,2-2S23\" +\n                    \",6.9,23,8z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeChartLines.create(existing); },\n            editor: EEditorShapeChartLine,\n            deserializer: function (item, manager) { return EShapeChartLines.deserialize(item, manager); },\n            runtime: EShapeChartLineRuntime\n        });\n    };\n    return EShapeChartLines;\n}());\nexport { EShapeChartLines };\n//# sourceMappingURL=e-shape-chart-lines.js.map","import { DThemes, EShapeActionValueChangeColor, EShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType, EShapeActionValueMiscInput, EShapeActionValueMiscType, EShapeActionValueOnInputAction, EShapeDefaults, EShapeRectangleRounded } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nvar EShapeInputs = /** @class */ (function () {\n    function EShapeInputs() {\n    }\n    EShapeInputs.getTheme = function () {\n        return DThemes.get(\"EShapeInput\");\n    };\n    EShapeInputs.create = function (existing) {\n        var result = new EShapeRectangleRounded();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            result.stroke.set(true, EShapeDefaults.STROKE_COLOR, 1, 1);\n            result.fill.set(true, 0xffffff, 1);\n            result.text.set(this.getTheme().getLabel());\n            result.cursor = \"text\";\n            result.state.isFocusable = true;\n            result.interactive = true;\n        }\n        result.action.add(new EShapeActionValueMiscInput(EShapeActionValueMiscType.INPUT_TEXT, '\"ALWAYS\"', \"\", EShapeActionValueOnInputAction.EMIT_EVENT));\n        result.action.add(new EShapeActionValueChangeColor(EShapeActionValueChangeColorType.STROKE, \"inFocused\", EShapeActionValueChangeColorTarget.COLOR, EShapeDefaults.HIGHLIGHT_COLOR, 0, \"\"));\n        result.action.add(new EShapeActionValueChangeColor(EShapeActionValueChangeColorType.TEXT, \"inDisabled\", EShapeActionValueChangeColorTarget.ALPHA, 0, 0.5, \"\"));\n        return result;\n    };\n    EShapeInputs.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2\" +\n                    \"-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z\\\"/>\" +\n                    \"<path d=\\\"M5 4v3h5.5v12h3V7H19V4H5z\\\" transform=\\\"translate(7.25,8.5) scale(0.6)\\\" />\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeInputs.create(existing); }\n        });\n    };\n    return EShapeInputs;\n}());\nexport { EShapeInputs };\n//# sourceMappingURL=e-shape-inputs.js.map","var EShapeTableCell = /** @class */ (function () {\n    function EShapeTableCell(parent) {\n        this._parent = parent;\n    }\n    Object.defineProperty(EShapeTableCell.prototype, \"values\", {\n        get: function () {\n            var parent = this._parent;\n            var values = parent.data.values;\n            var columnValues = parent.column.values;\n            var result = [];\n            for (var i = 0, imax = values.length; i < imax; ++i) {\n                var value = values[i];\n                var row = [];\n                for (var j = 0, jmax = columnValues.length; j < jmax; ++j) {\n                    var columnValue = columnValues[j];\n                    var columnValueRuntime = columnValue.runtime;\n                    if (columnValueRuntime != null) {\n                        row.push(columnValueRuntime.toValue(value, j, values));\n                    }\n                }\n                result.push(row);\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return EShapeTableCell;\n}());\nexport { EShapeTableCell };\n//# sourceMappingURL=e-shape-table-cell.js.map","var EShapeTableColumnValueBody = /** @class */ (function () {\n    function EShapeTableColumnValueBody() {\n    }\n    EShapeTableColumnValueBody.prototype.isEquals = function (target) {\n        return true;\n    };\n    EShapeTableColumnValueBody.prototype.serialize = function (manager) {\n        return -1;\n    };\n    EShapeTableColumnValueBody.deserialize = function (target, manager) {\n        return new EShapeTableColumnValueBody();\n    };\n    return EShapeTableColumnValueBody;\n}());\nexport { EShapeTableColumnValueBody };\n//# sourceMappingURL=e-shape-table-column-value-body.js.map","var EShapeTableColumnValueHeader = /** @class */ (function () {\n    function EShapeTableColumnValueHeader(label) {\n        this.label = label;\n    }\n    EShapeTableColumnValueHeader.prototype.isEquals = function (target) {\n        return this.label === target.label;\n    };\n    EShapeTableColumnValueHeader.prototype.serialize = function (manager) {\n        var labelId = manager.addResource(this.label);\n        return manager.addResource(\"[\".concat(labelId, \"]\"));\n    };\n    EShapeTableColumnValueHeader.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeTableColumnValueHeader(resources[parsed[0]]);\n        }\n        return new EShapeTableColumnValueHeader(\"\");\n    };\n    return EShapeTableColumnValueHeader;\n}());\nexport { EShapeTableColumnValueHeader };\n//# sourceMappingURL=e-shape-table-column-value-header.js.map","import { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nexport var EShapeTableColumnValueType = {\n    TEXT: 0,\n    NUMBER: 1\n};\nvar EShapeTableColumnValue = /** @class */ (function () {\n    function EShapeTableColumnValue(weight, type, getter, setter, format, align, header, body) {\n        this.weight = weight;\n        this.type = type;\n        this.getter = getter;\n        this.setter = setter;\n        this.format = format;\n        this.align = align;\n        this.header = header;\n        this.body = body;\n    }\n    EShapeTableColumnValue.prototype.isEquals = function (target) {\n        return (this.weight === target.weight &&\n            this.type === target.type &&\n            this.getter === target.getter &&\n            this.setter === target.setter &&\n            this.format === target.format &&\n            this.align === target.align &&\n            this.header.isEquals(target.header) &&\n            this.body.isEquals(target.body));\n    };\n    EShapeTableColumnValue.prototype.toLabel = function () {\n        return this.header.label;\n    };\n    EShapeTableColumnValue.prototype.serialize = function (manager) {\n        var getterId = manager.addResource(this.getter);\n        var setterId = manager.addResource(this.setter);\n        var formatterId = manager.addResource(this.format);\n        var headerId = this.header.serialize(manager);\n        var bodyId = this.body.serialize(manager);\n        return manager.addResource(\"[\".concat(this.weight, \",\").concat(this.type, \",\").concat(getterId, \",\").concat(setterId, \",\") +\n            \"\".concat(formatterId, \",\").concat(this.align, \",-1,\").concat(headerId, \",\").concat(bodyId, \"]\"));\n    };\n    EShapeTableColumnValue.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeTableColumnValue(parsed[0], parsed[1], resources[parsed[2]], resources[parsed[3]], resources[parsed[4]], parsed[5], EShapeTableColumnValueHeader.deserialize(parsed[7], manager), EShapeTableColumnValueBody.deserialize(parsed[8], manager));\n        }\n        return null;\n    };\n    return EShapeTableColumnValue;\n}());\nexport { EShapeTableColumnValue };\n//# sourceMappingURL=e-shape-table-column-value.js.map","import { EShapeTableColumnValue } from \"./e-shape-table-column-value\";\nvar EShapeTableColumn = /** @class */ (function () {\n    function EShapeTableColumn(onChange) {\n        this.values = [];\n        this._sizeX = 1;\n        this._onChange = onChange;\n    }\n    EShapeTableColumn.prototype.add = function (value, at) {\n        if (at != null) {\n            this.values.splice(at, 0, value);\n        }\n        else {\n            this.values.push(value);\n        }\n        this._onChange();\n    };\n    EShapeTableColumn.prototype.remove = function (index) {\n        var values = this.values;\n        if (0 <= index && index < values.length) {\n            var result = values.splice(index, 1)[0];\n            this._onChange();\n            return result;\n        }\n        return null;\n    };\n    EShapeTableColumn.prototype.indexOf = function (target) {\n        var values = this.values;\n        // Instance-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value === target) {\n                return i;\n            }\n        }\n        // Data-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value.isEquals(target)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    EShapeTableColumn.prototype.get = function (index) {\n        var result = this.values[index];\n        if (result != null) {\n            return result;\n        }\n        return null;\n    };\n    EShapeTableColumn.prototype.set = function (index, value) {\n        this.values[index] = value;\n        this._onChange();\n    };\n    EShapeTableColumn.prototype.swap = function (indexA, indexB) {\n        var values = this.values;\n        var tmp = values[indexB];\n        values[indexB] = values[indexA];\n        values[indexA] = tmp;\n        this._onChange();\n    };\n    EShapeTableColumn.prototype.size = function () {\n        return this.values.length;\n    };\n    EShapeTableColumn.prototype.copy = function (source) {\n        // Values\n        var values = this.values;\n        var sourceValues = source.values;\n        var sourceValuesLength = sourceValues.length;\n        for (var i = 0; i < sourceValuesLength; ++i) {\n            values.push(sourceValues[i]);\n        }\n        if (values.length !== sourceValuesLength) {\n            values.length = sourceValuesLength;\n        }\n        //\n        this._sizeX = source._sizeX;\n        this._onChange();\n        return this;\n    };\n    EShapeTableColumn.prototype.serialize = function (manager) {\n        var serialized = \"\";\n        var delimiter = \"[\";\n        var values = this.values;\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            serialized += delimiter + value.serialize(manager);\n            delimiter = \",\";\n        }\n        serialized += \"]\";\n        return manager.addResource(serialized);\n    };\n    EShapeTableColumn.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var isChanged = false;\n            var values = this.values;\n            if (0 < values.length) {\n                values.length = 0;\n                isChanged = true;\n            }\n            for (var i = 0, imax = parsed.length; i < imax; ++i) {\n                var value = EShapeTableColumnValue.deserialize(parsed[i], manager);\n                if (value != null) {\n                    values.push(value);\n                }\n            }\n            if (0 < values.length) {\n                isChanged = true;\n            }\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    };\n    return EShapeTableColumn;\n}());\nexport { EShapeTableColumn };\n//# sourceMappingURL=e-shape-table-column.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nvar EShapeTableIds = /** @class */ (function () {\n    function EShapeTableIds() {\n    }\n    EShapeTableIds.ID = EShapeType.EXTENSION + 100;\n    EShapeTableIds.HEADER_ID = EShapeType.EXTENSION + 101;\n    EShapeTableIds.BODY_ID = EShapeType.EXTENSION + 102;\n    return EShapeTableIds;\n}());\nexport { EShapeTableIds };\n//# sourceMappingURL=e-shape-table-ids.js.map","import { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nexport var EShapeTableRowSelectionType = {\n    NONE: 0,\n    SINGLE: 1,\n    MULTIPLE: 2\n};\nvar EShapeTableRowSelection = /** @class */ (function () {\n    function EShapeTableRowSelection(parent) {\n        this.parent = parent;\n        this.type = EShapeTableRowSelectionType.NONE;\n        this.indices = [];\n        this.body = null;\n    }\n    Object.defineProperty(EShapeTableRowSelection.prototype, \"values\", {\n        get: function () {\n            var indices = this.indices;\n            var values = this.parent.data.values;\n            var result = (this._values = this._values || []);\n            if (values != null) {\n                result.length = 0;\n                for (var i = 0, imax = indices.length; i < imax; ++i) {\n                    var index = indices[i];\n                    if (0 <= index && index < values.length) {\n                        result.push(values[index]);\n                    }\n                }\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeTableRowSelection.prototype.size = function () {\n        return this.indices.length;\n    };\n    EShapeTableRowSelection.prototype.isEmpty = function () {\n        return this.indices.length <= 0;\n    };\n    EShapeTableRowSelection.prototype.toggle = function (index) {\n        var indices = this.indices;\n        var indexIndex = indices.indexOf(index);\n        if (indexIndex < 0) {\n            indices.push(index);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, true);\n            }\n        }\n        else {\n            indices.splice(indexIndex, 1);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, false);\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.add = function (index) {\n        var indices = this.indices;\n        var indexIndex = indices.indexOf(index);\n        if (indexIndex < 0) {\n            indices.push(index);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, true);\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.addTo = function (index) {\n        var indices = this.indices;\n        var lastIndex = indices[indices.length - 1];\n        if (lastIndex < index) {\n            var body = this.getBody();\n            for (var i = lastIndex + 1; i <= index; ++i) {\n                if (indices.indexOf(i) < 0) {\n                    indices.push(i);\n                    if (body != null) {\n                        this.setRowActive(body, i, true);\n                    }\n                }\n            }\n        }\n        else if (index < lastIndex) {\n            var body = this.getBody();\n            for (var i = lastIndex - 1; index <= i; --i) {\n                if (indices.indexOf(i) < 0) {\n                    indices.push(i);\n                    if (body != null) {\n                        this.setRowActive(body, i, true);\n                    }\n                }\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.remove = function (index) {\n        var indices = this.indices;\n        var indexIndex = indices.indexOf(index);\n        if (0 <= indexIndex) {\n            indices.splice(indexIndex, 1);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, false);\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.clear = function () {\n        var indices = this.indices;\n        var body = this.getBody();\n        if (body != null) {\n            for (var i = 0, imax = indices.length; i < imax; ++i) {\n                this.setRowActive(body, indices[i], false);\n            }\n        }\n        indices.length = 0;\n    };\n    EShapeTableRowSelection.prototype.clearAndAdd = function (index) {\n        var indices = this.indices;\n        var body = this.getBody();\n        if (body != null) {\n            for (var i = 0, imax = indices.length; i < imax; ++i) {\n                var target = indices[i];\n                if (target !== index) {\n                    this.setRowActive(body, target, false);\n                }\n            }\n            this.setRowActive(body, index, true);\n        }\n        indices.length = 0;\n        indices.push(index);\n    };\n    EShapeTableRowSelection.prototype.getBody = function () {\n        var body = this.body;\n        if (body != null) {\n            return body;\n        }\n        return (this.body = UtilShapeSearch.findChildByType(this.parent, EShapeTableIds.BODY_ID));\n    };\n    EShapeTableRowSelection.prototype.getRow = function (body, index) {\n        var rows = body.children;\n        if (0 <= index && index < rows.length) {\n            return rows[index];\n        }\n        return null;\n    };\n    EShapeTableRowSelection.prototype.setRowActive = function (body, index, isActive) {\n        var row = this.getRow(body, index);\n        if (row != null) {\n            var cells = row.children;\n            for (var i = 0, imax = cells.length; i < imax; ++i) {\n                cells[i].state.isActive = isActive;\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.type, \"]\"));\n    };\n    EShapeTableRowSelection.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var type = parsed[0];\n            if (this.type !== type) {\n                this.type = type;\n            }\n        }\n    };\n    return EShapeTableRowSelection;\n}());\nexport { EShapeTableRowSelection };\n//# sourceMappingURL=e-shape-table-row-selection.js.map","import { EShapeTableRowSelection } from \"./e-shape-table-row-selection\";\nvar EShapeTableRow = /** @class */ (function () {\n    function EShapeTableRow(parent, onChange) {\n        this._height = 40;\n        this._onChange = onChange;\n        this._isCellUpdateAllowed = true;\n        this._isCellUpdateCalled = false;\n        this.selection = new EShapeTableRowSelection(parent);\n    }\n    EShapeTableRow.prototype.toDirty = function () {\n        this.updateCells();\n    };\n    EShapeTableRow.prototype.disallowCellUpdate = function () {\n        this._isCellUpdateAllowed = false;\n        this._isCellUpdateCalled = false;\n    };\n    EShapeTableRow.prototype.allowCellUpdate = function (invoke) {\n        this._isCellUpdateAllowed = true;\n        var isCellUpdatedCalled = this._isCellUpdateCalled;\n        if (invoke && isCellUpdatedCalled) {\n            this.updateCells();\n        }\n    };\n    EShapeTableRow.prototype.updateCells = function () {\n        if (this._isCellUpdateAllowed) {\n            this._onChange();\n        }\n        else {\n            this._isCellUpdateCalled = true;\n        }\n    };\n    Object.defineProperty(EShapeTableRow.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (height) {\n            height = Math.max(5, height);\n            if (this._height !== height) {\n                this._height = height;\n                this.updateCells();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeTableRow.prototype.copy = function (source) {\n        this.disallowCellUpdate();\n        this._height = source._height;\n        this.allowCellUpdate(false);\n        this.updateCells();\n        return this;\n    };\n    EShapeTableRow.prototype.serialize = function (manager) {\n        var selectionId = this.selection.serialize(manager);\n        return manager.addResource(\"[\".concat(this._height, \",\").concat(selectionId, \"]\"));\n    };\n    EShapeTableRow.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var isChanged = false;\n            var height = parsed[0];\n            if (this._height !== height) {\n                this._height = height;\n                isChanged = true;\n            }\n            this.selection.deserialize(parsed[1], manager);\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    };\n    return EShapeTableRow;\n}());\nexport { EShapeTableRow };\n//# sourceMappingURL=e-shape-table-row.js.map","import { __extends } from \"tslib\";\nimport { EShapeCopyPart, EShapeGroupShadowed, EShapeLockPart, EShapeRectangle } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableCell } from \"./e-shape-table-cell\";\nimport { EShapeTableColumn } from \"./e-shape-table-column\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { EShapeTableRow } from \"./e-shape-table-row\";\nvar EShapeTable = /** @class */ (function (_super) {\n    __extends(EShapeTable, _super);\n    function EShapeTable(mode, type) {\n        if (type === void 0) { type = EShapeTableIds.ID; }\n        var _this = _super.call(this, mode, type) || this;\n        _this._columnWidths = [];\n        _this._columnXs = [];\n        _this.column = new EShapeTableColumn(function () {\n            _this.onColumnChange();\n        });\n        _this.row = new EShapeTableRow(_this, function () {\n            _this.onRowChange();\n        });\n        _this.cell = new EShapeTableCell(_this);\n        return _this;\n    }\n    EShapeTable.prototype.onColumnChange = function () {\n        this.newCellsHeader();\n        this.newCellsBody(true);\n        this.layoutCells();\n    };\n    EShapeTable.prototype.onRowChange = function () {\n        this.newCellsBody(false);\n        this.layoutCells();\n    };\n    EShapeTable.prototype.onSizeChange = function () {\n        _super.prototype.onSizeChange.call(this);\n        this.newCellsBody(false);\n        this.layoutCells();\n    };\n    EShapeTable.prototype.newCellsHeader = function () {\n        if (this.children.length <= 0) {\n            return;\n        }\n        var header = this.children[0];\n        var column = this.column;\n        var columnCount = column.size();\n        var values = column.values;\n        // Create / delete children\n        var children = header.children;\n        var childrenLength = children.length;\n        if (childrenLength < columnCount) {\n            var master = children[childrenLength - 1] || this;\n            for (var i = childrenLength; i < columnCount; ++i) {\n                var cell = new EShapeRectangle().copy(master);\n                cell.text.value = values[i].header.label;\n                cell.attach(header);\n            }\n        }\n        else if (columnCount < childrenLength) {\n            for (var i = childrenLength - 1; columnCount <= i; --i) {\n                children[i].detach();\n            }\n        }\n        // Update text\n        for (var i = 0; i < columnCount; ++i) {\n            children[i].text.value = values[i].header.label;\n        }\n    };\n    EShapeTable.prototype.toRowCountRequired = function () {\n        return Math.min(1000, Math.max(1, Math.floor(Math.abs(this.size.y) / this.row.height))) - 1;\n    };\n    EShapeTable.prototype.newCellsBody = function (isColumnDirty) {\n        // Rows\n        if (this.children.length <= 1) {\n            return;\n        }\n        var body = this.children[1];\n        var rows = body.children;\n        var rowsLength = rows.length;\n        var rowCountRequired = this.toRowCountRequired();\n        var rowCount = Math.max(2, rowCountRequired);\n        if (rowsLength < rowCount) {\n            var masterEven = (0 < rowsLength ? rows[0] : null) || this;\n            var masterOdd = (1 < rowsLength ? rows[1] : null) || this;\n            var mode = this.mode;\n            for (var irow = rowsLength; irow < rowCount; ++irow) {\n                var master = irow % 2 === 0 ? masterEven : masterOdd;\n                new EShapeGroupShadowed(mode).copy(master, EShapeCopyPart.ACTION).attach(body);\n            }\n        }\n        else if (rowCount < rowsLength) {\n            for (var i = rowsLength - 1; rowCount <= i; --i) {\n                rows[i].detach();\n            }\n        }\n        if (0 < rows.length) {\n            rows[0].visible = 0 < rowCountRequired;\n        }\n        if (1 < rows.length) {\n            rows[1].visible = 1 < rowCountRequired;\n        }\n        // Cells\n        var masterCellEven = (0 < rows.length ? rows[0].children[0] : null) || this;\n        var masterCellOdd = (1 < rows.length ? rows[1].children[0] : null) || this;\n        var column = this.column;\n        var columnValues = column.values;\n        var columnCount = column.size();\n        for (var irow = 0; irow < rowCount; ++irow) {\n            var columnCountRequired = irow <= 1 ? Math.max(1, columnCount) : columnCount;\n            var row = rows[irow];\n            var cells = row.children;\n            var cellsLength = cells.length;\n            var master = irow % 2 === 0 ? masterCellEven : masterCellOdd;\n            if (cellsLength < columnCountRequired) {\n                for (var icolumn = cellsLength; icolumn < columnCountRequired; ++icolumn) {\n                    new EShapeRectangle().copy(master).attach(row);\n                }\n            }\n            else if (columnCountRequired < cellsLength) {\n                for (var i = cellsLength - 1; columnCountRequired <= i; --i) {\n                    cells[i].detach();\n                }\n            }\n            if (0 < cells.length) {\n                cells[0].visible = 0 < columnCount;\n            }\n            if (1 < cells.length) {\n                cells[1].visible = 1 < columnCount;\n            }\n            if (isColumnDirty) {\n                for (var i = 0; i < columnCount; ++i) {\n                    cells[i].text.align.horizontal = columnValues[i].align;\n                }\n            }\n        }\n    };\n    EShapeTable.prototype.layoutCells = function () {\n        if (this.children.length <= 1) {\n            return;\n        }\n        var rowHeight = this.row.height;\n        var rowHeightHalf = rowHeight * 0.5;\n        var column = this.column;\n        var size = this.size;\n        var sizeX = size.x;\n        var sizeY = size.y;\n        var sxh = -sizeX * 0.5;\n        var syh = -sizeY * 0.5;\n        var columnValues = column.values;\n        var columnValuesLength = columnValues.length;\n        // Total weight\n        var totalWeight = 0;\n        for (var i = 0; i < columnValuesLength; ++i) {\n            totalWeight += columnValues[i].weight;\n        }\n        totalWeight = Math.max(0.00001, totalWeight);\n        // Column width and x position\n        var columnWidths = this._columnWidths;\n        var columnXs = this._columnXs;\n        var columnWidthFactor = sizeX / totalWeight;\n        var columnX = 0;\n        for (var i = 0; i < columnValuesLength; ++i) {\n            var columnWidth = columnValues[i].weight * columnWidthFactor;\n            columnWidths[i] = columnWidth;\n            columnXs[i] = columnX + columnWidth * 0.5;\n            columnX += columnWidth;\n        }\n        // Header\n        var header = this.children[0];\n        header.lock(EShapeLockPart.ALL);\n        header.size.set(sizeX, rowHeight);\n        header.transform.position.set(0, syh + rowHeightHalf);\n        header.unlock(EShapeLockPart.ALL, true);\n        var hcells = header.children;\n        var hcellsLength = hcells.length;\n        for (var icolumn = 0; icolumn < hcellsLength; ++icolumn) {\n            var hcell = hcells[icolumn];\n            hcell.lock(EShapeLockPart.ALL);\n            hcell.size.set(columnWidths[icolumn], rowHeight);\n            hcell.transform.position.set(sxh + columnXs[icolumn], 0);\n            hcell.unlock(EShapeLockPart.ALL, true);\n        }\n        // Body\n        var body = this.children[1];\n        body.lock(EShapeLockPart.ALL);\n        body.size.set(sizeX, sizeY - rowHeight);\n        body.transform.position.set(0, rowHeightHalf);\n        body.unlock(EShapeLockPart.ALL, true);\n        var rows = body.children;\n        var rowsLength = rows.length;\n        for (var irow = 0, y = syh + rowHeight; irow < rowsLength; ++irow, y += rowHeight) {\n            var row = rows[irow];\n            row.lock(EShapeLockPart.ALL);\n            row.size.set(sizeX, rowHeight);\n            row.transform.position.set(0, y);\n            row.unlock(EShapeLockPart.ALL, true);\n            var cells = row.children;\n            var cellsLength = cells.length;\n            for (var icolumn = 0; icolumn < cellsLength; ++icolumn) {\n                var cell = cells[icolumn];\n                cell.lock(EShapeLockPart.ALL);\n                cell.size.set(columnWidths[icolumn], rowHeight);\n                cell.transform.position.set(sxh + columnXs[icolumn], 0);\n                cell.unlock(EShapeLockPart.ALL, true);\n            }\n        }\n    };\n    EShapeTable.prototype.copy = function (source, part) {\n        if (part === void 0) { part = EShapeCopyPart.ALL; }\n        var result = _super.prototype.copy.call(this, source, part);\n        if (source instanceof EShapeTable) {\n            this.column.copy(source.column);\n            this.row.copy(source.row);\n        }\n        return result;\n    };\n    EShapeTable.prototype.serialize = function (manager) {\n        var result = _super.prototype.serialize.call(this, manager);\n        var resource = result[15];\n        result[15] = manager.addResource(\"[\".concat(this.column.serialize(manager), \",\").concat(this.row.serialize(manager), \",\").concat(resource, \"]\"));\n        return result;\n    };\n    return EShapeTable;\n}(EShapeGroupShadowed));\nexport { EShapeTable };\n//# sourceMappingURL=e-shape-table.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueAdd, _super);\n    function ECommandShapeTableColumnValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    ECommandShapeTableColumnValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeTableColumnValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                shape.column.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                shape.column.remove(shape.column.size() - 1);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeTableColumnValueAdd;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueAdd };\n//# sourceMappingURL=e-command-shape-table-column-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueBringForward, _super);\n    function ECommandShapeTableColumnValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = shape.column.indexOf(target);\n                indices.push(index);\n                if (0 < index) {\n                    shape.column.swap(index - 1, index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 < index) {\n                    shape.column.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableColumnValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueBringForward };\n//# sourceMappingURL=e-command-shape-table-column-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueRemove, _super);\n    function ECommandShapeTableColumnValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = shape.column.indexOf(target);\n                indices.push(index);\n                if (0 <= index) {\n                    shape.column.remove(index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeTableColumnValueRemove;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueRemove };\n//# sourceMappingURL=e-command-shape-table-column-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueReplace, _super);\n    function ECommandShapeTableColumnValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = shape.column.indexOf(oldValue);\n                indices.push(index);\n                if (0 <= index) {\n                    oldValues.push(shape.column.get(index));\n                    shape.column.set(index, newValue);\n                }\n                else {\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.set(index, newValue);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.set(index, oldValues[i]);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeTableColumnValueReplace;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueReplace };\n//# sourceMappingURL=e-command-shape-table-column-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueSendBackward, _super);\n    function ECommandShapeTableColumnValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var column = shape.column;\n                var index = column.indexOf(target);\n                indices.push(index);\n                if (0 <= index && index < column.size() - 1) {\n                    column.swap(index + 1, index);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var column = shape.column;\n                var index = indices[i];\n                if (0 <= index && index < column.size() - 1) {\n                    column.swap(index + 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableColumnValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueSendBackward };\n//# sourceMappingURL=e-command-shape-table-column-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableRowHeight = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableRowHeight, _super);\n    function ECommandShapeTableRowHeight(value, selection) {\n        var _this = _super.call(this) || this;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                values.push(shape.row.height);\n                shape.row.height = value;\n            }\n            else {\n                values.push(35);\n            }\n        }\n        _this._values = values;\n        _this._selection = selection;\n        return _this;\n    }\n    ECommandShapeTableRowHeight.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableRowHeight.prototype.redo = function () {\n        var selection = this._selection;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var value = values[i];\n                values[i] = shape.row.height;\n                shape.row.height = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableRowHeight.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableRowHeight;\n}(DCommandBase));\nexport { ECommandShapeTableRowHeight };\n//# sourceMappingURL=e-command-shape-table-row-height.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nvar ECommandShapeTableRowSelectionType = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableRowSelectionType, _super);\n    function ECommandShapeTableRowSelectionType(value, selection) {\n        var _this = _super.call(this) || this;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                values.push(shape.row.selection.type);\n                shape.row.selection.type = value;\n            }\n            else {\n                values.push(EShapeTableRowSelectionType.NONE);\n            }\n        }\n        _this._values = values;\n        _this._selection = selection;\n        return _this;\n    }\n    ECommandShapeTableRowSelectionType.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableRowSelectionType.prototype.redo = function () {\n        var selection = this._selection;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var value = values[i];\n                values[i] = shape.row.selection.type;\n                shape.row.selection.type = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableRowSelectionType.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableRowSelectionType;\n}(DCommandBase));\nexport { ECommandShapeTableRowSelectionType };\n//# sourceMappingURL=e-command-shape-table-row-selection-type.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputLabel, DInputReal, DInputText, DLayoutHorizontal, DLayoutSpace, DSelect, EShapeTextAlignHorizontal } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableColumnValue, EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nimport { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nvar EDialogTableColumn = /** @class */ (function (_super) {\n    __extends(EDialogTableColumn, _super);\n    function EDialogTableColumn() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogTableColumn.prototype.newContentChildren = function (theme, options) {\n        var _this = this;\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        // Type\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectColumnValueTypeLabel()\n                    }\n                }),\n                new DSelect({\n                    weight: 1,\n                    value: EShapeTableColumnValueType.TEXT,\n                    menu: {\n                        items: [\n                            {\n                                value: EShapeTableColumnValueType.TEXT,\n                                text: {\n                                    value: theme.toSelectColumnValueTypeLabel(EShapeTableColumnValueType.TEXT)\n                                }\n                            },\n                            {\n                                value: EShapeTableColumnValueType.NUMBER,\n                                text: {\n                                    value: theme.toSelectColumnValueTypeLabel(EShapeTableColumnValueType.NUMBER)\n                                }\n                            }\n                        ]\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._selectType = self;\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Label\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputLabelLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputLabel = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Width Weight\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputWidthLabel()\n                    }\n                }),\n                new DInputReal({\n                    weight: 1,\n                    text: {\n                        value: 0\n                    },\n                    min: 0,\n                    on: {\n                        init: function (self) {\n                            _this._inputWidth = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Getter / setter\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputGetterLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputGetter = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputSetterLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputSetter = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Format\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputFormatLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputFormat = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Align\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectTextAlignLabel()\n                    }\n                }),\n                new DSelect({\n                    weight: 1,\n                    value: EShapeTextAlignHorizontal.CENTER,\n                    menu: {\n                        items: [\n                            {\n                                value: EShapeTextAlignHorizontal.LEFT,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.LEFT)\n                                }\n                            },\n                            {\n                                value: EShapeTextAlignHorizontal.CENTER,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.CENTER)\n                                }\n                            },\n                            {\n                                value: EShapeTextAlignHorizontal.RIGHT,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.RIGHT)\n                                }\n                            }\n                        ]\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._selectAlign = self;\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        return result;\n    };\n    EDialogTableColumn.prototype.reset = function () {\n        this._selectType.value = EShapeTableColumnValueType.TEXT;\n        this._inputLabel.value = this.theme.newInputLabel();\n        this._inputWidth.value = 1;\n        this._inputGetter.value = \"\";\n        this._inputSetter.value = \"\";\n        this._inputFormat.value = \"\";\n        this._selectAlign.value = EShapeTextAlignHorizontal.CENTER;\n        return this;\n    };\n    Object.defineProperty(EDialogTableColumn.prototype, \"value\", {\n        get: function () {\n            return new EShapeTableColumnValue(this._inputWidth.value, this._selectType.value || EShapeTableColumnValueType.TEXT, this._inputGetter.value, this._inputSetter.value, this._inputFormat.value, this._selectAlign.value || EShapeTextAlignHorizontal.LEFT, new EShapeTableColumnValueHeader(this._inputLabel.value), new EShapeTableColumnValueBody());\n        },\n        set: function (value) {\n            if (value != null) {\n                this._selectType.value = value.type;\n                this._inputLabel.value = value.header.label;\n                this._inputWidth.value = value.weight;\n                this._inputGetter.value = value.getter;\n                this._inputSetter.value = value.setter;\n                this._inputFormat.value = value.format;\n                this._selectAlign.value = value.align;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogTableColumn.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogTableColumn.prototype.getType = function () {\n        return \"EDialogShapeTableColumn\";\n    };\n    return EDialogTableColumn;\n}(DDialogLayered));\nexport { EDialogTableColumn };\n//# sourceMappingURL=e-dialog-shape-table-column.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DInputReal, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DPane, DSelect, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeTableColumnValueAdd } from \"./e-command-shape-table-column-value-add\";\nimport { ECommandShapeTableColumnValueBringForward } from \"./e-command-shape-table-column-value-bring-forward\";\nimport { ECommandShapeTableColumnValueRemove } from \"./e-command-shape-table-column-value-remove\";\nimport { ECommandShapeTableColumnValueReplace } from \"./e-command-shape-table-column-value-replace\";\nimport { ECommandShapeTableColumnValueSendBackward } from \"./e-command-shape-table-column-value-send-backward\";\nimport { ECommandShapeTableRowHeight } from \"./e-command-shape-table-row-height\";\nimport { ECommandShapeTableRowSelectionType } from \"./e-command-shape-table-row-selection-type\";\nimport { EDialogTableColumn } from \"./e-dialog-shape-table-column\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nvar EEditorShapeTable = /** @class */ (function (_super) {\n    __extends(EEditorShapeTable, _super);\n    function EEditorShapeTable(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n        });\n        _this.content.setHeight(\"padding\");\n        new DLayoutVertical({\n            parent: _this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        _this.newTextLabel(),\n                        _this.buttonNew,\n                        _this.buttonDelete,\n                        _this.buttonBringForward,\n                        _this.buttonSendBackward\n                    ]\n                }),\n                _this.columnList,\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: _this.subtheme.getInputRowHeightLabel()\n                    }\n                }),\n                _this.inputRowHeight,\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: _this.subtheme.getSelectRowSelectionTypeLabel()\n                    }\n                }),\n                _this.selectRowSelectionType\n            ]\n        });\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var columnList = _this.columnList;\n        columnList.data.selection.on(\"change\", function () {\n            _this.onListSelectionChange(columnList);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorShapeTable.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonNew\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.subtheme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.columnDialog\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandShapeTableColumnValueAdd(value, _this._selection));\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onSelectionChangeButtonNew = function (selection) {\n        var buttonNew = this.buttonNew;\n        if (selection.last() instanceof EShapeTable) {\n            buttonNew.state.isDisabled = false;\n        }\n        else {\n            buttonNew.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.subtheme.getButtonDeleteTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.data.selection.first;\n                    if (first != null && 1 < columnList.data.size()) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueRemove(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onListSelectionChangeButtonDelete = function (columnList) {\n        this.buttonDelete.state.isDisabled =\n            columnList.data.size() <= 1 || columnList.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.subtheme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    if (first != null && columnList.data.items[0] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueBringForward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onListSelectionChangeButtonBringForward = function (columnList) {\n        var first = columnList.data.selection.first;\n        var items = columnList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.subtheme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    var items = columnList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueSendBackward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onListSelectionChangeButtonSendBackward = function (columnList) {\n        var first = columnList.selection.first;\n        var items = columnList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"columnDialog\", {\n        get: function () {\n            var _a;\n            return ((_a = this._columnDialog) !== null && _a !== void 0 ? _a : (this._columnDialog = this.newColumnDialog()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newColumnDialog = function () {\n        return new EDialogTableColumn();\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"columnList\", {\n        get: function () {\n            var _a;\n            return ((_a = this._columnList) !== null && _a !== void 0 ? _a : (this._columnList = this.newColumnList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newColumnList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"100%\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return value.toLabel();\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onColumnListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorShapeTable.prototype.onColumnListDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var columnDialog_1 = this.columnDialog;\n            columnDialog_1.value = oldValue;\n            columnDialog_1.open(item).then(function () {\n                var newValue = columnDialog_1.value;\n                if (newValue != null) {\n                    DControllers.getCommandController().push(new ECommandShapeTableColumnValueReplace(oldValue, newValue, _this._selection, list));\n                }\n            });\n        }\n    };\n    EEditorShapeTable.prototype.onSelectionChangeColumnList = function (selection) {\n        var last = selection.last();\n        var columnList = this.columnList;\n        columnList.data.items = last instanceof EShapeTable ? last.column.values : [];\n        this.onListSelectionChange(columnList);\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"inputRowHeight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputRowHeight) !== null && _a !== void 0 ? _a : (this._inputRowHeight = this.newInputRowHeight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newInputRowHeight = function () {\n        var _this = this;\n        return new DInputReal({\n            width: \"100%\",\n            min: 5,\n            step: 1,\n            on: {\n                change: function (value) {\n                    DControllers.getCommandController().push(new ECommandShapeTableRowHeight(value, _this._selection));\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onSelectionChangeInputRowHeight = function (selection) {\n        var last = selection.last();\n        var input = this.inputRowHeight;\n        if (last instanceof EShapeTable) {\n            input.value = last.row.height;\n            input.state.isDisabled = false;\n        }\n        else {\n            input.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"selectRowSelectionType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectRowSelectionType) !== null && _a !== void 0 ? _a : (this._selectRowSelectionType = this.newSelectRowSelectionType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newSelectRowSelectionType = function () {\n        var _this = this;\n        var subtheme = this.subtheme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapeTableRowSelectionType.SINGLE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeTableRowSelectionType.NONE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeTableRowSelectionType.SINGLE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.SINGLE)\n                        }\n                    },\n                    {\n                        value: EShapeTableRowSelectionType.MULTIPLE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.MULTIPLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    if (value == null) {\n                        value = EShapeTableRowSelectionType.SINGLE;\n                    }\n                    DControllers.getCommandController().push(new ECommandShapeTableRowSelectionType(value, _this._selection));\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onSelectionChangeSelectRowSelectionType = function (selection) {\n        var last = selection.last();\n        var select = this.selectRowSelectionType;\n        if (last instanceof EShapeTable) {\n            select.value = last.row.selection.type;\n            select.state.isDisabled = false;\n        }\n        else {\n            select.state.isDisabled = true;\n        }\n    };\n    EEditorShapeTable.prototype.onSelectionChange = function (selection) {\n        this.onSelectionChangeButtonNew(selection);\n        this.onSelectionChangeColumnList(selection);\n        this.onSelectionChangeInputRowHeight(selection);\n        this.onSelectionChangeSelectRowSelectionType(selection);\n    };\n    EEditorShapeTable.prototype.onListSelectionChange = function (columnList) {\n        this.onListSelectionChangeButtonDelete(columnList);\n        this.onListSelectionChangeButtonBringForward(columnList);\n        this.onListSelectionChangeButtonSendBackward(columnList);\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeTable\");\n    };\n    return EEditorShapeTable;\n}(DPane));\nexport { EEditorShapeTable };\n//# sourceMappingURL=e-editor-shape-table.js.map","import { __extends } from \"tslib\";\nimport { EShapeActionRuntimeBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nvar EShapeTableActionRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableActionRuntime, _super);\n    function EShapeTableActionRuntime(table) {\n        var _this = _super.call(this) || this;\n        _this.body = UtilShapeSearch.findChildByType(table, EShapeTableIds.BODY_ID);\n        _this.column = table.column;\n        return _this;\n    }\n    EShapeTableActionRuntime.prototype.execute = function (shape, runtime, time) {\n        var body = this.body;\n        var column = this.column;\n        if (body != null && column != null) {\n            var data = shape.data;\n            if (data.isChanged) {\n                var rows = body.children;\n                var rowsLength = rows.length;\n                var first = data.get(0);\n                if (first != null) {\n                    var columnValues = column.values;\n                    var values = first.values;\n                    var valuesLength = values.length;\n                    var imin = Math.min(rowsLength, valuesLength);\n                    for (var i = 0; i < imin; ++i) {\n                        var value = values[i];\n                        var row = rows[i];\n                        var cells = row.children;\n                        var cellsLength = cells.length;\n                        var jmin = Math.min(cellsLength, columnValues.length);\n                        for (var j = 0; j < jmin; ++j) {\n                            var cell = cells[j];\n                            var columnValue = columnValues[j];\n                            var columnRuntime = columnValue.runtime;\n                            if (columnRuntime != null) {\n                                cell.state.isFocusable = true;\n                                cell.text.value = columnRuntime.formatter(columnRuntime.toValue(value, j, values), j);\n                            }\n                        }\n                        for (var j = jmin; j < cellsLength; ++j) {\n                            var cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                    for (var i = imin; i < rowsLength; ++i) {\n                        var row = rows[i];\n                        var cells = row.children;\n                        var cellsLength = cells.length;\n                        for (var j = 0; j < cellsLength; ++j) {\n                            var cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                }\n                else {\n                    for (var i = 0; i < rowsLength; ++i) {\n                        var row = rows[i];\n                        var cells = row.children;\n                        var cellsLength = cells.length;\n                        for (var j = 0; j < cellsLength; ++j) {\n                            var cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                }\n            }\n        }\n    };\n    return EShapeTableActionRuntime;\n}(EShapeActionRuntimeBase));\nexport { EShapeTableActionRuntime };\n//# sourceMappingURL=e-shape-table-action-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeActionValueChangeColorCode, EShapeActionValueChangeColorType, EShapeDefaults, UtilRgb } from \"@wcardinal/wcardinal-ui\";\nvar EShapeTableCellActionValueChangeColor = /** @class */ (function (_super) {\n    __extends(EShapeTableCellActionValueChangeColor, _super);\n    function EShapeTableCellActionValueChangeColor() {\n        return _super.call(this, EShapeActionValueChangeColorType.FILL, \"\", EShapeTableCellActionValueChangeColor.getColorCode(), \"\", \"\") || this;\n    }\n    EShapeTableCellActionValueChangeColor.getColorCode = function () {\n        var activeHoverColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.8);\n        var activeColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.75);\n        var hoverColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.85);\n        var disabledColor = UtilRgb.darken(EShapeDefaults.FILL_COLOR, 0.25);\n        return (\"inDisabled ? \".concat(disabledColor, \" : ( isActive ?\") +\n            \"\\t( isHovered ? \".concat(activeHoverColor, \" : \").concat(activeColor, \" ) :\") +\n            \"\\t( isHovered ? \".concat(hoverColor, \" : null )\") +\n            \")\");\n    };\n    return EShapeTableCellActionValueChangeColor;\n}(EShapeActionValueChangeColorCode));\nexport { EShapeTableCellActionValueChangeColor };\n//# sourceMappingURL=e-shape-table-cell-action-value-change-color.js.map","import { __extends } from \"tslib\";\nimport { DApplications, EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableCellActionValueChangeColor } from \"./e-shape-table-cell-action-value-change-color\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nvar EShapeTableBodyRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableBodyRuntime, _super);\n    function EShapeTableBodyRuntime(shape) {\n        var _this = _super.call(this, shape) || this;\n        _this.lastRowIndex = -1;\n        _this.lastColumnIndex = -1;\n        _this.init(shape);\n        return _this;\n    }\n    EShapeTableBodyRuntime.prototype.init = function (shape) {\n        var parent = shape.parent;\n        if (parent instanceof EShapeTable) {\n            this.selection = parent.row.selection;\n            var rows = shape.children;\n            for (var i = 0, imax = rows.length; i < imax; ++i) {\n                var row = rows[i];\n                var cells = row.children;\n                for (var j = 0, jmax = cells.length; j < jmax; ++j) {\n                    cells[j].action.add(new EShapeTableCellActionValueChangeColor());\n                }\n            }\n        }\n    };\n    EShapeTableBodyRuntime.prototype.onClick = function (shape, e) {\n        _super.prototype.onClick.call(this, shape, e);\n        // Update the selection\n        var selection = this.selection;\n        if (e != null && selection != null && selection.type !== EShapeTableRowSelectionType.NONE) {\n            var lastRowIndex = this.lastRowIndex;\n            if (0 <= lastRowIndex) {\n                var indices = selection.indices;\n                var isSingle = selection.type === EShapeTableRowSelectionType.SINGLE;\n                var isNotSingle = !isSingle;\n                var originalEvent = \"data\" in e ? e.data.originalEvent : e;\n                var ctrlKey = originalEvent.ctrlKey;\n                var shiftKey = originalEvent.shiftKey;\n                if (isSingle || indices.length <= 0 || !(isNotSingle && (ctrlKey || shiftKey))) {\n                    selection.clearAndAdd(lastRowIndex);\n                }\n                else if (ctrlKey) {\n                    selection.toggle(lastRowIndex);\n                }\n                else if (shiftKey) {\n                    selection.addTo(lastRowIndex);\n                }\n            }\n        }\n    };\n    EShapeTableBodyRuntime.prototype.onDblClick = function (shape, e, interactionManager) {\n        var result = _super.prototype.onDblClick.call(this, shape, e, interactionManager);\n        // Focus on clicked cell\n        var cell = this.getCell(shape, this.lastRowIndex, this.lastColumnIndex);\n        if (cell != null) {\n            cell.focus();\n        }\n        return result;\n    };\n    EShapeTableBodyRuntime.prototype.onOut = function (shape, e) {\n        _super.prototype.onOut.call(this, shape, e);\n        // Clear highlight\n        var lastRowIndex = this.lastRowIndex;\n        if (0 <= lastRowIndex) {\n            this.setRowHovered(shape, lastRowIndex, false);\n            this.lastRowIndex = -1;\n        }\n    };\n    EShapeTableBodyRuntime.prototype.onCellTouched = function (shape, rowIndex, columnIndex) {\n        var isChanged = false;\n        var lastRowTouched = this.lastRowIndex;\n        if (lastRowTouched !== rowIndex) {\n            this.setRowHovered(shape, lastRowTouched, false);\n            this.setRowHovered(shape, rowIndex, true);\n            this.lastRowIndex = rowIndex;\n            isChanged = true;\n        }\n        var lastColumnIndex = this.lastColumnIndex;\n        if (lastColumnIndex !== columnIndex) {\n            this.lastColumnIndex = columnIndex;\n            isChanged = true;\n        }\n        if (isChanged) {\n            var cell = this.getCell(shape, rowIndex, columnIndex);\n            shape.title = (cell && cell.text.value) || \"\";\n            var layer = DApplications.getLayer(shape);\n            if (layer) {\n                layer.view.title = shape.title;\n            }\n        }\n    };\n    EShapeTableBodyRuntime.prototype.getRow = function (shape, index) {\n        var rows = shape.children;\n        if (0 <= index && index < rows.length) {\n            return rows[index];\n        }\n        return null;\n    };\n    EShapeTableBodyRuntime.prototype.getCell = function (shape, rowIndex, columnIndex) {\n        var row = this.getRow(shape, rowIndex);\n        if (row != null) {\n            var cells = row.children;\n            if (0 <= columnIndex && columnIndex < cells.length) {\n                return cells[columnIndex];\n            }\n        }\n        return null;\n    };\n    EShapeTableBodyRuntime.prototype.setRowHovered = function (shape, index, isHovered) {\n        var row = this.getRow(shape, index);\n        if (row != null) {\n            var cells = row.children;\n            for (var i = 0, imax = cells.length; i < imax; ++i) {\n                cells[i].state.isHovered = isHovered;\n            }\n        }\n    };\n    EShapeTableBodyRuntime.WORK_POINT = new Point();\n    return EShapeTableBodyRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeTableBodyRuntime };\n//# sourceMappingURL=e-shape-table-body-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeGroupShadowed } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableBodyRuntime } from \"./e-shape-table-body-runtime\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nvar EShapeTableBody = /** @class */ (function (_super) {\n    __extends(EShapeTableBody, _super);\n    function EShapeTableBody(mode, type) {\n        if (type === void 0) { type = EShapeTableIds.BODY_ID; }\n        return _super.call(this, mode, type) || this;\n    }\n    EShapeTableBody.prototype.containsAbs = function (x, y, ax, ay) {\n        if (this.containsAbsBBox(x, y, ax, ay)) {\n            var children = this.children;\n            if (0 < children.length) {\n                var first = children[0];\n                var rowIndex = ((ay + y) / first.size.y) | 0;\n                if (rowIndex < children.length) {\n                    var cells = first.children;\n                    for (var i = 0, imax = cells.length; i < imax; ++i) {\n                        var cell = cells[i];\n                        var cx = cell.transform.position.x;\n                        var csx = 0.5 * cell.size.x;\n                        if (x < cx + csx) {\n                            var runtime = this.runtime;\n                            if (runtime instanceof EShapeTableBodyRuntime) {\n                                runtime.onCellTouched(this, rowIndex, i);\n                            }\n                            return true;\n                        }\n                    }\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EShapeTableBody.prototype.containsText = function (x, y) {\n        return null;\n    };\n    EShapeTableBody.prototype.containsChildren = function (x, y) {\n        return null;\n    };\n    return EShapeTableBody;\n}(EShapeGroupShadowed));\nexport { EShapeTableBody };\n//# sourceMappingURL=e-shape-table-body.js.map","import { NumberFormatters } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nvar toValueDefault = function (row, index) { return row[index]; };\nvar fromValueDefault = function (row, index, rows, value) {\n    row[index] = value;\n};\nvar formatterDefault = function (value) { return String(value); };\nvar EShapeTableColumnValueRuntime = /** @class */ (function () {\n    function EShapeTableColumnValueRuntime(value) {\n        this.toValue = this.parseToValue(value.getter, toValueDefault, '\"\"');\n        this.fromValue = this.parseFromValue(value.setter, fromValueDefault);\n        if (value.type === EShapeTableColumnValueType.TEXT) {\n            this.formatter = this.parseFormat(value.format, formatterDefault, '\"\"');\n        }\n        else {\n            var format = value.format;\n            if (0 < format.trim().length) {\n                var formatter_1 = NumberFormatters.create(format);\n                this.formatter = function (v) {\n                    return formatter_1.format(v, 1);\n                };\n            }\n            else {\n                this.formatter = formatterDefault;\n            }\n        }\n    }\n    EShapeTableColumnValueRuntime.prototype.parseToValue = function (expression, def, defLiteral) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"row\", \"index\", \"rows\", \"try{ return (\".concat(expression, \"); } catch( e ) { return \").concat(defLiteral, \"; }\"));\n        }\n        catch (_a) {\n            return def;\n        }\n    };\n    EShapeTableColumnValueRuntime.prototype.parseFromValue = function (expression, def) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"row\", \"index\", \"rows\", \"value\", \"try{ \".concat(expression, \" = value; } catch( e ) {}\"));\n        }\n        catch (_a) {\n            return def;\n        }\n    };\n    EShapeTableColumnValueRuntime.prototype.parseFormat = function (expression, def, defLiteral) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"value\", \"index\", \"try{ return (\".concat(expression, \"); } catch( e ) { return \").concat(defLiteral, \"; }\"));\n        }\n        catch (_a) {\n            return def;\n        }\n    };\n    return EShapeTableColumnValueRuntime;\n}());\nexport { EShapeTableColumnValueRuntime };\n//# sourceMappingURL=e-shape-table-column-value-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nvar EShapeTableHeaderRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableHeaderRuntime, _super);\n    function EShapeTableHeaderRuntime() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EShapeTableHeaderRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeTableHeaderRuntime };\n//# sourceMappingURL=e-shape-table-header-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeGroupShadowed } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nvar EShapeTableHeader = /** @class */ (function (_super) {\n    __extends(EShapeTableHeader, _super);\n    function EShapeTableHeader(mode, type) {\n        if (type === void 0) { type = EShapeTableIds.HEADER_ID; }\n        return _super.call(this, mode, type) || this;\n    }\n    return EShapeTableHeader;\n}(EShapeGroupShadowed));\nexport { EShapeTableHeader };\n//# sourceMappingURL=e-shape-table-header.js.map","import { __extends } from \"tslib\";\nimport { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableActionRuntime } from \"./e-shape-table-action-runtime\";\nimport { EShapeTableColumnValueRuntime } from \"./e-shape-table-column-value-runtime\";\nvar EShapeTableRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableRuntime, _super);\n    function EShapeTableRuntime(shape) {\n        var _this = _super.call(this, shape) || this;\n        if (shape instanceof EShapeTable) {\n            // Columns\n            var values = shape.column.values;\n            for (var i = 0, imax = values.length; i < imax; ++i) {\n                var value = values[i];\n                value.runtime = new EShapeTableColumnValueRuntime(value);\n            }\n            // Action\n            _this.actions.push(new EShapeTableActionRuntime(shape));\n        }\n        return _this;\n    }\n    return EShapeTableRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeTableRuntime };\n//# sourceMappingURL=e-shape-table-runtime.js.map","import { createGroupUploaded, deserializeBase, DThemes, EShapeCapability, EShapeDefaults, EShapeGroupShadowed, EShapeRectangle, EShapeResourceManagerDeserializationMode, EShapeStrokeSide, EShapeTextAlignHorizontal, UtilRgb } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableBody } from \"./e-shape-table-body\";\nimport { EShapeTableColumnValue, EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nimport { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nimport { EShapeTableHeader } from \"./e-shape-table-header\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { EEditorShapeTable } from \"./e-editor-shape-table\";\nimport { EShapeTableRuntime } from \"./e-shape-table-runtime\";\nimport { EShapeTableHeaderRuntime } from \"./e-shape-table-header-runtime\";\nimport { EShapeTableBodyRuntime } from \"./e-shape-table-body-runtime\";\nvar EShapeTables = /** @class */ (function () {\n    function EShapeTables() {\n    }\n    EShapeTables.getTheme = function () {\n        return DThemes.get(\"EShapeTable\");\n    };\n    EShapeTables.create = function (existing) {\n        var mode = EShapeResourceManagerDeserializationMode.EDITOR;\n        var result = new EShapeTable(mode);\n        var header = new EShapeTableHeader(mode).attach(result);\n        var headerCell = new EShapeRectangle().attach(header);\n        headerCell.stroke.side = EShapeStrokeSide.BOTTOM;\n        headerCell.stroke.width = 1;\n        headerCell.stroke.color = UtilRgb.brighten(EShapeDefaults.STROKE_COLOR, 0.65);\n        var body = new EShapeTableBody(mode).attach(result);\n        body.state.isFocusable = true;\n        body.interactive = true;\n        var even = new EShapeGroupShadowed(mode).attach(body);\n        var odd = new EShapeGroupShadowed(mode).attach(body);\n        var cellEven = new EShapeRectangle().attach(even);\n        cellEven.stroke.enable = false;\n        cellEven.text.value = \"-\";\n        cellEven.text.clipping = true;\n        var cellOdd = new EShapeRectangle().attach(odd);\n        cellOdd.fill.color = UtilRgb.darken(EShapeDefaults.FILL_COLOR, 0.05);\n        cellOdd.stroke.enable = false;\n        cellOdd.text.value = \"-\";\n        cellOdd.text.clipping = true;\n        result.column.add(new EShapeTableColumnValue(1, EShapeTableColumnValueType.TEXT, \"\", \"\", \"\", EShapeTextAlignHorizontal.CENTER, new EShapeTableColumnValueHeader(this.getTheme().newHeaderLabel()), new EShapeTableColumnValueBody()));\n        if (existing) {\n            result.copy(existing);\n        }\n        result.onSizeChange();\n        return result;\n    };\n    EShapeTables.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeTableIds.ID,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M20 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 2v3H5V5h15z\" +\n                    \"m-5 14h-5v-9h5v9zM5 10h3v9H5v-9zm12 9v-9h3v9h-3z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeTables.create(existing); },\n            deserializer: function (item, manager) { return EShapeTables.deserialize(item, manager); },\n            editor: EEditorShapeTable,\n            runtime: EShapeTableRuntime,\n            uploaded: createGroupUploaded\n        });\n        EShapeExtensions.add({\n            type: EShapeTableIds.HEADER_ID,\n            name: theme.getHeaderName(),\n            deserializer: function (item, manager) { return EShapeTables.deserializeHeader(item, manager); },\n            runtime: EShapeTableHeaderRuntime,\n            capability: EShapeCapability.PRIMITIVE & ~EShapeCapability.CHILDREN\n        });\n        EShapeExtensions.add({\n            type: EShapeTableIds.BODY_ID,\n            name: theme.getBodyName(),\n            deserializer: function (item, manager) { return EShapeTables.deserializeBody(item, manager); },\n            runtime: EShapeTableBodyRuntime,\n            capability: EShapeCapability.PRIMITIVE & ~EShapeCapability.CHILDREN\n        });\n    };\n    EShapeTables.deserialize = function (item, manager) {\n        var shape = new EShapeTable(manager.mode);\n        var index = item[15];\n        var resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            var parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.column.deserialize(parsed[0], manager);\n            shape.row.deserialize(parsed[1], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    EShapeTables.deserializeHeader = function (item, manager) {\n        var shape = new EShapeTableHeader(manager.mode);\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    EShapeTables.deserializeBody = function (item, manager) {\n        var shape = new EShapeTableBody(manager.mode);\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    return EShapeTables;\n}());\nexport { EShapeTables };\n//# sourceMappingURL=e-shape-tables.js.map","var toIconName = function (index) {\n    return \"extension_factory_icon_\".concat(index);\n};\nvar EShapeExtensionFactories = /** @class */ (function () {\n    function EShapeExtensionFactories() {\n    }\n    EShapeExtensionFactories.add = function (factory) {\n        this._factories.push(factory);\n    };\n    EShapeExtensionFactories.each = function (iteratee) {\n        var factories = this._factories;\n        for (var i = 0, imax = factories.length; i < imax; ++i) {\n            iteratee(factories[i]);\n        }\n    };\n    EShapeExtensionFactories.merge = function (iconBuilder) {\n        var factories = this._factories;\n        for (var i = 0, imax = factories.length; i < imax; ++i) {\n            var factory = factories[i];\n            var icon = factory.icon;\n            iconBuilder.add(toIconName(i), icon.width, icon.height, icon.svg);\n        }\n    };\n    EShapeExtensionFactories.build = function (icons) {\n        var factories = this._factories;\n        for (var i = 0, imax = factories.length; i < imax; ++i) {\n            var factory = factories[i];\n            factory.icon.texture = icons[toIconName(i)];\n        }\n    };\n    EShapeExtensionFactories._factories = [];\n    return EShapeExtensionFactories;\n}());\nexport { EShapeExtensionFactories };\n//# sourceMappingURL=e-shape-extension-factories.js.map","import { __extends } from \"tslib\";\nimport { DInputSearch, UtilHtmlElement } from \"@wcardinal/wcardinal-ui\";\nvar EDialogActionKeywordInput = /** @class */ (function (_super) {\n    __extends(EDialogActionKeywordInput, _super);\n    function EDialogActionKeywordInput() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogActionKeywordInput.prototype.getClipperRect = function (resolution, point, result) {\n        return UtilHtmlElement.getClipperRect(null, this, resolution, point, result);\n    };\n    return EDialogActionKeywordInput;\n}(DInputSearch));\nexport { EDialogActionKeywordInput };\n//# sourceMappingURL=e-dialog-action-keyword-input.js.map","import { __extends } from \"tslib\";\nimport { DBoard, DLayoutVertical, DList, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogActionKeywordInput } from \"./e-dialog-action-keyword-input\";\nvar EDialogActionKeywordBoard = /** @class */ (function (_super) {\n    __extends(EDialogActionKeywordBoard, _super);\n    function EDialogActionKeywordBoard(options) {\n        var _this = _super.call(this, options) || this;\n        _this.addChild(new DLayoutVertical({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [_this.input, _this.list, _this.text]\n        }));\n        _this.onInputChange(\"\");\n        return _this;\n    }\n    Object.defineProperty(EDialogActionKeywordBoard.prototype, \"input\", {\n        // Input\n        get: function () {\n            var result = this._input;\n            if (result == null) {\n                result = this.newInput();\n                this._input = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionKeywordBoard.prototype.newInput = function () {\n        var _this = this;\n        return new EDialogActionKeywordInput({\n            width: \"padding\",\n            on: {\n                input: function (value) {\n                    _this.onInputChange(value);\n                }\n            }\n        });\n    };\n    EDialogActionKeywordBoard.prototype.onInputChange = function (word) {\n        this.list.data.clearAndAddAll(this.newKeywords(word));\n    };\n    EDialogActionKeywordBoard.prototype.newKeywords = function (word) {\n        var _a;\n        var keywords = ((_a = this._keywords) !== null && _a !== void 0 ? _a : (this._keywords = DThemes.get(\"EDialogAction\").newKeywords()));\n        if (0 < word.trim().length) {\n            var filtered = [];\n            for (var i = 0, imax = keywords.length; i < imax; ++i) {\n                var keyword = keywords[i];\n                if (0 <= keyword.keyword.indexOf(word)) {\n                    filtered.push(keyword);\n                }\n            }\n            return filtered;\n        }\n        else {\n            return keywords;\n        }\n    };\n    Object.defineProperty(EDialogActionKeywordBoard.prototype, \"list\", {\n        // List\n        get: function () {\n            var result = this._list;\n            if (result == null) {\n                result = this.newList();\n                this._list = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionKeywordBoard.prototype.newList = function () {\n        var _this = this;\n        return new DList({\n            weight: 1,\n            width: \"padding\",\n            data: {\n                selection: {\n                    on: {\n                        change: function () {\n                            _this.onListSelectionChange();\n                        }\n                    }\n                },\n                toLabel: function (keyword) {\n                    return keyword.keyword;\n                },\n                toId: function (keyword) {\n                    return keyword.keyword;\n                }\n            }\n        });\n    };\n    EDialogActionKeywordBoard.prototype.onListSelectionChange = function () {\n        var first = this.list.data.selection.first;\n        if (first) {\n            this.text.text = \"\".concat(first.keyword, \": \").concat(first.type, \"\\n\").concat(first.description);\n        }\n        else {\n            this.text.text = \"\";\n        }\n    };\n    Object.defineProperty(EDialogActionKeywordBoard.prototype, \"text\", {\n        // Text\n        get: function () {\n            var result = this._text;\n            if (result == null) {\n                result = this.newText();\n                this._text = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionKeywordBoard.prototype.newText = function () {\n        return new DText({\n            width: \"padding\",\n            height: 120,\n            state: \"READ_ONLY\",\n            text: {\n                style: {\n                    wordWrap: \"NORMAL\"\n                }\n            },\n            theme: \"DInputTextArea\"\n        });\n    };\n    EDialogActionKeywordBoard.prototype.getType = function () {\n        return \"DDialog\";\n    };\n    return EDialogActionKeywordBoard;\n}(DBoard));\nexport { EDialogActionKeywordBoard };\n//# sourceMappingURL=e-dialog-action-keyword-board.js.map","import { __extends } from \"tslib\";\nimport { DAlignHorizontal, DButtonCheck, DButtonColor, DDialogLayered, DInputInteger, DInputLabel, DInputReal, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DMenu, DSelect, DSelectMultiple, DText, DThemes, EShapeActionValueBlink, EShapeActionValueBlinkType, EShapeActionValueChangeColor, EShapeActionValueChangeColorBrightness, EShapeActionValueChangeColorCode, EShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType, EShapeActionValueChangeColorTypes, EShapeActionValueChangeCursor, EShapeActionValueChangeText, EShapeActionValueChangeTextType, EShapeActionValueEmitEvent, EShapeActionValueMisc, EShapeActionValueMiscEmitEvent, EShapeActionValueGesture, EShapeActionValueGestureType, EShapeActionValueMiscHtmlElement, EShapeActionValueMiscInput, EShapeActionValueShowHideLayer, EShapeActionValueMiscType, EShapeActionValueMiscWrite, EShapeActionValueOnInputAction, EShapeActionValueOpen, EShapeActionValueOpenType, EShapeActionValueShowHideShape, EShapeActionValueShowHideType, EShapeActionValueTransformMove, EShapeActionValueTransformMoveType, EShapeActionValueTransformResize, EShapeActionValueTransformResizeType, EShapeActionValueTransformRotate, EShapeActionValueTransformRotateType, EShapeActionValueTransformType, EShapeActionValueType, UtilHtmlElementWhen, EShapeActionValueGestureOperationType, EShapeActionValueShowHide, EShapeActionValueOpenDialog, EShapeActionValueOpenDialogType, EShapeActionValueOpenExtension, EShapeActionOpenExtensions, EShapeActionValueMiscExecute, EShapeActionValueOpenDialogExtension, EShapeActionOpenDialogExtensions, DButtonAmbient, DApplications, EShapeActionMiscExtensions, EShapeActionValueMiscExtension, EShapeActionValueChangeFillPercent } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeActionExtensions } from \"../extension\";\nimport { EDialogActionExtensionContainer } from \"./e-dialog-action-extension-container\";\nimport { EDialogActionKeywordBoard } from \"./e-dialog-action-keyword-board\";\nvar EDialogAction = /** @class */ (function (_super) {\n    __extends(EDialogAction, _super);\n    function EDialogAction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogAction.prototype.newContentChildren = function (theme, options) {\n        var _this = this;\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.selectLayout, this.showHideTypeLayout, this.blinkTypeLayout, this.transformTypeLayout, this.changeColorTypeLayout, this.changeColorTargetLayout, this.rotateTypeLayout, this.resizeTypeLayout, this.originXLayout, this.originYLayout, this.moveTypeLayout, this.openTypeLayout, this.openDialogTypeLayout, this.changeTextTypeLayout, this.miscTypeLayout, this.onInputActionLayout, this.whenTypeLayout, this.gestureTypeLayout, this.gestureOperationTypeLayout, this.selectLayerLayout, this.condition, this.intervalLayout, this.size, this.amount, this.targetName, this.colorLayout, this.target, this.argument, this.contents, this.initialization, this.pointerEventsLayout, this.colorCode, this.alphaCode, this.brightness, this.blend, this.initial, this.step, this.min, this.max, this.scaleLayout, this.checkBringToFrontLayout, this.inNewWindowLayout);\n        var onChangeBound = function () {\n            _this.onChange();\n        };\n        this.select.on(\"change\", onChangeBound);\n        this.showHideType.on(\"change\", onChangeBound);\n        this.blinkType.on(\"change\", onChangeBound);\n        this.transformType.on(\"change\", onChangeBound);\n        this.resizeType.on(\"change\", onChangeBound);\n        this.changeColorTarget.on(\"change\", onChangeBound);\n        this.openType.on(\"change\", onChangeBound);\n        this.openDialogType.on(\"change\", onChangeBound);\n        this.miscType.on(\"change\", onChangeBound);\n        return result;\n    };\n    EDialogAction.prototype.newLabel = function (label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    };\n    EDialogAction.prototype.newSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    EDialogAction.prototype.newLabeled = function (label, input) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                input,\n                this.newSpace()\n            ]\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"themeShape\", {\n        // Theme\n        get: function () {\n            var _a;\n            return ((_a = this._themeShape) !== null && _a !== void 0 ? _a : (this._themeShape = this.newThemeShape()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newThemeShape = function () {\n        return DThemes.get(\"EShapeActionValue\");\n    };\n    Object.defineProperty(EDialogAction.prototype, \"select\", {\n        // Select\n        get: function () {\n            var _a;\n            return ((_a = this._select) !== null && _a !== void 0 ? _a : (this._select = this.newSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSelect = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueType.SHOW_HIDE,\n            menu: {\n                items: this.newSelectMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newSelectMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueType.SHOW_HIDE,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.SHOW_HIDE)\n                }\n            },\n            {\n                value: EShapeActionValueType.BLINK,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.BLINK)\n                }\n            },\n            {\n                value: EShapeActionValueType.TRANSFORM,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.TRANSFORM)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_COLOR,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_COLOR)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_FILL_PERCENT,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_FILL_PERCENT)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_TEXT,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_CURSOR,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_CURSOR)\n                }\n            },\n            {\n                value: EShapeActionValueType.OPEN,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.OPEN)\n                }\n            },\n            {\n                value: EShapeActionValueType.GESTURE,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.GESTURE)\n                }\n            },\n            {\n                value: EShapeActionValueType.MISC,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.MISC)\n                }\n            }\n        ];\n        EShapeActionExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"selectLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayout) !== null && _a !== void 0 ? _a : (this._selectLayout = this.newSelectLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSelectLayout = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabel(this.theme.getSelectActionLabel()),\n                this.select,\n                new DLayoutHorizontal({\n                    width: 60,\n                    height: \"auto\",\n                    children: [\n                        new DLayoutSpace({\n                            weight: 1\n                        }),\n                        this.buttonKeyword\n                    ]\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"buttonKeyword\", {\n        // Keyword button\n        get: function () {\n            var _a;\n            return ((_a = this._buttonKeyword) !== null && _a !== void 0 ? _a : (this._buttonKeyword = this.newButtonKeyword()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newButtonKeyword = function () {\n        var _this = this;\n        var _a;\n        return new DButtonAmbient({\n            width: 30,\n            toggle: true,\n            image: {\n                source: (_a = this.options) === null || _a === void 0 ? void 0 : _a.icons.action_keyword\n            },\n            title: this.theme.getButtonKeywordTitle(),\n            on: {\n                active: function () {\n                    _this.onButtonKeywordActive();\n                },\n                inactive: function () {\n                    _this.onButtonKeywordInactive();\n                }\n            }\n        });\n    };\n    EDialogAction.prototype.onButtonKeywordActive = function () {\n        var boardKeyword = this.boardKeyword;\n        var offset = this.getBoardKeywordOffset();\n        var width = this.width;\n        var layer = DApplications.getLayer(this);\n        if (layer != null) {\n            var boardKeywordWidth = boardKeyword.width;\n            if (layer.width < this.position.x + width + offset + boardKeywordWidth) {\n                boardKeyword.position.x = -boardKeywordWidth - offset;\n            }\n            else {\n                boardKeyword.position.x = width + offset;\n            }\n        }\n        else {\n            boardKeyword.position.x = width + offset;\n        }\n        boardKeyword.show();\n    };\n    EDialogAction.prototype.onButtonKeywordInactive = function () {\n        this.boardKeyword.hide();\n    };\n    Object.defineProperty(EDialogAction.prototype, \"boardKeyword\", {\n        // Keyword board\n        get: function () {\n            var _a;\n            return ((_a = this._boardKeyword) !== null && _a !== void 0 ? _a : (this._boardKeyword = this.newBoardKeyword()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBoardKeyword = function () {\n        // To exclude this board from the automatic height calculation targets,\n        // The width and the height must be functions.\n        return new EDialogActionKeywordBoard({\n            parent: this,\n            x: 0,\n            y: 0,\n            width: function () { return 300; },\n            height: function () { return 400; },\n            padding: 16\n        });\n    };\n    EDialogAction.prototype.getBoardKeywordOffset = function () {\n        return 16;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"showHideType\", {\n        // Select show / hide type\n        get: function () {\n            var _a;\n            return ((_a = this._showHideType) !== null && _a !== void 0 ? _a : (this._showHideType = this.newShowHideType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newShowHideType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueShowHideType.SHAPE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueShowHideType.SHAPE,\n                        text: {\n                            value: themeShape.toShowHideTypeLabel(EShapeActionValueShowHideType.SHAPE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueShowHideType.LAYER,\n                        text: {\n                            value: themeShape.toShowHideTypeLabel(EShapeActionValueShowHideType.LAYER)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"showHideTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._showHideTypeLayout) !== null && _a !== void 0 ? _a : (this._showHideTypeLayout = this.newLabeled(null, this.showHideType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeShowHideTypeLayout = function (select) {\n        var showHideTypeLayout = this.showHideTypeLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            showHideTypeLayout.show();\n        }\n        else {\n            showHideTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"blinkType\", {\n        // Select blink type\n        get: function () {\n            var _a;\n            return ((_a = this._blinkType) !== null && _a !== void 0 ? _a : (this._blinkType = this.newBlinkType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBlinkType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueBlinkType.VISIBILITY,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueBlinkType.VISIBILITY,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.VISIBILITY)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.BRIGHTEN,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.BRIGHTEN)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.DARKEN,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.DARKEN)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.OPACITY,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.OPACITY)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.COLOR_FILL,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.COLOR_FILL)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.COLOR_STROKE,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.COLOR_STROKE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"blinkTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._blinkTypeLayout) !== null && _a !== void 0 ? _a : (this._blinkTypeLayout = this.newLabeled(null, this.blinkType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeBlinkTypeLayout = function (select) {\n        var blinkTypeLayout = this.blinkTypeLayout;\n        if (select === EShapeActionValueType.BLINK) {\n            blinkTypeLayout.show();\n        }\n        else {\n            blinkTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"transformType\", {\n        // Transform type\n        get: function () {\n            var _a;\n            return ((_a = this._transformType) !== null && _a !== void 0 ? _a : (this._transformType = this.newTransformType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newTransformType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformType.MOVE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformType.MOVE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.MOVE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformType.ROTATE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.ROTATE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformType.RESIZE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.RESIZE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"transformTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._transformTypeLayout) !== null && _a !== void 0 ? _a : (this._transformTypeLayout = this.newLabeled(null, this.transformType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeTransformTypeLayout = function (select) {\n        var transformTypeLayout = this.transformTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            transformTypeLayout.show();\n        }\n        else {\n            transformTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorType\", {\n        // Select color type\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorType) !== null && _a !== void 0 ? _a : (this._changeColorType = this.newChangeColorType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newChangeColorType = function () {\n        var themeShape = this.themeShape;\n        return new DSelectMultiple({\n            weight: 1,\n            values: [EShapeActionValueChangeColorType.FILL],\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeColorType.FILL,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.FILL)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.STROKE,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.STROKE)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.TEXT,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.TEXT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.TEXT_OUTLINE,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.TEXT_OUTLINE)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorTypeLayout) !== null && _a !== void 0 ? _a : (this._changeColorTypeLayout = this.newLabeled(null, this.changeColorType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeChangeColorTypeLayout = function (select) {\n        var changeColorTypeLayout = this.changeColorTypeLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            changeColorTypeLayout.show();\n        }\n        else {\n            changeColorTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorTarget\", {\n        // Select color target\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorTarget) !== null && _a !== void 0 ? _a : (this._changeColorTarget = this.newChangeColorTarget()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newChangeColorTarget = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.COLOR,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.COLOR)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.ALPHA,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.ALPHA)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.CODE,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.CODE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.BRIGHTNESS,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.BRIGHTNESS)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorTargetLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorTargetLayout) !== null && _a !== void 0 ? _a : (this._changeColorTargetLayout = this.newLabeled(null, this.changeColorTarget)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeChangeColorTargetLayout = function (select) {\n        var changeColorTargetLayout = this.changeColorTargetLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            changeColorTargetLayout.show();\n        }\n        else {\n            changeColorTargetLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"rotateType\", {\n        // Select rotate type\n        get: function () {\n            var _a;\n            return ((_a = this._rotateType) !== null && _a !== void 0 ? _a : (this._rotateType = this.newRotateType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newRotateType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformRotateType.RELATIVE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformRotateType.RELATIVE,\n                        text: {\n                            value: themeShape.toTransformRotateTypeLabel(EShapeActionValueTransformRotateType.RELATIVE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformRotateType.ABSOLUTE,\n                        text: {\n                            value: themeShape.toTransformRotateTypeLabel(EShapeActionValueTransformRotateType.ABSOLUTE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"rotateTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._rotateTypeLayout) !== null && _a !== void 0 ? _a : (this._rotateTypeLayout = this.newLabeled(null, this.rotateType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeRotateTypeLayout = function (select) {\n        var rotateTypeLayout = this.rotateTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.ROTATE) {\n                rotateTypeLayout.show();\n            }\n            else {\n                rotateTypeLayout.hide();\n            }\n        }\n        else {\n            rotateTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"resizeType\", {\n        // Select resize type\n        get: function () {\n            var _a;\n            return ((_a = this._resizeType) !== null && _a !== void 0 ? _a : (this._resizeType = this.newResizeType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newResizeType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformResizeType.RELATIVE_SIZE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_SIZE,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_SIZE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_SIZE,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_SIZE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_HEIGHT,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_HEIGHT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_WIDTH,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_WIDTH)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"resizeTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._resizeTypeLayout) !== null && _a !== void 0 ? _a : (this._resizeTypeLayout = this.newLabeled(null, this.resizeType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeResizeTypeLayout = function (select) {\n        var resizeTypeLayout = this.resizeTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.RESIZE) {\n                resizeTypeLayout.show();\n            }\n            else {\n                resizeTypeLayout.hide();\n            }\n        }\n        else {\n            resizeTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originX\", {\n        // X Origin\n        get: function () {\n            var _a;\n            return ((_a = this._originX) !== null && _a !== void 0 ? _a : (this._originX = this.newOriginX()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOriginX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0.5\n            },\n            step: 0.1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originXLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._originXLayout) !== null && _a !== void 0 ? _a : (this._originXLayout = this.newLabeled(this.theme.getInputOriginXLabel(), this.originX)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOriginXLayout = function (select) {\n        var originXLayout = this.originXLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            var transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.RESIZE) {\n                var resizeType = this.resizeType.value;\n                if (resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_WIDTH) {\n                    originXLayout.show();\n                }\n                else {\n                    originXLayout.hide();\n                }\n            }\n            else if (transformType === EShapeActionValueTransformType.ROTATE) {\n                originXLayout.show();\n            }\n            else {\n                originXLayout.hide();\n            }\n        }\n        else {\n            originXLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originY\", {\n        // Y Origin\n        get: function () {\n            var _a;\n            return ((_a = this._originY) !== null && _a !== void 0 ? _a : (this._originY = this.newOriginY()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOriginY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0.5\n            },\n            step: 0.1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originYLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._originYLayout) !== null && _a !== void 0 ? _a : (this._originYLayout = this.newLabeled(this.theme.getInputOriginYLabel(), this.originY)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOriginYLayout = function (select) {\n        var originYLayout = this.originYLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            var transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.RESIZE) {\n                var resizeType = this.resizeType.value;\n                if (resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_HEIGHT) {\n                    originYLayout.show();\n                }\n                else {\n                    originYLayout.hide();\n                }\n            }\n            else if (transformType === EShapeActionValueTransformType.ROTATE) {\n                originYLayout.show();\n            }\n            else {\n                originYLayout.hide();\n            }\n        }\n        else {\n            originYLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"moveType\", {\n        // Select move type\n        get: function () {\n            var _a;\n            return ((_a = this._moveType) !== null && _a !== void 0 ? _a : (this._moveType = this.newMoveType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMoveType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformMoveType.RELATIVE_X,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformMoveType.RELATIVE_X,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.RELATIVE_X)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.RELATIVE_Y,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.RELATIVE_Y)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.ABSOLUTE_X,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.ABSOLUTE_X)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.ABSOLUTE_Y,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.ABSOLUTE_Y)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.LEFT_OR_RIGHT,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.LEFT_OR_RIGHT)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"moveTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._moveTypeLayout) !== null && _a !== void 0 ? _a : (this._moveTypeLayout = this.newLabeled(null, this.moveType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeMoveTypeLayout = function (select) {\n        var moveTypeLayout = this.moveTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.MOVE) {\n                moveTypeLayout.show();\n            }\n            else {\n                moveTypeLayout.hide();\n            }\n        }\n        else {\n            moveTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openType\", {\n        // Select open type\n        get: function () {\n            var _a;\n            return ((_a = this._openType) !== null && _a !== void 0 ? _a : (this._openType = this.newOpenType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOpenType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOpenType.DIAGRAM,\n            menu: {\n                items: this.newOpenTypeMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newOpenTypeMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueOpenType.DIAGRAM,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.DIAGRAM)\n                }\n            },\n            {\n                value: EShapeActionValueOpenType.PAGE,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.PAGE)\n                }\n            },\n            {\n                value: EShapeActionValueOpenType.DIALOG,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.DIALOG)\n                }\n            }\n        ];\n        EShapeActionOpenExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._openTypeLayout) !== null && _a !== void 0 ? _a : (this._openTypeLayout = this.newLabeled(null, this.openType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOpenTypeLayout = function (select) {\n        var openTypeLayout = this.openTypeLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            openTypeLayout.show();\n        }\n        else {\n            openTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openDialogType\", {\n        // Select open dialog type\n        get: function () {\n            var _a;\n            return ((_a = this._openDialogType) !== null && _a !== void 0 ? _a : (this._openDialogType = this.newOpenDialogType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOpenDialogType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOpenDialogType.TEXT,\n            menu: {\n                items: this.newOpenDialogTypeMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newOpenDialogTypeMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueOpenDialogType.TEXT,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.INTEGER,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.INTEGER)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.REAL,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.REAL)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.BOOLEAN,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.BOOLEAN)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.DATE,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.DATE)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.TIME,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.TIME)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.DATETIME,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.DATETIME)\n                }\n            }\n        ];\n        EShapeActionOpenDialogExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openDialogTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._openDialogTypeLayout) !== null && _a !== void 0 ? _a : (this._openDialogTypeLayout = this.newLabeled(null, this.openDialogType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOpenDialogTypeLayout = function (select) {\n        var openDialogTypeLayout = this.openDialogTypeLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            if (this.openType.value === EShapeActionValueOpenType.DIALOG) {\n                openDialogTypeLayout.show();\n            }\n            else {\n                openDialogTypeLayout.hide();\n            }\n        }\n        else {\n            openDialogTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeTextType\", {\n        // Select change text type\n        get: function () {\n            var _a;\n            return ((_a = this._changeTextType) !== null && _a !== void 0 ? _a : (this._changeTextType = this.newChangeTextType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newChangeTextType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueChangeTextType.TEXT,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeTextType.TEXT,\n                        text: {\n                            value: themeShape.toChangeTextTypeLabel(EShapeActionValueChangeTextType.TEXT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeTextType.NUMBER,\n                        text: {\n                            value: themeShape.toChangeTextTypeLabel(EShapeActionValueChangeTextType.NUMBER)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeTextTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._changeTextTypeLayout) !== null && _a !== void 0 ? _a : (this._changeTextTypeLayout = this.newLabeled(null, this.changeTextType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeChangeTextTypeLayout = function (select) {\n        var changeTextTypeLayout = this.changeTextTypeLayout;\n        if (select === EShapeActionValueType.CHANGE_TEXT) {\n            changeTextTypeLayout.show();\n        }\n        else {\n            changeTextTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"miscType\", {\n        // Select misc. type\n        get: function () {\n            var _a;\n            return ((_a = this._miscType) !== null && _a !== void 0 ? _a : (this._miscType = this.newMiscType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMiscType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueMiscType.INPUT_TEXT,\n            menu: {\n                items: this.newMiscTypeMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newMiscTypeMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueMiscType.INPUT_TEXT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.INPUT_INTEGER,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_INTEGER)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.INPUT_REAL,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_REAL)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.EMIT_EVENT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.EMIT_EVENT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_BOTH,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_BOTH)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_LOCAL,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_LOCAL)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_REMOTE,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_REMOTE)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.HTML_ELEMENT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.HTML_ELEMENT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.EXECUTE,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.EXECUTE)\n                }\n            }\n        ];\n        EShapeActionMiscExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"miscTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._miscTypeLayout) !== null && _a !== void 0 ? _a : (this._miscTypeLayout = this.newLabeled(null, this.miscType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeMiscTypeLayout = function (select) {\n        var miscTypeLayout = this.miscTypeLayout;\n        if (select === EShapeActionValueType.MISC) {\n            miscTypeLayout.show();\n        }\n        else {\n            miscTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"onInputAction\", {\n        // OnInput Action type\n        get: function () {\n            var _a;\n            return ((_a = this._onInputAction) !== null && _a !== void 0 ? _a : (this._onInputAction = this.newOnInputAction()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOnInputAction = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOnInputAction.WRITE_REMOTE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueOnInputAction.EMIT_EVENT,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.EMIT_EVENT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_BOTH,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_BOTH)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_LOCAL,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_LOCAL)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_REMOTE,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_REMOTE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"onInputActionLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._onInputActionLayout) !== null && _a !== void 0 ? _a : (this._onInputActionLayout = this.newLabeled(null, this.onInputAction)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOnInputActionLayout = function (select) {\n        var onInputActionLayout = this.onInputActionLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG_TEXT:\n                case EShapeActionValueOpenType.DIALOG_INTEGER:\n                case EShapeActionValueOpenType.DIALOG_REAL:\n                case EShapeActionValueOpenType.DIALOG_BOOLEAN:\n                    onInputActionLayout.show();\n                    break;\n                case EShapeActionValueOpenType.DIALOG:\n                    var openDialogType = this.openDialogType.value;\n                    if (openDialogType == null) {\n                        onInputActionLayout.hide();\n                    }\n                    else if (EShapeActionValueOpenDialogType.EXTENSION <= openDialogType) {\n                        onInputActionLayout.hide();\n                    }\n                    else {\n                        onInputActionLayout.show();\n                    }\n                    break;\n                default:\n                    onInputActionLayout.hide();\n                    break;\n            }\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                    onInputActionLayout.show();\n                    break;\n                default:\n                    onInputActionLayout.hide();\n                    break;\n            }\n        }\n        else {\n            onInputActionLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"whenType\", {\n        // Select when type\n        get: function () {\n            var _a;\n            return ((_a = this._whenType) !== null && _a !== void 0 ? _a : (this._whenType = this.newWhenType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newWhenType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: UtilHtmlElementWhen.FOCUSED,\n            menu: {\n                items: [\n                    {\n                        value: UtilHtmlElementWhen.CLICKED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.CLICKED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.DOUBLE_CLICKED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.DOUBLE_CLICKED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.FOCUSED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.FOCUSED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.ALWAYS,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.ALWAYS)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"whenTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._whenTypeLayout) !== null && _a !== void 0 ? _a : (this._whenTypeLayout = this.newLabeled(this.theme.getSelectWhenLabel(), this.whenType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.toWhenTypeValue = function (whenType) {\n        switch (whenType) {\n            case UtilHtmlElementWhen.CLICKED:\n                return '\"CLICKED\"';\n            case UtilHtmlElementWhen.DOUBLE_CLICKED:\n                return '\"DOUBLE_CLICKED\"';\n            case UtilHtmlElementWhen.FOCUSED:\n                return '\"FOCUSED\"';\n            case UtilHtmlElementWhen.ALWAYS:\n                return '\"ALWAYS\"';\n        }\n        return '\"FOCUSED\"';\n    };\n    EDialogAction.prototype.toWhenType = function (whenTypeValue) {\n        switch (whenTypeValue) {\n            case '\"CLICKED\"':\n                return UtilHtmlElementWhen.CLICKED;\n            case '\"DOUBLE_CLICKED\"':\n                return UtilHtmlElementWhen.DOUBLE_CLICKED;\n            case '\"FOCUSED\"':\n                return UtilHtmlElementWhen.FOCUSED;\n            case '\"ALWAYS\"':\n                return UtilHtmlElementWhen.ALWAYS;\n        }\n        return UtilHtmlElementWhen.FOCUSED;\n    };\n    EDialogAction.prototype.onChangeWhenTypeLayout = function (select) {\n        var whenTypeLayout = this.whenTypeLayout;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    whenTypeLayout.show();\n                    break;\n                default:\n                    whenTypeLayout.hide();\n                    break;\n            }\n        }\n        else {\n            whenTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureType) !== null && _a !== void 0 ? _a : (this._gestureType = this.newGestureType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newGestureType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueGestureType.SHAPE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureType.SHAPE,\n                        text: {\n                            value: themeShape.toGestureTypeLabel(EShapeActionValueGestureType.SHAPE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueGestureType.LAYER,\n                        text: {\n                            value: themeShape.toGestureTypeLabel(EShapeActionValueGestureType.LAYER)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureTypeLayout) !== null && _a !== void 0 ? _a : (this._gestureTypeLayout = this.newLabeled(\"\", this.gestureType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeGestureTypeLayout = function (select) {\n        var gestureTypeLayout = this.gestureTypeLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            gestureTypeLayout.show();\n        }\n        else {\n            gestureTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureOperationType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureOperationType) !== null && _a !== void 0 ? _a : (this._gestureOperationType = this.newGestureOperationType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newGestureOperationType = function () {\n        var themeShape = this.themeShape;\n        return new DSelectMultiple({\n            weight: 1,\n            values: this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL),\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureOperationType.DRAG,\n                        text: {\n                            value: themeShape.toGestureOperationTypeLabel(EShapeActionValueGestureOperationType.DRAG)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueGestureOperationType.PINCH,\n                        text: {\n                            value: themeShape.toGestureOperationTypeLabel(EShapeActionValueGestureOperationType.PINCH)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    };\n    EDialogAction.prototype.toGestureOperationType = function (types) {\n        var result = EShapeActionValueGestureOperationType.NONE;\n        for (var i = 0, imax = types.length; i < imax; ++i) {\n            result |= types[i];\n        }\n        return result;\n    };\n    EDialogAction.prototype.fromGestureOperationType = function (type) {\n        var result = [];\n        if (type & EShapeActionValueGestureOperationType.DRAG) {\n            result.push(EShapeActionValueGestureOperationType.DRAG);\n        }\n        if (type & EShapeActionValueGestureOperationType.PINCH) {\n            result.push(EShapeActionValueGestureOperationType.PINCH);\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureOperationTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureOperationTypeLayout) !== null && _a !== void 0 ? _a : (this._gestureOperationTypeLayout = this.newLabeled(\"\", this.gestureOperationType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeGestureOperationTypeLayout = function (select) {\n        var gestureOperationTypeLayout = this.gestureOperationTypeLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            gestureOperationTypeLayout.show();\n        }\n        else {\n            gestureOperationTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"selectLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayer) !== null && _a !== void 0 ? _a : (this._selectLayer = this.newSelectLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSelectLayer = function () {\n        return new DSelectMultiple({\n            weight: 1\n        });\n    };\n    EDialogAction.prototype.newSelectLayerMenuItemOptions = function () {\n        var _a;\n        var diagram = (_a = this.options) === null || _a === void 0 ? void 0 : _a.diagram;\n        if (diagram != null) {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var result = [];\n                var layers = canvas.layer.children;\n                for (var i = layers.length - 1; 0 <= i; --i) {\n                    var layer = layers[i];\n                    result.push({\n                        value: i,\n                        text: {\n                            value: layer.name\n                        },\n                        check: true\n                    });\n                }\n                return result;\n            }\n        }\n        return [];\n    };\n    Object.defineProperty(EDialogAction.prototype, \"selectLayerLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayerLayout) !== null && _a !== void 0 ? _a : (this._selectLayerLayout = this.newLabeled(this.theme.getSelectLayerLabel(), this.selectLayer)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeSelectLayerLayout = function (select) {\n        var selectLayerLayout = this.selectLayerLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            switch (this.showHideType.value) {\n                case EShapeActionValueShowHideType.LAYER:\n                    selectLayerLayout.show();\n                    break;\n                default:\n                    selectLayerLayout.hide();\n                    break;\n            }\n        }\n        else {\n            selectLayerLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"condition\", {\n        // Condition\n        get: function () {\n            var _a;\n            return ((_a = this._condition) !== null && _a !== void 0 ? _a : (this._condition = this.newCondition()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newCondition = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputConditionLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeCondition = function (select) {\n        var condition = this.condition;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    condition.hide();\n                    break;\n                default:\n                    condition.show();\n                    break;\n            }\n        }\n        else {\n            condition.show();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"interval\", {\n        // Interval\n        get: function () {\n            var _a;\n            return ((_a = this._interval) !== null && _a !== void 0 ? _a : (this._interval = this.newInterval()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInterval = function () {\n        var _this = this;\n        return new DInputInteger({\n            weight: 1,\n            text: {\n                value: 1000\n            },\n            min: 0,\n            step: 100,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"intervalLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._intervalLayout) !== null && _a !== void 0 ? _a : (this._intervalLayout = this.newIntervalLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newIntervalLayout = function () {\n        var theme = this.theme;\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabel(theme.getInputIntervalLabel()),\n                this.interval,\n                new DText({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalUnitLabel(),\n                        align: {\n                            horizontal: DAlignHorizontal.LEFT\n                        }\n                    }\n                })\n            ]\n        });\n    };\n    EDialogAction.prototype.onChangeIntervalLayout = function (select) {\n        var intervalLayout = this.intervalLayout;\n        if (select === EShapeActionValueType.BLINK) {\n            intervalLayout.show();\n        }\n        else {\n            intervalLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"size\", {\n        // Size\n        get: function () {\n            var _a;\n            return ((_a = this._size) !== null && _a !== void 0 ? _a : (this._size = this.newSize()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSize = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputSizeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeSize = function (select) {\n        var size = this.size;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.RESIZE) {\n                size.show();\n            }\n            else {\n                size.hide();\n            }\n        }\n        else {\n            size.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"amount\", {\n        // Move amount\n        get: function () {\n            var _a;\n            return ((_a = this._amount) !== null && _a !== void 0 ? _a : (this._amount = this.newAmount()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newAmount = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAmountLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeAmount = function (select) {\n        var amount = this.amount;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            var transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.MOVE ||\n                transformType === EShapeActionValueTransformType.ROTATE) {\n                amount.show();\n            }\n            else {\n                amount.hide();\n            }\n        }\n        else {\n            amount.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"contents\", {\n        // Value\n        get: function () {\n            var _a;\n            return ((_a = this._contents) !== null && _a !== void 0 ? _a : (this._contents = this.newContents()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newContents = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputValueLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeContents = function (select) {\n        var contents = this.contents;\n        switch (select) {\n            case EShapeActionValueType.CHANGE_TEXT:\n            case EShapeActionValueType.CHANGE_FILL_PERCENT:\n                contents.show();\n                break;\n            case EShapeActionValueType.MISC:\n                switch (this.miscType.value) {\n                    case EShapeActionValueMiscType.WRITE_BOTH:\n                    case EShapeActionValueMiscType.WRITE_LOCAL:\n                    case EShapeActionValueMiscType.WRITE_REMOTE:\n                        contents.show();\n                        break;\n                    default:\n                        contents.hide();\n                        break;\n                }\n                break;\n            default:\n                contents.hide();\n                break;\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"initialization\", {\n        // Initialization\n        get: function () {\n            var _a;\n            return ((_a = this._initialization) !== null && _a !== void 0 ? _a : (this._initialization = this.newInitialization()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInitialization = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitializationLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeInitialization = function (select) {\n        var initialization = this.initialization;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    initialization.show();\n                    break;\n                default:\n                    initialization.hide();\n                    break;\n            }\n        }\n        else {\n            initialization.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"pointerEventsLayout\", {\n        // Pointer events layout\n        get: function () {\n            var _a;\n            return ((_a = this._pointerEventsLayout) !== null && _a !== void 0 ? _a : (this._pointerEventsLayout = this.newLabeled(null, this.pointerEvents)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangePointerEventsLayout = function (select) {\n        var pointerEventsLayout = this.pointerEventsLayout;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    pointerEventsLayout.show();\n                    break;\n                default:\n                    pointerEventsLayout.hide();\n                    break;\n            }\n        }\n        else {\n            pointerEventsLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"pointerEvents\", {\n        // Pointer events\n        get: function () {\n            var _a;\n            return ((_a = this._pointerEvents) !== null && _a !== void 0 ? _a : (this._pointerEvents = this.newPointerEvents()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newPointerEvents = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckPointEventsLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"targetName\", {\n        // Event Name / Cursor name\n        get: function () {\n            var _a;\n            return ((_a = this._targetName) !== null && _a !== void 0 ? _a : (this._targetName = this.newTargetName()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newTargetName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputTargetNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeTargetName = function (select) {\n        var targetName = this.targetName;\n        if (select === EShapeActionValueType.EMIT_EVENT ||\n            select === EShapeActionValueType.CHANGE_CURSOR) {\n            targetName.show();\n        }\n        else {\n            targetName.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"color\", {\n        // Color\n        get: function () {\n            var _a;\n            return ((_a = this._color) !== null && _a !== void 0 ? _a : (this._color = this.newColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newColor = function () {\n        var result = new DButtonColor({\n            weight: 1\n        });\n        result.dialog.on(\"open\", function () {\n            var dialogNew = result.dialog.new;\n            var dialogCurrent = result.dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"colorLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._colorLayout) !== null && _a !== void 0 ? _a : (this._colorLayout = this.newColorLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newColorLayout = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getButtonColorLabel()\n                    }\n                }),\n                this.color,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogAction.prototype.onChangeColorLayout = function (select) {\n        var colorLayout = this.colorLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            var changeColorTarget = this.changeColorTarget.value;\n            if (changeColorTarget === EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.COLOR ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.ALPHA) {\n                colorLayout.show();\n            }\n            else {\n                colorLayout.hide();\n            }\n        }\n        else if (select === EShapeActionValueType.BLINK) {\n            var blinkType = this.blinkType.value;\n            if (blinkType === EShapeActionValueBlinkType.COLOR_FILL ||\n                blinkType === EShapeActionValueBlinkType.COLOR_STROKE) {\n                colorLayout.show();\n            }\n            else {\n                colorLayout.hide();\n            }\n        }\n        else {\n            colorLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"target\", {\n        // Target\n        get: function () {\n            var _a;\n            return ((_a = this._target) !== null && _a !== void 0 ? _a : (this._target = this.newTarget()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newTarget = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputTargetLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeTarget = function (select) {\n        var target = this.target;\n        if (select === EShapeActionValueType.OPEN) {\n            target.show();\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            var miscType = this.miscType.value;\n            if (miscType == null) {\n                target.show();\n            }\n            else if (miscType === EShapeActionValueMiscType.HTML_ELEMENT ||\n                miscType === EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS ||\n                EShapeActionValueMiscType.EXTENSION <= miscType) {\n                target.hide();\n            }\n            else {\n                target.show();\n            }\n        }\n        else {\n            target.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"argument\", {\n        // Argument\n        get: function () {\n            var _a;\n            return ((_a = this._argument) !== null && _a !== void 0 ? _a : (this._argument = this.newArgument()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newArgument = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputArgumentLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeArgument = function (select) {\n        var argument = this.argument;\n        if (select === EShapeActionValueType.OPEN) {\n            var openType = this.openType.value;\n            if (openType === EShapeActionValueOpenType.DIALOG) {\n                var openDialogType = this.openDialogType.value;\n                if (openDialogType == null) {\n                    argument.hide();\n                }\n                else if (EShapeActionValueOpenDialogType.EXTENSION <= openDialogType) {\n                    argument.show();\n                }\n                else {\n                    argument.hide();\n                }\n            }\n            else {\n                argument.hide();\n            }\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            var miscType = this.miscType.value;\n            if (miscType != null && EShapeActionValueMiscType.EXTENSION <= miscType) {\n                argument.show();\n            }\n            else {\n                argument.hide();\n            }\n        }\n        else {\n            argument.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"colorCode\", {\n        // Color code\n        get: function () {\n            var _a;\n            return ((_a = this._colorCode) !== null && _a !== void 0 ? _a : (this._colorCode = this.newColorCode()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newColorCode = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputColorCodeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeColorCode = function (select) {\n        var colorCode = this.colorCode;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.CODE) {\n                colorCode.show();\n            }\n            else {\n                colorCode.hide();\n            }\n        }\n        else {\n            colorCode.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"alphaCode\", {\n        // Alpha code\n        get: function () {\n            var _a;\n            return ((_a = this._alphaCode) !== null && _a !== void 0 ? _a : (this._alphaCode = this.newAlphaCode()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newAlphaCode = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAlphaCodeLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeAlphaCode = function (select) {\n        var alphaCode = this.alphaCode;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.CODE) {\n                alphaCode.show();\n            }\n            else {\n                alphaCode.hide();\n            }\n        }\n        else {\n            alphaCode.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"brightness\", {\n        // Brightness\n        get: function () {\n            var _a;\n            return ((_a = this._brightness) !== null && _a !== void 0 ? _a : (this._brightness = this.newBrightness()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBrightness = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputBrightnessLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeBrightness = function (select) {\n        var brightness = this.brightness;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.BRIGHTNESS) {\n                brightness.show();\n            }\n            else {\n                brightness.hide();\n            }\n        }\n        else {\n            brightness.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"blend\", {\n        // Blend\n        get: function () {\n            var _a;\n            return ((_a = this._blend) !== null && _a !== void 0 ? _a : (this._blend = this.newBlend()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBlend = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputBlendLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeBlend = function (select) {\n        var blend = this.blend;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            var changeColorTarget = this.changeColorTarget.value;\n            if (changeColorTarget === EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.COLOR ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.CODE) {\n                blend.show();\n            }\n            else {\n                blend.hide();\n            }\n        }\n        else {\n            blend.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"initial\", {\n        // Initial\n        get: function () {\n            var _a;\n            return ((_a = this._initial) !== null && _a !== void 0 ? _a : (this._initial = this.newInitial()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInitial = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeInitial = function (select) {\n        var initial = this.initial;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.TEXT:\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                        case EShapeActionValueOpenDialogType.BOOLEAN:\n                        case EShapeActionValueOpenDialogType.DATE:\n                        case EShapeActionValueOpenDialogType.TIME:\n                        case EShapeActionValueOpenDialogType.DATETIME:\n                            initial.show();\n                            break;\n                        default:\n                            initial.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    initial.hide();\n                    break;\n            }\n        }\n        else {\n            initial.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"step\", {\n        get: function () {\n            var _a;\n            return ((_a = this._step) !== null && _a !== void 0 ? _a : (this._step = this.newStep()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newStep = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputStepLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeStep = function (select) {\n        var step = this.step;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            step.show();\n                            break;\n                        default:\n                            step.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    step.hide();\n                    break;\n            }\n        }\n        else {\n            step.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"min\", {\n        get: function () {\n            var _a;\n            return ((_a = this._min) !== null && _a !== void 0 ? _a : (this._min = this.newMin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMin = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputMinLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeMin = function (select) {\n        var min = this.min;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            min.show();\n                            break;\n                        default:\n                            min.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    min.hide();\n                    break;\n            }\n        }\n        else {\n            min.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"max\", {\n        get: function () {\n            var _a;\n            return ((_a = this._max) !== null && _a !== void 0 ? _a : (this._max = this.newMax()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMax = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputMaxLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeMax = function (select) {\n        var max = this.max;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            max.show();\n                            break;\n                        default:\n                            max.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    max.hide();\n                    break;\n            }\n        }\n        else {\n            max.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"scaleLayout\", {\n        // Scale layout\n        get: function () {\n            var _a;\n            return ((_a = this._scaleLayout) !== null && _a !== void 0 ? _a : (this._scaleLayout = this.newScaleLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newScaleLayout = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getInputScaleLabel()\n                    }\n                }),\n                this.scaleMin,\n                this.scaleMax,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogAction.prototype.onChangeScaleLayout = function (select) {\n        var scaleLayout = this.scaleLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            scaleLayout.show();\n        }\n        else {\n            scaleLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"scaleMin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._scaleMin) !== null && _a !== void 0 ? _a : (this._scaleMin = this.newScaleMin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newScaleMin = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"scaleMax\", {\n        // Scale max\n        get: function () {\n            var _a;\n            return ((_a = this._scaleMax) !== null && _a !== void 0 ? _a : (this._scaleMax = this.newScaleMax()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newScaleMax = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"checkBringToFront\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkBringToFront) !== null && _a !== void 0 ? _a : (this._checkBringToFront = this.newCheckBringToFront()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newCheckBringToFront = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBringToFrontLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"checkBringToFrontLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkBringToFrontLayout) !== null && _a !== void 0 ? _a : (this._checkBringToFrontLayout = this.newLabeled(null, this.checkBringToFront)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeCheckBringToFrontLayout = function (select) {\n        var checkBringToFrontLayout = this.checkBringToFrontLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            switch (this.showHideType.value) {\n                case EShapeActionValueShowHideType.LAYER:\n                    checkBringToFrontLayout.show();\n                    break;\n                default:\n                    checkBringToFrontLayout.hide();\n                    break;\n            }\n        }\n        else {\n            checkBringToFrontLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"inNewWindow\", {\n        // inNewWindow\n        get: function () {\n            var _a;\n            return ((_a = this._inNewWindow) !== null && _a !== void 0 ? _a : (this._inNewWindow = this.newInNewWindow()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInNewWindow = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckInNewWindowLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"inNewWindowLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inNewWindowLayout) !== null && _a !== void 0 ? _a : (this._inNewWindowLayout = this.newLabeled(null, this.inNewWindow)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeInNewWindowLayout = function (select) {\n        var inNewWindowLayout = this.inNewWindowLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    inNewWindowLayout.hide();\n                    break;\n                default:\n                    inNewWindowLayout.show();\n                    break;\n            }\n        }\n        else {\n            inNewWindowLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"extension\", {\n        get: function () {\n            var _a;\n            return ((_a = this._extension) !== null && _a !== void 0 ? _a : (this._extension = new EDialogActionExtensionContainer(this, this.condition, this.content)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChange = function () {\n        var select = this.select.value;\n        this.onChangeAlphaCode(select);\n        this.onChangeAmount(select);\n        this.onChangeBlend(select);\n        this.onChangeBlinkTypeLayout(select);\n        this.onChangeBrightness(select);\n        this.onChangeChangeColorTargetLayout(select);\n        this.onChangeChangeColorTypeLayout(select);\n        this.onChangeChangeTextTypeLayout(select);\n        this.onChangeCondition(select);\n        this.onChangeColorCode(select);\n        this.onChangeColorLayout(select);\n        this.onChangeInitial(select);\n        this.onChangeStep(select);\n        this.onChangeMin(select);\n        this.onChangeMax(select);\n        this.onChangeIntervalLayout(select);\n        this.onChangeMiscTypeLayout(select);\n        this.onChangeMoveTypeLayout(select);\n        this.onChangeOnInputActionLayout(select);\n        this.onChangeWhenTypeLayout(select);\n        this.onChangeGestureTypeLayout(select);\n        this.onChangeGestureOperationTypeLayout(select);\n        this.onChangeSelectLayerLayout(select);\n        this.onChangeOpenTypeLayout(select);\n        this.onChangeOpenDialogTypeLayout(select);\n        this.onChangeOriginXLayout(select);\n        this.onChangeOriginYLayout(select);\n        this.onChangeResizeTypeLayout(select);\n        this.onChangeRotateTypeLayout(select);\n        this.onChangeShowHideTypeLayout(select);\n        this.onChangeSize(select);\n        this.onChangeTarget(select);\n        this.onChangeArgument(select);\n        this.onChangeTargetName(select);\n        this.onChangeContents(select);\n        this.onChangeInitialization(select);\n        this.onChangePointerEventsLayout(select);\n        this.onChangeTransformTypeLayout(select);\n        this.onChangeScaleLayout(select);\n        this.onChangeCheckBringToFrontLayout(select);\n        this.onChangeInNewWindowLayout(select);\n        this.extension.onChange(select);\n    };\n    EDialogAction.prototype.reset = function () {\n        this.select.value = EShapeActionValueType.SHOW_HIDE;\n        this.showHideType.value = EShapeActionValueShowHideType.SHAPE;\n        this.blinkType.value = EShapeActionValueBlinkType.VISIBILITY;\n        this.transformType.value = EShapeActionValueTransformType.MOVE;\n        this.changeColorType.values = [EShapeActionValueChangeColorType.FILL];\n        this.changeColorTarget.value = EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA;\n        this.resizeType.value = EShapeActionValueTransformResizeType.RELATIVE_SIZE;\n        this.originY.value = 0.5;\n        this.originX.value = 0.5;\n        this.moveType.value = EShapeActionValueTransformMoveType.RELATIVE_X;\n        this.rotateType.value = EShapeActionValueTransformRotateType.RELATIVE;\n        this.openType.value = EShapeActionValueOpenType.DIAGRAM;\n        this.openDialogType.value = EShapeActionValueOpenDialogType.TEXT;\n        this.changeTextType.value = EShapeActionValueChangeTextType.TEXT;\n        this.miscType.value = EShapeActionValueMiscType.INPUT_TEXT;\n        this.onInputAction.value = EShapeActionValueOnInputAction.WRITE_REMOTE;\n        this.whenType.value = UtilHtmlElementWhen.FOCUSED;\n        this.gestureType.value = EShapeActionValueGestureType.SHAPE;\n        this.gestureOperationType.values = this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL);\n        this.selectLayer.values = [];\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        this.condition.input.value = \"\";\n        this.size.input.value = \"\";\n        this.amount.input.value = \"\";\n        this.contents.input.value = \"\";\n        this.initialization.input.value = \"\";\n        this.pointerEvents.state.isActive = true;\n        this.targetName.input.value = \"\";\n        this.interval.value = 1000;\n        this.color.value.color = 0xffffff;\n        this.color.value.alpha = 1;\n        this.target.input.value = \"\";\n        this.argument.input.value = \"\";\n        this.colorCode.input.value = \"\";\n        this.alphaCode.input.value = \"\";\n        this.brightness.input.value = \"\";\n        this.blend.input.value = \"\";\n        this.initial.input.value = \"\";\n        this.step.input.value = \"\";\n        this.min.input.value = \"\";\n        this.max.input.value = \"\";\n        this.scaleMin.value = 0.05;\n        this.scaleMax.value = 20;\n        this.checkBringToFront.state.isActive = false;\n        this.inNewWindow.state.isActive = false;\n        this.extension.reset();\n        this.onChange();\n        return this;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"value\", {\n        get: function () {\n            var _a, _b, _c, _d;\n            var select = this.select.value;\n            var condition = this.condition.input.value;\n            if (select != null) {\n                switch (select) {\n                    case EShapeActionValueType.SHOW_HIDE:\n                        switch (this.showHideType.value) {\n                            case EShapeActionValueShowHideType.SHAPE:\n                            case null:\n                                return new EShapeActionValueShowHideShape(condition);\n                            case EShapeActionValueShowHideType.LAYER:\n                                return new EShapeActionValueShowHideLayer(condition, this.selectLayer.values.slice(0), this.checkBringToFront.state.isActive);\n                        }\n                        break;\n                    case EShapeActionValueType.BLINK:\n                        var blinkType = this.blinkType.value || EShapeActionValueBlinkType.VISIBILITY;\n                        var interval = this.interval.value;\n                        var blinkColor = this.color.value;\n                        return new EShapeActionValueBlink(blinkType, condition, interval, blinkColor.color, blinkColor.alpha);\n                    case EShapeActionValueType.CHANGE_COLOR:\n                        var changeColorType = EShapeActionValueChangeColorTypes.pack(this.changeColorType.values);\n                        var changeColorTarget = this.changeColorTarget.value ||\n                            EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA;\n                        switch (changeColorTarget) {\n                            case EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\n                            case EShapeActionValueChangeColorTarget.COLOR:\n                            case EShapeActionValueChangeColorTarget.ALPHA:\n                                var changeColor = this.color.value;\n                                return new EShapeActionValueChangeColor(changeColorType, condition, changeColorTarget, changeColor.color, changeColor.alpha, this.blend.input.value);\n                            case EShapeActionValueChangeColorTarget.CODE:\n                                return new EShapeActionValueChangeColorCode(changeColorType, condition, this.colorCode.input.value, this.alphaCode.input.value, this.blend.input.value);\n                            case EShapeActionValueChangeColorTarget.BRIGHTNESS:\n                                return new EShapeActionValueChangeColorBrightness(changeColorType, condition, this.brightness.input.value);\n                        }\n                        break;\n                    case EShapeActionValueType.TRANSFORM:\n                        var transformType = this.transformType.value;\n                        var originX = this.originX.value;\n                        var originY = this.originY.value;\n                        switch (transformType) {\n                            case EShapeActionValueTransformType.RESIZE:\n                                var resizeType = this.resizeType.value ||\n                                    EShapeActionValueTransformResizeType.RELATIVE_SIZE;\n                                return new EShapeActionValueTransformResize(resizeType, condition, originX, originY, this.size.input.value);\n                            case EShapeActionValueTransformType.MOVE:\n                                var moveType = this.moveType.value ||\n                                    EShapeActionValueTransformMoveType.RELATIVE_X;\n                                return new EShapeActionValueTransformMove(moveType, condition, this.amount.input.value);\n                            case EShapeActionValueTransformType.ROTATE:\n                                var rotateType = this.rotateType.value ||\n                                    EShapeActionValueTransformRotateType.RELATIVE;\n                                return new EShapeActionValueTransformRotate(rotateType, condition, originX, originY, this.amount.input.value);\n                        }\n                        break;\n                    case EShapeActionValueType.CHANGE_FILL_PERCENT:\n                        return new EShapeActionValueChangeFillPercent(condition, this.contents.input.value);\n                    case EShapeActionValueType.CHANGE_TEXT:\n                        var changeTextType = this.changeTextType.value || EShapeActionValueChangeTextType.TEXT;\n                        return new EShapeActionValueChangeText(changeTextType, condition, this.contents.input.value);\n                    case EShapeActionValueType.OPEN:\n                        var openType = (_a = this.openType.value) !== null && _a !== void 0 ? _a : EShapeActionValueOpenType.DIAGRAM;\n                        switch (openType) {\n                            case EShapeActionValueOpenType.DIALOG:\n                                var openDialogType = (_b = this.openDialogType.value) !== null && _b !== void 0 ? _b : EShapeActionValueOpenDialogType.TEXT;\n                                switch (openDialogType) {\n                                    case EShapeActionValueOpenDialogType.INTEGER:\n                                    case EShapeActionValueOpenDialogType.REAL:\n                                        return new EShapeActionValueOpenDialog(condition, this.target.input.value, (_c = this.onInputAction.value) !== null && _c !== void 0 ? _c : EShapeActionValueOnInputAction.EMIT_EVENT, this.initial.input.value, this.step.input.value, this.min.input.value, this.max.input.value, openDialogType);\n                                    case EShapeActionValueOpenDialogType.TEXT:\n                                    case EShapeActionValueOpenDialogType.BOOLEAN:\n                                    case EShapeActionValueOpenDialogType.DATE:\n                                    case EShapeActionValueOpenDialogType.TIME:\n                                    case EShapeActionValueOpenDialogType.DATETIME:\n                                        return new EShapeActionValueOpenDialog(condition, this.target.input.value, (_d = this.onInputAction.value) !== null && _d !== void 0 ? _d : EShapeActionValueOnInputAction.EMIT_EVENT, this.initial.input.value, \"\", \"\", \"\", openDialogType);\n                                    default:\n                                        return new EShapeActionValueOpenDialogExtension(condition, this.target.input.value, this.argument.input.value, openDialogType);\n                                }\n                            case EShapeActionValueOpenType.DIAGRAM:\n                            case EShapeActionValueOpenType.PAGE:\n                                return new EShapeActionValueOpen(openType, condition, this.target.input.value, this.inNewWindow.state.isActive);\n                            default:\n                                return new EShapeActionValueOpenExtension(openType, condition, this.target.input.value, this.inNewWindow.state.isActive);\n                        }\n                    case EShapeActionValueType.EMIT_EVENT:\n                        return new EShapeActionValueEmitEvent(condition, this.targetName.input.value);\n                    case EShapeActionValueType.CHANGE_CURSOR:\n                        return new EShapeActionValueChangeCursor(condition, this.targetName.input.value);\n                    case EShapeActionValueType.GESTURE:\n                        return new EShapeActionValueGesture(condition, this.gestureType.value || EShapeActionValueGestureType.SHAPE, this.toGestureOperationType(this.gestureOperationType.values), this.scaleMin.value, this.scaleMax.value);\n                    case EShapeActionValueType.MISC:\n                        var miscType = this.miscType.value || EShapeActionValueMiscType.INPUT_TEXT;\n                        switch (miscType) {\n                            case EShapeActionValueMiscType.INPUT_TEXT:\n                            case EShapeActionValueMiscType.INPUT_REAL:\n                            case EShapeActionValueMiscType.INPUT_INTEGER:\n                                return new EShapeActionValueMiscInput(miscType, this.toWhenTypeValue(this.whenType.value), this.target.input.value, this.onInputAction.value ||\n                                    EShapeActionValueOnInputAction.EMIT_EVENT);\n                            case EShapeActionValueMiscType.EMIT_EVENT:\n                                return new EShapeActionValueMiscEmitEvent(condition, this.target.input.value);\n                            case EShapeActionValueMiscType.WRITE_BOTH:\n                            case EShapeActionValueMiscType.WRITE_LOCAL:\n                            case EShapeActionValueMiscType.WRITE_REMOTE:\n                                return new EShapeActionValueMiscWrite(miscType, condition, this.target.input.value, this.contents.input.value);\n                            case EShapeActionValueMiscType.HTML_ELEMENT:\n                                if (this.pointerEvents.state.isActive) {\n                                    return new EShapeActionValueMiscHtmlElement(miscType, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                                }\n                                else {\n                                    return new EShapeActionValueMiscHtmlElement(EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                                }\n                            case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                                return new EShapeActionValueMiscHtmlElement(miscType, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                            case EShapeActionValueMiscType.EXECUTE:\n                                return new EShapeActionValueMiscExecute(condition, this.target.input.value);\n                            default:\n                                if (EShapeActionValueMiscType.EXTENSION <= miscType) {\n                                    return new EShapeActionValueMiscExtension(miscType, condition, this.argument.input.value);\n                                }\n                        }\n                        break;\n                    default:\n                        return this.extension.value;\n                }\n            }\n            return null;\n        },\n        set: function (value) {\n            this.selectLayer.menu = new DMenu({\n                fit: true,\n                items: this.newSelectLayerMenuItemOptions()\n            });\n            if (value != null) {\n                this.select.value = value.type;\n                if (value instanceof EShapeActionValueShowHide) {\n                    this.condition.input.value = value.condition;\n                    this.showHideType.value = EShapeActionValueShowHideType.SHAPE;\n                }\n                else if (value instanceof EShapeActionValueShowHideShape) {\n                    this.condition.input.value = value.condition;\n                    this.showHideType.value = value.subtype;\n                }\n                else if (value instanceof EShapeActionValueShowHideLayer) {\n                    this.condition.input.value = value.condition;\n                    this.showHideType.value = value.subtype;\n                    this.selectLayer.values = value.layers.slice(0);\n                    this.checkBringToFront.state.isActive = value.bringToFront;\n                }\n                else if (value instanceof EShapeActionValueBlink) {\n                    this.condition.input.value = value.condition;\n                    this.blinkType.value = value.subtype;\n                    this.interval.value = value.interval;\n                    this.color.value.color = value.color;\n                    this.color.value.alpha = value.alpha;\n                }\n                else if (value instanceof EShapeActionValueChangeColor) {\n                    this.condition.input.value = value.condition;\n                    this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                    this.changeColorTarget.value = value.target;\n                    this.color.value.color = value.color;\n                    this.color.value.alpha = value.alpha;\n                    this.blend.input.value = value.blend;\n                }\n                else if (value instanceof EShapeActionValueChangeColorCode) {\n                    this.condition.input.value = value.condition;\n                    this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                    this.changeColorTarget.value = EShapeActionValueChangeColorTarget.CODE;\n                    this.colorCode.input.value = value.color;\n                    this.alphaCode.input.value = value.alpha;\n                    this.blend.input.value = value.blend;\n                }\n                else if (value instanceof EShapeActionValueChangeColorBrightness) {\n                    this.condition.input.value = value.condition;\n                    this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                    this.changeColorTarget.value = EShapeActionValueChangeColorTarget.BRIGHTNESS;\n                    this.brightness.input.value = value.brightness;\n                }\n                else if (value instanceof EShapeActionValueTransformResize) {\n                    this.condition.input.value = value.condition;\n                    this.transformType.value = EShapeActionValueTransformType.RESIZE;\n                    this.resizeType.value = value.opetype;\n                    this.originX.value = value.originX;\n                    this.originY.value = value.originY;\n                    this.size.input.value = value.amount;\n                }\n                else if (value instanceof EShapeActionValueTransformMove) {\n                    this.condition.input.value = value.condition;\n                    this.transformType.value = EShapeActionValueTransformType.MOVE;\n                    this.moveType.value = value.opetype;\n                    this.amount.input.value = value.amount;\n                }\n                else if (value instanceof EShapeActionValueTransformRotate) {\n                    this.condition.input.value = value.condition;\n                    this.transformType.value = EShapeActionValueTransformType.ROTATE;\n                    this.rotateType.value = value.opetype;\n                    this.originX.value = value.originX;\n                    this.originY.value = value.originY;\n                    this.amount.input.value = value.amount;\n                }\n                else if (value instanceof EShapeActionValueChangeFillPercent) {\n                    this.condition.input.value = value.condition;\n                    this.contents.input.value = value.value;\n                }\n                else if (value instanceof EShapeActionValueChangeText) {\n                    this.condition.input.value = value.condition;\n                    this.changeTextType.value = value.subtype;\n                    this.contents.input.value = value.value;\n                }\n                else if (value instanceof EShapeActionValueOpen) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.inNewWindow.state.isActive = value.inNewWindow;\n                }\n                else if (value instanceof EShapeActionValueOpenDialog) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.onInputAction.value = value.onInputAction;\n                    this.initial.input.value = value.initial;\n                    this.step.input.value = value.step;\n                    this.min.input.value = value.min;\n                    this.max.input.value = value.max;\n                    this.openDialogType.value = value.dialogType;\n                }\n                else if (value instanceof EShapeActionValueOpenDialogExtension) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.argument.input.value = value.argument;\n                    this.openDialogType.value = value.dialogType;\n                }\n                else if (value instanceof EShapeActionValueOpenExtension) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.inNewWindow.state.isActive = value.inNewWindow;\n                }\n                else if (value instanceof EShapeActionValueEmitEvent) {\n                    this.condition.input.value = value.condition;\n                    this.targetName.input.value = value.name;\n                }\n                else if (value instanceof EShapeActionValueChangeCursor) {\n                    this.condition.input.value = value.condition;\n                    this.targetName.input.value = value.name;\n                }\n                else if (value instanceof EShapeActionValueGesture) {\n                    this.condition.input.value = value.condition;\n                    this.gestureType.value = value.subtype;\n                    this.gestureOperationType.values = this.fromGestureOperationType(value.operationType);\n                    this.scaleMin.value = value.scaleMin;\n                    this.scaleMax.value = value.scaleMax;\n                }\n                else if (value instanceof EShapeActionValueMisc) {\n                    switch (value.subtype) {\n                        case EShapeActionValueMiscType.INPUT_TEXT:\n                        case EShapeActionValueMiscType.INPUT_REAL:\n                        case EShapeActionValueMiscType.INPUT_INTEGER:\n                            this.miscType.value = value.subtype;\n                            this.whenType.value = this.toWhenType(value.condition);\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.contents.input.value = value.value;\n                            break;\n                        case EShapeActionValueMiscType.HTML_ELEMENT:\n                            this.miscType.value = EShapeActionValueMiscType.HTML_ELEMENT;\n                            this.whenType.value = this.toWhenType(value.condition);\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.initialization.input.value = value.value;\n                            this.pointerEvents.state.isActive = true;\n                            break;\n                        case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                            this.miscType.value = EShapeActionValueMiscType.HTML_ELEMENT;\n                            this.whenType.value = this.toWhenType(value.condition);\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.initialization.input.value = value.value;\n                            this.pointerEvents.state.isActive = false;\n                            break;\n                        default:\n                            this.condition.input.value = value.condition;\n                            this.miscType.value = value.subtype;\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.contents.input.value = value.value;\n                            break;\n                    }\n                }\n                else if (value instanceof EShapeActionValueMiscExecute) {\n                    this.miscType.value = EShapeActionValueMiscType.EXECUTE;\n                    this.condition.input.value = value.condition;\n                    this.target.input.value = value.target;\n                }\n                else if (value instanceof EShapeActionValueMiscExtension) {\n                    this.miscType.value = value.subtype;\n                    this.condition.input.value = value.condition;\n                    this.argument.input.value = value.argument;\n                }\n                else {\n                    this.extension.value = value;\n                }\n                this.onChange();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogAction.prototype.getType = function () {\n        return \"EDialogAction\";\n    };\n    return EDialogAction;\n}(DDialogLayered));\nexport { EDialogAction };\n//# sourceMappingURL=e-dialog-action.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputTextAndLabel, DLayoutSpace, DTable, EShapeDataMapperImpl, EShapeDataValueImpl, EShapeDataValueScope } from \"@wcardinal/wcardinal-ui\";\nvar EDialogDataMappingValue = /** @class */ (function (_super) {\n    __extends(EDialogDataMappingValue, _super);\n    function EDialogDataMappingValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogDataMappingValue.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.inputSource, this.inputDestination, this.inputInitial, new DLayoutSpace({\n            height: 6\n        }), this.table);\n        return result;\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"inputSource\", {\n        get: function () {\n            var result = this._inputSource;\n            if (result == null) {\n                result = this.newInputSource();\n                this._inputSource = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newInputSource = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    input: function (value) {\n                        _this.onInputSourceChanged(value);\n                    },\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputSourceLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogDataMappingValue.prototype.onInputSourceChanged = function (value) {\n        this._newSource = value;\n        this.updateRows();\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"inputDestination\", {\n        get: function () {\n            var result = this._inputDestination;\n            if (result == null) {\n                result = this.newInputDestination();\n                this._inputDestination = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newInputDestination = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    input: function (value) {\n                        _this.onInputDestinationChanged(value);\n                    },\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputDestinationLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogDataMappingValue.prototype.onInputDestinationChanged = function (value) {\n        this._newDestination = value;\n        this.updateRows();\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"inputInitial\", {\n        get: function () {\n            var result = this._inputInitial;\n            if (result == null) {\n                result = this.newInputInitial();\n                this._inputInitial = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newInputInitial = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"table\", {\n        get: function () {\n            var result = this._table;\n            if (result == null) {\n                result = this.newTable();\n                this._table = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newTable = function () {\n        return new DTable({\n            width: \"padding\",\n            height: 300,\n            columns: this.newColumnOptions()\n        });\n    };\n    EDialogDataMappingValue.prototype.newColumnOptions = function () {\n        var theme = this.theme;\n        return [\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnDataIdLabel(),\n                editable: false,\n                sortable: true,\n                getter: function (row) {\n                    return row.id;\n                }\n            },\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnMappedToLabel(),\n                editable: false,\n                sortable: true,\n                getter: function (row) {\n                    return row.mappedId;\n                }\n            }\n        ];\n    };\n    EDialogDataMappingValue.prototype.set = function (value, shape) {\n        var isChanged = false;\n        if (value !== undefined) {\n            if (value != null) {\n                this.inputSource.input.value = value[0];\n                this.inputDestination.input.value = value[1];\n                this.inputInitial.input.value = value[2];\n                this._newSource = value[0];\n                this._newDestination = value[1];\n            }\n            else {\n                this.inputSource.input.value = \"\";\n                this.inputDestination.input.value = \"\";\n                this.inputInitial.input.value = \"\";\n                this._newSource = \"\";\n                this._newDestination = \"\";\n            }\n            isChanged = true;\n        }\n        if (shape !== undefined) {\n            this._ids = this.toIds(shape);\n            isChanged = true;\n        }\n        if (isChanged) {\n            this.updateRows();\n        }\n        return this;\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"value\", {\n        get: function () {\n            return [\n                this.inputSource.input.value.trim(),\n                this.inputDestination.input.value.trim(),\n                this.inputInitial.input.value.trim()\n            ];\n        },\n        set: function (value) {\n            this.set(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogDataMappingValue.prototype.toIds = function (shape) {\n        var result = [];\n        if (shape != null) {\n            var ids = new Set();\n            this.newIds(shape.children, ids);\n            ids.forEach(function (id) {\n                result.push(id);\n            });\n            result.sort();\n        }\n        return result;\n    };\n    EDialogDataMappingValue.prototype.newIds = function (shapes, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var data = shape.data;\n            for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                var value = data.get(j);\n                if (value && value.scope !== EShapeDataValueScope.PRIVATE) {\n                    result.add(value.id);\n                }\n            }\n            var children = shape.children;\n            if (0 < children.length) {\n                this.newIds(children, result);\n            }\n        }\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"onUpdateRowsBound\", {\n        get: function () {\n            var result = this._onUpdateRowsBound;\n            if (result == null) {\n                result = this.newOnUpdateRowsBound();\n                this._onUpdateRowsBound = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newOnUpdateRowsBound = function () {\n        var _this = this;\n        return function () {\n            _this.onUpdateRows();\n        };\n    };\n    EDialogDataMappingValue.prototype.onUpdateRows = function () {\n        this._onUpdateRowsTimeout = undefined;\n        if (this._isRowsDirty) {\n            this._isRowsDirty = false;\n            this.table.data.clearAndAddAll(this.newRows());\n            this._onUpdateRowsTimeout = window.setTimeout(this.onUpdateRowsBound, 100);\n        }\n    };\n    EDialogDataMappingValue.prototype.newRows = function () {\n        var ids = this._ids;\n        if (ids == null || ids.length <= 0) {\n            return [];\n        }\n        // Source\n        var mapper = this._mapper;\n        var newSource = this._newSource;\n        if (mapper === undefined || this._lastSource !== newSource) {\n            this._lastSource = newSource;\n            if (newSource != null) {\n                var newSourceTrimmed = newSource.trim();\n                if (0 < newSourceTrimmed.length) {\n                    mapper = new EShapeDataMapperImpl(newSource);\n                }\n                else {\n                    mapper = null;\n                }\n            }\n            else {\n                mapper = null;\n            }\n        }\n        // Destination\n        var destinations = this._destinations;\n        var newDestination = this._newDestination;\n        if (destinations === undefined || this._lastDestination !== newDestination) {\n            this._lastDestination = newDestination;\n            destinations = EShapeDataMapperImpl.split(newDestination);\n        }\n        // Rows\n        var result = [];\n        if (mapper != null) {\n            var value = new EShapeDataValueImpl();\n            value.initial = \"\";\n            for (var i = 0, imax = ids.length; i < imax; ++i) {\n                var id = ids[i];\n                value.id = id;\n                if (mapper.map(value, destinations, \"\")) {\n                    result.push({\n                        id: id,\n                        mappedId: value.id\n                    });\n                }\n            }\n        }\n        else {\n            for (var i = 0, imax = ids.length; i < imax; ++i) {\n                var id = ids[i];\n                result.push({\n                    id: id,\n                    mappedId: id\n                });\n            }\n        }\n        return result;\n    };\n    EDialogDataMappingValue.prototype.updateRows = function () {\n        this._isRowsDirty = true;\n        if (this._onUpdateRowsTimeout == null) {\n            this.onUpdateRows();\n        }\n    };\n    EDialogDataMappingValue.prototype.getType = function () {\n        return \"EDialogDataMappingValue\";\n    };\n    return EDialogDataMappingValue;\n}(DDialogLayered));\nexport { EDialogDataMappingValue };\n//# sourceMappingURL=e-dialog-data-mapping-value.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputInteger, DInputIntegerAndLabel, DInputLabel, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DSelect, EShapeDataValueExtensions, EShapeDataValueImpl, EShapeDataValueOrder, EShapeDataValueRangeType, EShapeDataValueScope, EShapeDataValueType } from \"@wcardinal/wcardinal-ui\";\nvar EDialogDataValue = /** @class */ (function (_super) {\n    __extends(EDialogDataValue, _super);\n    function EDialogDataValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogDataValue.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.layoutType, this.layoutScope, this.inputId, this.inputAs, this.inputInitial, this.layoutInterval, this.inputFormat, this.layoutRangeType, this.inputRangeFrom, this.inputRangeTo, this.inputCapacity, this.layoutOrder);\n        return result;\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputId\", {\n        get: function () {\n            var result = this._inputId;\n            if (result == null) {\n                result = this.newInputId();\n                this._inputId = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputId = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputIdLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputAs\", {\n        get: function () {\n            var result = this._inputAs;\n            if (result == null) {\n                result = this.newInputAs();\n                this._inputAs = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputAs = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAsLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutType\", {\n        get: function () {\n            var result = this._layoutType;\n            if (result == null) {\n                result = this.newLayoutType();\n                this._layoutType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutType = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectTypeLabel()\n                    }\n                }),\n                this.selectType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectType\", {\n        get: function () {\n            var _this = this;\n            var result = this._selectType;\n            if (result == null) {\n                result = this.newSelectType();\n                result.on(\"change\", function () {\n                    _this.onChange();\n                });\n                this._selectType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueType.NUMBER,\n            menu: {\n                items: this.newSelectTypeItems()\n            }\n        });\n    };\n    EDialogDataValue.prototype.newSelectTypeItems = function () {\n        var theme = this.theme;\n        var result = [\n            {\n                value: EShapeDataValueType.BOOLEAN,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.BOOLEAN)\n                }\n            },\n            {\n                value: EShapeDataValueType.BOOLEAN_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.BOOLEAN_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.NUMBER,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.NUMBER)\n                }\n            },\n            {\n                value: EShapeDataValueType.NUMBER_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.NUMBER_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.STRING,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.STRING)\n                }\n            },\n            {\n                value: EShapeDataValueType.STRING_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.STRING_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.OBJECT,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.OBJECT)\n                }\n            },\n            {\n                value: EShapeDataValueType.OBJECT_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.OBJECT_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.TICKER,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.TICKER)\n                }\n            }\n        ];\n        EShapeDataValueExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutScope\", {\n        get: function () {\n            var result = this._layoutScope;\n            if (result == null) {\n                result = this.newLayoutScope();\n                this._layoutScope = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutScope = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectScopeLabel()\n                    }\n                }),\n                this.selectScope,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectScope\", {\n        get: function () {\n            var result = this._selectScope;\n            if (result == null) {\n                result = this.newSelectScope();\n                this._selectScope = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectScope = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueScope.PUBLIC,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueScope.PUBLIC,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PUBLIC)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueScope.PROTECTED,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PROTECTED)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueScope.PRIVATE,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PRIVATE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputInitial\", {\n        get: function () {\n            var result = this._inputInitial;\n            if (result == null) {\n                result = this.newInputInitial();\n                this._inputInitial = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputInitial = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutInterval\", {\n        get: function () {\n            var result = this._layoutInterval;\n            if (result == null) {\n                result = this.newLayoutInterval();\n                this._layoutInterval = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutInterval = function () {\n        var theme = this.theme;\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalLabel()\n                    }\n                }),\n                this.inputInterval,\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalUnitLabel(),\n                        align: {\n                            horizontal: \"LEFT\"\n                        }\n                    }\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputInterval\", {\n        get: function () {\n            var result = this._inputInterval;\n            if (result == null) {\n                result = this.newInputInterval();\n                this._inputInterval = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputInterval = function () {\n        var _this = this;\n        return new DInputInteger({\n            weight: 1,\n            text: {\n                value: 1000\n            },\n            step: 1,\n            min: 0,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputFormat\", {\n        get: function () {\n            var result = this._inputFormat;\n            if (result == null) {\n                result = this.newInputFormat();\n                this._inputFormat = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputFormat = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputFormatLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutRangeType\", {\n        get: function () {\n            var result = this._layoutRangeType;\n            if (result == null) {\n                result = this.newLayoutRangeType();\n                this._layoutRangeType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutRangeType = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectRangeTypeLabel()\n                    }\n                }),\n                this.selectRangeType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectRangeType\", {\n        get: function () {\n            var _this = this;\n            var result = this._selectRangeType;\n            if (result == null) {\n                result = this.newSelectRangeType();\n                result.on(\"change\", function () {\n                    _this.onChange();\n                });\n                this._selectRangeType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectRangeType = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueRangeType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueRangeType.NONE,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.FROM,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.FROM)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.TO,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.TO)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.FROM_TO,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.FROM_TO)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputRangeFrom\", {\n        get: function () {\n            var result = this._inputRangeFrom;\n            if (result == null) {\n                result = this.newInputRangeFrom();\n                this._inputRangeFrom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputRangeFrom = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 90,\n                text: {\n                    value: this.theme.getInputRangeFromLabel()\n                }\n            },\n            space: {\n                width: 90\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputRangeTo\", {\n        get: function () {\n            var result = this._inputRangeTo;\n            if (result == null) {\n                result = this.newInputRangeTo();\n                this._inputRangeTo = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputRangeTo = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            input: {\n                weight: 1,\n                text: {\n                    value: 1\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 90,\n                text: {\n                    value: this.theme.getInputRangeToLabel()\n                }\n            },\n            space: {\n                width: 90\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputCapacity\", {\n        get: function () {\n            var result = this._inputCapacity;\n            if (result == null) {\n                result = this.newInputCapacity();\n                this._inputCapacity = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputCapacity = function () {\n        var _this = this;\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputCapacityLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutOrder\", {\n        get: function () {\n            var result = this._layoutOrder;\n            if (result == null) {\n                result = this.newLayoutOrder();\n                this._layoutOrder = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutOrder = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectOrderLabel()\n                    }\n                }),\n                this.selectOrder,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectOrder\", {\n        get: function () {\n            var result = this._selectOrder;\n            if (result == null) {\n                result = this.newSelectOrder();\n                this._selectOrder = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectOrder = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueOrder.ASCENDING,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueOrder.ASCENDING,\n                        text: {\n                            value: theme.getSelectOrderValueLabel(EShapeDataValueOrder.ASCENDING)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueOrder.DESCENDING,\n                        text: {\n                            value: theme.getSelectOrderValueLabel(EShapeDataValueOrder.DESCENDING)\n                        }\n                    }\n                ]\n            },\n            on: {\n                init: function (self) {\n                    _this._selectOrder = self;\n                }\n            }\n        });\n    };\n    EDialogDataValue.prototype.onChange = function () {\n        var type = this.selectType.value;\n        switch (type) {\n            case EShapeDataValueType.BOOLEAN:\n            case EShapeDataValueType.BOOLEAN_ARRAY:\n            case EShapeDataValueType.NUMBER:\n            case EShapeDataValueType.NUMBER_ARRAY:\n            case EShapeDataValueType.STRING:\n            case EShapeDataValueType.STRING_ARRAY:\n            case EShapeDataValueType.OBJECT:\n            case EShapeDataValueType.OBJECT_ARRAY:\n                this.layoutScope.show();\n                this.inputId.show();\n                this.inputAs.show();\n                this.inputInitial.show();\n                this.layoutInterval.hide();\n                this.inputFormat.show();\n                if (type === EShapeDataValueType.NUMBER) {\n                    this.layoutRangeType.show();\n                    var rangeType = this.selectRangeType.value;\n                    if (rangeType != null && (rangeType & EShapeDataValueRangeType.FROM) !== 0) {\n                        this.inputRangeFrom.show();\n                    }\n                    else {\n                        this.inputRangeFrom.hide();\n                    }\n                    if (rangeType != null && (rangeType & EShapeDataValueRangeType.TO) !== 0) {\n                        this.inputRangeTo.show();\n                    }\n                    else {\n                        this.inputRangeTo.hide();\n                    }\n                }\n                else {\n                    this.layoutRangeType.hide();\n                    this.inputRangeFrom.hide();\n                    this.inputRangeTo.hide();\n                }\n                break;\n            case EShapeDataValueType.TICKER:\n                this.layoutScope.hide();\n                this.inputId.hide();\n                this.inputAs.show();\n                this.inputInitial.hide();\n                this.layoutInterval.show();\n                this.inputFormat.hide();\n                this.layoutRangeType.hide();\n                this.inputRangeFrom.hide();\n                this.inputRangeTo.hide();\n                break;\n            default:\n                this.layoutScope.hide();\n                this.inputId.hide();\n                this.inputAs.show();\n                this.inputInitial.hide();\n                this.layoutInterval.hide();\n                this.inputFormat.hide();\n                this.layoutRangeType.hide();\n                this.inputRangeFrom.hide();\n                this.inputRangeTo.hide();\n                break;\n        }\n    };\n    EDialogDataValue.prototype.reset = function () {\n        this.selectType.value = EShapeDataValueType.NUMBER;\n        this.selectScope.value = EShapeDataValueScope.PUBLIC;\n        this.inputId.input.value = \"\";\n        this.inputAs.input.value = \"\";\n        this.inputInitial.input.value = \"\";\n        this.inputInterval.value = 1000;\n        this.inputFormat.input.value = \"\";\n        this.selectRangeType.value = EShapeDataValueRangeType.NONE;\n        this.inputRangeFrom.input.value = 0;\n        this.inputRangeTo.input.value = 1;\n        this.inputCapacity.input.value = 0;\n        this.selectOrder.value = EShapeDataValueOrder.ASCENDING;\n        this.onChange();\n        return this;\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"value\", {\n        get: function () {\n            var _a, _b, _c, _d;\n            var result = new EShapeDataValueImpl();\n            var type = (_a = this.selectType.value) !== null && _a !== void 0 ? _a : EShapeDataValueType.NUMBER;\n            var scope = (_b = this.selectScope.value) !== null && _b !== void 0 ? _b : EShapeDataValueScope.PUBLIC;\n            var order = (_c = this.selectOrder.value) !== null && _c !== void 0 ? _c : EShapeDataValueOrder.ASCENDING;\n            result.type = type;\n            switch (type) {\n                case EShapeDataValueType.BOOLEAN:\n                case EShapeDataValueType.BOOLEAN_ARRAY:\n                case EShapeDataValueType.NUMBER:\n                case EShapeDataValueType.NUMBER_ARRAY:\n                case EShapeDataValueType.STRING:\n                case EShapeDataValueType.STRING_ARRAY:\n                case EShapeDataValueType.OBJECT:\n                case EShapeDataValueType.OBJECT_ARRAY:\n                    result.scope = scope;\n                    result.id = this.inputId.input.value.trim();\n                    result.as = this.inputAs.input.value.trim();\n                    result.initial = this.inputInitial.input.value.trim();\n                    result.format = this.inputFormat.input.value.trim();\n                    if (type === EShapeDataValueType.NUMBER) {\n                        result.range.type = (_d = this.selectRangeType.value) !== null && _d !== void 0 ? _d : EShapeDataValueRangeType.NONE;\n                        result.range.from = this.inputRangeFrom.input.value;\n                        result.range.to = this.inputRangeTo.input.value;\n                    }\n                    else {\n                        result.range.type = EShapeDataValueRangeType.NONE;\n                        result.range.from = 0;\n                        result.range.to = 1;\n                    }\n                    result.order = order;\n                    break;\n                case EShapeDataValueType.TICKER:\n                    result.scope = EShapeDataValueScope.PUBLIC;\n                    result.id = \"\";\n                    result.as = this.inputAs.input.value.trim();\n                    result.initial = \"\".concat(this.inputInterval.value);\n                    result.format = \"\";\n                    result.range.type = EShapeDataValueRangeType.NONE;\n                    result.range.from = 0;\n                    result.range.to = 1;\n                    result.order = order;\n                    break;\n                default:\n                    result.scope = EShapeDataValueScope.PUBLIC;\n                    result.id = \"\";\n                    result.as = this.inputAs.input.value.trim();\n                    result.initial = \"\";\n                    result.format = \"\";\n                    result.range.type = EShapeDataValueRangeType.NONE;\n                    result.range.from = 0;\n                    result.range.to = 1;\n                    result.order = order;\n                    break;\n            }\n            return result;\n        },\n        set: function (value) {\n            if (value != null) {\n                this.selectType.value = value.type;\n                this.selectScope.value = value.scope;\n                this.inputId.input.value = value.id;\n                this.inputAs.input.value = value.as;\n                if (value.type === EShapeDataValueType.TICKER) {\n                    this.inputInitial.input.value = \"\";\n                    this.inputInterval.value = this.toInterval(value.initial);\n                }\n                else {\n                    this.inputInitial.input.value = value.initial;\n                    this.inputInterval.value = 1000;\n                }\n                this.inputFormat.input.value = value.format;\n                this.selectRangeType.value = value.range.type;\n                this.inputRangeFrom.input.value = value.range.from;\n                this.inputRangeTo.input.value = value.range.to;\n                this.inputCapacity.input.value = value.capacity;\n                this.selectOrder.value = value.order;\n                this.onChange();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.toInterval = function (target) {\n        try {\n            var result = parseInt(target, 10);\n            if (result === result) {\n                return Math.max(0, result);\n            }\n        }\n        catch (_a) {\n            // DO NOTHING\n        }\n        return 1000;\n    };\n    EDialogDataValue.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogDataValue.prototype.getType = function () {\n        return \"EDialogDataValue\";\n    };\n    return EDialogDataValue;\n}(DDialogLayered));\nexport { EDialogDataValue };\n//# sourceMappingURL=e-dialog-data-value.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheck, DButtonColor, DDialogLayered, DInputLabel, DInputReal, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DSelectMultiple, EShapeActionValueGestureOperationType } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValue } from \"./e-dialog-layer-value\";\nimport { EDialogLayerValueBackground } from \"./e-dialog-layer-value-background\";\nvar EDialogLayer = /** @class */ (function (_super) {\n    __extends(EDialogLayer, _super);\n    function EDialogLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogLayer.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.inputName, this.inputPositionLayout, this.inputSizeLayout, this.checkBackgroundLayout, this.colorBackgroundLayout, this.selectGestureLayout, this.checkVisibleLayout, this.checkInteractiveLayout);\n        return result;\n    };\n    EDialogLayer.prototype.newLabel = function (label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    };\n    EDialogLayer.prototype.newSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    EDialogLayer.prototype.newLabeled = function (label, inputA, inputB) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                inputA,\n                inputB,\n                this.newSpace()\n            ]\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputName\", {\n        get: function () {\n            var result = this._inputName;\n            if (result == null) {\n                result = this.newInputName();\n                this._inputName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputX\", {\n        get: function () {\n            var result = this._inputX;\n            if (result == null) {\n                result = this.newInputX();\n                this._inputX = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputY\", {\n        get: function () {\n            var result = this._inputY;\n            if (result == null) {\n                result = this.newInputY();\n                this._inputY = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputPositionLayout\", {\n        get: function () {\n            var result = this._inputPositionLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getInputPositionLabel(), this.inputX, this.inputY);\n                this._inputPositionLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"inputWidth\", {\n        get: function () {\n            var result = this._inputWidth;\n            if (result == null) {\n                result = this.newInputWidth();\n                this._inputWidth = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputWidth = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputHeight\", {\n        get: function () {\n            var result = this._inputHeight;\n            if (result == null) {\n                result = this.newInputHeight();\n                this._inputHeight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputHeight = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputSizeLayout\", {\n        get: function () {\n            var result = this._inputSizeLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getInputSizeLabel(), this.inputWidth, this.inputHeight);\n                this._inputSizeLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"checkBackground\", {\n        get: function () {\n            var result = this._checkBackground;\n            if (result == null) {\n                result = this.newCheckBackground();\n                this._checkBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newCheckBackground = function () {\n        var _this = this;\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBackgroundLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            },\n            on: {\n                active: function () {\n                    _this.onCheckBackgroundChange(true);\n                },\n                inactive: function () {\n                    _this.onCheckBackgroundChange(false);\n                }\n            }\n        });\n    };\n    EDialogLayer.prototype.onCheckBackgroundChange = function (isActive) {\n        this.colorBackground.state.isDisabled = !isActive;\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"checkBackgroundLayout\", {\n        get: function () {\n            var result = this._checkBackgroundLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getTextBackgroundLabel(), this.checkBackground, null);\n                this._checkBackgroundLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"colorBackground\", {\n        get: function () {\n            var result = this._colorBackground;\n            if (result == null) {\n                result = this.newColorBackground();\n                this._colorBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newColorBackground = function () {\n        return new DButtonColor({\n            weight: 1\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"colorBackgroundLayout\", {\n        get: function () {\n            var result = this._colorBackgroundLayout;\n            if (result == null) {\n                result = this.newLabeled(null, this.colorBackground, null);\n                this._colorBackgroundLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"checkVisible\", {\n        get: function () {\n            var result = this._checkVisible;\n            if (result == null) {\n                result = this.newCheckVisible();\n                this._checkVisible = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newCheckVisible = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckVisibleLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"checkVisibleLayout\", {\n        get: function () {\n            var result = this._checkVisibleLayout;\n            if (result == null) {\n                result = this.newLabeled(null, this.checkVisible, null);\n                this._checkVisibleLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"checkInteractive\", {\n        get: function () {\n            var result = this._checkInteractive;\n            if (result == null) {\n                result = this.newCheckInteractive();\n                this._checkInteractive = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newCheckInteractive = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckInteractiveLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"checkInteractiveLayout\", {\n        get: function () {\n            var result = this._checkInteractiveLayout;\n            if (result == null) {\n                result = this.newLabeled(null, this.checkInteractive, null);\n                this._checkInteractiveLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"selectGesture\", {\n        get: function () {\n            var result = this._selectGesture;\n            if (result == null) {\n                result = this.newSelectGesture();\n                this._selectGesture = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newSelectGesture = function () {\n        var theme = this.theme;\n        return new DSelectMultiple({\n            weight: 1,\n            values: this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL),\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureOperationType.DRAG,\n                        text: {\n                            value: theme.getSelectGestureValueLabel(EShapeActionValueGestureOperationType.DRAG)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueGestureOperationType.PINCH,\n                        text: {\n                            value: theme.getSelectGestureValueLabel(EShapeActionValueGestureOperationType.PINCH)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    };\n    EDialogLayer.prototype.toGestureOperationType = function (types) {\n        var result = EShapeActionValueGestureOperationType.NONE;\n        for (var i = 0, imax = types.length; i < imax; ++i) {\n            result |= types[i];\n        }\n        return result;\n    };\n    EDialogLayer.prototype.fromGestureOperationType = function (type) {\n        var result = [];\n        if (type & EShapeActionValueGestureOperationType.DRAG) {\n            result.push(EShapeActionValueGestureOperationType.DRAG);\n        }\n        if (type & EShapeActionValueGestureOperationType.PINCH) {\n            result.push(EShapeActionValueGestureOperationType.PINCH);\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"selectGestureLayout\", {\n        get: function () {\n            var result = this._selectGestureLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getSelectGestureLabel(), this.selectGesture, null);\n                this._selectGestureLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.reset = function (width, height) {\n        this.inputName.input.value = \"\";\n        this.inputX.value = 0;\n        this.inputY.value = 0;\n        this.inputWidth.value = width;\n        this.inputHeight.value = height;\n        this.checkBackground.state.isActive = false;\n        this.colorBackground.value.color = 0xffffff;\n        this.colorBackground.value.alpha = 1;\n        this.checkVisible.state.isActive = true;\n        this.checkInteractive.state.isActive = true;\n        this.selectGesture.values = [];\n        this.onCheckBackgroundChange(false);\n        return this;\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"value\", {\n        get: function () {\n            return new EDialogLayerValue(this.inputName.input.value, this.inputX.value, this.inputY.value, this.inputWidth.value, this.inputHeight.value, new EDialogLayerValueBackground(this.checkBackground.state.isActive, this.colorBackground.value.color, this.colorBackground.value.alpha), this.checkVisible.state.isActive, this.checkInteractive.state.isActive, this.toGestureOperationType(this.selectGesture.values));\n        },\n        set: function (value) {\n            if (value != null) {\n                this.inputName.input.value = value.name;\n                this.inputX.value = value.x;\n                this.inputY.value = value.y;\n                this.inputWidth.value = value.width;\n                this.inputHeight.value = value.height;\n                this.checkBackground.state.isActive = value.background.enable;\n                this.colorBackground.value.color = value.background.color;\n                this.colorBackground.value.alpha = value.background.alpha;\n                this.checkVisible.state.isActive = value.visible;\n                this.checkInteractive.state.isActive = value.interactive;\n                this.selectGesture.values = this.fromGestureOperationType(value.gesture);\n                this.onCheckBackgroundChange(value.background.enable);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogLayer.prototype.getType = function () {\n        return \"EDialogLayer\";\n    };\n    return EDialogLayer;\n}(DDialogLayered));\nexport { EDialogLayer };\n//# sourceMappingURL=e-dialog-layer.js.map","import { __extends } from \"tslib\";\nimport { DDialogProcessing } from \"@wcardinal/wcardinal-ui\";\nvar EDialogProcessing = /** @class */ (function (_super) {\n    __extends(EDialogProcessing, _super);\n    function EDialogProcessing() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogProcessing.prototype.toReasonMalformedLabel = function (target) {\n        switch (target) {\n            case \"uid\":\n                return \"An ID\";\n            case \"password\":\n                return \"A password\";\n            case \"description\":\n                return \"A description\";\n            case \"name\":\n                return \"A name\";\n            case \"label\":\n                return \"A label\";\n            case \"summary\":\n                return \"A summary\";\n            default:\n                return \"Something\";\n        }\n    };\n    EDialogProcessing.prototype.toReasonMalformedRange = function (target) {\n        switch (target) {\n            case \"uid\":\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n            case \"password\":\n                return {\n                    lower: 6,\n                    upper: 32\n                };\n            case \"description\":\n                return {\n                    lower: 0,\n                    upper: 256\n                };\n            case \"name\":\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n            case \"label\":\n                return {\n                    lower: 0,\n                    upper: 16\n                };\n            case \"summary\":\n                return {\n                    lower: 0,\n                    upper: 32\n                };\n            default:\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n        }\n    };\n    EDialogProcessing.prototype.toReasonMalformed = function (at, target, reason) {\n        var label = this.toReasonMalformedLabel(target);\n        switch (reason) {\n            case \"short\":\n            case \"long\":\n                var range = this.toReasonMalformedRange(target);\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must be of \").concat(range.lower, \" to \").concat(range.upper, \"\\ncharacters long.\");\n            case \"simple\":\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must contain letters (A-Za-z_)\\nand digits (0-9).\");\n            case \"slash\":\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must not contain the slash mark (/).\");\n            case \"non-alphanumeric\":\n                return (\"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must contain only letters (A-Za-z_),\\n\") +\n                    \"digits (0-9) and a sharp symbol (#).\");\n            default:\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" is invalid.\");\n        }\n    };\n    EDialogProcessing.prototype.toReasonTarget = function (at, target, targetLabel) {\n        if (target != null) {\n            return \"Failed to save '\".concat(at, \"'.\\n\").concat(targetLabel, \" '\").concat(target, \"' does not exit.\");\n        }\n        else {\n            return \"Failed to save '\".concat(at, \"'.\\n\").concat(targetLabel, \" is missing.\");\n        }\n    };\n    EDialogProcessing.prototype.toReasonTargetAt = function (at, target, atLabel, targetLabel) {\n        if (target != null) {\n            return \"Failed to save.\\n\".concat(atLabel, \" '\").concat(at, \"'\\nrequires \").concat(targetLabel, \" '\").concat(target, \"'.\");\n        }\n        else {\n            return \"Failed to save.\\n\".concat(atLabel, \" '\").concat(at, \"'\\nrequires \").concat(targetLabel, \".\");\n        }\n    };\n    EDialogProcessing.prototype.toReason = function (reason) {\n        if (reason == null) {\n            return undefined;\n        }\n        else {\n            if (0 < reason.length && reason[0] === \"{\") {\n                try {\n                    var parsed = JSON.parse(reason);\n                    switch (parsed.id) {\n                        case \"no-sensor-found\":\n                            return this.toReasonTarget(parsed.at, parsed.target, \"Sensor\");\n                        case \"no-device-model-found\":\n                            return this.toReasonTarget(parsed.at, parsed.target, \"Device model\");\n                        case \"malformed\":\n                            return this.toReasonMalformed(parsed.at, parsed.target, parsed.reason);\n                        case \"invalid-operation-mode\":\n                            return \"Failed to save.\\nInvalid operation mode.\";\n                        case \"no-graphic-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"A graphic sensor mapping\", \"a graphic\");\n                        case \"no-alarm-list-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"An alarm mapping\", \"an alarm list\");\n                        case \"no-trend-graph-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"A trend graph sensor mapping\", \"a trend graph\");\n                    }\n                }\n                catch (_a) {\n                    return undefined;\n                }\n            }\n            else {\n                switch (reason) {\n                    case \"duplication\":\n                        return \"Failed to save.\\nThe name has already been used.\";\n                    case \"duplications\":\n                        return \"Failed to save.\\nIDs must be unique.\";\n                    case \"invalid-operation-mode\":\n                        return \"Failed to save.\\nInvalid operation mode.\";\n                    case \"validation\":\n                        return \"A validation error has occurred.\";\n                    case \"validation-fail\":\n                        return \"A validation failed.\";\n                }\n            }\n        }\n        return undefined;\n    };\n    EDialogProcessing.prototype.toButtonText = function (reason) {\n        if (reason === \"validation\" || reason === \"validation-fail\" || reason != undefined) {\n            return \"OK\";\n        }\n        return \"Save\";\n    };\n    EDialogProcessing.prototype.reject = function (reason) {\n        _super.prototype.reject.call(this, this.toReason(reason));\n        // Button text\n        var footer = this.footer;\n        if (footer) {\n            var buttonOk = footer.buttonOk;\n            if (buttonOk) {\n                buttonOk.text = this.toButtonText(reason);\n            }\n        }\n    };\n    return EDialogProcessing;\n}(DDialogProcessing));\nexport { EDialogProcessing };\n//# sourceMappingURL=e-dialog-processing.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputLabel, DInputReal, DLayoutHorizontal, DLayoutSpace, DSelect, ESnapperTargetValue, ESnapperTargetValueType } from \"@wcardinal/wcardinal-ui\";\nvar EDialogSnap = /** @class */ (function (_super) {\n    __extends(EDialogSnap, _super);\n    function EDialogSnap() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogSnap.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectDirectionLabel()\n                    }\n                }),\n                this.selectType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputPositionLabel()\n                    }\n                }),\n                this.inputPosition,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        return result;\n    };\n    Object.defineProperty(EDialogSnap.prototype, \"selectType\", {\n        get: function () {\n            var result = this._selectType;\n            if (result == null) {\n                result = this.newSelectType();\n                this._selectType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogSnap.prototype.newSelectType = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: ESnapperTargetValueType.VERTICAL,\n            menu: {\n                items: [\n                    {\n                        value: ESnapperTargetValueType.VERTICAL,\n                        text: {\n                            value: theme.getSelectDirectionValueLabel(ESnapperTargetValueType.VERTICAL)\n                        }\n                    },\n                    {\n                        value: ESnapperTargetValueType.HORIZONTAL,\n                        text: {\n                            value: theme.getSelectDirectionValueLabel(ESnapperTargetValueType.HORIZONTAL)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogSnap.prototype, \"inputPosition\", {\n        get: function () {\n            var result = this._inputPosition;\n            if (result == null) {\n                result = this.newInputPosition();\n                this._inputPosition = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogSnap.prototype.newInputPosition = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0\n            },\n            step: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    EDialogSnap.prototype.reset = function () {\n        this.selectType.value = ESnapperTargetValueType.VERTICAL;\n        this.inputPosition.value = 0;\n        return this;\n    };\n    Object.defineProperty(EDialogSnap.prototype, \"value\", {\n        get: function () {\n            var type = this.selectType.value;\n            var position = this.inputPosition.value;\n            if (type != null) {\n                return new ESnapperTargetValue(type, position);\n            }\n            return null;\n        },\n        set: function (value) {\n            if (value != null) {\n                this.selectType.value = value.type;\n                this.inputPosition.value = value.position;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogSnap.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogSnap.prototype.getType = function () {\n        return \"EDialogSnap\";\n    };\n    return EDialogSnap;\n}(DDialogLayered));\nexport { EDialogSnap };\n//# sourceMappingURL=e-dialog-snap.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DButtonCheckRight, DDropdown, DInputText, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, DThemes, EShapeActionValueChangeColor } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogAction } from \"./e-dialog-action\";\nvar EEditorAction = /** @class */ (function (_super) {\n    __extends(EEditorAction, _super);\n    function EEditorAction(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        _this.addChild(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                _this.buttonNew,\n                _this.buttonDelete,\n                _this.buttonBringForward,\n                _this.buttonSendBackward\n            ]\n        }));\n        _this.addChild(_this.actionList);\n        _this.addChild(_this.checkInteractive);\n        _this.addChild(_this.checkFocusable);\n        _this.addChild(_this.labelTitle);\n        _this.addChild(_this.inputTitle);\n        _this.addChild(_this.labelShortcut);\n        _this.addChild(_this.inputShortcut);\n        _this.addChild(_this.labelCursor);\n        _this.addChild(_this.dropdownCursor);\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var actionList = _this.actionList;\n        actionList.data.selection.on(\"change\", function () {\n            _this.onListSelectionChange(actionList);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorAction.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonNew\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.actionDialog\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                _this._selection.addActionValue(value);\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var first = _this.actionList.data.selection.first;\n                    if (first != null) {\n                        _this._selection.removeActionValue(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onListSelectionChangeButtonDelete = function (actionList) {\n        this.buttonDelete.state.isDisabled = actionList.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var actionList = _this.actionList;\n                    var first = actionList.data.selection.first;\n                    var items = actionList.data.items;\n                    if (first != null && items[0] !== first) {\n                        _this._selection.bringActionValueForward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onListSelectionChangeButtonBringForward = function (actionList) {\n        var first = actionList.data.selection.first;\n        var items = actionList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var actionList = _this.actionList;\n                    var first = actionList.data.selection.first;\n                    var items = actionList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        _this._selection.sendActionValueBackward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onListSelectionChangeButtonSendBackward = function (actionList) {\n        var first = actionList.data.selection.first;\n        var items = actionList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorAction.prototype, \"actionDialog\", {\n        get: function () {\n            var _a;\n            return ((_a = this._actionDialog) !== null && _a !== void 0 ? _a : (this._actionDialog = this.newActionDialog()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newActionDialog = function () {\n        return new EDialogAction({\n            icons: this._icons,\n            diagram: this._diagram\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"actionList\", {\n        get: function () {\n            var _a;\n            return ((_a = this._actionList) !== null && _a !== void 0 ? _a : (this._actionList = this.newActionList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newActionList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (item) {\n                    return item.toLabel();\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        image: {\n                            tint: {\n                                color: null\n                            }\n                        },\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onActionListDblClick(e, _, item, result);\n                            },\n                            set: function (value, index, item) {\n                                _this.onActionListSet(item, value);\n                            },\n                            unset: function (item) {\n                                _this.onActionListUnset(item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorAction.prototype.onActionListDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldActionValue = item.value;\n        if (oldActionValue != null) {\n            var actionDialog_1 = this.actionDialog;\n            actionDialog_1.reset();\n            actionDialog_1.value = oldActionValue;\n            actionDialog_1.open(item).then(function () {\n                var newActionValue = actionDialog_1.value;\n                if (newActionValue != null) {\n                    _this._selection.replaceActionValue(oldActionValue, newActionValue, list);\n                }\n            });\n        }\n    };\n    EEditorAction.prototype.onActionListSet = function (item, value) {\n        if (value instanceof EShapeActionValueChangeColor) {\n            var image = item.image.get(0);\n            if (image != null) {\n                var theme = DThemes.get(\"DButtonColor\");\n                image.source = theme.getImageSource(item.state);\n                image.tint.color = value.color;\n            }\n        }\n        else {\n            item.image = null;\n        }\n    };\n    EEditorAction.prototype.onActionListUnset = function (item) {\n        item.image = null;\n    };\n    EEditorAction.prototype.onSelectionChangeActionList = function (selection) {\n        var last = selection.last();\n        var actionList = this.actionList;\n        actionList.data.items = last != null ? last.action.values : [];\n        this.onListSelectionChange(actionList);\n    };\n    Object.defineProperty(EEditorAction.prototype, \"checkInteractive\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkInteractive) !== null && _a !== void 0 ? _a : (this._checkInteractive = this.newCheckInteractive()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newCheckInteractive = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.theme.getCheckInteractiveLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setInteractive(true);\n                },\n                inactive: function () {\n                    _this._selection.setInteractive(false);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onSelectionChangeCheckInteractive = function (selection) {\n        var last = selection.last();\n        var checkInteractive = this.checkInteractive;\n        if (last != null) {\n            checkInteractive.state.isActive = last.interactive;\n            checkInteractive.state.isDisabled = false;\n        }\n        else {\n            checkInteractive.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorAction.prototype, \"checkFocusable\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkFocusable) !== null && _a !== void 0 ? _a : (this._checkFocusable = this.newCheckFocusable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newCheckFocusable = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.theme.getCheckFocusableLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setFocusable(true);\n                },\n                inactive: function () {\n                    _this._selection.setFocusable(false);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onSelectionChangeCheckFocusable = function (selection) {\n        var last = selection.last();\n        var checkFocusable = this.checkFocusable;\n        if (last != null) {\n            checkFocusable.state.isActive = last.state.isFocusable;\n            checkFocusable.state.isDisabled = false;\n        }\n        else {\n            checkFocusable.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorAction.prototype, \"labelShortcut\", {\n        get: function () {\n            var _a;\n            return ((_a = this._labelShortcut) !== null && _a !== void 0 ? _a : (this._labelShortcut = this.newLabelShortcut()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newLabelShortcut = function () {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getInputShortcutLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"inputShortcut\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputShortcut) !== null && _a !== void 0 ? _a : (this._inputShortcut = this.newInputShortcut()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newInputShortcut = function () {\n        var _this = this;\n        return new DInputText({\n            width: \"padding\",\n            on: {\n                change: function (value) {\n                    _this._selection.setShortcut(_this.toNormalizedShortcut(value));\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.toNormalizedShortcut = function (value) {\n        var trimmed = value.trim();\n        if (0 < trimmed.length) {\n            return trimmed;\n        }\n    };\n    EEditorAction.prototype.onSelectionChangeInputShortcut = function (selection) {\n        var _a;\n        this.inputShortcut.value = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.shortcut) || \"\";\n    };\n    Object.defineProperty(EEditorAction.prototype, \"labelTitle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._labelTitle) !== null && _a !== void 0 ? _a : (this._labelTitle = this.newLabelTitle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newLabelTitle = function () {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getInputTitleLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"inputTitle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputTitle) !== null && _a !== void 0 ? _a : (this._inputTitle = this.newInputTitle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newInputTitle = function () {\n        var _this = this;\n        return new DInputText({\n            width: \"padding\",\n            on: {\n                change: function (value) {\n                    _this._selection.setTitle(_this.toNormalizedTitle(value));\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.toNormalizedTitle = function (value) {\n        if (0 < value.trim().length) {\n            return value;\n        }\n    };\n    EEditorAction.prototype.onSelectionChangeInputTitle = function (selection) {\n        var _a;\n        this.inputTitle.value = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.title) || \"\";\n    };\n    Object.defineProperty(EEditorAction.prototype, \"labelCursor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._labelCursor) !== null && _a !== void 0 ? _a : (this._labelCursor = this.newLabelCursor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newLabelCursor = function () {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getDropdownCursorLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"dropdownCursor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dropdownCursor) !== null && _a !== void 0 ? _a : (this._dropdownCursor = this.newDropdownCursor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newDropdownCursor = function () {\n        var _this = this;\n        return new DDropdown({\n            width: \"padding\",\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newDropdownCursorMenuItems()\n            },\n            on: {\n                select: function (value) {\n                    var _a;\n                    _this.dropdownCursor.text = (_a = _this.cursors.get(value)) !== null && _a !== void 0 ? _a : value;\n                    _this._selection.setCursor(value);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.newDropdownCursorMenuItems = function () {\n        var result = [];\n        this.cursors.forEach(function (label, cursor) {\n            result.push({\n                width: 200,\n                value: cursor,\n                text: {\n                    value: label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorAction.prototype, \"cursors\", {\n        get: function () {\n            var _a;\n            return ((_a = this._cursors) !== null && _a !== void 0 ? _a : (this._cursors = this.theme.getCursors()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.onSelectionChangeDropdownCursor = function (selection) {\n        var _a, _b, _c;\n        var cursor = (_b = (_a = selection.last()) === null || _a === void 0 ? void 0 : _a.cursor) !== null && _b !== void 0 ? _b : \"\";\n        this.dropdownCursor.text = (_c = this.cursors.get(cursor)) !== null && _c !== void 0 ? _c : cursor;\n    };\n    EEditorAction.prototype.onSelectionChange = function (selection) {\n        this.state.isDisabled = selection.isEmpty();\n        this.onSelectionChangeActionList(selection);\n        this.onSelectionChangeCheckInteractive(selection);\n        this.onSelectionChangeCheckFocusable(selection);\n        this.onSelectionChangeInputShortcut(selection);\n        this.onSelectionChangeInputTitle(selection);\n        this.onSelectionChangeDropdownCursor(selection);\n    };\n    EEditorAction.prototype.onListSelectionChange = function (actionList) {\n        this.onListSelectionChangeButtonDelete(actionList);\n        this.onListSelectionChangeButtonBringForward(actionList);\n        this.onListSelectionChangeButtonSendBackward(actionList);\n    };\n    EEditorAction.prototype.getType = function () {\n        return \"EEditorAction\";\n    };\n    return EEditorAction;\n}(DLayoutVertical));\nexport { EEditorAction };\n//# sourceMappingURL=e-editor-action.js.map","import { __extends } from \"tslib\";\nimport { DButtonColor, DDialogLayered, DInputIntegerAndLabel, DInputLabel, DInputTextAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutSpace, DMenu, DSelect, isNumber } from \"@wcardinal/wcardinal-ui\";\nvar EDialogCanvas = /** @class */ (function (_super) {\n    __extends(EDialogCanvas, _super);\n    function EDialogCanvas(options) {\n        var _this = _super.call(this, options) || this;\n        var canvas = options.canvas;\n        _this._canvas = options.canvas;\n        _this.onDefaultChange(canvas);\n        return _this;\n    }\n    EDialogCanvas.prototype.onDefaultChange = function (def) {\n        var category = def.category;\n        var categoryDefault = category.default;\n        var categoryItems = category.items;\n        var layout = this.layoutCategory;\n        if (categoryDefault != null && 0 < categoryItems.length) {\n            var items = [];\n            for (var i = 0, imax = categoryItems.length; i < imax; ++i) {\n                var categoryItem = categoryItems[i];\n                items.push({\n                    value: categoryItem.id,\n                    text: {\n                        value: categoryItem.label\n                    }\n                });\n            }\n            var selectCategory = this.selectCategory;\n            selectCategory.menu = new DMenu({\n                fit: true,\n                items: items\n            });\n            selectCategory.value = category.default;\n            layout.state.isEnabled = category.writable;\n            layout.show();\n        }\n        else {\n            layout.hide();\n        }\n    };\n    EDialogCanvas.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.layoutName, this.layoutLabel, this.layoutWidth, this.layoutHeight, this.layoutCategory, this.layoutSummary, this.layoutDescription, this.layoutBackground);\n        return result;\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutName\", {\n        get: function () {\n            var result = this._layoutName;\n            if (result == null) {\n                result = this.newLayoutName();\n                this._layoutName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutLabel\", {\n        get: function () {\n            var result = this._layoutLabel;\n            if (result == null) {\n                result = this.newLayoutLabel();\n                this._layoutLabel = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutLabel = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutWidth\", {\n        get: function () {\n            var result = this._layoutWidth;\n            if (result == null) {\n                result = this.newLayoutWidth();\n                this._layoutWidth = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutWidth = function () {\n        var _this = this;\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutHeight\", {\n        get: function () {\n            var result = this._layoutHeight;\n            if (result == null) {\n                result = this.newLayoutHeight();\n                this._layoutHeight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutHeight = function () {\n        var _this = this;\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputHeightLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutCategory\", {\n        get: function () {\n            var result = this._layoutCategory;\n            if (result == null) {\n                result = this.newLayoutCategory();\n                this._layoutCategory = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutCategory = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            visible: false,\n            children: [\n                new DInputLabel({\n                    text: {\n                        value: this.theme.getSelectCategoryLabel()\n                    }\n                }),\n                this.selectCategory,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"selectCategory\", {\n        get: function () {\n            var result = this._selectCategory;\n            if (result == null) {\n                result = this.newSelectCategory();\n                this._selectCategory = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newSelectCategory = function () {\n        return new DSelect({\n            weight: 1\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutSummary\", {\n        get: function () {\n            var result = this._layoutSummary;\n            if (result == null) {\n                result = this.newLayoutSummary();\n                this._layoutSummary = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutSummary = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelSummary(),\n                this.inputSummary,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogCanvas.prototype.newLabelSummary = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputSummaryLabel()\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"inputSummary\", {\n        get: function () {\n            var result = this._inputSummary;\n            if (result == null) {\n                result = this.newInputSummary();\n                this._inputSummary = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newInputSummary = function () {\n        return new DInputTextArea({\n            weight: 1,\n            height: 60\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutDescription\", {\n        get: function () {\n            var result = this._layoutDescription;\n            if (result == null) {\n                result = this.newLayoutDescription();\n                this._layoutDescription = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutDescription = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelDescription(),\n                this.inputDescription,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogCanvas.prototype.newLabelDescription = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputDescriptionLabel()\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"inputDescription\", {\n        get: function () {\n            var result = this._inputDescription;\n            if (result == null) {\n                result = this.newInputDescription();\n                this._inputDescription = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newInputDescription = function () {\n        return new DInputTextArea({\n            weight: 1,\n            height: 100\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutBackground\", {\n        get: function () {\n            var result = this._layoutBackground;\n            if (result == null) {\n                result = this.newLayoutBackground();\n                this._layoutBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutBackground = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelBackground(),\n                this.inputBackground,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogCanvas.prototype.newLabelBackground = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputBackgroundLabel()\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"inputBackground\", {\n        get: function () {\n            var result = this._inputBackground;\n            if (result == null) {\n                result = this.newInputBackground();\n                this._inputBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newInputBackground = function () {\n        var result = new DButtonColor({\n            weight: 1\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    EDialogCanvas.prototype.reset = function (diagram) {\n        var diagramCanvas = diagram === null || diagram === void 0 ? void 0 : diagram.canvas;\n        if (diagramCanvas != null) {\n            var background = diagramCanvas.background;\n            var backgroundColor = background.color;\n            var backgroundAlpha = background.alpha;\n            this.value = {\n                name: diagramCanvas.name,\n                label: diagramCanvas.label,\n                width: diagramCanvas.width,\n                height: diagramCanvas.height,\n                category: diagramCanvas.category,\n                summary: diagramCanvas.summary,\n                description: diagramCanvas.description,\n                background: {\n                    color: isNumber(backgroundColor) ? backgroundColor : 0xffffff,\n                    alpha: isNumber(backgroundAlpha) ? backgroundAlpha : 1\n                }\n            };\n        }\n        else {\n            var canvas = this._canvas;\n            this.value = {\n                name: canvas.name,\n                label: canvas.label,\n                width: canvas.width,\n                height: canvas.height,\n                category: canvas.category.default,\n                summary: canvas.summary,\n                description: canvas.description,\n                background: {\n                    color: canvas.background.color,\n                    alpha: canvas.background.alpha\n                }\n            };\n        }\n        return this;\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"value\", {\n        get: function () {\n            return {\n                name: this.layoutName.input.value,\n                label: this.layoutLabel.input.value,\n                width: this.layoutWidth.input.value,\n                height: this.layoutHeight.input.value,\n                category: this.selectCategory.value,\n                summary: this.inputSummary.value,\n                description: this.inputDescription.value,\n                background: this.inputBackground.value\n            };\n        },\n        set: function (value) {\n            var _a, _b;\n            this.layoutName.input.value = value.name;\n            this.layoutLabel.input.value = value.label;\n            this.layoutWidth.input.value = value.width;\n            this.layoutHeight.input.value = value.height;\n            this.selectCategory.value = (_b = (_a = value.category) !== null && _a !== void 0 ? _a : this._canvas.category.default) !== null && _b !== void 0 ? _b : null;\n            this.inputSummary.value = value.summary;\n            this.inputDescription.value = value.description;\n            this.inputBackground.value.color = value.background.color;\n            this.inputBackground.value.alpha = value.background.alpha;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogCanvas.prototype.getType = function () {\n        return \"EDialogCanvas\";\n    };\n    return EDialogCanvas;\n}(DDialogLayered));\nexport { EDialogCanvas };\n//# sourceMappingURL=e-dialog-canvas.js.map","import { __extends } from \"tslib\";\nimport { DBoard, DButtonAmbient, DControllers, DCornerMask, DInputText, DLayoutHorizontal } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentName } from \"../command/e-command-document-name\";\nimport { EDialogCanvas } from \"./e-dialog-canvas\";\nimport { ECommandDocumentAll } from \"../command/e-command-document-all\";\nvar toOptions = function (options) {\n    var _a, _b, _c, _d, _e;\n    (_a = options.width) !== null && _a !== void 0 ? _a : (options.width = 200);\n    (_b = options.height) !== null && _b !== void 0 ? _b : (options.height = 30);\n    (_c = options.padding) !== null && _c !== void 0 ? _c : (options.padding = 0);\n    (_d = options.corner) !== null && _d !== void 0 ? _d : (options.corner = { mask: \"BOTTOM\" });\n    (_e = options.shadow) !== null && _e !== void 0 ? _e : (options.shadow = \"WEAK\");\n    return options;\n};\nvar EEditorCanvas = /** @class */ (function (_super) {\n    __extends(EEditorCanvas, _super);\n    function EEditorCanvas(options) {\n        var _this = _super.call(this, toOptions(options)) || this;\n        _this._icons = options.icons;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        diagram.on(\"change\", function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                _this.inputName.value = canvas.name;\n            }\n        });\n        diagram.on(\"set\", function (canvas) {\n            _this.inputName.value = canvas.name;\n            _this.show();\n        });\n        diagram.on(\"unset\", function (canvas) {\n            _this.hide();\n        });\n        _this._canvas = options.canvas;\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            margin: 0,\n            children: [_this.inputName, _this.buttonEditor]\n        }));\n        _this.hide();\n        return _this;\n    }\n    Object.defineProperty(EEditorCanvas.prototype, \"inputName\", {\n        get: function () {\n            var result = this._inputName;\n            if (result == null) {\n                result = this.newInputName();\n                this._inputName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCanvas.prototype.newInputName = function () {\n        var _this = this;\n        return new DInputText({\n            weight: 1,\n            background: {\n                color: null\n            },\n            border: {\n                color: null\n            },\n            corner: {\n                mask: DCornerMask.ALL & ~DCornerMask.TOP_LEFT\n            },\n            on: {\n                change: function (value) {\n                    _this.onInputNameChange(value);\n                }\n            }\n        });\n    };\n    EEditorCanvas.prototype.onInputNameChange = function (value) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas != null && canvas.name !== value) {\n            DControllers.getCommandController().push(new ECommandDocumentName(diagram, canvas, value));\n        }\n    };\n    Object.defineProperty(EEditorCanvas.prototype, \"buttonEditor\", {\n        get: function () {\n            var result = this._buttonEditor;\n            if (result == null) {\n                result = this.newButtonEditor();\n                this._buttonEditor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCanvas.prototype.newButtonEditor = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_canvas\n            },\n            on: {\n                active: function (emitter) {\n                    _this.onButtonEditorActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorCanvas.prototype.onButtonEditorActive = function (opener) {\n        var _this = this;\n        this.dialogEditor.then(function (dialogEditor) {\n            var diagram = _this._diagram;\n            dialogEditor\n                .reset(diagram)\n                .open(opener)\n                .then(function (value) {\n                var canvas = diagram.canvas;\n                if (canvas != null) {\n                    DControllers.getCommandController().push(new ECommandDocumentAll(diagram, canvas, value.name, value.label, value.width, value.height, value.category, value.summary, value.description, value.background.color, value.background.alpha));\n                }\n            });\n        });\n    };\n    Object.defineProperty(EEditorCanvas.prototype, \"dialogEditor\", {\n        get: function () {\n            var result = this._dialogEditor;\n            if (result == null) {\n                result = this.newDialogEditor();\n                this._dialogEditor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCanvas.prototype.newDialogEditor = function () {\n        return this._canvas.get().then(function (canvas) {\n            return new EDialogCanvas({\n                canvas: canvas\n            });\n        });\n    };\n    EEditorCanvas.prototype.render = function (renderer) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas != null) {\n            var position = canvas.position;\n            this.position.set(position.x, position.y - this.height);\n            this.updateTransform();\n        }\n        _super.prototype.render.call(this, renderer);\n    };\n    EEditorCanvas.prototype.getType = function () {\n        return \"EEditorCanvas\";\n    };\n    return EEditorCanvas;\n}(DBoard));\nexport { EEditorCanvas };\n//# sourceMappingURL=e-editor-canvas.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DButtonCheck, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DText, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nvar textFormat = function (value) {\n    return \"\".concat(+value.toFixed(2));\n};\nvar textFormatDegree = function (value) {\n    return textFormat((value / Math.PI) * 180);\n};\nvar textUnformatDegree = function (text) {\n    return (parseFloat(text) / 180) * Math.PI;\n};\nvar EEditorCoordinate = /** @class */ (function (_super) {\n    __extends(EEditorCoordinate, _super);\n    function EEditorCoordinate(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        _this._selection = options.selection;\n        _this._workRectangle = new Rectangle();\n        // Input updater\n        _this._updateInputShape = null;\n        _this._updateInputId = null;\n        _this._isUpdateInputShapeChanged = false;\n        _this._renderInputsBound = function () {\n            _this.renderInputs();\n        };\n        //\n        _this.addChild(_this.newTextLabel());\n        _this.addChild(_this.inputId);\n        _this.addChild(_this.inputPositionX);\n        _this.addChild(_this.inputPositionY);\n        _this.addChild(_this.inputPositionLeft);\n        _this.addChild(_this.inputPositionTop);\n        _this.addChild(_this.inputSizeX);\n        _this.addChild(_this.inputSizeY);\n        _this.addChild(_this.inputRotation);\n        _this.addChild(_this.inputSkew);\n        _this.addChild(_this.layoutAlignHorizontally);\n        _this.addChild(_this.layoutAlignVertically);\n        //\n        var selection = _this._selection;\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorCoordinate.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputId\", {\n        get: function () {\n            var result = this._inputId;\n            if (result == null) {\n                result = this.newInputId();\n                this._inputId = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputId = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputIdLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setId(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionX\", {\n        get: function () {\n            var result = this._inputPositionX;\n            if (result == null) {\n                result = this.newInputPositionX();\n                this._inputPositionX = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionX = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionXLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionX(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionY\", {\n        get: function () {\n            var result = this._inputPositionY;\n            if (result == null) {\n                result = this.newInputPositionY();\n                this._inputPositionY = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionY = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionYLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionY(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionLeft\", {\n        get: function () {\n            var result = this._inputPositionLeft;\n            if (result == null) {\n                result = this.newInputPositionLeft();\n                this._inputPositionLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionLeft = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionLeftLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionLeft(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionTop\", {\n        get: function () {\n            var result = this._inputPositionTop;\n            if (result == null) {\n                result = this.newInputPositionTop();\n                this._inputPositionTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionTop = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionTopLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionTop(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputSizeX\", {\n        get: function () {\n            var result = this._inputSizeX;\n            if (result == null) {\n                result = this.newInputSizeX();\n                this._inputSizeX = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputSizeX = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSizeXLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setSizeX(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputSizeY\", {\n        get: function () {\n            var result = this._inputSizeY;\n            if (result == null) {\n                result = this.newInputSizeY();\n                this._inputSizeY = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputSizeY = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSizeYLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setSizeY(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputRotation\", {\n        get: function () {\n            var result = this._inputRotation;\n            if (result == null) {\n                result = this.newInputRotation();\n                this._inputRotation = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputRotation = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputRotationLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormatDegree\n                },\n                editing: {\n                    unformatter: textUnformatDegree\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setRotation(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputSkew\", {\n        get: function () {\n            var result = this._inputSkew;\n            if (result == null) {\n                result = this.newInputSkew();\n                this._inputSkew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputSkew = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSkewLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormatDegree\n                },\n                editing: {\n                    unformatter: textUnformatDegree\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setSkew(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"layoutAlignHorizontally\", {\n        get: function () {\n            var result = this._layoutAlignHorizontally;\n            if (result == null) {\n                result = this.newLayoutAlignHorizontally();\n                this._layoutAlignHorizontally = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newLayoutAlignHorizontally = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonAlignLeft,\n                this.buttonAlignCenter,\n                this.buttonAlignRight,\n                this.buttonDistributeHorizontally,\n                this.buttonDistributeVertically,\n                this.buttonLock,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"layoutAlignVertically\", {\n        get: function () {\n            var result = this._layoutAlignVertically;\n            if (result == null) {\n                result = this.newLayoutAlignVertically();\n                this._layoutAlignVertically = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newLayoutAlignVertically = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonAlignTop,\n                this.buttonAlignMiddle,\n                this.buttonAlignBottom,\n                this.buttonRotateLeft,\n                this.buttonRotateRight,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignLeft\", {\n        get: function () {\n            var result = this._buttonAlignLeft;\n            if (result == null) {\n                result = this.newButtonAlignLeft();\n                this._buttonAlignLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_left\n            },\n            title: this.theme.getButtonAlignLeftTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignLeft();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignCenter\", {\n        get: function () {\n            var result = this._buttonAlignCenter;\n            if (result == null) {\n                result = this.newButtonAlignCenter();\n                this._buttonAlignCenter = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignCenter = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_center\n            },\n            title: this.theme.getButtonAlignCenterTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignCenter();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignRight\", {\n        get: function () {\n            var result = this._buttonAlignRight;\n            if (result == null) {\n                result = this.newButtonAlignRight();\n                this._buttonAlignRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_right\n            },\n            title: this.theme.getButtonAlignRightTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignRight();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignTop\", {\n        get: function () {\n            var result = this._buttonAlignTop;\n            if (result == null) {\n                result = this.newButtonAlignTop();\n                this._buttonAlignTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_top\n            },\n            title: this.theme.getButtonAlignTopTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignTop();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignMiddle\", {\n        get: function () {\n            var result = this._buttonAlignMiddle;\n            if (result == null) {\n                result = this.newButtonAlignMiddle();\n                this._buttonAlignMiddle = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignMiddle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_middle\n            },\n            title: this.theme.getButtonAlignMiddleTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignMiddle();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignBottom\", {\n        get: function () {\n            var result = this._buttonAlignBottom;\n            if (result == null) {\n                result = this.newButtonAlignBottom();\n                this._buttonAlignBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_bottom\n            },\n            title: this.theme.getButtonAlignBottomTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignBottom();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonDistributeHorizontally\", {\n        get: function () {\n            var result = this._buttonDistributeHorizontally;\n            if (result == null) {\n                result = this.newButtonDistributeHorizontally();\n                this._buttonDistributeHorizontally = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonDistributeHorizontally = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_distribute_horizontally\n            },\n            title: this.theme.getButtonDistributeHorizontallyTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.distributeHorizontally();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonDistributeVertically\", {\n        get: function () {\n            var result = this._buttonDistributeVertically;\n            if (result == null) {\n                result = this.newButtonDistributeVertically();\n                this._buttonDistributeVertically = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonDistributeVertically = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_distribute_vertically\n            },\n            title: this.theme.getButtonDistributeVerticallyTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.distributeVertically();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonRotateLeft\", {\n        get: function () {\n            var result = this._buttonRotateLeft;\n            if (result == null) {\n                result = this.newButtonRotateLeft();\n                this._buttonRotateLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonRotateLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_rotate_left\n            },\n            title: this.theme.getButtonRotateLeftTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    if (selection.prepareRotate()) {\n                        selection.saveForRotate();\n                        selection.rotate(-0.5 * Math.PI);\n                        selection.finalize();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonRotateRight\", {\n        get: function () {\n            var result = this._buttonRotateRight;\n            if (result == null) {\n                result = this.newButtonRotateRight();\n                this._buttonRotateRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonRotateRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_rotate_right\n            },\n            title: this.theme.getButtonRotateRightTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    if (selection.prepareRotate()) {\n                        selection.saveForRotate();\n                        selection.rotate(+0.5 * Math.PI);\n                        selection.finalize();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonLock\", {\n        get: function () {\n            var result = this._buttonLock;\n            if (result == null) {\n                result = this.newButtonLock();\n                this._buttonLock = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.COORDINATE);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.COORDINATE);\n                }\n            }\n        });\n    };\n    EEditorCoordinate.prototype.onSelectionChange = function (selection) {\n        var last = selection.last();\n        this.state.isDisabled = last == null;\n        var hasPositionCapability = EShapeCapabilities.contains(last, EShapeCapability.POSITION);\n        this.inputPositionX.state.isEnabled = hasPositionCapability;\n        this.inputPositionY.state.isEnabled = hasPositionCapability;\n        this.inputPositionLeft.state.isEnabled = hasPositionCapability;\n        this.inputPositionTop.state.isEnabled = hasPositionCapability;\n        this.inputRotation.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.ROTATION);\n        this.inputSizeX.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.WIDTH);\n        this.inputSizeY.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.HEIGHT);\n        this.inputSkew.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.SKEW);\n        this.buttonLock.state.isActive = this.isLocked(last);\n        this.updateInputs(selection.get());\n    };\n    EEditorCoordinate.prototype.isLocked = function (last) {\n        if (last == null) {\n            return false;\n        }\n        var capability = last.getCapability();\n        if (capability == null) {\n            return false;\n        }\n        var target = EShapeCapability.COORDINATE;\n        if (capability.locked & target) {\n            return true;\n        }\n        return false;\n    };\n    EEditorCoordinate.prototype.renderInputs = function () {\n        this._updateInputId = null;\n        if (this._isUpdateInputShapeChanged) {\n            this._isUpdateInputShapeChanged = false;\n            var shape = this._updateInputShape;\n            if (shape != null) {\n                var transform = shape.transform;\n                var position = transform.position;\n                var size = shape.size;\n                this.inputId.input.value = shape.id;\n                this.inputPositionX.input.value = position.x;\n                this.inputPositionY.input.value = position.y;\n                this.inputSizeX.input.value = size.x;\n                this.inputSizeY.input.value = size.y;\n                this.inputRotation.input.value = transform.rotation;\n                this.inputSkew.input.value = transform.skew.x;\n                var rectangle = this._workRectangle;\n                shape.getBoundsLocal(false, rectangle);\n                this.inputPositionLeft.input.value = rectangle.x;\n                this.inputPositionTop.input.value = rectangle.y;\n            }\n            this._updateInputId = window.setTimeout(this._renderInputsBound, 100);\n        }\n    };\n    EEditorCoordinate.prototype.updateInputs = function (shapes) {\n        var shape = 0 < shapes.length ? shapes[shapes.length - 1] : null;\n        this._updateInputShape = shape;\n        this._isUpdateInputShapeChanged = true;\n        if (this._updateInputId == null) {\n            this.renderInputs();\n        }\n    };\n    EEditorCoordinate.prototype.getType = function () {\n        return \"EEditorCoordinate\";\n    };\n    return EEditorCoordinate;\n}(DLayoutVertical));\nexport { EEditorCoordinate };\n//# sourceMappingURL=e-editor-coordinate.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogDataMappingValue } from \"./e-dialog-data-mapping-value\";\nvar EEditorDataMapping = /** @class */ (function (_super) {\n    __extends(EEditorDataMapping, _super);\n    function EEditorDataMapping(options) {\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Layout\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                _this.buttonNew,\n                _this.buttonDelete,\n                _this.buttonBringForward,\n                _this.buttonSendBackward\n            ]\n        }));\n        _this.addChild(_this.listDataMappingValue);\n        // Initialize\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var listDataMappingValue = _this.listDataMappingValue;\n        listDataMappingValue.selection.on(\"change\", function () {\n            _this.onListDataMappingValueSelectionChange(listDataMappingValue);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorDataMapping.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonNew\", {\n        get: function () {\n            var result = this._buttonNew;\n            if (result == null) {\n                result = this.newButtonNew();\n                this._buttonNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.dialogDataMappingValue\n            .set(null, this._selection.last())\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                _this._selection.addDataMappingValue(value);\n            }\n        });\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonDelete\", {\n        get: function () {\n            var result = this._buttonDelete;\n            if (result == null) {\n                result = this.newButtonDelete();\n                this._buttonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var first = _this.listDataMappingValue.selection.first;\n                    if (first != null) {\n                        _this._selection.removeDataMappingValue(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChangeButtonDelete = function (listDataMappingValue) {\n        this.buttonDelete.state.isDisabled = listDataMappingValue.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonBringForward\", {\n        get: function () {\n            var result = this._buttonBringForward;\n            if (result == null) {\n                result = this.newButtonBringForward();\n                this._buttonBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataMappingValue = _this.listDataMappingValue;\n                    var first = listDataMappingValue.data.selection.first;\n                    var items = listDataMappingValue.data.items;\n                    if (first != null && items[0] !== first) {\n                        _this._selection.bringDataMappingValueForward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChangeButtonBringForward = function (listDataMappingValue) {\n        var first = listDataMappingValue.data.selection.first;\n        var items = listDataMappingValue.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var result = this._buttonSendBackward;\n            if (result == null) {\n                result = this.newButtonSendBackward();\n                this._buttonSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataMappingValue = _this.listDataMappingValue;\n                    var first = listDataMappingValue.data.selection.first;\n                    var items = listDataMappingValue.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        _this._selection.sendDataMappingValueBackward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChangeButtonSendBackward = function (listDataMappingValue) {\n        var first = listDataMappingValue.data.selection.first;\n        var items = listDataMappingValue.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"dialogDataMappingValue\", {\n        get: function () {\n            var result = this._dialogDataMappingValue;\n            if (result == null) {\n                result = this.newDialogDataMappingValue();\n                this._dialogDataMappingValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newDialogDataMappingValue = function () {\n        return new EDialogDataMappingValue();\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"listDataMappingValue\", {\n        get: function () {\n            var result = this._listDataMappingValue;\n            if (result == null) {\n                result = this.newListDataMappingValue();\n                this._listDataMappingValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newListDataMappingValue = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    var source = value[0];\n                    var destination = value[1];\n                    var initial = value[2];\n                    if (0 < destination.length) {\n                        if (0 < initial.length) {\n                            return \"\".concat(source, \" -> \").concat(destination, \", \").concat(initial);\n                        }\n                        else {\n                            return \"\".concat(source, \" -> \").concat(destination);\n                        }\n                    }\n                    else {\n                        if (0 < initial.length) {\n                            return \"\".concat(source, \" -> \").concat(initial);\n                        }\n                        else {\n                            return \"\".concat(source);\n                        }\n                    }\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onListDataMappingValueDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            this.dialogDataMappingValue\n                .set(oldValue, this._selection.last())\n                .open(item)\n                .then(function (newValue) {\n                if (newValue != null) {\n                    _this._selection.replaceDataMappingValue(oldValue, newValue, list);\n                }\n            });\n        }\n    };\n    EEditorDataMapping.prototype.onSelectionChangeListDataMappingValue = function (selection) {\n        var _a, _b;\n        var listDataMappingValue = this.listDataMappingValue;\n        listDataMappingValue.data.items = ((_b = (_a = selection.last()) === null || _a === void 0 ? void 0 : _a.data.getMapping()) === null || _b === void 0 ? void 0 : _b.values) || [];\n        this.onListDataMappingValueSelectionChange(listDataMappingValue);\n    };\n    EEditorDataMapping.prototype.onSelectionChange = function (selection) {\n        this.state.isDisabled = !EShapeCapabilities.contains(selection.last(), EShapeCapability.DATA_MAPPING);\n        this.onSelectionChangeListDataMappingValue(selection);\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChange = function (listDataMappingValue) {\n        this.onListDataMappingValueSelectionChangeButtonDelete(listDataMappingValue);\n        this.onListDataMappingValueSelectionChangeButtonBringForward(listDataMappingValue);\n        this.onListDataMappingValueSelectionChangeButtonSendBackward(listDataMappingValue);\n    };\n    EEditorDataMapping.prototype.getType = function () {\n        return \"EEditorDataMapping\";\n    };\n    return EEditorDataMapping;\n}(DLayoutVertical));\nexport { EEditorDataMapping };\n//# sourceMappingURL=e-editor-data-mapping.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, EShapeDataValueExtensions, EShapeDataValueType } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogDataValue } from \"./e-dialog-data-value\";\nvar EEditorData = /** @class */ (function (_super) {\n    __extends(EEditorData, _super);\n    function EEditorData(options) {\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Layout\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                _this.buttonNew,\n                _this.buttonDelete,\n                _this.buttonBringForward,\n                _this.buttonSendBackward\n            ]\n        }));\n        _this.addChild(_this.listDataValue);\n        // Initialize\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var listDataValue = _this.listDataValue;\n        listDataValue.selection.on(\"change\", function () {\n            _this.onListDataValueSelectionChange(listDataValue);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorData.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonNew\", {\n        get: function () {\n            var result = this._buttonNew;\n            if (result == null) {\n                result = this.newButtonNew();\n                this._buttonNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.dialogDataValue\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                _this._selection.addDataValue(value);\n            }\n        });\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonDelete\", {\n        get: function () {\n            var result = this._buttonDelete;\n            if (result == null) {\n                result = this.newButtonDelete();\n                this._buttonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var first = _this.listDataValue.selection.first;\n                    if (first != null) {\n                        _this._selection.removeDataValue(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onListDataValueSelectionChangeButtonDelete = function (listDataValue) {\n        this.buttonDelete.state.isDisabled = listDataValue.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonBringForward\", {\n        get: function () {\n            var result = this._buttonBringForward;\n            if (result == null) {\n                result = this.newButtonBringForward();\n                this._buttonBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataValue = _this.listDataValue;\n                    var first = listDataValue.data.selection.first;\n                    var items = listDataValue.data.items;\n                    if (first != null && items[0] !== first) {\n                        _this._selection.bringDataValueForward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onListDataValueSelectionChangeButtonBringForward = function (listDataValue) {\n        var first = listDataValue.data.selection.first;\n        var items = listDataValue.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var result = this._buttonSendBackward;\n            if (result == null) {\n                result = this.newButtonSendBackward();\n                this._buttonSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataValue = _this.listDataValue;\n                    var first = listDataValue.data.selection.first;\n                    var items = listDataValue.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        _this._selection.sendDataValueBackward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onListDataValueSelectionChangeButtonSendBackward = function (listDataValue) {\n        var first = listDataValue.data.selection.first;\n        var items = listDataValue.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorData.prototype, \"dialogDataValue\", {\n        get: function () {\n            var result = this._dialogDataValue;\n            if (result == null) {\n                result = this.newDialogDataValue();\n                this._dialogDataValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newDialogDataValue = function () {\n        return new EDialogDataValue();\n    };\n    Object.defineProperty(EEditorData.prototype, \"listDataValue\", {\n        get: function () {\n            var result = this._listDataValue;\n            if (result == null) {\n                result = this.newListDataValue();\n                this._listDataValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newListDataValue = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    var type = value.type;\n                    var as = value.as;\n                    var prefix = 0 < as.length ? \"\".concat(as, \": \") : \"\";\n                    switch (type) {\n                        case EShapeDataValueType.BOOLEAN:\n                        case EShapeDataValueType.BOOLEAN_ARRAY:\n                        case EShapeDataValueType.NUMBER:\n                        case EShapeDataValueType.NUMBER_ARRAY:\n                        case EShapeDataValueType.STRING:\n                        case EShapeDataValueType.STRING_ARRAY:\n                        case EShapeDataValueType.OBJECT:\n                        case EShapeDataValueType.OBJECT_ARRAY:\n                            return prefix + value.id;\n                        case EShapeDataValueType.TICKER:\n                            return prefix + \"Ticker \".concat(value.initial, \" ms\");\n                        default:\n                            var extension = EShapeDataValueExtensions.get(type);\n                            if (extension) {\n                                return prefix + extension.label;\n                            }\n                            return prefix + \"Unknown\";\n                    }\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onListDataValueDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorData.prototype.onListDataValueDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var dialogDataValue = this.dialogDataValue;\n            dialogDataValue.value = oldValue;\n            dialogDataValue.open(item).then(function (newValue) {\n                if (newValue != null) {\n                    _this._selection.replaceDataValue(oldValue, newValue, list);\n                }\n            });\n        }\n    };\n    EEditorData.prototype.onSelectionChangeListDataValue = function (selection) {\n        var _a;\n        var listDataValue = this.listDataValue;\n        listDataValue.data.items = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.data.values) || [];\n        this.onListDataValueSelectionChange(listDataValue);\n    };\n    EEditorData.prototype.onSelectionChange = function (selection) {\n        this.state.isDisabled = selection.isEmpty();\n        this.onSelectionChangeListDataValue(selection);\n    };\n    EEditorData.prototype.onListDataValueSelectionChange = function (listDataValue) {\n        this.onListDataValueSelectionChangeButtonDelete(listDataValue);\n        this.onListDataValueSelectionChangeButtonBringForward(listDataValue);\n        this.onListDataValueSelectionChangeButtonSendBackward(listDataValue);\n    };\n    EEditorData.prototype.getType = function () {\n        return \"EEditorData\";\n    };\n    return EEditorData;\n}(DLayoutVertical));\nexport { EEditorData };\n//# sourceMappingURL=e-editor-data.js.map","import { __extends } from \"tslib\";\nimport { DListItem, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nvar EEditorLayerItem = /** @class */ (function (_super) {\n    __extends(EEditorLayerItem, _super);\n    function EEditorLayerItem(iconsEye, iconsEyeSlash, work, data, options) {\n        var _this = _super.call(this, data, options) || this;\n        _this._iconsEye = iconsEye;\n        _this._iconsEyeSlash = iconsEyeSlash;\n        _this._iconsWork = work;\n        return _this;\n    }\n    EEditorLayerItem.prototype.onSelect = function (e, value) {\n        if (e != null) {\n            var local = this._iconsWork;\n            if (\"data\" in e) {\n                this.toLocal(e.data.global, undefined, local);\n                if (local.x <= this._iconsEye.width + this.padding.getLeft()) {\n                    this.emit(\"eyeclick\", e, value, this);\n                    return;\n                }\n            }\n        }\n        _super.prototype.onSelect.call(this, e, value);\n    };\n    EEditorLayerItem.prototype.onDblClick = function (e, interactionManager) {\n        var global = UtilPointerEvent.toGlobal(e, interactionManager, this._iconsWork);\n        var local = this.toLocal(global, undefined, global);\n        if (this._iconsEye.width + this.padding.getLeft() < local.x) {\n            return _super.prototype.onDblClick.call(this, e, interactionManager);\n        }\n        else {\n            this.emit(\"eyedblclick\", e, interactionManager, this);\n            return false;\n        }\n    };\n    return EEditorLayerItem;\n}(DListItem));\nexport { EEditorLayerItem };\n//# sourceMappingURL=e-editor-layer-item.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DLayoutHorizontal, DLayoutVertical, DList, DText, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandLayerBringForward } from \"../command/e-command-layer-bring-forward\";\nimport { ECommandLayerCreate } from \"../command/e-command-layer-create\";\nimport { ECommandLayerDelete } from \"../command/e-command-layer-delete\";\nimport { ECommandLayerChange } from \"../command/e-command-layer-change\";\nimport { ECommandLayerSendBackward } from \"../command/e-command-layer-send-backward\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { EDialogLayer } from \"./e-dialog-layer\";\nimport { EDialogLayerValue } from \"./e-dialog-layer-value\";\nimport { EEditorLayerItem } from \"./e-editor-layer-item\";\nvar EEditorLayer = /** @class */ (function (_super) {\n    __extends(EEditorLayer, _super);\n    function EEditorLayer(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        _this._diagram = options.diagram;\n        _this._selection = options.selection;\n        _this._isInitialized = false;\n        _this._canvas = null;\n        return _this;\n    }\n    EEditorLayer.prototype.show = function () {\n        _super.prototype.show.call(this);\n        this.onShow();\n        return this;\n    };\n    EEditorLayer.prototype.onShow = function () {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onCanvasChange(this._diagram.canvas, true);\n    };\n    EEditorLayer.prototype.initLayout = function () {\n        var _this = this;\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonNew,\n                this.buttonDelete,\n                this.buttonBringForward,\n                this.buttonSendBackward\n            ]\n        }));\n        this.addChild(this.list);\n        // Layer change even handling\n        var diagram = this._diagram;\n        diagram.on(\"set\", function (newCanvas) {\n            if (_this.isShown()) {\n                _this.onCanvasChange(newCanvas, false);\n            }\n        });\n        diagram.on(\"ready\", function () {\n            if (_this.isShown()) {\n                _this.onLayerChange();\n            }\n        });\n        diagram.on(\"unset\", function () {\n            if (_this.isShown()) {\n                _this.onCanvasChange(null, false);\n            }\n        });\n    };\n    EEditorLayer.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"onLayerChangeBound\", {\n        get: function () {\n            var _this = this;\n            var result = this._onLayerChangeBound;\n            if (result == null) {\n                result = function () {\n                    _this.onLayerChange();\n                };\n                this._onLayerChangeBound = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorLayer.prototype, \"dialog\", {\n        get: function () {\n            var result = this._dialog;\n            if (result == null) {\n                result = this.newDialog();\n                this._dialog = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newDialog = function () {\n        return new EDialogLayer();\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonNew\", {\n        get: function () {\n            var result = this._buttonNew;\n            if (result == null) {\n                result = this.newButtonNew();\n                this._buttonNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorLayer.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        var canvas = this._canvas;\n        if (canvas) {\n            var dialogLayer = this.dialog;\n            dialogLayer\n                .reset(canvas.width, canvas.height)\n                .open(opener)\n                .then(function (value) {\n                if (value) {\n                    DControllers.getCommandController().push(new ECommandLayerCreate(value, canvas.layer, _this._selection));\n                }\n            });\n        }\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonDelete\", {\n        get: function () {\n            var result = this._buttonDelete;\n            if (result == null) {\n                result = this.newButtonDelete();\n                this._buttonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            on: {\n                active: function () {\n                    var canvas = _this._canvas;\n                    if (canvas) {\n                        var layer = canvas.layer;\n                        var size = layer.size();\n                        var active = layer.active;\n                        if (1 < size && active) {\n                            DControllers.getCommandController().push(new ECommandLayerDelete(active, canvas.layer, _this._selection));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonBringForward\", {\n        get: function () {\n            var result = this._buttonBringForward;\n            if (result == null) {\n                result = this.newButtonBringForward();\n                this._buttonBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    var canvas = _this._canvas;\n                    if (canvas) {\n                        var layer = canvas.layer;\n                        var active = layer.active;\n                        if (active) {\n                            var index = layer.children.indexOf(active);\n                            DControllers.getCommandController().push(new ECommandLayerBringForward(index, layer));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var result = this._buttonSendBackward;\n            if (result == null) {\n                result = this.newButtonSendBackward();\n                this._buttonSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    var canvas = _this._canvas;\n                    if (canvas) {\n                        var layer = canvas.layer;\n                        var active = layer.active;\n                        if (active) {\n                            var index = layer.children.indexOf(active);\n                            DControllers.getCommandController().push(new ECommandLayerSendBackward(index, layer));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"list\", {\n        get: function () {\n            var result = this._list;\n            if (result == null) {\n                result = this.newList();\n                this._list = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newList = function () {\n        var _this = this;\n        var icons = this._icons;\n        var iconsEye = icons.eye;\n        var iconsEyeSlash = icons.eye_slash;\n        var work = new Point();\n        var result = new DList({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            data: {\n                selection: {\n                    on: {\n                        change: function () {\n                            _this.onListSelectionChange();\n                        }\n                    }\n                },\n                toImage: function (layer) {\n                    return layer.visible ? iconsEye : iconsEyeSlash;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new EEditorLayerItem(iconsEye, iconsEyeSlash, work, data, {\n                        on: {\n                            eyeclick: function (e, value, item) {\n                                if (value) {\n                                    if (value.visible) {\n                                        value.visible = false;\n                                        item.image = iconsEyeSlash;\n                                    }\n                                    else {\n                                        value.visible = true;\n                                        item.image = iconsEye;\n                                    }\n                                }\n                            },\n                            dblclick: function (e, _, item) {\n                                _this.onListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            },\n            on: {\n                keydown: function (e) {\n                    if (UtilKeyboardEvent.isDeleteKey(e)) {\n                        var canvas = _this._canvas;\n                        if (canvas) {\n                            var layer = canvas.layer;\n                            var size = layer.size();\n                            var active = layer.active;\n                            if (1 < size && active) {\n                                DControllers.getCommandController().push(new ECommandLayerDelete(active, layer, _this._selection));\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        return result;\n    };\n    EEditorLayer.prototype.onListDblClick = function (e, _, item, list) {\n        var canvas = this._canvas;\n        if (canvas) {\n            var layerActive_1 = canvas.layer.active;\n            if (layerActive_1) {\n                var oldValue_1 = EDialogLayerValue.from(layerActive_1);\n                var dialogLayer = this.dialog;\n                dialogLayer.value = oldValue_1;\n                dialogLayer.open(item).then(function (newValue) {\n                    if (newValue && !newValue.isEqual(oldValue_1)) {\n                        DControllers.getCommandController().push(new ECommandLayerChange(layerActive_1, newValue, canvas.layer));\n                    }\n                });\n            }\n        }\n    };\n    EEditorLayer.prototype.onListLayerChange = function () {\n        var listLayer = this.list;\n        var canvas = this._canvas;\n        if (canvas) {\n            var layerContainer = canvas.layer;\n            var layers = layerContainer.children;\n            var layerActive = layerContainer.active;\n            var items = listLayer.data.items;\n            for (var i = 0, imax = layers.length; i < imax; ++i) {\n                items[i] = layers[imax - 1 - i];\n            }\n            items.length = layers.length;\n            listLayer.update(true);\n            if (layerActive != null) {\n                listLayer.data.selection.clearAndAdd(layerActive);\n            }\n            else {\n                listLayer.data.selection.clear();\n            }\n        }\n        else {\n            listLayer.data.items = [];\n        }\n    };\n    EEditorLayer.prototype.onListSelectionChange = function () {\n        var first = this.list.data.selection.first;\n        if (first) {\n            var canvas = this._canvas;\n            if (canvas) {\n                var layerActive = canvas.layer.active;\n                if (layerActive !== first) {\n                    // Unselect\n                    var selection = this._selection;\n                    if (!selection.isEmpty()) {\n                        var before = selection.store();\n                        if (selection.clear()) {\n                            var after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    // Change the active layer\n                    canvas.layer.active = first;\n                }\n            }\n        }\n    };\n    EEditorLayer.prototype.onCanvasChange = function (newCanvas, forcibly) {\n        var oldCanvas = this._canvas;\n        if (newCanvas !== this._canvas) {\n            var onLayerChangeBound = this.onLayerChangeBound;\n            if (oldCanvas != null) {\n                oldCanvas.layer.off(\"change\", onLayerChangeBound);\n            }\n            this._canvas = newCanvas;\n            if (newCanvas != null) {\n                this.state.isDisabled = false;\n                newCanvas.layer.on(\"change\", onLayerChangeBound);\n            }\n            else {\n                this.state.isDisabled = true;\n            }\n            this.onLayerChange();\n        }\n        else if (forcibly) {\n            this.onLayerChange();\n        }\n    };\n    EEditorLayer.prototype.isActiveDeletable = function (canvas) {\n        if (canvas) {\n            return 1 < canvas.layer.size();\n        }\n        return false;\n    };\n    EEditorLayer.prototype.isActiveNotLast = function (canvas) {\n        if (canvas) {\n            var layer = canvas.layer;\n            var layers = layer.children;\n            var active = layer.active;\n            if (active) {\n                return active !== layers[layers.length - 1];\n            }\n        }\n        return false;\n    };\n    EEditorLayer.prototype.isActiveNotFirst = function (canvas) {\n        if (canvas) {\n            var layer = canvas.layer;\n            var layers = layer.children;\n            var active = layer.active;\n            if (active) {\n                return active !== layers[0];\n            }\n        }\n        return false;\n    };\n    EEditorLayer.prototype.onLayerChange = function () {\n        // Update buttons\n        var canvas = this._canvas;\n        this.state.isEnabled = canvas != null;\n        this.buttonDelete.state.isEnabled = this.isActiveDeletable(canvas);\n        this.buttonSendBackward.state.isEnabled = this.isActiveNotFirst(canvas);\n        this.buttonBringForward.state.isEnabled = this.isActiveNotLast(canvas);\n        // Update the list\n        this.onListLayerChange();\n        // Update the modifier\n        this._selection.updateModifier();\n    };\n    EEditorLayer.prototype.getType = function () {\n        return \"EEditorLayer\";\n    };\n    return EEditorLayer;\n}(DLayoutVertical));\nexport { EEditorLayer };\n//# sourceMappingURL=e-editor-layer.js.map","import { EShapeEmbedded, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { getShapeTypeTheme } from \"./get-shape-type-theme\";\nexport var toShapeLabel = function (shape) {\n    var id = shape.id;\n    if (0 < id.length) {\n        return id;\n    }\n    var shapeType = shape.type;\n    if (EShapeType.EXTENSION <= shapeType) {\n        var extension = EShapeExtensions.get(shapeType);\n        if (extension && \"name\" in extension) {\n            var name_1 = extension.name;\n            if (name_1 != null) {\n                return name_1;\n            }\n        }\n        return getShapeTypeTheme().getLabel(shapeType);\n    }\n    else if (shapeType === EShapeType.EMBEDDED) {\n        if (shape instanceof EShapeEmbedded) {\n            return shape.name;\n        }\n        else {\n            return getShapeTypeTheme().getLabel(shapeType);\n        }\n    }\n    return getShapeTypeTheme().getLabel(shapeType);\n};\n//# sourceMappingURL=to-shape-label.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { getShapeTypeTheme } from \"./get-shape-type-theme\";\nexport var toShapeTypeLabel = function (shapeType) {\n    if (EShapeType.EXTENSION <= shapeType) {\n        var extension = EShapeExtensions.get(shapeType);\n        if (extension && \"name\" in extension) {\n            var name_1 = extension.name;\n            if (name_1 != null) {\n                return name_1;\n            }\n        }\n        return getShapeTypeTheme().getLabel(shapeType);\n    }\n    return getShapeTypeTheme().getLabel(shapeType);\n};\n//# sourceMappingURL=to-shape-type-label.js.map","import { __extends } from \"tslib\";\nimport { DButtonPrimary, DControllers, DDialogMessage, DDialogProcessing, DIndicatorProcessing, DInputLabel, DInputSearch, DInputText, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DSelect, DText, EShapeConnectorLine, EShapeType, isArray } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { toShapeLabel } from \"./to-shape-label\";\nimport { EEditorSearchConditionState } from \"./e-editor-search-condition-state\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { EEditorSearchConditionType } from \"./e-editor-search-condition-type\";\nimport { toShapeTypeLabel } from \"./to-shape-type-label\";\nvar EEditorSearch = /** @class */ (function (_super) {\n    __extends(EEditorSearch, _super);\n    function EEditorSearch(options) {\n        var _a;\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Finder\n        _this._finder = options.finder;\n        // Interval\n        _this._interval = (_a = options.interval) !== null && _a !== void 0 ? _a : 333;\n        // Diagram\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.list.data.clear();\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        // Layout\n        _this.addChild(_this.newTextLabel());\n        if (_this._finder != null) {\n            _this.addChild(_this.inputSearch);\n        }\n        else {\n            _this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: _this.theme.getInputIdLabel()\n                        }\n                    }),\n                    _this.inputId\n                ]\n            }));\n            _this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: _this.theme.getSelectTypeLabel()\n                        }\n                    }),\n                    _this.selectType\n                ]\n            }));\n            _this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: _this.theme.getSelectStateLabel()\n                        }\n                    }),\n                    _this.selectState\n                ]\n            }));\n            _this.addChild(_this.buttonExecute);\n        }\n        _this.addChild(_this.list);\n        return _this;\n    }\n    EEditorSearch.prototype.newTextLabel = function () {\n        return new DText({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"inputSearch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputSearch) !== null && _a !== void 0 ? _a : (this._inputSearch = this.newInputSearch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newInputSearch = function () {\n        var _this = this;\n        return new DInputSearch({\n            x: \"padding\",\n            width: \"padding\",\n            on: {\n                input: function (newValue) {\n                    _this.search(newValue);\n                },\n                enter: function (emitter) {\n                    _this.search(emitter.value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"inputId\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputId) !== null && _a !== void 0 ? _a : (this._inputId = this.newInputId()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newInputId = function () {\n        var _this = this;\n        return new DInputText({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.buttonExecute.activate();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"selectType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectType) !== null && _a !== void 0 ? _a : (this._selectType = this.newSelectType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newSelectType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EEditorSearchConditionType.NONE,\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newSelectTypeMenuItems()\n            }\n        });\n    };\n    EEditorSearch.prototype.newSelectTypeMenuItems = function () {\n        var _this = this;\n        var result = [\n            this.newSelectTypeMenuItem(EEditorSearchConditionType.NONE, this.theme.toTypeLabel(EEditorSearchConditionType.NONE)),\n            this.newSelectTypeMenuItemShape(EShapeType.CIRCLE),\n            this.newSelectTypeMenuItemShape(EShapeType.SEMICIRCLE),\n            this.newSelectTypeMenuItemShape(EShapeType.RECTANGLE),\n            this.newSelectTypeMenuItemShape(EShapeType.RECTANGLE_ROUNDED),\n            this.newSelectTypeMenuItemShape(EShapeType.TRIANGLE),\n            this.newSelectTypeMenuItemShape(EShapeType.TRIANGLE_ROUNDED),\n            this.newSelectTypeMenuItemShape(EShapeType.LINE),\n            this.newSelectTypeMenuItemShape(EShapeType.CONNECTOR_LINE),\n            this.newSelectTypeMenuItemShape(EShapeType.CONNECTOR_ELBOW),\n            this.newSelectTypeMenuItemShape(EShapeType.IMAGE),\n            this.newSelectTypeMenuItemShape(EShapeType.GROUP),\n            this.newSelectTypeMenuItemShape(EShapeType.BAR),\n            this.newSelectTypeMenuItemShape(EShapeType.BUTTON),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED_LAYER),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED_ACCEPTOR_EDGE)\n        ];\n        EShapeExtensions.each(function (extension) {\n            if (\"type\" in extension) {\n                result.push(_this.newSelectTypeMenuItemShape(extension.type));\n            }\n        });\n        return result;\n    };\n    EEditorSearch.prototype.newSelectTypeMenuItem = function (type, label) {\n        return {\n            width: 200,\n            value: type,\n            text: {\n                value: label\n            }\n        };\n    };\n    EEditorSearch.prototype.newSelectTypeMenuItemShape = function (type) {\n        return this.newSelectTypeMenuItem(type, toShapeTypeLabel(type));\n    };\n    EEditorSearch.prototype.getSelectTypeValue = function () {\n        var selectType = this._selectType;\n        if (selectType != null) {\n            var value = selectType.value;\n            if (value != null && 0 <= value) {\n                return value;\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"selectState\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectState) !== null && _a !== void 0 ? _a : (this._selectState = this.newSelectState()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newSelectState = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EEditorSearchConditionState.NONE,\n            menu: {\n                items: [\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.NONE, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.CONNECTED_FULLY, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.CONNECTED_PARTIALLY, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.UNCONNECTED, theme)\n                ]\n            }\n        });\n    };\n    EEditorSearch.prototype.newSelectStateMenuItem = function (state, theme) {\n        return {\n            value: state,\n            text: {\n                value: theme.toStateLabel(state)\n            }\n        };\n    };\n    EEditorSearch.prototype.getSelectStateValue = function () {\n        var result = this.selectState.value;\n        if (result != null && 0 <= result) {\n            return result;\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"buttonExecute\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonExecute) !== null && _a !== void 0 ? _a : (this._buttonExecute = this.newButtonExecute()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newButtonExecute = function () {\n        var _this = this;\n        return new DButtonPrimary({\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonExecuteTitle()\n            },\n            image: {\n                source: this._icons.editor_search\n            },\n            on: {\n                active: function (emitter) {\n                    _this.onButtonExecuteActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorSearch.prototype.onButtonExecuteActive = function (opener) {\n        var _a, _b;\n        var indicator = this.indicatorExecute;\n        indicator.start();\n        var shapes = [];\n        var canvas = this._diagram.canvas;\n        if (canvas != null) {\n            var id_1 = this.inputId.value.trim();\n            var type_1 = (_a = this.selectType.value) !== null && _a !== void 0 ? _a : EEditorSearchConditionType.NONE;\n            var state_1 = (_b = this.selectState.value) !== null && _b !== void 0 ? _b : EEditorSearchConditionState.NONE;\n            canvas.shape.each(function (shape) {\n                if (0 < id_1.length && shape.id.indexOf(id_1) < 0) {\n                    return true;\n                }\n                if (type_1 !== EEditorSearchConditionType.NONE && type_1 !== shape.type) {\n                    return true;\n                }\n                switch (state_1) {\n                    case EEditorSearchConditionState.CONNECTED_FULLY:\n                        if (shape instanceof EShapeConnectorLine) {\n                            var edge = shape.edge;\n                            var tail = edge.tail.acceptor.shape;\n                            var head = edge.head.acceptor.shape;\n                            if (tail == null || head == null) {\n                                return true;\n                            }\n                        }\n                        else {\n                            if (shape.connector.size() <= 0) {\n                                return true;\n                            }\n                        }\n                        break;\n                    case EEditorSearchConditionState.CONNECTED_PARTIALLY:\n                        if (shape instanceof EShapeConnectorLine) {\n                            var edge = shape.edge;\n                            var tail = edge.tail.acceptor.shape;\n                            var head = edge.head.acceptor.shape;\n                            if ((tail == null && head == null) || (tail != null && head != null)) {\n                                return true;\n                            }\n                        }\n                        else {\n                            return true;\n                        }\n                        break;\n                    case EEditorSearchConditionState.UNCONNECTED:\n                        if (shape instanceof EShapeConnectorLine) {\n                            var edge = shape.edge;\n                            var tail = edge.tail.acceptor.shape;\n                            var head = edge.head.acceptor.shape;\n                            if (tail != null || head != null) {\n                                return true;\n                            }\n                        }\n                        else {\n                            if (0 < shape.connector.size()) {\n                                return true;\n                            }\n                        }\n                        break;\n                }\n                shapes.push(shape);\n                return true;\n            });\n        }\n        this.list.data.clearAndAddAll(shapes);\n        indicator.resolve();\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"indicatorExecute\", {\n        get: function () {\n            var _a;\n            return ((_a = this._indicatorExecute) !== null && _a !== void 0 ? _a : (this._indicatorExecute = this.newIndicatorExecute()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newIndicatorExecute = function () {\n        return new DIndicatorProcessing(this.buttonExecute);\n    };\n    EEditorSearch.prototype.search = function (word) {\n        var _this = this;\n        var threshold = 500;\n        var searching = this._searching;\n        var searched = this._searched;\n        var searchedAt = this._searchedAt;\n        if (searching !== searched || (searchedAt != null && Date.now() - searchedAt < threshold)) {\n            this._requested = word;\n            if (this._timeoutId == null) {\n                this._timeoutId = window.setTimeout(function () {\n                    _this._timeoutId = null;\n                    var newWord = _this._requested;\n                    if (newWord != null) {\n                        _this._requested = undefined;\n                        _this.search(newWord);\n                    }\n                }, threshold);\n            }\n        }\n        else {\n            var timeoutId = this._timeoutId;\n            if (timeoutId != null) {\n                this._timeoutId = null;\n                window.clearTimeout(timeoutId);\n            }\n            this._searching = word;\n            this.doSearch(word).then(function (result) {\n                _this.list.data.clearAndAddAll(result.shapes);\n                _this._searched = result.word;\n                _this._searchedAt = Date.now();\n            });\n        }\n    };\n    EEditorSearch.prototype.doSearch = function (word) {\n        var finder = this._finder;\n        if (finder == null) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n        var canvas = this._diagram.canvas;\n        if (canvas == null) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n        var trimmed = word.trim();\n        if (trimmed.length <= 0) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n        try {\n            var found = finder(canvas, trimmed);\n            if (isArray(found)) {\n                return Promise.resolve({\n                    word: word,\n                    shapes: found\n                });\n            }\n            else {\n                return found.then(function (shapes) {\n                    return {\n                        word: word,\n                        shapes: shapes\n                    };\n                }, function () {\n                    return {\n                        word: word,\n                        shapes: []\n                    };\n                });\n            }\n        }\n        catch (_a) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"list\", {\n        get: function () {\n            var _a;\n            return ((_a = this._list) !== null && _a !== void 0 ? _a : (this._list = this.newList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newList = function () {\n        var _this = this;\n        return new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return toShapeLabel(value);\n                },\n                toTitle: function (value) {\n                    return undefined;\n                },\n                toImage: function (value) {\n                    return null;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            select: function (value, item) {\n                                _this.onListItemDown(value, item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    };\n    EEditorSearch.prototype.onListItemDown = function (value, item) {\n        var shape = value;\n        if (shape != null) {\n            var canvas = this._diagram.canvas;\n            var layer = shape.root.parent;\n            if (canvas != null && layer != null) {\n                // Selection\n                var selection = this._selection;\n                var before = selection.store();\n                if (selection.set(shape)) {\n                    selection.focus();\n                    var after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n                // Change the active layer\n                var layerActive = canvas.layer.active;\n                if (layerActive !== layer) {\n                    canvas.layer.active = layer;\n                }\n            }\n            else {\n                this.dialogError.open(item);\n            }\n        }\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"dialogError\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogError) !== null && _a !== void 0 ? _a : (this._dialogError = this.newDialogError()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newDialogError = function () {\n        return new DDialogMessage({\n            message: this.theme.getDialogErrorLabel()\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"dialogProcessing\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogProcessing) !== null && _a !== void 0 ? _a : (this._dialogProcessing = this.newDialogProcessing()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newDialogProcessing = function () {\n        return new DDialogProcessing();\n    };\n    EEditorSearch.prototype.getType = function () {\n        return \"EEditorSearch\";\n    };\n    return EEditorSearch;\n}(DLayoutVertical));\nexport { EEditorSearch };\n//# sourceMappingURL=e-editor-search.js.map","export var EEditorSearchConditionType = {\n    NONE: -1\n};\n//# sourceMappingURL=e-editor-search-condition-type.js.map","export var EEditorSearchConditionState = {\n    NONE: -1,\n    UNCONNECTED: 0,\n    CONNECTED_PARTIALLY: 1,\n    CONNECTED_FULLY: 2\n};\n//# sourceMappingURL=e-editor-search-condition-state.js.map","import { __extends } from \"tslib\";\nimport { createLine, createPolygon, DButton, DButtonAmbient, DButtonCheck, DButtonCheckRight, DButtonColor, DButtonColorGradient, DButtonFile, DButtonFileAs, DButtonGroup, DDialogSelect, DInputReal, DInputRealAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DPane, DSelect, DText, EShapeAcceptorEdgeSide, EShapeCapabilities, EShapeCapability, EShapeCircle, EShapeConnectorElbow, EShapeConnectorLine, EShapeCopyPart, EShapeCorner, EShapeDefaults, EShapeEmbeddeds, EShapeFillDirection, EShapeGroup, EShapeImage, EShapeLine, EShapeLockPart, EShapePointsFormatters, EShapePointsMarkerType, EShapePointsStyle, EShapePolygon, EShapeRectangle, EShapeRectangleRounded, EShapeResourceManagerDeserializationMode, EShapeSemicircle, EShapeStrokeSide, EShapeStrokeStyle, EShapeTriangle, EShapeTriangleRounded, EShapeType, isFunction, isString, toGradientImageUrl, toImageElement } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensionFactories } from \"../extension/e-shape-extension-factories\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { newDialogSelectWithThumbnails } from \"./e-dialog-select-with-thumbnails\";\nimport { EEDITOR_BUTTON_COUNT } from \"./e-editors\";\nvar EEditorShape = /** @class */ (function (_super) {\n    __extends(EEditorShape, _super);\n    function EEditorShape(options) {\n        var _a, _b;\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        _this._canvas = options.canvas;\n        _this._selection = options.selection;\n        _this._isInitialized = false;\n        var piece = options.piece;\n        if (piece) {\n            _this._isPieceEnabled = piece.enable;\n            _this._pieceExcluder = piece.exclude;\n            _this._controller = piece.controller;\n        }\n        else {\n            _this._isPieceEnabled = false;\n        }\n        _this._isChangeable = options.changeable;\n        _this._isDanglingConnectorAllowed = (_b = (_a = options === null || options === void 0 ? void 0 : options.connector) === null || _a === void 0 ? void 0 : _a.dangling) !== null && _b !== void 0 ? _b : false;\n        return _this;\n    }\n    EEditorShape.prototype.show = function () {\n        _super.prototype.show.call(this);\n        this.onShow();\n        return this;\n    };\n    EEditorShape.prototype.onShow = function () {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onSelectionChange();\n    };\n    EEditorShape.prototype.initLayout = function () {\n        var _this = this;\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.layoutChangeTo,\n                this.buttonFill,\n                this.buttonFillColor,\n                this.layoutTexture,\n                this.inputFillPercent,\n                this.layoutFillDirection,\n                this.buttonStroke,\n                this.buttonStrokeColor,\n                this.inputStrokeWidth,\n                this.inputStrokeAlign,\n                this.layoutStrokeSide,\n                this.textCorner,\n                this.inputCornerRadius,\n                this.layoutCorner,\n                this.layoutLine,\n                this.selectLineStyle,\n                this.selectLineType,\n                this.layoutLineTail,\n                this.selectLineTailType,\n                this.layoutLineTailSize,\n                this.buttonLineTailColor,\n                this.inputLineTailMargin,\n                this.layoutLineHead,\n                this.selectLineHeadType,\n                this.layoutLineHeadSize,\n                this.buttonLineHeadColor,\n                this.inputLineHeadMargin\n            ]\n        });\n        // Selection change handling\n        this._selection.on(\"change\", function () {\n            if (_this.isShown()) {\n                _this.onSelectionChange();\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutChangeTo\", {\n        get: function () {\n            var result = this._layoutChangeTo;\n            if (result === undefined) {\n                result = this._isChangeable !== false ? this.newLayoutChangeTo() : null;\n                this._layoutChangeTo = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutChangeTo = function () {\n        var _this = this;\n        var children = [\n            this.newTextChangeToLabel(),\n            this.buttonCircle,\n            this.buttonSemicircle,\n            this.buttonRectangle,\n            this.buttonRectangleRounded,\n            this.buttonTriangle,\n            this.buttonTriangleRounded,\n            this.buttonLine,\n            this.buttonLineConnector,\n            this.buttonElbowConnector,\n            this.buttonPolygon,\n            this.buttonImage,\n            this.buttonGraphicPiece\n        ];\n        EShapeExtensionFactories.each(function (factory) {\n            children.push(_this.newButtonExtensionFactory(factory));\n        });\n        EShapeExtensions.each(function (extension) {\n            if (_this.isExtensionReplacable(extension)) {\n                var creator = extension.creator;\n                if (isFunction(creator)) {\n                    children.push(_this.newButtonExtension(extension, creator));\n                }\n            }\n        });\n        children.push(this.buttonGroup, this.buttonUngroup);\n        return new DLayoutVertical({\n            width: \"100%\",\n            height: \"auto\",\n            column: EEDITOR_BUTTON_COUNT,\n            children: children\n        });\n    };\n    EEditorShape.prototype.isExtensionReplacable = function (extension) {\n        if (\"icon\" in extension) {\n            if (\"type\" in extension) {\n                var capability = EShapeCapabilities.get(extension.type);\n                if (capability != null) {\n                    if (capability & EShapeCapability.REPLACING) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    EEditorShape.prototype.newTextChangeToLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getTextChangeToLabel()\n            },\n            clear: \"AFTER\"\n        });\n    };\n    EEditorShape.prototype.newButtonExtensionFactory = function (factory) {\n        var _this = this;\n        var selectDialog = null;\n        return new DButtonAmbient({\n            image: {\n                source: factory.icon.texture\n            },\n            title: this.toExtensionTitle(factory),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function (emitter) {\n                    selectDialog = selectDialog || _this.newDialogSelectExtensionFactory(factory);\n                    selectDialog.open(emitter);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectExtensionFactory = function (factory) {\n        var _this = this;\n        return new DDialogSelect({\n            controller: factory,\n            list: {\n                data: {\n                    toLabel: factory.item.toLabel\n                }\n            },\n            on: {\n                select: function (value) {\n                    factory.item.toCreator(value).then(function (creator) {\n                        _this._selection.replace(creator);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newButtonExtension = function (extension, creator) {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: extension.icon.texture\n            },\n            title: this.toExtensionTitle(extension),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(creator);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.toExtensionTitle = function (extension) {\n        var title = extension.title;\n        if (isString(title)) {\n            return title;\n        }\n        return title.change;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCircle) !== null && _a !== void 0 ? _a : (this._buttonCircle = this.newButtonCircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCircle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_circle\n            },\n            title: this.theme.getButtonCircleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.CIRCLE) {\n                            return new EShapeCircle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonSemicircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSemicircle) !== null && _a !== void 0 ? _a : (this._buttonSemicircle = this.newButtonSemicircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonSemicircle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_semicircle\n            },\n            title: this.theme.getButtonSemicircleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.SEMICIRCLE) {\n                            return new EShapeSemicircle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonRectangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonRectangle) !== null && _a !== void 0 ? _a : (this._buttonRectangle = this.newButtonRectangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonRectangle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_rectangle\n            },\n            title: this.theme.getButtonRectangleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.RECTANGLE) {\n                            return new EShapeRectangle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonRectangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonRectangleRounded) !== null && _a !== void 0 ? _a : (this._buttonRectangleRounded = this.newButtonRectangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonRectangleRounded = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_rectangle_rounded\n            },\n            title: this.theme.getButtonRectangleRoundedTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.RECTANGLE_ROUNDED) {\n                            return new EShapeRectangleRounded().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTriangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTriangle) !== null && _a !== void 0 ? _a : (this._buttonTriangle = this.newButtonTriangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTriangle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_triangle\n            },\n            title: this.theme.getButtonTriangleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.TRIANGLE) {\n                            return new EShapeTriangle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTriangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTriangleRounded) !== null && _a !== void 0 ? _a : (this._buttonTriangleRounded = this.newButtonTriangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTriangleRounded = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_triangle_rounded\n            },\n            title: this.theme.getButtonTriangleRoundedTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.TRIANGLE_ROUNDED) {\n                            return new EShapeTriangleRounded().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLine) !== null && _a !== void 0 ? _a : (this._buttonLine = this.newButtonLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLine = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_line\n            },\n            title: this.theme.getButtonLineTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        return _this.replaceLine(existing);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.replaceLine = function (existing) {\n        if (existing.type !== EShapeType.LINE) {\n            var points = existing.points;\n            if (points != null) {\n                return new EShapeLine().copy(existing);\n            }\n            else {\n                var size = existing.size;\n                var sxh = size.x * 0.5;\n                var syh = size.y * 0.5;\n                return createLine([-sxh, -syh, +sxh, +syh], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE).copy(existing, EShapeCopyPart.ALL & ~(EShapeCopyPart.SIZE | EShapeCopyPart.POINTS));\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonPolygon\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonPolygon) !== null && _a !== void 0 ? _a : (this._buttonPolygon = this.newButtonPolygon()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonPolygon = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_polygon\n            },\n            title: this.theme.getButtonPolygonTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        return _this.replacePolygon(existing);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.replacePolygon = function (existing) {\n        if (existing.type !== EShapeType.POLYGON) {\n            var points = existing.points;\n            if (points != null && 3 <= points.length) {\n                var result = new EShapePolygon().copy(existing);\n                result.points.style |= EShapePointsStyle.CLOSED;\n                return result;\n            }\n            else {\n                var size = existing.size;\n                var sxh = size.x * 0.5;\n                var syh = size.y * 0.5;\n                return createPolygon([-sxh, -syh, sxh, -syh, sxh, +syh, -sxh, +syh]).copy(existing, EShapeCopyPart.ALL & ~(EShapeCopyPart.SIZE | EShapeCopyPart.POINTS));\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineConnector) !== null && _a !== void 0 ? _a : (this._buttonLineConnector = this.newButtonLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineConnector = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_line_connector\n            },\n            title: this.theme.getButtonLineConnectorTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        return _this.replaceLineConnector(existing);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.replaceLineConnector = function (existing) {\n        if (existing.type !== EShapeType.CONNECTOR_LINE) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeConnectorLine().copy(existing);\n            }\n            else if (this._isDanglingConnectorAllowed) {\n                return this.replaceConnector(existing, new EShapeConnectorLine());\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonElbowConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonElbowConnector) !== null && _a !== void 0 ? _a : (this._buttonElbowConnector = this.newButtonElbowConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonElbowConnector = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_elbow_connector\n            },\n            title: this.theme.getButtonElbowConnectorTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        return _this.replaceElbowConnector(existing);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.replaceElbowConnector = function (existing) {\n        if (existing.type !== EShapeType.CONNECTOR_ELBOW) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeConnectorElbow().copy(existing);\n            }\n            else if (this._isDanglingConnectorAllowed) {\n                return this.replaceConnector(existing, new EShapeConnectorElbow());\n            }\n        }\n        return null;\n    };\n    EEditorShape.prototype.replaceConnector = function (existing, result) {\n        result.lock(EShapeLockPart.ALL);\n        result.fill.alpha = 1;\n        var marker = result.points.marker;\n        marker.tail.type = EShapePointsMarkerType.CIRCLE;\n        marker.head.type = EShapePointsMarkerType.TRIANGLE;\n        result.copy(existing, EShapeCopyPart.ALL &\n            ~(EShapeCopyPart.SIZE | EShapeCopyPart.POINTS | EShapeCopyPart.TRANSFORM));\n        var size = existing.size;\n        var sxh = size.x * 0.5;\n        var syh = size.y * 0.5;\n        var localTransform = existing.transform.localTransform;\n        var rx = localTransform.a * sxh + localTransform.c * syh;\n        var ry = localTransform.b * sxh + localTransform.d * syh;\n        var tx = localTransform.tx;\n        var ty = localTransform.ty;\n        var edge = result.edge;\n        edge.lock();\n        edge.tail.set(null, null, null, null, 0, -rx + tx, -ry + ty, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        edge.head.set(null, null, null, null, 0, +rx + tx, +ry + ty, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        edge.unlock();\n        result.unlock(EShapeLockPart.ALL, true);\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonImage\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonImage) !== null && _a !== void 0 ? _a : (this._buttonImage = this.newButtonImage()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonImage = function () {\n        var _this = this;\n        return new DButtonFile({\n            image: {\n                source: this._icons.editor_image\n            },\n            as: DButtonFileAs.DATA_URL,\n            title: this.theme.getButtonImageTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                open: function (dataUrl) {\n                    toImageElement(dataUrl).then(function (item) {\n                        _this._selection.replace(function (existing) {\n                            return new EShapeImage(item).copy(existing, EShapeCopyPart.ALL & ~EShapeCopyPart.IMAGE);\n                        });\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonGraphicPiece\", {\n        get: function () {\n            var result = this._buttonGraphicPiece;\n            if (result === undefined) {\n                result = this._isPieceEnabled ? this.newButtonGraphicPiece() : null;\n                this._buttonGraphicPiece = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonGraphicPiece = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.graphic_piece\n            },\n            title: this.theme.getButtonGraphicPieceTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function (emitter) {\n                    _this.onButtonGraphicPieceActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.onButtonGraphicPieceActive = function (opener) {\n        this.dialogSelectGraphicPiece.then(function (dialogSelectGraphicPiece) {\n            dialogSelectGraphicPiece.open(opener);\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"dialogSelectGraphicPiece\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSelectGraphicPiece) !== null && _a !== void 0 ? _a : (this._dialogSelectGraphicPiece = this.newDialogSelectGraphicPiece()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newDialogSelectGraphicPiece = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            var controller = _this._controller;\n            if (controller) {\n                if (controller.toPieceThumbnail) {\n                    var result = _this.newDialogSelectGraphicPieceImage(controller);\n                    result.categories = canvas.category.items;\n                    return result;\n                }\n                else {\n                    var result = _this.newDialogSelectGraphicPieceNoImage(controller);\n                    result.categories = canvas.category.items;\n                    return result;\n                }\n            }\n            else {\n                var result = _this.newDialogSelectGraphicPieceNoController();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceNoImage = function (controller) {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this.newDialogSelectGraphicPieceController(controller),\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectGraphicPieceSelect(value, controller);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceImage = function (controller) {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this.newDialogSelectGraphicPieceController(controller), controller.toPieceThumbnail, function (value) {\n            _this.onDialogSelectGraphicPieceSelect(value, controller);\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceNoController = function () {\n        return new DDialogSelect({\n            controller: {\n                search: function () {\n                    return Promise.resolve([]);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceController = function (controller) {\n        var _this = this;\n        var graphicPiece = controller.graphic.piece;\n        return {\n            search: function (word, categoryId) {\n                return graphicPiece.search(word, categoryId).then(function (pieces) {\n                    return _this.toDialogSelectGraphicPieceResult(pieces);\n                });\n            }\n        };\n    };\n    EEditorShape.prototype.toDialogSelectGraphicPieceResult = function (targets) {\n        var _a;\n        var pieceId = (_a = this._pieceExcluder) === null || _a === void 0 ? void 0 : _a.call(this);\n        if (pieceId == null) {\n            return targets;\n        }\n        var result = [];\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (target.id !== pieceId) {\n                result.push(target);\n            }\n        }\n        return result;\n    };\n    EEditorShape.prototype.onDialogSelectGraphicPieceSelect = function (value, controller) {\n        var _this = this;\n        controller.graphic.piece.get(value.id).then(function (serialized) {\n            EShapeEmbeddeds.from(serialized, controller.graphic, EShapeResourceManagerDeserializationMode.EDITOR).then(function (shape) {\n                _this._selection.replace(function (existing) {\n                    return shape.clone().copy(existing);\n                });\n            });\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonGroup) !== null && _a !== void 0 ? _a : (this._buttonGroup = this.newButtonGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonGroup = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_group\n            },\n            title: this.theme.getButtonGroupTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.group();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonUngroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonUngroup) !== null && _a !== void 0 ? _a : (this._buttonUngroup = this.newButtonUngroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonUngroup = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_ungroup\n            },\n            title: this.theme.getButtonUngroupTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.ungroup();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFill\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFill) !== null && _a !== void 0 ? _a : (this._buttonFill = this.newButtonFill()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFill = function () {\n        var selection = this._selection;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonFillLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    selection.setFillEnabled(true);\n                },\n                inactive: function () {\n                    selection.setFillEnabled(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFillColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFillColor) !== null && _a !== void 0 ? _a : (this._buttonFillColor = this.newButtonFillColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFillColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            title: this.theme.getButtonFillColorTitle(),\n            on: {\n                change: function (value) {\n                    _this._selection.setFill(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputFillPercent\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputFillPercent) !== null && _a !== void 0 ? _a : (this._inputFillPercent = this.newInputFillPercent()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputFillPercent = function () {\n        var _this = this;\n        return new DInputReal({\n            width: \"100%\",\n            min: 0,\n            step: 1,\n            max: 100,\n            title: this.theme.getInputFillPercentTitle(),\n            text: {\n                formatter: function (value) {\n                    return \"\".concat(+(value * 100).toFixed(2), \" %\");\n                }\n            },\n            editing: {\n                formatter: function (value) {\n                    return \"\".concat(+(value * 100).toFixed(2));\n                },\n                unformatter: function (text) {\n                    return parseFloat(text) * 0.01;\n                }\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setFillPercent(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutFillDirection\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutFillDirection) !== null && _a !== void 0 ? _a : (this._layoutFillDirection = this.newLayoutFillDirection()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutFillDirection = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonFillDirectionTop,\n                this.buttonFillDirectionRight,\n                this.buttonFillDirectionBottom,\n                this.buttonFillDirectionLeft,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFillDirectionGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFillDirectionGroup) !== null && _a !== void 0 ? _a : (this._buttonFillDirectionGroup = new DButtonGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorShape.prototype, \"buttonFillDirectionTop\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFillDirectionTop) !== null && _a !== void 0 ? _a : (this._buttonFillDirectionTop = this.newButtonFillDirectionTop()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFillDirectionTop = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.fill_direction_top\n            },\n            title: this.theme.getButtonFillDirectionTopTitle(),\n            group: this.buttonFillDirectionGroup,\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setFillDirection(EShapeFillDirection.TOP);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFillDirectionRight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFillDirectionRight) !== null && _a !== void 0 ? _a : (this._buttonFillDirectionRight = this.newButtonFillDirectionRight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFillDirectionRight = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.fill_direction_right\n            },\n            title: this.theme.getButtonFillDirectionRightTitle(),\n            group: this.buttonFillDirectionGroup,\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setFillDirection(EShapeFillDirection.RIGHT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFillDirectionBottom\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFillDirectionBottom) !== null && _a !== void 0 ? _a : (this._buttonFillDirectionBottom = this.newButtonFillDirectionBottom()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFillDirectionBottom = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.fill_direction_bottom\n            },\n            title: this.theme.getButtonFillDirectionBottomTitle(),\n            group: this.buttonFillDirectionGroup,\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setFillDirection(EShapeFillDirection.BOTTOM);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFillDirectionLeft\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFillDirectionLeft) !== null && _a !== void 0 ? _a : (this._buttonFillDirectionLeft = this.newButtonFillDirectionLeft()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFillDirectionLeft = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.fill_direction_left\n            },\n            title: this.theme.getButtonFillDirectionLeftTitle(),\n            group: this.buttonFillDirectionGroup,\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setFillDirection(EShapeFillDirection.LEFT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStroke\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStroke) !== null && _a !== void 0 ? _a : (this._buttonStroke = this.newButtonStroke()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStroke = function () {\n        var selection = this._selection;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonStrokeLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    selection.setStrokeEnabled(true);\n                },\n                inactive: function () {\n                    selection.setStrokeEnabled(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeColor) !== null && _a !== void 0 ? _a : (this._buttonStrokeColor = this.newButtonStrokeColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setStroke(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputStrokeWidth\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputStrokeWidth) !== null && _a !== void 0 ? _a : (this._inputStrokeWidth = this.newInputStrokeWidth()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputStrokeWidth = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputStrokeWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                on: {\n                    change: function (value) {\n                        _this._selection.setStrokeWidth(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputStrokeAlign\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputStrokeAlign) !== null && _a !== void 0 ? _a : (this._inputStrokeAlign = this.newInputStrokeAlign()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputStrokeAlign = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputStrokeAlignLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                max: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setStrokeAlign(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutStrokeSide\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutStrokeSide) !== null && _a !== void 0 ? _a : (this._layoutStrokeSide = this.newLayoutStrokeSide()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutStrokeSide = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonStrokeSideTop,\n                this.buttonStrokeSideRight,\n                this.buttonStrokeSideBottom,\n                this.buttonStrokeSideLeft,\n                this.buttonStrokeExpandable,\n                this.buttonStrokeShrinkable,\n                this.buttonStrokeScalableDotDash,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideTop\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideTop) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideTop = this.newButtonStrokeSideTop()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideTop = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_top\n            },\n            title: this.theme.getButtonStrokeSideTopTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.TOP, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.TOP, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideRight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideRight) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideRight = this.newButtonStrokeSideRight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideRight = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_right\n            },\n            title: this.theme.getButtonStrokeSideRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.RIGHT, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.RIGHT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideBottom\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideBottom) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideBottom = this.newButtonStrokeSideBottom()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideBottom = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_bottom\n            },\n            title: this.theme.getButtonStrokeSideBottomTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.BOTTOM, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.BOTTOM, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideLeft\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideLeft) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideLeft = this.newButtonStrokeSideLeft()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideLeft = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_left\n            },\n            title: this.theme.getButtonStrokeSideLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.LEFT, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.LEFT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textCorner\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textCorner) !== null && _a !== void 0 ? _a : (this._textCorner = this.newTextCorner()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextCorner = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getTextCornerLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputCornerRadius\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputCornerRadius) !== null && _a !== void 0 ? _a : (this._inputCornerRadius = this.newInputCornerRadius()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputCornerRadius = function () {\n        var _this = this;\n        return new DInputReal({\n            width: \"100%\",\n            min: 0,\n            step: 1,\n            max: 100,\n            text: {\n                formatter: function (value) {\n                    return \"\".concat(+(value * 100).toFixed(2), \" %\");\n                }\n            },\n            editing: {\n                formatter: function (value) {\n                    return \"\".concat(+(value * 100).toFixed(2));\n                },\n                unformatter: function (text) {\n                    return parseFloat(text) * 0.01;\n                }\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setRadius(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutCorner\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutCorner) !== null && _a !== void 0 ? _a : (this._layoutCorner = this.newLayoutCorner()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutCorner = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonCornerTopLeft,\n                this.buttonCornerTopRight,\n                this.buttonCornerBottomRight,\n                this.buttonCornerBottomLeft,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerTopLeft\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerTopLeft) !== null && _a !== void 0 ? _a : (this._buttonCornerTopLeft = this.newButtonCornerTopLeft()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerTopLeft = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_top_left\n            },\n            title: this.theme.getButtonCornerTopLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.TOP_LEFT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.TOP_LEFT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerTopRight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerTopRight) !== null && _a !== void 0 ? _a : (this._buttonCornerTopRight = this.newButtonCornerTopRight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerTopRight = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_top_right\n            },\n            title: this.theme.getButtonCornerTopRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.TOP_RIGHT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.TOP_RIGHT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerBottomRight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerBottomRight) !== null && _a !== void 0 ? _a : (this._buttonCornerBottomRight = this.newButtonCornerBottomRight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerBottomRight = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_bottom_right\n            },\n            title: this.theme.getButtonCornerBottomRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_RIGHT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_RIGHT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerBottomLeft\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerBottomLeft) !== null && _a !== void 0 ? _a : (this._buttonCornerBottomLeft = this.newButtonCornerBottomLeft()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerBottomLeft = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_bottom_left\n            },\n            title: this.theme.getButtonCornerBottomLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_LEFT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_LEFT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLine) !== null && _a !== void 0 ? _a : (this._layoutLine = this.newLayoutLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLine = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLine, this.buttonLineClosed, this.buttonLineLock]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textLine) !== null && _a !== void 0 ? _a : (this._textLine = this.newTextLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextLine = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineLock\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineLock) !== null && _a !== void 0 ? _a : (this._buttonLineLock = this.newButtonLineLock()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.LINE);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.LINE);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.isLocked = function (last, target) {\n        if (last == null) {\n            return false;\n        }\n        var capability = last.getCapability();\n        if (capability == null) {\n            return false;\n        }\n        if (capability.locked & target) {\n            return true;\n        }\n        return false;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineStyle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineStyle) !== null && _a !== void 0 ? _a : (this._selectLineStyle = this.newSelectLineStyle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineStyle = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapeStrokeStyle.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeStrokeStyle.NONE,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED_DENSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED_DENSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED_LOOSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED_LOOSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED_DENSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED_DENSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED_LOOSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED_LOOSELY)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setLineStyle(value !== null && value !== void 0 ? value : EShapeStrokeStyle.NONE, EShapeStrokeStyle.DOTTED_MASK | EShapeStrokeStyle.DASHED_MASK);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineType) !== null && _a !== void 0 ? _a : (this._selectLineType = this.newSelectLineType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineType = function () {\n        var _this = this;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsStyle.NONE,\n            menu: {\n                items: this.newSelectLineTypeMenuItems()\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setPointsStyle(value !== null && value !== void 0 ? value : EShapePointsStyle.NONE, EShapePointsStyle.FORMATTER_MASK);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newSelectLineTypeMenuItems = function () {\n        var result = [\n            {\n                value: EShapePointsStyle.NONE,\n                text: {\n                    value: this.theme.getSelectLineTypeLabel(EShapePointsStyle.NONE)\n                }\n            }\n        ];\n        EShapePointsFormatters.each(function (id, datum) {\n            result.push({\n                value: id << EShapePointsStyle.FORMATTER_SHIFT,\n                text: {\n                    value: datum.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineClosed\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineClosed) !== null && _a !== void 0 ? _a : (this._buttonLineClosed = this.newButtonLineClosed()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineClosed = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.line_closed\n            },\n            title: this.theme.getButtonLineClosedTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setPointsStyle(EShapePointsStyle.CLOSED, EShapePointsStyle.NONE);\n                },\n                inactive: function () {\n                    selection.setPointsStyle(EShapePointsStyle.NONE, EShapePointsStyle.CLOSED);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeExpandable\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeExpandable) !== null && _a !== void 0 ? _a : (this._buttonStrokeExpandable = this.newButtonStrokeExpandable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeExpandable = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_expandable\n            },\n            title: this.theme.getButtonStrokeExpandableTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_EXPANDING_WIDTH);\n                },\n                inactive: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_EXPANDING_WIDTH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeShrinkable\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeShrinkable) !== null && _a !== void 0 ? _a : (this._buttonStrokeShrinkable = this.newButtonStrokeShrinkable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeShrinkable = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_shrinkable\n            },\n            title: this.theme.getButtonStrokeShrinkableTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_SHRINKING_WIDTH);\n                },\n                inactive: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_SHRINKING_WIDTH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeScalableDotDash\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeScalableDotDash) !== null && _a !== void 0 ? _a : (this._buttonStrokeScalableDotDash = this.newButtonStrokeScalableDotDash()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeScalableDotDash = function () {\n        var selection = this._selection;\n        return new DButtonCheckRight({\n            image: {\n                source: this._icons.stroke_scalable_dot_dash\n            },\n            title: this.theme.getButtonStrokeScalableDotDashTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH);\n                },\n                inactive: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineTail\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineTail) !== null && _a !== void 0 ? _a : (this._layoutLineTail = this.newLayoutLineTail()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineTail = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLineTail, this.buttonLineTailLock]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textLineTail\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textLineTail) !== null && _a !== void 0 ? _a : (this._textLineTail = this.newTextLineTail()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextLineTail = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineTailLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineTailLock\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineTailLock) !== null && _a !== void 0 ? _a : (this._buttonLineTailLock = this.newButtonLineTailLock()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineTailLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.LINE_TAIL);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.LINE_TAIL);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineTailType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineTailType) !== null && _a !== void 0 ? _a : (this._selectLineTailType = this.newSelectLineTailType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineTailType = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsMarkerType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapePointsMarkerType.NONE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.CIRCLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.CIRCLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.TRIANGLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.TRIANGLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.RECTANGLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.RECTANGLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailType(value !== null && value !== void 0 ? value : EShapePointsMarkerType.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineTailSize\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineTailSize) !== null && _a !== void 0 ? _a : (this._layoutLineTailSize = this.newLayoutLineTailSize()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineTailSize = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.inputLineTailSizeX, this.inputLineTailSizeY]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineTailSizeX\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineTailSizeX) !== null && _a !== void 0 ? _a : (this._inputLineTailSizeX = this.newInputLineTailSizeX()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineTailSizeX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailSizeX(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineTailSizeY\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineTailSizeY) !== null && _a !== void 0 ? _a : (this._inputLineTailSizeY = this.newInputLineTailSizeY()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineTailSizeY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailSizeY(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineTailColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineTailColor) !== null && _a !== void 0 ? _a : (this._buttonLineTailColor = this.newButtonLineTailColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineTailColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineTailMargin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineTailMargin) !== null && _a !== void 0 ? _a : (this._inputLineTailMargin = this.newInputLineTailMargin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineTailMargin = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLineTailMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setLineTailMargin(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineHead\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineHead) !== null && _a !== void 0 ? _a : (this._layoutLineHead = this.newLayoutLineHead()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineHead = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLineHead, this.buttonLineHeadLock]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textLineHead\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textLineHead) !== null && _a !== void 0 ? _a : (this._textLineHead = this.newTextLineHead()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextLineHead = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineHeadLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineHeadLock\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineHeadLock) !== null && _a !== void 0 ? _a : (this._buttonLineHeadLock = this.newButtonLineHeadLock()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineHeadLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.LINE_HEAD);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.LINE_HEAD);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineHeadType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineHeadType) !== null && _a !== void 0 ? _a : (this._selectLineHeadType = this.newSelectLineHeadType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineHeadType = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsMarkerType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapePointsMarkerType.NONE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.CIRCLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.CIRCLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.TRIANGLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.TRIANGLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.RECTANGLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.RECTANGLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadType(value !== null && value !== void 0 ? value : EShapePointsMarkerType.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineHeadSize\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineHeadSize) !== null && _a !== void 0 ? _a : (this._layoutLineHeadSize = this.newLayoutLineHeadSize()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineHeadSize = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.inputLineHeadSizeX, this.inputLineHeadSizeY]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineHeadSizeX\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineHeadSizeX) !== null && _a !== void 0 ? _a : (this._inputLineHeadSizeX = this.newInputLineHeadSizeX()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineHeadSizeX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadSizeX(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineHeadSizeY\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineHeadSizeY) !== null && _a !== void 0 ? _a : (this._inputLineHeadSizeY = this.newInputLineHeadSizeY()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineHeadSizeY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadSizeY(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineHeadColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineHeadColor) !== null && _a !== void 0 ? _a : (this._buttonLineHeadColor = this.newButtonLineHeadColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineHeadColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineHeadMargin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineHeadMargin) !== null && _a !== void 0 ? _a : (this._inputLineHeadMargin = this.newInputLineHeadMargin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineHeadMargin = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLineHeadMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setLineHeadMargin(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutTexture\", {\n        get: function () {\n            var result = this._layoutTexture;\n            if (result == null) {\n                result = this.newLayoutTexture();\n                this._layoutTexture = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutTexture = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonTextureImage,\n                this.buttonTextureGradient,\n                this.buttonTextureFitTo,\n                this.buttonTextureClear,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureImage\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureImage) !== null && _a !== void 0 ? _a : (this._buttonTextureImage = this.newButtonTextureImage()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureImage = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DButtonFile({\n            image: {\n                source: this._icons.editor_image\n            },\n            as: DButtonFileAs.DATA_URL,\n            title: theme.getButtonTextureImageTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                open: function (dataUrl) {\n                    toImageElement(dataUrl).then(function (imageElement) {\n                        _this._selection.setImage(imageElement);\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureGradient\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureGradient) !== null && _a !== void 0 ? _a : (this._buttonTextureGradient = this.newButtonTextureGradient()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureGradient = function () {\n        var _this = this;\n        var theme = this.theme;\n        var result = new DButtonColorGradient({\n            image: {\n                source: this._icons.texture_gradient\n            },\n            text: {\n                formatter: function () { return \"\"; }\n            },\n            title: theme.getButtonTextureGradientTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                change: function (value) {\n                    var url = toGradientImageUrl(value);\n                    toImageElement(url).then(function (imageElement) {\n                        _this._selection.setGradient(imageElement, value.toObject());\n                    });\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var last = _this._selection.last();\n            if (last != null && last.gradient != null) {\n                result.dialog.value.fromObject(last.gradient);\n            }\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureFitTo\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureFitTo) !== null && _a !== void 0 ? _a : (this._buttonTextureFitTo = this.newButtonTextureFitTo()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureFitTo = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DButton({\n            image: {\n                source: this._icons.texture_fit_to\n            },\n            title: theme.getButtonTextureFitToTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.fitToImage();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureClear\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureClear) !== null && _a !== void 0 ? _a : (this._buttonTextureClear = this.newButtonTextureClear()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureClear = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DButton({\n            image: {\n                source: this._icons.texture_clear\n            },\n            title: theme.getButtonTextureClearTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.clearImage();\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.onSelectionChange = function () {\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        var last = selection.last();\n        // Change To\n        var layoutChangeTo = this.layoutChangeTo;\n        if (layoutChangeTo) {\n            layoutChangeTo.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.REPLACING);\n            // Connector\n            if (!this._isDanglingConnectorAllowed) {\n                var hasConnector = false;\n                var shapes = selection.get();\n                for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                    if (shapes[i] instanceof EShapeConnectorLine) {\n                        hasConnector = true;\n                        break;\n                    }\n                }\n                this.buttonLineConnector.state.isEnabled = hasConnector;\n                this.buttonElbowConnector.state.isEnabled = hasConnector;\n            }\n        }\n        // Grouping\n        var ngroupable = 0;\n        if (2 <= selection.size()) {\n            var shapes = selection.get();\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                if (EShapeCapabilities.contains(shapes[i], EShapeCapability.GROUPING)) {\n                    ngroupable += 1;\n                    if (2 <= ngroupable) {\n                        break;\n                    }\n                }\n            }\n        }\n        this.buttonGroup.state.isEnabled = 2 <= ngroupable;\n        // Ungrouping\n        this.buttonUngroup.state.isEnabled =\n            last instanceof EShapeGroup &&\n                EShapeCapabilities.contains(last, EShapeCapability.CHILDREN) &&\n                EShapeCapabilities.contains(last, EShapeCapability.UNGROUPING);\n        // Fill\n        if (last != null) {\n            var fill = last.fill;\n            var fillEnable = fill.enable;\n            this.buttonFill.state.isActive = fillEnable;\n            var buttonFillColor = this.buttonFillColor;\n            var value = buttonFillColor.value;\n            value.color = fill.color;\n            value.alpha = fill.alpha;\n            buttonFillColor.state.isEnabled = fillEnable;\n            var inputFillPercent = this.inputFillPercent;\n            inputFillPercent.value = fill.percent;\n            inputFillPercent.state.isEnabled = fillEnable;\n            var buttonFillDirectionTop = this.buttonFillDirectionTop;\n            var buttonFillDirectionRight = this.buttonFillDirectionRight;\n            var buttonFillDirectionBottom = this.buttonFillDirectionBottom;\n            var buttonFillDirectionLeft = this.buttonFillDirectionLeft;\n            buttonFillDirectionTop.state.isEnabled = fillEnable;\n            buttonFillDirectionRight.state.isEnabled = fillEnable;\n            buttonFillDirectionBottom.state.isEnabled = fillEnable;\n            buttonFillDirectionLeft.state.isEnabled = fillEnable;\n            var fillDirection = fill.direction;\n            buttonFillDirectionTop.state.isActive = fillDirection === EShapeFillDirection.TOP;\n            buttonFillDirectionRight.state.isActive = fillDirection === EShapeFillDirection.RIGHT;\n            buttonFillDirectionBottom.state.isActive = fillDirection === EShapeFillDirection.BOTTOM;\n            buttonFillDirectionLeft.state.isActive = fillDirection === EShapeFillDirection.LEFT;\n        }\n        // Stroke\n        if (last != null) {\n            var stroke = last.stroke;\n            var strokeEnable = stroke.enable;\n            this.buttonStroke.state.isActive = strokeEnable;\n            // Stroke color\n            var buttonStrokeColor = this.buttonStrokeColor;\n            var value = buttonStrokeColor.value;\n            value.color = stroke.color;\n            value.alpha = stroke.alpha;\n            buttonStrokeColor.state.isEnabled = strokeEnable;\n            // Stroke align\n            var inputStrokeAlign = this.inputStrokeAlign;\n            inputStrokeAlign.input.value = stroke.align;\n            inputStrokeAlign.state.isEnabled = strokeEnable;\n            // Stroke width\n            var inputStrokeWidth = this.inputStrokeWidth;\n            inputStrokeWidth.input.value = stroke.width;\n            inputStrokeWidth.state.isEnabled = strokeEnable;\n            // Stroke side\n            var side = stroke.side;\n            var hasStrokeSide = strokeEnable && EShapeCapabilities.contains(last, EShapeCapability.STROKE_SIDE);\n            var buttonStrokeSideTop = this.buttonStrokeSideTop;\n            var buttonStrokeSideRight = this.buttonStrokeSideRight;\n            var buttonStrokeSideBottom = this.buttonStrokeSideBottom;\n            var buttonStrokeSideLeft = this.buttonStrokeSideLeft;\n            buttonStrokeSideTop.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideRight.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideBottom.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideLeft.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideTop.state.isActive = !!(side & EShapeStrokeSide.TOP);\n            buttonStrokeSideRight.state.isActive = !!(side & EShapeStrokeSide.RIGHT);\n            buttonStrokeSideBottom.state.isActive = !!(side & EShapeStrokeSide.BOTTOM);\n            buttonStrokeSideLeft.state.isActive = !!(side & EShapeStrokeSide.LEFT);\n            // Stroke style\n            var style = stroke.style;\n            var buttonStrokeExpandable = this.buttonStrokeExpandable;\n            var buttonStrokeShrinkable = this.buttonStrokeShrinkable;\n            var buttonStrokeScalableDotDash = this.buttonStrokeScalableDotDash;\n            buttonStrokeExpandable.state.isEnabled = strokeEnable;\n            buttonStrokeShrinkable.state.isEnabled = strokeEnable;\n            buttonStrokeScalableDotDash.state.isEnabled = strokeEnable;\n            buttonStrokeExpandable.state.isActive = !(style & EShapeStrokeStyle.NON_EXPANDING_WIDTH);\n            buttonStrokeShrinkable.state.isActive = !(style & EShapeStrokeStyle.NON_SHRINKING_WIDTH);\n            buttonStrokeScalableDotDash.state.isActive = !(style & EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH);\n        }\n        // Line\n        var layoutLine = this.layoutLine;\n        var buttonLineLock = this.buttonLineLock;\n        var selectLineStyle = this.selectLineStyle;\n        var selectLineType = this.selectLineType;\n        var buttonLineClosed = this.buttonLineClosed;\n        var layoutLineTail = this.layoutLineTail;\n        var buttonLineTailLock = this.buttonLineTailLock;\n        var selectLineTailType = this.selectLineTailType;\n        var inputLineTailSizeX = this.inputLineTailSizeX;\n        var inputLineTailSizeY = this.inputLineTailSizeY;\n        var buttonLineTailColor = this.buttonLineTailColor;\n        var inputLineTailMargin = this.inputLineTailMargin;\n        var layoutLineHead = this.layoutLineHead;\n        var buttonLineHeadLock = this.buttonLineHeadLock;\n        var selectLineHeadType = this.selectLineHeadType;\n        var inputLineHeadSizeX = this.inputLineHeadSizeX;\n        var inputLineHeadSizeY = this.inputLineHeadSizeY;\n        var buttonLineHeadColor = this.buttonLineHeadColor;\n        var inputLineHeadMargin = this.inputLineHeadMargin;\n        if (last != null && last.points != null) {\n            var points = last.points;\n            var hasLine = EShapeCapabilities.contains(last, EShapeCapability.LINE);\n            layoutLine.state.isEnabled = true;\n            buttonLineLock.state.isActive = this.isLocked(last, EShapeCapability.LINE);\n            buttonLineLock.state.isEnabled = true;\n            var lineStrokeMask = EShapeStrokeStyle.DOTTED_MASK | EShapeStrokeStyle.DASHED_MASK;\n            selectLineStyle.value = last.stroke.style & lineStrokeMask;\n            selectLineStyle.state.isEnabled = hasLine;\n            selectLineType.value = points.style & EShapePointsStyle.FORMATTER_MASK;\n            selectLineType.state.isEnabled = hasLine;\n            buttonLineClosed.state.isActive = (points.style & EShapePointsStyle.CLOSED) !== 0;\n            buttonLineClosed.state.isEnabled = hasLine;\n            var hasLineTail = EShapeCapabilities.contains(last, EShapeCapability.LINE_TAIL);\n            layoutLineTail.state.isEnabled = true;\n            buttonLineTailLock.state.isActive = this.isLocked(last, EShapeCapability.LINE_TAIL);\n            buttonLineTailLock.state.isEnabled = true;\n            var markerTail = points.marker.tail;\n            selectLineTailType.value = markerTail.type;\n            selectLineTailType.state.isEnabled = hasLineTail;\n            inputLineTailSizeX.value = markerTail.size.x;\n            inputLineTailSizeX.state.isEnabled = hasLineTail;\n            inputLineTailSizeY.value = markerTail.size.y;\n            inputLineTailSizeY.state.isEnabled = hasLineTail;\n            var markerTailFill = markerTail.fill;\n            var buttonLineTailColorValue = buttonLineTailColor.value;\n            buttonLineTailColorValue.color = markerTailFill.color;\n            buttonLineTailColorValue.alpha = markerTailFill.alpha;\n            buttonLineTailColor.state.isEnabled = markerTailFill.enable && hasLineTail;\n            if (last instanceof EShapeConnectorLine) {\n                inputLineTailMargin.input.value = last.edge.tail.margin;\n                inputLineTailMargin.state.isEnabled = hasLineTail;\n            }\n            else {\n                inputLineTailMargin.state.isEnabled = false;\n            }\n            var hasLineHead = EShapeCapabilities.contains(last, EShapeCapability.LINE_HEAD);\n            layoutLineHead.state.isEnabled = true;\n            buttonLineHeadLock.state.isActive = this.isLocked(last, EShapeCapability.LINE_HEAD);\n            buttonLineHeadLock.state.isEnabled = true;\n            var markerHead = points.marker.head;\n            selectLineHeadType.value = markerHead.type;\n            selectLineHeadType.state.isEnabled = hasLineHead;\n            inputLineHeadSizeX.value = markerHead.size.x;\n            inputLineHeadSizeX.state.isEnabled = hasLineHead;\n            inputLineHeadSizeY.value = markerHead.size.y;\n            inputLineHeadSizeY.state.isEnabled = hasLineHead;\n            var markerHeadFill = markerHead.fill;\n            var buttonLineHeadColorValue = buttonLineHeadColor.value;\n            buttonLineHeadColorValue.color = markerHeadFill.color;\n            buttonLineHeadColorValue.alpha = markerHeadFill.alpha;\n            buttonLineHeadColor.state.isEnabled = markerHeadFill.enable && hasLineHead;\n            if (last instanceof EShapeConnectorLine) {\n                inputLineHeadMargin.input.value = last.edge.head.margin;\n                inputLineHeadMargin.state.isEnabled = hasLineHead;\n            }\n            else {\n                inputLineHeadMargin.state.isEnabled = false;\n            }\n        }\n        else {\n            layoutLine.state.isEnabled = false;\n            buttonLineLock.state.isEnabled = false;\n            selectLineStyle.state.isEnabled = false;\n            selectLineType.state.isEnabled = false;\n            buttonLineClosed.state.isEnabled = false;\n            layoutLineTail.state.isEnabled = false;\n            buttonLineTailLock.state.isEnabled = false;\n            selectLineTailType.state.isEnabled = false;\n            inputLineTailSizeX.state.isEnabled = false;\n            inputLineTailSizeY.state.isEnabled = false;\n            buttonLineTailColor.state.isEnabled = false;\n            inputLineTailMargin.state.isEnabled = false;\n            layoutLineHead.state.isEnabled = false;\n            buttonLineHeadLock.state.isEnabled = false;\n            selectLineHeadType.state.isEnabled = false;\n            inputLineHeadSizeX.state.isEnabled = false;\n            inputLineHeadSizeY.state.isEnabled = false;\n            buttonLineHeadColor.state.isEnabled = false;\n            inputLineHeadMargin.state.isEnabled = false;\n        }\n        // Corner\n        if (last != null) {\n            var hasBorderRadius = EShapeCapabilities.contains(last, EShapeCapability.BORDER_RADIUS);\n            this.textCorner.state.isEnabled = hasBorderRadius;\n            this.inputCornerRadius.value = last.radius;\n            this.inputCornerRadius.state.isEnabled = hasBorderRadius;\n            this.layoutCorner.state.isEnabled = hasBorderRadius;\n            this.buttonCornerBottomLeft.state.isActive = !!(last.corner & EShapeCorner.BOTTOM_LEFT);\n            this.buttonCornerBottomRight.state.isActive = !!(last.corner & EShapeCorner.BOTTOM_RIGHT);\n            this.buttonCornerTopLeft.state.isActive = !!(last.corner & EShapeCorner.TOP_LEFT);\n            this.buttonCornerTopRight.state.isActive = !!(last.corner & EShapeCorner.TOP_RIGHT);\n        }\n        // Texture\n        if (last != null) {\n            this.buttonTextureFitTo.state.isDisabled = last.image == null;\n            this.buttonTextureClear.state.isDisabled = last.image == null;\n        }\n    };\n    EEditorShape.prototype.getType = function () {\n        return \"EEditorShape\";\n    };\n    return EEditorShape;\n}(DPane));\nexport { EEditorShape };\n//# sourceMappingURL=e-editor-shape.js.map","export var EEDITOR_BUTTON_COUNT = 7;\n//# sourceMappingURL=e-editors.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DButtonCheckRight, DControllers, DInputRealAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DList, DListItem } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentSnapBringForward } from \"../command/e-command-document-snap-bring-forward\";\nimport { ECommandDocumentSnapCreate } from \"../command/e-command-document-snap-create\";\nimport { ECommandDocumentSnapDelete } from \"../command/e-command-document-snap-delete\";\nimport { ECommandDocumentSnapGridSize } from \"../command/e-command-document-snap-grid-size\";\nimport { ECommandDocumentSnapGridToggle } from \"../command/e-command-document-snap-grid-toggle\";\nimport { ECommandDocumentSnapGridToggleVisibility } from \"../command/e-command-document-snap-grid-toggle-visibility\";\nimport { ECommandDocumentSnapReplace } from \"../command/e-command-document-snap-replace\";\nimport { ECommandDocumentSnapSendBackward } from \"../command/e-command-document-snap-send-backward\";\nimport { ECommandDocumentSnapTargetToggle } from \"../command/e-command-document-snap-target-toggle\";\nimport { ECommandDocumentSnapTargetToggleVisibility } from \"../command/e-command-document-snap-target-toggle-visibility\";\nimport { ECommandDocumentSnapToggle } from \"../command/e-command-document-snap-toggle\";\nimport { EDialogSnap } from \"../editor/e-dialog-snap\";\nvar EEditorSnap = /** @class */ (function (_super) {\n    __extends(EEditorSnap, _super);\n    function EEditorSnap(options) {\n        var _this = _super.call(this, options) || this;\n        // Icons\n        _this._icons = options.icons;\n        // Diagram\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        // Snapper\n        var snapper = diagram.snapper;\n        _this._snapper = snapper;\n        snapper.on(\"change\", function () {\n            _this.onSnapperChange(snapper);\n        });\n        var snapperTarget = snapper.target;\n        snapperTarget.on(\"change\", function () {\n            _this.onSnapperTargetChange(snapperTarget);\n        });\n        var snapperGrid = snapper.grid;\n        snapperGrid.on(\"change\", function () {\n            _this.onSnapperGridChange(snapperGrid);\n        });\n        // Layout\n        _this.addChild(_this.buttonLabel);\n        _this.addChild(_this.buttonGrid);\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [_this.buttonGridEye, _this.inputGridSize]\n        }));\n        _this.addChild(_this.buttonTarget);\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                _this.buttonTargetNew,\n                _this.buttonTargetDelete,\n                _this.buttonTargetBringForward,\n                _this.buttonTargetSendBackward,\n                _this.buttonTargetEye,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        }));\n        _this.addChild(_this.listTarget);\n        // Selection\n        var listSnapTarget = _this.listTarget;\n        listSnapTarget.data.selection.on(\"change\", function () {\n            _this.onSelectionChange(listSnapTarget);\n        });\n        // Initialization\n        _this.onSnapperChange(snapper);\n        _this.onSnapperTargetChange(snapperTarget);\n        _this.onSnapperGridChange(snapperGrid);\n        _this.onSelectionChange(listSnapTarget);\n        return _this;\n    }\n    Object.defineProperty(EEditorSnap.prototype, \"buttonLabel\", {\n        get: function () {\n            var result = this._buttonLabel;\n            if (result == null) {\n                result = this.newButtonLabel();\n                this._buttonLabel = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonLabel = function () {\n        var snapper = this._diagram.snapper;\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    if (!snapper.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapToggle(snapper));\n                    }\n                },\n                inactive: function () {\n                    if (snapper.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapToggle(snapper));\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTarget\", {\n        get: function () {\n            var result = this._buttonTarget;\n            if (result == null) {\n                result = this.newButtonTarget();\n                this._buttonTarget = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTarget = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonTargetLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    var snapper = _this._snapper;\n                    if (!snapper.target.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggle(snapper));\n                    }\n                },\n                inactive: function () {\n                    var snapper = _this._snapper;\n                    if (snapper.target.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggle(snapper));\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetNew\", {\n        get: function () {\n            var result = this._buttonTargetNew;\n            if (result == null) {\n                result = this.newButtonTargetNew();\n                this._buttonTargetNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonTargetNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonTargetNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorSnap.prototype.onButtonTargetNewActive = function (opener) {\n        var _this = this;\n        this.dialogTarget\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandDocumentSnapCreate(_this._snapper, value));\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetDelete\", {\n        get: function () {\n            var result = this._buttonTargetDelete;\n            if (result == null) {\n                result = this.newButtonTargetDelete();\n                this._buttonTargetDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonTargetDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listTarget = _this.listTarget;\n                    var first = listTarget.data.selection.first;\n                    if (first != null) {\n                        var items = listTarget.data.items;\n                        var index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapDelete(_this._snapper, index, first));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetBringForward\", {\n        get: function () {\n            var result = this._buttonTargetBringForward;\n            if (result == null) {\n                result = this.newButtonTargetBringForward();\n                this._buttonTargetBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonTargetBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listTarget = _this.listTarget;\n                    var first = listTarget.data.selection.first;\n                    var items = listTarget.data.items;\n                    if (first != null && items[0] !== first) {\n                        var index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapBringForward(_this._snapper, index));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetSendBackward\", {\n        get: function () {\n            var result = this._buttonTargetSendBackward;\n            if (result == null) {\n                result = this.newButtonTargetSendBackward();\n                this._buttonTargetSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonTargetSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var snapper = _this._snapper;\n                    var listTarget = _this.listTarget;\n                    var first = listTarget.data.selection.first;\n                    var items = listTarget.data.items;\n                    if (first != null && items[items.length] !== first) {\n                        var index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapSendBackward(snapper, index));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetEye\", {\n        get: function () {\n            var result = this._buttonTargetEye;\n            if (result == null) {\n                result = this.newButtonTargetEye();\n                this._buttonTargetEye = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetEye = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.eye\n            },\n            title: this.theme.getButtonTargetEyeTitle(),\n            on: {\n                active: function () {\n                    DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggleVisibility(_this._snapper));\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"dialogTarget\", {\n        get: function () {\n            var result = this._dialogTarget;\n            if (result == null) {\n                result = this.newDialogTarget();\n                this._dialogTarget = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newDialogTarget = function () {\n        return new EDialogSnap();\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"listTarget\", {\n        get: function () {\n            var result = this._listTarget;\n            if (result == null) {\n                result = this.newListTarget();\n                this._listTarget = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newListTarget = function () {\n        var _this = this;\n        var theme = this.theme;\n        var result = new DList({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return theme.getListTargetItemLabel(value);\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onListTargetDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorSnap.prototype.onListTargetDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var index = list.data.items.indexOf(oldValue);\n            if (0 <= index) {\n                var dialog = this.dialogTarget;\n                dialog.value = oldValue;\n                dialog.open(item).then(function (newValue) {\n                    if (newValue != null) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapReplace(_this._snapper, oldValue, newValue, list));\n                    }\n                });\n            }\n        }\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonGrid\", {\n        get: function () {\n            var result = this._buttonGrid;\n            if (result == null) {\n                result = this.newButtonGrid();\n                this._buttonGrid = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonGrid = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonGridLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    var snapper = _this._snapper;\n                    if (!snapper.grid.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridToggle(snapper));\n                    }\n                },\n                inactive: function () {\n                    var snapper = _this._snapper;\n                    if (snapper.grid.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridToggle(snapper));\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonGridEye\", {\n        get: function () {\n            var result = this._buttonGridEye;\n            if (result == null) {\n                result = this.newButtonGridEye();\n                this._buttonGridEye = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonGridEye = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.eye\n            },\n            title: this.theme.getButtonGridEyeTitle(),\n            on: {\n                active: function () {\n                    DControllers.getCommandController().push(new ECommandDocumentSnapGridToggleVisibility(_this._snapper));\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"inputGridSize\", {\n        get: function () {\n            var result = this._inputGridSize;\n            if (result == null) {\n                result = this.newInputGridSize();\n                this._inputGridSize = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newInputGridSize = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            weight: 1,\n            label: {\n                text: {\n                    value: this.theme.getInputGridSizeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: 10\n                },\n                min: 2,\n                on: {\n                    change: function (value) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridSize(_this._snapper, value));\n                    }\n                }\n            }\n        });\n    };\n    EEditorSnap.prototype.onSnapperChange = function (snapper) {\n        this.buttonLabel.state.isActive = snapper.enable;\n    };\n    EEditorSnap.prototype.onSnapperTargetChange = function (target) {\n        this.buttonTarget.state.isActive = target.enable;\n        var icons = this._icons;\n        this.buttonTargetEye.image = target.visible ? icons.eye : icons.eye_slash;\n        var listTarget = this.listTarget;\n        listTarget.data.items = target.values;\n        this.onSelectionChange(listTarget);\n    };\n    EEditorSnap.prototype.onSnapperGridChange = function (grid) {\n        this.buttonGrid.state.isActive = grid.enable;\n        var icons = this._icons;\n        this.buttonGridEye.image = grid.visible ? icons.eye : icons.eye_slash;\n        this.inputGridSize.input.value = grid.size;\n    };\n    EEditorSnap.prototype.onSelectionChange = function (listSnapTarget) {\n        this.buttonTargetDelete.state.isDisabled = listSnapTarget.data.selection.isEmpty();\n        var first = listSnapTarget.data.selection.first;\n        var items = listSnapTarget.data.items;\n        this.buttonTargetBringForward.state.isDisabled = first == null || items[0] === first;\n        this.buttonTargetSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    EEditorSnap.prototype.getType = function () {\n        return \"EEditorSnap\";\n    };\n    return EEditorSnap;\n}(DLayoutVertical));\nexport { EEditorSnap };\n//# sourceMappingURL=e-editor-snap.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DButtonCheckRight, DButtonColor, DDropdown, DInputReal, DInputRealAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutVertical, DPane, DText, EShapeTextAlignHorizontal, EShapeTextAlignVertical, EShapeTextDirection, EShapeTextStyle, EShapeTextWeight } from \"@wcardinal/wcardinal-ui\";\nimport { EEDITOR_BUTTON_COUNT } from \"./e-editors\";\nvar EEditorText = /** @class */ (function (_super) {\n    __extends(EEditorText, _super);\n    function EEditorText(options) {\n        var _this = _super.call(this, options) || this;\n        _this._fromShapeTextRegEx = /\\\\+n|\\n/g;\n        _this._toShapeTextRegEx = /\\\\+n/g;\n        var selection = options.selection;\n        _this._selection = selection;\n        var icons = options.icons;\n        _this._icons = icons;\n        var theme = _this.theme;\n        new DLayoutVertical({\n            parent: _this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newLabel(theme.getLabel()),\n                _this.inputText,\n                _this.newLabel(theme.getTextFontLabel()),\n                _this.dropdownFontFamily,\n                _this.buttonFontColor,\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        _this.inputFontSize,\n                        _this.buttonFontSizeDecrease,\n                        _this.buttonFontSizeIncrease,\n                        _this.buttonFontItalic,\n                        _this.buttonFontBold\n                    ]\n                }),\n                _this.buttonOutline,\n                _this.buttonOutlineColor,\n                _this.inputOutlineWidth,\n                _this.newLabel(theme.getTextAlignLabel()),\n                new DLayoutVertical({\n                    width: \"100%\",\n                    height: \"auto\",\n                    column: EEDITOR_BUTTON_COUNT,\n                    children: [\n                        _this.buttonAlignOutsideLeft,\n                        _this.buttonAlignLeft,\n                        _this.buttonAlignCenter,\n                        _this.buttonAlignRight,\n                        _this.buttonAlignOutsideRight,\n                        _this.buttonAlignOutsideTop,\n                        _this.buttonAlignTop,\n                        _this.buttonAlignMiddle,\n                        _this.buttonAlignBottom,\n                        _this.buttonAlignOutsideBottom,\n                        _this.buttonDirectionLeftToRight,\n                        _this.buttonDirectionTopToBottom,\n                        _this.buttonDirectionBottomToTop,\n                        _this.buttonDirectionRightToLeft\n                    ]\n                }),\n                _this.buttonClipping,\n                _this.buttonFitting,\n                _this.newLabel(theme.getTextSpacingLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [_this.inputSpacingHorizontal, _this.inputSpacingVertical]\n                }),\n                _this.newLabel(theme.getTextPaddingLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [_this.inputPaddingHorizontal, _this.inputPaddingVertical]\n                }),\n                _this.newLabel(theme.getTextOffsetLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [_this.inputOffsetHorizontal, _this.inputOffsetVertical]\n                })\n            ]\n        });\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorText.prototype.newLabel = function (label) {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: label\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputText\", {\n        get: function () {\n            var result = this._inputText;\n            if (result == null) {\n                result = this.newInputText();\n                this._inputText = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputText = function () {\n        var _this = this;\n        return new DInputTextArea({\n            width: \"100%\",\n            height: this.theme.getInputTextHeight(),\n            text: {\n                value: \"\"\n            },\n            on: {\n                input: function (value) {\n                    _this._selection.setText(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"dropdownFontFamily\", {\n        get: function () {\n            var result = this._dropdownFontFamily;\n            if (result == null) {\n                result = this.newDropdownFontFamily();\n                this._dropdownFontFamily = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newDropdownFontFamily = function () {\n        var _this = this;\n        return new DDropdown({\n            width: \"100%\",\n            text: {\n                value: this.fontFamilies.get(\"auto\")\n            },\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newDropdownFontFamilyMenuItems()\n            },\n            on: {\n                select: function (value) {\n                    var _a;\n                    _this.dropdownFontFamily.text = (_a = _this.fontFamilies.get(value)) !== null && _a !== void 0 ? _a : value;\n                    _this._selection.setTextFamily(value);\n                }\n            }\n        });\n    };\n    EEditorText.prototype.newDropdownFontFamilyMenuItems = function () {\n        var result = [];\n        this.fontFamilies.forEach(function (label, fontFamily) {\n            result.push({\n                width: 200,\n                value: fontFamily,\n                text: {\n                    value: label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorText.prototype, \"fontFamilies\", {\n        get: function () {\n            var result = this._fontFamilies;\n            if (result == null) {\n                result = this.theme.getFontFamilies();\n                this._fontFamilies = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorText.prototype, \"buttonFontColor\", {\n        get: function () {\n            var result = this._buttonFontColor;\n            if (result == null) {\n                result = this.newButtonFontColor();\n                this._buttonFontColor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setTextColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputFontSize\", {\n        get: function () {\n            var result = this._inputFontSize;\n            if (result == null) {\n                result = this.newInputFontSize();\n                this._inputFontSize = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputFontSize = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0\n            },\n            min: 0,\n            on: {\n                input: function (size) {\n                    _this._selection.setTextSize(size);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontSizeDecrease\", {\n        get: function () {\n            var result = this._buttonFontSizeDecrease;\n            if (result == null) {\n                result = this.newButtonFontSizeDecrease();\n                this._buttonFontSizeDecrease = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontSizeDecrease = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_font_size_decrease\n            },\n            title: this.theme.getButtonFontSizeDecreaseTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextSizeDelta(-1);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontSizeIncrease\", {\n        get: function () {\n            var result = this._buttonFontSizeIncrease;\n            if (result == null) {\n                result = this.newButtonFontSizeIncrease();\n                this._buttonFontSizeIncrease = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontSizeIncrease = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_font_size_increase\n            },\n            title: this.theme.getButtonFontSizeIncreaseTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextSizeDelta(+1);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontItalic\", {\n        get: function () {\n            var result = this._buttonFontItalic;\n            if (result == null) {\n                result = this.newButtonFontItalic();\n                this._buttonFontItalic = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontItalic = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.italic\n            },\n            toggle: true,\n            title: this.theme.getButtonFontItalicTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextStyle(EShapeTextStyle.ITALIC);\n                },\n                inactive: function () {\n                    _this._selection.setTextStyle(EShapeTextStyle.NORMAL);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontBold\", {\n        get: function () {\n            var result = this._buttonFontBold;\n            if (result == null) {\n                result = this.newButtonFontBold();\n                this._buttonFontBold = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontBold = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.bold\n            },\n            toggle: true,\n            title: this.theme.getButtonFontBoldTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextWeight(EShapeTextWeight.BOLD);\n                },\n                inactive: function () {\n                    _this._selection.setTextWeight(EShapeTextWeight.NORMAL);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonOutline\", {\n        get: function () {\n            var result = this._buttonOutline;\n            if (result == null) {\n                result = this.newButtonOutline();\n                this._buttonOutline = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonOutline = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonOutlineLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setTextOutlineEnabled(true);\n                },\n                inactive: function () {\n                    _this._selection.setTextOutlineEnabled(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonOutlineColor\", {\n        get: function () {\n            var result = this._buttonOutlineColor;\n            if (result == null) {\n                result = this.newButtonOutlineColor();\n                this._buttonOutlineColor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonOutlineColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setTextOutlineColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputOutlineWidth\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputOutlineWidth) !== null && _a !== void 0 ? _a : (this._inputOutlineWidth = this.newInputOutlineWidth()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputOutlineWidth = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputOutlineWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                step: 1,\n                max: 100,\n                on: {\n                    change: function (value) {\n                        _this._selection.setTextOutlineWidth(value * 0.01);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideLeft\", {\n        get: function () {\n            var result = this._buttonAlignOutsideLeft;\n            if (result == null) {\n                result = this.newButtonAlignOutsideLeft();\n                this._buttonAlignOutsideLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_left\n            },\n            title: this.theme.getButtonAlignOutsideLeftTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.OUTSIDE_LEFT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignLeft\", {\n        get: function () {\n            var result = this._buttonAlignLeft;\n            if (result == null) {\n                result = this.newButtonAlignLeft();\n                this._buttonAlignLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_left\n            },\n            title: this.theme.getButtonAlignLeftTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.LEFT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignCenter\", {\n        get: function () {\n            var result = this._buttonAlignCenter;\n            if (result == null) {\n                result = this.newButtonAlignCenter();\n                this._buttonAlignCenter = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignCenter = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_center\n            },\n            title: this.theme.getButtonAlignCenterTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.CENTER);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignRight\", {\n        get: function () {\n            var result = this._buttonAlignRight;\n            if (result == null) {\n                result = this.newButtonAlignRight();\n                this._buttonAlignRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_right\n            },\n            title: this.theme.getButtonAlignRightTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.RIGHT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideRight\", {\n        get: function () {\n            var result = this._buttonAlignOutsideRight;\n            if (result == null) {\n                result = this.newButtonAlignOutsideRight();\n                this._buttonAlignOutsideRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_right\n            },\n            title: this.theme.getButtonAlignOutsideRightTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.OUTSIDE_RIGHT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideTop\", {\n        get: function () {\n            var result = this._buttonAlignOutsideTop;\n            if (result == null) {\n                result = this.newButtonAlignOutsideTop();\n                this._buttonAlignOutsideTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_top\n            },\n            title: this.theme.getButtonAlignOutsideTopTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.OUTSIDE_TOP);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignTop\", {\n        get: function () {\n            var result = this._buttonAlignTop;\n            if (result == null) {\n                result = this.newButtonAlignTop();\n                this._buttonAlignTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_top\n            },\n            title: this.theme.getButtonAlignTopTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.TOP);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignMiddle\", {\n        get: function () {\n            var result = this._buttonAlignMiddle;\n            if (result == null) {\n                result = this.newButtonAlignMiddle();\n                this._buttonAlignMiddle = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignMiddle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_middle\n            },\n            title: this.theme.getButtonAlignMiddleTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.MIDDLE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignBottom\", {\n        get: function () {\n            var result = this._buttonAlignBottom;\n            if (result == null) {\n                result = this.newButtonAlignBottom();\n                this._buttonAlignBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_bottom\n            },\n            title: this.theme.getButtonAlignBottomTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.BOTTOM);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideBottom\", {\n        get: function () {\n            var result = this._buttonAlignOutsideBottom;\n            if (result == null) {\n                result = this.newButtonAlignOutsideBottom();\n                this._buttonAlignOutsideBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_bottom\n            },\n            title: this.theme.getButtonAlignOutsideBottomTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.OUTSIDE_BOTTOM);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionLeftToRight\", {\n        get: function () {\n            var result = this._buttonDirectionLeftToRight;\n            if (result == null) {\n                result = this.newButtonDirectionLeftToRight();\n                this._buttonDirectionLeftToRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionLeftToRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_left_to_right\n            },\n            title: this.theme.getButtonDirectionLeftToRightTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.LEFT_TO_RIGHT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionTopToBottom\", {\n        get: function () {\n            var result = this._buttonDirectionTopToBottom;\n            if (result == null) {\n                result = this.newButtonDirectionTopToBottom();\n                this._buttonDirectionTopToBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionTopToBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_top_to_bottom\n            },\n            title: this.theme.getButtonDirectionTopToBottomTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.TOP_TO_BOTTOM);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionBottomToTop\", {\n        get: function () {\n            var result = this._buttonDirectionBottomToTop;\n            if (result == null) {\n                result = this.newButtonDirectionBottomToTop();\n                this._buttonDirectionBottomToTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionBottomToTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_bottom_to_top\n            },\n            title: this.theme.getButtonDirectionBottomToTopTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.BOTTOM_TO_TOP);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionRightToLeft\", {\n        get: function () {\n            var result = this._buttonDirectionRightToLeft;\n            if (result == null) {\n                result = this.newButtonDirectionRightToLeft();\n                this._buttonDirectionRightToLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionRightToLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_right_to_left\n            },\n            title: this.theme.getButtonDirectionRightToLeftTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.RIGHT_TO_LEFT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonClipping\", {\n        get: function () {\n            var result = this._buttonClipping;\n            if (result == null) {\n                result = this.newButtonClipping();\n                this._buttonClipping = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonClipping = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonClippingLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setTextClipping(true);\n                },\n                inactive: function () {\n                    _this._selection.setTextClipping(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFitting\", {\n        get: function () {\n            var result = this._buttonFitting;\n            if (result == null) {\n                result = this.newButtonFitting();\n                this._buttonFitting = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFitting = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonFittingLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setTextFitting(true);\n                },\n                inactive: function () {\n                    _this._selection.setTextFitting(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputSpacingHorizontal\", {\n        get: function () {\n            var result = this._inputSpacingHorizontal;\n            if (result == null) {\n                result = this.newInputSpacingHorizontal();\n                this._inputSpacingHorizontal = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputSpacingHorizontal = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextSpacingHorizontal(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputSpacingVertical\", {\n        get: function () {\n            var result = this._inputSpacingVertical;\n            if (result == null) {\n                result = this.newInputSpacingVertical();\n                this._inputSpacingVertical = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputSpacingVertical = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextSpacingVertical(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputPaddingHorizontal\", {\n        get: function () {\n            var result = this._inputPaddingHorizontal;\n            if (result == null) {\n                result = this.newInputPaddingHorizontal();\n                this._inputPaddingHorizontal = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputPaddingHorizontal = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextPaddingHorizontal(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputPaddingVertical\", {\n        get: function () {\n            var result = this._inputTextPaddingVertical;\n            if (result == null) {\n                result = this.newInputPaddingVertical();\n                this._inputTextPaddingVertical = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputPaddingVertical = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextPaddingVertical(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputOffsetHorizontal\", {\n        get: function () {\n            var result = this._inputOffsetHorizontal;\n            if (result == null) {\n                result = this.newInputOffsetHorizontal();\n                this._inputOffsetHorizontal = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputOffsetHorizontal = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextOffsetHorizontal(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputOffsetVertical\", {\n        get: function () {\n            var result = this._inputOffsetVertical;\n            if (result == null) {\n                result = this.newInputOffsetVertical();\n                this._inputOffsetVertical = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputOffsetVertical = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextOffsetVertical(value);\n                }\n            }\n        });\n    };\n    EEditorText.prototype.onSelectionChange = function (selection) {\n        var _a;\n        this.state.isDisabled = selection.isEmpty();\n        var last = selection.last();\n        if (last != null) {\n            var text = last.text;\n            this.inputText.value = text.value;\n            var textFamily = text.family;\n            this.dropdownFontFamily.text = (_a = this.fontFamilies.get(textFamily)) !== null && _a !== void 0 ? _a : textFamily;\n            var buttonFontColor = this.buttonFontColor.value;\n            buttonFontColor.color = text.color;\n            buttonFontColor.alpha = text.alpha;\n            this.inputFontSize.value = text.size;\n            this.buttonFontItalic.state.isActive = text.style === EShapeTextStyle.ITALIC;\n            this.buttonFontBold.state.isActive = text.weight === EShapeTextWeight.BOLD;\n            var outline = text.outline;\n            this.buttonOutline.state.isActive = outline.enable;\n            var buttonOutlineColor = this.buttonOutlineColor;\n            var buttonOutlineColorValue = buttonOutlineColor.value;\n            buttonOutlineColorValue.color = outline.color;\n            buttonOutlineColorValue.alpha = outline.alpha;\n            buttonOutlineColor.state.isDisabled = !outline.enable;\n            var inputOutlineWidth = this.inputOutlineWidth;\n            inputOutlineWidth.input.value = outline.width * 100;\n            inputOutlineWidth.state.isDisabled = !outline.enable;\n            this.buttonClipping.state.isActive = text.clipping;\n            this.buttonFitting.state.isActive = text.fitting;\n            var spacing = text.spacing;\n            this.inputSpacingHorizontal.value = spacing.horizontal;\n            this.inputSpacingVertical.value = spacing.vertical;\n            var padding = text.padding;\n            this.inputPaddingHorizontal.value = padding.horizontal;\n            this.inputPaddingVertical.value = padding.vertical;\n            var offset = text.offset;\n            this.inputOffsetHorizontal.value = offset.horizontal;\n            this.inputOffsetVertical.value = offset.vertical;\n        }\n    };\n    EEditorText.prototype.getType = function () {\n        return \"EEditorText\";\n    };\n    return EEditorText;\n}(DPane));\nexport { EEditorText };\n//# sourceMappingURL=e-editor-text.js.map","import { __extends } from \"tslib\";\nimport { DControllers, DTableDataSelectionType } from \"@wcardinal/wcardinal-ui\";\nimport { utils } from \"pixi.js\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nvar COMPARATOR = function (a, b) {\n    return a[0] - b[0];\n};\nvar EEditorTreeSelection = /** @class */ (function (_super) {\n    __extends(EEditorTreeSelection, _super);\n    function EEditorTreeSelection(parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(EEditorTreeSelection.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"indices\", {\n        get: function () {\n            var selection = this._selection;\n            var result = [];\n            this._parent.each(function (row, index) {\n                if (selection.contains(row)) {\n                    result.push(index);\n                }\n            });\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"rows\", {\n        get: function () {\n            var selection = this._selection;\n            var result = [];\n            this._parent.each(function (row, index) {\n                if (selection.contains(row)) {\n                    result.push(row);\n                }\n            });\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"type\", {\n        get: function () {\n            return DTableDataSelectionType.MULTIPLE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"first\", {\n        get: function () {\n            var row = this._selection.first();\n            if (row) {\n                return this.toIndex(row);\n            }\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"last\", {\n        get: function () {\n            var row = this._selection.last();\n            if (row) {\n                return this.toIndex(row);\n            }\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTreeSelection.prototype.onNodeChange = function (nodes) {\n        // DO NOTHING\n    };\n    EEditorTreeSelection.prototype.toggle = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            var before = selection.store();\n            selection.toggle(row);\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.add = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            if (!selection.contains(row)) {\n                var before = selection.store();\n                selection.toggle(row);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.toIndex = function (target) {\n        var result = null;\n        this._parent.each(function (row, index) {\n            if (target === row) {\n                result = index;\n                return false;\n            }\n            return true;\n        });\n        return result;\n    };\n    EEditorTreeSelection.prototype.addTo = function (rowIndex) {\n        var last = this._selection.last();\n        if (last != null) {\n            var index = this.toIndex(last);\n            if (index != null) {\n                this.addRange(index, false, rowIndex, true);\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.addRange = function (from, includeFrom, to, includeTo) {\n        var rows = [];\n        var parent = this._parent;\n        var selection = this._selection;\n        if (from < to) {\n            parent.each(function (row) {\n                if (!selection.contains(row)) {\n                    rows.push(row);\n                }\n            }, from + (includeFrom ? 0 : 1), to + (includeTo ? 1 : 0));\n        }\n        else {\n            parent.each(function (row) {\n                if (!selection.contains(row)) {\n                    rows.push(row);\n                }\n            }, to + (includeTo ? 0 : 1), from + (includeFrom ? 1 : 0));\n        }\n        if (0 < rows.length) {\n            var before = selection.store();\n            selection.addAll(rows);\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.addAll = function (rowIndices) {\n        if (0 < rowIndices.length) {\n            var rows = [];\n            var parent_1 = this._parent;\n            var selection = this._selection;\n            for (var i = 0, imax = rowIndices.length; i < imax; ++i) {\n                var row = parent_1.get(rowIndices[i]);\n                if (row && !selection.contains(row)) {\n                    rows.push(row);\n                }\n            }\n            if (0 < rows.length) {\n                var before = selection.store();\n                selection.addAll(rows);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.contains = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            return this._selection.contains(row);\n        }\n        return false;\n    };\n    EEditorTreeSelection.prototype.remove = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            if (selection.contains(row)) {\n                var before = selection.store();\n                selection.remove(row);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.clear = function () {\n        var selection = this._selection;\n        if (!selection.isEmpty()) {\n            var before = selection.store();\n            selection.clear();\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.clearAndAdd = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            if (selection.contains(row)) {\n                if (1 < selection.size()) {\n                    var before = selection.store();\n                    selection.set(row);\n                    selection.focus();\n                    var after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n            }\n            else {\n                var before = selection.store();\n                selection.set(row);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.clearAndAddAll = function (rowIndices) {\n        var selection = this._selection;\n        if (!selection.isEmpty() || 0 < rowIndices.length) {\n            var rows = [];\n            var parent_2 = this._parent;\n            for (var i = 0, imax = rowIndices.length; i < imax; ++i) {\n                var row = parent_2.get(rowIndices[i]);\n                if (row) {\n                    rows.push(row);\n                }\n            }\n            var before = selection.store();\n            selection.clearAndAddAll(rows);\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.shift = function (rowIndex, amount) {\n        // DO NOTHING\n    };\n    EEditorTreeSelection.prototype.size = function () {\n        return this._selection.size();\n    };\n    EEditorTreeSelection.prototype.isEmpty = function () {\n        return this._selection.isEmpty();\n    };\n    EEditorTreeSelection.prototype.each = function (iteratee) {\n        var selection = this._selection;\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                if (iteratee(index) === false) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    };\n    EEditorTreeSelection.prototype.toArray = function () {\n        var selection = this._selection;\n        var result = [];\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                result.push([index, row]);\n            }\n        });\n        return result;\n    };\n    EEditorTreeSelection.prototype.toSortedArray = function () {\n        return this.toArray().sort(COMPARATOR);\n    };\n    EEditorTreeSelection.prototype.toObject = function () {\n        var selection = this._selection;\n        var result = {};\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                result[index] = row;\n            }\n        });\n        return result;\n    };\n    EEditorTreeSelection.prototype.toMap = function () {\n        var selection = this._selection;\n        var result = new Map();\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                result.set(index, row);\n            }\n        });\n        return result;\n    };\n    return EEditorTreeSelection;\n}(utils.EventEmitter));\nexport { EEditorTreeSelection };\n//# sourceMappingURL=e-editor-tree-selection.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DLayoutHorizontal, DLayoutVertical, DTable, DTableDataTree, DText, EShapeCapabilities, EShapeCapability, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyId } from \"../command/e-command-shape-property-id\";\nimport { EEditorTreeSelection } from \"./e-editor-tree-selection\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nimport { toShapeLabel } from \"./to-shape-label\";\nvar EEditorTree = /** @class */ (function (_super) {\n    __extends(EEditorTree, _super);\n    function EEditorTree(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this._selection = options.selection;\n        _this._isInitialized = false;\n        _this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        return _this;\n    }\n    EEditorTree.prototype.show = function () {\n        _super.prototype.show.call(this);\n        this.onShow();\n        return this;\n    };\n    EEditorTree.prototype.onShow = function () {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onSelectionChange(EToolSelectSelectionUpdatedPart.NONE);\n    };\n    EEditorTree.prototype.initLayout = function () {\n        var _this = this;\n        this.addChild(this.layoutOrder);\n        this.addChild(this.table);\n        // Selection change event handling\n        this._selection.on(\"change\", function (parts) {\n            _this.onSelectionChange(parts);\n        });\n        // Layer change even handling\n        var onLayerChangeBound = function () {\n            _this.onLayerChange();\n        };\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas) {\n            this.state.isDisabled = false;\n            canvas.layer.on(\"change\", onLayerChangeBound);\n        }\n        else {\n            this.state.isDisabled = true;\n        }\n        diagram.on(\"set\", function (newCanvas) {\n            _this.state.isDisabled = false;\n            newCanvas.layer.on(\"change\", onLayerChangeBound);\n        });\n        diagram.on(\"ready\", function () {\n            _this.onLayerChange();\n        });\n        diagram.on(\"unset\", function (oldCanvas) {\n            _this.state.isDisabled = true;\n            _this.onLayerChange();\n            oldCanvas.layer.off(\"change\", onLayerChangeBound);\n        });\n        this.onLayerChange();\n    };\n    Object.defineProperty(EEditorTree.prototype, \"layoutOrder\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layerOrder) !== null && _a !== void 0 ? _a : (this._layerOrder = this.newLayoutOrder()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newLayoutOrder = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonBringToFront,\n                this.buttonBringForward,\n                this.buttonSendBackward,\n                this.buttonSendToBack\n            ]\n        });\n    };\n    EEditorTree.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonBringToFront\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringToFront) !== null && _a !== void 0 ? _a : (this._buttonBringToFront = this.newButtonBringToFront()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonBringToFront = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_to_top\n            },\n            title: this.theme.getButtonBringToFrontTitle(),\n            on: {\n                active: function () {\n                    _this._selection.bringToFront();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    _this._selection.bringForward();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    _this._selection.sendBackward();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonSendToBack\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendToBack) !== null && _a !== void 0 ? _a : (this._buttonSendToBack = this.newButtonSendToBack()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonSendToBack = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_to_bottom\n            },\n            title: this.theme.getButtonSendToBackTitle(),\n            on: {\n                active: function () {\n                    _this._selection.sendToBack();\n                }\n            }\n        });\n    };\n    EEditorTree.prototype.onSelectionChange = function (parts) {\n        var _a;\n        if (this.isShown()) {\n            parts |= this._updatedParts;\n            this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n            if (parts & EToolSelectSelectionUpdatedPart.TREE) {\n                this.table.data.nodes = (_a = this._diagram.layer) === null || _a === void 0 ? void 0 : _a.children;\n            }\n            else if (parts & EToolSelectSelectionUpdatedPart.SELECTION) {\n                this.table.data.update();\n            }\n            else if (parts & EToolSelectSelectionUpdatedPart.PROPERTY_ID) {\n                this.table.data.update(true);\n            }\n            this.layoutOrder.state.isEnabled = EShapeCapabilities.contains(this._selection.last(), EShapeCapability.ORDER_IN_LAYER);\n        }\n        else {\n            this._updatedParts |= parts;\n        }\n    };\n    EEditorTree.prototype.onLayerChange = function () {\n        var _a;\n        this.table.data.nodes = (_a = this._diagram.layer) === null || _a === void 0 ? void 0 : _a.children;\n    };\n    Object.defineProperty(EEditorTree.prototype, \"table\", {\n        get: function () {\n            var _a;\n            return ((_a = this._table) !== null && _a !== void 0 ? _a : (this._table = this.newTable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newTable = function () {\n        var _this = this;\n        return new DTable({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            columns: [\n                {\n                    type: \"TREE\",\n                    editable: true,\n                    getter: function (row) {\n                        return toShapeLabel(row);\n                    },\n                    setter: function (row, columnIndex, cell) {\n                        if (row.id !== cell) {\n                            DControllers.getCommandController().push(new ECommandShapePropertyId(_this._selection, cell, [row]));\n                        }\n                    }\n                }\n            ],\n            data: new DTableDataTree({\n                reverse: true,\n                toChildren: function (shape) {\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN)) {\n                        return shape.children;\n                    }\n                    return null;\n                },\n                selection: function (parent) {\n                    return new EEditorTreeSelection(parent, _this._selection);\n                }\n            }),\n            on: {\n                keydown: function (e) {\n                    if (UtilKeyboardEvent.isDeleteKey(e)) {\n                        _this._selection.delete();\n                        e.preventDefault();\n                    }\n                }\n            }\n        });\n    };\n    EEditorTree.prototype.getType = function () {\n        return \"EEditorTree\";\n    };\n    return EEditorTree;\n}(DLayoutVertical));\nexport { EEditorTree };\n//# sourceMappingURL=e-editor-tree.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DDialogMessage, DDialogProcessing, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, isArray } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nvar EEditorValidation = /** @class */ (function (_super) {\n    __extends(EEditorValidation, _super);\n    function EEditorValidation(options) {\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Verifier\n        _this._validator = options.validator;\n        // Diagram\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.list.data.clear();\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        // Layout\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [_this.newTextLabel(), _this.buttonRevalidate]\n        }));\n        _this.addChild(_this.list);\n        return _this;\n    }\n    EEditorValidation.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"buttonRevalidate\", {\n        get: function () {\n            var result = this._buttonRevalidate;\n            if (result == null) {\n                result = this.newButtonRevalidate();\n                this._buttonRevalidate = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newButtonRevalidate = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.refresh\n            },\n            title: this.theme.getButtonRevalidateTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonValidateActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorValidation.prototype.onButtonValidateActive = function (opener) {\n        var validator = this._validator;\n        if (validator != null) {\n            var canvas = this._diagram.canvas;\n            if (canvas != null) {\n                var dialogProcessing_1 = this.dialogProcessing;\n                dialogProcessing_1.open(opener);\n                var data_1 = this.list.data;\n                try {\n                    var result = validator(canvas);\n                    if (isArray(result)) {\n                        data_1.clearAndAddAll(result);\n                        dialogProcessing_1.resolve();\n                    }\n                    else {\n                        result.then(function (results) {\n                            data_1.clearAndAddAll(results);\n                            dialogProcessing_1.resolve();\n                        }, function () {\n                            data_1.clear();\n                            dialogProcessing_1.reject();\n                        });\n                    }\n                }\n                catch (_a) {\n                    data_1.clear();\n                    dialogProcessing_1.reject();\n                }\n            }\n        }\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"list\", {\n        get: function () {\n            var result = this._list;\n            if (result == null) {\n                result = this.newList();\n                this._list = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return value.message;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            select: function (value, item) {\n                                _this.onListItemDown(value, item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorValidation.prototype.onListItemDown = function (value, item) {\n        var shape = value.shape;\n        if (shape != null) {\n            var canvas = this._diagram.canvas;\n            var layer = shape.root.parent;\n            if (canvas != null && layer != null) {\n                // Selection\n                var selection = this._selection;\n                var before = selection.store();\n                if (selection.set(shape)) {\n                    selection.focus();\n                    var after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n                // Change the active layer\n                var layerActive = canvas.layer.active;\n                if (layerActive !== layer) {\n                    canvas.layer.active = layer;\n                }\n            }\n            else {\n                this.dialogError.open(item);\n            }\n        }\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"dialogError\", {\n        get: function () {\n            var result = this._dialogError;\n            if (result == null) {\n                result = this.newDialogError();\n                this._dialogError = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newDialogError = function () {\n        return new DDialogMessage({\n            message: \"No shapes found.\"\n        });\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"dialogProcessing\", {\n        get: function () {\n            var result = this._dialogProcessing;\n            if (result == null) {\n                result = this.newDialogProcessing();\n                this._dialogProcessing = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newDialogProcessing = function () {\n        return new DDialogProcessing({\n            footer: {\n                button: {\n                    ok: \"OK\",\n                    cancel: null\n                }\n            }\n        });\n    };\n    EEditorValidation.prototype.getType = function () {\n        return \"EEditorValidation\";\n    };\n    return EEditorValidation;\n}(DLayoutVertical));\nexport { EEditorValidation };\n//# sourceMappingURL=e-editor-validation.js.map","var EToolGroupImpl = /** @class */ (function () {\n    function EToolGroupImpl() {\n        this._isSuspended = false;\n        this._active = null;\n        this._activeParameter = null;\n    }\n    EToolGroupImpl.prototype.activate = function (target, parameter) {\n        var oldActive = this._active;\n        var oldActiveParameter = this._activeParameter;\n        if (oldActive !== target || oldActiveParameter !== parameter) {\n            this._activeParameter = parameter;\n            if (oldActive !== target) {\n                if (oldActive) {\n                    oldActive.deactivate();\n                }\n                this._active = target;\n                if (!this._isSuspended) {\n                    target.activate();\n                }\n            }\n        }\n    };\n    EToolGroupImpl.prototype.deactivate = function (target, parameter) {\n        if (this._active === target && this._activeParameter === parameter) {\n            this._active = null;\n            this._activeParameter = null;\n            target.deactivate();\n        }\n    };\n    EToolGroupImpl.prototype.suspend = function () {\n        if (!this._isSuspended) {\n            this._isSuspended = true;\n            var active = this._active;\n            if (active) {\n                active.deactivate();\n            }\n        }\n    };\n    EToolGroupImpl.prototype.resume = function () {\n        if (this._isSuspended) {\n            this._isSuspended = false;\n            var active = this._active;\n            if (active) {\n                active.activate();\n            }\n        }\n    };\n    EToolGroupImpl.prototype.isSuspended = function () {\n        return this._isSuspended;\n    };\n    return EToolGroupImpl;\n}());\nexport { EToolGroupImpl };\n//# sourceMappingURL=e-tool-group-impl.js.map","import { __extends } from \"tslib\";\nimport { utils } from \"pixi.js\";\nvar EToolImpl = /** @class */ (function (_super) {\n    __extends(EToolImpl, _super);\n    function EToolImpl() {\n        var _this = _super.call(this) || this;\n        _this._isActive = false;\n        return _this;\n    }\n    EToolImpl.prototype.activate = function () {\n        if (!this._isActive) {\n            this._isActive = true;\n            this.onActivate();\n        }\n    };\n    EToolImpl.prototype.deactivate = function () {\n        if (this._isActive) {\n            this._isActive = false;\n            this.onDeactivate();\n        }\n    };\n    EToolImpl.prototype.onActivate = function () {\n        // DO NOTHING\n    };\n    EToolImpl.prototype.onDeactivate = function () {\n        // DO NOTHING\n    };\n    EToolImpl.prototype.isActive = function () {\n        return this._isActive;\n    };\n    return EToolImpl;\n}(utils.EventEmitter));\nexport { EToolImpl };\n//# sourceMappingURL=e-tool-impl.js.map","import { __extends } from \"tslib\";\nimport { Graphics, Point } from \"pixi.js\";\nvar FILL_COLOR = 0x1e87f0;\nvar FILL_ALPHA = 0.5;\nvar EToolSelectArea = /** @class */ (function (_super) {\n    __extends(EToolSelectArea, _super);\n    function EToolSelectArea() {\n        var _this = _super.call(this) || this;\n        _this._size = new Point();\n        return _this;\n    }\n    Object.defineProperty(EToolSelectArea.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolSelectArea.prototype.update = function () {\n        this.clear();\n        var size = this._size;\n        var x = Math.min(0, size.x);\n        var y = Math.min(0, size.y);\n        var width = Math.abs(size.x);\n        var height = Math.abs(size.y);\n        this.beginFill(FILL_COLOR, FILL_ALPHA);\n        this.drawRect(x, y, width, height);\n        this.endFill();\n    };\n    return EToolSelectArea;\n}(Graphics));\nexport { EToolSelectArea };\n//# sourceMappingURL=e-tool-select-area.js.map","import { __extends } from \"tslib\";\nimport { Container } from \"pixi.js\";\nvar EToolSelectModifierContainer = /** @class */ (function (_super) {\n    __extends(EToolSelectModifierContainer, _super);\n    function EToolSelectModifierContainer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EToolSelectModifierContainer;\n}(Container));\nexport { EToolSelectModifierContainer };\n//# sourceMappingURL=e-tool-select-modifier-container.js.map","import { __extends } from \"tslib\";\nimport { ESnapperModifierAnchor } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nvar EToolSelectModifierHitArea = /** @class */ (function (_super) {\n    __extends(EToolSelectModifierHitArea, _super);\n    function EToolSelectModifierHitArea(modifier) {\n        var _this = _super.call(this) || this;\n        _this._modifier = modifier;\n        return _this;\n    }\n    EToolSelectModifierHitArea.prototype.contains = function (x, y) {\n        var modifier = this._modifier;\n        var s = modifier.getAnchorSize() * 2;\n        var t = s * 0.5;\n        var w = modifier.width;\n        var h = modifier.height;\n        var p = w * 0.5;\n        var q = h * 0.5;\n        var d = modifier.getAnchorRotationDistance();\n        var r = modifier.getAnchorRotationSize() * 2;\n        // Top left\n        if (0 - t <= x && 0 - t <= y && x <= 0 - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_LEFT);\n            return true;\n        }\n        // Top right\n        if (w - t <= x && 0 - t <= y && x <= w - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_RIGHT);\n            return true;\n        }\n        // Bottom left\n        if (0 - t <= x && h - t <= y && x <= 0 - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_LEFT);\n            return true;\n        }\n        // Bottom right\n        if (w - t <= x && h - t <= y && x <= w - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_RIGHT);\n            return true;\n        }\n        // Top Center\n        if (p - t <= x && 0 - t <= y && x <= p - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_CENTER);\n            return true;\n        }\n        // Middle Right\n        if (w - t <= x && q - t <= y && x <= w - t + s && y <= q - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.MIDDLE_RIGHT);\n            return true;\n        }\n        // Bottom Center\n        if (p - t <= x && h - t <= y && x <= p - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_CENTER);\n            return true;\n        }\n        // Middle Left\n        if (0 - t <= x && q - t <= y && x <= 0 - t + s && y <= q - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.MIDDLE_LEFT);\n            return true;\n        }\n        // Rotate\n        if (p - r <= x && d - r <= y && x <= p + r && y <= d + r) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.ROTATION);\n            return true;\n        }\n        return false;\n    };\n    return EToolSelectModifierHitArea;\n}(Rectangle));\nexport { EToolSelectModifierHitArea };\n//# sourceMappingURL=e-tool-select-modifier-hit-area.js.map","import { __extends } from \"tslib\";\nimport { EShapeCircle, EShapeContainer, EShapeLockPart, EShapeRectangle, ESnapperModifierAnchor } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectModifierHitArea } from \"./e-tool-select-modifier-hit-area\";\nvar EToolSelectModifier = /** @class */ (function (_super) {\n    __extends(EToolSelectModifier, _super);\n    function EToolSelectModifier(options) {\n        var _this = _super.call(this) || this;\n        _this.selected = false;\n        _this.index = 0;\n        _this._width = 0;\n        _this._height = 0;\n        _this._scaleBound = 1;\n        _this._scaleBoundInverse = 1;\n        _this._isAllowed = true;\n        _this._lastHitAnchor = ESnapperModifierAnchor.NONE;\n        if (options == null || options.editable !== false) {\n            _this.cursor = \"grab\";\n            _this.interactive = true;\n            _this.hitArea = new EToolSelectModifierHitArea(_this);\n        }\n        else {\n            _this.interactive = false;\n        }\n        _this.group = false;\n        _this._anchorBase = new EShapeRectangle().attach(_this);\n        _this._anchorsScale = [\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this)\n        ];\n        _this._anchorRotate = new EShapeCircle().attach(_this);\n        return _this;\n    }\n    EToolSelectModifier.prototype.onPrerender = function () {\n        var scale0 = this.getParentScale();\n        var scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            this.update();\n        }\n    };\n    EToolSelectModifier.prototype.render = function (renderer) {\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n            return;\n        }\n        this.onPrerender();\n        _super.prototype.render.call(this, renderer);\n    };\n    EToolSelectModifier.prototype.getParentScale = function () {\n        var parent = this.parent;\n        if (parent != null) {\n            var parentParent = parent.parent;\n            if (parentParent != null) {\n                return parentParent.scale.y;\n            }\n        }\n        return 1;\n    };\n    Object.defineProperty(EToolSelectModifier.prototype, \"factor\", {\n        get: function () {\n            return this._scaleBoundInverse;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolSelectModifier.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (width) {\n            this._width = width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolSelectModifier.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (height) {\n            this._height = height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolSelectModifier.prototype.getLastHitAnchor = function () {\n        return this._lastHitAnchor;\n    };\n    EToolSelectModifier.prototype.setLastHitAnchor = function (anchor) {\n        var result = this._lastHitAnchor;\n        this._lastHitAnchor = anchor;\n        return result;\n    };\n    EToolSelectModifier.prototype.getAnchorSize = function () {\n        return 7 * this._scaleBoundInverse;\n    };\n    EToolSelectModifier.prototype.getAnchorRotationDistance = function () {\n        return (0 <= this._height ? -18 : +18) * this._scaleBoundInverse;\n    };\n    EToolSelectModifier.prototype.getAnchorRotationSize = function () {\n        return 5 * this._scaleBoundInverse;\n    };\n    EToolSelectModifier.prototype.update = function () {\n        var color = this.group ? 0x1ef087 : 0x1e87f0;\n        var width = this._width;\n        var height = this._height;\n        var scaleInverse = this._scaleBoundInverse;\n        var s = this.getAnchorSize();\n        var w = width;\n        var h = height;\n        var p = w * 0.5;\n        var q = h * 0.5;\n        var d = this.getAnchorRotationDistance();\n        var r = 2 * this.getAnchorRotationSize();\n        var l = 2 * scaleInverse;\n        var o = 1.5 * l;\n        // Anchor base\n        var anchorBase = this._anchorBase;\n        anchorBase.lock(EShapeLockPart.UPLOADED);\n        anchorBase.fill.enable = false;\n        anchorBase.stroke.set(true, color, 0.333, l, 2);\n        anchorBase.transform.position.set(width * 0.5, height * 0.5);\n        anchorBase.size.set(width, height);\n        anchorBase.unlock(EShapeLockPart.UPLOADED, true);\n        // Anchor for rotation\n        var anchorRotate = this._anchorRotate;\n        anchorRotate.lock(EShapeLockPart.UPLOADED);\n        anchorRotate.stroke.enable = false;\n        anchorRotate.fill.set(true, color, 1.0);\n        anchorRotate.size.set(r, r);\n        anchorRotate.transform.position.set(p, d);\n        anchorRotate.unlock(EShapeLockPart.UPLOADED, true);\n        // Anchor for scaling\n        var anchorsScale = this._anchorsScale;\n        for (var i = 0, imax = anchorsScale.length; i < imax; ++i) {\n            var anchorScale = anchorsScale[i];\n            anchorScale.lock(EShapeLockPart.UPLOADED);\n            anchorScale.stroke.enable = false;\n            anchorScale.fill.set(true, color, 1.0);\n            anchorScale.size.set(s, s);\n        }\n        anchorsScale[0].transform.position.set(-o, -o);\n        anchorsScale[1].transform.position.set(+o + w, -o);\n        anchorsScale[2].transform.position.set(-o, +o + h);\n        anchorsScale[3].transform.position.set(+o + w, +o + h);\n        anchorsScale[4].transform.position.set(p, -o);\n        anchorsScale[5].transform.position.set(+o + w, q);\n        anchorsScale[6].transform.position.set(p, +o + h);\n        anchorsScale[7].transform.position.set(-o, q);\n        for (var i = 0, imax = anchorsScale.length; i < imax; ++i) {\n            anchorsScale[i].unlock(EShapeLockPart.UPLOADED, true);\n        }\n    };\n    EToolSelectModifier.prototype.allow = function () {\n        this._isAllowed = true;\n    };\n    EToolSelectModifier.prototype.isAllowed = function () {\n        return this._isAllowed;\n    };\n    EToolSelectModifier.prototype.disallow = function () {\n        this._isAllowed = false;\n    };\n    EToolSelectModifier.prototype.destroy = function () {\n        var parent = this.parent;\n        if (parent) {\n            parent.removeChild(this);\n        }\n    };\n    return EToolSelectModifier;\n}(EShapeContainer));\nexport { EToolSelectModifier };\n//# sourceMappingURL=e-tool-select-modifier.js.map","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { __extends } from \"tslib\";\nimport { EShapeEditor } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { UtilShapeTransforms } from \"./util-shape-transforms\";\nvar UtilShapeConnectorTransformData = /** @class */ (function (_super) {\n    __extends(UtilShapeConnectorTransformData, _super);\n    function UtilShapeConnectorTransformData() {\n        var _this = _super.call(this) || this;\n        _this.tailVector = new Point();\n        _this.headVector = new Point();\n        return _this;\n    }\n    return UtilShapeConnectorTransformData;\n}(EShapeEditor));\nexport { UtilShapeConnectorTransformData };\nvar UtilShapeConnectorTransforms = /** @class */ (function () {\n    function UtilShapeConnectorTransforms() {\n    }\n    UtilShapeConnectorTransforms.prepare = function (connector) {\n        var editor = null;\n        if (connector.editor instanceof UtilShapeConnectorTransformData) {\n            editor = connector.editor;\n        }\n        else {\n            editor = new UtilShapeConnectorTransformData();\n            connector.editor = editor;\n        }\n        // Edges\n        var tailVector = editor.tailVector;\n        var headVector = editor.headVector;\n        var edge = connector.edge;\n        edge.tail.local.copyTo(tailVector);\n        edge.head.local.copyTo(headVector);\n        var localTransform = connector.transform.localTransform;\n        localTransform.applyInverse(tailVector, tailVector);\n        localTransform.applyInverse(headVector, headVector);\n        // Other preparations\n        UtilShapeTransforms.prepare(connector);\n    };\n    UtilShapeConnectorTransforms.finalize = function (connector) {\n        UtilShapeTransforms.finalize(connector);\n    };\n    UtilShapeConnectorTransforms.apply = function (connector, transform) {\n        var editor = connector.editor;\n        if (editor instanceof UtilShapeConnectorTransformData) {\n            var localTransform = editor.localTransform;\n            editor.internalTransformParentInverse\n                .copyTo(localTransform)\n                .append(transform)\n                .append(editor.internalTransform);\n            var a = localTransform.a;\n            var b = localTransform.b;\n            var c = localTransform.c;\n            var d = localTransform.d;\n            var tx = localTransform.tx;\n            var ty = localTransform.ty;\n            var edge = connector.edge;\n            var tail = edge.tail;\n            var head = edge.head;\n            var editorTailVector = editor.tailVector;\n            var editorTailVectorX = editorTailVector.x;\n            var editorTailVectorY = editorTailVector.y;\n            var newTailLocalX = a * editorTailVectorX + c * editorTailVectorY + tx;\n            var newTailLocalY = b * editorTailVectorX + d * editorTailVectorY + ty;\n            var editorHeadVector = editor.headVector;\n            var editorHeadVectorX = editorHeadVector.x;\n            var editorHeadVectorY = editorHeadVector.y;\n            var newHeadLocalX = a * editorHeadVectorX + c * editorHeadVectorY + tx;\n            var newHeadLocalY = b * editorHeadVectorX + d * editorHeadVectorY + ty;\n            edge.lock();\n            tail.local.set(newTailLocalX, newTailLocalY);\n            head.local.set(newHeadLocalX, newHeadLocalY);\n            edge.unlock();\n        }\n    };\n    return UtilShapeConnectorTransforms;\n}());\nexport { UtilShapeConnectorTransforms };\n//# sourceMappingURL=util-shape-connector-transforms.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyStrokeStyle } from \"./e-command-shape-property-stroke-style\";\nvar ECommandShapePropertyLineStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineStyle, _super);\n    function ECommandShapePropertyLineStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineStyle.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE)) {\n            return EShapeCapability.LINE;\n        }\n        return EShapeCapability.NONE;\n    };\n    return ECommandShapePropertyLineStyle;\n}(ECommandShapePropertyStrokeStyle));\nexport { ECommandShapePropertyLineStyle };\n//# sourceMappingURL=e-command-shape-property-line-style.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, DDiagramEditor, DDiagramLayer, DDiagrams, DDiagramSerializedVersion, EShapeBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeGroup, EShapeResourceManagerDeserialization, EShapeResourceManagerSerialization, ESnapperModifierAnchor, isNumber, deserializeAll, EShapeResourceManagerDeserializationMode, DBase } from \"@wcardinal/wcardinal-ui\";\nimport { Matrix, Point, Rectangle, utils } from \"pixi.js\";\nimport { ECommandComposition } from \"../command/e-command-composition\";\nimport { ECommandShapeActionValueAdd } from \"../command/e-command-shape-action-value-add\";\nimport { ECommandShapeActionValueBringForward } from \"../command/e-command-shape-action-value-bring-forward\";\nimport { ECommandShapeActionValueRemove } from \"../command/e-command-shape-action-value-remove\";\nimport { ECommandShapeActionValueReplace } from \"../command/e-command-shape-action-value-replace\";\nimport { ECommandShapeActionValueSendBackward } from \"../command/e-command-shape-action-value-send-backward\";\nimport { ECommandShapeTreeBringForward } from \"../command/e-command-shape-tree-bring-forward\";\nimport { ECommandShapeTreeBringToFront } from \"../command/e-command-shape-tree-bring-to-front\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { ECommandShapeDelete } from \"../command/e-command-shape-delete\";\nimport { ECommandShapePropertyAll } from \"../command/e-command-shape-property-all\";\nimport { ECommandShapePropertyCornerOff } from \"../command/e-command-shape-property-corner-off\";\nimport { ECommandShapePropertyCursor } from \"../command/e-command-shape-property-cursor\";\nimport { ECommandShapePropertyLineHeadMargin } from \"../command/e-command-shape-property-line-head-margin\";\nimport { ECommandShapePropertyLineTailMargin } from \"../command/e-command-shape-property-line-tail-margin\";\nimport { ECommandShapePropertyFillColor } from \"../command/e-command-shape-property-fill-color\";\nimport { ECommandShapePropertyFillEnable } from \"../command/e-command-shape-property-fill-enable\";\nimport { ECommandShapePropertyFocusable } from \"../command/e-command-shape-property-focusable\";\nimport { ECommandShapePropertyId } from \"../command/e-command-shape-property-id\";\nimport { ECommandShapePropertyImage } from \"../command/e-command-shape-property-image\";\nimport { ECommandShapePropertyImageFitTo } from \"../command/e-command-shape-property-image-fit-to\";\nimport { ECommandShapePropertyInteractive } from \"../command/e-command-shape-property-interactive\";\nimport { ECommandShapePropertyLineHeadColor } from \"../command/e-command-shape-property-line-head-color\";\nimport { ECommandShapePropertyLineHeadSizeX } from \"../command/e-command-shape-property-line-head-size-x\";\nimport { ECommandShapePropertyLineHeadSizeY } from \"../command/e-command-shape-property-line-head-size-y\";\nimport { ECommandShapePropertyLineHeadType } from \"../command/e-command-shape-property-line-head-type\";\nimport { ECommandShapePropertyLineTailColor } from \"../command/e-command-shape-property-line-tail-color\";\nimport { ECommandShapePropertyLineTailSizeX } from \"../command/e-command-shape-property-line-tail-size-x\";\nimport { ECommandShapePropertyLineTailSizeY } from \"../command/e-command-shape-property-line-tail-size-y\";\nimport { ECommandShapePropertyLineTailType } from \"../command/e-command-shape-property-line-tail-type\";\nimport { ECommandShapePropertyPointsStyle } from \"../command/e-command-shape-property-points-style\";\nimport { ECommandShapePropertyPosition } from \"../command/e-command-shape-property-position\";\nimport { ECommandShapePropertyPositionAndRotate } from \"../command/e-command-shape-property-position-and-rotation\";\nimport { ECommandShapePropertyPositionX } from \"../command/e-command-shape-property-position-x\";\nimport { ECommandShapePropertyPositionY } from \"../command/e-command-shape-property-position-y\";\nimport { ECommandShapePropertyRadius } from \"../command/e-command-shape-property-radius\";\nimport { ECommandShapePropertyRotation } from \"../command/e-command-shape-property-rotation\";\nimport { ECommandShapePropertyShortcut } from \"../command/e-command-shape-property-shortcut\";\nimport { ECommandShapePropertySizeX } from \"../command/e-command-shape-property-size-x\";\nimport { ECommandShapePropertySizeY } from \"../command/e-command-shape-property-size-y\";\nimport { ECommandShapePropertySkew } from \"../command/e-command-shape-property-skew\";\nimport { ECommandShapePropertyStrokeAlign } from \"../command/e-command-shape-property-stroke-align\";\nimport { ECommandShapePropertyStrokeColor } from \"../command/e-command-shape-property-stroke-color\";\nimport { ECommandShapePropertyStrokeEnable } from \"../command/e-command-shape-property-stroke-enable\";\nimport { ECommandShapePropertyStrokeSideOff } from \"../command/e-command-shape-property-stroke-side-off\";\nimport { ECommandShapePropertyStrokeStyle } from \"../command/e-command-shape-property-stroke-style\";\nimport { ECommandShapePropertyStrokeWidth } from \"../command/e-command-shape-property-stroke-width\";\nimport { ECommandShapePropertyTextAlignHorizontal } from \"../command/e-command-shape-property-text-align-horizontal\";\nimport { ECommandShapePropertyTextAlignVertical } from \"../command/e-command-shape-property-text-align-vertical\";\nimport { ECommandShapePropertyTextClipping } from \"../command/e-command-shape-property-text-clipping\";\nimport { ECommandShapePropertyTextColor } from \"../command/e-command-shape-property-text-color\";\nimport { ECommandShapePropertyTextDirection } from \"../command/e-command-shape-property-text-direction\";\nimport { ECommandShapePropertyTextFamily } from \"../command/e-command-shape-property-text-family\";\nimport { ECommandShapePropertyTextOffsetHorizontal } from \"../command/e-command-shape-property-text-offset-horizontal\";\nimport { ECommandShapePropertyTextOffsetVertical } from \"../command/e-command-shape-property-text-offset-vertical\";\nimport { ECommandShapePropertyTextOutlineColor } from \"../command/e-command-shape-property-text-outline-color\";\nimport { ECommandShapePropertyTextOutlineEnable } from \"../command/e-command-shape-property-text-outline-enable\";\nimport { ECommandShapePropertyTextOutlineWidth } from \"../command/e-command-shape-property-text-outline-width\";\nimport { ECommandShapePropertyTextPaddingHorizontal } from \"../command/e-command-shape-property-text-padding-horizontal\";\nimport { ECommandShapePropertyTextPaddingVertical } from \"../command/e-command-shape-property-text-padding-vertical\";\nimport { ECommandShapePropertyTextSize } from \"../command/e-command-shape-property-text-size\";\nimport { ECommandShapePropertyTextSpacingHorizontal } from \"../command/e-command-shape-property-text-spacing-horizontal\";\nimport { ECommandShapePropertyTextSpacingVertical } from \"../command/e-command-shape-property-text-spacing-vertical\";\nimport { ECommandShapePropertyTextStyle } from \"../command/e-command-shape-property-text-style\";\nimport { ECommandShapePropertyTextValue } from \"../command/e-command-shape-property-text-value\";\nimport { ECommandShapePropertyTextWeight } from \"../command/e-command-shape-property-text-weight\";\nimport { ECommandShapePropertyTitle } from \"../command/e-command-shape-property-title\";\nimport { ECommandShapeReplace } from \"../command/e-command-shape-replace\";\nimport { ECommandShapeTreeSendBackward } from \"../command/e-command-shape-tree-send-backward\";\nimport { ECommandShapeTreeSendToBack } from \"../command/e-command-shape-tree-send-to-back\";\nimport { ECommandShapeDataValueAdd } from \"../command/e-command-shape-data-value-add\";\nimport { ECommandShapeDataValueBringForward } from \"../command/e-command-shape-data-value-bring-forward\";\nimport { ECommandShapeDataValueRemove } from \"../command/e-command-shape-data-value-remove\";\nimport { ECommandShapeDataValueReplace } from \"../command/e-command-shape-data-value-replace\";\nimport { ECommandShapeDataValueSendBackward } from \"../command/e-command-shape-data-value-send-backward\";\nimport { EToolSelectModifier } from \"./e-tool-select-modifier\";\nimport { EToolSelectModifierContainer } from \"./e-tool-select-modifier-container\";\nimport { EToolSelectSelectionUpdatedPart } from \"./e-tool-select-selection-updated-part\";\nimport { ECommandShapeDataMappingValueAdd } from \"../command/e-command-shape-data-mapping-value-add\";\nimport { ECommandShapeDataMappingValueReplace } from \"../command/e-command-shape-data-mapping-value-replace\";\nimport { ECommandShapeDataMappingValueRemove } from \"../command/e-command-shape-data-mapping-value-remove\";\nimport { ECommandShapeDataMappingValueBringForward } from \"../command/e-command-shape-data-mapping-value-bring-forward\";\nimport { ECommandShapeDataMappingValueSendBackward } from \"../command/e-command-shape-data-mapping-value-send-backward\";\nimport { ECommandShapePropertyCapabilityLock } from \"../command/e-command-shape-property-capability-lock\";\nimport { ECommandShapePropertyCapabilityUnlock } from \"../command/e-command-shape-property-capability-unlock\";\nimport { ECommandShapePropertyPositionTop } from \"../command/e-command-shape-property-position-top\";\nimport { ECommandShapePropertyPositionLeft } from \"../command/e-command-shape-property-position-left\";\nimport { ECommandShapePropertyImageClear } from \"../command/e-command-shape-property-image-clear\";\nimport { ECommandShapePropertyCornerOn } from \"../command/e-command-shape-property-corner-on\";\nimport { ECommandShapePropertyStrokeSideOn } from \"../command/e-command-shape-property-stroke-side-on\";\nimport { ECommandShapeGroup } from \"../command/e-command-shape-group\";\nimport { ECommandShapeUngroup } from \"../command/e-command-shape-ungroup\";\nimport { ECommandShapePropertyTextSizeDelta } from \"../command/e-command-shape-property-text-size-delta\";\nimport { ECommandShapePropertyTextFitting } from \"../command/e-command-shape-property-text-fitting\";\nimport { UtilShapeTransforms } from \"../util/util-shape-transforms\";\nimport { UtilShapeConnectorTransforms } from \"../util/util-shape-connector-transforms\";\nimport { ECommandShapePropertyLineStyle } from \"../command/e-command-shape-property-line-style\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nimport { ECommandShapePropertyFillPercent } from \"../command/e-command-shape-property-fill-percent\";\nimport { ECommandShapePropertyFillDirection } from \"../command/e-command-shape-property-fill-direction\";\nvar initLeft = function (rect) {\n    return rect.x;\n};\nvar initCenter = function (rect) {\n    return rect.x + rect.width * 0.5;\n};\nvar initRight = function (rect) {\n    return rect.x + rect.width;\n};\nvar initTop = function (rect) {\n    return rect.y;\n};\nvar initMiddle = function (rect) {\n    return rect.y + rect.height * 0.5;\n};\nvar initBottom = function (rect) {\n    return rect.y + rect.height;\n};\nvar initWidth = function (rect) {\n    return rect.width;\n};\nvar initHeight = function (rect) {\n    return rect.height;\n};\nvar initZero = function (rect) {\n    return 0;\n};\nvar updateMin = function (valueA, valueB) {\n    return Math.min(valueA, valueB);\n};\nvar updateMax = function (valueA, valueB) {\n    return Math.max(valueA, valueB);\n};\nvar updateSum = function (valueA, valueB) {\n    return valueA + valueB;\n};\nvar finishupIdentity = function (value, size) {\n    return value;\n};\nvar finishupAverage = function (value, size) {\n    return value / size;\n};\nvar assingX = function (value, point) {\n    point.x = value;\n};\nvar assingY = function (value, point) {\n    point.y = value;\n};\nvar applyLeft = function (point, diff, scale, shape) {\n    shape.transform.position.x = point.x + diff / scale.x;\n};\nvar applyCenter = function (point, diff, scale, shape) {\n    shape.transform.position.x = point.x;\n};\nvar applyRight = function (point, diff, scale, shape) {\n    shape.transform.position.x = point.x - diff / scale.x;\n};\nvar applyTop = function (point, diff, scale, shape) {\n    shape.transform.position.y = point.y + diff / scale.y;\n};\nvar applyMiddle = function (point, diff, scale, shape) {\n    shape.transform.position.y = point.y;\n};\nvar applyBottom = function (point, diff, scale, shape) {\n    shape.transform.position.y = point.y - diff / scale.y;\n};\nvar EToolSelectSelection = /** @class */ (function (_super) {\n    __extends(EToolSelectSelection, _super);\n    function EToolSelectSelection(options) {\n        var _this = _super.call(this) || this;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        var modifier = new EToolSelectModifier(options.modifier);\n        _this._modifier = modifier;\n        var modifierContainer = new EToolSelectModifierContainer();\n        modifierContainer.addChild(modifier);\n        diagram.on(\"unset\", function (canvas) {\n            if (modifierContainer.parent === canvas) {\n                // Because after this event, a canvas is destroyed.\n                // At that time, all its children also be destroyed.\n                // The modifier container therefore should be removed.\n                canvas.removeChild(modifierContainer);\n            }\n        });\n        _this._modifierContainer = modifierContainer;\n        _this._originGlobal = new Point();\n        _this._originLocal = new Point();\n        _this._rotationAxisGlobal = new Point();\n        _this._scale = new Point();\n        _this._scaleAxis0 = new Point();\n        _this._scaleAxis1 = new Point();\n        _this._scaleDet = 1;\n        _this._scaleDetInverse = 1;\n        _this._scaleTransform = new Matrix();\n        _this._scaleTransformInverse = new Matrix();\n        _this._scaleAnchor = ESnapperModifierAnchor.NONE;\n        _this._shapes = [];\n        _this._shapeBound = new Rectangle();\n        _this._shapeBoundRect = new Rectangle();\n        _this._alignPoint = new Point();\n        _this._alignRectangle = new Rectangle();\n        _this._shiftPoint1 = new Point();\n        _this._shiftPoint2 = new Point();\n        _this._transform = new Matrix();\n        _this._translateDelta = new Point();\n        _this._isUpdated = false;\n        _this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        _this._lockCount = 0;\n        return _this;\n    }\n    EToolSelectSelection.prototype.lock = function () {\n        this._lockCount += 1;\n        if (this._lockCount === 1) {\n            this._isUpdated = false;\n            this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        }\n    };\n    EToolSelectSelection.prototype.unlock = function () {\n        this._lockCount -= 1;\n        if (this._lockCount === 0) {\n            if (this._isUpdated) {\n                this.update(this._updatedParts);\n            }\n        }\n    };\n    EToolSelectSelection.prototype.update = function (parts) {\n        var parsed = EToolSelectSelectionUpdatedPart.ALL;\n        if (parts != null) {\n            if (isNumber(parts)) {\n                parsed = parts;\n            }\n            else {\n                // eslint-disable-next-line prefer-rest-params\n                parsed = this.toParts(arguments);\n            }\n        }\n        if (this._lockCount <= 0) {\n            this.updateModifier();\n            this.emit(\"change\", parsed, this);\n        }\n        else {\n            this._isUpdated = true;\n            this._updatedParts |= parsed;\n        }\n    };\n    EToolSelectSelection.prototype.toParts = function (parts) {\n        if (isNumber(parts)) {\n            return parts;\n        }\n        var result = EToolSelectSelectionUpdatedPart.NONE;\n        for (var i = 0, imax = parts.length; i < imax; ++i) {\n            result |= EToolSelectSelectionUpdatedPart[parts[i]];\n        }\n        return result;\n    };\n    EToolSelectSelection.prototype.updateModifier = function () {\n        var diagram = this._diagram;\n        var modifier = this._modifier;\n        if (modifier.isAllowed()) {\n            var shapes = this._shapes;\n            var canvas = diagram.canvas;\n            var modifierContainer = this._modifierContainer;\n            if (canvas == null || shapes.length <= 0) {\n                modifier.visible = false;\n                DApplications.update(diagram);\n            }\n            else if (shapes.length <= 1) {\n                var shape = shapes[0];\n                if (shape.parent instanceof EShapeBase) {\n                    shape.updateTransform();\n                    var internalTransform = shape.transform.internalTransform;\n                    var a = internalTransform.a;\n                    var b = internalTransform.b;\n                    var c = internalTransform.c;\n                    var d = internalTransform.d;\n                    var pivot = shape.transform.pivot;\n                    var modifierPosition = modifier.position;\n                    modifierPosition.set(a * pivot.x + c * pivot.y + internalTransform.tx, b * pivot.x + d * pivot.y + internalTransform.ty);\n                    var layer = shape.root.parent;\n                    if (layer) {\n                        modifierContainer.transform.position.copyFrom(layer.transform.position);\n                    }\n                    else {\n                        modifierContainer.transform.position.set(0, 0);\n                    }\n                    var width = shape.size.x * Math.sqrt(a * a + b * b);\n                    var height = shape.size.y * Math.sqrt(c * c + d * d);\n                    modifier.width = width;\n                    modifier.height = height;\n                    modifier.pivot.set(width * 0.5, height * 0.5);\n                    var rx = Math.atan2(-c, d);\n                    var ry = Math.atan2(+b, a);\n                    var skew = (ry - rx) * 0.5;\n                    var rotation = (rx + ry) * 0.5;\n                    modifier.rotation = rotation;\n                    modifier.skew.set(skew, skew);\n                }\n                else {\n                    shape.updateTransform();\n                    var internalTransform = shape.transform.internalTransform;\n                    var a = internalTransform.a;\n                    var b = internalTransform.b;\n                    var c = internalTransform.c;\n                    var d = internalTransform.d;\n                    var pivot = shape.transform.pivot;\n                    var modifierPosition = modifier.position;\n                    modifierPosition.set(a * pivot.x + c * pivot.y + internalTransform.tx, b * pivot.x + d * pivot.y + internalTransform.ty);\n                    var layer = shape.root.parent;\n                    if (layer) {\n                        modifierContainer.transform.position.copyFrom(layer.transform.position);\n                    }\n                    else {\n                        modifierContainer.transform.position.set(0, 0);\n                    }\n                    modifier.width = shape.size.x;\n                    modifier.height = shape.size.y;\n                    modifier.pivot.set(shape.size.x * 0.5, shape.size.y * 0.5);\n                    modifier.rotation = shape.transform.rotation;\n                    modifier.skew.copyFrom(shape.transform.skew);\n                }\n                modifier.visible = true;\n                modifier.group =\n                    EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n                        0 < shape.children.length;\n                if (modifierContainer.parent !== canvas) {\n                    canvas.addChild(modifierContainer);\n                }\n                modifier.update();\n                DApplications.update(diagram);\n            }\n            else {\n                var bound = this._shapeBound;\n                var tempRect = this._shapeBoundRect;\n                shapes[0].getBoundsInternal(false, bound);\n                for (var i = 1, imax = shapes.length; i < imax; ++i) {\n                    var shape = shapes[i];\n                    shape.getBoundsInternal(false, tempRect);\n                    bound.enlarge(tempRect);\n                }\n                var layer = shapes[0].root.parent;\n                if (layer) {\n                    modifierContainer.transform.position.copyFrom(layer.transform.position);\n                }\n                else {\n                    modifierContainer.transform.position.set(0, 0);\n                }\n                modifier.position.set(bound.x, bound.y);\n                modifier.width = bound.width;\n                modifier.height = bound.height;\n                modifier.rotation = 0;\n                modifier.pivot.set(0, 0);\n                modifier.skew.set(0, 0);\n                modifier.visible = true;\n                modifier.group = false;\n                if (modifierContainer.parent !== canvas) {\n                    canvas.addChild(modifierContainer);\n                }\n                modifier.update();\n                DApplications.update(diagram);\n            }\n        }\n        else {\n            modifier.visible = false;\n            DApplications.update(diagram);\n        }\n    };\n    EToolSelectSelection.prototype.toggle = function (shape) {\n        var shapes = this._shapes;\n        if (shapes.length <= 0) {\n            var root = shape.root;\n            root.selected = true;\n            shapes.push(root);\n        }\n        else {\n            var first = shapes[0];\n            if (UtilShapeSearch.isParent(shape, first)) {\n                first.selected = false;\n                if (EShapeCapabilities.contains(first, EShapeCapability.CHILDREN)) {\n                    var shapeOfParent = UtilShapeSearch.toOfParent(shape, first);\n                    shapeOfParent.selected = true;\n                    shapes[0] = shapeOfParent;\n                }\n                else {\n                    shapes.splice(0, 1);\n                }\n            }\n            else if (first.parent === shape.parent) {\n                if (!shape.selected) {\n                    shape.selected = true;\n                    shapes.push(shape);\n                }\n                else {\n                    shape.selected = false;\n                    shapes.splice(shapes.indexOf(shape), 1);\n                }\n            }\n            else {\n                var sharedParent = UtilShapeSearch.toSharedParent(first, shape);\n                if (first.parent === sharedParent) {\n                    var shapeOfParent = UtilShapeSearch.toOfParent(shape, sharedParent);\n                    if (shapeOfParent.selected) {\n                        shapeOfParent.selected = false;\n                        shapes.splice(shapes.indexOf(shapeOfParent), 1);\n                    }\n                    else {\n                        shapeOfParent.selected = true;\n                        shapes.push(shapeOfParent);\n                    }\n                }\n                else {\n                    var newLength = 0;\n                    for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                        var oldShape = shapes[i];\n                        oldShape.selected = false;\n                        var newShape = UtilShapeSearch.toOfParent(oldShape, sharedParent);\n                        if (!newShape.selected) {\n                            newShape.selected = true;\n                            shapes[newLength] = newShape;\n                            newLength += 1;\n                        }\n                    }\n                    shapes.length = newLength;\n                    var shapeOfParent = UtilShapeSearch.toOfParent(shape, sharedParent);\n                    if (!shapeOfParent.selected) {\n                        shapeOfParent.selected = true;\n                        shapes.push(shapeOfParent);\n                    }\n                }\n            }\n        }\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n    };\n    /**\n     * Please note that the specified targets must be root shapes.\n     *\n     * @param targets root shapes to be added\n     */\n    EToolSelectSelection.prototype.addAll = function (targets) {\n        var shapes = this._shapes;\n        var isChanged = false;\n        // Convert to root shapes\n        if (0 < shapes.length) {\n            var first = shapes[0];\n            if (first.root !== first) {\n                var oldShapes = shapes.slice(0);\n                shapes.length = 0;\n                for (var i = 0, imax = oldShapes.length; i < imax; ++i) {\n                    var oldShape = oldShapes[i];\n                    oldShape.selected = false;\n                    var oldShapeRoot = oldShape.root;\n                    if (!oldShapeRoot.selected) {\n                        oldShapeRoot.selected = true;\n                        shapes.push(oldShapeRoot);\n                    }\n                }\n                isChanged = true;\n            }\n        }\n        // Add targets\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (!target.selected) {\n                target.selected = true;\n                shapes.push(target);\n                isChanged = true;\n            }\n        }\n        if (isChanged) {\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n        }\n        return isChanged;\n    };\n    EToolSelectSelection.prototype.clearAndAddAll = function (targets) {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].selected = false;\n        }\n        shapes.length = 0;\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            target.selected = true;\n            shapes.push(target);\n        }\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n        return true;\n    };\n    EToolSelectSelection.prototype.set = function (target) {\n        var shapes = this._shapes;\n        if (1 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = false;\n            }\n            shapes.length = 0;\n            target.selected = true;\n            shapes.push(target);\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n        else if (shapes.length === 1) {\n            if (shapes[0] === target) {\n                return false;\n            }\n            else {\n                shapes[0].selected = false;\n                target.selected = true;\n                shapes[0] = target;\n                this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n                return true;\n            }\n        }\n        else {\n            target.selected = true;\n            shapes.push(target);\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n    };\n    EToolSelectSelection.prototype.get = function () {\n        return this._shapes;\n    };\n    EToolSelectSelection.prototype.first = function () {\n        var shapes = this._shapes;\n        return 0 < shapes.length ? shapes[0] : null;\n    };\n    EToolSelectSelection.prototype.last = function () {\n        var shapes = this._shapes;\n        return 0 < shapes.length ? shapes[shapes.length - 1] : null;\n    };\n    EToolSelectSelection.prototype.swapLast = function (expectedLast, newLast) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var last = shapes[shapes.length - 1];\n            if (last === expectedLast) {\n                last.selected = false;\n                shapes[shapes.length - 1] = newLast;\n                newLast.selected = true;\n                this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n            }\n        }\n    };\n    EToolSelectSelection.prototype.remove = function (target) {\n        var shapes = this._shapes;\n        var index = shapes.indexOf(target);\n        if (0 <= index) {\n            target.selected = false;\n            shapes.splice(index, 1);\n            this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        }\n    };\n    EToolSelectSelection.prototype.contains = function (shape) {\n        return shape.selected;\n    };\n    EToolSelectSelection.prototype.size = function () {\n        return this._shapes.length;\n    };\n    EToolSelectSelection.prototype.isEmpty = function () {\n        return this._shapes.length <= 0;\n    };\n    EToolSelectSelection.prototype.clear = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = false;\n            }\n            this._shapes.length = 0;\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.focus = function () {\n        if (this.isEmpty()) {\n            return false;\n        }\n        // Canvas\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas == null) {\n            return false;\n        }\n        // Canvas parent\n        var cparent = canvas.parent;\n        if (!(cparent instanceof DBase)) {\n            return false;\n        }\n        // Center\n        var cw = canvas.width;\n        var ch = canvas.height;\n        var p = cparent.padding;\n        var pl = p.getLeft();\n        var pt = p.getTop();\n        var pr = p.getRight();\n        var pb = p.getBottom();\n        var sw = Math.max(0, cparent.width - pl - pr);\n        var sh = Math.max(0, cparent.height - pt - pb);\n        var cx = pl + (sw - cw) * 0.5;\n        var cy = pt + (sh - ch) * 0.5;\n        // Offset\n        var modifier = this._modifier;\n        var point = this._alignPoint;\n        point.set(modifier.width * 0.5, modifier.height * 0.5);\n        modifier.toGlobal(point, point, false);\n        cparent.toLocal(point, undefined, point, false);\n        var cposition = canvas.position;\n        var ox = cw * 0.5 - (point.x - cposition.x);\n        var oy = ch * 0.5 - (point.y - cposition.y);\n        // Move\n        diagram.view.moveTo(cx + ox, cy + oy);\n        return true;\n    };\n    EToolSelectSelection.prototype.prepare = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    UtilShapeConnectorTransforms.prepare(shape);\n                }\n                else {\n                    UtilShapeTransforms.prepare(shape);\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareTranslateSnap = function () {\n        var diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForTranslate(this._modifier);\n        }\n    };\n    EToolSelectSelection.prototype.prepareRotateSnap = function () {\n        var diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForRotate(this._modifier);\n        }\n    };\n    EToolSelectSelection.prototype.prepareScaleSnap = function () {\n        var diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForScale(this._modifier, this._scaleAnchor);\n        }\n    };\n    EToolSelectSelection.prototype.prepareTranslate = function () {\n        return this.prepare();\n    };\n    EToolSelectSelection.prototype.prepareRotate = function (global) {\n        if (this.prepare()) {\n            // Origin\n            var originGlobal = this._originGlobal;\n            var originLocal = this._originLocal;\n            var modifier = this._modifier;\n            originLocal.set(modifier.width * 0.5, modifier.height * 0.5);\n            originGlobal.copyFrom(originLocal);\n            modifier.updateTransform();\n            modifier.transform.localTransform.apply(originLocal, originLocal);\n            modifier.transform.worldTransform.apply(originGlobal, originGlobal);\n            // Axis\n            if (global == null) {\n                return true;\n            }\n            else {\n                var rotationAxisGlobal = this._rotationAxisGlobal;\n                var vx = global.x - originGlobal.x;\n                var vy = global.y - originGlobal.y;\n                var v = Math.sqrt(vx * vx + vy * vy);\n                if (0.001 < v) {\n                    var vi = 1 / v;\n                    rotationAxisGlobal.set(vx * vi, vy * vi);\n                    return true;\n                }\n                else {\n                    this.finalize();\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScale = function (anchor) {\n        if (this.prepare()) {\n            if (this.prepareScaleOriginAndAxes(anchor)) {\n                var modifier = this._modifier;\n                var rotation = modifier.rotation;\n                var skew = modifier.skew;\n                var originLocal = this._originLocal;\n                var scaleTransform = this._scaleTransform;\n                scaleTransform.setTransform(0, 0, 0, 0, 1, 1, rotation, skew.x, skew.y).invert();\n                scaleTransform.apply(originLocal, originLocal);\n                scaleTransform.translate(-originLocal.x, -originLocal.y);\n                scaleTransform.copyTo(this._scaleTransformInverse).invert();\n                return true;\n            }\n            else {\n                this.finalize();\n                return false;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScaleOriginAndAxes = function (anchor) {\n        var modifier = this._modifier;\n        modifier.updateTransform();\n        var localTransform = modifier.transform.localTransform;\n        var worldTransform = modifier.transform.worldTransform;\n        var width = modifier.width;\n        var height = modifier.height;\n        var originGlobal = this._originGlobal;\n        var originLocal = this._originLocal;\n        this._scaleAnchor = anchor;\n        switch (anchor) {\n            case ESnapperModifierAnchor.TOP_LEFT:\n                originLocal.set(width, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(0, height, width, 0, originGlobal);\n            case ESnapperModifierAnchor.TOP_CENTER:\n                originLocal.set(width * 0.5, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width * 0.5, 0, originGlobal);\n            case ESnapperModifierAnchor.TOP_RIGHT:\n                originLocal.set(0, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(width, height, 0, 0, originGlobal);\n            case ESnapperModifierAnchor.MIDDLE_LEFT:\n                originLocal.set(width, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(0, height * 0.5, originGlobal);\n            case ESnapperModifierAnchor.NONE:\n                originLocal.set(width * 0.5, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                if (0.001 < Math.abs(width)) {\n                    this._scaleAxis0.x = width;\n                }\n                else {\n                    return false;\n                }\n                if (0.001 < Math.abs(height)) {\n                    this._scaleAxis0.y = height;\n                }\n                else {\n                    return false;\n                }\n                return true;\n            case ESnapperModifierAnchor.MIDDLE_RIGHT:\n                originLocal.set(0, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width, height * 0.5, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_LEFT:\n                originLocal.set(width, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(0, 0, width, height, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_CENTER:\n                originLocal.set(width * 0.5, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width * 0.5, height, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_RIGHT:\n                originLocal.set(0, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(width, 0, 0, height, originGlobal);\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScaleAxis = function (x, y, origin) {\n        var axis = this._scaleAxis0;\n        axis.set(x, y);\n        this._modifier.toGlobal(axis, axis, true);\n        axis.x -= origin.x;\n        axis.y -= origin.y;\n        var v = Math.sqrt(axis.x * axis.x + axis.y * axis.y);\n        if (0.001 < v) {\n            var vi = 1 / v;\n            axis.x *= vi;\n            axis.y *= vi;\n            this._scaleDet = v;\n            this._scaleDetInverse = vi;\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScaleAxes = function (x0, y0, x1, y1, originGlobal) {\n        var modifier = this._modifier;\n        var worldTransform = modifier.transform.worldTransform;\n        // v0\n        var axis0 = this._scaleAxis0;\n        axis0.set(x0, y0);\n        worldTransform.apply(axis0, axis0);\n        axis0.x -= originGlobal.x;\n        axis0.y -= originGlobal.y;\n        // v1\n        var axis1 = this._scaleAxis1;\n        axis1.set(x1, y1);\n        worldTransform.apply(axis1, axis1);\n        axis1.x -= originGlobal.x;\n        axis1.y -= originGlobal.y;\n        var det = axis0.x * axis1.y - axis0.y * axis1.x;\n        if (0.001 < Math.abs(det)) {\n            this._scaleDet = det;\n            this._scaleDetInverse = 1 / det;\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.finalize = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    UtilShapeConnectorTransforms.finalize(shape);\n                }\n                else {\n                    UtilShapeTransforms.finalize(shape);\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.saveForTranslate = function () {\n        DControllers.getCommandController().push(new ECommandShapePropertyPosition(this));\n    };\n    EToolSelectSelection.prototype.saveForRotate = function () {\n        DControllers.getCommandController().push(new ECommandShapePropertyPositionAndRotate(this));\n    };\n    EToolSelectSelection.prototype.saveForScale = function () {\n        DControllers.getCommandController().push(new ECommandShapePropertyAll(this));\n    };\n    EToolSelectSelection.prototype.alignLeft = function () {\n        this.align(initLeft, initWidth, updateMin, finishupIdentity, assingX, applyLeft);\n    };\n    EToolSelectSelection.prototype.alignCenter = function () {\n        this.align(initCenter, initZero, updateSum, finishupAverage, assingX, applyCenter);\n    };\n    EToolSelectSelection.prototype.alignRight = function () {\n        this.align(initRight, initWidth, updateMax, finishupIdentity, assingX, applyRight);\n    };\n    EToolSelectSelection.prototype.alignTop = function () {\n        this.align(initTop, initHeight, updateMin, finishupIdentity, assingY, applyTop);\n    };\n    EToolSelectSelection.prototype.alignMiddle = function () {\n        this.align(initMiddle, initZero, updateSum, finishupAverage, assingY, applyMiddle);\n    };\n    EToolSelectSelection.prototype.alignBottom = function () {\n        this.align(initBottom, initHeight, updateMax, finishupIdentity, assingY, applyBottom);\n    };\n    EToolSelectSelection.prototype.align = function (init, initSpace, update, finishup, assing, apply) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        var shapes = this._shapes;\n        var shapesLength = shapes.length;\n        if (canvas && 1 <= shapesLength) {\n            var parent_1 = shapes[0].parent;\n            if (parent_1) {\n                var point = this._alignPoint;\n                var rectangle = this._alignRectangle;\n                var isFirst = true;\n                var value = 0;\n                var data = [];\n                for (var i = 0; i < shapesLength; ++i) {\n                    var shape = shapes[i];\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        shape.getBounds(false, rectangle);\n                        if (isFirst) {\n                            isFirst = false;\n                            value = init(rectangle);\n                        }\n                        else {\n                            value = update(value, init(rectangle));\n                        }\n                        data.push([initSpace(rectangle), shape]);\n                    }\n                }\n                var dataLength = data.length;\n                if (1 <= dataLength) {\n                    if (dataLength <= 1) {\n                        value = init(canvas.getBounds(false, rectangle));\n                    }\n                    value = finishup(value, dataLength);\n                    point.set(0, 0);\n                    assing(value, point);\n                    parent_1.toLocal(point, undefined, point);\n                    var scale = canvas.scale;\n                    for (var i = 0; i < dataLength; ++i) {\n                        var datum = data[i];\n                        apply(point, datum[0] * 0.5, scale, datum[1]);\n                    }\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.distributeHorizontally = function () {\n        this.distribute(initCenter, initWidth, assingX, applyLeft);\n    };\n    EToolSelectSelection.prototype.distributeVertically = function () {\n        this.distribute(initMiddle, initHeight, assingY, applyTop);\n    };\n    EToolSelectSelection.prototype.distribute = function (init, initSpace, assing, apply) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        var shapes = this._shapes;\n        var shapesLength = shapes.length;\n        if (canvas && 1 <= shapesLength) {\n            var parent_2 = shapes[0].parent;\n            if (parent_2) {\n                var point = this._alignPoint;\n                var rectangle = this._alignRectangle;\n                var spaceTotal = 0;\n                var data = [];\n                for (var i = 0; i < shapesLength; ++i) {\n                    var shape = shapes[i];\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        shape.getBounds(false, rectangle);\n                        var space = initSpace(rectangle);\n                        spaceTotal += space;\n                        data.push([init(rectangle), space, shape]);\n                    }\n                }\n                var dataLength = data.length;\n                if (2 < dataLength) {\n                    data.sort(function (a, b) {\n                        return a[0] - b[0];\n                    });\n                    var first = data[0];\n                    var last = data[dataLength - 1];\n                    var spaceLeft = last[0] - first[0] - (spaceTotal - last[1] * 0.5 - first[1] * 0.5);\n                    var margin = spaceLeft / (dataLength - 1);\n                    point.set(0, 0);\n                    assing(first[0], point);\n                    parent_2.toLocal(point, undefined, point);\n                    var diff = first[1] * 0.5 + margin;\n                    var scale = canvas.scale;\n                    for (var i = 1, imax = dataLength - 1; i < imax; ++i) {\n                        var datum = data[i];\n                        var shape = datum[2];\n                        diff += datum[1] * 0.5;\n                        apply(point, diff, scale, shape);\n                        diff += datum[1] * 0.5 + margin;\n                    }\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n                else if (dataLength === 1) {\n                    point.set(0, 0);\n                    assing(init(canvas.getBounds(false, rectangle)), point);\n                    parent_2.toLocal(point, undefined, point);\n                    var datum = data[0];\n                    apply(point, 0, canvas.scale, datum[2]);\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.replace = function (shapeFactory) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_3 = shapes[0].parent;\n            if (parent_3) {\n                DControllers.getCommandController().push(new ECommandShapeReplace(parent_3, shapeFactory, this));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.group = function () {\n        var shapes = this._shapes;\n        if (2 <= shapes.length) {\n            var parent_4 = shapes[0].parent;\n            if (parent_4) {\n                DControllers.getCommandController().push(new ECommandShapeGroup(parent_4, this));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.hasUngroupable = function (shapes) {\n        for (var i = shapes.length - 1; 0 <= i; --i) {\n            if (this.isUngroupable(shapes[i])) {\n                return true;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.isUngroupable = function (shape) {\n        return (shape instanceof EShapeGroup &&\n            EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n            EShapeCapabilities.contains(shape, EShapeCapability.UNGROUPING));\n    };\n    EToolSelectSelection.prototype.ungroup = function () {\n        var shapes = this._shapes;\n        if (this.hasUngroupable(shapes)) {\n            var parent_5 = shapes[0].parent;\n            if (parent_5) {\n                DControllers.getCommandController().push(new ECommandShapeUngroup(parent_5, this));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setFill = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setFillEnabled = function (enable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillEnable(this, enable));\n        }\n    };\n    EToolSelectSelection.prototype.setFillPercent = function (percent) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillPercent(this, percent));\n        }\n    };\n    EToolSelectSelection.prototype.setFillDirection = function (direction) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillDirection(this, direction));\n        }\n    };\n    EToolSelectSelection.prototype.setStroke = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeWidth = function (width) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeWidth(this, width));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeAlign = function (align) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeAlign(this, align));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeSide = function (side, isOn) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            if (isOn) {\n                DControllers.getCommandController().push(new ECommandShapePropertyStrokeSideOn(this, side));\n            }\n            else {\n                DControllers.getCommandController().push(new ECommandShapePropertyStrokeSideOff(this, side));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeStyle = function (add, remove) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeStyle(this, add, remove));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeEnabled = function (enable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeEnable(this, enable));\n        }\n    };\n    EToolSelectSelection.prototype.setLineStyle = function (add, remove) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineStyle(this, add, remove));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailType = function (type) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailType(this, type));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailSizeX = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailSizeX(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailSizeY = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailSizeY(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailMargin = function (margin) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailMargin(this, margin));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadType = function (type) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadType(this, type));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadSizeX = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadSizeX(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadSizeY = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadSizeY(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadMargin = function (margin) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadMargin(this, margin));\n        }\n    };\n    EToolSelectSelection.prototype.setPointsStyle = function (add, remove) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPointsStyle(this, add, remove));\n        }\n    };\n    EToolSelectSelection.prototype.setText = function (text) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextValue(this, text));\n        }\n    };\n    EToolSelectSelection.prototype.setTextColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setTextFamily = function (family) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextFamily(this, family));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSize = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSize(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSizeDelta = function (delta) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSizeDelta(this, delta));\n        }\n    };\n    EToolSelectSelection.prototype.setTextWeight = function (weight) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextWeight(this, weight));\n        }\n    };\n    EToolSelectSelection.prototype.setTextStyle = function (style) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextStyle(this, style));\n        }\n    };\n    EToolSelectSelection.prototype.setTextAlignHorizontal = function (align) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextAlignHorizontal(this, align));\n        }\n    };\n    EToolSelectSelection.prototype.setTextAlignVertical = function (align) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextAlignVertical(this, align));\n        }\n    };\n    EToolSelectSelection.prototype.setTextPaddingHorizontal = function (padding) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextPaddingHorizontal(this, padding));\n        }\n    };\n    EToolSelectSelection.prototype.setTextPaddingVertical = function (padding) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextPaddingVertical(this, padding));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOffsetHorizontal = function (offset) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOffsetHorizontal(this, offset));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOffsetVertical = function (offset) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOffsetVertical(this, offset));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOutlineColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOutlineWidth = function (width) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineWidth(this, width));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOutlineEnabled = function (enable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineEnable(this, enable));\n        }\n    };\n    EToolSelectSelection.prototype.setTextClipping = function (clipping) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextClipping(this, clipping));\n        }\n    };\n    EToolSelectSelection.prototype.setTextFitting = function (fitting) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextFitting(this, fitting));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSpacingHorizontal = function (spacing) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSpacingHorizontal(this, spacing));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSpacingVertical = function (spacing) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSpacingVertical(this, spacing));\n        }\n    };\n    EToolSelectSelection.prototype.setTextDirection = function (direction) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextDirection(this, direction));\n        }\n    };\n    EToolSelectSelection.prototype.setInteractive = function (interactive) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyInteractive(this, interactive));\n        }\n    };\n    EToolSelectSelection.prototype.setFocusable = function (isFocusable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFocusable(this, isFocusable));\n        }\n    };\n    EToolSelectSelection.prototype.setShortcut = function (shortcut) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyShortcut(this, shortcut));\n        }\n    };\n    EToolSelectSelection.prototype.setTitle = function (title) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTitle(this, title));\n        }\n    };\n    EToolSelectSelection.prototype.setCursor = function (cursor) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCursor(this, cursor));\n        }\n    };\n    EToolSelectSelection.prototype.setRadius = function (radius) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyRadius(this, radius));\n        }\n    };\n    EToolSelectSelection.prototype.setCorner = function (corner, isOn) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            if (isOn) {\n                DControllers.getCommandController().push(new ECommandShapePropertyCornerOn(this, corner));\n            }\n            else {\n                DControllers.getCommandController().push(new ECommandShapePropertyCornerOff(this, corner));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setImage = function (image) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImage(this, image, undefined));\n        }\n    };\n    EToolSelectSelection.prototype.setGradient = function (image, gradient) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImage(this, image, gradient));\n        }\n    };\n    EToolSelectSelection.prototype.fitToImage = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImageFitTo(this));\n        }\n    };\n    EToolSelectSelection.prototype.clearImage = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImageClear(this));\n        }\n    };\n    EToolSelectSelection.prototype.bringToFront = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_6 = shapes[0].parent;\n            if (parent_6) {\n                var children = parent_6.children;\n                // Update indices\n                var offset = children.length;\n                var indices = [];\n                for (var i = offset - 1; 0 <= i; --i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        child.index = offset + i;\n                        indices.push(i);\n                    }\n                    else {\n                        child.index = i;\n                    }\n                }\n                // Sort\n                children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n                //\n                var isChanged = false;\n                for (var i = 0, imax = indices.length; i < imax; ++i) {\n                    if (offset - 1 - i !== indices[i]) {\n                        isChanged = true;\n                    }\n                }\n                //\n                if (isChanged) {\n                    parent_6.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeBringToFront(indices, parent_6, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return true;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.bringForward = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_7 = shapes[0].parent;\n            if (parent_7) {\n                var isChanged = false;\n                var children = parent_7.children;\n                var indices = [];\n                var previous = null;\n                for (var i = children.length - 1; 0 <= i; --i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        if (previous) {\n                            children[i] = children[i + 1];\n                            children[i + 1] = child;\n                            indices.push(i);\n                            isChanged = true;\n                        }\n                    }\n                    else {\n                        previous = child;\n                    }\n                }\n                if (isChanged) {\n                    parent_7.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeBringForward(indices, parent_7, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return isChanged;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.sendBackward = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_8 = shapes[0].parent;\n            if (parent_8) {\n                var isChanged = false;\n                var children = parent_8.children;\n                var indices = [];\n                var previous = null;\n                for (var i = 0, imax = children.length; i < imax; ++i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        if (previous) {\n                            children[i] = children[i - 1];\n                            children[i - 1] = child;\n                            indices.push(i);\n                            isChanged = true;\n                        }\n                    }\n                    else {\n                        previous = child;\n                    }\n                }\n                if (isChanged) {\n                    parent_8.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeSendBackward(indices, parent_8, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return isChanged;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.sendToBack = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_9 = shapes[0].parent;\n            if (parent_9) {\n                var children = parent_9.children;\n                // Update indices\n                var indices = [];\n                var offset = children.length;\n                for (var i = 0; i < offset; ++i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        child.index = i - offset;\n                        indices.push(i);\n                    }\n                    else {\n                        child.index = i;\n                    }\n                }\n                // Sort\n                children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n                //\n                var isChanged = false;\n                for (var i = 0; i < indices.length; ++i) {\n                    if (i !== indices[i]) {\n                        isChanged = true;\n                    }\n                }\n                //\n                if (isChanged) {\n                    parent_9.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeSendToBack(indices, parent_9, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return true;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.serialize = function () {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas == null) {\n            return null;\n        }\n        // Update UUID\n        var manager = new EShapeResourceManagerSerialization();\n        var shapes = this._shapes;\n        var shapesLength = shapes.length;\n        if (0 < shapesLength) {\n            var root = shapes[0].root;\n            if (root != null) {\n                var layer = root.parent;\n                if (layer instanceof DDiagramLayer) {\n                    layer.addUuid(manager);\n                    layer.updateUuid(manager);\n                }\n            }\n        }\n        // Shape set\n        var shapeSet = new Set();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapeSet.add(shapes[i]);\n        }\n        // Serialize selected shapes\n        var items = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var item = shape.serialize(manager);\n            item[16] = 0;\n            if (shape instanceof EShapeConnectorLine) {\n                var item29 = item[29];\n                if (item29 & EShapeCapability.LINE_TAIL) {\n                    if (!shapeSet.has(shape.edge.tail.acceptor.shape)) {\n                        item29 &= ~EShapeCapability.LINE_TAIL;\n                    }\n                }\n                if (item29 & EShapeCapability.LINE_HEAD) {\n                    if (!shapeSet.has(shape.edge.head.acceptor.shape)) {\n                        item29 &= ~EShapeCapability.LINE_HEAD;\n                    }\n                }\n                item[29] = item29;\n            }\n            items.push(item);\n        }\n        // Done\n        var serialized = {\n            version: DDiagramSerializedVersion,\n            name: canvas.name,\n            label: canvas.label,\n            width: canvas.width,\n            height: canvas.height,\n            summary: canvas.summary,\n            description: canvas.description,\n            resources: manager.resources,\n            data: manager.data,\n            pieces: manager.pieces,\n            items: items,\n            layers: [\n                [\n                    diagram instanceof DDiagramEditor\n                        ? diagram.theme.getBaseLayerLabel()\n                        : \"Base Layer\"\n                ]\n            ]\n        };\n        return JSON.stringify(serialized);\n    };\n    EToolSelectSelection.prototype.deserialize = function (data) {\n        var _this = this;\n        var diagram = this._diagram;\n        var layer = diagram.layer;\n        if (layer != null) {\n            var parsed_1 = DDiagrams.parse(data);\n            if (parsed_1 != null) {\n                DDiagrams.toPieceData(diagram.controller, parsed_1.pieces, EShapeResourceManagerDeserializationMode.EDITOR).then(function (pieceData) {\n                    _this.deserialize_(layer, parsed_1, pieceData);\n                });\n            }\n        }\n    };\n    EToolSelectSelection.prototype.deserialize_ = function (layer, parsed, pieceData) {\n        var _this = this;\n        var manager = new EShapeResourceManagerDeserialization(parsed, parsed.pieces, pieceData, EShapeResourceManagerDeserializationMode.EDITOR, 0);\n        var shapePromise = deserializeAll(parsed.items, manager);\n        if (shapePromise) {\n            shapePromise.then(function (shapes) {\n                var shift = _this.calcShift(shapes, layer);\n                var shapesLength = shapes.length;\n                var layerChildren = layer.children;\n                for (var i = 0; i < shapesLength; ++i) {\n                    var shape = shapes[i];\n                    shape.parent = layer;\n                    shape.uploaded = undefined;\n                    layerChildren.push(shape);\n                }\n                layer.onChildTransformChange();\n                layer.toDirty();\n                for (var i = 0; i < shapesLength; ++i) {\n                    shapes[i].onAttach();\n                }\n                _this.shift(shapes, shift);\n                DControllers.getCommandController().push(new ECommandShapeCreate(shapes, layer, _this, true));\n            });\n        }\n    };\n    EToolSelectSelection.prototype.calcShift = function (shapes, parent) {\n        if (shapes.length <= 0) {\n            return null;\n        }\n        var work1 = this._shiftPoint1;\n        var work2 = this._shiftPoint2;\n        var first = shapes[0];\n        first.updateTransform();\n        var firstTransform = first.transform;\n        work1.copyFrom(firstTransform.pivot);\n        firstTransform.worldTransform.apply(work1, work1);\n        parent.transform.worldTransform.apply(work1, work1);\n        var gx = work1.x;\n        var gy = work1.y;\n        var delta = 0;\n        while (true) {\n            work1.set(gx + delta, gy + delta);\n            var found = parent.hitTestBBox(work1, function (target) {\n                if (target.type === first.type) {\n                    target.updateTransform();\n                    var targetTransform = target.transform;\n                    work2.copyFrom(targetTransform.pivot);\n                    targetTransform.worldTransform.apply(work2, work2);\n                    var dx = work2.x - (gx + delta);\n                    var dy = work2.y - (gy + delta);\n                    return Math.abs(dx) <= 0.1 && Math.abs(dy) <= 0.1;\n                }\n                return false;\n            });\n            if (found == null) {\n                work1.set(gx + delta, gy + delta);\n                parent.toLocal(work1, undefined, work1);\n                work2.set(work1.x - firstTransform.position.x, work1.y - firstTransform.position.y);\n                return work2;\n            }\n            delta += 10;\n        }\n    };\n    EToolSelectSelection.prototype.shift = function (shapes, amount) {\n        if (shapes.length <= 0 || amount == null) {\n            return;\n        }\n        var ax = amount.x;\n        var ay = amount.y;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                var position = shape.transform.position;\n                position.set(position.x + ax, position.y + ay);\n            }\n            else if (shape instanceof EShapeConnectorLine) {\n                var edge = shape.edge;\n                var head = edge.head;\n                var tail = edge.tail;\n                if (head.acceptor.shape == null && tail.acceptor.shape == null) {\n                    edge.lock();\n                    var headLocal = head.local;\n                    headLocal.set(headLocal.x + ax, headLocal.y + ay);\n                    var tailLocal = tail.local;\n                    tailLocal.set(tailLocal.x + ax, tailLocal.y + ay);\n                    edge.unlock();\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setId = function (id) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyId(this, id));\n        }\n    };\n    EToolSelectSelection.prototype.addActionValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueAdd(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.replaceActionValue = function (target, value, list) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueReplace(target, value, this, list));\n        }\n    };\n    EToolSelectSelection.prototype.removeActionValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueRemove(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.bringActionValueForward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueBringForward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.sendActionValueBackward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueSendBackward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.addDataValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueAdd(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.replaceDataValue = function (oldValue, newValue, list) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueReplace(oldValue, newValue, this, list));\n        }\n    };\n    EToolSelectSelection.prototype.removeDataValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueRemove(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.bringDataValueForward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueBringForward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.sendDataValueBackward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueSendBackward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.addDataMappingValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueAdd(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.replaceDataMappingValue = function (oldValue, newValue, list) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueReplace(oldValue, newValue, this, list));\n        }\n    };\n    EToolSelectSelection.prototype.removeDataMappingValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueRemove(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.bringDataMappingValueForward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueBringForward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.sendDataMappingValueBackward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueSendBackward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionX = function (x) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionX(this, x));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionY = function (y) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionY(this, y));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionLeft = function (left) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionLeft(this, left));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionTop = function (top) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionTop(this, top));\n        }\n    };\n    EToolSelectSelection.prototype.setSizeX = function (x) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySizeX(this, x));\n        }\n    };\n    EToolSelectSelection.prototype.setSizeY = function (y) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySizeY(this, y));\n        }\n    };\n    EToolSelectSelection.prototype.setRotation = function (rotation) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyRotation(this, rotation));\n        }\n    };\n    EToolSelectSelection.prototype.setSkew = function (skew) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySkew(this, skew));\n        }\n    };\n    EToolSelectSelection.prototype.toInternalVector = function (vector, result) {\n        // Convert to the internal coordinate vector\n        // A = modifier.parent.worldTransform\n        // (ndx, ndy)^T = A^-1 (0, 0)^T - A^-1 (dx, dy)^T\n        var modifier = this._modifier;\n        modifier.updateTransform();\n        var worldTransform = modifier.parent.worldTransform;\n        var a = worldTransform.a;\n        var b = worldTransform.b;\n        var c = worldTransform.c;\n        var d = worldTransform.d;\n        var detInverse = 1 / (a * d - c * b);\n        result.set((d * vector.x - c * vector.y) * detInverse, (a * vector.y - b * vector.x) * detInverse);\n        return result;\n    };\n    EToolSelectSelection.prototype.translate = function (dx, dy, snap) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var work = this._translateDelta;\n            work.set(dx, dy);\n            this.toInternalVector(work, work);\n            if (snap) {\n                var diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    diagram.snapper.toTranslationSnapped(work, work);\n                }\n            }\n            var transform = this._transform.set(1, 0, 0, 1, work.x, work.y);\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    var edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    var capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    };\n    EToolSelectSelection.prototype.rotateTo = function (global, snap) {\n        var rotationAxisGlobal = this._rotationAxisGlobal;\n        var originGlobal = this._originGlobal;\n        var vx = global.x - originGlobal.x;\n        var vy = global.y - originGlobal.y;\n        var v = Math.sqrt(vx * vx + vy * vy);\n        if (0.001 < v) {\n            var vi = 1 / v;\n            var nx = vx * vi;\n            var ny = vy * vi;\n            var dot = Math.max(-1, Math.min(1, rotationAxisGlobal.x * nx + rotationAxisGlobal.y * ny));\n            var cross = rotationAxisGlobal.x * ny - rotationAxisGlobal.y * nx;\n            var rotation = 0 <= cross ? +Math.acos(dot) : -Math.acos(dot);\n            if (snap) {\n                var diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    var baseRotation = this._modifier.rotation;\n                    rotation = diagram.snapper.toRotationSnapped(baseRotation, rotation);\n                }\n            }\n            this.rotate(rotation);\n        }\n    };\n    EToolSelectSelection.prototype.rotate = function (rotation) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var originLocal = this._originLocal;\n            var transform = this._transform\n                .identity()\n                .translate(-originLocal.x, -originLocal.y)\n                .rotate(rotation)\n                .translate(+originLocal.x, +originLocal.y);\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    var edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    var capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                        capability |= EShapeCapability.ROTATION;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    };\n    EToolSelectSelection.prototype.getScale = function (dx, dy, anchor, keepRatio, result) {\n        switch (anchor) {\n            case ESnapperModifierAnchor.TOP_LEFT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.TOP_CENTER:\n                this.getScaleY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.TOP_RIGHT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.MIDDLE_LEFT:\n                this.getScaleX(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.NONE:\n                var axis = this._scaleAxis0;\n                var width = axis.x;\n                var height = axis.y;\n                var scaleX = (width + dx) / width;\n                var scaleY = (height + dy) / height;\n                if (keepRatio) {\n                    result.x = result.y = Math.max(scaleX, scaleY);\n                }\n                else {\n                    result.set(scaleX, scaleY);\n                }\n                break;\n            case ESnapperModifierAnchor.MIDDLE_RIGHT:\n                this.getScaleX(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_LEFT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_CENTER:\n                this.getScaleY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_RIGHT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n        }\n    };\n    EToolSelectSelection.prototype.getScaleX = function (dx, dy, keepRatio, result) {\n        var scale = this.calcScale(dx, dy);\n        if (keepRatio) {\n            result.set(scale, scale);\n        }\n        else {\n            result.set(scale, 1);\n        }\n    };\n    EToolSelectSelection.prototype.getScaleY = function (dx, dy, keepRatio, result) {\n        var scale = this.calcScale(dx, dy);\n        if (keepRatio) {\n            result.set(scale, scale);\n        }\n        else {\n            result.set(1, scale);\n        }\n    };\n    EToolSelectSelection.prototype.calcScale = function (dx, dy) {\n        var axis = this._scaleAxis0;\n        var dot = axis.x * dx + axis.y * dy;\n        return (this._scaleDet + dot) * this._scaleDetInverse;\n    };\n    EToolSelectSelection.prototype.getScaleXY = function (dx, dy, keepRatio, result) {\n        // v0\n        var axis0 = this._scaleAxis0;\n        var vx0 = axis0.x;\n        var vy0 = axis0.y;\n        // v1\n        var axis1 = this._scaleAxis1;\n        var vx1 = axis1.x;\n        var vy1 = axis1.y;\n        // v2\n        var vx2 = vx0 + vx1 + dx;\n        var vy2 = vy0 + vy1 + dy;\n        // A = | vx0, vx1 |\n        //     | vy0, vy1 |\n        // D = (dx, dy)^T\n        // V0 = (vx0, vy0)^T\n        // V1 = (vx1, vy1)^T\n        // V2 = V0 + V1 + D;\n        // A x = V\n        //\n        // det A = vx0 * vy1 - vy0 * vx1\n        // (det A) A^-1 = |  vy1 -vx1 |\n        //                | -vy0  vx0 |\n        var detInverse = this._scaleDetInverse;\n        var scaleX = (+vy1 * vx2 - vx1 * vy2) * detInverse;\n        var scaleY = (-vy0 * vx2 + vx0 * vy2) * detInverse;\n        this.setScale(scaleX, scaleY, keepRatio, result);\n    };\n    EToolSelectSelection.prototype.setScale = function (scaleX, scaleY, keepRatio, result) {\n        if (keepRatio) {\n            if (0 <= scaleX) {\n                if (0 <= scaleY) {\n                    var scale = Math.max(scaleX, scaleY);\n                    result.set(scale, scale);\n                }\n                else {\n                    var scale = Math.max(scaleX, -scaleY);\n                    result.set(scale, -scale);\n                }\n            }\n            else {\n                if (0 <= scaleY) {\n                    var scale = Math.max(-scaleX, scaleY);\n                    result.set(-scale, scale);\n                }\n                else {\n                    var scale = Math.min(scaleX, scaleY);\n                    result.set(scale, scale);\n                }\n            }\n        }\n        else {\n            result.set(scaleX, scaleY);\n        }\n        return result;\n    };\n    EToolSelectSelection.prototype.makeScaleTransform = function (scale, result) {\n        return this._scaleTransform\n            .copyTo(result)\n            .scale(scale.x, scale.y)\n            .prepend(this._scaleTransformInverse);\n    };\n    EToolSelectSelection.prototype.scale = function (dx, dy, keepRatio, snap) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var scale = this._scale;\n            var scaleAnchor = this._scaleAnchor;\n            this.getScale(dx, dy, scaleAnchor, keepRatio, scale);\n            var transform = this._transform;\n            this.makeScaleTransform(scale, transform);\n            if (snap) {\n                var diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    if (diagram.snapper.toScaleSnapped(transform, scaleAnchor, keepRatio, scale)) {\n                        this.makeScaleTransform(scale, transform);\n                    }\n                }\n            }\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    var edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    var capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n                        capability |= EShapeCapability.WIDTH;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n                        capability |= EShapeCapability.HEIGHT;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                        capability |= EShapeCapability.ROTATION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n                        capability |= EShapeCapability.SKEW;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    };\n    EToolSelectSelection.prototype.delete = function (save) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_10 = shapes[0].parent;\n            if (parent_10) {\n                if (save !== false) {\n                    var deleteds = UtilShapeDeleter.delete(parent_10, shapes, true);\n                    if (deleteds) {\n                        var indices = UtilShapeSearch.toIndices(deleteds);\n                        DControllers.getCommandController().push(new ECommandShapeDelete(deleteds, indices, parent_10, this, true));\n                    }\n                }\n                else {\n                    UtilShapeDeleter.delete(parent_10, shapes, false);\n                }\n                this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n            }\n        }\n    };\n    EToolSelectSelection.prototype.createChildren = function (creator) {\n        this.lock();\n        var commands = [];\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var created = creator(shape);\n            if (created) {\n                commands.push(new ECommandShapeCreate(created, shape, this, false));\n            }\n        }\n        if (0 < commands.length) {\n            DControllers.getCommandController().push(new ECommandComposition(commands, this));\n            this.update(EToolSelectSelectionUpdatedPart.TREE);\n        }\n        this.unlock();\n    };\n    EToolSelectSelection.prototype.deleteChildren = function (deletor) {\n        this.lock();\n        var commands = [];\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var targets = deletor(shape);\n            if (targets) {\n                for (var j = 0, jmax = targets.length; j < jmax; ++j) {\n                    targets[j].selected = true;\n                }\n                var deleteds = UtilShapeDeleter.delete(shape, undefined, true);\n                if (deleteds) {\n                    var indices = UtilShapeSearch.toIndices(deleteds);\n                    commands.push(new ECommandShapeDelete(deleteds, indices, shape, this, false));\n                }\n            }\n        }\n        if (0 < commands.length) {\n            DControllers.getCommandController().push(new ECommandComposition(commands, this));\n            this.update(EToolSelectSelectionUpdatedPart.TREE);\n        }\n        this.unlock();\n    };\n    EToolSelectSelection.prototype.lockCapability = function (target) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCapabilityLock(this, target));\n        }\n    };\n    EToolSelectSelection.prototype.unlockCapability = function (target) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCapabilityUnlock(this, target));\n        }\n    };\n    EToolSelectSelection.prototype.store = function () {\n        return this._shapes.slice(0);\n    };\n    EToolSelectSelection.prototype.restore = function (stored) {\n        var shapes = this._shapes;\n        // Unselect\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].selected = false;\n        }\n        shapes.length = 0;\n        // Select\n        for (var i = 0, imax = stored.length; i < imax; ++i) {\n            var newShape = stored[i];\n            newShape.selected = true;\n            shapes.push(newShape);\n        }\n        // Done\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n    };\n    Object.defineProperty(EToolSelectSelection.prototype, \"modifier\", {\n        get: function () {\n            return this._modifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return EToolSelectSelection;\n}(utils.EventEmitter));\nexport { EToolSelectSelection };\n//# sourceMappingURL=e-tool-select-selection.js.map","import { Rectangle } from \"pixi.js\";\nvar UtilShapeAreaSelect = /** @class */ (function () {\n    function UtilShapeAreaSelect() {\n    }\n    UtilShapeAreaSelect.isShapeIn = function (shape, rect) {\n        var _a;\n        var bound = shape.getBounds(false, ((_a = this._work) !== null && _a !== void 0 ? _a : (this._work = new Rectangle())));\n        var x = bound.x;\n        var y = bound.y;\n        var w = bound.width;\n        var h = bound.height;\n        return (rect.contains(x, y) &&\n            rect.contains(x + w, y) &&\n            rect.contains(x, y + h) &&\n            rect.contains(x + w, y + h));\n    };\n    UtilShapeAreaSelect.findShapes = function (container, rect, result) {\n        var children = container.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (this.isShapeIn(child, rect)) {\n                result.push(child);\n            }\n        }\n    };\n    return UtilShapeAreaSelect;\n}());\nexport { UtilShapeAreaSelect };\n//# sourceMappingURL=util-shape-area-select.js.map","import { Point } from \"pixi.js\";\nvar UtilHitTest = /** @class */ (function () {\n    function UtilHitTest() {\n    }\n    UtilHitTest.execute = function (global, target, interactionManager) {\n        var _a, _b;\n        var offsets = ((_a = UtilHitTest.OFFSETS) !== null && _a !== void 0 ? _a : (UtilHitTest.OFFSETS = this.newOffsets()));\n        var work = ((_b = UtilHitTest.WORK) !== null && _b !== void 0 ? _b : (UtilHitTest.WORK = new Point()));\n        var x = global.x;\n        var y = global.y;\n        if (interactionManager) {\n            for (var i = 0, imax = offsets.length; i < imax; i += 2) {\n                work.set(x + offsets[i], y + offsets[i + 1]);\n                var result = interactionManager.hitTest(work, target);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        else {\n            for (var i = 0, imax = offsets.length; i < imax; i += 2) {\n                work.set(x + offsets[i], y + offsets[i + 1]);\n                var result = target.hitTest(work);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilHitTest.newOffsets = function () {\n        return [\n            +0, +0, -1, -1, +1, -1, +1, +1, -1, +1, +0, -2, +2, +0, +0, -2, -2, +0, -2, -2, +2, -2,\n            +2, +2, -2, +2, +0, -4, +4, +0, +0, -4, -4, +0\n        ];\n    };\n    return UtilHitTest;\n}());\nexport { UtilHitTest };\n//# sourceMappingURL=util-hit-test.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, EShapeBase, EShapeCapabilities, EShapeCapability, ESnapperModifierAnchor, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point, Rectangle } from \"pixi.js\";\nimport { UtilShapeAreaSelect } from \"../util/util-shape-area-select\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { EToolImpl } from \"./e-tool-impl\";\nimport { EToolSelectArea } from \"./e-tool-select-area\";\nimport { EToolSelectSelection } from \"./e-tool-select-selection\";\nimport { UtilHitTest } from \"../util/util-hit-test\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nvar toSelectionOptions = function (options) {\n    var selection = options.selection;\n    return {\n        diagram: options.diagram,\n        modifier: selection && selection.modifier\n    };\n};\nvar EToolSelect = /** @class */ (function (_super) {\n    __extends(EToolSelect, _super);\n    function EToolSelect(options) {\n        var _this = _super.call(this) || this;\n        _this._selection = new EToolSelectSelection(toSelectionOptions(options));\n        _this._area = new EToolSelectArea();\n        _this._diagram = options.diagram;\n        _this._applicationLayer = null;\n        _this._onDownPoint = new Point();\n        _this._onMovePoint = new Point();\n        _this._onUpPoint = new Point();\n        _this._areaRect = new Rectangle();\n        _this._mode = 0 /* EToolSelectMode.NONE */;\n        _this._isFirstMove = false;\n        _this._childSelectTime = -1;\n        _this._childSelectChild = null;\n        var allow = options.allow;\n        if (allow) {\n            _this._isTransformationAllowed = allow.transformation !== false;\n            _this._isDeletionAllowed = allow.deletion !== false;\n        }\n        else {\n            _this._isTransformationAllowed = true;\n            _this._isDeletionAllowed = true;\n        }\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        _this._onKeydownBound = function (e) {\n            _this.onKeydown(e);\n        };\n        _this._onKeyupBound = function (e) {\n            _this.onKeyup(e);\n        };\n        _this._onDblClickBound = function (e) {\n            _this.onDblClick(e);\n        };\n        return _this;\n    }\n    Object.defineProperty(EToolSelect.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolSelect.prototype.onActivate = function () {\n        var diagram = this._diagram;\n        diagram.on(UtilPointerEvent.down, this._onDownBound);\n        diagram.on(\"dblclick\", this._onDblClickBound);\n        diagram.on(\"keydown\", this._onKeydownBound);\n        diagram.on(\"keyup\", this._onKeyupBound);\n    };\n    EToolSelect.prototype.onDeactivate = function () {\n        var diagram = this._diagram;\n        diagram.off(UtilPointerEvent.down, this._onDownBound);\n        diagram.off(\"dblclick\", this._onDblClickBound);\n        diagram.off(\"keydown\", this._onKeydownBound);\n        diagram.off(\"keyup\", this._onKeyupBound);\n    };\n    EToolSelect.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this._diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        if (diagramCanvas && diagramLayer) {\n            var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n            if (this._mode === 1 /* EToolSelectMode.SELECT */) {\n                this._mode = 0 /* EToolSelectMode.NONE */;\n                this.onSelectEnd(diagramCanvas, diagramLayer, isAddMode);\n                return;\n            }\n            var global_1 = e.data.global;\n            var onDownPoint = this._onDownPoint;\n            onDownPoint.copyFrom(global_1);\n            var selection = this._selection;\n            var modifier = selection.modifier;\n            var hitObject = this.hitTest(global_1, modifier, diagramLayer);\n            var commandController = DControllers.getCommandController();\n            if (hitObject instanceof EShapeBase) {\n                if (isAddMode) {\n                    var before = selection.store();\n                    selection.toggle(hitObject);\n                    var after = selection.store();\n                    commandController.push(new ECommandShapeSelect(before, after, selection));\n                }\n                else if (!selection.contains(hitObject)) {\n                    var first = selection.first();\n                    if (first == null) {\n                        var before = selection.store();\n                        if (selection.set(hitObject.root)) {\n                            var after = selection.store();\n                            commandController.push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    else {\n                        var selected = UtilShapeSearch.toSelected(hitObject);\n                        if (selected != null) {\n                            if (EShapeCapabilities.contains(selected, EShapeCapability.CHILDREN)) {\n                                this._childSelectTime = Date.now();\n                                this._childSelectChild = UtilShapeSearch.toOfParent(hitObject, selected);\n                            }\n                        }\n                        else {\n                            var sharedParent = UtilShapeSearch.toSharedParent(first, hitObject);\n                            var before = selection.store();\n                            if (selection.set(UtilShapeSearch.toOfParent(hitObject, sharedParent))) {\n                                var after = selection.store();\n                                commandController.push(new ECommandShapeSelect(before, after, selection));\n                            }\n                        }\n                    }\n                }\n                if (this._isTransformationAllowed && selection.prepareTranslate()) {\n                    selection.prepareTranslateSnap();\n                    this._mode = 2 /* EToolSelectMode.TRANSLATE */;\n                    this._isFirstMove = true;\n                }\n            }\n            else if (hitObject === modifier) {\n                switch (modifier.getLastHitAnchor()) {\n                    case ESnapperModifierAnchor.ROTATION:\n                        if (selection.prepareRotate(global_1)) {\n                            selection.prepareRotateSnap();\n                            this._mode = 4 /* EToolSelectMode.ROTATE */;\n                            this._isFirstMove = true;\n                        }\n                        break;\n                    default:\n                        if (selection.prepareScale(modifier.getLastHitAnchor())) {\n                            selection.prepareScaleSnap();\n                            this._mode = 3 /* EToolSelectMode.SCALE */;\n                            this._isFirstMove = true;\n                        }\n                }\n            }\n            else {\n                // Select area\n                var area = this._area;\n                diagramCanvas.toLocal(global_1, undefined, onDownPoint);\n                area.x = onDownPoint.x;\n                area.y = onDownPoint.y;\n                area.size.set(0, 0);\n                area.update();\n                diagramCanvas.addChild(area);\n                DApplications.update(diagram);\n                // Select mode\n                this._mode = 1 /* EToolSelectMode.SELECT */;\n            }\n            if (this._mode !== 0 /* EToolSelectMode.NONE */) {\n                var oldApplicationLayer = this._applicationLayer;\n                if (oldApplicationLayer) {\n                    this._applicationLayer = null;\n                    var oldInteractionManager = oldApplicationLayer.renderer.plugins.interaction;\n                    oldInteractionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                    var onUpBound = this._onUpBound;\n                    oldInteractionManager.off(UtilPointerEvent.up, onUpBound);\n                    oldInteractionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                    oldInteractionManager.off(UtilPointerEvent.cancel, onUpBound);\n                }\n                var newApplicationLayer = DApplications.getLayer(diagram);\n                if (newApplicationLayer) {\n                    this._applicationLayer = newApplicationLayer;\n                    var newInteractionManager = newApplicationLayer.renderer.plugins.interaction;\n                    newInteractionManager.on(UtilPointerEvent.move, this._onMoveBound);\n                    var onUpBound = this._onUpBound;\n                    newInteractionManager.on(UtilPointerEvent.up, onUpBound);\n                    newInteractionManager.on(UtilPointerEvent.upoutside, onUpBound);\n                    newInteractionManager.on(UtilPointerEvent.cancel, onUpBound);\n                }\n            }\n        }\n    };\n    EToolSelect.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this._diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._mode;\n        var applicationLayer = this._applicationLayer;\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */ && applicationLayer) {\n            var global_2 = e.data.global;\n            applicationLayer.lock();\n            var onDownPoint = this._onDownPoint;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var area = this._area;\n                var onMovePoint = diagramCanvas.toLocal(global_2, undefined, this._onMovePoint);\n                area.x = Math.min(onDownPoint.x, onMovePoint.x);\n                area.y = Math.min(onDownPoint.y, onMovePoint.y);\n                area.size.set(Math.max(onDownPoint.x, onMovePoint.x) - area.x, Math.max(onDownPoint.y, onMovePoint.y) - area.y);\n                area.update();\n            }\n            else {\n                var dx = global_2.x - onDownPoint.x;\n                var dy = global_2.y - onDownPoint.y;\n                if (1 <= Math.abs(dx) || 1 <= Math.abs(dy)) {\n                    var isFirstMove = this._isFirstMove;\n                    this._isFirstMove = false;\n                    this._childSelectChild = null;\n                    var selection = this._selection;\n                    selection.modifier.disallow();\n                    switch (mode) {\n                        case 2 /* EToolSelectMode.TRANSLATE */:\n                            if (isFirstMove) {\n                                selection.saveForTranslate();\n                            }\n                            selection.translate(dx, dy, true);\n                            break;\n                        case 4 /* EToolSelectMode.ROTATE */:\n                            if (isFirstMove) {\n                                selection.saveForRotate();\n                            }\n                            selection.rotateTo(global_2, true);\n                            break;\n                        case 3 /* EToolSelectMode.SCALE */:\n                            if (isFirstMove) {\n                                selection.saveForScale();\n                            }\n                            var keepRatio = originalEvent.shiftKey;\n                            selection.scale(dx, dy, keepRatio, true);\n                            break;\n                    }\n                }\n            }\n            applicationLayer.unlock();\n            applicationLayer.update();\n        }\n    };\n    EToolSelect.prototype.hitTest = function (global, modifier, diagramLayer) {\n        // Modifier\n        if (this._isTransformationAllowed && modifier.visible) {\n            var applicationLayer = DApplications.getLayer(diagramLayer);\n            if (applicationLayer) {\n                var interactionManager = applicationLayer.renderer.plugins.interaction;\n                var modifierHit = UtilHitTest.execute(global, modifier, interactionManager);\n                if (modifierHit != null) {\n                    return modifierHit;\n                }\n            }\n        }\n        // Layer\n        if (diagramLayer.visible) {\n            return UtilHitTest.execute(global, diagramLayer);\n        }\n        // Found nothing\n        return null;\n    };\n    EToolSelect.prototype.onSelectEnd = function (canvas, diagramLayer, isAddMode) {\n        var area = this._area;\n        var selection = this._selection;\n        var commandController = DControllers.getCommandController();\n        if (0 < area.size.x && 0 < area.size.y) {\n            var areaRect = area.getBounds(false, this._areaRect);\n            var foundShapes = [];\n            UtilShapeAreaSelect.findShapes(diagramLayer, areaRect, foundShapes);\n            if (isAddMode) {\n                if (0 < foundShapes.length) {\n                    var before = selection.store();\n                    if (selection.addAll(foundShapes)) {\n                        var after = selection.store();\n                        commandController.push(new ECommandShapeSelect(before, after, selection));\n                    }\n                }\n            }\n            else {\n                if (0 < foundShapes.length || !selection.isEmpty()) {\n                    var before = selection.store();\n                    if (selection.clearAndAddAll(foundShapes)) {\n                        var after = selection.store();\n                        commandController.push(new ECommandShapeSelect(before, after, selection));\n                    }\n                }\n            }\n        }\n        else if (!isAddMode) {\n            if (!selection.isEmpty()) {\n                var before = selection.store();\n                if (selection.clear()) {\n                    var after = selection.store();\n                    commandController.push(new ECommandShapeSelect(before, after, selection));\n                }\n            }\n        }\n        canvas.removeChild(area);\n        DApplications.update(diagramLayer);\n    };\n    EToolSelect.prototype.onUp = function (e) {\n        var diagram = this._diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._mode;\n        var applicationLayer = this._applicationLayer;\n        if (applicationLayer) {\n            this._applicationLayer = null;\n            var interactionManager = applicationLayer.renderer.plugins.interaction;\n            interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n        }\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            this._mode = 0 /* EToolSelectMode.NONE */;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var originalEvent = e.data.originalEvent;\n                var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n                this.onSelectEnd(diagramCanvas, diagramLayer, isAddMode);\n            }\n            else {\n                var selection = this._selection;\n                // Finalize\n                selection.finalize();\n                // Select the child\n                var childSelectChild = this._childSelectChild;\n                if (childSelectChild != null) {\n                    this._childSelectChild = null;\n                    var elapsedTime = Date.now() - this._childSelectTime;\n                    if (elapsedTime < 333) {\n                        var before = selection.store();\n                        if (selection.set(childSelectChild)) {\n                            var after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                }\n                //\n                selection.modifier.allow();\n                selection.updateModifier();\n                if (applicationLayer) {\n                    applicationLayer.update();\n                }\n            }\n        }\n    };\n    EToolSelect.prototype.getRotateAmount = function (e) {\n        return (Math.PI * (e.ctrlKey ? 1 : 15)) / 180;\n    };\n    EToolSelect.prototype.getScaleAmount = function (e) {\n        return e.ctrlKey ? 1 : 10;\n    };\n    EToolSelect.prototype.getTranslateAmount = function (e) {\n        return e.ctrlKey ? 1 : 10;\n    };\n    EToolSelect.prototype.onKeydown = function (e) {\n        var selection = this._selection;\n        if (!selection.isEmpty()) {\n            if (this._isTransformationAllowed) {\n                if (UtilKeyboardEvent.isArrowUpKey(e)) {\n                    if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(0, this.getScaleAmount(e), false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(0, -this.getTranslateAmount(e), false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowRightKey(e)) {\n                    if (e.altKey) {\n                        if (selection.prepareRotate()) {\n                            selection.saveForRotate();\n                            selection.rotate(this.getRotateAmount(e));\n                            selection.finalize();\n                        }\n                    }\n                    else if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(this.getScaleAmount(e), 0, false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(this.getTranslateAmount(e), 0, false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowDownKey(e)) {\n                    if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(0, -this.getScaleAmount(e), false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(0, this.getTranslateAmount(e), false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowLeftKey(e)) {\n                    if (e.altKey) {\n                        if (selection.prepareRotate()) {\n                            selection.saveForRotate();\n                            selection.rotate(-this.getRotateAmount(e));\n                            selection.finalize();\n                        }\n                    }\n                    else if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(-this.getScaleAmount(e), 0, false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(-this.getTranslateAmount(e), 0, false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n            }\n            if (this._isDeletionAllowed) {\n                if (UtilKeyboardEvent.isDeleteKey(e)) {\n                    selection.delete();\n                    e.preventDefault();\n                }\n            }\n        }\n        if (UtilKeyboardEvent.isSelectAllKey(e)) {\n            var first = selection.first();\n            var parent_1 = first == null ? this._diagram.layer : first.parent;\n            if (parent_1 != null) {\n                var children = parent_1.children;\n                if (0 < children.length) {\n                    var before = selection.store();\n                    if (e.altKey) {\n                        var types = new Set();\n                        for (var i = 0, imax = before.length; i < imax; ++i) {\n                            types.add(before[i].type);\n                        }\n                        var after = [];\n                        for (var i = 0, imax = children.length; i < imax; ++i) {\n                            var child = children[i];\n                            if (child.selected) {\n                                after.push(child);\n                            }\n                            else if (types.has(child.type)) {\n                                after.push(child);\n                            }\n                        }\n                        if (selection.clearAndAddAll(after)) {\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    else {\n                        if (selection.clearAndAddAll(children)) {\n                            var after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    EToolSelect.prototype.onKeyup = function (e) {\n        // DO NOTHING\n    };\n    EToolSelect.prototype.onDblClick = function (e) {\n        var selection = this._selection;\n        var last = selection.last();\n        if (last != null) {\n            this.emit(\"edit\", last, this);\n        }\n    };\n    return EToolSelect;\n}(EToolImpl));\nexport { EToolSelect };\n//# sourceMappingURL=e-tool-select.js.map","import { __extends } from \"tslib\";\nimport { DApplications, EShapeAcceptorEdgeType, EShapeCircle, EShapeContainer, EShapeDefaults, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nvar EToolShapeAcceptorEdgeRenderer = /** @class */ (function (_super) {\n    __extends(EToolShapeAcceptorEdgeRenderer, _super);\n    function EToolShapeAcceptorEdgeRenderer(edge) {\n        var _this = _super.call(this) || this;\n        _this._edge = edge;\n        _this._circles = _this.newCircles();\n        _this._foundEdges = [];\n        _this._radius = EShapeDefaults.SIZE_X * 2;\n        _this._scaleBound = 1;\n        _this._scaleBoundInverse = 1;\n        _this._type = EShapeAcceptorEdgeType.TAIL;\n        _this._x = 0;\n        _this._y = 0;\n        _this._ox = 0;\n        _this._oy = 0;\n        _this._isDirty = false;\n        _this._isBegan = false;\n        _this._doUpdateBound = function () {\n            _this._timeout = null;\n            if (_this._isDirty) {\n                _this._isDirty = false;\n                if (_this._isBegan) {\n                    _this.visible = true;\n                    _this.doUpdate();\n                }\n            }\n        };\n        return _this;\n    }\n    EToolShapeAcceptorEdgeRenderer.prototype.newCircles = function () {\n        var result = [];\n        var color = EShapeDefaults.STROKE_COLOR;\n        var alpha = EShapeDefaults.STROKE_ALPHA;\n        for (var i = 0, imax = 64; i < imax; ++i) {\n            var shape = new EShapeCircle();\n            shape.stroke.set(false);\n            shape.fill.set(true, color, alpha);\n            shape.visible = false;\n            shape.attach(this);\n            result.push(shape);\n        }\n        return result;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.begin = function (canvas) {\n        canvas.addChild(this);\n        var layer = canvas.layer.active;\n        if (layer != null) {\n            var position = layer.transform.position;\n            this._ox = position.x;\n            this._oy = position.y;\n        }\n        else {\n            this._ox = 0;\n            this._oy = 0;\n        }\n        this.visible = false;\n        this._isBegan = true;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.end = function () {\n        var parent = this.parent;\n        if (parent != null) {\n            parent.removeChild(this);\n        }\n        this.visible = false;\n        this._isBegan = false;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.onPrerender = function () {\n        var scale0 = this.getParentScale();\n        var scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            var size = this.getCircleSize();\n            var circles = this._circles;\n            for (var i = 0, imax = circles.length; i < imax; ++i) {\n                circles[i].size.set(size, size);\n            }\n        }\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.render = function (renderer) {\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n            return;\n        }\n        this.onPrerender();\n        _super.prototype.render.call(this, renderer);\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.getParentScale = function () {\n        var parent = this.parent;\n        if (parent != null) {\n            return parent.scale.y;\n        }\n        return 1;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.getCircleSize = function () {\n        return 10 * Math.min(1, this._scaleBoundInverse);\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.update = function (type, x, y) {\n        if (this._isBegan) {\n            this._type = type;\n            this._x = x;\n            this._y = y;\n            if (this._timeout == null) {\n                this.visible = true;\n                this.doUpdate();\n                this._timeout = window.setTimeout(this._doUpdateBound, 100);\n            }\n            else {\n                this._isDirty = true;\n            }\n        }\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.doUpdate = function () {\n        var radius = this._radius;\n        var circles = this._circles;\n        var circlesLength = circles.length;\n        var edges = this._foundEdges;\n        this._edge.findAll(this._type, this._x, this._y, radius, circlesLength, edges);\n        var edgesLength = edges.length;\n        var ox = this._ox;\n        var oy = this._oy;\n        var size = this.getCircleSize();\n        var isize = Math.min(circlesLength, edgesLength);\n        var distance = radius * radius;\n        for (var i = 0; i < isize; ++i) {\n            var edge = edges[i];\n            var edgeCenter = edge.center;\n            var circle = circles[i];\n            circle.lock(EShapeLockPart.UPLOADED);\n            circle.transform.position.set(ox + edgeCenter.x, oy + edgeCenter.y);\n            circle.size.set(size, size);\n            circle.fill.alpha = 0.5 * Math.max(0, 1 - edge.distance / distance);\n            circle.visible = true;\n            circle.unlock(EShapeLockPart.UPLOADED, true);\n        }\n        for (var i = isize; i < circlesLength; ++i) {\n            circles[i].visible = false;\n        }\n        DApplications.update(this);\n    };\n    return EToolShapeAcceptorEdgeRenderer;\n}(EShapeContainer));\nexport { EToolShapeAcceptorEdgeRenderer };\n//# sourceMappingURL=e-tool-shape-acceptor-edge-renderer.js.map","import { EShapeAcceptors, EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { Matrix, Point } from \"pixi.js\";\nimport { EToolShapeAcceptorEdgeRenderer } from \"./e-tool-shape-acceptor-edge-renderer\";\nvar SIZE = 10;\nvar EToolShapeAcceptorEdge = /** @class */ (function () {\n    function EToolShapeAcceptorEdge(diagram, canvasMode) {\n        this._diagram = diagram;\n        this._canvasMode = canvasMode;\n        this._renderer = new EToolShapeAcceptorEdgeRenderer(this);\n        this._work = new Set();\n    }\n    EToolShapeAcceptorEdge.prototype.begin = function (canvas, shape) {\n        this.clear();\n        this._shape = shape;\n        if (canvas != null) {\n            this._renderer.begin(canvas);\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.end = function () {\n        this._renderer.end();\n        this.clear();\n    };\n    EToolShapeAcceptorEdge.prototype.update = function (type, x, y) {\n        this._renderer.update(type, x, y);\n    };\n    EToolShapeAcceptorEdge.prototype.show = function () {\n        this._renderer.visible = true;\n    };\n    EToolShapeAcceptorEdge.prototype.hide = function () {\n        this._renderer.visible = false;\n    };\n    Object.defineProperty(EToolShapeAcceptorEdge.prototype, \"edges\", {\n        get: function () {\n            var result = this._edges;\n            if (result == null) {\n                result = this.newEdges();\n                this._edges = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeAcceptorEdge.prototype.newEdges = function () {\n        var result = new Map();\n        var layer = this._diagram.layer;\n        if (layer) {\n            var layerPositionX = 0;\n            var layerPositionY = 0;\n            if (this._canvasMode) {\n                var layerPosition = layer.transform.position;\n                layerPositionX = layerPosition.x;\n                layerPositionY = layerPosition.y;\n            }\n            var shape = this._shape;\n            if (shape != null) {\n                var shapeParent = shape.parent;\n                if (shapeParent != null) {\n                    this.addAll(shapeParent.children, layerPositionX, layerPositionY, result);\n                }\n            }\n            else {\n                this.addAll(layer.children, layerPositionX, layerPositionY, result);\n            }\n        }\n        return result;\n    };\n    EToolShapeAcceptorEdge.prototype.addAll = function (shapes, lx, ly, result) {\n        var _this = this;\n        var _loop_1 = function (i, imax) {\n            var shape = shapes[i];\n            if (!(shape instanceof EShapeConnectorLine)) {\n                var size = shape.size;\n                var sx = size.x;\n                var sy = size.y;\n                var transform = shape.transform;\n                var internal = transform.internalTransform;\n                var a = internal.a;\n                var b = internal.b;\n                var c = internal.c;\n                var d = internal.d;\n                var pivot = transform.pivot;\n                var px = pivot.x;\n                var py = pivot.y;\n                var matrix_1 = new Matrix(a * sx, b * sx, c * sy, d * sy, internal.tx + lx + (a * px + c * py), internal.ty + ly + (b * px + d * py));\n                EShapeAcceptors.get(shape.type).each(shape, function (edge, id) {\n                    _this.add(matrix_1, id, edge, shape, result);\n                });\n                if (EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN)) {\n                    var children = shape.children;\n                    if (children) {\n                        this_1.addAll(children, lx, ly, result);\n                    }\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            _loop_1(i, imax);\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.add = function (matrix, id, acceptorEdge, shape, coordinateToEdges) {\n        var aes = acceptorEdge.size;\n        var aesx = aes.x;\n        var aesy = aes.y;\n        var aex = acceptorEdge.x;\n        var aey = acceptorEdge.y;\n        var a = matrix.a;\n        var b = matrix.b;\n        var c = matrix.c;\n        var d = matrix.d;\n        var tx = matrix.tx;\n        var ty = matrix.ty;\n        var x = a * aex + c * aey + tx;\n        var y = b * aex + d * aey + ty;\n        var edge = {\n            shape: shape,\n            id: id,\n            x: null,\n            y: null,\n            acceptor: acceptorEdge,\n            matrix: matrix,\n            local: new Point(x, y),\n            center: new Point(x, y),\n            distance: 0\n        };\n        if (aesx === 0 && aesy === 0) {\n            var gx = this.toGridIndex(x);\n            var gy = this.toGridIndex(y);\n            var coordinate = this.toCoordinate(gx, gy);\n            var edges = coordinateToEdges.get(coordinate);\n            if (edges == null) {\n                coordinateToEdges.set(coordinate, [edge]);\n            }\n            else {\n                edges.push(edge);\n            }\n        }\n        else {\n            var aesxh = aesx * 0.5;\n            var aesyh = aesy * 0.5;\n            var aex0 = aex - aesxh;\n            var aey0 = aey - aesyh;\n            var aex1 = aex + aesxh;\n            var aey1 = aey - aesyh;\n            var aex2 = aex + aesxh;\n            var aey2 = aey + aesyh;\n            var aex3 = aex - aesxh;\n            var aey3 = aey + aesyh;\n            var x0 = a * aex0 + c * aey0;\n            var y0 = b * aex0 + d * aey0;\n            var x1 = a * aex1 + c * aey1;\n            var y1 = b * aex1 + d * aey1;\n            var x2 = a * aex2 + c * aey2;\n            var y2 = b * aex2 + d * aey2;\n            var x3 = a * aex3 + c * aey3;\n            var y3 = b * aex3 + d * aey3;\n            var x4 = Math.min(x0, x1, x2, x3) + tx;\n            var y4 = Math.min(y0, y1, y2, y3) + ty;\n            var x5 = Math.max(x0, x1, x2, x3) + tx;\n            var y5 = Math.max(y0, y1, y2, y3) + ty;\n            var ix0 = Math.floor(x4 / SIZE);\n            var iy0 = Math.floor(y4 / SIZE);\n            var ix1 = Math.ceil(x5 / SIZE);\n            var iy1 = Math.ceil(y5 / SIZE);\n            for (var ix = ix0; ix <= ix1; ++ix) {\n                for (var iy = iy0; iy <= iy1; ++iy) {\n                    var coordinate = this.toCoordinate(ix, iy);\n                    var edges = coordinateToEdges.get(coordinate);\n                    if (edges == null) {\n                        coordinateToEdges.set(coordinate, [edge]);\n                    }\n                    else {\n                        edges.push(edge);\n                    }\n                }\n            }\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.toCoordinate = function (ix, iy) {\n        return (ix % 1024) + (iy % 1024 << 10);\n    };\n    EToolShapeAcceptorEdge.prototype.toGridIndex = function (x) {\n        return Math.round(x / SIZE);\n    };\n    EToolShapeAcceptorEdge.prototype.find = function (type, x, y) {\n        var result = null;\n        var distance = 0;\n        var edges = this.edges;\n        var threshold = SIZE * SIZE;\n        for (var ix = -SIZE; ix <= SIZE; ix += SIZE) {\n            for (var iy = -SIZE; iy <= SIZE; iy += SIZE) {\n                var gix = this.toGridIndex(x + ix);\n                var giy = this.toGridIndex(y + iy);\n                var foundEdges = edges.get(this.toCoordinate(gix, giy));\n                if (foundEdges == null) {\n                    continue;\n                }\n                for (var i = 0, imax = foundEdges.length; i < imax; ++i) {\n                    var foundEdge = foundEdges[i];\n                    var acceptorEdge = foundEdge.acceptor;\n                    if ((acceptorEdge.type & type) === 0) {\n                        continue;\n                    }\n                    var size = acceptorEdge.size;\n                    var sx = size.x;\n                    var sy = size.y;\n                    if (sx === 0 && sy === 0) {\n                        var center = foundEdge.center;\n                        var dx = x - center.x;\n                        var dy = y - center.y;\n                        var dd = dx * dx + dy * dy;\n                        if (dd <= threshold && (result == null || dd < distance)) {\n                            result = foundEdge;\n                            distance = dd;\n                        }\n                    }\n                    else {\n                        var matrix = foundEdge.matrix;\n                        var a = matrix.a;\n                        var b = matrix.b;\n                        var c = matrix.c;\n                        var d = matrix.d;\n                        var tx = matrix.tx;\n                        var ty = matrix.ty;\n                        var det = a * d - c * b;\n                        if (0.0000001 < Math.abs(det)) {\n                            var di = 1 / det;\n                            var xtx = x - tx;\n                            var yty = y - ty;\n                            var lx = (+d * xtx - c * yty) * di;\n                            var ly = (-b * xtx + a * yty) * di;\n                            var sxh = sx * 0.5;\n                            var syh = sy * 0.5;\n                            var aex = acceptorEdge.x;\n                            var aey = acceptorEdge.y;\n                            var lx0 = aex - sxh;\n                            var ly0 = aey - syh;\n                            var lx1 = aex + sxh;\n                            var ly1 = aey + syh;\n                            var lx2 = Math.min(lx1, Math.max(lx0, lx));\n                            var ly2 = Math.min(ly1, Math.max(ly0, ly));\n                            var x0 = a * lx2 + c * ly2 + tx;\n                            var y0 = b * lx2 + d * ly2 + ty;\n                            var dx = x - x0;\n                            var dy = y - y0;\n                            var dd = dx * dx + dy * dy;\n                            if (dd <= threshold && (result == null || dd < distance)) {\n                                result = foundEdge;\n                                result.x = lx2;\n                                result.y = ly2;\n                                result.local.set(x0, y0);\n                                distance = dd;\n                            }\n                        }\n                        else {\n                            var center = foundEdge.center;\n                            var dx = x - center.x;\n                            var dy = y - center.y;\n                            var dd = dx * dx + dy * dy;\n                            if (dd <= threshold && (result == null || dd < distance)) {\n                                result = foundEdge;\n                                distance = dd;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    EToolShapeAcceptorEdge.prototype.findAll = function (type, x, y, range, limit, result) {\n        var edges = this.edges;\n        range = Math.ceil(range / SIZE) * SIZE;\n        var threshold = range * range;\n        var work = this._work;\n        work.clear();\n        this.findAllS1(type, x, y, 0, 0, edges, threshold, work);\n        for (var ir = SIZE; ir <= range && work.size < limit; ir += SIZE) {\n            this.findAllS2(type, x, y, edges, threshold, ir, work);\n        }\n        var iresult = -1;\n        work.forEach(function (found) {\n            result[++iresult] = found;\n        });\n        result.length = work.size;\n        result.sort(this.compare);\n        return result;\n    };\n    EToolShapeAcceptorEdge.prototype.findAllS2 = function (type, x, y, edges, threshold, radius, result) {\n        for (var dx = -radius; dx <= radius; dx += SIZE) {\n            this.findAllS1(type, x, y, dx, -radius, edges, threshold, result);\n            this.findAllS1(type, x, y, dx, +radius, edges, threshold, result);\n        }\n        for (var dy = -radius + SIZE, iymax = radius - SIZE; dy <= iymax; dy += SIZE) {\n            this.findAllS1(type, x, y, -radius, dy, edges, threshold, result);\n            this.findAllS1(type, x, y, +radius, dy, edges, threshold, result);\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.findAllS1 = function (type, x, y, dx, dy, edges, threshold, result) {\n        var gix = this.toGridIndex(x + dx);\n        var giy = this.toGridIndex(y + dy);\n        var foundEdges = edges.get(this.toCoordinate(gix, giy));\n        if (foundEdges) {\n            for (var i = 0, imax = foundEdges.length; i < imax; ++i) {\n                var foundEdge = foundEdges[i];\n                if (foundEdge.acceptor.type & type) {\n                    var foundEdgeLocal = foundEdge.local;\n                    var sx = x - foundEdgeLocal.x;\n                    var sy = y - foundEdgeLocal.y;\n                    var sd = sx * sx + sy * sy;\n                    if (sd <= threshold) {\n                        foundEdge.distance = sd;\n                        result.add(foundEdge);\n                    }\n                }\n            }\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.compare = function (a, b) {\n        var ad = a.distance;\n        var bd = b.distance;\n        return ad < bd ? -1 : ad > bd ? +1 : 0;\n    };\n    EToolShapeAcceptorEdge.prototype.clear = function () {\n        this._edges = undefined;\n    };\n    return EToolShapeAcceptorEdge;\n}());\nexport { EToolShapeAcceptorEdge };\n//# sourceMappingURL=e-tool-shape-acceptor-edge.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeConnectorLine, EShapePointsMarkerType, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nimport { EToolShapeAcceptorEdge } from \"./e-tool-shape-acceptor-edge\";\nexport var EToolShapeCreateLineConnectorPhase = {\n    OFF: -1,\n    TAIL: 0,\n    HEAD: 1,\n    DONE: 2\n};\nvar EToolShapeCreateLineConnector = /** @class */ (function (_super) {\n    __extends(EToolShapeCreateLineConnector, _super);\n    function EToolShapeCreateLineConnector(options) {\n        var _this = _super.call(this) || this;\n        _this._options = options;\n        _this._selection = options.selection;\n        _this._diagram = options.diagram;\n        _this._edge = new EToolShapeAcceptorEdge(options.diagram, false);\n        _this._newShape = options.newShape || (function () { return _this.newShape(); });\n        _this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n        _this._work = new Point();\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        _this._onKeyDownBound = function (e) {\n            _this.onKeyDown(e);\n        };\n        _this._onSetBound = function (canvas) {\n            _this.onSet(canvas);\n        };\n        _this._onUnsetBound = function (canvas) {\n            _this.onUnset(canvas);\n        };\n        return _this;\n    }\n    EToolShapeCreateLineConnector.prototype.onActivate = function () {\n        this._phase = EToolShapeCreateLineConnectorPhase.TAIL;\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.on(UtilPointerEvent.down, this._onDownBound);\n            diagram.on(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.on(UtilPointerEvent.up, onUpBound);\n            interactionManager.on(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.on(UtilPointerEvent.cancel, onUpBound);\n            diagram.on(\"keydown\", this._onKeyDownBound);\n            diagram.on(\"set\", this._onSetBound);\n            diagram.on(\"unset\", this._onUnsetBound);\n        }\n        this._edge.begin(diagram.canvas, null);\n        var selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    };\n    EToolShapeCreateLineConnector.prototype.onDeactivate = function () {\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.off(UtilPointerEvent.down, this._onDownBound);\n            diagram.off(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n            diagram.off(\"keydown\", this._onKeyDownBound);\n            diagram.off(\"set\", this._onSetBound);\n            diagram.off(\"unset\", this._onUnsetBound);\n        }\n        this._edge.end();\n        var selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n        var connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n    };\n    EToolShapeCreateLineConnector.prototype.onSet = function (canvas) {\n        this._edge.begin(canvas, null);\n    };\n    EToolShapeCreateLineConnector.prototype.onUnset = function (canvas) {\n        this._edge.end();\n        var connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        this._phase = EToolShapeCreateLineConnectorPhase.TAIL;\n    };\n    EToolShapeCreateLineConnector.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        switch (this._phase) {\n            case EToolShapeCreateLineConnectorPhase.OFF:\n                break;\n            case EToolShapeCreateLineConnectorPhase.TAIL:\n                if (this.onTail(e)) {\n                    this._phase = EToolShapeCreateLineConnectorPhase.HEAD;\n                }\n                break;\n            case EToolShapeCreateLineConnectorPhase.HEAD:\n                if (this.onHead(e)) {\n                    this._phase = EToolShapeCreateLineConnectorPhase.DONE;\n                }\n                break;\n            case EToolShapeCreateLineConnectorPhase.DONE:\n                break;\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        switch (this._phase) {\n            case EToolShapeCreateLineConnectorPhase.OFF:\n                break;\n            case EToolShapeCreateLineConnectorPhase.TAIL:\n                this.onTail(e);\n                break;\n            case EToolShapeCreateLineConnectorPhase.HEAD:\n                this.onHead(e);\n                break;\n            case EToolShapeCreateLineConnectorPhase.DONE:\n                break;\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onUp = function (e) {\n        this.onDone();\n    };\n    EToolShapeCreateLineConnector.prototype.onTail = function (e) {\n        var diagram = this._diagram;\n        var layer = diagram.layer;\n        if (layer) {\n            var connector = this._connector;\n            var global_1 = e.data.global;\n            var local = layer.toLocal(global_1, undefined, this._work);\n            var edge = this._edge.find(EShapeAcceptorEdgeType.TAIL, local.x, local.y);\n            this._edge.update(EShapeAcceptorEdgeType.TAIL, local.x, local.y);\n            if (this.isTailAccepted(connector, local, edge)) {\n                if (connector == null) {\n                    connector = this._newShape();\n                    connector.fill.alpha = 1;\n                    this._connector = connector;\n                    connector.attach(layer);\n                }\n                this.onTailAccepted(connector, local, edge);\n                DApplications.update(diagram);\n                return true;\n            }\n            else {\n                if (connector != null) {\n                    this.onTailUnaccepted(connector, local);\n                    DApplications.update(diagram);\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EToolShapeCreateLineConnector.prototype.isDanglingEdgeAllowed = function () {\n        var _a;\n        return (_a = this._options.dangling) !== null && _a !== void 0 ? _a : false;\n    };\n    EToolShapeCreateLineConnector.prototype.isTailAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.getTailType = function () {\n        return EShapePointsMarkerType.CIRCLE;\n    };\n    EToolShapeCreateLineConnector.prototype.onTailAccepted = function (connector, local, edge) {\n        connector.points.marker.tail.type = this.getTailType();\n        if (edge != null) {\n            connector.edge.tail.set(edge.shape, edge.id, edge.x, edge.y, 0, edge.local.x, edge.local.y, undefined, undefined, edge.acceptor.side);\n            connector.edge.head.local.copyFrom(edge.local);\n        }\n        else {\n            connector.edge.tail.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n            connector.edge.head.local.copyFrom(local);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onTailUnaccepted = function (connector, local) {\n        connector.points.marker.tail.type = EShapePointsMarkerType.NONE;\n        connector.edge.tail.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        connector.edge.head.local.copyFrom(local);\n    };\n    EToolShapeCreateLineConnector.prototype.newShape = function () {\n        var result = new EShapeConnectorLine();\n        result.fill.alpha = 1;\n        return result;\n    };\n    EToolShapeCreateLineConnector.prototype.onHead = function (e) {\n        var diagram = this._diagram;\n        var layer = diagram.layer;\n        if (layer) {\n            var connector = this._connector;\n            if (connector) {\n                var global_2 = e.data.global;\n                var local = layer.toLocal(global_2, undefined, this._work);\n                var edge = this._edge.find(EShapeAcceptorEdgeType.HEAD, local.x, local.y);\n                this._edge.update(EShapeAcceptorEdgeType.HEAD, local.x, local.y);\n                if (this.isHeadAccepted(connector, local, edge)) {\n                    this.onHeadAccepted(connector, local, edge);\n                    DApplications.update(diagram);\n                    return true;\n                }\n                else {\n                    this.onHeadUnaccepted(connector, local);\n                    DApplications.update(diagram);\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EToolShapeCreateLineConnector.prototype.isHeadAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return !this.isSameAcceptor(connector.edge.tail.acceptor, edge);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.isSameAcceptor = function (a, b) {\n        return a.shape === b.shape && a.edge === b.id && a.x === b.x && a.y === b.y;\n    };\n    EToolShapeCreateLineConnector.prototype.getHeadType = function () {\n        return EShapePointsMarkerType.TRIANGLE;\n    };\n    EToolShapeCreateLineConnector.prototype.onHeadAccepted = function (connector, local, edge) {\n        connector.points.marker.head.type = this.getHeadType();\n        if (edge != null) {\n            connector.edge.head.set(edge.shape, edge.id, edge.x, edge.y, 10, edge.local.x, edge.local.y, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.head.set(null, null, null, null, 10, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onHeadUnaccepted = function (connector, local) {\n        connector.points.marker.head.type = EShapePointsMarkerType.NONE;\n        connector.edge.head.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n    };\n    EToolShapeCreateLineConnector.prototype.onDone = function () {\n        if (this._phase === EToolShapeCreateLineConnectorPhase.DONE) {\n            this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n            var connector = this._connector;\n            if (connector) {\n                this._connector = undefined;\n                var diagram = this._diagram;\n                var layer = diagram.layer;\n                if (layer) {\n                    connector.edge.attach();\n                    DControllers.getCommandController().push(new ECommandShapeCreate([connector], layer, this._selection, true));\n                }\n                else {\n                    connector.detach();\n                    connector.destroy();\n                }\n                this.emit(\"done\", this);\n            }\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onCancel = function () {\n        var connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        if (this._phase !== EToolShapeCreateLineConnectorPhase.OFF) {\n            this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n            this.emit(\"cancel\", this);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onKeyDown = function (e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onCancel();\n        }\n    };\n    return EToolShapeCreateLineConnector;\n}(EToolImpl));\nexport { EToolShapeCreateLineConnector };\n//# sourceMappingURL=e-tool-shape-create-line-connector.js.map","import { __extends } from \"tslib\";\nimport { EShapeConnectorElbow } from \"@wcardinal/wcardinal-ui\";\nimport { EToolShapeCreateLineConnector } from \"./e-tool-shape-create-line-connector\";\nvar EToolShapeCreateElbowConnector = /** @class */ (function (_super) {\n    __extends(EToolShapeCreateElbowConnector, _super);\n    function EToolShapeCreateElbowConnector() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EToolShapeCreateElbowConnector.prototype.newShape = function () {\n        var result = new EShapeConnectorElbow();\n        result.fill.alpha = 1;\n        return result;\n    };\n    return EToolShapeCreateElbowConnector;\n}(EToolShapeCreateLineConnector));\nexport { EToolShapeCreateElbowConnector };\n//# sourceMappingURL=e-tool-shape-create-elbow-connector.js.map","import { __extends } from \"tslib\";\nimport { createLine, DApplications, DControllers, EShapeDefaults, EShapePointsStyle, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nvar EToolShapeCreateLine = /** @class */ (function (_super) {\n    __extends(EToolShapeCreateLine, _super);\n    function EToolShapeCreateLine(options) {\n        var _this = _super.call(this) || this;\n        _this._options = options;\n        _this._selection = options.selection;\n        _this._diagram = options.diagram;\n        _this._isNewPoint = false;\n        _this._onDownPoint = new Point();\n        _this._onMovePoint = new Point();\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onDblClickBound = function () {\n            _this.onDblClick();\n        };\n        _this._onKeydownBound = function (e) {\n            _this.onKeydown(e);\n        };\n        return _this;\n    }\n    EToolShapeCreateLine.prototype.onActivate = function () {\n        var diagram = this._diagram;\n        diagram.on(UtilPointerEvent.down, this._onDownBound);\n        diagram.on(UtilPointerEvent.move, this._onMoveBound);\n        diagram.on(\"dblclick\", this._onDblClickBound);\n        diagram.on(\"keydown\", this._onKeydownBound);\n        var selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    };\n    EToolShapeCreateLine.prototype.onDeactivate = function () {\n        var diagram = this._diagram;\n        diagram.off(UtilPointerEvent.down, this._onDownBound);\n        diagram.off(UtilPointerEvent.move, this._onMoveBound);\n        diagram.off(\"dblclick\", this._onDblClickBound);\n        diagram.off(\"keydown\", this._onKeydownBound);\n        this.onCancel();\n        var selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n    };\n    EToolShapeCreateLine.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        var layer = diagram.layer;\n        if (canvas && layer) {\n            this._isNewPoint = true;\n            var line = this._line;\n            if (line == null) {\n                var onDownPoint = this._onDownPoint;\n                canvas.toLocal(e.data.global, undefined, onDownPoint);\n                diagram.snapper.toSnapped(onDownPoint, onDownPoint);\n                layer.transform.localTransform.applyInverse(onDownPoint, onDownPoint);\n                var newLine = createLine([onDownPoint.x, onDownPoint.y], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n                newLine.attach(layer);\n                this._line = newLine;\n            }\n        }\n    };\n    EToolShapeCreateLine.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var line = this._line;\n        if (line) {\n            var diagram = this._diagram;\n            var canvas = diagram.canvas;\n            if (canvas) {\n                var values = line.points.values;\n                if (this._isNewPoint) {\n                    this._isNewPoint = false;\n                    values.push(0, 0);\n                }\n                var onMovePoint = this._onMovePoint;\n                canvas.toLocal(e.data.global, undefined, onMovePoint);\n                diagram.snapper.toSnapped(onMovePoint, onMovePoint);\n                var parent_1 = line.parent;\n                if (parent_1) {\n                    parent_1.transform.localTransform.applyInverse(onMovePoint, onMovePoint);\n                }\n                var position = line.transform.position;\n                var x = onMovePoint.x - position.x;\n                var y = onMovePoint.y - position.y;\n                var length_1 = values.length;\n                if (originalEvent.shiftKey && 4 <= length_1) {\n                    var px = values[length_1 - 4];\n                    var py = values[length_1 - 3];\n                    var dx = x - px;\n                    var dy = y - py;\n                    var dangle = Math.PI * 0.25;\n                    var angle = Math.round(Math.atan2(dy, dx) / dangle) * dangle;\n                    var d = Math.sqrt(dx * dx + dy * dy) | 0;\n                    values[length_1 - 2] = px + d * Math.cos(angle);\n                    values[length_1 - 1] = py + d * Math.sin(angle);\n                }\n                else {\n                    values[length_1 - 2] = x | 0;\n                    values[length_1 - 1] = y | 0;\n                }\n                line.points.values = values;\n                DApplications.update(diagram);\n            }\n        }\n    };\n    EToolShapeCreateLine.prototype.toValues = function (line) {\n        var position = line.transform.position;\n        var px = position.x;\n        var py = position.y;\n        var values = line.points.values;\n        var result = [];\n        var prevx = NaN;\n        var prevy = NaN;\n        for (var i = 0, imax = values.length; i < imax; i += 2) {\n            var x = values[i + 0];\n            var y = values[i + 1];\n            if (prevx !== x || prevy !== y) {\n                result.push(px + x, py + y);\n                prevx = x;\n                prevy = y;\n            }\n        }\n        return result;\n    };\n    EToolShapeCreateLine.prototype.toShape = function (values) {\n        if (4 <= values.length) {\n            return createLine(values, [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n        }\n        return null;\n    };\n    EToolShapeCreateLine.prototype.add = function (values) {\n        var layer = this._diagram.layer;\n        if (layer) {\n            var newShape = this.toShape(values);\n            if (newShape != null) {\n                newShape.attach(layer);\n                DControllers.getCommandController().push(new ECommandShapeCreate([newShape], layer, this._selection, true));\n            }\n        }\n    };\n    EToolShapeCreateLine.prototype.onDblClick = function () {\n        var line = this._line;\n        if (line) {\n            this._line = undefined;\n            line.detach();\n            this.add(this.toValues(line));\n            DApplications.update(this._diagram);\n            this.emit(\"done\", this);\n        }\n    };\n    EToolShapeCreateLine.prototype.onCancel = function () {\n        var line = this._line;\n        if (line) {\n            line.points.values.length -= 2;\n            this.onDblClick();\n        }\n    };\n    EToolShapeCreateLine.prototype.onKeydown = function (e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onCancel();\n        }\n    };\n    return EToolShapeCreateLine;\n}(EToolImpl));\nexport { EToolShapeCreateLine };\n//# sourceMappingURL=e-tool-shape-create-line.js.map","import { __extends } from \"tslib\";\nimport { createPolygon } from \"@wcardinal/wcardinal-ui\";\nimport { EToolShapeCreateLine } from \"./e-tool-shape-create-line\";\nvar EToolShapeCreatePolygon = /** @class */ (function (_super) {\n    __extends(EToolShapeCreatePolygon, _super);\n    function EToolShapeCreatePolygon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EToolShapeCreatePolygon.prototype.toShape = function (values) {\n        if (6 <= values.length) {\n            return createPolygon(values);\n        }\n        return null;\n    };\n    return EToolShapeCreatePolygon;\n}(EToolShapeCreateLine));\nexport { EToolShapeCreatePolygon };\n//# sourceMappingURL=e-tool-shape-create-polygon.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, toResized, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nvar EToolShapeCreate = /** @class */ (function (_super) {\n    __extends(EToolShapeCreate, _super);\n    function EToolShapeCreate(selection, diagram) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._diagram = diagram;\n        _this._applicationLayer = null;\n        _this._onDownPoint = new Point();\n        _this._onMovePoint = new Point();\n        _this._shape = null;\n        _this._creator = undefined;\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        return _this;\n    }\n    Object.defineProperty(EToolShapeCreate.prototype, \"shape\", {\n        get: function () {\n            return this._creator;\n        },\n        set: function (creator) {\n            this._creator = creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeCreate.prototype.onActivate = function () {\n        this._diagram.on(UtilPointerEvent.down, this._onDownBound);\n    };\n    EToolShapeCreate.prototype.onDeactivate = function () {\n        this._diagram.off(UtilPointerEvent.down, this._onDownBound);\n        this.onDone();\n    };\n    EToolShapeCreate.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var selection = this._selection;\n        var diagram = this._diagram;\n        var diagramLayer = diagram.layer;\n        var creator = this._creator;\n        if (diagramLayer != null && creator != null && this._shape == null) {\n            var onDownPoint = diagramLayer.toLocal(e.data.global, undefined, this._onDownPoint);\n            diagram.snapper.toSnapped(onDownPoint, onDownPoint);\n            this._onMovePoint.copyFrom(onDownPoint);\n            var shape = (this._shape = creator());\n            toResized(shape, onDownPoint, onDownPoint, originalEvent.ctrlKey, originalEvent.shiftKey);\n            shape.attach(diagramLayer);\n            selection.modifier.disallow();\n            DControllers.getCommandController().push(new ECommandShapeCreate([shape], diagramLayer, this._selection, true));\n            var oldApplicationLayer = this._applicationLayer;\n            if (oldApplicationLayer) {\n                this._applicationLayer = null;\n                var oldInteractionManager = oldApplicationLayer.renderer.plugins.interaction;\n                oldInteractionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                var onUpBound = this._onUpBound;\n                oldInteractionManager.off(UtilPointerEvent.up, onUpBound);\n                oldInteractionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                oldInteractionManager.off(UtilPointerEvent.cancel, onUpBound);\n            }\n            var newApplicationLayer = DApplications.getLayer(diagram);\n            if (newApplicationLayer) {\n                this._applicationLayer = newApplicationLayer;\n                var newInteractionManager = newApplicationLayer.renderer.plugins.interaction;\n                newInteractionManager.on(UtilPointerEvent.move, this._onMoveBound);\n                var onUpBound = this._onUpBound;\n                newInteractionManager.on(UtilPointerEvent.up, onUpBound);\n                newInteractionManager.on(UtilPointerEvent.upoutside, onUpBound);\n                newInteractionManager.on(UtilPointerEvent.cancel, onUpBound);\n            }\n        }\n    };\n    EToolShapeCreate.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var shape = this._shape;\n        if (shape) {\n            var diagram = this._diagram;\n            var diagramLayer = diagram.layer;\n            var selection = this._selection;\n            var applicationLayer = this._applicationLayer;\n            if (diagramLayer && applicationLayer) {\n                applicationLayer.lock();\n                var onDownPoint = this._onDownPoint;\n                var onMovePoint = diagramLayer.toLocal(e.data.global, undefined, this._onMovePoint);\n                diagram.snapper.toSnapped(onMovePoint, onMovePoint);\n                toResized(shape, onDownPoint, onMovePoint, originalEvent.ctrlKey, originalEvent.shiftKey);\n                selection.update(\"PROPERTY\");\n                applicationLayer.unlock();\n                applicationLayer.update();\n            }\n        }\n    };\n    EToolShapeCreate.prototype.onUp = function (e) {\n        this.onDone();\n    };\n    EToolShapeCreate.prototype.onDone = function () {\n        var shape = this._shape;\n        if (shape) {\n            this._shape = null;\n            var selection = this._selection;\n            var onDownPoint = this._onDownPoint;\n            var onMovePoint = this._onMovePoint;\n            var applicationLayer = this._applicationLayer;\n            if (applicationLayer) {\n                this._applicationLayer = null;\n                var interactionManager = applicationLayer.renderer.plugins.interaction;\n                interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                var onUpBound = this._onUpBound;\n                interactionManager.off(UtilPointerEvent.up, onUpBound);\n                interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n                applicationLayer.lock();\n                if (onDownPoint.x === onMovePoint.x && onDownPoint.y === onMovePoint.y) {\n                    onMovePoint.set(onDownPoint.x + 100, onDownPoint.y + 100);\n                    toResized(shape, onDownPoint, onMovePoint, false, false);\n                }\n                selection.modifier.allow();\n                selection.update(\"PROPERTY\");\n                applicationLayer.unlock();\n                applicationLayer.update();\n            }\n            this.emit(\"done\", this);\n        }\n    };\n    return EToolShapeCreate;\n}(EToolImpl));\nexport { EToolShapeCreate };\n//# sourceMappingURL=e-tool-shape-create.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nvar EToolShapeEditLineHitArea = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLineHitArea, _super);\n    function EToolShapeEditLineHitArea(parent) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._capability = EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n        return _this;\n    }\n    Object.defineProperty(EToolShapeEditLineHitArea.prototype, \"capability\", {\n        get: function () {\n            return this._capability;\n        },\n        set: function (capability) {\n            this._capability = capability;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeEditLineHitArea.prototype.contains = function (x, y) {\n        var parent = this._parent;\n        if (parent.isEditing()) {\n            return true;\n        }\n        var points = parent.points;\n        var pointsClosed = parent.closed;\n        var capability = this._capability;\n        var hasTail = !!(capability & EShapeCapability.LINE_TAIL);\n        var hasHead = !!(capability & EShapeCapability.LINE_HEAD);\n        // Anchors\n        var s = parent.getAnchorSize() * 2;\n        var thresholdLine = s * s;\n        var thresholdAnchor = thresholdLine * 2;\n        for (var i = hasTail ? 0 : 1, imax = points.length - (hasHead ? 0 : 1); i < imax; ++i) {\n            var point = points[i];\n            var dx = point.x - x;\n            var dy = point.y - y;\n            var d = dx * dx + dy * dy;\n            if (d < thresholdAnchor) {\n                parent.setLastHitAnchor(i);\n                return true;\n            }\n        }\n        // Lines\n        for (var i = 0, imax = points.length - 1; i < imax; ++i) {\n            var p0 = points[i + 0];\n            var p1 = points[i + 1];\n            var hitPoint = this.calcHitPoint(x, y, p0.x, p0.y, p1.x, p1.y, thresholdLine);\n            if (0 <= hitPoint) {\n                parent.setLastHitSegment(i, hitPoint);\n                return true;\n            }\n        }\n        if (hasTail && hasHead && pointsClosed) {\n            var p0 = points[points.length - 1];\n            var p1 = points[0];\n            var hitPoint = this.calcHitPoint(x, y, p0.x, p0.y, p1.x, p1.y, thresholdLine);\n            if (0 <= hitPoint) {\n                parent.setLastHitSegment(points.length - 1, hitPoint);\n                return true;\n            }\n        }\n        parent.setLastHitSegment(-1, -1);\n        return false;\n    };\n    EToolShapeEditLineHitArea.prototype.calcHitPoint = function (x, y, p0x, p0y, p1x, p1y, threshold) {\n        var d0x = p1x - p0x;\n        var d0y = p1y - p0y;\n        var d1x = x - p0x;\n        var d1y = y - p0y;\n        var a = d0x * d0x + d0y * d0y;\n        var b = d0x * d1x + d0y * d1y;\n        var c = d1x * d1x + d1y * d1y;\n        if (0.0001 < a) {\n            var t = Math.max(0, Math.min(1, b / a));\n            var d = a * t * t - 2 * b * t + c;\n            if (d < threshold) {\n                return t;\n            }\n        }\n        return -1;\n    };\n    return EToolShapeEditLineHitArea;\n}(Rectangle));\nexport { EToolShapeEditLineHitArea };\n//# sourceMappingURL=e-tool-shape-edit-line-base-hit-area.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, EShapeCapability, EShapePointsStyle, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Graphics, Matrix, Point } from \"pixi.js\";\nimport { ECommandShapeReplaceOne } from \"../command/e-command-shape-replace-one\";\nimport { EToolShapeEditLineHitArea } from \"./e-tool-shape-edit-line-base-hit-area\";\nvar EToolShapeEditLineBase = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLineBase, _super);\n    function EToolShapeEditLineBase(options) {\n        var _this = _super.call(this) || this;\n        _this._options = options;\n        _this._selection = options.selection;\n        _this._diagram = options.diagram;\n        _this._onDownPoint = new Point();\n        _this._points = [];\n        _this._pointsStyle = EShapePointsStyle.NONE;\n        _this._onMovePoint = new Point();\n        _this._isEditing = false;\n        _this._isEdited = false;\n        _this._isActive = false;\n        _this._shape = null;\n        _this._capability = EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n        _this._scaleBound = 1;\n        _this._scaleBoundInverse = 1;\n        _this._lastHitAnchor = -1;\n        _this._lastHitSegment = -1;\n        _this._lastHitSegmentPosition = -1;\n        _this._targetCopy = new Point();\n        _this._target = null;\n        _this._targetIndex = -1;\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        _this._onKeydownBound = function (e) {\n            _this.onKeydown(e);\n        };\n        _this._onSetBound = function (canvas) {\n            _this.onSet(canvas);\n        };\n        _this._onUnsetBound = function (canvas) {\n            _this.onUnset(canvas);\n        };\n        _this.cursor = \"grab\";\n        _this.interactive = true;\n        _this.hitArea = new EToolShapeEditLineHitArea(_this);\n        _this._unformatted = {\n            length: 0,\n            plength: 0,\n            values: [],\n            segments: [],\n            style: EShapePointsStyle.NONE\n        };\n        _this._formatted = {\n            length: 0,\n            plength: 0,\n            values: [],\n            segments: [],\n            style: EShapePointsStyle.NONE\n        };\n        return _this;\n    }\n    EToolShapeEditLineBase.prototype.onPrerender = function () {\n        var scale0 = this.getParentScale();\n        var scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            this.reshape();\n        }\n    };\n    EToolShapeEditLineBase.prototype.getParentScale = function () {\n        var parent = this.parent;\n        return parent != null ? parent.scale.y : 1;\n    };\n    EToolShapeEditLineBase.prototype.render = function (renderer) {\n        this.onPrerender();\n        _super.prototype.render.call(this, renderer);\n    };\n    EToolShapeEditLineBase.prototype.getAnchorSize = function () {\n        return 6 * this._scaleBoundInverse;\n    };\n    EToolShapeEditLineBase.prototype.activate = function () {\n        if (!this._isActive) {\n            this._isActive = true;\n            this.onActivate();\n        }\n    };\n    EToolShapeEditLineBase.prototype.onActivate = function () {\n        this._isEditing = false;\n        this._isEdited = false;\n        this._target = null;\n        this._targetIndex = -1;\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.on(UtilPointerEvent.down, this._onDownBound);\n            interactionManager.on(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.on(UtilPointerEvent.up, onUpBound);\n            interactionManager.on(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.on(UtilPointerEvent.cancel, onUpBound);\n            diagram.on(\"keydown\", this._onKeydownBound);\n            diagram.on(\"set\", this._onSetBound);\n            diagram.on(\"unset\", this._onUnsetBound);\n        }\n        var selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    };\n    EToolShapeEditLineBase.prototype.deactivate = function () {\n        if (this._isActive) {\n            this._isActive = false;\n            this.onDeactivate();\n        }\n    };\n    EToolShapeEditLineBase.prototype.onDeactivate = function () {\n        this._isEditing = false;\n        this._isEdited = false;\n        this._target = null;\n        this._targetIndex = -1;\n        this.shape = null;\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.off(UtilPointerEvent.down, this._onDownBound);\n            interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n            diagram.off(\"keydown\", this._onKeydownBound);\n            diagram.off(\"set\", this._onSetBound);\n            diagram.off(\"unset\", this._onUnsetBound);\n        }\n        var selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n    };\n    EToolShapeEditLineBase.prototype.onSet = function (canvas) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.onUnset = function (canvas) {\n        this.onCancel();\n    };\n    EToolShapeEditLineBase.prototype.isActive = function () {\n        return this._isActive;\n    };\n    EToolShapeEditLineBase.prototype.isEditing = function () {\n        return this._isEditing;\n    };\n    Object.defineProperty(EToolShapeEditLineBase.prototype, \"points\", {\n        get: function () {\n            return this._points;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolShapeEditLineBase.prototype, \"closed\", {\n        get: function () {\n            return (this._pointsStyle & EShapePointsStyle.CLOSED) !== 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolShapeEditLineBase.prototype, \"shape\", {\n        get: function () {\n            return this._shape;\n        },\n        set: function (shape) {\n            if (this._shape !== shape) {\n                this._shape = shape;\n                var capability = this.toCapability(shape);\n                this.hitArea.capability = capability;\n                this._capability = capability;\n                this._isEdited = false;\n                if (shape == null) {\n                    this.onShapeUnset();\n                }\n                else {\n                    this.onShapeSet(shape);\n                }\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeEditLineBase.prototype.onShapeUnset = function () {\n        this._points = [];\n        this._pointsStyle = EShapePointsStyle.NONE;\n        this._formatter = undefined;\n        var parent = this.parent;\n        if (parent) {\n            parent.removeChild(this);\n            DApplications.update(this);\n        }\n    };\n    EToolShapeEditLineBase.prototype.toTransform = function (shape) {\n        var _a;\n        var result = ((_a = this._workTransform) !== null && _a !== void 0 ? _a : (this._workTransform = new Matrix()));\n        result.copyFrom(shape.transform.internalTransform);\n        // If the layer this shape belongs to has a non-zero position,\n        // we have to take that into consideration.\n        var parent = shape.root.parent;\n        if (parent) {\n            result.prepend(parent.transform.localTransform);\n        }\n        return result;\n    };\n    EToolShapeEditLineBase.prototype.setLastHitAnchor = function (index) {\n        if (this._lastHitAnchor !== index || this._lastHitSegment !== -1) {\n            this._lastHitAnchor = index;\n            this._lastHitSegment = -1;\n            this._lastHitSegmentPosition = -1;\n            this.reshape();\n            DApplications.update(this);\n        }\n    };\n    EToolShapeEditLineBase.prototype.setLastHitSegment = function (index, position) {\n        this._lastHitSegmentPosition = position;\n        if (this._lastHitAnchor !== -1 || this._lastHitSegment !== index) {\n            this._lastHitAnchor = -1;\n            this._lastHitSegment = index;\n            this.reshape();\n            DApplications.update(this);\n        }\n    };\n    EToolShapeEditLineBase.prototype.reshape = function () {\n        var graphics = this;\n        var points = this._points;\n        var pointsLength = points.length;\n        var pointsStyle = this._pointsStyle;\n        var formatter = this._formatter;\n        var pointsClosed = this.closed;\n        var capability = this._capability;\n        var hasTail = !!(capability & EShapeCapability.LINE_TAIL);\n        var hasHead = !!(capability & EShapeCapability.LINE_HEAD);\n        graphics.clear();\n        if (0 < pointsLength) {\n            var s = this.getAnchorSize();\n            var hs = s * 0.5;\n            var color = 0x1e87f0;\n            var colorHit = 0xf36f27;\n            var colorFormatted = 0xaaaaaa;\n            var alpha = 1;\n            var alphaFormatted = 0.5;\n            var anchor = this._lastHitAnchor;\n            var segment = this._lastHitSegment;\n            // Formatted\n            if (formatter != null) {\n                var unformatted = this._unformatted;\n                var uvalues = unformatted.values;\n                var usegments = unformatted.segments;\n                for (var i = 0, j = 0; i < pointsLength; i += 1, j += 2) {\n                    var point = points[i];\n                    uvalues[j] = point.x;\n                    uvalues[j + 1] = point.y;\n                }\n                var formatted = this._formatted;\n                formatter(pointsLength, uvalues, usegments, pointsStyle, formatted);\n                var fvalues = formatted.values;\n                graphics.lineStyle(hs, colorFormatted, alphaFormatted);\n                if (0 < fvalues.length) {\n                    graphics.moveTo(fvalues[0], fvalues[1]);\n                    for (var i = 2, imax = fvalues.length; i < imax; i += 2) {\n                        graphics.lineTo(fvalues[i], fvalues[i + 1]);\n                    }\n                }\n            }\n            // Line\n            for (var i = 0, imax = pointsLength - 1; i < imax; ++i) {\n                var p0 = points[i];\n                var p1 = points[i + 1];\n                var c = segment === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.moveTo(p0.x, p0.y);\n                graphics.lineTo(p1.x, p1.y);\n            }\n            if (hasTail && hasHead && pointsClosed) {\n                var i = points.length - 1;\n                var p0 = points[i];\n                var p1 = points[0];\n                var c = segment === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.moveTo(p0.x, p0.y);\n                graphics.lineTo(p1.x, p1.y);\n            }\n            // Anchors\n            var targetIndex = this._targetIndex;\n            for (var i = hasTail ? 0 : 1, imax = pointsLength - (hasHead ? 0 : 1); i < imax; ++i) {\n                var point = points[i];\n                var c = anchor === i || targetIndex === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.beginFill(c, alpha);\n                graphics.drawRect(point.x - hs, point.y - hs, s, s);\n                graphics.endFill();\n            }\n        }\n    };\n    EToolShapeEditLineBase.prototype.replace = function () {\n        var oldShape = this._shape;\n        var points = this._points;\n        if (oldShape && oldShape.parent && 2 <= points.length) {\n            var values = this.toValues(points, oldShape);\n            if (2 < values.length) {\n                var newShape = this.newShape(values, [], this._pointsStyle, oldShape);\n                DControllers.getCommandController().push(new ECommandShapeReplaceOne(newShape, oldShape, oldShape.parent, this._selection));\n            }\n        }\n    };\n    EToolShapeEditLineBase.prototype.toValues = function (points, shape) {\n        shape.updateTransform();\n        var transform = this.toTransform(shape).invert();\n        var result = [];\n        var a = transform.a;\n        var b = transform.b;\n        var c = transform.c;\n        var d = transform.d;\n        var tx = transform.tx;\n        var ty = transform.ty;\n        var pprevx = NaN;\n        var pprevy = NaN;\n        for (var i = 0, imax = points.length; i < imax; ++i) {\n            var point = points[i];\n            var px = point.x;\n            var py = point.y;\n            if (pprevx !== px || pprevy !== py) {\n                var x = a * px + c * py + tx;\n                var y = b * px + d * py + ty;\n                result.push(x, y);\n                pprevx = x;\n                pprevy = y;\n            }\n        }\n        return result;\n    };\n    EToolShapeEditLineBase.prototype.onDown = function (e) {\n        if (e.target === this) {\n            var originalEvent = e.data.originalEvent;\n            if (originalEvent.altKey) {\n                return;\n            }\n            var diagram = this._diagram;\n            var canvas = diagram.canvas;\n            if (canvas != null && !this._isEditing) {\n                var lastHitAnchor = this._lastHitAnchor;\n                var points = this._points;\n                var onDownPoint = this._onDownPoint;\n                if (0 <= lastHitAnchor && lastHitAnchor < points.length) {\n                    this._isEditing = true;\n                    canvas.toLocal(e.data.global, undefined, onDownPoint);\n                    this._target = points[lastHitAnchor];\n                    this._targetCopy.copyFrom(this._target);\n                    this._targetIndex = lastHitAnchor;\n                    this.onTargetChange(lastHitAnchor, onDownPoint);\n                    this.reshape();\n                    DApplications.update(this);\n                }\n                else {\n                    var lastHitSegment = this._lastHitSegment;\n                    if (0 <= lastHitSegment) {\n                        this._lastHitSegment = -1;\n                        this._isEditing = true;\n                        canvas.toLocal(e.data.global, undefined, onDownPoint);\n                        var p0 = points[lastHitSegment + 0];\n                        var p1 = points[lastHitSegment < points.length - 1 ? lastHitSegment + 1 : 0];\n                        var t = this._lastHitSegmentPosition;\n                        var ti = 1 - t;\n                        var x = ti * p0.x + t * p1.x;\n                        var y = ti * p0.y + t * p1.y;\n                        var point = new Point(x, y);\n                        points.splice(lastHitSegment + 1, 0, point);\n                        this._target = point;\n                        this._targetCopy.copyFrom(point);\n                        this._targetIndex = lastHitSegment + 1;\n                        this.onTargetChange(this._targetIndex, onDownPoint);\n                        this.reshape();\n                        DApplications.update(this);\n                    }\n                }\n            }\n        }\n        else {\n            this.onDone();\n        }\n    };\n    EToolShapeEditLineBase.prototype.onTargetChange = function (targetIndex, point) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.onMove = function (e) {\n        if (this._isEditing) {\n            var originalEvent = e.data.originalEvent;\n            if (originalEvent.altKey) {\n                return;\n            }\n            var diagram = this._diagram;\n            var canvas = diagram.canvas;\n            var target = this._target;\n            var targetCopy = this._targetCopy;\n            if (canvas && target) {\n                this._isEdited = true;\n                var onDownPoint = this._onDownPoint;\n                var onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                target.set(targetCopy.x + onMovePoint.x - onDownPoint.x, targetCopy.y + onMovePoint.y - onDownPoint.y);\n                this.toSnapped(target, diagram, target);\n                if (originalEvent.shiftKey) {\n                    var points = this._points;\n                    var targetIndex = this._targetIndex;\n                    var previousIndex = 0 < targetIndex ? targetIndex - 1 : targetIndex + 1;\n                    if (0 <= previousIndex && previousIndex < points.length) {\n                        var previous = points[previousIndex];\n                        var dx = target.x - previous.x;\n                        var dy = target.y - previous.y;\n                        var dangle = Math.PI * 0.25;\n                        var angle = Math.round(Math.atan2(dy, dx) / dangle) * dangle;\n                        var d = Math.sqrt(dx * dx + dy * dy);\n                        target.set(previous.x + d * Math.cos(angle), previous.y + d * Math.sin(angle));\n                    }\n                }\n                this.onTargetMove(onMovePoint);\n                this.reshape();\n                DApplications.update(this);\n            }\n        }\n        else {\n            this.onTargetNotMove(e);\n        }\n    };\n    EToolShapeEditLineBase.prototype.onTargetMove = function (point) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.onTargetNotMove = function (e) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.toSnapped = function (target, diagram, result) {\n        diagram.snapper.toSnapped(target, result);\n    };\n    EToolShapeEditLineBase.prototype.onUp = function (e) {\n        if (this._isEditing) {\n            this._isEditing = false;\n            this._target = null;\n        }\n    };\n    EToolShapeEditLineBase.prototype.onDone = function () {\n        this._isEditing = false;\n        if (this._isEdited) {\n            this._isEdited = false;\n            this.replace();\n        }\n        this.emit(\"done\", this);\n    };\n    EToolShapeEditLineBase.prototype.onCancel = function () {\n        this._isEditing = false;\n        this._isEdited = false;\n        var parent = this.parent;\n        if (parent) {\n            parent.removeChild(this);\n            DApplications.update(this);\n        }\n        this.emit(\"cancel\", this);\n    };\n    EToolShapeEditLineBase.prototype.onKeydown = function (e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onDone();\n        }\n        else if (UtilKeyboardEvent.isDeleteKey(e)) {\n            var targetIndex = this._targetIndex;\n            var points = this._points;\n            if (0 <= targetIndex && targetIndex < points.length && 2 < points.length) {\n                this._isEdited = true;\n                points.splice(targetIndex, 1);\n                if (targetIndex === points.length) {\n                    this._targetIndex -= 1;\n                    this.onTargetChange(this._targetIndex, null);\n                }\n                this.reshape();\n                DApplications.update(this);\n            }\n        }\n    };\n    return EToolShapeEditLineBase;\n}(Graphics));\nexport { EToolShapeEditLineBase };\n//# sourceMappingURL=e-tool-shape-edit-line-base.js.map","import { __extends } from \"tslib\";\nimport { EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeCapabilities, EShapeCapability, EShapeConnectorBodies, EShapeConnectorLine, EShapeLockPart, EShapePointsFormatters, EShapePointsStyle, toPointsBoundary } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { EToolShapeAcceptorEdge } from \"./e-tool-shape-acceptor-edge\";\nimport { EToolShapeEditLineBase } from \"./e-tool-shape-edit-line-base\";\nvar EToolShapeEditLineConnector = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLineConnector, _super);\n    function EToolShapeEditLineConnector(options) {\n        var _this = _super.call(this, options) || this;\n        _this._edge = new EToolShapeAcceptorEdge(_this._diagram, true);\n        _this._work = new Point();\n        return _this;\n    }\n    EToolShapeEditLineConnector.prototype.toCapability = function (shape) {\n        var result = EShapeCapability.NONE;\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            result |= EShapeCapability.LINE_TAIL;\n        }\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            result |= EShapeCapability.LINE_HEAD;\n        }\n        return result;\n    };\n    EToolShapeEditLineConnector.prototype.onActivate = function () {\n        this._edge.begin(this._diagram.canvas, this._shape);\n        this._edgeTail = undefined;\n        this._edgeHead = undefined;\n        _super.prototype.onActivate.call(this);\n    };\n    EToolShapeEditLineConnector.prototype.onDeactivate = function () {\n        this._edge.end();\n        this._edgeTail = undefined;\n        this._edgeHead = undefined;\n        _super.prototype.onDeactivate.call(this);\n    };\n    EToolShapeEditLineConnector.prototype.onTargetChange = function (targetIndex, point) {\n        if (targetIndex === 0) {\n            var edge = this._edge;\n            edge.show();\n            if (point != null) {\n                edge.update(EShapeAcceptorEdgeType.TAIL, point.x, point.y);\n            }\n        }\n        else if (targetIndex === this._points.length - 1) {\n            var edge = this._edge;\n            edge.show();\n            if (point != null) {\n                edge.update(EShapeAcceptorEdgeType.HEAD, point.x, point.y);\n            }\n        }\n        else {\n            this._edge.hide();\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onTargetMove = function (point) {\n        var targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            this._edge.update(EShapeAcceptorEdgeType.TAIL, point.x, point.y);\n        }\n        else if (targetIndex === this._points.length - 1) {\n            this._edge.update(EShapeAcceptorEdgeType.HEAD, point.x, point.y);\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onTargetNotMove = function (e) {\n        var targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            var canvas = this._diagram.canvas;\n            if (canvas) {\n                var onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                this._edge.update(EShapeAcceptorEdgeType.TAIL, onMovePoint.x, onMovePoint.y);\n            }\n        }\n        else if (targetIndex === this._points.length - 1) {\n            var canvas = this._diagram.canvas;\n            if (canvas) {\n                var onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                this._edge.update(EShapeAcceptorEdgeType.HEAD, onMovePoint.x, onMovePoint.y);\n            }\n        }\n    };\n    EToolShapeEditLineConnector.prototype.toSnapped = function (target, diagram, result) {\n        var targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            var edge = this._edge.find(EShapeAcceptorEdgeType.TAIL, target.x, target.y);\n            if (edge != null) {\n                result.copyFrom(edge.local);\n            }\n            this._edgeTail = edge;\n        }\n        else {\n            var points = this._points;\n            var pointsLength = points.length;\n            if (targetIndex === pointsLength - 1) {\n                var edge = this._edge.find(EShapeAcceptorEdgeType.HEAD, target.x, target.y);\n                if (edge != null) {\n                    result.copyFrom(edge.local);\n                }\n                this._edgeHead = edge;\n            }\n            else {\n                diagram.snapper.toSnapped(target, result);\n            }\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onShapeSet = function (shape) {\n        var _a, _b;\n        var points = shape.points;\n        if (points) {\n            shape.updateTransform();\n            this._points = this.toPoints(shape, this.toTransform(shape));\n            var pointsStyle = points.style;\n            this._pointsStyle = pointsStyle;\n            this._formatter =\n                (_a = points.formatter) !== null && _a !== void 0 ? _a : (_b = EShapePointsFormatters.find(pointsStyle)) === null || _b === void 0 ? void 0 : _b.formatter;\n        }\n        else {\n            this._points = [];\n            this._pointsStyle = EShapePointsStyle.NONE;\n            this._formatter = undefined;\n        }\n        this.reshape();\n        var canvas = this._diagram.canvas;\n        if (canvas) {\n            canvas.addChild(this);\n        }\n    };\n    EToolShapeEditLineConnector.prototype.toPoints = function (shape, transform) {\n        var result = [];\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            var transformPosition = shape.transform.position;\n            var px = transformPosition.x;\n            var py = transformPosition.y;\n            var x0 = tailLocal.x - px;\n            var y0 = tailLocal.y - py;\n            var x1 = headLocal.x - px;\n            var y1 = headLocal.y - py;\n            var tailPoint = new Point(x0, y0);\n            result.push(transform.apply(tailPoint, tailPoint));\n            var bodyValues = shape.body.values;\n            var bodyValuesLength = bodyValues.length;\n            if (0 < bodyValuesLength) {\n                var cx = (x1 + x0) * 0.5;\n                var cy = (y1 + y0) * 0.5;\n                var dx = x1 - x0;\n                var dy = y1 - y0;\n                var a = Math.atan2(dy, dx);\n                var l = Math.sqrt(dx * dx + dy * dy);\n                var c = Math.cos(a) * l;\n                var s = Math.sin(a) * l;\n                for (var i = 0; i < bodyValuesLength; i += 2) {\n                    var x = bodyValues[i + 0];\n                    var y = bodyValues[i + 1];\n                    var x2 = cx + c * x - s * y;\n                    var y2 = cy + c * y + s * x;\n                    var middlePoint = new Point(x2, y2);\n                    result.push(transform.apply(middlePoint, middlePoint));\n                }\n            }\n            var headPoint = new Point(x1, y1);\n            result.push(transform.apply(headPoint, headPoint));\n        }\n        return result;\n    };\n    EToolShapeEditLineConnector.prototype.newShape = function (values, segments, style, oldShape) {\n        var boundary = toPointsBoundary(values, [0, 0, 0, 0]);\n        var cx = (boundary[2] + boundary[0]) * 0.5;\n        var cy = (boundary[3] + boundary[1]) * 0.5;\n        var sx = boundary[2] - boundary[0];\n        var sy = boundary[3] - boundary[1];\n        var result = oldShape.clone();\n        var transform = result.transform;\n        var transformPosition = transform.position;\n        var px = transformPosition.x;\n        var py = transformPosition.y;\n        result.lock(EShapeLockPart.UPLOADED);\n        transformPosition.set(px + cx, py + cy);\n        transform.scale.set(1, 1);\n        transform.rotation = 0;\n        transform.skew.set(0, 0);\n        result.points.toFitted(sx, sy);\n        result.size.set(sx, sy);\n        result.edge.lock();\n        result.body.set(EShapeConnectorBodies.from(values, 0, 0));\n        var local = this._work;\n        if (2 <= values.length) {\n            local.set(px + values[0], py + values[1]);\n        }\n        else {\n            local.set(px, py);\n        }\n        var edgeTail = this._edgeTail;\n        if (edgeTail !== undefined) {\n            if (this.isTailAccepted(result, local, edgeTail)) {\n                this.onTailAccepted(result, local, edgeTail);\n            }\n        }\n        if (2 <= values.length) {\n            var valuesLength = values.length;\n            local.set(px + values[valuesLength - 2], py + values[valuesLength - 1]);\n        }\n        else {\n            local.set(px, py);\n        }\n        var edgeHead = this._edgeHead;\n        if (edgeHead !== undefined) {\n            if (this.isHeadAccepted(result, local, edgeHead)) {\n                this.onHeadAccepted(result, local, edgeHead);\n            }\n        }\n        result.edge.unlock();\n        result.unlock(EShapeLockPart.UPLOADED, true);\n        return result;\n    };\n    EToolShapeEditLineConnector.prototype.isDanglingEdgeAllowed = function () {\n        var _a;\n        return (_a = this._options.dangling) !== null && _a !== void 0 ? _a : false;\n    };\n    EToolShapeEditLineConnector.prototype.isTailAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onTailAccepted = function (connector, local, edge) {\n        if (edge != null) {\n            connector.edge.tail.set(edge.shape, edge.id, edge.x, edge.y, undefined, undefined, undefined, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.tail.set(null, null, null, null, undefined, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    };\n    EToolShapeEditLineConnector.prototype.isHeadAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onHeadAccepted = function (connector, local, edge) {\n        if (edge != null) {\n            connector.edge.head.set(edge.shape, edge.id, edge.x, edge.y, undefined, undefined, undefined, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.head.set(null, null, null, null, undefined, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    };\n    return EToolShapeEditLineConnector;\n}(EToolShapeEditLineBase));\nexport { EToolShapeEditLineConnector };\n//# sourceMappingURL=e-tool-shape-edit-line-connector.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapability, EShapeLockPart, EShapePointsFormatters, EShapePointsStyle, toPointsBoundary } from \"@wcardinal/wcardinal-ui\";\nimport { EToolShapeEditLineBase } from \"./e-tool-shape-edit-line-base\";\nimport { Point } from \"pixi.js\";\nvar EToolShapeEditLine = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLine, _super);\n    function EToolShapeEditLine() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EToolShapeEditLine.prototype.onShapeSet = function (shape) {\n        var points = shape.points;\n        if (points) {\n            shape.updateTransform();\n            this._points = this.toPoints(points, this.toTransform(shape));\n            this._pointsStyle = this.toPointsStyle(points);\n            this._formatter = this.toFormatter(points, this._pointsStyle);\n        }\n        else {\n            this._points = [];\n            this._pointsStyle = EShapePointsStyle.NONE;\n            this._formatter = undefined;\n        }\n        this.reshape();\n        var canvas = this._diagram.canvas;\n        if (canvas) {\n            canvas.addChild(this);\n        }\n    };\n    EToolShapeEditLine.prototype.toPoints = function (points, transform) {\n        var result = [];\n        var values = points.values;\n        for (var i = 0, imax = values.length; i < imax; i += 2) {\n            var point = new Point(values[i], values[i + 1]);\n            result.push(transform.apply(point, point));\n        }\n        return result;\n    };\n    EToolShapeEditLine.prototype.toPointsStyle = function (points) {\n        return points.style;\n    };\n    EToolShapeEditLine.prototype.toFormatter = function (points, pointsStyle) {\n        var _a, _b;\n        return (_a = points.formatter) !== null && _a !== void 0 ? _a : (_b = EShapePointsFormatters.find(pointsStyle)) === null || _b === void 0 ? void 0 : _b.formatter;\n    };\n    EToolShapeEditLine.prototype.toCapability = function (shape) {\n        return EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n    };\n    EToolShapeEditLine.prototype.newShape = function (values, segments, style, oldShape) {\n        var boundary = toPointsBoundary(values, [0, 0, 0, 0]);\n        var cx = (boundary[2] + boundary[0]) * 0.5;\n        var cy = (boundary[3] + boundary[1]) * 0.5;\n        var sx = boundary[2] - boundary[0];\n        var sy = boundary[3] - boundary[1];\n        var result = oldShape.clone();\n        var transform = result.transform;\n        var transformPosition = transform.position;\n        var localTransform = oldShape.transform.localTransform;\n        var x = localTransform.a * cx + localTransform.c * cy + transformPosition.x;\n        var y = localTransform.b * cx + localTransform.d * cy + transformPosition.y;\n        var newValues = [];\n        for (var i = 0, imax = values.length; i < imax; i += 2) {\n            newValues.push(values[i] - cx, values[i + 1] - cy);\n        }\n        result.lock(EShapeLockPart.UPLOADED);\n        result.transform.position.set(x, y);\n        result.size.set(sx, sy);\n        var points = result.points;\n        if (points) {\n            points.set(newValues, segments, style);\n        }\n        result.unlock(EShapeLockPart.UPLOADED, true);\n        return result;\n    };\n    return EToolShapeEditLine;\n}(EToolShapeEditLineBase));\nexport { EToolShapeEditLine };\n//# sourceMappingURL=e-tool-shape-edit-line.js.map","import { __extends } from \"tslib\";\nimport { EToolShapeEditLine } from \"./e-tool-shape-edit-line\";\nvar EToolShapeEditPolygon = /** @class */ (function (_super) {\n    __extends(EToolShapeEditPolygon, _super);\n    function EToolShapeEditPolygon() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(EToolShapeEditPolygon.prototype, \"closed\", {\n        get: function () {\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return EToolShapeEditPolygon;\n}(EToolShapeEditLine));\nexport { EToolShapeEditPolygon };\n//# sourceMappingURL=e-tool-shape-edit-polygon.js.map","/*\n * Copyright (C) 2021 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nexport var UtilAjax = {\n    send: function (method, settings) {\n        var isCompleted = false;\n        var makeOnError = function (reason) {\n            return function () {\n                if (!isCompleted) {\n                    isCompleted = true;\n                    settings.error(reason, xhr);\n                }\n            };\n        };\n        var xhr = new XMLHttpRequest();\n        xhr.open(method, settings.url, true);\n        xhr.onload = function () {\n            if (!isCompleted) {\n                isCompleted = true;\n                var status_1 = xhr.status;\n                if ((200 <= status_1 && status_1 < 300) ||\n                    status_1 === 0 ||\n                    status_1 === 304 ||\n                    status_1 === 1223) {\n                    settings.success(xhr.responseText, xhr);\n                }\n                else {\n                    settings.error(xhr.statusText, xhr);\n                }\n            }\n        };\n        var onError = makeOnError(\"error\");\n        xhr.onerror = onError;\n        xhr.onabort = makeOnError(\"abort\");\n        // Headers\n        var headers = settings.headers;\n        if (headers != null) {\n            for (var name_1 in headers) {\n                var header = headers[name_1];\n                if (header != null) {\n                    xhr.setRequestHeader(name_1, header);\n                }\n            }\n        }\n        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        // Timeout\n        var timeout = settings.timeout;\n        if (timeout != null) {\n            xhr.timeout = timeout;\n            xhr.ontimeout = makeOnError(\"timeout\");\n            if (0 < timeout) {\n                // For browsers which do not support the `timeout`\n                setTimeout(function () {\n                    xhr.abort();\n                }, timeout);\n            }\n        }\n        // Send\n        try {\n            var data = settings.data;\n            if (data != null) {\n                xhr.send(data);\n            }\n            else {\n                xhr.send();\n            }\n        }\n        catch (_a) {\n            onError();\n        }\n    }\n};\n//# sourceMappingURL=util-ajax.js.map","import { DThemes, isFunction } from \"@wcardinal/wcardinal-ui\";\nvar UtilCanvasCategory = /** @class */ (function () {\n    function UtilCanvasCategory(options) {\n        this._options = options;\n    }\n    UtilCanvasCategory.prototype.get = function () {\n        var _a;\n        return ((_a = this._promise) !== null && _a !== void 0 ? _a : (this._promise = this.fetch()));\n    };\n    UtilCanvasCategory.prototype.fetch = function () {\n        var _this = this;\n        return Promise.all([this.doFetch()]).then(function (resolveds) {\n            var resolved = resolveds[0];\n            return _this.toFetched(resolved);\n        });\n    };\n    UtilCanvasCategory.prototype.doFetch = function () {\n        var options = this._options;\n        if (isFunction(options)) {\n            return options();\n        }\n        else {\n            return options;\n        }\n    };\n    UtilCanvasCategory.prototype.toFetched = function (options) {\n        var theme = DThemes.get(\"EEditorCanvas\");\n        if (options != null) {\n            var items = this.toItems(theme, options);\n            return {\n                default: this.toDefault(items, theme, options),\n                items: items,\n                writable: this.toWritable(theme, options)\n            };\n        }\n        return {\n            default: theme.getDefaultCategory(),\n            items: [],\n            writable: theme.isCategoryWritable()\n        };\n    };\n    UtilCanvasCategory.prototype.toItems = function (theme, options) {\n        var result = [];\n        var items = options.items;\n        if (items != null) {\n            for (var i = 0, imax = items.length; i < imax; ++i) {\n                var category = items[i];\n                var id = theme.toCategoryId(category);\n                var label = theme.toCategoryLabel(category);\n                result.push({\n                    id: id,\n                    label: label\n                });\n            }\n        }\n        return result;\n    };\n    UtilCanvasCategory.prototype.toDefault = function (items, theme, options) {\n        if (options.default != null) {\n            return options.default;\n        }\n        else if (0 < items.length) {\n            return items[0].id;\n        }\n        else {\n            return theme.getDefaultCategory();\n        }\n    };\n    UtilCanvasCategory.prototype.toWritable = function (theme, options) {\n        var _a;\n        return (_a = options.writable) !== null && _a !== void 0 ? _a : theme.isCategoryWritable();\n    };\n    return UtilCanvasCategory;\n}());\nexport { UtilCanvasCategory };\n//# sourceMappingURL=util-canvas-category.js.map","import { DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { UtilCanvasCategory } from \"./util-canvas-category\";\nvar UtilCanvas = /** @class */ (function () {\n    function UtilCanvas(options) {\n        this._category = new UtilCanvasCategory(options === null || options === void 0 ? void 0 : options.category);\n        this._options = options;\n    }\n    UtilCanvas.prototype.get = function () {\n        var _a;\n        return ((_a = this._promise) !== null && _a !== void 0 ? _a : (this._promise = this.fetch()));\n    };\n    UtilCanvas.prototype.fetch = function () {\n        var _this = this;\n        return this._category.get().then(function (category) {\n            return _this.toDefault(category);\n        });\n    };\n    UtilCanvas.prototype.toDefault = function (category) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        var theme = DThemes.get(\"EEditorCanvas\");\n        var options = this._options;\n        if (options != null) {\n            return {\n                name: (_a = options.name) !== null && _a !== void 0 ? _a : theme.getDefaultName(),\n                label: (_b = options.label) !== null && _b !== void 0 ? _b : theme.getDefaultLabel(),\n                width: (_c = options.width) !== null && _c !== void 0 ? _c : theme.getDefaultWidth(),\n                height: (_d = options.height) !== null && _d !== void 0 ? _d : theme.getDefaultHeight(),\n                category: category,\n                summary: (_e = options.summary) !== null && _e !== void 0 ? _e : theme.getDefaultSummary(),\n                description: (_f = options.description) !== null && _f !== void 0 ? _f : theme.getDefaultDescription(),\n                background: {\n                    color: (_h = (_g = options.background) === null || _g === void 0 ? void 0 : _g.color) !== null && _h !== void 0 ? _h : theme.getDefaultBackgroundColor(),\n                    alpha: (_k = (_j = options.background) === null || _j === void 0 ? void 0 : _j.alpha) !== null && _k !== void 0 ? _k : theme.getDefaultBackgroundAlpha()\n                }\n            };\n        }\n        return {\n            name: theme.getDefaultName(),\n            label: theme.getDefaultLabel(),\n            width: theme.getDefaultWidth(),\n            height: theme.getDefaultHeight(),\n            category: category,\n            summary: theme.getDefaultSummary(),\n            description: theme.getDefaultDescription(),\n            background: {\n                color: theme.getDefaultBackgroundColor(),\n                alpha: theme.getDefaultBackgroundAlpha()\n            }\n        };\n    };\n    return UtilCanvas;\n}());\nexport { UtilCanvas };\n//# sourceMappingURL=util-canvas.js.map","var UtilDataValues = /** @class */ (function () {\n    function UtilDataValues(parent) {\n        this.parent = parent;\n        this.mappings = {};\n    }\n    UtilDataValues.prototype.set = function (mappings) {\n        this.mappings = mappings;\n        var parent = this.parent;\n        var parentData = parent.data;\n        for (var id in mappings) {\n            var value = mappings[id];\n            if (value) {\n                parentData.set(id, value.value, value.time, value.state);\n            }\n        }\n        parent.update();\n    };\n    UtilDataValues.prototype.retain = function (ids) {\n        var retained = {};\n        var mapping = this.mappings;\n        for (var i = 0, imax = ids.length; i < imax; ++i) {\n            var id = ids[i];\n            if (id in mapping) {\n                retained[id] = mapping[id];\n            }\n        }\n        this.set(retained);\n    };\n    return UtilDataValues;\n}());\nexport { UtilDataValues };\n//# sourceMappingURL=util-data-values.js.map","import { NumberFormatters } from \"@wcardinal/wcardinal-ui\";\nvar UtilDate = /** @class */ (function () {\n    function UtilDate() {\n    }\n    UtilDate.getFormatter = function () {\n        if (UtilDate.DATE_FORMATTER == null) {\n            UtilDate.DATE_FORMATTER = NumberFormatters.create(\"%Y%M%D%H%m%s\");\n        }\n        return UtilDate.DATE_FORMATTER;\n    };\n    UtilDate.format = function (target) {\n        return this.getFormatter().format(target, 1);\n    };\n    UtilDate.DATE_FORMATTER = null;\n    return UtilDate;\n}());\nexport { UtilDate };\n//# sourceMappingURL=util-date.js.map","import { __extends } from \"tslib\";\nimport { DButtonColor, DControllers, DInputIntegerAndLabel, DInputLabel, DInputTextAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutVertical, DMenu, DPane, DSelect, DText, isNumber } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentBackground } from \"../command/e-command-document-background\";\nimport { ECommandDocumentName } from \"../command/e-command-document-name\";\nimport { ECommandDocumentHeight } from \"../command/e-command-document-height\";\nimport { ECommandDocumentWidth } from \"../command/e-command-document-width\";\nimport { ECommandDocumentLabel } from \"../command/e-command-document-label\";\nimport { ECommandDocumentSummary } from \"../command/e-command-document-summary\";\nimport { ECommandDocumentDescription } from \"../command/e-command-document-description\";\nimport { ECommandDocumentCategory } from \"../command/e-command-document-category\";\nvar EEditorCanvasLegacy = /** @class */ (function (_super) {\n    __extends(EEditorCanvasLegacy, _super);\n    function EEditorCanvasLegacy(options) {\n        var _this = _super.call(this, options) || this;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        _this._canvas = options.canvas;\n        _this.content.addChild(_this.newLayout());\n        return _this;\n    }\n    EEditorCanvasLegacy.prototype.newLayout = function () {\n        return new DLayoutVertical({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: this.newLayoutItems()\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLayoutItems = function () {\n        return [\n            this.newTextLabel(),\n            this.newLayoutName(),\n            this.newLayoutLabel(),\n            this.newLayoutWidth(),\n            this.newLayoutHeight(),\n            this.newLayoutCategory(),\n            this.newLayoutSummary(),\n            this.newLayoutDescription(),\n            this.newLayoutBackground()\n        ];\n    };\n    EEditorCanvasLegacy.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLayoutName = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.name !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentName(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.name;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.name;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutLabel = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.label !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentLabel(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.label;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.label;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutWidth = function () {\n        var diagram = this._diagram;\n        var result = new DInputIntegerAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.width !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentWidth(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.width;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.width;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutHeight = function () {\n        var diagram = this._diagram;\n        var result = new DInputIntegerAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputHeightLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.height !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentHeight(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.height;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.height;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutBackground = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelBackground(), this.newInputBackground()]\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLabelBackground = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputBackgroundLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newInputBackground = function () {\n        var diagram = this._diagram;\n        var result = new DButtonColor({\n            weight: 1,\n            on: {\n                change: function (value) {\n                    DControllers.getCommandController().push(new ECommandDocumentBackground(diagram, value.color, value.alpha));\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        var update = function () {\n            var value = result.value;\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var background = canvas.background;\n                var backgroundColor = background.color;\n                var backgroundAlpha = background.alpha;\n                value.color = isNumber(backgroundColor) ? backgroundColor : 0xffffff;\n                value.alpha = isNumber(backgroundAlpha) ? backgroundAlpha : 1;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", update);\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutCategory = function () {\n        var _this = this;\n        var label = this.newLabelCategory();\n        var select = this.newSelectCategory();\n        var result = new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            children: [label, select]\n        });\n        this._canvas.get().then(function (canvas) {\n            _this.onCanvasValueFetched(canvas, result, select);\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.onCanvasValueFetched = function (canvas, layout, select) {\n        var category = canvas.category;\n        var categoryDefault = category.default;\n        var categoryItems = category.items;\n        if (categoryDefault != null && 0 < categoryItems.length) {\n            var items = [];\n            for (var i = 0, imax = categoryItems.length; i < imax; ++i) {\n                var categoryItem = categoryItems[i];\n                items.push({\n                    value: categoryItem.id,\n                    text: {\n                        value: categoryItem.label\n                    }\n                });\n            }\n            select.menu = new DMenu({\n                fit: true,\n                items: items\n            });\n            select.value = categoryDefault;\n            var diagram_1 = this._diagram;\n            var update = function () {\n                var _a;\n                var diagramCanvas = diagram_1.canvas;\n                if (diagramCanvas != null) {\n                    select.value = (_a = diagramCanvas.category) !== null && _a !== void 0 ? _a : canvas.category.default;\n                }\n            };\n            update();\n            diagram_1.on(\"change\", update);\n            diagram_1.on(\"set\", function (diagramCanvas) {\n                var _a;\n                select.value = (_a = diagramCanvas.category) !== null && _a !== void 0 ? _a : canvas.category.default;\n            });\n            layout.state.isEnabled = category.writable;\n            layout.show();\n        }\n        else {\n            select.value = null;\n            layout.hide();\n        }\n    };\n    EEditorCanvasLegacy.prototype.newLabelCategory = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getSelectCategoryLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newSelectCategory = function () {\n        var _this = this;\n        return new DSelect({\n            weight: 1,\n            on: {\n                change: function (value) {\n                    var diagram = _this._diagram;\n                    var canvas = diagram.canvas;\n                    if (canvas != null && canvas.category !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentCategory(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLayoutSummary = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelSummary(), this.newInputSummary()]\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLabelSummary = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputSummaryLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newInputSummary = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextArea({\n            weight: 1,\n            height: 60,\n            on: {\n                change: function (value) {\n                    var canvas = diagram.canvas;\n                    if (canvas != null && canvas.summary !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentSummary(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.value = canvas.summary;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.value = canvas.summary;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutDescription = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelDescription(), this.newInputDescription()]\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLabelDescription = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputDescriptionLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newInputDescription = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextArea({\n            weight: 1,\n            height: 100,\n            on: {\n                change: function (value) {\n                    var canvas = diagram.canvas;\n                    if (canvas != null && canvas.description !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentDescription(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.value = canvas.description;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.value = canvas.description;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.getType = function () {\n        return \"EEditorCanvasLegacy\";\n    };\n    return EEditorCanvasLegacy;\n}(DPane));\nexport { EEditorCanvasLegacy };\n//# sourceMappingURL=e-editor-canvas-legacy.js.map","import { createImage, DApplication, DBase, DBaseState, DButton, DButtonFile, DButtonFileAs, DButtonGroup, DButtonRedo, DButtonUndo, DCommandSave, DControllers, DDiagramEditor, DDiagrams, DDialogConfirmDelete, DDialogConfirmDiscard, DDialogSaveAs, DDialogSelect, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DThemes, EShapeCircle, EShapeConnectorLine, EShapeEmbeddeds, EShapeLine, EShapePolygon, EShapeRectangle, EShapeRectangleRounded, EShapeResourceManagerDeserializationMode, EShapeSemicircle, EShapeTriangle, EShapeTriangleRounded, isArray, isFunction, isString, UtilClipboard, UtilFileDownloader, UtilGestureModifier, UtilGestureModifiers, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"./command/e-command-shape-create\";\nimport { EDialogProcessing } from \"./editor/e-dialog-processing\";\nimport { getDialogSelectThumbnailSize, newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { EEditorAction } from \"./editor/e-editor-action\";\nimport { EEditorCanvas } from \"./editor/e-editor-canvas\";\nimport { EEditorCanvasLegacy } from \"./editor/e-editor-canvas-legacy\";\nimport { EEditorCoordinate } from \"./editor/e-editor-coordinate\";\nimport { EEditorLayer } from \"./editor/e-editor-layer\";\nimport { EEditorShape } from \"./editor/e-editor-shape\";\nimport { EEditorSnap } from \"./editor/e-editor-snap\";\nimport { EEditorData } from \"./editor/e-editor-data\";\nimport { EEditorText } from \"./editor/e-editor-text\";\nimport { EEditorTree } from \"./editor/e-editor-tree\";\nimport { EShapeExtensionFactories } from \"./extension/e-shape-extension-factories\";\nimport { EShapeExtensions } from \"./extension/e-shape-extensions\";\nimport { EToolGroupImpl } from \"./tool/e-tool-group-impl\";\nimport { EToolSelect } from \"./tool/e-tool-select\";\nimport { EToolShapeCreate } from \"./tool/e-tool-shape-create\";\nimport { EToolShapeCreateLine } from \"./tool/e-tool-shape-create-line\";\nimport { EToolShapeEditLine } from \"./tool/e-tool-shape-edit-line\";\nimport { EToolShapeCreateLineConnector } from \"./tool/e-tool-shape-create-line-connector\";\nimport { EToolShapeEditLineConnector } from \"./tool/e-tool-shape-edit-line-connector\";\nimport { EEditorDataMapping } from \"./editor/e-editor-data-mapping\";\nimport { EToolShapeCreateElbowConnector } from \"./tool/e-tool-shape-create-elbow-connector\";\nimport { EEditorValidation } from \"./editor/e-editor-validation\";\nimport { EEditorSearch } from \"./editor/e-editor-search\";\nimport { ECommandDocumentCreate } from \"./command/e-command-document-create\";\nimport { ECommandDocumentOpen } from \"./command/e-command-document-open\";\nimport { EDialogCanvas } from \"./editor/e-dialog-canvas\";\nimport { UtilCanvas } from \"./util/util-canvas\";\nimport { EToolShapeCreatePolygon } from \"./tool/e-tool-shape-create-polygon\";\nimport { EToolShapeEditPolygon } from \"./tool/e-tool-shape-edit-polygon\";\nvar FGraphicEditor = /** @class */ (function () {\n    function FGraphicEditor(options) {\n        var _a, _b, _c;\n        // Options\n        this._options = options;\n        var theme = this.toTheme(options);\n        this._theme = theme;\n        this._margin = (_a = options.margin) !== null && _a !== void 0 ? _a : theme.getMargin();\n        var piece = options.piece;\n        this._isPieceEnabled = (_b = piece === null || piece === void 0 ? void 0 : piece.enable) !== null && _b !== void 0 ? _b : true;\n        this._toPieceId = (_c = piece === null || piece === void 0 ? void 0 : piece.toId) !== null && _c !== void 0 ? _c : (function () { return null; });\n        this._isEditable = options.editable !== false;\n        this._icons = this.toIcons(theme);\n        this._validation = this.toValidation(options);\n        this._search = this.toSearch(options);\n        this._controller = options.controller;\n        this._canvas = new UtilCanvas(options.canvas);\n        // Application\n        this._application = new DApplication(options.application);\n        // Others\n        this._editorButtonGroup = null;\n        this.init();\n    }\n    Object.defineProperty(FGraphicEditor.prototype, \"application\", {\n        get: function () {\n            return this._application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicEditor.prototype, \"controller\", {\n        get: function () {\n            return this._controller;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.toIcons = function (theme) {\n        var iconBuilder = theme.getIconBuilder();\n        EShapeExtensions.merge(iconBuilder);\n        EShapeExtensionFactories.merge(iconBuilder);\n        var result = iconBuilder.build();\n        EShapeExtensions.build(result);\n        EShapeExtensionFactories.build(result);\n        return result;\n    };\n    FGraphicEditor.prototype.toValidation = function (options) {\n        var validation = options.validation;\n        if (validation != null) {\n            return {\n                validator: validation.validator,\n                force: validation.force === true\n            };\n        }\n        return {\n            validator: undefined,\n            force: false\n        };\n    };\n    FGraphicEditor.prototype.toSearch = function (options) {\n        var search = options.search;\n        if (search != null) {\n            return {\n                finder: search.finder\n            };\n        }\n        return {\n            finder: undefined\n        };\n    };\n    FGraphicEditor.prototype.init = function () {\n        this.initDiagram();\n        this.initHeader();\n        this.initTools();\n        this.initEditors();\n        this.initCopyAndPaste();\n        this.initShortcut();\n    };\n    FGraphicEditor.prototype.initDiagram = function () {\n        var diagram = this.diagram;\n        this.getDiagramContainer().addChild(diagram);\n        DControllers.setDocumentController(diagram);\n    };\n    FGraphicEditor.prototype.initHeader = function () {\n        var header = this.newHeader(this._options);\n        if (header) {\n            this.getHeaderContainer().addChild(header);\n            this._header = header;\n        }\n    };\n    FGraphicEditor.prototype.initTools = function () {\n        this.getToolButtonLayoutContainer().addChild(this.newToolButtonLayout());\n        // Activates the select tool and then disables all the tools.\n        // Otherwise, toolShapeButtonSelect.activate() won't work\n        // because toolShapeButtonSelect.state.isActionable is not true.\n        this.toolShapeButtonSelect.activate();\n        this.toolShapeButtonGroup.disable();\n    };\n    FGraphicEditor.prototype.initEditors = function () {\n        this.getEditorLayoutContainer().addChild(this.newEditorLayout());\n        if (!this.isEditorCanvasCompatible()) {\n            this.diagram.addChild(this.editorCanvas);\n        }\n        // Activate the coordinate editor\n        this.editorButtonCoordinate.activate();\n    };\n    FGraphicEditor.prototype.initCopyAndPaste = function () {\n        var _this = this;\n        new UtilClipboard(this._application.getLayerBase().view)\n            .on(\"copy\", function (clipboardData) {\n            var serialized = _this.toolShapeSelect.selection.serialize();\n            if (serialized != null) {\n                clipboardData.setData(\"text\", serialized);\n            }\n        })\n            .on(\"cut\", function (clipboardData) {\n            var serialized = _this.toolShapeSelect.selection.serialize();\n            if (serialized != null) {\n                clipboardData.setData(\"text\", serialized);\n                _this.toolShapeSelect.selection.delete();\n            }\n        })\n            .on(\"paste\", function (clipboardData) {\n            var serialized = clipboardData.getData(\"text\");\n            _this.toolShapeSelect.selection.deserialize(serialized);\n        });\n    };\n    FGraphicEditor.prototype.initShortcut = function () {\n        this.initShortcutShape();\n        this.initShortcutTree();\n    };\n    FGraphicEditor.prototype.initShortcutShape = function () {\n        var _this = this;\n        var theme = DThemes.get(\"EEditorShape\");\n        var groupShortcut = theme.getButtonGroupShortcut();\n        if (groupShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, groupShortcut, function (e) {\n                _this.toolShapeSelect.selection.group();\n            });\n        }\n        var ungroupShortcut = theme.getButtonUngroupShortcut();\n        if (ungroupShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, ungroupShortcut, function (e) {\n                _this.toolShapeSelect.selection.ungroup();\n            });\n        }\n    };\n    FGraphicEditor.prototype.initShortcutTree = function () {\n        var _this = this;\n        var theme = DThemes.get(\"EEditorTree\");\n        var bringToFrontShortcut = theme.getButtonBringToFrontShortcut();\n        if (bringToFrontShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, bringToFrontShortcut, function (e) {\n                _this.toolShapeSelect.selection.bringToFront();\n            });\n        }\n        var bringToForwardShortcut = theme.getButtonBringForwardShortcut();\n        if (bringToForwardShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, bringToForwardShortcut, function (e) {\n                _this.toolShapeSelect.selection.bringForward();\n            });\n        }\n        var sendBackwardShortcut = theme.getButtonSendBackwardShortcut();\n        if (sendBackwardShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, sendBackwardShortcut, function (e) {\n                _this.toolShapeSelect.selection.sendBackward();\n            });\n        }\n        var sendToBackShortcut = theme.getButtonSendToBackShortcut();\n        if (sendToBackShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, sendToBackShortcut, function (e) {\n                _this.toolShapeSelect.selection.sendToBack();\n            });\n        }\n    };\n    FGraphicEditor.prototype.newHeader = function (options) {\n        var header = options.header;\n        if (header != null) {\n            var result = header(this.newToolFileButtons());\n            if (result) {\n                var margin_1 = this._margin;\n                result.x = margin_1;\n                result.y = margin_1;\n                result.setWidth(function (p) { return p - 2 * margin_1; });\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicEditor.prototype.getHeaderContainer = function () {\n        return this._application.stage;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonCreate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonCreate) !== null && _a !== void 0 ? _a : (this._toolFileButtonCreate = this.newToolFileButtonCreate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonCreate = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.new\n            },\n            title: theme.getToolFileButtonCreateTitle(),\n            shortcut: theme.getToolFileButtonCreateShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: this._isEditable ? undefined : DBaseState.DISABLED,\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonCreateActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolFileButtonCreateActive = function (opener) {\n        var _this = this;\n        if (this.diagram.isChanged()) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogCreate.then(function (dialogCreate) {\n                    dialogCreate.reset().open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogCreate.then(function (dialogCreate) {\n                dialogCreate.reset().open(opener);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonOpen\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonOpen) !== null && _a !== void 0 ? _a : (this._toolFileButtonOpen = this.newToolFileButtonOpen()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonOpenTitle(),\n            shortcut: theme.getToolFileButtonOpenShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolFileButtonOpenActive = function (opener) {\n        var _this = this;\n        if (this.diagram.isChanged()) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogSelect.then(function (dialogSelect) {\n                    dialogSelect.open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogSelect.then(function (dialogSelect) {\n                dialogSelect.open(opener);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonSave\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonSave) !== null && _a !== void 0 ? _a : (this._toolFileButtonSave = this.newToolFileButtonSave()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonSave = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.save\n            },\n            title: theme.getToolFileButtonSaveTitle(),\n            shortcut: theme.getToolFileButtonSaveShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    _this.onToolFileButtonSaveActive();\n                }\n            }\n        });\n        if (this._isEditable) {\n            var diagram_1 = this.diagram;\n            diagram_1.on(\"change\", function () {\n                result.state.isDisabled = !diagram_1.isChanged();\n            });\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonSaveActive = function () {\n        this.validate().then(function () {\n            DControllers.getCommandController().push(new DCommandSave());\n        });\n    };\n    FGraphicEditor.prototype.validate = function () {\n        var _this = this;\n        var validation = this._validation;\n        var validator = validation.validator;\n        if (validator != null && validation.force) {\n            var canvas = this.diagram.canvas;\n            if (canvas) {\n                try {\n                    var result = validator(canvas);\n                    if (result != null) {\n                        var dialogSaveProcessing_1 = this.dialogSaveProcessing;\n                        dialogSaveProcessing_1.open(this.toolFileButtonSave);\n                        if (isArray(result)) {\n                            if (0 < result.length) {\n                                var editorValidation = this.editorValidation;\n                                editorValidation.list.data.clearAndAddAll(result);\n                                var editorButtonValidation = this.editorButtonValidation;\n                                if (!editorButtonValidation.state.isActive) {\n                                    editorButtonValidation.activate();\n                                }\n                                dialogSaveProcessing_1.reject(\"validation\");\n                                return Promise.reject();\n                            }\n                            else {\n                                return Promise.resolve();\n                            }\n                        }\n                        else {\n                            return result.then(function (results) {\n                                if (0 < results.length) {\n                                    var editorValidation = _this.editorValidation;\n                                    editorValidation.list.data.clearAndAddAll(results);\n                                    var editorButtonValidation = _this.editorButtonValidation;\n                                    if (!editorButtonValidation.state.isActive) {\n                                        editorButtonValidation.activate();\n                                    }\n                                    dialogSaveProcessing_1.reject(\"validation\");\n                                    return Promise.reject();\n                                }\n                                else {\n                                    return Promise.resolve();\n                                }\n                            }, function () {\n                                dialogSaveProcessing_1.reject(\"validation-fail\");\n                                return Promise.reject();\n                            });\n                        }\n                    }\n                }\n                catch (_a) {\n                    var dialogSaveProcessing = this.dialogSaveProcessing;\n                    dialogSaveProcessing.open(this.toolFileButtonSave);\n                    dialogSaveProcessing.reject(\"validation-fail\");\n                    return Promise.reject();\n                }\n            }\n        }\n        return Promise.resolve();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonSaveAs\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonSaveAs) !== null && _a !== void 0 ? _a : (this._toolFileButtonSaveAs = this.newToolFileButtonSaveAs()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonSaveAs = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.save_as\n            },\n            title: theme.getToolFileButtonSaveAsTitle(),\n            shortcut: theme.getToolFileButtonSaveAsShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    _this.onToolFileButtonSaveAsActive();\n                }\n            }\n        });\n        if (this._isEditable) {\n            var diagram = this.diagram;\n            diagram.on(\"set\", function () {\n                result.state.isDisabled = false;\n            });\n            diagram.on(\"unset\", function () {\n                result.state.isDisabled = true;\n            });\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonSaveAsActive = function () {\n        var _this = this;\n        this.validate().then(function () {\n            _this.dialogSaveAs.open(_this.toolFileButtonSaveAs);\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonUpload\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonUpload) !== null && _a !== void 0 ? _a : (this._toolFileButtonUpload = this.newToolFileButtonUpload()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonUpload = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButtonFile({\n            image: {\n                source: this._icons.upload\n            },\n            title: theme.getToolFileButtonUploadTitle(),\n            shortcut: theme.getToolFileButtonUploadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            as: DButtonFileAs.TEXT,\n            checker: function () {\n                if (_this.diagram.isChanged()) {\n                    return _this.dialogDiscard.open(result);\n                }\n                else {\n                    return true;\n                }\n            },\n            on: {\n                open: function (data) {\n                    _this.onToolFileButtonUploadOpen(data);\n                }\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonUploadOpen = function (data) {\n        var parsed = DDiagrams.parse(data);\n        if (parsed != null) {\n            parsed.id = undefined;\n            this.diagram.set(parsed);\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonDownload\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonDownload) !== null && _a !== void 0 ? _a : (this._toolFileButtonDownload = this.newToolFileButtonDownload()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonDownload = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.download\n            },\n            title: theme.getToolFileButtonDownloadTitle(),\n            shortcut: theme.getToolFileButtonDownloadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    _this.onToolFileButtonDownloadActive();\n                }\n            }\n        });\n        var diagram = this.diagram;\n        diagram.on(\"set\", function () {\n            result.state.isDisabled = false;\n        });\n        diagram.on(\"unset\", function () {\n            result.state.isDisabled = true;\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonDownloadActive = function () {\n        var serialized = this.diagram.serialize();\n        if (serialized != null) {\n            UtilFileDownloader.download(\"\".concat(serialized.name, \".json\"), JSON.stringify(serialized));\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonUndo\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonUndo) !== null && _a !== void 0 ? _a : (this._toolFileButtonUndo = this.newToolFileButtonUndo()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonUndo = function () {\n        var theme = this._theme;\n        return new DButtonUndo({\n            title: theme.getToolFileButtonUndoTitle(),\n            shortcut: theme.getToolFileButtonUndoShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            image: {\n                source: this._icons.undo\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonRedo\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonRedo) !== null && _a !== void 0 ? _a : (this._toolFileButtonRedo = this.newToolFileButtonRedo()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonRedo = function () {\n        var theme = this._theme;\n        return new DButtonRedo({\n            title: theme.getToolFileButtonRedoTitle(),\n            shortcut: theme.getToolFileButtonRedoShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            image: {\n                source: this._icons.redo\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonDelete) !== null && _a !== void 0 ? _a : (this._toolFileButtonDelete = this.newToolFileButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonDelete = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.delete\n            },\n            title: theme.getToolFileButtonDeleteTitle(),\n            shortcut: theme.getToolFileButtonDeleteShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonDelete(emitter);\n                }\n            }\n        });\n        if (this._isEditable) {\n            var diagram = this.diagram;\n            diagram.on(\"set\", function () {\n                result.state.isDisabled = false;\n            });\n            diagram.on(\"unset\", function () {\n                result.state.isDisabled = true;\n            });\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonDelete = function (opener) {\n        this.dialogDelete.open(opener);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonGroup) !== null && _a !== void 0 ? _a : (this._toolShapeButtonGroup = this.newToolShapeButtonGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonGroup = function () {\n        var result = new DButtonGroup();\n        var diagram = this.diagram;\n        diagram.on(\"set\", function () {\n            result.enable();\n        });\n        diagram.on(\"unset\", function () {\n            result.disable();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonSelect\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonSelect) !== null && _a !== void 0 ? _a : (this._toolShapeButtonSelect = this.newToolShapeButtonSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonSelect = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonSelectTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.select\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonSelectActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonSelectInactive();\n                }\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonSelectActive = function () {\n        this.toolGroup.activate(this.toolShapeSelect);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonSelectInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeSelect);\n    };\n    FGraphicEditor.prototype.newToolShapeButtonCreate = function (title, icon, constructor) {\n        var _this = this;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: title,\n            theme: this._theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons[icon]\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonCreateActive(constructor);\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonCreateInactive();\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolShapeButtonCreateActive = function (constructor) {\n        var toolShapeCreate = this.toolShapeCreate;\n        toolShapeCreate.shape = function () { return new constructor(); };\n        this.toolGroup.activate(toolShapeCreate, constructor);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonCreateInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreate);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonCircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonCircle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonCircle = this.newToolShapeButtonCircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonCircle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonCircleTitle(), \"shape_circle\", EShapeCircle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonSemicircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonSemicircle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonSemicircle = this.newToolShapeButtonSemicircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonSemicircle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonSemicircleTitle(), \"shape_semicircle\", EShapeSemicircle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonRectangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonRectangle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonRectangle = this.newToolShapeButtonRectangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonRectangle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonRectangleTitle(), \"shape_rectangle\", EShapeRectangle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonRectangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonRectangleRounded) !== null && _a !== void 0 ? _a : (this._toolShapeButtonRectangleRounded = this.newToolShapeButtonRectangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonRectangleRounded = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonRectangleRoundedTitle(), \"shape_rectangle_rounded\", EShapeRectangleRounded);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonTriangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonTriangle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonTriangle = this.newToolShapeButtonTriangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonTriangle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonTriangleTitle(), \"shape_triangle\", EShapeTriangle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonTriangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonTriangleRounded) !== null && _a !== void 0 ? _a : (this._toolShapeButtonTriangleRounded = this.newToolShapeButtonTriangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonTriangleRounded = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonTriangleRoundedTitle(), \"shape_triangle_rounded\", EShapeTriangleRounded);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonLine) !== null && _a !== void 0 ? _a : (this._toolShapeButtonLine = this.newToolShapeButtonLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonLine = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonLineTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_line\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonLineActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonLineInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", function (shape) {\n            if (shape instanceof EShapeLine) {\n                var toolShapeEditLine = _this.toolShapeEditLine;\n                toolShapeEditLine.shape = shape;\n                _this.toolGroup.activate(toolShapeEditLine);\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineActive = function () {\n        this.toolGroup.activate(this.toolShapeCreateLine);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreateLine);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonPolygon\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonPolygon) !== null && _a !== void 0 ? _a : (this._toolShapeButtonPolygon = this.newToolShapeButtonPolygon()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonPolygon = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonPolygonTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_polygon\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonPolygonActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonPolygonInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", function (shape) {\n            if (shape instanceof EShapePolygon) {\n                var toolShapeEditPolygon = _this.toolShapeEditPolygon;\n                toolShapeEditPolygon.shape = shape;\n                _this.toolGroup.activate(toolShapeEditPolygon);\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonPolygonActive = function () {\n        this.toolGroup.activate(this.toolShapeCreatePolygon);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonPolygonInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreatePolygon);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeButtonLineConnector = this.newToolShapeButtonLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonLineConnector = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonLineConnectorTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_line_connector\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonLineConnectorActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonLineConnectorInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", function (shape) {\n            if (shape instanceof EShapeConnectorLine) {\n                var toolShapeEditLineConnector = _this.toolShapeEditLineConnector;\n                toolShapeEditLineConnector.shape = shape;\n                _this.toolGroup.activate(toolShapeEditLineConnector);\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineConnectorActive = function () {\n        this.toolGroup.activate(this.toolShapeCreateLineConnector);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineConnectorInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreateLineConnector);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonElbowConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonElbowConnector) !== null && _a !== void 0 ? _a : (this._toolShapeButtonElbowConnector = this.newToolShapeButtonElbowConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonElbowConnector = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonElbowConnectorTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_elbow_connector\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonElbowConnectorActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonElbowConnectorInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", function (shape) {\n            if (shape instanceof EShapeConnectorLine) {\n                var toolShapeEditLineConnector = _this.toolShapeEditLineConnector;\n                toolShapeEditLineConnector.shape = shape;\n                _this.toolGroup.activate(toolShapeEditLineConnector);\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonElbowConnectorActive = function () {\n        this.toolGroup.activate(this.toolShapeCreateElbowConnector);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonElbowConnectorInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreateElbowConnector);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonImage\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonImage) !== null && _a !== void 0 ? _a : (this._toolShapeButtonImage = this.newToolShapeButtonImage()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonImage = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButtonFile({\n            group: this.toolShapeButtonGroup,\n            title: theme.getToolShapeButtonImageTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            as: DButtonFileAs.DATA_URL,\n            image: {\n                source: this._icons.editor_image\n            },\n            on: {\n                open: function (dataUrl) {\n                    _this.onToolShapeButtonImageOpen(dataUrl);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolShapeButtonImageOpen = function (dataUrl) {\n        var _this = this;\n        var diagram = this.diagram;\n        var layer = diagram.layer;\n        var canvas = diagram.canvas;\n        if (canvas != null && layer != null) {\n            createImage(dataUrl).then(function (shape) {\n                shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                shape.attach(layer);\n                DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, _this.toolShapeSelect.selection, true));\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonGraphicPiece\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonGraphicPiece) !== null && _a !== void 0 ? _a : (this._toolShapeButtonGraphicPiece = this.newToolShapeButtonGraphicPiece()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonGraphicPiece = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            title: theme.getToolShapeButtonGraphicPieceTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.graphic_piece\n            },\n            on: {\n                active: function (emitter) {\n                    _this.onToolShapeButtonGraphicPieceActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolShapeButtonGraphicPieceActive = function (opener) {\n        this.dialogSelectPiece.then(function (dialogSelectPiece) {\n            dialogSelectPiece.open(opener);\n        });\n    };\n    FGraphicEditor.prototype.newToolShapeButtonExtensionFactory = function (factory) {\n        var _this = this;\n        var dialogSelect = null;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            title: this.toExtensionTitle(factory),\n            theme: this._theme.getToolShapeButtonTheme(),\n            image: {\n                source: factory.icon.texture\n            },\n            on: {\n                active: function (emitter) {\n                    (dialogSelect !== null && dialogSelect !== void 0 ? dialogSelect : (dialogSelect = _this.newDialogSelectExtensionFactory(factory))).open(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newToolShapeButtonExtension = function (extension) {\n        var _this = this;\n        var creatorOrTool = null;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            title: this.toExtensionTitle(extension),\n            theme: this._theme.getToolShapeButtonTheme(),\n            toggle: true,\n            image: {\n                source: extension.icon.texture\n            },\n            on: {\n                active: function () {\n                    if (creatorOrTool == null) {\n                        creatorOrTool = _this.toExtensionCreatorOrTool(extension);\n                    }\n                    _this.onToolShapeButtonExtensionActive(creatorOrTool);\n                },\n                inactive: function () {\n                    if (creatorOrTool == null) {\n                        creatorOrTool = _this.toExtensionCreatorOrTool(extension);\n                    }\n                    _this.onToolShapeButtonExtensionInactive(creatorOrTool);\n                }\n            }\n        });\n        if (\"type\" in extension) {\n            var updaterCreatorOrOptions_1 = extension.updater;\n            if (updaterCreatorOrOptions_1 != null) {\n                var type_1 = extension.type;\n                var updater_1 = null;\n                this.toolShapeSelect.on(\"edit\", function (shape) {\n                    if (shape.type === type_1) {\n                        if (updater_1 == null) {\n                            updater_1 = _this.toExtensionUpdater(updaterCreatorOrOptions_1);\n                        }\n                        updater_1.shape = shape;\n                        _this.toolGroup.activate(updater_1);\n                    }\n                });\n            }\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.toExtensionUpdater = function (updaterCreatorOrOptions) {\n        var _this = this;\n        var updaterCreator = isFunction(updaterCreatorOrOptions)\n            ? updaterCreatorOrOptions\n            : updaterCreatorOrOptions.tool;\n        var result = updaterCreator(this.toolShapeSelect.selection, this.diagram);\n        result.on(\"done\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        result.on(\"cancel\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.toExtensionCreatorOrTool = function (extension) {\n        var _this = this;\n        var creator = extension.creator;\n        if (isFunction(creator)) {\n            return creator;\n        }\n        else {\n            var result = creator.tool(this.toolShapeSelect.selection, this.diagram);\n            result.on(\"done\", function () {\n                _this.toolShapeButtonSelect.activate();\n            });\n            result.on(\"cancel\", function () {\n                _this.toolShapeButtonSelect.activate();\n            });\n            return result;\n        }\n    };\n    FGraphicEditor.prototype.onToolShapeButtonExtensionActive = function (creatorOrTool) {\n        var toolGroup = this.toolGroup;\n        if (isFunction(creatorOrTool)) {\n            var toolShapeCreate = this.toolShapeCreate;\n            toolShapeCreate.shape = creatorOrTool;\n            toolGroup.activate(toolShapeCreate, creatorOrTool);\n        }\n        else {\n            toolGroup.activate(creatorOrTool);\n        }\n    };\n    FGraphicEditor.prototype.onToolShapeButtonExtensionInactive = function (creatorOrTool) {\n        var toolGroup = this.toolGroup;\n        if (isFunction(creatorOrTool)) {\n            toolGroup.deactivate(this.toolShapeCreate, creatorOrTool);\n        }\n        else {\n            toolGroup.deactivate(creatorOrTool);\n        }\n    };\n    FGraphicEditor.prototype.toExtensionTitle = function (extension) {\n        var title = extension.title;\n        if (isString(title)) {\n            return title;\n        }\n        return title.create;\n    };\n    FGraphicEditor.prototype.newDialogSelectExtensionFactory = function (factory) {\n        var _this = this;\n        return new DDialogSelect({\n            controller: factory,\n            list: {\n                data: {\n                    toLabel: factory.item.toLabel\n                }\n            },\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectExtensionFactorySelect(value, factory);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onDialogSelectExtensionFactorySelect = function (value, factory) {\n        var _this = this;\n        var diagram = this.diagram;\n        var layer = diagram.layer;\n        var canvas = diagram.canvas;\n        if (canvas && layer) {\n            factory.item.toCreator(value).then(function (creator) {\n                var shape = creator();\n                shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                shape.attach(layer);\n                DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, _this.toolShapeSelect.selection, true));\n            });\n        }\n    };\n    FGraphicEditor.prototype.newToolFileButtons = function () {\n        return [\n            this.toolFileButtonCreate,\n            this.toolFileButtonOpen,\n            this.toolFileButtonSave,\n            this.toolFileButtonSaveAs,\n            this.toolFileButtonUpload,\n            this.toolFileButtonDownload,\n            this.toolFileButtonUndo,\n            this.toolFileButtonRedo,\n            this.toolFileButtonDelete\n        ];\n    };\n    FGraphicEditor.prototype.newToolShapeButtons = function () {\n        var result = [\n            this.toolShapeButtonSelect,\n            this.toolShapeButtonLine,\n            this.toolShapeButtonCircle,\n            this.toolShapeButtonSemicircle,\n            this.toolShapeButtonRectangle,\n            this.toolShapeButtonRectangleRounded,\n            this.toolShapeButtonTriangle,\n            this.toolShapeButtonTriangleRounded,\n            this.toolShapeButtonLineConnector,\n            this.toolShapeButtonElbowConnector,\n            this.toolShapeButtonPolygon,\n            this.toolShapeButtonImage\n        ];\n        if (this._isPieceEnabled) {\n            result.push(this.toolShapeButtonGraphicPiece);\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.newToolShapeButtonsExtension = function () {\n        var _this = this;\n        var result = [];\n        EShapeExtensions.each(function (extension) {\n            if (\"icon\" in extension) {\n                result.push(_this.newToolShapeButtonExtension(extension));\n            }\n        });\n        EShapeExtensionFactories.each(function (factory) {\n            result.push(_this.newToolShapeButtonExtensionFactory(factory));\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.getToolButtonLayoutContainer = function () {\n        return this._application.stage;\n    };\n    FGraphicEditor.prototype.newToolButtonLayout = function () {\n        var margin = this._margin;\n        return new DLayoutVertical({\n            x: margin,\n            y: this.getToolButtonLayoutY(margin),\n            theme: \"EButtonToolLayout\",\n            children: this.newToolButtons()\n        });\n    };\n    FGraphicEditor.prototype.getToolButtonLayoutY = function (margin) {\n        var header = this._header;\n        if (header != null) {\n            return margin + header.height + margin;\n        }\n        return margin;\n    };\n    FGraphicEditor.prototype.newToolButtons = function () {\n        var toolFileButtonCreate = this._toolFileButtonCreate;\n        if (toolFileButtonCreate == null || toolFileButtonCreate.parent == null) {\n            return this.newToolFileButtons()\n                .concat(new DLayoutSpace({ height: 10 }))\n                .concat(this.newToolShapeButtons())\n                .concat(this.newToolShapeButtonsExtension());\n        }\n        else {\n            return this.newToolShapeButtons().concat(this.newToolShapeButtonsExtension());\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonGroup) !== null && _a !== void 0 ? _a : (this._editorButtonGroup = this.newEditorButtonGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonGroup = function () {\n        return undefined;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonCoordinate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonCoordinate) !== null && _a !== void 0 ? _a : (this._editorButtonCoordinate = this.newEditorButtonCoordinate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonCoordinate = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_coordinate\n            },\n            title: theme.getEditorButtonCoordinateTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorCoordinate.show();\n                },\n                inactive: function () {\n                    _this.editorCoordinate.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorCoordinate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorCoordinate) !== null && _a !== void 0 ? _a : (this._editorCoordinate = this.newEditorCoordinate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorCoordinate = function () {\n        return this.initEditor(0, new EEditorCoordinate({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    };\n    FGraphicEditor.prototype.initEditor = function (zIndex, editor) {\n        editor.zIndex = zIndex;\n        editor.parent.sortChildren();\n        editor.interactive = true;\n        if (editor instanceof DBase) {\n            editor.state.isFocusable = false;\n        }\n        return editor;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonShape\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonShape) !== null && _a !== void 0 ? _a : (this._editorButtonShape = this.newEditorButtonShape()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonShape = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_shape\n            },\n            title: theme.getEditorButtonShapeTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorShape.show();\n                },\n                inactive: function () {\n                    _this.editorShape.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorShape\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorShape) !== null && _a !== void 0 ? _a : (this._editorShape = this.newEditorShape()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorShape = function () {\n        var _this = this;\n        return this.initEditor(1, new EEditorShape({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            canvas: this._canvas,\n            content: {\n                theme: \"EEditorPaneContent\"\n            },\n            piece: {\n                enable: this._isPieceEnabled,\n                controller: this._options.controller,\n                exclude: function () {\n                    return _this._toPieceId(_this.diagram);\n                }\n            },\n            connector: {\n                dangling: this.isDanglingConnectorAllowed()\n            }\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonText\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonText) !== null && _a !== void 0 ? _a : (this._editorButtonText = this.newEditorButtonText()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonText = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_text\n            },\n            title: theme.getEditorButtonTextTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorText.show();\n                },\n                inactive: function () {\n                    _this.editorText.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorText\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorText) !== null && _a !== void 0 ? _a : (this._editorText = this.newEditorText()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorText = function () {\n        return this.initEditor(2, new EEditorText({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            content: {\n                theme: \"EEditorPaneContent\"\n            }\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonData\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonData) !== null && _a !== void 0 ? _a : (this._editorButtonData = this.newEditorButtonData()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonData = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_data\n            },\n            title: theme.getEditorButtonDataTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorData.show();\n                },\n                inactive: function () {\n                    _this.editorData.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorData\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorData) !== null && _a !== void 0 ? _a : (this._editorData = this.newEditorData()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorData = function () {\n        return this.initEditor(3, new EEditorData({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonDataMapping\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonDataMapping) !== null && _a !== void 0 ? _a : (this._editorButtonDataMapping = this.newEditorButtonDataMapping()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonDataMapping = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_data_mapping\n            },\n            title: theme.getEditorButtonDataMappingTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorDataMapping.show();\n                },\n                inactive: function () {\n                    _this.editorDataMapping.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorDataMapping\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorDataMapping) !== null && _a !== void 0 ? _a : (this._editorDataMapping = this.newEditorDataMapping()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorDataMapping = function () {\n        return this.initEditor(4, new EEditorDataMapping({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonAction\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonAction) !== null && _a !== void 0 ? _a : (this._editorButtonAction = this.newEditorButtonAction()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonAction = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_action\n            },\n            title: theme.getEditorButtonActionTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorAction.show();\n                },\n                inactive: function () {\n                    _this.editorAction.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorAction\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorAction) !== null && _a !== void 0 ? _a : (this._editorAction = this.newEditorAction()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorAction = function () {\n        return this.initEditor(5, new EEditorAction({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonTree\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonTree) !== null && _a !== void 0 ? _a : (this._editorButtonTree = this.newEditorButtonTree()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonTree = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_tree\n            },\n            title: theme.getEditorButtonTreeTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorTree.show();\n                },\n                inactive: function () {\n                    _this.editorTree.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorTree\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorTree) !== null && _a !== void 0 ? _a : (this._editorTree = this.newEditorTree()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorTree = function () {\n        return this.initEditor(6, new EEditorTree({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonLayer) !== null && _a !== void 0 ? _a : (this._editorButtonLayer = this.newEditorButtonLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonLayer = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_layer\n            },\n            title: theme.getEditorButtonLayerTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorLayer.show();\n                },\n                inactive: function () {\n                    _this.editorLayer.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorLayer) !== null && _a !== void 0 ? _a : (this._editorLayer = this.newEditorLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorLayer = function () {\n        return this.initEditor(7, new EEditorLayer({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonSnap\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonSnap) !== null && _a !== void 0 ? _a : (this._editorButtonSnap = this.newEditorButtonSnap()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonSnap = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_snap\n            },\n            title: theme.getEditorButtonSnapTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorSnap.show();\n                },\n                inactive: function () {\n                    _this.editorSnap.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorSnap\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorSnap) !== null && _a !== void 0 ? _a : (this._editorSnap = this.newEditorSnap()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorSnap = function () {\n        return this.initEditor(8, new EEditorSnap({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonValidation\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonValidation) !== null && _a !== void 0 ? _a : (this._editorButtonValidation = this.newEditorButtonValidation()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonValidation = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_validation\n            },\n            title: theme.getEditorButtonValidationTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorValidation.show();\n                },\n                inactive: function () {\n                    _this.editorValidation.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorValidation\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorValidation) !== null && _a !== void 0 ? _a : (this._editorValidation = this.newEditorValidation()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorValidation = function () {\n        return this.initEditor(9, new EEditorValidation({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram,\n            validator: this._validation.validator\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonSearch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonSearch) !== null && _a !== void 0 ? _a : (this._editorButtonSearch = this.newEditorButtonSearch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonSearch = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_search\n            },\n            title: theme.getEditorButtonSearchTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorSearch.show();\n                },\n                inactive: function () {\n                    _this.editorSearch.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorSearch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorSearch) !== null && _a !== void 0 ? _a : (this._editorSearch = this.newEditorSearch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorSearch = function () {\n        return this.initEditor(9, new EEditorSearch({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram,\n            finder: this._search.finder,\n            interval: this._search.interval\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorCanvas\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorCanvas) !== null && _a !== void 0 ? _a : (this._editorCanvas = this.newEditorCanvas()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorCanvas = function () {\n        return new EEditorCanvas({\n            icons: this._icons,\n            diagram: this.diagram,\n            canvas: this._canvas\n        });\n    };\n    FGraphicEditor.prototype.isEditorCanvasCompatible = function () {\n        var _a, _b;\n        return !!((_b = (_a = this._options.compatibility) === null || _a === void 0 ? void 0 : _a.editor) === null || _b === void 0 ? void 0 : _b.canvas);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonCanvasLegacy\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonCanvasLegacy) !== null && _a !== void 0 ? _a : (this._editorButtonCanvasLegacy = this.newEditorButtonCanvasLegacy()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonCanvasLegacy = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_canvas_legacy\n            },\n            title: theme.getEditorButtonCanvasLegacyTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorCanvasLegacy.show();\n                },\n                inactive: function () {\n                    _this.editorCanvasLegacy.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorCanvasLegacy\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorCanvasLegacy) !== null && _a !== void 0 ? _a : (this._editorCanvasLegacy = this.newEditorCanvasLegacy()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorCanvasLegacy = function () {\n        return this.initEditor(10, new EEditorCanvasLegacy({\n            parent: this.editorContainer,\n            diagram: this.diagram,\n            canvas: this._canvas,\n            content: {\n                theme: \"EEditorPaneContent\"\n            }\n        }));\n    };\n    FGraphicEditor.prototype.newEditorButtonExtension = function (extension, editor) {\n        var _this = this;\n        var editorInstance = null;\n        var result = new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: extension.icon.texture\n            },\n            title: editor.title,\n            theme: this._theme.getEditorButtonTheme(),\n            visible: false,\n            on: {\n                active: function () {\n                    editorInstance !== null && editorInstance !== void 0 ? editorInstance : (editorInstance = _this.newEditorExtension(editor));\n                    editorInstance.show();\n                },\n                inactive: function () {\n                    if (editorInstance) {\n                        editorInstance.hide();\n                    }\n                }\n            }\n        });\n        var selection = this.toolShapeSelect.selection;\n        selection.on(\"change\", function () {\n            _this.onEditorButtonExtensionSelectionChange(result, extension.type);\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.newEditorExtension = function (editor) {\n        return this.initEditor(11, new editor.constructor({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            icons: this._icons,\n            content: {\n                theme: \"EEditorPaneContent\"\n            },\n            theme: editor.theme\n        }));\n    };\n    FGraphicEditor.prototype.onEditorButtonExtensionSelectionChange = function (button, extensionType) {\n        var selection = this.toolShapeSelect.selection;\n        var last = selection.last();\n        var buttonLast = this._editorButtonExtensionLast;\n        if (last != null && last.type === extensionType && buttonLast !== button) {\n            var wasActive = false;\n            if (buttonLast != null) {\n                buttonLast.hide();\n                if (buttonLast.state.isActive) {\n                    buttonLast.activate();\n                    wasActive = true;\n                }\n            }\n            button.show();\n            this._editorButtonExtensionLast = button;\n            if (wasActive && !button.state.isActive) {\n                button.activate();\n            }\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonZoomOut\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonZoomOut) !== null && _a !== void 0 ? _a : (this._viewButtonZoomOut = this.newViewButtonZoomOut()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonZoomOut = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomOut();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonZoomIn\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonZoomIn) !== null && _a !== void 0 ? _a : (this._viewButtonZoomIn = this.newViewButtonZoomIn()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonZoomIn = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomIn();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonDragAndPinch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonDragAndPinch) !== null && _a !== void 0 ? _a : (this._viewButtonDragAndPinch = this.newViewButtonDragAndPinch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonDragAndPinch = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.camera\n            },\n            toggle: true,\n            title: theme.getViewButtonDragAndPinchTitle(),\n            shortcut: theme.getViewButtonDragAndPinchShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.toolGroup.suspend();\n                },\n                inactive: function () {\n                    _this.toolGroup.resume();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonReset\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonReset) !== null && _a !== void 0 ? _a : (this._viewButtonReset = this.newViewButtonReset()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonReset = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.reset();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonFit\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonFit) !== null && _a !== void 0 ? _a : (this._viewButtonFit = this.newViewButtonFit()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonFit = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.fit();\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newEditorButtons = function () {\n        var _this = this;\n        var result = [\n            this.editorButtonCoordinate,\n            this.editorButtonShape,\n            this.editorButtonText,\n            this.editorButtonData,\n            this.editorButtonDataMapping,\n            this.editorButtonAction,\n            this.editorButtonTree,\n            this.editorButtonLayer,\n            this.editorButtonSnap\n        ];\n        if (this._validation.validator != null) {\n            result.push(this.editorButtonValidation);\n        }\n        result.push(this.editorButtonSearch);\n        if (this.isEditorCanvasCompatible()) {\n            result.push(this.editorButtonCanvasLegacy);\n        }\n        EShapeExtensions.each(function (extension) {\n            if (\"editor\" in extension) {\n                var editor = _this.toEditorExtentionConstructorOptions(extension);\n                if (editor) {\n                    result.push(_this.newEditorButtonExtension(extension, editor));\n                }\n            }\n        });\n        result.push(new DLayoutSpace({\n            weight: 1\n        }), this.viewButtonZoomOut, this.viewButtonZoomIn, this.viewButtonDragAndPinch, this.viewButtonReset, this.viewButtonFit);\n        return result;\n    };\n    FGraphicEditor.prototype.toEditorExtentionConstructorOptions = function (extension) {\n        var _a, _b;\n        var editor = extension.editor;\n        if (isFunction(editor)) {\n            return {\n                constructor: editor,\n                title: extension.name || \"\",\n                theme: \"EEditorPane\"\n            };\n        }\n        else if (editor.constructor) {\n            return {\n                constructor: editor.constructor,\n                title: (_a = editor.title) !== null && _a !== void 0 ? _a : (extension.name || \"\"),\n                theme: (_b = editor.theme) !== null && _b !== void 0 ? _b : \"EEditorPane\"\n            };\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorContainer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorContainer) !== null && _a !== void 0 ? _a : (this._editorContainer = this.newEditorContainer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorContainer = function () {\n        return new DLayoutHorizontal({\n            width: \"auto\",\n            height: \"padding\"\n        });\n    };\n    FGraphicEditor.prototype.getEditorLayoutContainer = function () {\n        return this._application.stage;\n    };\n    FGraphicEditor.prototype.newEditorLayout = function () {\n        var _this = this;\n        var margin = this._margin;\n        var y = this.getToolButtonLayoutY(margin);\n        return new DLayoutHorizontal({\n            x: function (p, s) { return p - s - margin; },\n            y: y,\n            width: \"auto\",\n            height: function (p) { return p - y - margin; },\n            theme: \"EEditorLayout\",\n            children: [this.editorContainer, this.newEditorButtonLayout()],\n            on: {\n                resize: function (width, height) {\n                    _this.onEditorLayoutResized(width, height);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newEditorButtonLayout = function () {\n        return new DLayoutVertical({\n            theme: \"EEditorButtonLayout\",\n            children: this.newEditorButtons()\n        });\n    };\n    FGraphicEditor.prototype.onEditorLayoutResized = function (width, height) {\n        // The tool layout width is `margin + 65`.\n        // The editor layout width is `width`.\n        // Therefore here shifts the diagram `(margin + 65 - width) * 0.5` along the X axis.\n        var diagram = this.diagram;\n        var theme = diagram.theme;\n        var padding = diagram.padding;\n        var margin = this._margin;\n        var os = padding.getLeft() - padding.getRight();\n        padding.left = theme.getPaddingLeft() + margin + 65;\n        padding.right = theme.getPaddingRight() + margin + width;\n        var canvas = diagram.canvas;\n        if (canvas != null) {\n            var ns = padding.getLeft() - padding.getRight();\n            canvas.position.x += (ns - os) * 0.5;\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeSelect\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeSelect) !== null && _a !== void 0 ? _a : (this._toolShapeSelect = this.newToolShapeSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeSelect = function () {\n        var diagram = this.diagram;\n        var result = new EToolSelect({ diagram: diagram });\n        diagram.on(\"set\", function () {\n            result.selection.clear();\n        });\n        diagram.on(\"unset\", function () {\n            result.selection.clear();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreate) !== null && _a !== void 0 ? _a : (this._toolShapeCreate = this.newToolShapeCreate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreate = function () {\n        var _this = this;\n        var result = new EToolShapeCreate(this.toolShapeSelect.selection, this.diagram);\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreateLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreateLine) !== null && _a !== void 0 ? _a : (this._toolShapeCreateLine = this.newToolShapeCreateLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreateLine = function () {\n        var _this = this;\n        var result = new EToolShapeCreateLine({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreatePolygon\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreatePolygon) !== null && _a !== void 0 ? _a : (this._toolShapeCreatePolygon = this.newToolShapeCreatePolygon()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreatePolygon = function () {\n        var _this = this;\n        var result = new EToolShapeCreatePolygon({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreateLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreateLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeCreateLineConnector = this.newToolShapeCreateLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreateLineConnector = function () {\n        var _this = this;\n        var result = new EToolShapeCreateLineConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreateElbowConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreateElbowConnector) !== null && _a !== void 0 ? _a : (this._toolShapeCreateElbowConnector = this.newToolShapeCreateElbowConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreateElbowConnector = function () {\n        var _this = this;\n        var result = new EToolShapeCreateElbowConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.isDanglingConnectorAllowed = function () {\n        var _a;\n        return (_a = this._options.connector) === null || _a === void 0 ? void 0 : _a.dangling;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeEditLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeEditLine) !== null && _a !== void 0 ? _a : (this._toolShapeEditLine = this.newToolShapeEditLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeEditLine = function () {\n        var _this = this;\n        var result = new EToolShapeEditLine({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        result.on(\"cancel\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeEditPolygon\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeEditPolygon) !== null && _a !== void 0 ? _a : (this._toolShapeEditPolygon = this.newToolShapeEditPolygon()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeEditPolygon = function () {\n        var _this = this;\n        var result = new EToolShapeEditPolygon({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        result.on(\"cancel\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeEditLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeEditLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeEditLineConnector = this.newToolShapeEditLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeEditLineConnector = function () {\n        var _this = this;\n        var result = new EToolShapeEditLineConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        result.on(\"cancel\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolGroup) !== null && _a !== void 0 ? _a : (this._toolGroup = this.newToolGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolGroup = function () {\n        return new EToolGroupImpl();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"diagram\", {\n        get: function () {\n            var _a;\n            return ((_a = this._diagram) !== null && _a !== void 0 ? _a : (this._diagram = this.newDiagram()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDiagram = function () {\n        return new DDiagramEditor(this.toDiagramOptions(this._options));\n    };\n    FGraphicEditor.prototype.getDiagramContainer = function () {\n        return this._application.stage;\n    };\n    FGraphicEditor.prototype.toDiagramOptions = function (options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6;\n        var result = options.diagram || {};\n        // Controller\n        (_a = result.controller) !== null && _a !== void 0 ? _a : (result.controller = this._controller.graphic);\n        // Coordinate\n        (_b = result.x) !== null && _b !== void 0 ? _b : (result.x = 0);\n        (_c = result.y) !== null && _c !== void 0 ? _c : (result.y = 0);\n        (_d = result.width) !== null && _d !== void 0 ? _d : (result.width = \"100%\");\n        (_e = result.height) !== null && _e !== void 0 ? _e : (result.height = \"100%\");\n        // Outline\n        var outline = ((_f = result.outline) !== null && _f !== void 0 ? _f : (result.outline = {}));\n        (_g = outline.color) !== null && _g !== void 0 ? _g : (outline.color = null);\n        // View settings\n        var view = ((_h = result.view) !== null && _h !== void 0 ? _h : (result.view = {}));\n        var gesture = ((_j = view.gesture) !== null && _j !== void 0 ? _j : (view.gesture = {}));\n        (_k = gesture.modifier) !== null && _k !== void 0 ? _k : (gesture.modifier = UtilGestureModifier.ALT);\n        var checker = ((_l = gesture.checker) !== null && _l !== void 0 ? _l : (gesture.checker = {}));\n        (_m = checker.start) !== null && _m !== void 0 ? _m : (checker.start = function (e, modifier) {\n            return UtilGestureModifiers.match(e, modifier) || _this.toolGroup.isSuspended();\n        });\n        (_o = checker.move) !== null && _o !== void 0 ? _o : (checker.move = function (e, modifier) {\n            return UtilGestureModifiers.match(e, modifier) || _this.diagram.state.isGesturing;\n        });\n        var zoom = ((_p = view.zoom) !== null && _p !== void 0 ? _p : (view.zoom = {}));\n        var dblclick = ((_q = zoom.dblclick) !== null && _q !== void 0 ? _q : (zoom.dblclick = {}));\n        (_r = dblclick.checker) !== null && _r !== void 0 ? _r : (dblclick.checker = function (e, modifier) {\n            return _this.toolGroup.isSuspended();\n        });\n        var viewOn = ((_s = view.on) !== null && _s !== void 0 ? _s : (view.on = {}));\n        (_t = viewOn.gesturestart) !== null && _t !== void 0 ? _t : (viewOn.gesturestart = function () {\n            _this.onDiagramViewOnStart();\n        });\n        (_u = viewOn.transformstart) !== null && _u !== void 0 ? _u : (viewOn.transformstart = function () {\n            _this.onDiagramViewOnStart();\n        });\n        (_v = viewOn.wheeltranslationstart) !== null && _v !== void 0 ? _v : (viewOn.wheeltranslationstart = function () {\n            _this.onDiagramViewOnStart();\n        });\n        (_w = view.constraint) !== null && _w !== void 0 ? _w : (view.constraint = function (target, x, y, scaleX, scaleY) {\n            _this.onDiagramViewConstraint(target, x, y, scaleX, scaleY);\n        });\n        // Thumbnail settings\n        var thumbnail = result.thumbnail;\n        if (thumbnail === null || thumbnail === void 0 ? void 0 : thumbnail.enable) {\n            (_x = thumbnail.size) !== null && _x !== void 0 ? _x : (thumbnail.size = getDialogSelectThumbnailSize() * 2);\n        }\n        // Event settings\n        var on = ((_y = result.on) !== null && _y !== void 0 ? _y : (result.on = {}));\n        (_z = on.saving) !== null && _z !== void 0 ? _z : (on.saving = function () {\n            _this.onDiagramSaving(_this._toolFileButtonSave);\n        });\n        (_0 = on.saved) !== null && _0 !== void 0 ? _0 : (on.saved = function (reason) {\n            _this.onDiagramSaved(reason, _this._toolFileButtonSave);\n        });\n        (_1 = on.deleting) !== null && _1 !== void 0 ? _1 : (on.deleting = function () {\n            _this.onDiagramDeleting(_this._toolFileButtonDelete);\n        });\n        (_2 = on.deleted) !== null && _2 !== void 0 ? _2 : (on.deleted = function (reason) {\n            _this.onDiagramDeleted(reason, _this._toolFileButtonDelete);\n        });\n        // Snapshot event settings\n        var snapshot = ((_3 = result.snapshot) !== null && _3 !== void 0 ? _3 : (result.snapshot = {}));\n        var snapshotOn = ((_4 = snapshot.on) !== null && _4 !== void 0 ? _4 : (snapshot.on = {}));\n        (_5 = snapshotOn.taking) !== null && _5 !== void 0 ? _5 : (snapshotOn.taking = function () {\n            _this.onDiagramSnapshotTaking();\n        });\n        (_6 = snapshotOn.took) !== null && _6 !== void 0 ? _6 : (snapshotOn.took = function () {\n            _this.onDiagramSnapshotTook();\n        });\n        // Done\n        return result;\n    };\n    FGraphicEditor.prototype.onDiagramViewOnStart = function () {\n        var _a, _b;\n        var diagram = this._diagram;\n        if (diagram != null) {\n            var d = ((_a = this._localBoundsDiagram) !== null && _a !== void 0 ? _a : (this._localBoundsDiagram = new Rectangle()));\n            var p = diagram.padding;\n            var l = p.getLeft() - 65 - this._margin;\n            var t = p.getTop();\n            var r = diagram.width - p.getRight();\n            var b = diagram.height - p.getBottom();\n            d.x = l;\n            d.y = t;\n            d.width = Math.max(0, r - l);\n            d.height = Math.max(0, b - t);\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var c = ((_b = this._localBoundsCanvas) !== null && _b !== void 0 ? _b : (this._localBoundsCanvas = new Rectangle()));\n                canvas.getLocalBounds(c);\n            }\n        }\n    };\n    FGraphicEditor.prototype.onDiagramViewConstraint = function (target, x, y, sx, sy) {\n        var d = this._localBoundsDiagram;\n        var c = this._localBoundsCanvas;\n        if (d != null && c != null) {\n            target.position.set(Math.max(d.x - (c.x + c.width) * sx, Math.min(d.x + d.width - c.x * sx, x)), Math.max(d.y - (c.y + c.height) * sy, Math.min(d.y + d.height - c.y * sy, y)));\n            target.scale.set(sx, sy);\n        }\n    };\n    FGraphicEditor.prototype.onDiagramSaving = function (opener) {\n        this.dialogSaveProcessing.open(opener);\n    };\n    FGraphicEditor.prototype.onDiagramSaved = function (reason, opener) {\n        var _this = this;\n        var dialogSaveProcessing = this.dialogSaveProcessing;\n        if (reason == null) {\n            dialogSaveProcessing.resolve();\n        }\n        else {\n            if (reason === \"duplication\") {\n                dialogSaveProcessing.once(\"close\", function () {\n                    _this.dialogSaveAs.open(opener);\n                });\n            }\n            dialogSaveProcessing.reject(reason);\n        }\n    };\n    FGraphicEditor.prototype.onDiagramDeleting = function (opener) {\n        this.dialogDeleteProcessing.open(opener);\n    };\n    FGraphicEditor.prototype.onDiagramDeleted = function (reason, opener) {\n        var dialogDeleteProcessing = this.dialogDeleteProcessing;\n        if (reason == null) {\n            dialogDeleteProcessing.resolve();\n        }\n        else {\n            dialogDeleteProcessing.reject(reason);\n        }\n    };\n    FGraphicEditor.prototype.onDiagramSnapshotTaking = function () {\n        this.toolShapeSelect.selection.modifier.renderable = false;\n    };\n    FGraphicEditor.prototype.onDiagramSnapshotTook = function () {\n        this.toolShapeSelect.selection.modifier.renderable = true;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSaveProcessing\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSaveProcessing) !== null && _a !== void 0 ? _a : (this._dialogSaveProcessing = this.newDialogSaveProcessing()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSaveProcessing = function () {\n        return new EDialogProcessing();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogDeleteProcessing\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogDeleteProcessing) !== null && _a !== void 0 ? _a : (this._dialogDeleteProcessing = this.newDialogDeleteProcessing()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogDeleteProcessing = function () {\n        return new EDialogProcessing();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSaveAs\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSaveAs) !== null && _a !== void 0 ? _a : (this._dialogSaveAs = this.newDialogSaveAs()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSaveAs = function () {\n        return new DDialogSaveAs();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogCreate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogCreate) !== null && _a !== void 0 ? _a : (this._dialogCreate = this.newDialogCreate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogCreate = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            return new EDialogCanvas({\n                canvas: canvas,\n                on: {\n                    ok: function (value, emitter) {\n                        _this.onDialogCreateOk(value, emitter);\n                    }\n                }\n            });\n        });\n    };\n    FGraphicEditor.prototype.onDialogCreateOk = function (value, opener) {\n        var _this = this;\n        this.diagram.create(value).then(function (canvas) {\n            DControllers.getCommandController().push(new ECommandDocumentCreate(_this.diagram, canvas));\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogDiscard\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogDiscard) !== null && _a !== void 0 ? _a : (this._dialogDiscard = this.newDialogDiscard()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogDiscard = function () {\n        return new DDialogConfirmDiscard();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSelect\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSelect) !== null && _a !== void 0 ? _a : (this._dialogSelect = this.newDialogSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSelect = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            var _a, _b;\n            if ((_b = (_a = _this._options.diagram) === null || _a === void 0 ? void 0 : _a.thumbnail) === null || _b === void 0 ? void 0 : _b.enable) {\n                var result = _this.newDialogSelectImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectNoImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this._controller.graphic,\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onDialogSelectSelect = function (value) {\n        var _this = this;\n        this.diagram.open(value.id).then(function (canvas) {\n            DControllers.getCommandController().push(new ECommandDocumentOpen(_this.diagram, canvas));\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectImage = function () {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this._options.controller.graphic, this._controller.toThumbnail, function (value) {\n            _this.onDialogSelectSelect(value);\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSelectPiece\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSelectPiece) !== null && _a !== void 0 ? _a : (this._dialogSelectPiece = this.newDialogSelectPiece()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSelectPiece = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            var _a, _b;\n            if ((_b = (_a = _this._options.diagram) === null || _a === void 0 ? void 0 : _a.thumbnail) === null || _b === void 0 ? void 0 : _b.enable) {\n                var result = _this.newDialogSelectPieceImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectPieceNoImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectPieceNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this.newDialogSelectPieceController(),\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectPieceSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectPieceImage = function () {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this.newDialogSelectPieceController(), this._options.controller.toPieceThumbnail, function (value) {\n            _this.onDialogSelectPieceSelect(value);\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectPieceController = function () {\n        var _this = this;\n        var graphicPiece = this._options.controller.graphic.piece;\n        return {\n            search: function (word, categoryId) {\n                if (categoryId === undefined) {\n                    return graphicPiece.search(word).then(function (pieces) {\n                        return _this.toDialogSelectPieceResult(pieces);\n                    });\n                }\n                else {\n                    return graphicPiece.search(word, categoryId).then(function (pieces) {\n                        return _this.toDialogSelectPieceResult(pieces);\n                    });\n                }\n            }\n        };\n    };\n    FGraphicEditor.prototype.toDialogSelectPieceResult = function (targets) {\n        var pieceId = this._toPieceId(this.diagram);\n        if (pieceId == null) {\n            return targets;\n        }\n        var result = [];\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (target.id !== pieceId) {\n                result.push(target);\n            }\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onDialogSelectPieceSelect = function (value) {\n        var _this = this;\n        var diagram = this.diagram;\n        var layer = diagram.layer;\n        var canvas = diagram.canvas;\n        if (canvas && layer) {\n            var graphic_1 = this._options.controller.graphic;\n            graphic_1.piece.get(value.id).then(function (serialized) {\n                EShapeEmbeddeds.from(serialized, graphic_1, EShapeResourceManagerDeserializationMode.EDITOR).then(function (shape) {\n                    shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                    shape.attach(layer);\n                    DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, _this.toolShapeSelect.selection, true));\n                });\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogDelete) !== null && _a !== void 0 ? _a : (this._dialogDelete = this.newDialogDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogDelete = function () {\n        var _this = this;\n        return new DDialogConfirmDelete({\n            on: {\n                ok: function (value, emitter) {\n                    _this.onDialogDeleteOk(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onDialogDeleteOk = function (opener) {\n        this.diagram.delete().then(function () {\n            DControllers.getCommandController().clear();\n        });\n    };\n    FGraphicEditor.prototype.toTheme = function (options) {\n        var theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    };\n    FGraphicEditor.prototype.getThemeDefault = function () {\n        return DThemes.getInstance().get(this.getType());\n    };\n    FGraphicEditor.prototype.getType = function () {\n        return \"FGraphicEditor\";\n    };\n    return FGraphicEditor;\n}());\nexport { FGraphicEditor };\n//# sourceMappingURL=f-graphic-editor.js.map","import { DApplication, DApplications, DBoard, DButton, DButtonFile, DButtonFileAs, DDiagram, DDiagrams, DDialogConfirmDelete, DDialogConfirmDiscard, DDialogInputText, DDialogSelect, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DTable, EShapeBase, EShapeCapabilities, EShapeCapability, UtilFileDownloader, UtilGestureModifier, UtilGestureModifiers, UtilKeyboardEvent, UtilPointerEvent, DInputSearch, EShapeEmbedded, DThemes, isString } from \"@wcardinal/wcardinal-ui\";\nimport { Point, Rectangle } from \"pixi.js\";\nimport { newGraphicTester } from \"./data/new-graphic-tester\";\nimport { toGraphicTesterObject } from \"./data/to-graphic-tester-object\";\nimport { toGraphicTesterSerialized } from \"./data/to-graphic-tester-serialized\";\nimport { toGraphicTesterSimple } from \"./data/to-graphic-tester-simple\";\nimport { EDialogProcessing } from \"./editor/e-dialog-processing\";\nimport { newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { EToolSelectArea } from \"./tool/e-tool-select-area\";\nimport { EToolSelectSelection } from \"./tool/e-tool-select-selection\";\nimport { UtilCsv } from \"./util/util-csv\";\nimport { UtilDate } from \"./util/util-date\";\nimport { UtilShapeAreaSelect } from \"./util/util-shape-area-select\";\nimport { UtilHitTest } from \"./util/util-hit-test\";\nimport { UtilCanvasCategory } from \"./util/util-canvas-category\";\nimport { UtilShapeSearch } from \"./util/util-shape-search\";\nvar FGraphicTester = /** @class */ (function () {\n    function FGraphicTester(options) {\n        var _this = this;\n        var _a, _b;\n        this._options = options;\n        var theme = this.toTheme(options);\n        this._theme = theme;\n        this._controller = options.controller;\n        this._category = new UtilCanvasCategory((_a = options.canvas) === null || _a === void 0 ? void 0 : _a.category);\n        this._icons = theme.getIconBuilder().build();\n        var margin = (_b = options.margin) !== null && _b !== void 0 ? _b : theme.getMargin();\n        this._margin = margin;\n        this._isEditable = options.editable !== false;\n        this._isChanged = false;\n        this._onDiagramMoveBound = function (e) {\n            _this.onDiagramMove(e);\n        };\n        this._onDiagramUpBound = function (e) {\n            _this.onDiagramUp(e);\n        };\n        this._onDiagramDownPoint = new Point();\n        this._onDiagramMovePoint = new Point();\n        this._selectAreaRect = new Rectangle();\n        this._selectMode = 0 /* EToolSelectMode.NONE */;\n        this._childSelectTime = 0;\n        this._childSelectChild = null;\n        this._isSelectSuspended = false;\n        this._expressionMap = new Map();\n        this._appliedValues = new Map();\n        this._isMappingsDirty = false;\n        // Application\n        var application = new DApplication(options.application);\n        this._application = application;\n        // Panes\n        application.stage.addChild(this.newPanes(options));\n        this.onChange();\n        var onMappingsChangeBound = function () {\n            if (_this._isMappingsDirty) {\n                _this._isMappingsDirty = false;\n                _this.onMappingsChange();\n            }\n            setTimeout(onMappingsChangeBound, 100);\n        };\n        onMappingsChangeBound();\n    }\n    Object.defineProperty(FGraphicTester.prototype, \"application\", {\n        get: function () {\n            return this._application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"controller\", {\n        get: function () {\n            return this._controller;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newHeader = function (options) {\n        var header = options.header;\n        if (header) {\n            var result = header();\n            if (result) {\n                var margin = this._margin;\n                result.x = margin;\n                result.y = margin;\n                result.setWidth(function (p) { return p; });\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicTester.prototype.newPanes = function (options) {\n        var margin = this._margin;\n        return new DLayoutVertical({\n            x: margin,\n            y: margin,\n            width: function (p) { return p - 2 * margin; },\n            height: function (p) { return p - 2 * margin; },\n            margin: margin,\n            children: [\n                this.newHeader(options),\n                new DLayoutHorizontal({\n                    weight: 1,\n                    width: \"padding\",\n                    margin: this._margin * 0.5,\n                    children: [this.leftPane, this.rightPane]\n                })\n            ]\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"leftPane\", {\n        get: function () {\n            var result = this._paneLeft;\n            if (result == null) {\n                result = this.newLeftPane();\n                this._paneLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newLeftPane = function () {\n        return new DBoard({\n            weight: 1,\n            height: \"padding\",\n            shadow: \"WEAK\",\n            children: [this.diagram, this.toolFileButtonGraphicOpen, this.layoutViewButton]\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonGraphicOpen\", {\n        get: function () {\n            var result = this._toolFileButtonGraphicOpen;\n            if (result == null) {\n                result = this.newToolFileButtonGraphicOpen();\n                this._toolFileButtonGraphicOpen = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonGraphicOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        var margin = this._margin * 0.5;\n        return new DButton({\n            x: margin,\n            y: margin,\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonGraphicOpenTitle(),\n            shortcut: theme.getToolFileButtonGraphicOpenShortcut(),\n            theme: theme.getToolFileButtonGraphicTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonGraphicOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonGraphicOpenActive = function (opener) {\n        var _this = this;\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogSelectGraphic.then(function (dialogSelectGraphic) {\n                    dialogSelectGraphic.open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogSelectGraphic.then(function (dialogSelectGraphic) {\n                dialogSelectGraphic.open(opener);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"layoutViewButton\", {\n        get: function () {\n            var result = this._layoutViewButton;\n            if (result == null) {\n                result = this.newLayoutViewButton();\n                this._layoutViewButton = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newLayoutViewButton = function () {\n        var margin = this._margin * 0.5;\n        var position = function (p, s) { return p - s - margin; };\n        return new DLayoutHorizontal({\n            x: position,\n            y: position,\n            width: \"auto\",\n            height: \"auto\",\n            margin: 0,\n            padding: 0,\n            children: this.newViewButtons()\n        });\n    };\n    FGraphicTester.prototype.newViewButtons = function () {\n        return [\n            this.viewButtonZoomOut,\n            this.viewButtonZoomIn,\n            this.viewButtonDragAndPinch,\n            this.viewButtonReset,\n            this.viewButtonFit\n        ];\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonZoomOut\", {\n        get: function () {\n            var result = this._viewButtonZoomOut;\n            if (result == null) {\n                result = this.newViewButtonZoomOut();\n                this._viewButtonZoomOut = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonZoomOut = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomOut();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonZoomIn\", {\n        get: function () {\n            var result = this._viewButtonZoomIn;\n            if (result == null) {\n                result = this.newViewButtonZoomIn();\n                this._viewButtonZoomIn = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonZoomIn = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomIn();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonReset\", {\n        get: function () {\n            var result = this._viewButtonReset;\n            if (result == null) {\n                result = this.newViewButtonReset();\n                this._viewButtonReset = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonReset = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.reset();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonDragAndPinch\", {\n        get: function () {\n            var result = this._viewButtonDragAndPinch;\n            if (result == null) {\n                result = this.newViewButtonDragAndPinch();\n                this._viewButtonDragAndPinch = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonDragAndPinch = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.camera\n            },\n            toggle: true,\n            title: theme.getViewButtonDragAndPinchTitle(),\n            shortcut: theme.getViewButtonDragAndPinchShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this._isSelectSuspended = true;\n                },\n                inactive: function () {\n                    _this._isSelectSuspended = false;\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonFit\", {\n        get: function () {\n            var result = this._viewButtonFit;\n            if (result == null) {\n                result = this.newViewButtonFit();\n                this._viewButtonFit = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonFit = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.fit();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"rightPane\", {\n        get: function () {\n            var result = this._paneRight;\n            if (result == null) {\n                result = this.newRightPane();\n                this._paneRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newRightPane = function () {\n        return new DLayoutVertical({\n            width: 400,\n            height: \"padding\",\n            margin: this._margin * 0.5,\n            children: [\n                new DLayoutHorizontal({\n                    width: \"padding\",\n                    height: \"auto\",\n                    children: [\n                        new DLayoutSpace({\n                            weight: 1\n                        }),\n                        this.toolFileButtonCreate,\n                        this.toolFileButtonOpen,\n                        this.toolFileButtonSave,\n                        this.toolFileButtonDelete\n                    ]\n                }),\n                this.inputName,\n                new DLayoutHorizontal({\n                    width: \"padding\",\n                    height: \"auto\",\n                    children: [\n                        this.tableFilterInput,\n                        this.toolFileButtonUpload,\n                        this.toolFileButtonDownload\n                    ]\n                }),\n                this.table\n            ]\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogProcessing\", {\n        get: function () {\n            var result = this._dialogProcessing;\n            if (result == null) {\n                result = this.newDialogProcessing();\n                this._dialogProcessing = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogProcessing = function () {\n        return new EDialogProcessing();\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogDelete\", {\n        get: function () {\n            var result = this._dialogConfirmDelete;\n            if (result == null) {\n                result = this.newDialogDelete();\n                this._dialogConfirmDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogDelete = function () {\n        var _this = this;\n        return new DDialogConfirmDelete({\n            on: {\n                ok: function () {\n                    var tester = _this._tester;\n                    if (tester) {\n                        if (tester.id != null) {\n                            _this._controller.graphicTester.delete(tester.id);\n                        }\n                        _this.tester = undefined;\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"tableFilterInput\", {\n        get: function () {\n            var result = this._tableFilterInput;\n            if (result == null) {\n                result = this.newTableFilterInput();\n                this._tableFilterInput = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newTableFilterInput = function () {\n        var _this = this;\n        return new DInputSearch({\n            weight: 1,\n            on: {\n                input: function (value) {\n                    var word = value.trim();\n                    _this.tableFilter.word = word;\n                    var filter = _this.table.data.filter;\n                    if (0 < word.length) {\n                        filter.apply();\n                    }\n                    else {\n                        filter.unapply();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonCreate\", {\n        get: function () {\n            var result = this._toolFileButtonCreate;\n            if (result == null) {\n                result = this.newToolFileButtonCreate();\n                this._toolFileButtonCreate = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonCreate = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.new\n            },\n            title: theme.getToolFileButtonCreateTitle(),\n            shortcut: theme.getToolFileButtonCreateShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonCreateActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonCreateActive = function (opener) {\n        var _this = this;\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogCreate.open(opener);\n            });\n        }\n        else {\n            this.dialogCreate.open(opener);\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonOpen\", {\n        get: function () {\n            var result = this._toolFileButtonOpen;\n            if (result == null) {\n                result = this.newToolFileButtonOpen();\n                this._toolFileButtonOpen = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.open\n            },\n            title: theme.getToolFileButtonOpenTitle(),\n            shortcut: theme.getToolFileButtonOpenShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonOpenActive = function (opener) {\n        var _this = this;\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogSelectMapping.open(opener);\n            });\n        }\n        else {\n            this.dialogSelectMapping.open(opener);\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonUpload\", {\n        get: function () {\n            var result = this._toolFileButtonUpload;\n            if (result == null) {\n                result = this.newToolFileButtonUpload();\n                this._toolFileButtonUpload = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonUpload = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButtonFile({\n            image: {\n                source: this.icons.upload\n            },\n            title: theme.getToolFileButtonUploadTitle(),\n            shortcut: theme.getToolFileButtonUploadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            as: DButtonFileAs.TEXT,\n            on: {\n                open: function (data, file) {\n                    _this.onToolFileButtonUploadOpen(data, file);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonUploadOpen = function (data, file) {\n        var tester = this._tester;\n        if (tester) {\n            tester.mappings = toGraphicTesterObject(data);\n            this.onDiagramSelectionChange();\n            this.toDirty();\n            this.toMappingsDirty();\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonDownload\", {\n        get: function () {\n            var result = this._toolFileButtonDownload;\n            if (result == null) {\n                result = this.newToolFileButtonDownload();\n                this._toolFileButtonDownload = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonDownload = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.download\n            },\n            title: theme.getToolFileButtonDownloadTitle(),\n            shortcut: theme.getToolFileButtonDownloadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function () {\n                    _this.onToolFileButtonDownloadActive();\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonDownloadActive = function () {\n        var graphic = this._graphic;\n        var tester = this._tester;\n        if (graphic && tester) {\n            var diagram = this.diagram;\n            var canvas = diagram.canvas;\n            if (canvas) {\n                var layers = canvas.layer.children;\n                var uuidToDataValueIds = new Map();\n                var rows = [];\n                for (var i = 0, imax = layers.length; i < imax; ++i) {\n                    this.toCsvRows(layers[i].children, tester.mappings, null, uuidToDataValueIds, rows);\n                }\n                rows.sort(function (a, b) {\n                    return a[0] - b[0];\n                });\n                UtilFileDownloader.download(this.getFilename(), UtilCsv.stringify(rows));\n            }\n        }\n    };\n    FGraphicTester.prototype.toCsvRows = function (shapes, mappings, dataShape, uuidToDataValueIds, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var uuid = (dataShape || shape).uuid;\n            var object = mappings.get(uuid);\n            var data = shape.data;\n            var dataValueIds = uuidToDataValueIds.get(uuid);\n            if (dataValueIds == null) {\n                dataValueIds = new Set();\n                uuidToDataValueIds.set(uuid, dataValueIds);\n            }\n            for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                var dataValue = data.get(j);\n                if (dataValue) {\n                    var dataValueId = dataValue.id;\n                    if (!dataValueIds.has(dataValueId)) {\n                        dataValueIds.add(dataValueId);\n                        var value = (object && object[dataValueId]) || \"\";\n                        result.push([uuid, dataValueId, value]);\n                    }\n                }\n            }\n            this.toCsvRows(shape.children, mappings, this.toDataShape(dataShape, shape), uuidToDataValueIds, result);\n        }\n        return result;\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonSave\", {\n        get: function () {\n            var result = this._toolFileButtonSave;\n            if (result == null) {\n                result = this.newToolFileButtonSave();\n                this._toolFileButtonSave = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonSave = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.save\n            },\n            title: theme.getToolFileButtonSaveTitle(),\n            shortcut: theme.getToolFileButtonSaveShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonSaveActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonSaveActive = function (opener) {\n        var _this = this;\n        var graphic = this._graphic;\n        var tester = this._tester;\n        if (graphic && tester) {\n            tester.name = this.inputName.input.value;\n            var simple_1 = toGraphicTesterSimple(tester);\n            var dialogProcessing_1 = this.dialogProcessing;\n            dialogProcessing_1.open(opener);\n            this._controller.graphicTester.save(simple_1).then(function (id) {\n                simple_1.id = id;\n                _this.tester = toGraphicTesterSerialized(simple_1);\n                dialogProcessing_1.resolve();\n            }, function (reason) {\n                dialogProcessing_1.reject(reason);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonDelete\", {\n        get: function () {\n            var result = this._toolFileButtonDelete;\n            if (result == null) {\n                result = this.newToolFileButtonDelete();\n                this._toolFileButtonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonDelete = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.delete\n            },\n            title: theme.getToolFileButtonDeleteTitle(),\n            shortcut: theme.getToolFileButtonDeleteShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonDeleteActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonDeleteActive = function (opener) {\n        this.dialogDelete.open(opener);\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"inputName\", {\n        get: function () {\n            var result = this._inputName;\n            if (result == null) {\n                result = this.newInputName();\n                this._inputName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newInputName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this._theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function () {\n                        _this.toDirty();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"icons\", {\n        get: function () {\n            return this._icons;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"diagram\", {\n        get: function () {\n            var result = this._diagram;\n            if (result == null) {\n                result = this.newDiagram();\n                this._diagram = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDiagram = function () {\n        var _this = this;\n        var result = new DDiagram(this.toDiagramOptions(this._options));\n        result.on(\"down\", function (e, diagram) {\n            _this.onDiagramDown(e, diagram);\n        });\n        result.on(\"keydown\", function (e) {\n            _this.onDiagramKeydown(e);\n        });\n        return result;\n    };\n    FGraphicTester.prototype.toDiagramOptions = function (options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        var result = options.diagram || {};\n        (_a = result.controller) !== null && _a !== void 0 ? _a : (result.controller = this._controller.graphic);\n        (_b = result.width) !== null && _b !== void 0 ? _b : (result.width = \"100%\");\n        (_c = result.height) !== null && _c !== void 0 ? _c : (result.height = \"100%\");\n        (_d = result.mask) !== null && _d !== void 0 ? _d : (result.mask = true);\n        (_e = result.ambient) !== null && _e !== void 0 ? _e : (result.ambient = true);\n        var view = ((_f = result.view) !== null && _f !== void 0 ? _f : (result.view = {}));\n        var gesture = ((_g = view.gesture) !== null && _g !== void 0 ? _g : (view.gesture = {}));\n        (_h = gesture.modifier) !== null && _h !== void 0 ? _h : (gesture.modifier = UtilGestureModifier.ALT);\n        var checker = ((_j = gesture.checker) !== null && _j !== void 0 ? _j : (gesture.checker = {}));\n        (_k = checker.start) !== null && _k !== void 0 ? _k : (checker.start = function (e, modifier) {\n            return UtilGestureModifiers.match(e, modifier) || _this._isSelectSuspended;\n        });\n        (_l = checker.move) !== null && _l !== void 0 ? _l : (checker.move = function (e, modifier) {\n            var diagram = _this._diagram;\n            return (UtilGestureModifiers.match(e, modifier) || !!(diagram && diagram.state.isGesturing));\n        });\n        var zoom = ((_m = view.zoom) !== null && _m !== void 0 ? _m : (view.zoom = {}));\n        var dblclick = ((_o = zoom.dblclick) !== null && _o !== void 0 ? _o : (zoom.dblclick = {}));\n        (_p = dblclick.checker) !== null && _p !== void 0 ? _p : (dblclick.checker = function (e, modifier) {\n            return _this._isSelectSuspended;\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"selection\", {\n        get: function () {\n            var _this = this;\n            var result = this._selection;\n            if (result == null) {\n                result = new EToolSelectSelection({\n                    diagram: this.diagram,\n                    modifier: {\n                        editable: false\n                    }\n                });\n                result.on(\"change\", function () {\n                    _this.onDiagramSelectionChange();\n                });\n                this._selection = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.toDataMappingRows = function (shapes, mappings, dataShape, dataValueIdToRow, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var uuid = (dataShape || shape).uuid;\n            var object = mappings.get(uuid);\n            var data = shape.data;\n            for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                var dataValue = data.get(j);\n                if (dataValue != null) {\n                    var dataValueId = dataValue.id;\n                    var value = (object && object[dataValueId]) || \"\";\n                    var row = dataValueIdToRow.get(dataValueId);\n                    if (row == null) {\n                        row = {\n                            uuids: [uuid],\n                            id: dataValueId,\n                            value: value\n                        };\n                        dataValueIdToRow.set(dataValueId, row);\n                        result.push(row);\n                    }\n                    else {\n                        row.uuids.push(uuid);\n                        row.value = value;\n                    }\n                }\n            }\n            this.toDataMappingRows(shape.children, mappings, this.toDataShape(dataShape, shape), dataValueIdToRow, result);\n        }\n        return result;\n    };\n    FGraphicTester.prototype.toDataShape = function (dataShape, shape) {\n        if (dataShape) {\n            return dataShape;\n        }\n        if (shape instanceof EShapeEmbedded) {\n            return shape;\n        }\n        return null;\n    };\n    FGraphicTester.prototype.onDiagramSelectionChange = function () {\n        var selection = this._selection;\n        var tester = this._tester;\n        var table = this.table;\n        if (selection && tester) {\n            var shapes = selection.get();\n            if (0 < shapes.length) {\n                var rows = [];\n                this.toDataMappingRows(shapes, tester.mappings, null, new Map(), rows);\n                table.data.clearAndAddAll(rows);\n            }\n            else {\n                table.data.clear();\n            }\n        }\n        else {\n            table.data.clear();\n        }\n    };\n    FGraphicTester.prototype.onDiagramDown = function (e, diagram) {\n        if (this._isSelectSuspended) {\n            return;\n        }\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagramCanvas = diagram.canvas;\n        if (diagramCanvas) {\n            var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n            if (this._selectMode === 1 /* EToolSelectMode.SELECT */) {\n                this._selectMode = 0 /* EToolSelectMode.NONE */;\n                this.onDiagramSelectEnd(diagramCanvas, isAddMode);\n                return;\n            }\n            var global_1 = e.data.global;\n            var onDownPoint = this._onDiagramDownPoint;\n            onDownPoint.copyFrom(global_1);\n            var selection = this.selection;\n            var hitObject = this.hitTest(global_1, diagramCanvas);\n            if (hitObject instanceof EShapeBase) {\n                if (isAddMode) {\n                    selection.toggle(hitObject);\n                }\n                else if (!selection.contains(hitObject)) {\n                    var first = selection.first();\n                    if (first == null) {\n                        selection.set(hitObject.root);\n                    }\n                    else {\n                        var selected = UtilShapeSearch.toSelected(hitObject);\n                        if (selected != null) {\n                            if (EShapeCapabilities.contains(selected, EShapeCapability.CHILDREN)) {\n                                this._childSelectTime = Date.now();\n                                this._childSelectChild = UtilShapeSearch.toOfParent(hitObject, selected);\n                            }\n                        }\n                        else {\n                            var sharedParent = UtilShapeSearch.toSharedParent(first, hitObject);\n                            selection.set(UtilShapeSearch.toOfParent(hitObject, sharedParent));\n                        }\n                    }\n                }\n                this._selectMode = 2 /* EToolSelectMode.TRANSLATE */;\n            }\n            else {\n                // Select area\n                var area = this.selectArea;\n                diagramCanvas.toLocal(global_1, undefined, onDownPoint);\n                area.x = onDownPoint.x;\n                area.y = onDownPoint.y;\n                area.size.set(0, 0);\n                area.update();\n                diagramCanvas.addChild(area);\n                DApplications.update(diagram);\n                // Select mode\n                this._selectMode = 1 /* EToolSelectMode.SELECT */;\n            }\n            var oldInteractionManager = this._interactionManager;\n            if (oldInteractionManager) {\n                this._interactionManager = null;\n                oldInteractionManager.off(UtilPointerEvent.move, this._onDiagramMoveBound);\n                var onDiagramUpBound = this._onDiagramUpBound;\n                oldInteractionManager.off(UtilPointerEvent.up, onDiagramUpBound);\n                oldInteractionManager.off(UtilPointerEvent.upoutside, onDiagramUpBound);\n                oldInteractionManager.off(UtilPointerEvent.cancel, onDiagramUpBound);\n            }\n            var applicationLayer = DApplications.getLayer(diagram);\n            if (applicationLayer) {\n                var newInteractionManager = applicationLayer.renderer.plugins.interaction;\n                this._interactionManager = newInteractionManager;\n                newInteractionManager.on(UtilPointerEvent.move, this._onDiagramMoveBound);\n                var onDiagramUpBound = this._onDiagramUpBound;\n                newInteractionManager.on(UtilPointerEvent.up, onDiagramUpBound);\n                newInteractionManager.on(UtilPointerEvent.upoutside, onDiagramUpBound);\n                newInteractionManager.on(UtilPointerEvent.cancel, onDiagramUpBound);\n            }\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"selectArea\", {\n        get: function () {\n            var result = this._selectArea;\n            if (result == null) {\n                result = new EToolSelectArea();\n                this._selectArea = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.onDiagramMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this.diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._selectMode;\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            var global_2 = e.data.global;\n            var onDownPoint = this._onDiagramDownPoint;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var area = this.selectArea;\n                var onMovePoint = diagramCanvas.toLocal(global_2, undefined, this._onDiagramMovePoint);\n                area.x = Math.min(onDownPoint.x, onMovePoint.x);\n                area.y = Math.min(onDownPoint.y, onMovePoint.y);\n                area.size.set(Math.max(onDownPoint.x, onMovePoint.x) - area.x, Math.max(onDownPoint.y, onMovePoint.y) - area.y);\n                area.update();\n                DApplications.update(diagram);\n            }\n            else {\n                var dx = global_2.x - onDownPoint.x;\n                var dy = global_2.y - onDownPoint.y;\n                if (1 <= Math.abs(dx) || 1 <= Math.abs(dy)) {\n                    this._childSelectChild = null;\n                }\n            }\n        }\n    };\n    FGraphicTester.prototype.onDiagramUp = function (e) {\n        var diagram = this.diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._selectMode;\n        var interactionManager = this._interactionManager;\n        if (interactionManager) {\n            this._interactionManager = null;\n            interactionManager.off(UtilPointerEvent.move, this._onDiagramMoveBound);\n            var onDiagramUpBound = this._onDiagramUpBound;\n            interactionManager.off(UtilPointerEvent.up, onDiagramUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onDiagramUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onDiagramUpBound);\n        }\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            this._selectMode = 0 /* EToolSelectMode.NONE */;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var originalEvent = e.data.originalEvent;\n                var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n                this.onDiagramSelectEnd(diagramCanvas, isAddMode);\n            }\n            else {\n                // Select the child\n                var selection = this.selection;\n                var childSelectChild = this._childSelectChild;\n                if (childSelectChild != null) {\n                    this._childSelectChild = null;\n                    var elapsedTime = Date.now() - this._childSelectTime;\n                    if (elapsedTime < 333) {\n                        selection.set(childSelectChild);\n                    }\n                }\n                DApplications.update(diagram);\n            }\n        }\n    };\n    FGraphicTester.prototype.onDiagramSelectEnd = function (canvas, isAddMode) {\n        var area = this.selectArea;\n        var selection = this.selection;\n        if (0 < area.size.x && 0 < area.size.y) {\n            var areaRect = area.getBounds(false, this._selectAreaRect);\n            var foundShapes = [];\n            var layers = canvas.layer.children;\n            for (var i = layers.length - 1; 0 <= i; --i) {\n                UtilShapeAreaSelect.findShapes(layers[i], areaRect, foundShapes);\n            }\n            if (isAddMode) {\n                if (0 < foundShapes.length) {\n                    selection.addAll(foundShapes);\n                }\n            }\n            else {\n                if (0 < foundShapes.length || !selection.isEmpty()) {\n                    selection.clearAndAddAll(foundShapes);\n                }\n            }\n        }\n        else if (!isAddMode) {\n            if (!selection.isEmpty()) {\n                selection.clear();\n            }\n        }\n        canvas.removeChild(area);\n        DApplications.update(canvas);\n    };\n    FGraphicTester.prototype.hitTest = function (global, canvas) {\n        var layers = canvas.layer.children;\n        for (var i = layers.length - 1; 0 <= i; --i) {\n            var result = UtilHitTest.execute(global, layers[i]);\n            if (result != null) {\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicTester.prototype.onDiagramKeydown = function (e) {\n        if (UtilKeyboardEvent.isSelectAllKey(e)) {\n            var canvas = this.diagram.canvas;\n            if (canvas != null) {\n                var selection = this.selection;\n                selection.clear();\n                var layers = canvas.layer.children;\n                for (var i = 0, imax = layers.length; i < imax; ++i) {\n                    var children = layers[i].children;\n                    if (0 < children.length) {\n                        selection.addAll(children);\n                    }\n                }\n            }\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"table\", {\n        get: function () {\n            var result = this._table;\n            if (result == null) {\n                result = this.newTable();\n                this._table = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newTable = function () {\n        return new DTable({\n            weight: 1,\n            width: \"padding\",\n            columns: this.newColumnOptions(),\n            data: {\n                filter: this.tableFilter\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"tableFilter\", {\n        get: function () {\n            var result = this._tableFilter;\n            if (result == null) {\n                result = this.newTableFilter();\n                this._tableFilter = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newTableFilter = function () {\n        return {\n            word: \"\",\n            test: function (row) {\n                var word = this.word;\n                return (word.length <= 0 ||\n                    0 <= row.id.indexOf(word) ||\n                    0 <= row.value[0].indexOf(word) ||\n                    0 <= row.value[1].indexOf(word));\n            }\n        };\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogSelectGraphic\", {\n        get: function () {\n            var result = this._dialogSelectGraphic;\n            if (result == null) {\n                result = this.newDialogSelectGraphic();\n                this._dialogSelectGraphic = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogSelectGraphic = function () {\n        var _this = this;\n        return this._category.get().then(function (category) {\n            if (_this._options.controller.toThumbnail != null) {\n                var result = _this.newDialogSelectGraphicImage();\n                result.categories = category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectGraphicNoImage();\n                result.categories = category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicTester.prototype.newDialogSelectGraphicNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this._controller.graphic,\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectGraphicSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.newDialogSelectGraphicImage = function () {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this._options.controller.graphic, this._controller.toThumbnail, function (value) {\n            _this.onDialogSelectGraphicSelect(value);\n        });\n    };\n    FGraphicTester.prototype.onDialogSelectGraphicSelect = function (value) {\n        var _this = this;\n        this._controller.graphic.get(value.id).then(function (serialized) {\n            _this.graphic = DDiagrams.toSerialized(serialized);\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"graphic\", {\n        get: function () {\n            return this._graphic;\n        },\n        set: function (graphic) {\n            this._graphic = graphic;\n            var diagram = this.diagram;\n            if (graphic != null) {\n                diagram.set(graphic);\n            }\n            else {\n                diagram.set(null);\n            }\n            this._appliedValues.clear();\n            this.tester = undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"dialogSelectMapping\", {\n        get: function () {\n            var result = this._dialogSelectTester;\n            if (result == null) {\n                result = this.newDialogSelectMapping();\n                this._dialogSelectTester = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogSelectMapping = function () {\n        var _this = this;\n        var controller = this._controller;\n        return new DDialogSelect({\n            controller: {\n                search: function (word) {\n                    var graphic = _this._graphic;\n                    if (graphic) {\n                        return controller.graphicTester.search(graphic.name, word);\n                    }\n                    return Promise.resolve([]);\n                }\n            },\n            on: {\n                select: function (selected) {\n                    controller.graphicTester.get(selected.id).then(function (serialized) {\n                        var graphic = _this._graphic;\n                        if (graphic) {\n                            _this.tester = toGraphicTesterSerialized(serialized);\n                        }\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogDiscard\", {\n        get: function () {\n            var result = this._dialogDiscard;\n            if (result == null) {\n                result = new DDialogConfirmDiscard();\n                this._dialogDiscard = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"dialogCreate\", {\n        get: function () {\n            var result = this._dialogCreate;\n            if (result == null) {\n                result = this.newDialogCreate();\n                this._dialogCreate = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogCreate = function () {\n        var _this = this;\n        var result = new DDialogInputText({\n            on: {\n                open: function () {\n                    result.value = _this._theme.newDialogCreateTextValue();\n                },\n                ok: function (value) {\n                    var graphic = _this._graphic;\n                    if (graphic) {\n                        _this.tester = newGraphicTester(value, graphic);\n                    }\n                }\n            }\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"tester\", {\n        get: function () {\n            return this._tester;\n        },\n        set: function (tester) {\n            this._isChanged = false;\n            var inputName = this.inputName.input;\n            this._tester = tester;\n            inputName.value = tester ? tester.name : \"\";\n            this.onDiagramSelectionChange();\n            this.onChange();\n            this.toMappingsDirty();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"isNew\", {\n        get: function () {\n            var tester = this._tester;\n            return tester != null && tester.id == null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"isChanged\", {\n        get: function () {\n            return this._isChanged || this.isNew;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.onChange = function () {\n        var hasNoGraphc = this._graphic == null;\n        var hasNoMapping = this._tester == null;\n        var hasNoChanges = !this.isChanged;\n        var isNotEditable = !this._isEditable;\n        this.table.state.isDisabled = hasNoMapping;\n        this.tableFilterInput.state.isDisabled = hasNoMapping;\n        this.inputName.state.isDisabled = hasNoMapping || isNotEditable;\n        this.toolFileButtonCreate.state.isDisabled = hasNoGraphc || isNotEditable;\n        this.toolFileButtonOpen.state.isDisabled = hasNoGraphc;\n        this.toolFileButtonUpload.state.isDisabled = hasNoMapping || isNotEditable;\n        this.toolFileButtonDownload.state.isDisabled = hasNoMapping;\n        this.toolFileButtonSave.state.isDisabled = hasNoMapping || hasNoChanges || isNotEditable;\n        this.toolFileButtonDelete.state.isDisabled = hasNoMapping || isNotEditable;\n    };\n    FGraphicTester.prototype.evaluate = function (expression) {\n        return Function(\"try { return (\".concat(expression, \"); } catch( e ) { return 0; }\"))();\n    };\n    FGraphicTester.prototype.onMappingsChange = function () {\n        var tester = this._tester;\n        if (tester) {\n            var mappings = tester.mappings;\n            var diagram = this.diagram;\n            var canvas = diagram.canvas;\n            if (canvas) {\n                var isChanged = false;\n                var layers = canvas.layer.children;\n                for (var i = 0, imax = layers.length; i < imax; ++i) {\n                    if (this.applyMappings(layers[i].children, mappings, null)) {\n                        isChanged = true;\n                    }\n                }\n                if (isChanged) {\n                    DApplications.update(diagram);\n                }\n            }\n        }\n    };\n    FGraphicTester.prototype.applyMappings = function (shapes, mappings, dataShape) {\n        var isChanged = false;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            // Apply the mappings\n            var uuid = (dataShape || shape).uuid;\n            var mapping = mappings.get(uuid);\n            if (mapping) {\n                var data = shape.data;\n                for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                    var dataValue = data.get(j);\n                    if (dataValue != null && this.applyMapping(dataValue, mapping[dataValue.id])) {\n                        isChanged = true;\n                    }\n                }\n            }\n            // Children\n            if (this.applyMappings(shape.children, mappings, this.toDataShape(dataShape, shape))) {\n                isChanged = true;\n            }\n        }\n        // Done\n        return isChanged;\n    };\n    FGraphicTester.prototype.applyMapping = function (dataValue, expression) {\n        if (expression != null) {\n            var expressionMap = this._expressionMap;\n            if (expressionMap.has(expression)) {\n                return this.applyMappingIfChanged(dataValue, expressionMap.get(expression));\n            }\n            else if (0 < expression.length) {\n                try {\n                    var evaluated = this.evaluate(expression);\n                    expressionMap.set(expression, evaluated);\n                    return this.applyMappingIfChanged(dataValue, evaluated);\n                }\n                catch (_a) {\n                    // DO NOTHING\n                }\n            }\n        }\n        return false;\n    };\n    FGraphicTester.prototype.applyMappingIfChanged = function (dataValue, value) {\n        var appliedValues = this._appliedValues;\n        if (appliedValues.has(dataValue)) {\n            var appliedValue = appliedValues.get(dataValue);\n            if (appliedValue !== value) {\n                appliedValues.set(dataValue, value);\n                dataValue.value = value;\n                return true;\n            }\n        }\n        else {\n            appliedValues.set(dataValue, value);\n            dataValue.value = value;\n            return true;\n        }\n        return false;\n    };\n    FGraphicTester.prototype.toDirty = function () {\n        if (!this._isChanged) {\n            this._isChanged = true;\n            this.onChange();\n        }\n    };\n    FGraphicTester.prototype.toMappingsDirty = function () {\n        this._isMappingsDirty = true;\n    };\n    FGraphicTester.prototype.getFilename = function () {\n        var name = this.inputName.input.value.toLowerCase();\n        var date = UtilDate.format(Date.now());\n        return \"graphic-tester-\".concat(name, \"-\").concat(date, \".csv\");\n    };\n    FGraphicTester.prototype.newColumnOptions = function () {\n        var _this = this;\n        var isEditable = this._isEditable;\n        var theme = this._theme;\n        return [\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnDataLabel(),\n                editable: false,\n                sortable: true,\n                getter: function (row) {\n                    return row.id;\n                },\n                setter: function (row, index, value) {\n                    row.id = value;\n                    _this.toDirty();\n                }\n            },\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnValueLabel(),\n                align: \"LEFT\",\n                editable: isEditable,\n                sortable: true,\n                formatter: function (value) {\n                    return value || \"\";\n                },\n                getter: function (row) {\n                    return row.value;\n                },\n                setter: function (row, index, value) {\n                    var tester = _this._tester;\n                    if (tester) {\n                        var uuids = row.uuids;\n                        var mappings = tester.mappings;\n                        var id = row.id;\n                        if (0 < value.length) {\n                            for (var i = 0, imax = uuids.length; i < imax; ++i) {\n                                var uuid = uuids[i];\n                                var object = mappings.get(uuid);\n                                if (object == null) {\n                                    object = {};\n                                    mappings.set(uuid, object);\n                                }\n                                object[id] = value;\n                            }\n                        }\n                        else {\n                            for (var i = 0, imax = uuids.length; i < imax; ++i) {\n                                var uuid = uuids[i];\n                                var object = mappings.get(uuid);\n                                if (object != null) {\n                                    delete object[id];\n                                }\n                            }\n                        }\n                    }\n                    row.value = value;\n                    _this.toDirty();\n                    _this.toMappingsDirty();\n                }\n            }\n        ];\n    };\n    FGraphicTester.prototype.toTheme = function (options) {\n        var theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    };\n    FGraphicTester.prototype.getThemeDefault = function () {\n        return DThemes.getInstance().get(this.getType());\n    };\n    FGraphicTester.prototype.getType = function () {\n        return \"FGraphicTester\";\n    };\n    return FGraphicTester;\n}());\nexport { FGraphicTester };\n//# sourceMappingURL=f-graphic-tester.js.map","import { DApplication, DButton, DDiagram, DDiagrams, DDialogSelect, DLayoutHorizontal, isString, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { UtilCanvasCategory } from \"./util/util-canvas-category\";\nvar FGraphicViewer = /** @class */ (function () {\n    function FGraphicViewer(options) {\n        var _a, _b;\n        // Options\n        this._options = options;\n        var theme = this.toTheme(options);\n        this._theme = theme;\n        var margin = (_a = options.margin) !== null && _a !== void 0 ? _a : theme.getMargin();\n        this._margin = margin;\n        var icons = theme.getIconBuilder().build();\n        this._icons = icons;\n        this._category = new UtilCanvasCategory((_b = options.canvas) === null || _b === void 0 ? void 0 : _b.category);\n        // Application\n        var application = new DApplication(options.application);\n        this._application = application;\n        var stage = application.stage;\n        // Diagram\n        var diagram = this.diagram;\n        stage.addChild(diagram);\n        // Header\n        var header = this.header;\n        if (header != null) {\n            stage.addChild(header);\n        }\n        // View operations\n        var button = options.button;\n        if (button == null || button.view !== false) {\n            stage.addChild(this.layoutViewButton);\n        }\n    }\n    Object.defineProperty(FGraphicViewer.prototype, \"application\", {\n        get: function () {\n            return this._application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicViewer.prototype, \"diagram\", {\n        get: function () {\n            var result = this._diagram;\n            if (result == null) {\n                result = this.newDiagram();\n                this._diagram = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newDiagram = function () {\n        var controller = this._options.controller;\n        return new DDiagram({\n            x: 0,\n            y: 0,\n            width: \"100%\",\n            height: \"100%\",\n            outline: {\n                color: null\n            },\n            controller: controller.graphic,\n            data: {\n                mapper: this.newDataMapper(),\n                remote: {\n                    controller: controller.remote\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"header\", {\n        get: function () {\n            var result = this._header;\n            if (result === undefined) {\n                result = this.newHeader();\n                this._header = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newHeader = function () {\n        var header = this._options.header;\n        if (header != null) {\n            var result = header(this.newToolFileButtons());\n            if (result != null) {\n                var margin_1 = this._margin;\n                result.x = margin_1;\n                result.y = margin_1;\n                result.setWidth(function (p) { return p - 2 * margin_1; });\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicViewer.prototype.newToolFileButtons = function () {\n        var result = [];\n        var button = this._options.button;\n        if (button == null || button.open !== false) {\n            result.push(this.toolFileButtonGraphicOpen);\n        }\n        return result;\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"toolFileButtonGraphicOpen\", {\n        get: function () {\n            var result = this._toolFileButtonGraphicOpen;\n            if (result == null) {\n                result = this.newToolFileButtonGraphicOpen();\n                this._toolFileButtonGraphicOpen = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newToolFileButtonGraphicOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonGraphicOpenTitle(),\n            shortcut: theme.getToolFileButtonGraphicOpenShortcut(),\n            theme: theme.getToolFileButtonGraphicTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonGraphicOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicViewer.prototype.onToolFileButtonGraphicOpenActive = function (opener) {\n        this.dialogSelect.then(function (dialogSelect) {\n            dialogSelect.open(opener);\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"layoutViewButton\", {\n        get: function () {\n            var result = this._layoutViewButton;\n            if (result == null) {\n                result = this.newLayoutViewButton();\n                this._layoutViewButton = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newLayoutViewButton = function () {\n        var margin = this._margin;\n        var position = function (p, s) { return p - s - margin; };\n        return new DLayoutHorizontal({\n            x: position,\n            y: position,\n            width: \"auto\",\n            height: \"auto\",\n            margin: 0,\n            children: this.newViewButtons()\n        });\n    };\n    FGraphicViewer.prototype.newViewButtons = function () {\n        return [\n            this.viewButtonZoomOut,\n            this.viewButtonZoomIn,\n            this.viewButtonReset,\n            this.viewButtonFit\n        ];\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonZoomOut\", {\n        get: function () {\n            var result = this._viewButtonZoomOut;\n            if (result == null) {\n                result = this.newViewButtonZoomOut();\n                this._viewButtonZoomOut = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonZoomOut = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomOut();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonZoomIn\", {\n        get: function () {\n            var result = this._viewButtonZoomIn;\n            if (result == null) {\n                result = this.newViewButtonZoomIn();\n                this._viewButtonZoomIn = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonZoomIn = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomIn();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonReset\", {\n        get: function () {\n            var result = this._viewButtonReset;\n            if (result == null) {\n                result = this.newViewButtonReset();\n                this._viewButtonReset = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonReset = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.reset();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonFit\", {\n        get: function () {\n            var result = this._viewButtonFit;\n            if (result == null) {\n                result = this.newViewButtonFit();\n                this._viewButtonFit = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonFit = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.fit();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"dialogSelect\", {\n        get: function () {\n            var result = this._dialogSelect;\n            if (result == null) {\n                result = this.newDialogSelect();\n                this._dialogSelect = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newDialogSelect = function () {\n        var _this = this;\n        return this._category.get().then(function (category) {\n            if (_this._options.controller.toThumbnail != null) {\n                var result = _this.newDialogSelectImage();\n                result.categories = category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectNoImage();\n                result.categories = category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicViewer.prototype.newDialogSelectNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this._options.controller.graphic,\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicViewer.prototype.newDialogSelectImage = function () {\n        var _this = this;\n        var controller = this._options.controller;\n        return newDialogSelectWithThumbnails(controller.graphic, controller.toThumbnail, function (value) {\n            _this.onDialogSelectSelect(value);\n        });\n    };\n    FGraphicViewer.prototype.onDialogSelectSelect = function (value) {\n        var _this = this;\n        this._options.controller.graphic.get(value.id).then(function (serialized) {\n            _this.diagram.set(DDiagrams.toSerialized(serialized));\n        });\n    };\n    FGraphicViewer.prototype.newDataMapper = function () {\n        return undefined;\n    };\n    FGraphicViewer.prototype.toTheme = function (options) {\n        var theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    };\n    FGraphicViewer.prototype.getThemeDefault = function () {\n        return DThemes.getInstance().get(this.getType());\n    };\n    FGraphicViewer.prototype.getType = function () {\n        return \"FGraphicViewer\";\n    };\n    return FGraphicViewer;\n}());\nexport { FGraphicViewer };\n//# sourceMappingURL=f-graphic-viewer.js.map","import { EShapeButtons } from \"./e-shape-buttons\";\nexport var loadShapeExtensionButton = function () {\n    EShapeButtons.load();\n};\n//# sourceMappingURL=load-shape-extension-button.js.map","import { EShapeButtonLayers } from \"./e-shape-button-layers\";\nexport var loadShapeExtensionButtonLayer = function () {\n    EShapeButtonLayers.load();\n};\n//# sourceMappingURL=load-shape-extension-button-layer.js.map","import { EShapeChartLines } from \"./e-shape-chart-lines\";\nexport var loadShapeExtensionChartLine = function () {\n    EShapeChartLines.load();\n};\n//# sourceMappingURL=load-shape-extension-chart-line.js.map","import { EShapeEmbeddedAcceptorEdges } from \"./e-shape-embedded-acceptor-edges\";\nexport var loadShapeExtensionEmbeddedAcceptorEdge = function () {\n    EShapeEmbeddedAcceptorEdges.load();\n};\n//# sourceMappingURL=load-shape-extension-embedded-acceptor-edge.js.map","import { EShapeInputs } from \"./e-shape-inputs\";\nexport var loadShapeExtensionInput = function () {\n    EShapeInputs.load();\n};\n//# sourceMappingURL=load-shape-extension-input.js.map","import { EShapeTables } from \"./e-shape-tables\";\nexport var loadShapeExtensionTable = function () {\n    EShapeTables.load();\n};\n//# sourceMappingURL=load-shape-extension-table.js.map","import * as geditor from \"./wcardinal/geditor/index.browser\";\nvar global = window;\nglobal.wcardinal = global.wcardinal || {};\nglobal.wcardinal.geditor = geditor;\n//# sourceMappingURL=wcardinal-geditor.browser.js.map"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","SuppressedError","ECommandComposition","_super","commands","selection","_this","_commands","_selection","defineProperty","get","enumerable","configurable","execute","redo","lock","i","imax","length","unlock","undo","destroy","DCommandBase","ECommandDocumentAll","diagram","canvas","name","label","width","height","category","summary","description","backgroundColor","backgroundAlpha","_diagram","_canvas","_name","_label","_width","_height","_category","_summary","_description","_backgroundColor","_backgroundAlpha","state","DBaseStateSetImpl","background","getColor","getAlpha","color","alpha","emit","ECommandDocumentBackground","_color","_alpha","ECommandDocumentCategory","ECommandDocumentCreate","DCommandCreate","ECommandDocumentDescription","ECommandDocumentHeight","y","ECommandDocumentLabel","ECommandDocumentName","ECommandDocumentOpen","ECommandDocumentSnapBringForward","snapper","index","_snapper","_index","target","swap","ECommandDocumentSnapCreate","_target","add","remove","size","ECommandDocumentSnapDelete","ECommandDocumentSnapGridSize","_size","grid","ECommandDocumentSnapGridToggleVisibility","visible","ECommandDocumentSnapGridToggle","enable","ECommandDocumentSnapReplace","oldValue","newValue","list","_oldValue","_newValue","values","indexOf","_list","data","contains","replace","clearAndAdd","ECommandDocumentSnapSendBackward","ECommandDocumentSnapTargetToggleVisibility","ECommandDocumentSnapTargetToggle","ECommandDocumentSnapToggle","ECommandDocumentSummary","ECommandDocumentWidth","x","ECommandLayerBringForward","layerContainer","_layerContainer","children","tmp","onChildrenChange","DApplications","update","EDialogLayerValueBackground","isEqual","from","layer","EDialogLayerValue","interactive","gesture","copyTo","position","set","copy","EShapeLayerState","INVISIBLE","INTERACTIVE","DRAGGABLE","EShapeActionValueGestureOperationType","DRAG","PINCHABLE","PINCH","is","NONE","ECommandLayerChange","value","_layer","ECommandLayerCreate","_value","_layerActive","active","_layerCreated","_selectionStored","newLayer","result","isEmpty","store","clear","reference","layerCreated","attach","detach","selectionStored","restore","parent","ECommandLayerDelete","_layerIndex","delete","attachAt","ECommandLayerSendBackward","ECommandShapeActionValueAdd","shapes","action","shape","ECommandShapeActionValueBringForward","_indices","indices","push","ECommandShapeActionValueRemove","ECommandShapeActionValueReplace","_oldValues","oldValues","ECommandShapeActionValueSendBackward","ECommandShapeCreate","select","_shapes","_parent","_select","clearAndAddAll","ECommandShapeDataMappingValueAdd","EShapeCapabilities","EShapeCapability","DATA_MAPPING","mapping","getMapping","ECommandShapeDataMappingValueBringForward","ECommandShapeDataMappingValueRemove","ECommandShapeDataMappingValueReplace","ECommandShapeDataMappingValueSendBackward","ECommandShapeDataValueAdd","ECommandShapeDataValueBringForward","ECommandShapeDataValueRemove","ECommandShapeDataValueReplace","ECommandShapeDataValueSendBackward","UtilShapeSearch","toIndices","toDepth","EShapeBase","toSharedParent","shapeA","shapeB","parent_1","isParent","parent_2","toOfParent","shapeParent","toSelected","selected","findChildById","id","recursively","child","findChildByType","type","findChild","matcher","findChildrenByType","findChildren","COMPARATOR_INDEX","a","UtilShapeDeleter","addAll","generateDeletedShapeList","deletedShapeSet","_a","EXCEPTIONS","Set","sort","splice","onChildTransformChange","toDirty","uploaded","undefined","onDetach","ECommandShapeDelete","ECommandShapeGroup","_before","_deleteds","_createds","GROUPING","deletedSet","deleteds","modifier","w","h","group","EShapeGroup","EShapeResourceManagerDeserializationMode","EDITOR","transform","groupChildren","clone","EShapeLockPart","ALL","clonePosition","EShapeConnectorLine","edge","tail","tailAcceptor","acceptor","tailAcceptorShape","tailLocal","local","has","head","headAcceptor","headAcceptorShape","headLocal","EShapeConnectors","moveAll","onAttach","createds","deleted","created","EToolSelectSelectionUpdatedPart","PROPERTY","PROPERTY_ID","SELECTION","TREE","ECommandShapeProperty","property","targets","_capabilities","_data","_property","_targets","_isMerged","toCapability","isRecursive","isMergeable","isClassMergeable","capabilities","initProperty","getParts","init","recursive","CHILDREN","capability","getProperty","merge","isMerged","datum","setProperty","ECommandShapePropertyAll","POSITION","WIDTH","HEIGHT","ROTATION","SKEW","skew","rotation","ECommandShapePropertyCapability","apply","arguments","shapeCapability","getCapability","locked","ECommandShapePropertyCapabilityLock","ECommandShapePropertyCapabilityUnlock","ECommandShapePropertyCornerOff","corner","ECommandShapePropertyCornerOn","ECommandShapePropertySimple","ECommandShapePropertyCursor","cursor","ECommandShapePropertyRecursive","ECommandShapePropertyRecursiveSimple","ECommandShapePropertyFillColor","fill","ECommandShapePropertyFillDirection","direction","ECommandShapePropertyFillEnable","ECommandShapePropertyFillPercent","percent","ECommandShapePropertyFocusable","isFocusable","ECommandShapePropertyId","ECommandShapePropertyImageClear","image","gradient","ECommandShapePropertyImageFitTo","ECommandShapePropertyImage","ECommandShapePropertyInteractive","ECommandShapePropertyLineHeadColor","LINE_HEAD","points","marker","ECommandShapePropertyLineHeadMargin","margin","ECommandShapePropertyLineHeadSizeX","ECommandShapePropertyLineHeadSizeY","ECommandShapePropertyLineHeadType","EShapePointsMarkerType","ECommandShapePropertyLineTailColor","LINE_TAIL","ECommandShapePropertyLineTailMargin","ECommandShapePropertyLineTailSizeX","ECommandShapePropertyLineTailSizeY","ECommandShapePropertyLineTailType","ECommandShapePropertyPointsStyle","added","removed","LINE","style","EShapePointsStyle","ECommandShapePropertyPositionAndRotate","ECommandShapePropertyPositionLeft","rectangle","WORK","Rectangle","getBoundsLocal","ECommandShapePropertyPositionTop","ECommandShapePropertyPositionX","ECommandShapePropertyPositionY","ECommandShapePropertyPosition","ECommandShapePropertyRadius","radius","ECommandShapePropertyRotation","ECommandShapePropertyShortcut","shortcut","ECommandShapePropertySizeX","ECommandShapePropertySizeY","ECommandShapePropertySkew","ECommandShapePropertyStrokeAlign","stroke","align","ECommandShapePropertyStrokeColor","ECommandShapePropertyStrokeEnable","ECommandShapePropertyStrokeSideOff","side","ECommandShapePropertyStrokeSideOn","ECommandShapePropertyStrokeStyle","ECommandShapePropertyStrokeWidth","ECommandShapePropertyTextAlignHorizontal","text","horizontal","ECommandShapePropertyTextAlignVertical","vertical","ECommandShapePropertyTextClipping","clipping","ECommandShapePropertyTextColor","ECommandShapePropertyTextDirection","ECommandShapePropertyTextFamily","family","ECommandShapePropertyTextFitting","fitting","ECommandShapePropertyTextOffsetHorizontal","offset","ECommandShapePropertyTextOffsetVertical","ECommandShapePropertyTextOutlineColor","outline","ECommandShapePropertyTextOutlineEnable","ECommandShapePropertyTextOutlineWidth","ECommandShapePropertyTextPaddingHorizontal","padding","ECommandShapePropertyTextPaddingVertical","ECommandShapePropertyTextSizeDelta","Math","max","ECommandShapePropertyTextSize","ECommandShapePropertyTextSpacingHorizontal","spacing","ECommandShapePropertyTextSpacingVertical","ECommandShapePropertyTextStyle","ECommandShapePropertyTextValue","ECommandShapePropertyTextWeight","weight","ECommandShapePropertyTitle","title","ECommandShapeReplaceOne","newShape","oldShape","_newShape","_oldShape","swapLast","ECommandShapeReplace","factory","_factory","_newShapes","_oldShapes","newShapes","oldShapes","REPLACING","pivot","pivotX","pivotY","TRANSFORM","ECommandShapeSelect","before","after","_after","isClean","ECommandShapeTreeBringForward","SHAPE_COMPARATOR","ECommandShapeTreeBringToFront","indexSize","indexIndex","indexCurrent","indexOffset","Number","MAX_SAFE_INTEGER","ECommandShapeTreeSendBackward","ECommandShapeTreeSendToBack","UtilShapeTransforms","prepare","editor","EShapeEditor","updateTransform","internalTransform","internalTransformParentInverse","invert","identity","copyFrom","TRANSFORM_CHILD","finalize","newLocalTransform","localTransform","append","applyLocal","c","tx","ty","UPLOADED","cposition","crotation","cskew","cwidth","cheight","rx","atan2","ry","px","py","toSizeNormalized","sqrt","s","ECommandShapeUngroup","isUngroupable","targetLocalTransform","targetChildren","clones","j","jmax","prepend","tailLocalX","tailLocalY","tailNormal","normal","tailNormalX","tailNormalY","nd","ndx","ndy","f","headLocalX","headLocalY","headNormal","headNormalX","headNormalY","UNGROUPING","newGraphicTester","graphic","graphicId","mappings","Map","UtilCsvState","lines","linesLength","line","lineLength","next","newCursor","nextLine","UtilCsv","parseLine","icomma","charAt","k","unescape","substring","parse","str","split","row","stringifyLine","delimiter","escape","stringify","concat","toGraphicTesterObject","rows","uuid","parseInt","original","object","toGraphicTesterSerialized","simple","parsed","JSON","uuids","objects","min","toGraphicTesterSimple","serialized","forEach","key","dialogSelectTHumbnailNotFound","shapeTypeTheme","EToolSelectMode","EShapeActionExtensions","extension","_b","_typeToExtension","_extensions","EShapeActionValueDeserializers","deserializer","typeToExtension","each","iteratee","extensions","EShapeActionExtensionInputType","TEXT","EDialogActionExtension","dialog","condition","layout","_extension","_dialog","_condition","_layout","newSelect","extensionItems","items","DSelect","menu","newSelectMenuItems","item","_selectLayout","newSelectLayout","conditionIndex","getChildIndex","addChildAt","addChild","newLabeled","_inputs","newInputs","extensionInputs","inputs","inputText","newInputText","DInputText","on","enter","ok","newLabel","DInputLabel","newSpace","DLayoutSpace","input","DLayoutHorizontal","_inputLayouts","newInputLayouts","labeled","toValue","fromValue","show","selectLayout","inputLayouts","onShow","hide","reset","initial","EDialogActionExtensionContainer","_selected","e","onChange","toIconName","EShapeExtensions","EShapeDeserializers","onDeserialized","EShapeOnDeserializeds","runtime","EShapeRuntimes","EShapeUploadeds","createGroupUploaded","iconBuilder","icon","svg","build","icons","texture","ECommandShapeEmbeddedAcceptorEdgePropertySide","EShapeEmbeddedAcceptorEdge","EShapeAcceptorEdgeSide","ECommandShapeEmbeddedAcceptorEdgePropertySubtype","subtype","EShapeAcceptorEdgeType","HEAD","ECommandShapeEmbeddedAcceptorEdgePropertyVvisible","vvisible","EEditorShapeEmbeddedAcceptorEdge","options","_icons","initLayout","content","setHeight","DLayoutVertical","newTextLabel","selectSubtype","selectSide","checkVvisible","isDisabled","onSelectionChange","DText","subtheme","getLabel","_selectSubtype","newSelectSubtype","toSelectSubtypeLabel","TAIL","change","onSelectSubtypeChanged","DControllers","getCommandController","_selectSide","newSelectSide","DSelectMultiple","LEFT","toSelectSideLabel","check","TOP","RIGHT","BOTTOM","onSelectSideChange","fromSelectSideValues","toSelectSideValues","_checkVvisible","newCheckIsVvisible","DButtonCheckRight","getCheckIsVvisibleLabel","onCheckVvisibleChanged","inactive","isVvisible","last","isEnabled","isActive","_subtheme","newSubtheme","DThemes","DPane","EShapeEmbeddedAcceptorEdges","getTheme","existing","load","getName","EShapeType","EMBEDDED_ACCEPTOR_EDGE","creator","ECommandShapeButtonPropertyIsActive","EShapeButton","ECommandShapeButtonPropertyIsGrouped","isGrouped","ECommandShapeButtonPropertyIsToggle","isToggle","EEditorShapeButton","checkIsToggle","checkIsGrouped","checkIsActive","_checkIsToggle","newCheckIsToggle","getCheckIsToggleLabel","onCheckIsToggleChanged","onSelectionChangeCheckIsToggle","_checkIsGrouped","newCheckIsGrouped","getCheckIsGroupedLabel","onCheckIsGroupedChanged","onSelectionChangeCheckIsGrouped","_checkIsActive","newCheckIsActive","getCheckIsActiveLabel","onCheckIsActiveChanged","onSelectionChangeCheckIsActive","EShapeButtons","BUTTON","EShapeButtonLayerButtonValue","layers","bringToFront","EShapeActionValueShowHideLayer","isEquals","layersLength","targetLayers","serizlize","manager","layersId","serializedLayers","addResource","deserialize","resources","getExtension","setExtension","deserializeLayers","resourcesLength","EShapeButtonLayerButtonValueContainer","_values","_sizeX","_margin","_onChange","at","indexA","indexB","source","sourceValues","sourceValuesLength","serialize","isChanged","EShapeButtonLayerIds","ID","EXTENSION","EShapeButtonLayer","mode","_button","onButtonValueChange","_corner","EShapeCorner","updateUploaded","newButtons","layoutButtons","onSizeChange","shapeButton","button","buttonCount","childrenLength","master","toCorner","buttonValues","buttonValuesLength","buttonMargin","sizeX","sizeY","totalWeight","buttonSpaceFactor","part","EShapeCopyPart","resource","EShapeGroupShadowed","ECommandShapeButtonLayerValueAdd","ECommandShapeButtonLayerValueBringForward","ECommandShapeButtonLayerValueMargin","ECommandShapeButtonLayerValueRemove","ECommandShapeButtonLayerValueReplace","ECommandShapeButtonLayerValueSendBackward","EDialogShapeButtonLayerValue","newContentChildren","theme","inputLabel","inputWidth","newLayoutOf","getSelectLayerLabel","selectLayer","checkBringToFront","newLayoutLabel","newLayoutSpace","_inputLabel","newInputLabel","DInputTextAndLabel","getInputLabelLabel","space","_inputWidth","newInputWidth","DInputRealAndLabel","getInputWidthLabel","_selectLayer","newSelectLayer","newSelectLayerMenuItemOptions","_checkBringToFront","newCheckBringToFront","DButtonCheck","getCheckBringToFromLabel","DMenu","fit","slice","getResolvedValue","getType","DDialogLayered","EEditorShapeButtonLayer","buttonNew","buttonDelete","buttonBringForward","buttonSendBackward","columnList","inputMargin","onListSelectionChange","_buttonNew","newButtonNew","DButtonAmbient","new","getButtonNewTitle","emitter","onButtonNewActive","opener","dialogButton","open","then","onSelectionChangeButtonNew","_buttonDelete","newButtonDelete","getButtonDeleteTitle","first","onListSelectionChangeButtonDelete","_buttonBringForward","newButtonBringForward","arrow_up","getButtonBringForwardTitle","onListSelectionChangeButtonBringForward","_buttonSendBackward","newButtonSendBackward","arrow_down","getButtonSendBackwardTitle","onListSelectionChangeButtonSendBackward","_dialogButton","newDialogButton","_columnList","newColumnList","DList","toLabel","updater","newItem","DListItem","dblclick","_","onColumnListDblClick","columnDialog","onSelectionChangeColumnList","_inputMargin","newInputMargin","getInputMarginLabel","onSelectionChangeInputRowHeight","EShapeButtonLayers","PRIMITIVE","STROKE_SIDE","BORDER_RADIUS","deserializeBase","EShapeChartTick","major","minor","EShapeChartTickMajor","count","EShapeChartTickMinor","EShapeChartAxisX","tick","EShapeChartAxisY","EShapeChartAxis","EShapeChartLineIds","PLOT_AREA_ID","LINE_ID","X_AXIS_ID","X_AXIS_TICK_MAJOR_ID","X_AXIS_TICK_MINOR_ID","Y_AXIS_ID","Y_AXIS_TICK_MAJOR_ID","Y_AXIS_TICK_MINOR_ID","EShapeChartLine","axis","ECommandChartAxisXPadding","ECommandChartAxisYPadding","ECommandChartTickXMajorCount","ECommandChartTickXMinorCount","ECommandChartTickYMajorCount","ECommandChartTickYMinorCount","EShapeChartAxes","getPlotArea","newPlotArea","EShapeRectangle","EShapeDefaults","FILL_ALPHA","newPlotAreaLabel","EShapeTextAlignVertical","OUTSIDE_TOP","getLine","newLine","sxh","syh","createLine","STROKE_WIDTH","getXAxis","getXAxisTickMajor","getXAxisTickMinor","newXAxis","EShapeBar","EShapeBarPosition","newXAxisLabel","OUTSIDE_BOTTOM","createXAxis","createChildren","deleteXAxis","deleteChildren","setXAxisPadding","newXAxisTickMajor","newXAxisTickMinor","createXAxisTickMajor","deleteXAxisTickMajor","setXAxisTickMajorCount","createXAxisTickMinor","deleteXAxisTickMinor","setXAxisTickMinorCount","getYAxis","getYAxisTickMajor","getYAxisTickMinor","newYAxis","newYAxisLabel","EShapeTextAlignHorizontal","OUTSIDE_LEFT","EShapeTextDirection","BOTTOM_TO_TOP","createYAxis","deleteYAxis","setYAxisPadding","newYAxisTickMajor","newYAxisTickMinor","createYAxisTickMajor","deleteYAxisTickMajor","setYAxisTickMajorCount","createYAxisTickMinor","deleteYAxisTickMinor","setYAxisTickMinorCount","EEditorShapeChartLine","getCheckXAxisLabel","self","getCheckXAxisMajorTickLabel","top","right","left","bottom","getCheckXAxisMinorTickLabel","getCheckYAxisLabel","getCheckYAxisMajorTickLabel","getCheckYAxisMinorTickLabel","getTextMajorTickCountLabel","DInputInteger","getTextMinorTickCountLabel","getTextPaddingLabel","EShapeChartLineActionRuntime","cloned","xmajorCount","ymajorCount","xminorCount","yminorCount","xmajors","initTicks","ymajors","xminors","yminors","workMajorPositions","Float64Array","xtick","xformatter","NumberFormatters","ytick","yformatter","plotArea","xpadding","ypadding","ticks","toStepScale","scale","getStep","span","power","floor","log","LN10","base","pow","getTickPositions","step","ratio","NaN","start","istart","ceil","stop","istop","nticks","updateTicksXMinor","mstep","lmin","lmax","mticks","minorCount","mtick","toStepMinor","updateTicksX","positions","format","updateTicksYMinor","updateTicksY","updateLines","xmin","xratio","lxmin","ymin","yratio","lymax","pointsValues","valueValues","valueValuesLength","valueTimes","times","time","xmax","ymax","valuesLength","timesLength","t","v","xspan","yspan","sx","sy","lxmax","lymin","EShapeActionRuntimeBase","EShapeChartLineRuntime","actions","EShapeRuntimeImpl","EShapeChartLines","EShapeInputs","EShapeRectangleRounded","STROKE_COLOR","EShapeActionValueMiscInput","EShapeActionValueMiscType","INPUT_TEXT","EShapeActionValueOnInputAction","EMIT_EVENT","EShapeActionValueChangeColor","EShapeActionValueChangeColorType","STROKE","EShapeActionValueChangeColorTarget","COLOR","HIGHLIGHT_COLOR","ALPHA","EShapeTableCell","columnValues","column","columnValueRuntime","EShapeTableColumnValueBody","EShapeTableColumnValueHeader","labelId","EShapeTableColumnValueType","NUMBER","EShapeTableColumnValue","getter","setter","header","body","getterId","setterId","formatterId","headerId","bodyId","EShapeTableColumn","EShapeTableIds","HEADER_ID","BODY_ID","EShapeTableRowSelectionType","SINGLE","MULTIPLE","EShapeTableRowSelection","toggle","getBody","setRowActive","addTo","lastIndex","getRow","cells","EShapeTableRow","_isCellUpdateAllowed","_isCellUpdateCalled","updateCells","disallowCellUpdate","allowCellUpdate","invoke","isCellUpdatedCalled","selectionId","EShapeTable","_columnWidths","_columnXs","onColumnChange","onRowChange","cell","newCellsHeader","newCellsBody","layoutCells","columnCount","toRowCountRequired","abs","isColumnDirty","rowsLength","rowCountRequired","rowCount","masterEven","masterOdd","irow","ACTION","masterCellEven","masterCellOdd","columnCountRequired","cellsLength","icolumn","rowHeight","rowHeightHalf","columnValuesLength","columnWidths","columnXs","columnWidthFactor","columnX","columnWidth","hcells","hcellsLength","hcell","ECommandShapeTableColumnValueAdd","ECommandShapeTableColumnValueBringForward","ECommandShapeTableColumnValueRemove","ECommandShapeTableColumnValueReplace","ECommandShapeTableColumnValueSendBackward","ECommandShapeTableRowHeight","ECommandShapeTableRowSelectionType","EDialogTableColumn","getSelectColumnValueTypeLabel","toSelectColumnValueTypeLabel","_selectType","DInputReal","getInputGetterLabel","_inputGetter","getInputSetterLabel","_inputSetter","getInputFormatLabel","_inputFormat","getSelectTextAlignLabel","CENTER","toTextAlignLabel","_selectAlign","EEditorShapeTable","getInputRowHeightLabel","inputRowHeight","getSelectRowSelectionTypeLabel","selectRowSelectionType","_columnDialog","newColumnDialog","columnDialog_1","_inputRowHeight","newInputRowHeight","_selectRowSelectionType","newSelectRowSelectionType","toSelectRowSelectionTypeLabel","onSelectionChangeSelectRowSelectionType","EShapeTableActionRuntime","table","imin","jmin","columnRuntime","formatter","EShapeTableCellActionValueChangeColor","FILL","getColorCode","activeHoverColor","UtilRgb","brighten","activeColor","hoverColor","disabledColor","darken","FILL_COLOR","EShapeActionValueChangeColorCode","EShapeTableBodyRuntime","lastRowIndex","lastColumnIndex","onClick","isSingle","isNotSingle","originalEvent","ctrlKey","shiftKey","onDblClick","interactionManager","getCell","focus","onOut","setRowHovered","onCellTouched","rowIndex","columnIndex","lastRowTouched","getLayer","view","isHovered","WORK_POINT","Point","EShapeTableBody","containsAbs","ax","ay","containsAbsBBox","containsText","containsChildren","toValueDefault","fromValueDefault","formatterDefault","EShapeTableColumnValueRuntime","parseToValue","parseFromValue","parseFormat","trim","formatter_1","expression","def","defLiteral","Function","EShapeTableHeaderRuntime","EShapeTableHeader","EShapeTableRuntime","EShapeTables","headerCell","EShapeStrokeSide","even","odd","cellEven","cellOdd","newHeaderLabel","getHeaderName","deserializeHeader","getBodyName","deserializeBody","EShapeExtensionFactories","_factories","factories","EDialogActionKeywordInput","getClipperRect","resolution","point","UtilHtmlElement","DInputSearch","EDialogActionKeywordBoard","onInputChange","_input","newInput","word","newKeywords","keywords","_keywords","filtered","keyword","newList","toId","_text","newText","wordWrap","DBoard","EDialogAction","showHideTypeLayout","blinkTypeLayout","transformTypeLayout","changeColorTypeLayout","changeColorTargetLayout","rotateTypeLayout","resizeTypeLayout","originXLayout","originYLayout","moveTypeLayout","openTypeLayout","openDialogTypeLayout","changeTextTypeLayout","miscTypeLayout","onInputActionLayout","whenTypeLayout","gestureTypeLayout","gestureOperationTypeLayout","selectLayerLayout","intervalLayout","amount","targetName","colorLayout","argument","contents","initialization","pointerEventsLayout","colorCode","alphaCode","brightness","blend","scaleLayout","checkBringToFrontLayout","inNewWindowLayout","onChangeBound","showHideType","blinkType","transformType","resizeType","changeColorTarget","openType","openDialogType","miscType","_themeShape","newThemeShape","EShapeActionValueType","SHOW_HIDE","themeShape","toTypeLabel","BLINK","CHANGE_COLOR","CHANGE_FILL_PERCENT","CHANGE_TEXT","CHANGE_CURSOR","OPEN","GESTURE","MISC","getSelectActionLabel","buttonKeyword","_buttonKeyword","newButtonKeyword","action_keyword","getButtonKeywordTitle","onButtonKeywordActive","onButtonKeywordInactive","boardKeyword","getBoardKeywordOffset","boardKeywordWidth","_boardKeyword","newBoardKeyword","_showHideType","newShowHideType","EShapeActionValueShowHideType","SHAPE","toShowHideTypeLabel","LAYER","_showHideTypeLayout","onChangeShowHideTypeLayout","_blinkType","newBlinkType","EShapeActionValueBlinkType","VISIBILITY","toBlinkTypeLabel","BRIGHTEN","DARKEN","OPACITY","COLOR_FILL","COLOR_STROKE","_blinkTypeLayout","onChangeBlinkTypeLayout","_transformType","newTransformType","EShapeActionValueTransformType","MOVE","toTransformTypeLabel","ROTATE","RESIZE","_transformTypeLayout","onChangeTransformTypeLayout","_changeColorType","newChangeColorType","toChangeColorTypeLabel","TEXT_OUTLINE","_changeColorTypeLayout","changeColorType","onChangeChangeColorTypeLayout","_changeColorTarget","newChangeColorTarget","COLOR_AND_ALPHA","toChangeColorTargetLabel","CODE","BRIGHTNESS","_changeColorTargetLayout","onChangeChangeColorTargetLayout","_rotateType","newRotateType","EShapeActionValueTransformRotateType","RELATIVE","toTransformRotateTypeLabel","ABSOLUTE","_rotateTypeLayout","rotateType","onChangeRotateTypeLayout","_resizeType","newResizeType","EShapeActionValueTransformResizeType","RELATIVE_SIZE","ABSOLUTE_SIZE","toTransformResizeTypeLabel","ABSOLUTE_HEIGHT","RELATIVE_HEIGHT","ABSOLUTE_WIDTH","RELATIVE_WIDTH","_resizeTypeLayout","onChangeResizeTypeLayout","_originX","newOriginX","_originXLayout","getInputOriginXLabel","originX","onChangeOriginXLayout","_originY","newOriginY","_originYLayout","getInputOriginYLabel","originY","onChangeOriginYLayout","_moveType","newMoveType","EShapeActionValueTransformMoveType","RELATIVE_X","toTransformMoveTypeLabel","RELATIVE_Y","ABSOLUTE_X","ABSOLUTE_Y","FORWARD_OR_BACKWARD","LEFT_OR_RIGHT","_moveTypeLayout","moveType","onChangeMoveTypeLayout","_openType","newOpenType","EShapeActionValueOpenType","DIAGRAM","newOpenTypeMenuItems","toOpenTypeLabel","PAGE","DIALOG","EShapeActionOpenExtensions","_openTypeLayout","onChangeOpenTypeLayout","_openDialogType","newOpenDialogType","EShapeActionValueOpenDialogType","newOpenDialogTypeMenuItems","toOpenDialogTypeLabel","INTEGER","REAL","BOOLEAN","DATE","TIME","DATETIME","EShapeActionOpenDialogExtensions","_openDialogTypeLayout","onChangeOpenDialogTypeLayout","_changeTextType","newChangeTextType","EShapeActionValueChangeTextType","toChangeTextTypeLabel","_changeTextTypeLayout","changeTextType","onChangeChangeTextTypeLayout","_miscType","newMiscType","newMiscTypeMenuItems","toMiscTypeLabel","INPUT_INTEGER","INPUT_REAL","WRITE_BOTH","WRITE_LOCAL","WRITE_REMOTE","HTML_ELEMENT","EXECUTE","EShapeActionMiscExtensions","_miscTypeLayout","onChangeMiscTypeLayout","_onInputAction","newOnInputAction","toOnInputActionLabel","_onInputActionLayout","onInputAction","onChangeOnInputActionLayout","DIALOG_TEXT","DIALOG_INTEGER","DIALOG_REAL","DIALOG_BOOLEAN","_whenType","newWhenType","UtilHtmlElementWhen","FOCUSED","CLICKED","toHtmlElementWhenLabel","DOUBLE_CLICKED","ALWAYS","_whenTypeLayout","getSelectWhenLabel","whenType","toWhenTypeValue","toWhenType","whenTypeValue","onChangeWhenTypeLayout","HTML_ELEMENT_WITHOUT_POINTER_EVENTS","_gestureType","newGestureType","EShapeActionValueGestureType","toGestureTypeLabel","_gestureTypeLayout","gestureType","onChangeGestureTypeLayout","_gestureOperationType","newGestureOperationType","fromGestureOperationType","toGestureOperationTypeLabel","toGestureOperationType","types","_gestureOperationTypeLayout","gestureOperationType","onChangeGestureOperationTypeLayout","_selectLayerLayout","onChangeSelectLayerLayout","newCondition","getInputConditionLabel","onChangeCondition","_interval","newInterval","_intervalLayout","newIntervalLayout","getInputIntervalLabel","interval","getInputIntervalUnitLabel","DAlignHorizontal","onChangeIntervalLayout","newSize","getInputSizeLabel","onChangeSize","_amount","newAmount","getInputAmountLabel","onChangeAmount","_contents","newContents","getInputValueLabel","onChangeContents","_initialization","newInitialization","getInputInitializationLabel","onChangeInitialization","_pointerEventsLayout","pointerEvents","onChangePointerEventsLayout","_pointerEvents","newPointerEvents","getCheckPointEventsLabel","_targetName","newTargetName","getInputTargetNameLabel","onChangeTargetName","newColor","DButtonColor","dialogNew","dialogCurrent","current","_colorLayout","newColorLayout","getButtonColorLabel","onChangeColorLayout","newTarget","getInputTargetLabel","onChangeTarget","_argument","newArgument","getInputArgumentLabel","onChangeArgument","_colorCode","newColorCode","getInputColorCodeLabel","onChangeColorCode","_alphaCode","newAlphaCode","getInputAlphaCodeLabel","onChangeAlphaCode","_brightness","newBrightness","getInputBrightnessLabel","onChangeBrightness","_blend","newBlend","getInputBlendLabel","onChangeBlend","_initial","newInitial","getInputInitialLabel","onChangeInitial","_step","newStep","getInputStepLabel","onChangeStep","_min","newMin","getInputMinLabel","onChangeMin","_max","newMax","getInputMaxLabel","onChangeMax","_scaleLayout","newScaleLayout","getInputScaleLabel","scaleMin","scaleMax","onChangeScaleLayout","_scaleMin","newScaleMin","_scaleMax","newScaleMax","getCheckBringToFrontLabel","_checkBringToFrontLayout","onChangeCheckBringToFrontLayout","_inNewWindow","newInNewWindow","getCheckInNewWindowLabel","_inNewWindowLayout","inNewWindow","onChangeInNewWindowLayout","_c","_d","EShapeActionValueShowHideShape","blinkColor","EShapeActionValueBlink","EShapeActionValueChangeColorTypes","pack","changeColor","EShapeActionValueChangeColorBrightness","EShapeActionValueTransformResize","EShapeActionValueTransformMove","EShapeActionValueTransformRotate","EShapeActionValueChangeFillPercent","EShapeActionValueChangeText","EShapeActionValueOpenDialog","EShapeActionValueOpenDialogExtension","EShapeActionValueOpen","EShapeActionValueOpenExtension","EShapeActionValueEmitEvent","EShapeActionValueChangeCursor","EShapeActionValueGesture","EShapeActionValueMiscEmitEvent","EShapeActionValueMiscWrite","EShapeActionValueMiscHtmlElement","EShapeActionValueMiscExecute","EShapeActionValueMiscExtension","EShapeActionValueShowHide","unpack","opetype","dialogType","operationType","EShapeActionValueMisc","EDialogDataMappingValue","inputSource","inputDestination","inputInitial","_inputSource","newInputSource","onInputSourceChanged","getInputSourceLabel","_newSource","updateRows","_inputDestination","newInputDestination","onInputDestinationChanged","getInputDestinationLabel","_newDestination","_inputInitial","newInputInitial","_table","newTable","DTable","columns","newColumnOptions","getTableColumnDataIdLabel","editable","sortable","getTableColumnMappedToLabel","mappedId","_ids","toIds","ids","newIds","scope","EShapeDataValueScope","PRIVATE","_onUpdateRowsBound","newOnUpdateRowsBound","onUpdateRows","_onUpdateRowsTimeout","_isRowsDirty","newRows","window","setTimeout","onUpdateRowsBound","mapper","_mapper","newSource","_lastSource","EShapeDataMapperImpl","destinations","_destinations","newDestination","_lastDestination","EShapeDataValueImpl","map","EDialogDataValue","layoutType","layoutScope","inputId","inputAs","layoutInterval","inputFormat","layoutRangeType","inputRangeFrom","inputRangeTo","inputCapacity","layoutOrder","_inputId","newInputId","getInputIdLabel","_inputAs","newInputAs","getInputAsLabel","_layoutType","newLayoutType","getSelectTypeLabel","selectType","newSelectType","EShapeDataValueType","newSelectTypeItems","getSelectTypeValueLabel","BOOLEAN_ARRAY","NUMBER_ARRAY","STRING","STRING_ARRAY","OBJECT","OBJECT_ARRAY","TICKER","EShapeDataValueExtensions","_layoutScope","newLayoutScope","getSelectScopeLabel","selectScope","_selectScope","newSelectScope","PUBLIC","getSelectScopeValueLabel","PROTECTED","_layoutInterval","newLayoutInterval","inputInterval","_inputInterval","newInputInterval","newInputFormat","_layoutRangeType","newLayoutRangeType","getSelectRangeTypeLabel","selectRangeType","_selectRangeType","newSelectRangeType","EShapeDataValueRangeType","getSelectRangeTypeValueLabel","FROM","TO","FROM_TO","_inputRangeFrom","newInputRangeFrom","getInputRangeFromLabel","_inputRangeTo","newInputRangeTo","getInputRangeToLabel","_inputCapacity","newInputCapacity","DInputIntegerAndLabel","getInputCapacityLabel","_layoutOrder","newLayoutOrder","getSelectOrderLabel","selectOrder","_selectOrder","newSelectOrder","EShapeDataValueOrder","ASCENDING","getSelectOrderValueLabel","DESCENDING","rangeType","order","as","range","to","toInterval","capacity","EDialogLayer","inputName","inputPositionLayout","inputSizeLayout","checkBackgroundLayout","colorBackgroundLayout","selectGestureLayout","checkVisibleLayout","checkInteractiveLayout","inputA","inputB","_inputName","newInputName","getInputNameLabel","_inputX","newInputX","_inputY","newInputY","_inputPositionLayout","getInputPositionLabel","inputX","inputY","_inputHeight","newInputHeight","_inputSizeLayout","inputHeight","_checkBackground","newCheckBackground","getCheckBackgroundLabel","onCheckBackgroundChange","colorBackground","_checkBackgroundLayout","getTextBackgroundLabel","checkBackground","_colorBackground","newColorBackground","_colorBackgroundLayout","_checkVisible","newCheckVisible","getCheckVisibleLabel","_checkVisibleLayout","checkVisible","_checkInteractive","newCheckInteractive","getCheckInteractiveLabel","_checkInteractiveLayout","checkInteractive","_selectGesture","newSelectGesture","getSelectGestureValueLabel","_selectGestureLayout","getSelectGestureLabel","selectGesture","EDialogProcessing","toReasonMalformedLabel","toReasonMalformedRange","lower","upper","toReasonMalformed","reason","toReasonTarget","targetLabel","toReasonTargetAt","atLabel","toReason","toButtonText","reject","footer","buttonOk","DDialogProcessing","dialogSelectThumbnailSize","getDialogSelectThumbnailSize","getDialogSelectThumbnailNotFound","newDialogTHumbnailNotFound","thumbnailSize","devicePixelRatio","svgSize","toSvgTexture","newDialogSelectWithThumbnailsOptions","controller","toThumbnail","onSelect","thumbnailNotFound","itemSize","textures","toImage","image_1","isString","newTexture_1","Texture","baseTexture","checkTextures","clearTimeoutId","clearTextures","url","off","valid","itemPadding","DDialogSelectListItem","with","tint","clearTimeout","close","newDialogSelectWithThumbnails","DDialogSelect","EDialogSnap","getSelectDirectionLabel","inputPosition","ESnapperTargetValueType","VERTICAL","getSelectDirectionValueLabel","HORIZONTAL","_inputPosition","newInputPosition","ESnapperTargetValue","EEditorAction","actionList","checkFocusable","labelTitle","inputTitle","labelShortcut","inputShortcut","labelCursor","dropdownCursor","actionDialog","addActionValue","DBaseState","DISABLED","removeActionValue","bringActionValueForward","sendActionValueBackward","_actionDialog","newActionDialog","_actionList","newActionList","onActionListDblClick","onActionListSet","unset","onActionListUnset","oldActionValue","actionDialog_1","newActionValue","replaceActionValue","getImageSource","onSelectionChangeActionList","setInteractive","onSelectionChangeCheckInteractive","_checkFocusable","newCheckFocusable","getCheckFocusableLabel","setFocusable","onSelectionChangeCheckFocusable","_labelShortcut","newLabelShortcut","getInputShortcutLabel","_inputShortcut","newInputShortcut","setShortcut","toNormalizedShortcut","trimmed","onSelectionChangeInputShortcut","_labelTitle","newLabelTitle","getInputTitleLabel","_inputTitle","newInputTitle","setTitle","toNormalizedTitle","onSelectionChangeInputTitle","_labelCursor","newLabelCursor","getDropdownCursorLabel","_dropdownCursor","newDropdownCursor","DDropdown","newDropdownCursorMenuItems","cursors","setCursor","_cursors","getCursors","onSelectionChangeDropdownCursor","EDialogCanvas","onDefaultChange","categoryDefault","default","categoryItems","layoutCategory","categoryItem","selectCategory","writable","layoutName","layoutLabel","layoutWidth","layoutHeight","layoutSummary","layoutDescription","layoutBackground","_layoutName","newLayoutName","_layoutLabel","_layoutWidth","newLayoutWidth","_layoutHeight","newLayoutHeight","getInputHeightLabel","_layoutCategory","newLayoutCategory","getSelectCategoryLabel","_selectCategory","newSelectCategory","_layoutSummary","newLayoutSummary","newLabelSummary","inputSummary","getInputSummaryLabel","_inputSummary","newInputSummary","DInputTextArea","_layoutDescription","newLayoutDescription","newLabelDescription","inputDescription","getInputDescriptionLabel","_inputDescription","newInputDescription","_layoutBackground","newLayoutBackground","newLabelBackground","inputBackground","getInputBackgroundLabel","_inputBackground","newInputBackground","diagramCanvas","isNumber","EEditorCanvas","_e","mask","shadow","toOptions","buttonEditor","border","DCornerMask","TOP_LEFT","onInputNameChange","_buttonEditor","newButtonEditor","editor_canvas","onButtonEditorActive","dialogEditor","_dialogEditor","newDialogEditor","render","renderer","textFormat","toFixed","textFormatDegree","PI","textUnformatDegree","parseFloat","EEditorCoordinate","_workRectangle","_updateInputShape","_updateInputId","_isUpdateInputShapeChanged","_renderInputsBound","renderInputs","inputPositionX","inputPositionY","inputPositionLeft","inputPositionTop","inputSizeX","inputSizeY","inputRotation","inputSkew","layoutAlignHorizontally","layoutAlignVertically","setId","_inputPositionX","newInputPositionX","getInputPositionXLabel","setPositionX","_inputPositionY","newInputPositionY","getInputPositionYLabel","setPositionY","_inputPositionLeft","newInputPositionLeft","getInputPositionLeftLabel","setPositionLeft","_inputPositionTop","newInputPositionTop","getInputPositionTopLabel","setPositionTop","_inputSizeX","newInputSizeX","getInputSizeXLabel","setSizeX","_inputSizeY","newInputSizeY","getInputSizeYLabel","setSizeY","_inputRotation","newInputRotation","getInputRotationLabel","editing","unformatter","setRotation","_inputSkew","newInputSkew","getInputSkewLabel","setSkew","_layoutAlignHorizontally","newLayoutAlignHorizontally","buttonAlignLeft","buttonAlignCenter","buttonAlignRight","buttonDistributeHorizontally","buttonDistributeVertically","buttonLock","_layoutAlignVertically","newLayoutAlignVertically","buttonAlignTop","buttonAlignMiddle","buttonAlignBottom","buttonRotateLeft","buttonRotateRight","_buttonAlignLeft","newButtonAlignLeft","editor_coordinate_align_left","getButtonAlignLeftTitle","saveForTranslate","alignLeft","_buttonAlignCenter","newButtonAlignCenter","editor_coordinate_align_center","getButtonAlignCenterTitle","alignCenter","_buttonAlignRight","newButtonAlignRight","editor_coordinate_align_right","getButtonAlignRightTitle","alignRight","_buttonAlignTop","newButtonAlignTop","editor_coordinate_align_top","getButtonAlignTopTitle","alignTop","_buttonAlignMiddle","newButtonAlignMiddle","editor_coordinate_align_middle","getButtonAlignMiddleTitle","alignMiddle","_buttonAlignBottom","newButtonAlignBottom","editor_coordinate_align_bottom","getButtonAlignBottomTitle","alignBottom","_buttonDistributeHorizontally","newButtonDistributeHorizontally","editor_coordinate_distribute_horizontally","getButtonDistributeHorizontallyTitle","distributeHorizontally","_buttonDistributeVertically","newButtonDistributeVertically","editor_coordinate_distribute_vertically","getButtonDistributeVerticallyTitle","distributeVertically","_buttonRotateLeft","newButtonRotateLeft","editor_coordinate_rotate_left","getButtonRotateLeftTitle","prepareRotate","saveForRotate","rotate","_buttonRotateRight","newButtonRotateRight","editor_coordinate_rotate_right","getButtonRotateRightTitle","_buttonLock","newButtonLock","lockCapability","COORDINATE","unlockCapability","hasPositionCapability","isLocked","updateInputs","EEditorDataMapping","listDataMappingValue","onListDataMappingValueSelectionChange","dialogDataMappingValue","addDataMappingValue","removeDataMappingValue","onListDataMappingValueSelectionChangeButtonDelete","bringDataMappingValueForward","onListDataMappingValueSelectionChangeButtonBringForward","sendDataMappingValueBackward","onListDataMappingValueSelectionChangeButtonSendBackward","_dialogDataMappingValue","newDialogDataMappingValue","_listDataMappingValue","newListDataMappingValue","destination","onListDataMappingValueDblClick","replaceDataMappingValue","onSelectionChangeListDataMappingValue","EEditorData","listDataValue","onListDataValueSelectionChange","dialogDataValue","addDataValue","removeDataValue","onListDataValueSelectionChangeButtonDelete","bringDataValueForward","onListDataValueSelectionChangeButtonBringForward","sendDataValueBackward","onListDataValueSelectionChangeButtonSendBackward","_dialogDataValue","newDialogDataValue","_listDataValue","newListDataValue","prefix","onListDataValueDblClick","replaceDataValue","onSelectionChangeListDataValue","EEditorLayerItem","iconsEye","iconsEyeSlash","work","_iconsEye","_iconsEyeSlash","_iconsWork","toLocal","global","getLeft","UtilPointerEvent","toGlobal","EEditorLayer","_isInitialized","onCanvasChange","newCanvas","isShown","onLayerChange","_onLayerChangeBound","newDialog","eye","eye_slash","eyeclick","onListDblClick","keydown","UtilKeyboardEvent","isDeleteKey","layerActive_1","oldValue_1","dialogLayer","onListLayerChange","listLayer","layerActive","forcibly","oldCanvas","onLayerChangeBound","isActiveDeletable","isActiveNotLast","isActiveNotFirst","updateModifier","getShapeTypeTheme","toShapeLabel","shapeType","name_1","EMBEDDED","EShapeEmbedded","toShapeTypeLabel","EEditorSearch","_finder","finder","inputSearch","getSelectStateLabel","selectState","buttonExecute","_inputSearch","newInputSearch","search","activate","newSelectTypeMenuItems","newSelectTypeMenuItem","newSelectTypeMenuItemShape","CIRCLE","SEMICIRCLE","RECTANGLE","RECTANGLE_ROUNDED","TRIANGLE","TRIANGLE_ROUNDED","CONNECTOR_LINE","CONNECTOR_ELBOW","IMAGE","GROUP","BAR","EMBEDDED_LAYER","getSelectTypeValue","_selectState","newSelectState","newSelectStateMenuItem","toStateLabel","getSelectStateValue","_buttonExecute","newButtonExecute","DButtonPrimary","getButtonExecuteTitle","editor_search","onButtonExecuteActive","indicator","indicatorExecute","id_1","type_1","state_1","connector","resolve","_indicatorExecute","newIndicatorExecute","DIndicatorProcessing","searching","_searching","searched","_searched","searchedAt","_searchedAt","Date","now","_requested","_timeoutId","newWord","timeoutId","doSearch","Promise","found","isArray","toTitle","onListItemDown","root","dialogError","_dialogError","newDialogError","DDialogMessage","message","getDialogErrorLabel","_dialogProcessing","newDialogProcessing","EEditorShape","piece","_isPieceEnabled","_pieceExcluder","exclude","_controller","_isChangeable","changeable","_isDanglingConnectorAllowed","dangling","layoutChangeTo","buttonFill","buttonFillColor","layoutTexture","inputFillPercent","layoutFillDirection","buttonStroke","buttonStrokeColor","inputStrokeWidth","inputStrokeAlign","layoutStrokeSide","textCorner","inputCornerRadius","layoutCorner","layoutLine","selectLineStyle","selectLineType","layoutLineTail","selectLineTailType","layoutLineTailSize","buttonLineTailColor","inputLineTailMargin","layoutLineHead","selectLineHeadType","layoutLineHeadSize","buttonLineHeadColor","inputLineHeadMargin","_layoutChangeTo","newLayoutChangeTo","newTextChangeToLabel","buttonCircle","buttonSemicircle","buttonRectangle","buttonRectangleRounded","buttonTriangle","buttonTriangleRounded","buttonLine","buttonLineConnector","buttonElbowConnector","buttonPolygon","buttonImage","buttonGraphicPiece","newButtonExtensionFactory","isExtensionReplacable","isFunction","newButtonExtension","buttonGroup","buttonUngroup","getTextChangeToLabel","selectDialog","toExtensionTitle","newDialogSelectExtensionFactory","toCreator","_buttonCircle","newButtonCircle","shape_circle","getButtonCircleTitle","EShapeCircle","_buttonSemicircle","newButtonSemicircle","shape_semicircle","getButtonSemicircleTitle","EShapeSemicircle","_buttonRectangle","newButtonRectangle","shape_rectangle","getButtonRectangleTitle","_buttonRectangleRounded","newButtonRectangleRounded","shape_rectangle_rounded","getButtonRectangleRoundedTitle","_buttonTriangle","newButtonTriangle","shape_triangle","getButtonTriangleTitle","EShapeTriangle","_buttonTriangleRounded","newButtonTriangleRounded","shape_triangle_rounded","getButtonTriangleRoundedTitle","EShapeTriangleRounded","_buttonLine","newButtonLine","shape_line","getButtonLineTitle","replaceLine","EShapeLine","SIZE","POINTS","_buttonPolygon","newButtonPolygon","shape_polygon","getButtonPolygonTitle","replacePolygon","POLYGON","EShapePolygon","CLOSED","createPolygon","_buttonLineConnector","newButtonLineConnector","shape_line_connector","getButtonLineConnectorTitle","replaceLineConnector","replaceConnector","_buttonElbowConnector","newButtonElbowConnector","shape_elbow_connector","getButtonElbowConnectorTitle","replaceElbowConnector","EShapeConnectorElbow","_buttonImage","newButtonImage","DButtonFile","editor_image","DButtonFileAs","DATA_URL","getButtonImageTitle","dataUrl","toImageElement","EShapeImage","_buttonGraphicPiece","newButtonGraphicPiece","graphic_piece","getButtonGraphicPieceTitle","onButtonGraphicPieceActive","dialogSelectGraphicPiece","_dialogSelectGraphicPiece","newDialogSelectGraphicPiece","toPieceThumbnail","newDialogSelectGraphicPieceImage","categories","newDialogSelectGraphicPieceNoImage","newDialogSelectGraphicPieceNoController","newDialogSelectGraphicPieceController","onDialogSelectGraphicPieceSelect","graphicPiece","categoryId","pieces","toDialogSelectGraphicPieceResult","pieceId","EShapeEmbeddeds","_buttonGroup","newButtonGroup","shape_group","getButtonGroupTitle","_buttonUngroup","newButtonUngroup","shape_ungroup","getButtonUngroupTitle","ungroup","_buttonFill","newButtonFill","getButtonFillLabel","setFillEnabled","_buttonFillColor","newButtonFillColor","getButtonFillColorTitle","setFill","_inputFillPercent","newInputFillPercent","getInputFillPercentTitle","setFillPercent","_layoutFillDirection","newLayoutFillDirection","buttonFillDirectionTop","buttonFillDirectionRight","buttonFillDirectionBottom","buttonFillDirectionLeft","_buttonFillDirectionGroup","DButtonGroup","_buttonFillDirectionTop","newButtonFillDirectionTop","fill_direction_top","getButtonFillDirectionTopTitle","buttonFillDirectionGroup","setFillDirection","EShapeFillDirection","_buttonFillDirectionRight","newButtonFillDirectionRight","fill_direction_right","getButtonFillDirectionRightTitle","_buttonFillDirectionBottom","newButtonFillDirectionBottom","fill_direction_bottom","getButtonFillDirectionBottomTitle","_buttonFillDirectionLeft","newButtonFillDirectionLeft","fill_direction_left","getButtonFillDirectionLeftTitle","_buttonStroke","newButtonStroke","getButtonStrokeLabel","setStrokeEnabled","_buttonStrokeColor","newButtonStrokeColor","setStroke","_inputStrokeWidth","newInputStrokeWidth","getInputStrokeWidthLabel","setStrokeWidth","_inputStrokeAlign","newInputStrokeAlign","getInputStrokeAlignLabel","setStrokeAlign","_layoutStrokeSide","newLayoutStrokeSide","buttonStrokeSideTop","buttonStrokeSideRight","buttonStrokeSideBottom","buttonStrokeSideLeft","buttonStrokeExpandable","buttonStrokeShrinkable","buttonStrokeScalableDotDash","_buttonStrokeSideTop","newButtonStrokeSideTop","stroke_side_top","getButtonStrokeSideTopTitle","setStrokeSide","_buttonStrokeSideRight","newButtonStrokeSideRight","stroke_side_right","getButtonStrokeSideRightTitle","_buttonStrokeSideBottom","newButtonStrokeSideBottom","stroke_side_bottom","getButtonStrokeSideBottomTitle","_buttonStrokeSideLeft","newButtonStrokeSideLeft","stroke_side_left","getButtonStrokeSideLeftTitle","_textCorner","newTextCorner","getTextCornerLabel","_inputCornerRadius","newInputCornerRadius","setRadius","_layoutCorner","newLayoutCorner","buttonCornerTopLeft","buttonCornerTopRight","buttonCornerBottomRight","buttonCornerBottomLeft","_buttonCornerTopLeft","newButtonCornerTopLeft","corner_top_left","getButtonCornerTopLeftTitle","setCorner","_buttonCornerTopRight","newButtonCornerTopRight","corner_top_right","getButtonCornerTopRightTitle","TOP_RIGHT","_buttonCornerBottomRight","newButtonCornerBottomRight","corner_bottom_right","getButtonCornerBottomRightTitle","BOTTOM_RIGHT","_buttonCornerBottomLeft","newButtonCornerBottomLeft","corner_bottom_left","getButtonCornerBottomLeftTitle","BOTTOM_LEFT","_layoutLine","newLayoutLine","textLine","buttonLineClosed","buttonLineLock","_textLine","newTextLine","getTextLineLabel","_buttonLineLock","newButtonLineLock","_selectLineStyle","newSelectLineStyle","EShapeStrokeStyle","getSelectLineStyleLabel","DOTTED","DOTTED_DENSELY","DOTTED_LOOSELY","DASHED","DASHED_DENSELY","DASHED_LOOSELY","setLineStyle","DOTTED_MASK","DASHED_MASK","_selectLineType","newSelectLineType","newSelectLineTypeMenuItems","setPointsStyle","FORMATTER_MASK","getSelectLineTypeLabel","EShapePointsFormatters","FORMATTER_SHIFT","_buttonLineClosed","newButtonLineClosed","line_closed","getButtonLineClosedTitle","_buttonStrokeExpandable","newButtonStrokeExpandable","stroke_expandable","getButtonStrokeExpandableTitle","setStrokeStyle","NON_EXPANDING_WIDTH","_buttonStrokeShrinkable","newButtonStrokeShrinkable","stroke_shrinkable","getButtonStrokeShrinkableTitle","NON_SHRINKING_WIDTH","_buttonStrokeScalableDotDash","newButtonStrokeScalableDotDash","stroke_scalable_dot_dash","getButtonStrokeScalableDotDashTitle","NON_SCALING_DOT_AND_DASH","_layoutLineTail","newLayoutLineTail","textLineTail","buttonLineTailLock","_textLineTail","newTextLineTail","getTextLineTailLabel","_buttonLineTailLock","newButtonLineTailLock","_selectLineTailType","newSelectLineTailType","getSelectLineTailTypeLabel","setLineTailType","_layoutLineTailSize","newLayoutLineTailSize","inputLineTailSizeX","inputLineTailSizeY","_inputLineTailSizeX","newInputLineTailSizeX","setLineTailSizeX","_inputLineTailSizeY","newInputLineTailSizeY","setLineTailSizeY","_buttonLineTailColor","newButtonLineTailColor","setLineTailColor","_inputLineTailMargin","newInputLineTailMargin","getInputLineTailMarginLabel","setLineTailMargin","_layoutLineHead","newLayoutLineHead","textLineHead","buttonLineHeadLock","_textLineHead","newTextLineHead","getTextLineHeadLabel","_buttonLineHeadLock","newButtonLineHeadLock","_selectLineHeadType","newSelectLineHeadType","getSelectLineHeadTypeLabel","setLineHeadType","_layoutLineHeadSize","newLayoutLineHeadSize","inputLineHeadSizeX","inputLineHeadSizeY","_inputLineHeadSizeX","newInputLineHeadSizeX","setLineHeadSizeX","_inputLineHeadSizeY","newInputLineHeadSizeY","setLineHeadSizeY","_buttonLineHeadColor","newButtonLineHeadColor","setLineHeadColor","_inputLineHeadMargin","newInputLineHeadMargin","getInputLineHeadMarginLabel","setLineHeadMargin","_layoutTexture","newLayoutTexture","buttonTextureImage","buttonTextureGradient","buttonTextureFitTo","buttonTextureClear","_buttonTextureImage","newButtonTextureImage","getButtonTextureImageTitle","imageElement","setImage","_buttonTextureGradient","newButtonTextureGradient","DButtonColorGradient","texture_gradient","getButtonTextureGradientTitle","toGradientImageUrl","setGradient","toObject","fromObject","_buttonTextureFitTo","newButtonTextureFitTo","DButton","texture_fit_to","getButtonTextureFitToTitle","fitToImage","_buttonTextureClear","newButtonTextureClear","texture_clear","getButtonTextureClearTitle","clearImage","hasConnector","ngroupable","fillEnable","fillDirection","strokeEnable","hasStrokeSide","hasLine","lineStrokeMask","hasLineTail","markerTail","markerTailFill","buttonLineTailColorValue","hasLineHead","markerHead","markerHeadFill","buttonLineHeadColorValue","hasBorderRadius","EEditorSnap","onSnapperChange","snapperTarget","onSnapperTargetChange","snapperGrid","onSnapperGridChange","buttonLabel","buttonGrid","buttonGridEye","inputGridSize","buttonTarget","buttonTargetNew","buttonTargetDelete","buttonTargetBringForward","buttonTargetSendBackward","buttonTargetEye","listTarget","listSnapTarget","_buttonLabel","newButtonLabel","_buttonTarget","newButtonTarget","getButtonTargetLabel","_buttonTargetNew","newButtonTargetNew","getButtonTargetNewTitle","onButtonTargetNewActive","dialogTarget","_buttonTargetDelete","newButtonTargetDelete","getButtonTargetDeleteTitle","_buttonTargetBringForward","newButtonTargetBringForward","getButtonTargetBringForwardTitle","_buttonTargetSendBackward","newButtonTargetSendBackward","getButtonTargetSendBackwardTitle","_buttonTargetEye","newButtonTargetEye","getButtonTargetEyeTitle","_dialogTarget","newDialogTarget","_listTarget","newListTarget","getListTargetItemLabel","onListTargetDblClick","_buttonGrid","newButtonGrid","getButtonGridLabel","_buttonGridEye","newButtonGridEye","getButtonGridEyeTitle","_inputGridSize","newInputGridSize","getInputGridSizeLabel","EEditorText","_fromShapeTextRegEx","_toShapeTextRegEx","getTextFontLabel","dropdownFontFamily","buttonFontColor","inputFontSize","buttonFontSizeDecrease","buttonFontSizeIncrease","buttonFontItalic","buttonFontBold","buttonOutline","buttonOutlineColor","inputOutlineWidth","getTextAlignLabel","buttonAlignOutsideLeft","buttonAlignOutsideRight","buttonAlignOutsideTop","buttonAlignOutsideBottom","buttonDirectionLeftToRight","buttonDirectionTopToBottom","buttonDirectionBottomToTop","buttonDirectionRightToLeft","buttonClipping","buttonFitting","getTextSpacingLabel","inputSpacingHorizontal","inputSpacingVertical","inputPaddingHorizontal","inputPaddingVertical","getTextOffsetLabel","inputOffsetHorizontal","inputOffsetVertical","_inputText","getInputTextHeight","setText","_dropdownFontFamily","newDropdownFontFamily","fontFamilies","newDropdownFontFamilyMenuItems","setTextFamily","fontFamily","_fontFamilies","getFontFamilies","_buttonFontColor","newButtonFontColor","setTextColor","_inputFontSize","newInputFontSize","setTextSize","_buttonFontSizeDecrease","newButtonFontSizeDecrease","editor_font_size_decrease","getButtonFontSizeDecreaseTitle","setTextSizeDelta","_buttonFontSizeIncrease","newButtonFontSizeIncrease","editor_font_size_increase","getButtonFontSizeIncreaseTitle","_buttonFontItalic","newButtonFontItalic","italic","getButtonFontItalicTitle","setTextStyle","EShapeTextStyle","ITALIC","NORMAL","_buttonFontBold","newButtonFontBold","bold","getButtonFontBoldTitle","setTextWeight","EShapeTextWeight","BOLD","_buttonOutline","newButtonOutline","getButtonOutlineLabel","setTextOutlineEnabled","_buttonOutlineColor","newButtonOutlineColor","setTextOutlineColor","_inputOutlineWidth","newInputOutlineWidth","getInputOutlineWidthLabel","setTextOutlineWidth","_buttonAlignOutsideLeft","newButtonAlignOutsideLeft","text_align_outside_left","getButtonAlignOutsideLeftTitle","setTextAlignHorizontal","text_align_left","text_align_center","text_align_right","_buttonAlignOutsideRight","newButtonAlignOutsideRight","text_align_outside_right","getButtonAlignOutsideRightTitle","OUTSIDE_RIGHT","_buttonAlignOutsideTop","newButtonAlignOutsideTop","text_align_outside_top","getButtonAlignOutsideTopTitle","setTextAlignVertical","text_align_top","text_align_middle","MIDDLE","text_align_bottom","_buttonAlignOutsideBottom","newButtonAlignOutsideBottom","text_align_outside_bottom","getButtonAlignOutsideBottomTitle","_buttonDirectionLeftToRight","newButtonDirectionLeftToRight","text_direction_left_to_right","getButtonDirectionLeftToRightTitle","setTextDirection","LEFT_TO_RIGHT","_buttonDirectionTopToBottom","newButtonDirectionTopToBottom","text_direction_top_to_bottom","getButtonDirectionTopToBottomTitle","TOP_TO_BOTTOM","_buttonDirectionBottomToTop","newButtonDirectionBottomToTop","text_direction_bottom_to_top","getButtonDirectionBottomToTopTitle","_buttonDirectionRightToLeft","newButtonDirectionRightToLeft","text_direction_right_to_left","getButtonDirectionRightToLeftTitle","RIGHT_TO_LEFT","_buttonClipping","newButtonClipping","getButtonClippingLabel","setTextClipping","_buttonFitting","newButtonFitting","getButtonFittingLabel","setTextFitting","_inputSpacingHorizontal","newInputSpacingHorizontal","setTextSpacingHorizontal","_inputSpacingVertical","newInputSpacingVertical","setTextSpacingVertical","_inputPaddingHorizontal","newInputPaddingHorizontal","setTextPaddingHorizontal","_inputTextPaddingVertical","newInputPaddingVertical","setTextPaddingVertical","_inputOffsetHorizontal","newInputOffsetHorizontal","setTextOffsetHorizontal","_inputOffsetVertical","newInputOffsetVertical","setTextOffsetVertical","textFamily","buttonOutlineColorValue","COMPARATOR","EEditorTreeSelection","DTableDataSelectionType","toIndex","onNodeChange","nodes","addRange","includeFrom","includeTo","rowIndices","shift","toArray","toSortedArray","toMap","utils","EventEmitter","EEditorTree","_updatedParts","parts","_layerOrder","buttonBringToFront","buttonSendToBack","_buttonBringToFront","newButtonBringToFront","arrow_to_top","getButtonBringToFrontTitle","bringForward","sendBackward","_buttonSendToBack","newButtonSendToBack","arrow_to_bottom","getButtonSendToBackTitle","sendToBack","ORDER_IN_LAYER","DTableDataTree","reverse","toChildren","preventDefault","EEditorValidation","_validator","validator","buttonRevalidate","_buttonRevalidate","newButtonRevalidate","refresh","getButtonRevalidateTitle","onButtonValidateActive","dialogProcessing_1","dialogProcessing","data_1","results","cancel","EToolGroupImpl","_isSuspended","_active","_activeParameter","parameter","oldActive","oldActiveParameter","deactivate","suspend","resume","isSuspended","EToolImpl","_isActive","onActivate","onDeactivate","EToolSelectArea","beginFill","drawRect","endFill","Graphics","EToolSelectModifierContainer","Container","EToolSelectModifierHitArea","_modifier","getAnchorSize","q","getAnchorRotationDistance","r","getAnchorRotationSize","setLastHitAnchor","ESnapperModifierAnchor","TOP_CENTER","MIDDLE_RIGHT","BOTTOM_CENTER","MIDDLE_LEFT","EToolSelectModifier","_scaleBound","_scaleBoundInverse","_isAllowed","_lastHitAnchor","hitArea","_anchorBase","_anchorsScale","_anchorRotate","onPrerender","scale0","getParentScale","scale1","worldAlpha","renderable","parentParent","getLastHitAnchor","anchor","scaleInverse","l","o","anchorBase","anchorRotate","anchorsScale","anchorScale","allow","isAllowed","disallow","removeChild","EShapeContainer","UtilShapeConnectorTransformData","tailVector","headVector","UtilShapeConnectorTransforms","applyInverse","editorTailVector","editorTailVectorX","editorTailVectorY","newTailLocalX","newTailLocalY","editorHeadVector","editorHeadVectorX","editorHeadVectorY","newHeadLocalX","newHeadLocalY","ECommandShapePropertyLineStyle","initLeft","rect","initCenter","initRight","initTop","initMiddle","initBottom","initWidth","initHeight","initZero","updateMin","valueA","valueB","updateMax","updateSum","finishupIdentity","finishupAverage","assingX","assingY","applyLeft","diff","applyCenter","applyRight","applyTop","applyMiddle","applyBottom","EToolSelectSelection","modifierContainer","_modifierContainer","_originGlobal","_originLocal","_rotationAxisGlobal","_scale","_scaleAxis0","_scaleAxis1","_scaleDet","_scaleDetInverse","_scaleTransform","Matrix","_scaleTransformInverse","_scaleAnchor","_shapeBound","_shapeBoundRect","_alignPoint","_alignRectangle","_shiftPoint1","_shiftPoint2","_transform","_translateDelta","_isUpdated","_lockCount","toParts","bound","tempRect","getBoundsInternal","enlarge","shapeOfParent","sharedParent","newLength","oldShapeRoot","expectedLast","newLast","cparent","DBase","cw","ch","pl","pt","getTop","pr","getRight","pb","getBottom","cx","cy","ox","oy","moveTo","prepareTranslateSnap","DDiagramEditor","prepareForTranslate","prepareRotateSnap","prepareForRotate","prepareScaleSnap","prepareForScale","prepareTranslate","originGlobal","originLocal","worldTransform","rotationAxisGlobal","vx","vy","vi","prepareScale","prepareScaleOriginAndAxes","scaleTransform","setTransform","translate","prepareScaleAxes","prepareScaleAxis","origin","x0","y0","x1","y1","axis0","axis1","det","saveForScale","initSpace","finishup","assing","shapesLength","isFirst","getBounds","dataLength","distribute","spaceTotal","shapeFactory","parent_3","parent_4","hasUngroupable","parent_5","isOn","delta","parent_6","parent_7","previous","parent_8","parent_9","EShapeResourceManagerSerialization","DDiagramLayer","addUuid","updateUuid","shapeSet","item29","version","DDiagramSerializedVersion","getBaseLayerLabel","parsed_1","DDiagrams","toPieceData","pieceData","deserialize_","EShapeResourceManagerDeserialization","shapePromise","deserializeAll","calcShift","layerChildren","work1","work2","firstTransform","gx","gy","hitTestBBox","targetTransform","dx","dy","toInternalVector","vector","detInverse","snap","toTranslationSnapped","rotateTo","nx","ny","dot","acos","baseRotation","toRotationSnapped","getScale","keepRatio","getScaleXY","getScaleY","getScaleX","scaleX","scaleY","calcScale","vx0","vy0","vx1","vy1","vx2","vy2","setScale","makeScaleTransform","scaleAnchor","toScaleSnapped","save","parent_10","deletor","stored","UtilShapeAreaSelect","isShapeIn","_work","findShapes","container","UtilHitTest","offsets","OFFSETS","newOffsets","hitTest","EToolSelect","toSelectionOptions","_area","_applicationLayer","_onDownPoint","_onMovePoint","_onUpPoint","_areaRect","_mode","_isFirstMove","_childSelectTime","_childSelectChild","_isTransformationAllowed","transformation","_isDeletionAllowed","deletion","_onDownBound","onDown","_onMoveBound","onMove","_onUpBound","onUp","_onKeydownBound","onKeydown","_onKeyupBound","onKeyup","_onDblClickBound","down","altKey","diagramLayer","isAddMode","onSelectEnd","global_1","onDownPoint","hitObject","commandController","area","oldApplicationLayer","oldInteractionManager","plugins","interaction","move","onUpBound","up","upoutside","newApplicationLayer","newInteractionManager","applicationLayer","global_2","onMovePoint","isFirstMove","modifierHit","areaRect","foundShapes","childSelectChild","getRotateAmount","getScaleAmount","getTranslateAmount","isArrowUpKey","isArrowRightKey","isArrowDownKey","isArrowLeftKey","isSelectAllKey","EToolShapeAcceptorEdgeRenderer","_edge","_circles","newCircles","_foundEdges","_radius","SIZE_X","_type","_x","_y","_ox","_oy","_isDirty","_isBegan","_doUpdateBound","_timeout","doUpdate","STROKE_ALPHA","begin","end","getCircleSize","circles","circlesLength","edges","findAll","edgesLength","isize","distance","edgeCenter","center","circle","EToolShapeAcceptorEdge","canvasMode","_canvasMode","_renderer","_shape","_edges","newEdges","layerPositionX","layerPositionY","layerPosition","lx","ly","_loop_1","internal","matrix_1","EShapeAcceptors","this_1","matrix","acceptorEdge","coordinateToEdges","aes","aesx","aesy","aex","aey","toGridIndex","coordinate","toCoordinate","aesxh","aesyh","aex0","aey0","aex1","aey1","aex2","aey2","aex3","aey3","x2","y2","x3","y3","x4","y4","x5","y5","ix0","iy0","ix1","iy1","ix","iy","round","find","gix","giy","foundEdges","foundEdge","dd","di","xtx","yty","lx0","ly0","lx1","ly1","lx2","ly2","limit","threshold","findAllS1","ir","findAllS2","iresult","compare","iymax","foundEdgeLocal","sd","ad","bd","EToolShapeCreateLineConnectorPhase","OFF","DONE","EToolShapeCreateLineConnector","_options","_phase","_onKeyDownBound","onKeyDown","_onSetBound","onSet","_onUnsetBound","onUnset","_connector","onTail","onHead","onDone","isTailAccepted","onTailAccepted","onTailUnaccepted","isDanglingEdgeAllowed","getTailType","isHeadAccepted","onHeadAccepted","onHeadUnaccepted","isSameAcceptor","getHeadType","onCancel","isCancelKey","EToolShapeCreateElbowConnector","EToolShapeCreateLine","_isNewPoint","_line","toSnapped","length_1","dangle","angle","cos","sin","toValues","prevx","prevy","toShape","EToolShapeCreatePolygon","EToolShapeCreate","_creator","toResized","EToolShapeEditLineHitArea","_capability","hitPoint","isEditing","pointsClosed","closed","hasTail","hasHead","thresholdLine","thresholdAnchor","p0","p1","calcHitPoint","setLastHitSegment","p0x","p0y","p1x","p1y","d0x","d0y","d1x","d1y","EToolShapeEditLineBase","_points","_pointsStyle","_isEditing","_isEdited","_lastHitSegment","_lastHitSegmentPosition","_targetCopy","_targetIndex","_unformatted","plength","segments","_formatted","reshape","onShapeUnset","onShapeSet","_formatter","toTransform","_workTransform","graphics","pointsLength","pointsStyle","hs","colorHit","segment","unformatted","uvalues","usegments","formatted","fvalues","lineStyle","lineTo","targetIndex","pprevx","pprevy","lastHitAnchor","onTargetChange","lastHitSegment","ti","targetCopy","previousIndex","onTargetMove","onTargetNotMove","EToolShapeEditLineConnector","_edgeTail","_edgeHead","toPoints","transformPosition","tailPoint","bodyValues","bodyValuesLength","middlePoint","headPoint","boundary","toPointsBoundary","toFitted","EShapeConnectorBodies","edgeTail","edgeHead","EToolShapeEditLine","toPointsStyle","toFormatter","newValues","EToolShapeEditPolygon","UtilAjax","send","method","settings","isCompleted","makeOnError","error","xhr","XMLHttpRequest","onload","status_1","status","success","responseText","statusText","onError","onerror","onabort","headers","setRequestHeader","timeout","ontimeout","abort","UtilCanvasCategory","_promise","fetch","all","doFetch","resolveds","resolved","toFetched","toItems","toDefault","toWritable","getDefaultCategory","isCategoryWritable","toCategoryId","toCategoryLabel","UtilCanvas","_f","_g","_h","_j","_k","getDefaultName","getDefaultLabel","getDefaultWidth","getDefaultHeight","getDefaultSummary","getDefaultDescription","getDefaultBackgroundColor","getDefaultBackgroundAlpha","UtilDataValues","parentData","retain","retained","UtilDate","getFormatter","DATE_FORMATTER","EEditorCanvasLegacy","newLayout","newLayoutItems","newLabelCategory","onCanvasValueFetched","diagram_1","FGraphicEditor","toTheme","_theme","getMargin","_toPieceId","_isEditable","toIcons","_validation","toValidation","_search","toSearch","_application","DApplication","application","_editorButtonGroup","getIconBuilder","validation","force","initDiagram","initHeader","initTools","initEditors","initCopyAndPaste","initShortcut","getDiagramContainer","setDocumentController","newHeader","getHeaderContainer","_header","getToolButtonLayoutContainer","newToolButtonLayout","toolShapeButtonSelect","toolShapeButtonGroup","disable","getEditorLayoutContainer","newEditorLayout","isEditorCanvasCompatible","editorCanvas","editorButtonCoordinate","UtilClipboard","getLayerBase","clipboardData","toolShapeSelect","setData","getData","initShortcutShape","initShortcutTree","groupShortcut","getButtonGroupShortcut","ungroupShortcut","getButtonUngroupShortcut","bringToFrontShortcut","getButtonBringToFrontShortcut","bringToForwardShortcut","getButtonBringForwardShortcut","sendBackwardShortcut","getButtonSendBackwardShortcut","sendToBackShortcut","getButtonSendToBackShortcut","newToolFileButtons","margin_1","setWidth","stage","_toolFileButtonCreate","newToolFileButtonCreate","getToolFileButtonCreateTitle","getToolFileButtonCreateShortcut","getToolFileButtonTheme","onToolFileButtonCreateActive","dialogDiscard","dialogCreate","_toolFileButtonOpen","newToolFileButtonOpen","getToolFileButtonOpenTitle","getToolFileButtonOpenShortcut","onToolFileButtonOpenActive","dialogSelect","_toolFileButtonSave","newToolFileButtonSave","getToolFileButtonSaveTitle","getToolFileButtonSaveShortcut","onToolFileButtonSaveActive","validate","DCommandSave","dialogSaveProcessing_1","dialogSaveProcessing","toolFileButtonSave","editorValidation","editorButtonValidation","_toolFileButtonSaveAs","newToolFileButtonSaveAs","save_as","getToolFileButtonSaveAsTitle","getToolFileButtonSaveAsShortcut","onToolFileButtonSaveAsActive","dialogSaveAs","toolFileButtonSaveAs","_toolFileButtonUpload","newToolFileButtonUpload","upload","getToolFileButtonUploadTitle","getToolFileButtonUploadShortcut","checker","onToolFileButtonUploadOpen","_toolFileButtonDownload","newToolFileButtonDownload","download","getToolFileButtonDownloadTitle","getToolFileButtonDownloadShortcut","onToolFileButtonDownloadActive","UtilFileDownloader","_toolFileButtonUndo","newToolFileButtonUndo","DButtonUndo","getToolFileButtonUndoTitle","getToolFileButtonUndoShortcut","_toolFileButtonRedo","newToolFileButtonRedo","DButtonRedo","getToolFileButtonRedoTitle","getToolFileButtonRedoShortcut","_toolFileButtonDelete","newToolFileButtonDelete","getToolFileButtonDeleteTitle","getToolFileButtonDeleteShortcut","onToolFileButtonDelete","dialogDelete","_toolShapeButtonGroup","newToolShapeButtonGroup","_toolShapeButtonSelect","newToolShapeButtonSelect","getToolShapeButtonSelectTitle","getToolShapeButtonTheme","onToolShapeButtonSelectActive","onToolShapeButtonSelectInactive","toolGroup","newToolShapeButtonCreate","onToolShapeButtonCreateActive","onToolShapeButtonCreateInactive","toolShapeCreate","_toolShapeButtonCircle","newToolShapeButtonCircle","getToolShapeButtonCircleTitle","_toolShapeButtonSemicircle","newToolShapeButtonSemicircle","getToolShapeButtonSemicircleTitle","_toolShapeButtonRectangle","newToolShapeButtonRectangle","getToolShapeButtonRectangleTitle","_toolShapeButtonRectangleRounded","newToolShapeButtonRectangleRounded","getToolShapeButtonRectangleRoundedTitle","_toolShapeButtonTriangle","newToolShapeButtonTriangle","getToolShapeButtonTriangleTitle","_toolShapeButtonTriangleRounded","newToolShapeButtonTriangleRounded","getToolShapeButtonTriangleRoundedTitle","_toolShapeButtonLine","newToolShapeButtonLine","getToolShapeButtonLineTitle","onToolShapeButtonLineActive","onToolShapeButtonLineInactive","toolShapeEditLine","toolShapeCreateLine","_toolShapeButtonPolygon","newToolShapeButtonPolygon","getToolShapeButtonPolygonTitle","onToolShapeButtonPolygonActive","onToolShapeButtonPolygonInactive","toolShapeEditPolygon","toolShapeCreatePolygon","_toolShapeButtonLineConnector","newToolShapeButtonLineConnector","getToolShapeButtonLineConnectorTitle","onToolShapeButtonLineConnectorActive","onToolShapeButtonLineConnectorInactive","toolShapeEditLineConnector","toolShapeCreateLineConnector","_toolShapeButtonElbowConnector","newToolShapeButtonElbowConnector","getToolShapeButtonElbowConnectorTitle","onToolShapeButtonElbowConnectorActive","onToolShapeButtonElbowConnectorInactive","toolShapeCreateElbowConnector","_toolShapeButtonImage","newToolShapeButtonImage","getToolShapeButtonImageTitle","onToolShapeButtonImageOpen","createImage","_toolShapeButtonGraphicPiece","newToolShapeButtonGraphicPiece","getToolShapeButtonGraphicPieceTitle","onToolShapeButtonGraphicPieceActive","dialogSelectPiece","newToolShapeButtonExtensionFactory","newToolShapeButtonExtension","creatorOrTool","toExtensionCreatorOrTool","onToolShapeButtonExtensionActive","onToolShapeButtonExtensionInactive","updaterCreatorOrOptions_1","updater_1","toExtensionUpdater","updaterCreatorOrOptions","tool","onDialogSelectExtensionFactorySelect","toolFileButtonCreate","toolFileButtonOpen","toolFileButtonUpload","toolFileButtonDownload","toolFileButtonUndo","toolFileButtonRedo","toolFileButtonDelete","newToolShapeButtons","toolShapeButtonLine","toolShapeButtonCircle","toolShapeButtonSemicircle","toolShapeButtonRectangle","toolShapeButtonRectangleRounded","toolShapeButtonTriangle","toolShapeButtonTriangleRounded","toolShapeButtonLineConnector","toolShapeButtonElbowConnector","toolShapeButtonPolygon","toolShapeButtonImage","toolShapeButtonGraphicPiece","newToolShapeButtonsExtension","getToolButtonLayoutY","newToolButtons","newEditorButtonGroup","_editorButtonCoordinate","newEditorButtonCoordinate","editorButtonGroup","editor_coordinate","getEditorButtonCoordinateTitle","getEditorButtonTheme","editorCoordinate","_editorCoordinate","newEditorCoordinate","initEditor","editorContainer","zIndex","sortChildren","_editorButtonShape","newEditorButtonShape","editor_shape","getEditorButtonShapeTitle","editorShape","_editorShape","newEditorShape","isDanglingConnectorAllowed","_editorButtonText","newEditorButtonText","editor_text","getEditorButtonTextTitle","editorText","_editorText","newEditorText","_editorButtonData","newEditorButtonData","editor_data","getEditorButtonDataTitle","editorData","_editorData","newEditorData","_editorButtonDataMapping","newEditorButtonDataMapping","editor_data_mapping","getEditorButtonDataMappingTitle","editorDataMapping","_editorDataMapping","newEditorDataMapping","_editorButtonAction","newEditorButtonAction","editor_action","getEditorButtonActionTitle","editorAction","_editorAction","newEditorAction","_editorButtonTree","newEditorButtonTree","editor_tree","getEditorButtonTreeTitle","editorTree","_editorTree","newEditorTree","_editorButtonLayer","newEditorButtonLayer","editor_layer","getEditorButtonLayerTitle","editorLayer","_editorLayer","newEditorLayer","_editorButtonSnap","newEditorButtonSnap","editor_snap","getEditorButtonSnapTitle","editorSnap","_editorSnap","newEditorSnap","_editorButtonValidation","newEditorButtonValidation","editor_validation","getEditorButtonValidationTitle","_editorValidation","newEditorValidation","_editorButtonSearch","newEditorButtonSearch","getEditorButtonSearchTitle","editorSearch","_editorSearch","newEditorSearch","_editorCanvas","newEditorCanvas","compatibility","_editorButtonCanvasLegacy","newEditorButtonCanvasLegacy","editor_canvas_legacy","getEditorButtonCanvasLegacyTitle","editorCanvasLegacy","_editorCanvasLegacy","newEditorCanvasLegacy","newEditorButtonExtension","editorInstance","newEditorExtension","onEditorButtonExtensionSelectionChange","extensionType","buttonLast","_editorButtonExtensionLast","wasActive","_viewButtonZoomOut","newViewButtonZoomOut","view_zoom_out","getViewButtonZoomOutTitle","getViewButtonZoomOutShortcut","getViewButtonTheme","zoomOut","_viewButtonZoomIn","newViewButtonZoomIn","view_zoom_in","getViewButtonZoomInTitle","getViewButtonZoomInShortcut","shortcuts","getViewButtonZoomInShortcuts","zoomIn","_viewButtonDragAndPinch","newViewButtonDragAndPinch","camera","getViewButtonDragAndPinchTitle","getViewButtonDragAndPinchShortcut","_viewButtonReset","newViewButtonReset","view_reset","getViewButtonResetTitle","getViewButtonResetShortcut","_viewButtonFit","newViewButtonFit","view_fit","getViewButtonFitTitle","getViewButtonFitShortcut","newEditorButtons","editorButtonShape","editorButtonText","editorButtonData","editorButtonDataMapping","editorButtonAction","editorButtonTree","editorButtonLayer","editorButtonSnap","editorButtonSearch","editorButtonCanvasLegacy","toEditorExtentionConstructorOptions","viewButtonZoomOut","viewButtonZoomIn","viewButtonDragAndPinch","viewButtonReset","viewButtonFit","_editorContainer","newEditorContainer","newEditorButtonLayout","resize","onEditorLayoutResized","os","getPaddingLeft","getPaddingRight","ns","_toolShapeSelect","newToolShapeSelect","_toolShapeCreate","newToolShapeCreate","_toolShapeCreateLine","newToolShapeCreateLine","_toolShapeCreatePolygon","newToolShapeCreatePolygon","_toolShapeCreateLineConnector","newToolShapeCreateLineConnector","_toolShapeCreateElbowConnector","newToolShapeCreateElbowConnector","_toolShapeEditLine","newToolShapeEditLine","_toolShapeEditPolygon","newToolShapeEditPolygon","_toolShapeEditLineConnector","newToolShapeEditLineConnector","_toolGroup","newToolGroup","newDiagram","toDiagramOptions","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_z","_0","_1","_2","_3","_4","_5","_6","UtilGestureModifier","ALT","UtilGestureModifiers","match","isGesturing","zoom","viewOn","gesturestart","onDiagramViewOnStart","transformstart","wheeltranslationstart","constraint","onDiagramViewConstraint","thumbnail","saving","onDiagramSaving","saved","onDiagramSaved","deleting","onDiagramDeleting","onDiagramDeleted","snapshot","snapshotOn","taking","onDiagramSnapshotTaking","took","onDiagramSnapshotTook","_localBoundsDiagram","_localBoundsCanvas","getLocalBounds","once","dialogDeleteProcessing","_dialogSaveProcessing","newDialogSaveProcessing","_dialogDeleteProcessing","newDialogDeleteProcessing","_dialogSaveAs","newDialogSaveAs","DDialogSaveAs","_dialogCreate","newDialogCreate","onDialogCreateOk","_dialogDiscard","newDialogDiscard","DDialogConfirmDiscard","_dialogSelect","newDialogSelect","newDialogSelectImage","newDialogSelectNoImage","onDialogSelectSelect","_dialogSelectPiece","newDialogSelectPiece","newDialogSelectPieceImage","newDialogSelectPieceNoImage","newDialogSelectPieceController","onDialogSelectPieceSelect","toDialogSelectPieceResult","graphic_1","_dialogDelete","newDialogDelete","DDialogConfirmDelete","onDialogDeleteOk","getInstance","getThemeDefault","FGraphicTester","_isChanged","_onDiagramMoveBound","onDiagramMove","_onDiagramUpBound","onDiagramUp","_onDiagramDownPoint","_onDiagramMovePoint","_selectAreaRect","_selectMode","_isSelectSuspended","_expressionMap","_appliedValues","_isMappingsDirty","newPanes","onMappingsChangeBound","onMappingsChange","leftPane","rightPane","_paneLeft","newLeftPane","toolFileButtonGraphicOpen","layoutViewButton","_toolFileButtonGraphicOpen","newToolFileButtonGraphicOpen","getToolFileButtonGraphicOpenTitle","getToolFileButtonGraphicOpenShortcut","getToolFileButtonGraphicTheme","onToolFileButtonGraphicOpenActive","dialogSelectGraphic","_layoutViewButton","newLayoutViewButton","newViewButtons","_paneRight","newRightPane","tableFilterInput","_dialogConfirmDelete","tester","_tester","graphicTester","_tableFilterInput","newTableFilterInput","tableFilter","filter","unapply","dialogSelectMapping","file","onDiagramSelectionChange","toMappingsDirty","_graphic","uuidToDataValueIds","toCsvRows","getFilename","dataShape","dataValueIds","dataValue","dataValueId","toDataShape","simple_1","onToolFileButtonDeleteActive","DDiagram","onDiagramDown","onDiagramKeydown","ambient","toDataMappingRows","dataValueIdToRow","onDiagramSelectEnd","selectArea","_interactionManager","onDiagramUpBound","_selectArea","_tableFilter","newTableFilter","test","_dialogSelectGraphic","newDialogSelectGraphic","newDialogSelectGraphicImage","newDialogSelectGraphicNoImage","onDialogSelectGraphicSelect","toSerialized","_dialogSelectTester","newDialogSelectMapping","DDialogInputText","newDialogCreateTextValue","isNew","hasNoGraphc","hasNoMapping","hasNoChanges","isNotEditable","evaluate","applyMappings","applyMapping","expressionMap","applyMappingIfChanged","evaluated","appliedValues","toLowerCase","date","isEditable","getTableColumnDataLabel","getTableColumnValueLabel","FGraphicViewer","newDataMapper","remote","wcardinal","geditor"],"mappings":"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","x_google_ignoreList":[0]}