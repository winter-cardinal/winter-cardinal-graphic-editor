{"version":3,"file":"wcardinal-geditor.min.js","sources":["../../../node_modules/tslib/tslib.es6.mjs","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-composition.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-all.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-background.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-category.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-description.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-height.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-name.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-open.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-size.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-toggle-visibility.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-target-toggle-visibility.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-target-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-summary.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer-value-background.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-change.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-search.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-deleter.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-group.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-selection-updated-part.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-all.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability-lock.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability-unlock.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-corner-off.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-corner-on.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-cursor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-recursive.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-recursive-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-focusable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-id.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image-clear.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image-fit-to.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-interactive.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-points-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-and-rotation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-left.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-top.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-radius.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-rotation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-shortcut.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-skew.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-align.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-side-off.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-side-on.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-align-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-align-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-clipping.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-direction.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-family.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-fitting.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-offset-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-offset-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-padding-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-padding-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-size-delta.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-size.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-spacing-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-spacing-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-weight.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-title.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-replace-one.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-bring-to-front.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-send-to-back.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-transforms.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-ungroup.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/new-graphic-tester.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-csv.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-object.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-serialized.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-action-extensions.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-select-with-thumbnails.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/get-shape-type-theme.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-mode.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-action-extension-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-extension.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-extension-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-extensions.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-side.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-subtype.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-vvisible.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-editor-shape-embedded-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-shape-embedded-acceptor-edges.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-active.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-grouped.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-editor-shape-button.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-shape-buttons.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-button-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-button-value-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-dialog-shape-button-layer-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-editor-shape-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layers.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick-major.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick-minor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-axis-x-padding.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-axis-y-padding.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-x-major-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-x-minor-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-y-major-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-y-minor-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axes.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-editor-shape-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-action-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-lines.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/input/e-shape-inputs.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-cell.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-body.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-header.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-row-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-row.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-row-height.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-row-selection-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-dialog-shape-table-column.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-editor-shape-table.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-action-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-cell-action-value-change-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-body-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-body.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-header-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-header.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-tables.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-extension-factories.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-keyword-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-keyword-board.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-data-mapping-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-data-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-processing.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-snap.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-action.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-coordinate.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-data-mapping.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-data.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-layer-item.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/to-shape-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/to-shape-type-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search-condition-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search-condition-state.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-shape.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editors.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-snap.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-text.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-tree-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-tree.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-validation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-group-impl.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-impl.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier-hit-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-connector-transforms.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-area-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-hit-test.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-acceptor-edge-renderer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-line-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-elbow-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-base-hit-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-base.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-ajax.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-canvas-category.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-data-values.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-date.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-canvas-legacy.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-editor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-tester.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-viewer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/load-shape-extension-button.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/load-shape-extension-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/load-shape-extension-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/load-shape-extension-embedded-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/input/load-shape-extension-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/load-shape-extension-table.js","../../../winter-cardinal-graphic-editor/wcardinal-geditor.browser.js"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandComposition = /** @class */ (function (_super) {\n    __extends(ECommandComposition, _super);\n    function ECommandComposition(commands, selection) {\n        var _this = _super.call(this) || this;\n        _this._commands = commands;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandComposition.prototype, \"commands\", {\n        get: function () {\n            return this._commands;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandComposition.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandComposition.prototype.execute = function () {\n        return true;\n    };\n    ECommandComposition.prototype.redo = function () {\n        var selection = this._selection;\n        var commands = this._commands;\n        selection.lock();\n        for (var i = 0, imax = commands.length; i < imax; ++i) {\n            commands[i].redo();\n        }\n        selection.unlock();\n        return true;\n    };\n    ECommandComposition.prototype.undo = function () {\n        var selection = this._selection;\n        selection.lock();\n        var commands = this._commands;\n        for (var i = commands.length - 1; 0 <= i; --i) {\n            commands[i].undo();\n        }\n        selection.unlock();\n        return true;\n    };\n    ECommandComposition.prototype.destroy = function () {\n        var commands = this._commands;\n        for (var i = 0, imax = commands.length; i < imax; ++i) {\n            commands[i].destroy();\n        }\n    };\n    return ECommandComposition;\n}(DCommandBase));\nexport { ECommandComposition };\n//# sourceMappingURL=e-command-composition.js.map","import { __extends } from \"tslib\";\nimport { DBaseStateSetImpl, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentAll = /** @class */ (function (_super) {\n    __extends(ECommandDocumentAll, _super);\n    function ECommandDocumentAll(diagram, canvas, name, label, width, height, category, summary, description, backgroundColor, backgroundAlpha) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._name = name;\n        _this._label = label;\n        _this._width = width;\n        _this._height = height;\n        _this._category = category;\n        _this._summary = summary;\n        _this._description = description;\n        _this._backgroundColor = backgroundColor;\n        _this._backgroundAlpha = backgroundAlpha;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentAll.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"name\", {\n        get: function () {\n            return this._name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"category\", {\n        get: function () {\n            return this._category;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"summary\", {\n        get: function () {\n            return this._summary;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"description\", {\n        get: function () {\n            return this._description;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"backgroundColor\", {\n        get: function () {\n            return this._backgroundColor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentAll.prototype, \"backgroundAlpha\", {\n        get: function () {\n            return this._backgroundAlpha;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentAll.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentAll.prototype.redo = function () {\n        var canvas = this._canvas;\n        var name = this._name;\n        this._name = canvas.name;\n        canvas.name = name;\n        var label = this._label;\n        this._label = canvas.label;\n        canvas.label = label;\n        var width = this._width;\n        this._width = canvas.width;\n        canvas.width = width;\n        var height = this._height;\n        this._height = canvas.height;\n        canvas.height = height;\n        var category = this._category;\n        this._category = canvas.category;\n        canvas.category = category;\n        var summary = this._summary;\n        this._summary = canvas.summary;\n        canvas.summary = summary;\n        var description = this._description;\n        this._description = canvas.description;\n        canvas.description = description;\n        var backgroundColor = this._backgroundColor;\n        var backgroundAlpha = this._backgroundAlpha;\n        var state = new DBaseStateSetImpl();\n        var background = canvas.background;\n        this._backgroundColor = background.getColor(state);\n        this._backgroundAlpha = background.getAlpha(state);\n        background.color = backgroundColor;\n        background.alpha = backgroundAlpha;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentAll.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentAll;\n}(DCommandBase));\nexport { ECommandDocumentAll };\n//# sourceMappingURL=e-command-document-all.js.map","import { __extends } from \"tslib\";\nimport { DBaseStateSetImpl, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentBackground = /** @class */ (function (_super) {\n    __extends(ECommandDocumentBackground, _super);\n    function ECommandDocumentBackground(diagram, color, alpha) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._color = color;\n        _this._alpha = alpha;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentBackground.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentBackground.prototype, \"color\", {\n        get: function () {\n            return this._color;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentBackground.prototype, \"alpha\", {\n        get: function () {\n            return this._alpha;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentBackground.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentBackground.prototype.redo = function () {\n        var canvas = this._diagram.canvas;\n        if (canvas != null) {\n            var background = canvas.background;\n            var color = this._color;\n            var alpha = this._alpha;\n            var state = new DBaseStateSetImpl();\n            this._color = background.getColor(state);\n            this._alpha = background.getAlpha(state);\n            background.color = color;\n            background.alpha = alpha;\n            this._diagram.emit(\"change\", this._diagram);\n        }\n        return true;\n    };\n    ECommandDocumentBackground.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentBackground;\n}(DCommandBase));\nexport { ECommandDocumentBackground };\n//# sourceMappingURL=e-command-document-background.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentCategory = /** @class */ (function (_super) {\n    __extends(ECommandDocumentCategory, _super);\n    function ECommandDocumentCategory(diagram, canvas, category) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._category = category;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentCategory.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentCategory.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentCategory.prototype, \"category\", {\n        get: function () {\n            return this._category;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentCategory.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentCategory.prototype.redo = function () {\n        var canvas = this._canvas;\n        var category = this._category;\n        this._category = canvas.category;\n        canvas.category = category;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentCategory.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentCategory;\n}(DCommandBase));\nexport { ECommandDocumentCategory };\n//# sourceMappingURL=e-command-document-category.js.map","import { __extends } from \"tslib\";\nimport { DCommandCreate } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentCreate = /** @class */ (function (_super) {\n    __extends(ECommandDocumentCreate, _super);\n    function ECommandDocumentCreate(diagram, canvas) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentCreate.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentCreate.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentCreate.prototype.execute = function () {\n        return true;\n    };\n    return ECommandDocumentCreate;\n}(DCommandCreate));\nexport { ECommandDocumentCreate };\n//# sourceMappingURL=e-command-document-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentDescription = /** @class */ (function (_super) {\n    __extends(ECommandDocumentDescription, _super);\n    function ECommandDocumentDescription(diagram, canvas, description) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._description = description;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentDescription.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentDescription.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentDescription.prototype, \"description\", {\n        get: function () {\n            return this._description;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentDescription.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentDescription.prototype.redo = function () {\n        var canvas = this._canvas;\n        var description = this._description;\n        this._description = canvas.description;\n        canvas.description = description;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentDescription.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentDescription;\n}(DCommandBase));\nexport { ECommandDocumentDescription };\n//# sourceMappingURL=e-command-document-description.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentHeight = /** @class */ (function (_super) {\n    __extends(ECommandDocumentHeight, _super);\n    function ECommandDocumentHeight(diagram, canvas, height) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._height = height;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentHeight.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentHeight.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentHeight.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentHeight.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentHeight.prototype.redo = function () {\n        var canvas = this._canvas;\n        var height = this._height;\n        this._height = canvas.height;\n        canvas.y = canvas.y + (canvas.height - height) * 0.5;\n        canvas.height = height;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentHeight.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentHeight;\n}(DCommandBase));\nexport { ECommandDocumentHeight };\n//# sourceMappingURL=e-command-document-height.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentLabel = /** @class */ (function (_super) {\n    __extends(ECommandDocumentLabel, _super);\n    function ECommandDocumentLabel(diagram, canvas, label) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._label = label;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentLabel.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentLabel.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentLabel.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentLabel.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentLabel.prototype.redo = function () {\n        var canvas = this._canvas;\n        var label = this._label;\n        this._label = canvas.label;\n        canvas.label = label;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentLabel.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentLabel;\n}(DCommandBase));\nexport { ECommandDocumentLabel };\n//# sourceMappingURL=e-command-document-label.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentName = /** @class */ (function (_super) {\n    __extends(ECommandDocumentName, _super);\n    function ECommandDocumentName(diagram, canvas, name) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._name = name;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentName.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentName.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentName.prototype, \"name\", {\n        get: function () {\n            return this._name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentName.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentName.prototype.redo = function () {\n        var canvas = this._canvas;\n        var name = this._name;\n        this._name = canvas.name;\n        canvas.name = name;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentName.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentName;\n}(DCommandBase));\nexport { ECommandDocumentName };\n//# sourceMappingURL=e-command-document-name.js.map","import { __extends } from \"tslib\";\nimport { DCommandCreate } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentOpen = /** @class */ (function (_super) {\n    __extends(ECommandDocumentOpen, _super);\n    function ECommandDocumentOpen(diagram, canvas) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentOpen.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentOpen.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentOpen.prototype.execute = function () {\n        return true;\n    };\n    return ECommandDocumentOpen;\n}(DCommandCreate));\nexport { ECommandDocumentOpen };\n//# sourceMappingURL=e-command-document-open.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapBringForward = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapBringForward, _super);\n    function ECommandDocumentSnapBringForward(snapper, index) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._index = index;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapBringForward.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapBringForward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapBringForward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapBringForward.prototype.redo = function () {\n        var index = this._index;\n        this._snapper.target.swap(index - 1, index);\n        return true;\n    };\n    ECommandDocumentSnapBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapBringForward;\n}(DCommandBase));\nexport { ECommandDocumentSnapBringForward };\n//# sourceMappingURL=e-command-document-snap-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapCreate = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapCreate, _super);\n    function ECommandDocumentSnapCreate(snapper, target) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._target = target;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapCreate.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapCreate.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapCreate.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapCreate.prototype.redo = function () {\n        this._snapper.target.add(this._target);\n        return true;\n    };\n    ECommandDocumentSnapCreate.prototype.undo = function () {\n        var target = this._snapper.target;\n        target.remove(target.size - 1);\n        return true;\n    };\n    return ECommandDocumentSnapCreate;\n}(DCommandBase));\nexport { ECommandDocumentSnapCreate };\n//# sourceMappingURL=e-command-document-snap-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapDelete = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapDelete, _super);\n    function ECommandDocumentSnapDelete(snapper, index, target) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._index = index;\n        _this._target = target;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapDelete.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapDelete.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapDelete.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapDelete.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapDelete.prototype.redo = function () {\n        this._snapper.target.remove(this._index);\n        return true;\n    };\n    ECommandDocumentSnapDelete.prototype.undo = function () {\n        this._snapper.target.add(this._target, this._index);\n        return true;\n    };\n    return ECommandDocumentSnapDelete;\n}(DCommandBase));\nexport { ECommandDocumentSnapDelete };\n//# sourceMappingURL=e-command-document-snap-delete.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapGridSize = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapGridSize, _super);\n    function ECommandDocumentSnapGridSize(snapper, size) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._size = size;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapGridSize.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapGridSize.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapGridSize.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapGridSize.prototype.redo = function () {\n        var snapper = this._snapper;\n        var size = this._size;\n        this._size = snapper.grid.size;\n        snapper.grid.size = size;\n        return true;\n    };\n    ECommandDocumentSnapGridSize.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapGridSize;\n}(DCommandBase));\nexport { ECommandDocumentSnapGridSize };\n//# sourceMappingURL=e-command-document-snap-grid-size.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapGridToggleVisibility = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapGridToggleVisibility, _super);\n    function ECommandDocumentSnapGridToggleVisibility(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapGridToggleVisibility.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapGridToggleVisibility.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapGridToggleVisibility.prototype.redo = function () {\n        var grid = this._snapper.grid;\n        grid.visible = !grid.visible;\n        return true;\n    };\n    ECommandDocumentSnapGridToggleVisibility.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapGridToggleVisibility;\n}(DCommandBase));\nexport { ECommandDocumentSnapGridToggleVisibility };\n//# sourceMappingURL=e-command-document-snap-grid-toggle-visibility.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapGridToggle = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapGridToggle, _super);\n    function ECommandDocumentSnapGridToggle(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapGridToggle.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapGridToggle.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapGridToggle.prototype.redo = function () {\n        var grid = this._snapper.grid;\n        grid.enable = !grid.enable;\n        return true;\n    };\n    ECommandDocumentSnapGridToggle.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapGridToggle;\n}(DCommandBase));\nexport { ECommandDocumentSnapGridToggle };\n//# sourceMappingURL=e-command-document-snap-grid-toggle.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapReplace = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapReplace, _super);\n    function ECommandDocumentSnapReplace(snapper, oldValue, newValue, list) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._index = snapper.target.values.indexOf(_this._oldValue);\n        _this._list = list;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapReplace.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapReplace.prototype.redo = function () {\n        var index = this._index;\n        if (0 <= index) {\n            var list = this._list;\n            var newValue = this._newValue;\n            var snapper = this._snapper;\n            if (list.data.selection.contains(this._oldValue)) {\n                snapper.target.replace(index, newValue);\n                list.data.selection.clearAndAdd(newValue);\n            }\n            else {\n                snapper.target.replace(index, newValue);\n            }\n        }\n        return true;\n    };\n    ECommandDocumentSnapReplace.prototype.undo = function () {\n        var index = this._index;\n        if (0 <= index) {\n            var list = this._list;\n            var oldValue = this._oldValue;\n            var snapper = this._snapper;\n            if (list.data.selection.contains(this._newValue)) {\n                snapper.target.replace(index, oldValue);\n                list.data.selection.clearAndAdd(oldValue);\n            }\n            else {\n                snapper.target.replace(index, oldValue);\n            }\n        }\n        return true;\n    };\n    return ECommandDocumentSnapReplace;\n}(DCommandBase));\nexport { ECommandDocumentSnapReplace };\n//# sourceMappingURL=e-command-document-snap-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapSendBackward, _super);\n    function ECommandDocumentSnapSendBackward(snapper, index) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        _this._index = index;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapSendBackward.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSnapSendBackward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapSendBackward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapSendBackward.prototype.redo = function () {\n        var index = this._index;\n        this._snapper.target.swap(index, index + 1);\n        return true;\n    };\n    ECommandDocumentSnapSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapSendBackward;\n}(DCommandBase));\nexport { ECommandDocumentSnapSendBackward };\n//# sourceMappingURL=e-command-document-snap-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapTargetToggleVisibility = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapTargetToggleVisibility, _super);\n    function ECommandDocumentSnapTargetToggleVisibility(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapTargetToggleVisibility.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapTargetToggleVisibility.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapTargetToggleVisibility.prototype.redo = function () {\n        var target = this._snapper.target;\n        target.visible = !target.visible;\n        return true;\n    };\n    ECommandDocumentSnapTargetToggleVisibility.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapTargetToggleVisibility;\n}(DCommandBase));\nexport { ECommandDocumentSnapTargetToggleVisibility };\n//# sourceMappingURL=e-command-document-snap-target-toggle-visibility.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapTargetToggle = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapTargetToggle, _super);\n    function ECommandDocumentSnapTargetToggle(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapTargetToggle.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapTargetToggle.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapTargetToggle.prototype.redo = function () {\n        var target = this._snapper.target;\n        target.enable = !target.enable;\n        return true;\n    };\n    ECommandDocumentSnapTargetToggle.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapTargetToggle;\n}(DCommandBase));\nexport { ECommandDocumentSnapTargetToggle };\n//# sourceMappingURL=e-command-document-snap-target-toggle.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSnapToggle = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSnapToggle, _super);\n    function ECommandDocumentSnapToggle(snapper) {\n        var _this = _super.call(this) || this;\n        _this._snapper = snapper;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSnapToggle.prototype, \"snapper\", {\n        get: function () {\n            return this._snapper;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSnapToggle.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSnapToggle.prototype.redo = function () {\n        var snapper = this._snapper;\n        snapper.enable = !snapper.enable;\n        return true;\n    };\n    ECommandDocumentSnapToggle.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSnapToggle;\n}(DCommandBase));\nexport { ECommandDocumentSnapToggle };\n//# sourceMappingURL=e-command-document-snap-toggle.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentSummary = /** @class */ (function (_super) {\n    __extends(ECommandDocumentSummary, _super);\n    function ECommandDocumentSummary(diagram, canvas, summary) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._summary = summary;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentSummary.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSummary.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentSummary.prototype, \"summary\", {\n        get: function () {\n            return this._summary;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentSummary.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentSummary.prototype.redo = function () {\n        var canvas = this._canvas;\n        var summary = this._summary;\n        this._summary = canvas.summary;\n        canvas.summary = summary;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentSummary.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentSummary;\n}(DCommandBase));\nexport { ECommandDocumentSummary };\n//# sourceMappingURL=e-command-document-summary.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandDocumentWidth = /** @class */ (function (_super) {\n    __extends(ECommandDocumentWidth, _super);\n    function ECommandDocumentWidth(diagram, canvas, width) {\n        var _this = _super.call(this) || this;\n        _this._diagram = diagram;\n        _this._canvas = canvas;\n        _this._width = width;\n        return _this;\n    }\n    Object.defineProperty(ECommandDocumentWidth.prototype, \"diagram\", {\n        get: function () {\n            return this._diagram;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentWidth.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandDocumentWidth.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandDocumentWidth.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandDocumentWidth.prototype.redo = function () {\n        var canvas = this._canvas;\n        var width = this._width;\n        this._width = canvas.width;\n        canvas.x = canvas.x + (canvas.width - width) * 0.5;\n        canvas.width = width;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    };\n    ECommandDocumentWidth.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandDocumentWidth;\n}(DCommandBase));\nexport { ECommandDocumentWidth };\n//# sourceMappingURL=e-command-document-width.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerBringForward = /** @class */ (function (_super) {\n    __extends(ECommandLayerBringForward, _super);\n    function ECommandLayerBringForward(index, layerContainer) {\n        var _this = _super.call(this) || this;\n        _this._index = index;\n        _this._layerContainer = layerContainer;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerBringForward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerBringForward.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerBringForward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandLayerBringForward.prototype.redo = function () {\n        var index = this._index;\n        var layerContainer = this._layerContainer;\n        var children = layerContainer.children;\n        var tmp = children[index];\n        children[index] = children[index + 1];\n        children[index + 1] = tmp;\n        layerContainer.onChildrenChange(index);\n        layerContainer.emit(\"change\", layerContainer);\n        DApplications.update(layerContainer);\n        return true;\n    };\n    ECommandLayerBringForward.prototype.undo = function () {\n        this.redo();\n        return true;\n    };\n    return ECommandLayerBringForward;\n}(DCommandBase));\nexport { ECommandLayerBringForward };\n//# sourceMappingURL=e-command-layer-bring-forward.js.map","var EDialogLayerValueBackground = /** @class */ (function () {\n    function EDialogLayerValueBackground(enable, color, alpha) {\n        this.enable = enable;\n        this.color = color;\n        this.alpha = alpha;\n    }\n    EDialogLayerValueBackground.prototype.isEqual = function (target) {\n        return (this.enable === target.enable &&\n            this.color === target.color &&\n            this.alpha === target.alpha);\n    };\n    EDialogLayerValueBackground.from = function (layer) {\n        return new EDialogLayerValueBackground(layer.background.enable, layer.background.color, layer.background.alpha);\n    };\n    return EDialogLayerValueBackground;\n}());\nexport { EDialogLayerValueBackground };\n//# sourceMappingURL=e-dialog-layer-value-background.js.map","import { EShapeActionValueGestureOperationType, EShapeLayerState } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValueBackground } from \"./e-dialog-layer-value-background\";\nvar EDialogLayerValue = /** @class */ (function () {\n    function EDialogLayerValue(name, x, y, width, height, background, visible, interactive, gesture) {\n        this.name = name;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.background = background;\n        this.visible = visible;\n        this.interactive = interactive;\n        this.gesture = gesture;\n    }\n    EDialogLayerValue.prototype.isEqual = function (target) {\n        return (this.name === target.name &&\n            this.x === target.x &&\n            this.y === target.y &&\n            this.width === target.width &&\n            this.height === target.height &&\n            this.background.isEqual(target.background) &&\n            this.visible === target.visible &&\n            this.interactive === target.interactive &&\n            this.gesture === target.gesture);\n    };\n    EDialogLayerValue.prototype.copyTo = function (layer) {\n        layer.name = this.name;\n        layer.position.set(this.x, this.y);\n        layer.width = this.width;\n        layer.height = this.height;\n        layer.background.copy(this.background);\n        var state = layer.state;\n        state.lock();\n        state.set(EShapeLayerState.INVISIBLE, !this.visible);\n        state.set(EShapeLayerState.INTERACTIVE, this.interactive);\n        var gesture = this.gesture;\n        state.set(EShapeLayerState.DRAGGABLE, !!(gesture & EShapeActionValueGestureOperationType.DRAG));\n        state.set(EShapeLayerState.PINCHABLE, !!(gesture & EShapeActionValueGestureOperationType.PINCH));\n        state.unlock();\n        return this;\n    };\n    EDialogLayerValue.from = function (layer) {\n        var drag = layer.state.is(EShapeLayerState.DRAGGABLE)\n            ? EShapeActionValueGestureOperationType.DRAG\n            : EShapeActionValueGestureOperationType.NONE;\n        var pinch = layer.state.is(EShapeLayerState.PINCHABLE)\n            ? EShapeActionValueGestureOperationType.PINCH\n            : EShapeActionValueGestureOperationType.NONE;\n        var gesture = drag | pinch;\n        return new EDialogLayerValue(layer.name, layer.position.x, layer.position.y, layer.width, layer.height, EDialogLayerValueBackground.from(layer), !layer.state.is(EShapeLayerState.INVISIBLE), layer.state.is(EShapeLayerState.INTERACTIVE), gesture);\n    };\n    return EDialogLayerValue;\n}());\nexport { EDialogLayerValue };\n//# sourceMappingURL=e-dialog-layer-value.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValue } from \"../editor/e-dialog-layer-value\";\nvar ECommandLayerChange = /** @class */ (function (_super) {\n    __extends(ECommandLayerChange, _super);\n    function ECommandLayerChange(layer, value, layerContainer) {\n        var _this = _super.call(this) || this;\n        _this._layer = layer;\n        _this._layerContainer = layerContainer;\n        _this._oldValue = EDialogLayerValue.from(layer);\n        _this._newValue = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerChange.prototype, \"layer\", {\n        get: function () {\n            return this._layer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerChange.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerChange.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerChange.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerChange.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandLayerChange.prototype.redo = function () {\n        this._newValue.copyTo(this._layer);\n        var layerContainer = this._layerContainer;\n        layerContainer.emit(\"change\", layerContainer);\n        return true;\n    };\n    ECommandLayerChange.prototype.undo = function () {\n        this._oldValue.copyTo(this._layer);\n        var layerContainer = this._layerContainer;\n        layerContainer.emit(\"change\", layerContainer);\n        return true;\n    };\n    return ECommandLayerChange;\n}(DCommandBase));\nexport { ECommandLayerChange };\n//# sourceMappingURL=e-command-layer-change.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerCreate = /** @class */ (function (_super) {\n    __extends(ECommandLayerCreate, _super);\n    function ECommandLayerCreate(value, layerContainer, selection) {\n        var _this = _super.call(this) || this;\n        _this._value = value;\n        _this._layerContainer = layerContainer;\n        _this._layerActive = layerContainer.active;\n        _this._layerCreated = null;\n        _this._selection = selection;\n        _this._selectionStored = null;\n        return _this;\n    }\n    ECommandLayerCreate.prototype.newLayer = function (value, layerContainer) {\n        var result = layerContainer.create(value.name, true);\n        value.copyTo(result);\n        return result;\n    };\n    Object.defineProperty(ECommandLayerCreate.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"layerActive\", {\n        get: function () {\n            return this._layerActive;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"layerCreated\", {\n        get: function () {\n            return this._layerCreated;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerCreate.prototype, \"selectionStored\", {\n        get: function () {\n            return this._selectionStored;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerCreate.prototype.execute = function () {\n        var selection = this._selection;\n        if (!selection.isEmpty()) {\n            this._selectionStored = selection.store();\n            selection.clear();\n        }\n        else {\n            this._selectionStored = null;\n        }\n        this._layerCreated = this.newLayer(this._value, this._layerContainer);\n        this._layerCreated.reference += 1;\n        return true;\n    };\n    ECommandLayerCreate.prototype.redo = function () {\n        var selectionStored = this._selectionStored;\n        if (selectionStored != null) {\n            this._selection.clear();\n        }\n        var layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            this._layerContainer.attach(layerCreated, true);\n        }\n        return true;\n    };\n    ECommandLayerCreate.prototype.undo = function () {\n        var layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            this._layerContainer.detach(layerCreated, this._layerActive);\n        }\n        var selectionStored = this._selectionStored;\n        if (selectionStored != null) {\n            this._selection.restore(selectionStored);\n        }\n        return true;\n    };\n    ECommandLayerCreate.prototype.destroy = function () {\n        var layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            layerCreated.reference -= 1;\n            if (layerCreated.parent == null && layerCreated.reference <= 0) {\n                layerCreated.destroy();\n            }\n        }\n        this._layerActive = null;\n    };\n    return ECommandLayerCreate;\n}(DCommandBase));\nexport { ECommandLayerCreate };\n//# sourceMappingURL=e-command-layer-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerDelete = /** @class */ (function (_super) {\n    __extends(ECommandLayerDelete, _super);\n    function ECommandLayerDelete(layer, layerContainer, selection) {\n        var _this = _super.call(this) || this;\n        _this._layerContainer = layerContainer;\n        _this._layerActive = layerContainer.active;\n        _this._layer = layer;\n        layer.reference += 1;\n        _this._layerIndex = -1;\n        _this._selection = selection;\n        _this._selectionStored = null;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layerActive\", {\n        get: function () {\n            return this._layerActive;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layer\", {\n        get: function () {\n            return this._layer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"layerIndex\", {\n        get: function () {\n            return this._layerIndex;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerDelete.prototype, \"selectionStored\", {\n        get: function () {\n            return this._selectionStored;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerDelete.prototype.execute = function () {\n        var layer = this._layer;\n        var layerContainer = this._layerContainer;\n        var selection = this._selection;\n        if (layer === layerContainer.active && !selection.isEmpty()) {\n            this._selectionStored = selection.store();\n            selection.clear();\n        }\n        else {\n            this._selectionStored = null;\n        }\n        this._layerIndex = layerContainer.delete(layer, true);\n        return true;\n    };\n    ECommandLayerDelete.prototype.redo = function () {\n        if (this._selectionStored != null) {\n            this._selection.clear();\n        }\n        this._layerContainer.delete(this._layer, true);\n        return true;\n    };\n    ECommandLayerDelete.prototype.undo = function () {\n        this._layerContainer.attachAt(this._layer, this._layerIndex, this._layer === this._layerActive);\n        if (this._selectionStored != null) {\n            this._selection.restore(this._selectionStored);\n        }\n        return true;\n    };\n    ECommandLayerDelete.prototype.destroy = function () {\n        var layer = this._layer;\n        layer.reference -= 1;\n        if (layer.parent == null && layer.reference <= 0) {\n            layer.destroy();\n        }\n        this._layerActive = null;\n        this._selectionStored = null;\n    };\n    return ECommandLayerDelete;\n}(DCommandBase));\nexport { ECommandLayerDelete };\n//# sourceMappingURL=e-command-layer-delete.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandLayerSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandLayerSendBackward, _super);\n    function ECommandLayerSendBackward(index, layerContainer) {\n        var _this = _super.call(this) || this;\n        _this._index = index;\n        _this._layerContainer = layerContainer;\n        return _this;\n    }\n    Object.defineProperty(ECommandLayerSendBackward.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandLayerSendBackward.prototype, \"layerContainer\", {\n        get: function () {\n            return this._layerContainer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandLayerSendBackward.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandLayerSendBackward.prototype.redo = function () {\n        var index = this._index;\n        var layerContainer = this._layerContainer;\n        var children = layerContainer.children;\n        var tmp = children[index];\n        children[index] = children[index - 1];\n        children[index - 1] = tmp;\n        layerContainer.onChildrenChange(index);\n        layerContainer.emit(\"change\", layerContainer);\n        DApplications.update(layerContainer);\n        return true;\n    };\n    ECommandLayerSendBackward.prototype.undo = function () {\n        this.redo();\n        return true;\n    };\n    return ECommandLayerSendBackward;\n}(DCommandBase));\nexport { ECommandLayerSendBackward };\n//# sourceMappingURL=e-command-layer-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueAdd, _super);\n    function ECommandShapeActionValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueAdd.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueAdd.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeActionValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].action.add(value);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.action.remove(shape.action.size() - 1);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeActionValueAdd;\n}(DCommandBase));\nexport { ECommandShapeActionValueAdd };\n//# sourceMappingURL=e-command-shape-action-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueBringForward, _super);\n    function ECommandShapeActionValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        _this._indices = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueBringForward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueBringForward.prototype.execute = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.action.indexOf(target);\n            indices.push(index);\n            if (0 < index) {\n                shape.action.swap(index - 1, index);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 < index) {\n                shape.action.swap(index - 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeActionValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeActionValueBringForward };\n//# sourceMappingURL=e-command-shape-action-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueRemove, _super);\n    function ECommandShapeActionValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        _this._indices = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueRemove.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueRemove.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueRemove.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueRemove.prototype.execute = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.action.indexOf(target);\n            indices.push(index);\n            if (0 <= index) {\n                shape.action.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.action.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.action.add(target, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeActionValueRemove;\n}(DCommandBase));\nexport { ECommandShapeActionValueRemove };\n//# sourceMappingURL=e-command-shape-action-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueReplace, _super);\n    function ECommandShapeActionValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        _this._indices = [];\n        _this._oldValues = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"oldValues\", {\n        get: function () {\n            return this._oldValues;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueReplace.prototype.execute = function () {\n        var oldValue = this._oldValue;\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.action.indexOf(oldValue);\n            indices.push(index);\n            if (0 <= index) {\n                oldValues.push(shape.action.get(index));\n                shape.action.set(index, newValue);\n            }\n            else {\n                oldValues.push(newValue);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].action.set(index, newValue);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].action.set(index, oldValues[i]);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeActionValueReplace;\n}(DCommandBase));\nexport { ECommandShapeActionValueReplace };\n//# sourceMappingURL=e-command-shape-action-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeActionValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeActionValueSendBackward, _super);\n    function ECommandShapeActionValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var action = shape.action;\n            var index = action.indexOf(target);\n            indices.push(index);\n            if (0 <= index && index < action.size() - 1) {\n                action.swap(index + 1, index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeActionValueSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueSendBackward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeActionValueSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeActionValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeActionValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var action = shape.action;\n            var index = indices[i];\n            if (0 <= index && index < action.size() - 1) {\n                action.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeActionValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeActionValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeActionValueSendBackward };\n//# sourceMappingURL=e-command-shape-action-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeCreate = /** @class */ (function (_super) {\n    __extends(ECommandShapeCreate, _super);\n    function ECommandShapeCreate(shapes, parent, selection, select) {\n        var _this = _super.call(this) || this;\n        _this._shapes = shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].reference += 1;\n        }\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._select = select;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeCreate.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"shapes\", {\n        get: function () {\n            return this._shapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"selectionStored\", {\n        get: function () {\n            return this._selectionStored;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeCreate.prototype, \"select\", {\n        get: function () {\n            return this._select;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeCreate.prototype.execute = function () {\n        var selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            this._selectionStored = selection.store();\n            selection.clearAndAddAll(this._shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeCreate.prototype.redo = function () {\n        var shapes = this._shapes;\n        var parent = this._parent;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].attach(parent);\n        }\n        var selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            selection.clearAndAddAll(shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeCreate.prototype.undo = function () {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].detach();\n        }\n        var selection = this._selection;\n        var selectionStored = this._selectionStored;\n        selection.lock();\n        if (this._select && selectionStored != null) {\n            selection.restore(selectionStored);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeCreate.prototype.destroy = function () {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.reference -= 1;\n            if (shape.parent == null && shape.reference <= 0) {\n                shape.destroy();\n            }\n        }\n    };\n    return ECommandShapeCreate;\n}(DCommandBase));\nexport { ECommandShapeCreate };\n//# sourceMappingURL=e-command-shape-create.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueAdd, _super);\n    function ECommandShapeDataMappingValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueAdd.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueAdd.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeDataMappingValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                shape.data.mapping.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.remove(mapping.size() - 1);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataMappingValueAdd;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueAdd };\n//# sourceMappingURL=e-command-shape-data-mapping-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueBringForward, _super);\n    function ECommandShapeDataMappingValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 < index) {\n                        mapping.swap(index - 1, index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueBringForward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 < index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataMappingValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueBringForward };\n//# sourceMappingURL=e-command-shape-data-mapping-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueRemove, _super);\n    function ECommandShapeDataMappingValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 <= index) {\n                        mapping.remove(index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueRemove.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueRemove.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueRemove.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueRemove.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataMappingValueRemove;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueRemove };\n//# sourceMappingURL=e-command-shape-data-mapping-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueReplace, _super);\n    function ECommandShapeDataMappingValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(oldValue);\n                    indices.push(index);\n                    if (0 <= index) {\n                        oldValues.push(mapping.get(index));\n                        mapping.set(index, newValue);\n                    }\n                    else {\n                        oldValues.push(newValue);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"oldValues\", {\n        get: function () {\n            return this._oldValues;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.set(index, newValue);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.set(index, oldValues[i]);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataMappingValueReplace;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueReplace };\n//# sourceMappingURL=e-command-shape-data-mapping-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataMappingValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataMappingValueSendBackward, _super);\n    function ECommandShapeDataMappingValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                var mapping = shape.data.getMapping();\n                if (mapping) {\n                    var index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 <= index && index < mapping.size() - 1) {\n                        mapping.swap(index + 1, index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataMappingValueSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueSendBackward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataMappingValueSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataMappingValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataMappingValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            var mapping = shape.data.getMapping();\n            if (mapping && 0 <= index && index < mapping.size() - 1) {\n                mapping.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataMappingValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataMappingValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeDataMappingValueSendBackward };\n//# sourceMappingURL=e-command-shape-data-mapping-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueAdd, _super);\n    function ECommandShapeDataValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueAdd.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueAdd.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeDataValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].data.add(value);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.data.remove(shape.data.size() - 1);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataValueAdd;\n}(DCommandBase));\nexport { ECommandShapeDataValueAdd };\n//# sourceMappingURL=e-command-shape-data-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueBringForward, _super);\n    function ECommandShapeDataValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.data.indexOf(target);\n            indices.push(index);\n            if (0 < index) {\n                shape.data.swap(index - 1, index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueBringForward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 < index) {\n                shape.data.swap(index - 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeDataValueBringForward };\n//# sourceMappingURL=e-command-shape-data-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueRemove, _super);\n    function ECommandShapeDataValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.data.indexOf(target);\n            indices.push(index);\n            if (0 <= index) {\n                shape.data.remove(index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueRemove.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueRemove.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueRemove.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.data.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = indices[i];\n            if (0 <= index) {\n                shape.data.add(target, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataValueRemove;\n}(DCommandBase));\nexport { ECommandShapeDataValueRemove };\n//# sourceMappingURL=e-command-shape-data-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueReplace, _super);\n    function ECommandShapeDataValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var index = shape.data.indexOf(oldValue);\n            indices.push(index);\n            if (0 <= index) {\n                oldValues.push(shape.data.get(index));\n                shape.data.set(index, newValue);\n            }\n            else {\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"oldValue\", {\n        get: function () {\n            return this._oldValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"newValue\", {\n        get: function () {\n            return this._newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"oldValues\", {\n        get: function () {\n            return this._oldValues;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueReplace.prototype, \"list\", {\n        get: function () {\n            return this._list;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].data.set(index, newValue);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var index = indices[i];\n            if (0 <= index) {\n                shapes[i].data.set(index, oldValues[i]);\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeDataValueReplace;\n}(DCommandBase));\nexport { ECommandShapeDataValueReplace };\n//# sourceMappingURL=e-command-shape-data-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeDataValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeDataValueSendBackward, _super);\n    function ECommandShapeDataValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var data = shape.data;\n            var index = data.indexOf(target);\n            indices.push(index);\n            if (0 <= index && index < data.size() - 1) {\n                data.swap(index + 1, index);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDataValueSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueSendBackward.prototype, \"target\", {\n        get: function () {\n            return this._target;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDataValueSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDataValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDataValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var data = shape.data;\n            var index = indices[i];\n            if (0 <= index && index < data.size() - 1) {\n                data.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeDataValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeDataValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeDataValueSendBackward };\n//# sourceMappingURL=e-command-shape-data-value-send-backward.js.map","import { EShapeBase } from \"@wcardinal/wcardinal-ui\";\n/**\n * {@link EShape} search utility.\n */\nvar UtilShapeSearch = /** @class */ (function () {\n    function UtilShapeSearch() {\n    }\n    /**\n     * Returns indices of the given shapes.\n     *\n     * @param shapes shapes\n     * @return indices\n     */\n    UtilShapeSearch.toIndices = function (shapes) {\n        var result = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            result.push(shapes[i].index);\n        }\n        return result;\n    };\n    /**\n     * Returns a depth of the given shape.\n     *\n     * @param shape a shape\n     * @return a depth\n     */\n    UtilShapeSearch.toDepth = function (shape) {\n        var result = 0;\n        var parent = shape.parent;\n        while (parent instanceof EShapeBase) {\n            result += 1;\n            parent = parent.parent;\n        }\n        return result;\n    };\n    /**\n     * Returns a deepest shape on the path to the given shapes.\n     *\n     * @param shapeA a shape\n     * @param shapeB a shape\n     * @return a found shape\n     */\n    UtilShapeSearch.toSharedParent = function (shapeA, shapeB) {\n        var depthA = this.toDepth(shapeA);\n        var depthB = this.toDepth(shapeB);\n        if (depthA < depthB) {\n            var parent_1 = shapeA.parent;\n            while (parent_1 instanceof EShapeBase) {\n                if (this.isParent(shapeB, parent_1)) {\n                    return parent_1;\n                }\n                parent_1 = parent_1.parent;\n            }\n            return parent_1;\n        }\n        else {\n            var parent_2 = shapeB.parent;\n            while (parent_2 instanceof EShapeBase) {\n                if (this.isParent(shapeA, parent_2)) {\n                    return parent_2;\n                }\n                parent_2 = parent_2.parent;\n            }\n            return parent_2;\n        }\n    };\n    /**\n     * Returns a shape on the path to the given shape whose parent is equals to the given parent.\n     * If there is no such shape, returns a root shape on the path.\n     *\n     * @param shape a shape\n     * @param parent a parent\n     * @returns a found shape\n     */\n    UtilShapeSearch.toOfParent = function (shape, parent) {\n        var shapeParent = shape.parent;\n        while (shapeParent !== parent && shapeParent instanceof EShapeBase) {\n            shape = shapeParent;\n            shapeParent = shapeParent.parent;\n        }\n        return shape;\n    };\n    /**\n     * Returns true if the given target is on the path to the given shape.\n     *\n     * @param shape a shape\n     * @param target a check target\n     * @return true if the given target is on the path to the given shape\n     */\n    UtilShapeSearch.isParent = function (shape, target) {\n        var parent = shape.parent;\n        while (parent instanceof EShapeBase) {\n            if (parent === target) {\n                return true;\n            }\n            parent = parent.parent;\n        }\n        return false;\n    };\n    /**\n     * Returns a selected shape on the path to the given shape.\n     * If there are more than one selected shapes, returns a deepest selected shape.\n     *\n     * @param shape a shape\n     * @return a found selected shape or null\n     */\n    UtilShapeSearch.toSelected = function (shape) {\n        var target = shape;\n        while (target instanceof EShapeBase) {\n            if (target.selected) {\n                return target;\n            }\n            target = target.parent;\n        }\n        return null;\n    };\n    UtilShapeSearch.findChildById = function (shape, id, recursively) {\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.id === id) {\n                return child;\n            }\n            if (recursively === true) {\n                var result = UtilShapeSearch.findChildById(child, id, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilShapeSearch.findChildByType = function (shape, type, recursively) {\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.type === type) {\n                return child;\n            }\n            if (recursively === true) {\n                var result = UtilShapeSearch.findChildByType(child, type, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilShapeSearch.findChild = function (shape, matcher, recursively) {\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (matcher(child)) {\n                return child;\n            }\n            if (recursively === true) {\n                var result = UtilShapeSearch.findChild(child, matcher, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilShapeSearch.findChildrenByType = function (shape, type, recursively, result) {\n        result = result || [];\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.type === type) {\n                result.push(child);\n            }\n            if (recursively === true) {\n                UtilShapeSearch.findChildrenByType(child, type, recursively, result);\n            }\n        }\n        return result;\n    };\n    UtilShapeSearch.findChildren = function (shape, matcher, recursively, result) {\n        result = result || [];\n        var children = shape.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (matcher(child)) {\n                result.push(child);\n            }\n            if (recursively === true) {\n                UtilShapeSearch.findChildren(child, matcher, recursively, result);\n            }\n        }\n        return result;\n    };\n    UtilShapeSearch.COMPARATOR_INDEX = function (a, b) {\n        return a.index - b.index;\n    };\n    return UtilShapeSearch;\n}());\nexport { UtilShapeSearch };\n//# sourceMappingURL=util-shape-search.js.map","import { UtilShapeSearch } from \"./util-shape-search\";\nvar UtilShapeDeleter = /** @class */ (function () {\n    function UtilShapeDeleter() {\n    }\n    UtilShapeDeleter.addAll = function (shapes, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            result.add(shape);\n            this.addAll(shape.children, result);\n        }\n        return result;\n    };\n    UtilShapeDeleter.delete = function (parent, shapes, generateDeletedShapeList, deletedShapeSet) {\n        var _a;\n        var children = parent.children;\n        var length = children.length;\n        // Update indices\n        deletedShapeSet !== null && deletedShapeSet !== void 0 ? deletedShapeSet : (deletedShapeSet = (_a = UtilShapeDeleter.EXCEPTIONS) !== null && _a !== void 0 ? _a : (UtilShapeDeleter.EXCEPTIONS = new Set()));\n        for (var i = 0; i < length; ++i) {\n            var child = children[i];\n            if (child.selected) {\n                child.index = length + i;\n                deletedShapeSet.add(child);\n                this.addAll(child.children, deletedShapeSet);\n            }\n            else {\n                child.index = i;\n            }\n        }\n        // Sort\n        children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n        // Detach\n        if (generateDeletedShapeList === true) {\n            for (var i = length - 1; 0 <= i; --i) {\n                var child = children[i];\n                if (child.selected) {\n                    child.index -= length;\n                    child.parent = null;\n                    child.selected = false;\n                    child.uploaded = undefined;\n                    child.onDetach(deletedShapeSet);\n                }\n                else {\n                    if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                        deletedShapeSet.clear();\n                    }\n                    var size = children.length - (i + 1);\n                    if (0 < size) {\n                        var result = children.splice(i + 1, size);\n                        if (shapes != null) {\n                            shapes.length = 0;\n                        }\n                        parent.onChildTransformChange();\n                        parent.toDirty();\n                        return result;\n                    }\n                    else {\n                        if (shapes != null) {\n                            shapes.length = 0;\n                        }\n                        return null;\n                    }\n                }\n            }\n            if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                deletedShapeSet.clear();\n            }\n            if (0 < children.length) {\n                var result = children.splice(0, children.length);\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                parent.onChildTransformChange();\n                parent.toDirty();\n                return result;\n            }\n            else {\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                return null;\n            }\n        }\n        else {\n            for (var i = length - 1; 0 <= i; --i) {\n                var child = children[i];\n                if (child.selected) {\n                    child.parent = null;\n                    child.selected = false;\n                    child.uploaded = undefined;\n                    child.onDetach(deletedShapeSet);\n                }\n                else {\n                    if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                        deletedShapeSet.clear();\n                    }\n                    children.length = i + 1;\n                    if (shapes != null) {\n                        shapes.length = 0;\n                    }\n                    parent.onChildTransformChange();\n                    parent.toDirty();\n                    return null;\n                }\n            }\n            if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                deletedShapeSet.clear();\n            }\n            if (0 < children.length) {\n                children.length = 0;\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                parent.onChildTransformChange();\n                parent.toDirty();\n            }\n            else {\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n            }\n            return null;\n        }\n    };\n    return UtilShapeDeleter;\n}());\nexport { UtilShapeDeleter };\n//# sourceMappingURL=util-shape-deleter.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nvar ECommandShapeDelete = /** @class */ (function (_super) {\n    __extends(ECommandShapeDelete, _super);\n    function ECommandShapeDelete(shapes, indices, parent, selection, select) {\n        var _this = _super.call(this) || this;\n        _this._shapes = shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].reference += 1;\n        }\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._select = select;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeDelete.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"shapes\", {\n        get: function () {\n            return this._shapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeDelete.prototype, \"select\", {\n        get: function () {\n            return this._select;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeDelete.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeDelete.prototype.redo = function () {\n        var selection = this._selection;\n        if (this._select) {\n            selection.delete(false);\n        }\n        else {\n            var shapes = this._shapes;\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = true;\n            }\n            UtilShapeDeleter.delete(this._parent, undefined, false);\n            selection.update(\"TREE\");\n        }\n        return true;\n    };\n    ECommandShapeDelete.prototype.undo = function () {\n        var shapes = this._shapes;\n        var indices = this._indices;\n        var parent = this._parent;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].attach(parent, indices[i]);\n        }\n        var selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            selection.clearAndAddAll(shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeDelete.prototype.destroy = function () {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            shape.reference -= 1;\n            if (shape.parent == null && shape.reference <= 0) {\n                shape.destroy();\n            }\n        }\n        shapes.length = 0;\n    };\n    return ECommandShapeDelete;\n}(DCommandBase));\nexport { ECommandShapeDelete };\n//# sourceMappingURL=e-command-shape-delete.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeConnectors, EShapeGroup, EShapeLockPart, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nvar ECommandShapeGroup = /** @class */ (function (_super) {\n    __extends(ECommandShapeGroup, _super);\n    function ECommandShapeGroup(parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._before = [];\n        _this._deleteds = [];\n        _this._indices = [];\n        _this._createds = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeGroup.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"before\", {\n        get: function () {\n            return this._before;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"deleteds\", {\n        get: function () {\n            return this._deleteds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeGroup.prototype, \"createds\", {\n        get: function () {\n            return this._createds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeGroup.prototype.execute = function () {\n        // Save the current selection\n        var selection = this._selection;\n        this._before = selection.store();\n        selection.lock();\n        // Unselect shapes that do not have the grouping capability\n        var shapes = selection.get();\n        for (var i = shapes.length - 1; 0 <= i; --i) {\n            var shape = shapes[i];\n            if (!EShapeCapabilities.contains(shape, EShapeCapability.GROUPING)) {\n                shape.selected = false;\n                shapes.splice(i, 1);\n            }\n        }\n        // Delete selected shapes\n        var parent = this._parent;\n        var deletedSet = new Set();\n        var deleteds = UtilShapeDeleter.delete(parent, shapes, true, deletedSet) || [];\n        this._deleteds = deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].reference += 1;\n        }\n        // Create a new group\n        var modifier = selection.modifier;\n        var x = modifier.position.x + modifier.width * 0.5;\n        var y = modifier.position.y + modifier.height * 0.5;\n        var w = modifier.width;\n        var h = modifier.height;\n        var group = new EShapeGroup(EShapeResourceManagerDeserializationMode.EDITOR);\n        group.transform.position.set(x, y);\n        group.size.set(w, h);\n        group.attach(parent);\n        var groupChildren = group.children;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var clone = deleteds[i].clone();\n            clone.lock(EShapeLockPart.ALL);\n            var clonePosition = clone.transform.position;\n            clonePosition.set(clonePosition.x - x, clonePosition.y - y);\n            if (clone instanceof EShapeConnectorLine) {\n                var edge = clone.edge;\n                var tail = edge.tail;\n                var tailAcceptor = tail.acceptor;\n                var tailAcceptorShape = tailAcceptor.shape;\n                var tailLocal = tail.local;\n                if (tailAcceptorShape == null) {\n                    tailLocal.set(tailLocal.x - x, tailLocal.y - y);\n                }\n                else if (!deletedSet.has(tailAcceptorShape)) {\n                    tailAcceptor.shape = null;\n                    tailLocal.set(tailLocal.x - x, tailLocal.y - y);\n                }\n                var head = edge.head;\n                var headAcceptor = head.acceptor;\n                var headAcceptorShape = headAcceptor.shape;\n                var headLocal = head.local;\n                if (headAcceptorShape == null) {\n                    headLocal.set(headLocal.x - x, headLocal.y - y);\n                }\n                else if (!deletedSet.has(headAcceptorShape)) {\n                    headAcceptor.shape = null;\n                    headLocal.set(headLocal.x - x, headLocal.y - y);\n                }\n            }\n            clone.parent = group;\n            groupChildren.push(clone);\n        }\n        EShapeConnectors.moveAll(deleteds, groupChildren, deleteds, groupChildren);\n        for (var i = 0, imax = groupChildren.length; i < imax; ++i) {\n            groupChildren[i].unlock(EShapeLockPart.ALL, true);\n        }\n        group.onChildTransformChange();\n        group.toDirty();\n        group.onAttach();\n        group.reference += 1;\n        this._createds = [group];\n        deletedSet.clear();\n        // Indices\n        this._indices = UtilShapeSearch.toIndices(deleteds);\n        // Select a group\n        selection.clearAndAddAll(this._createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeGroup.prototype.redo = function () {\n        // Delete shapes\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(this._deleteds);\n        selection.delete(false);\n        // Add a group and select it\n        var parent = this._parent;\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            createds[i].attach(parent);\n        }\n        // Select created shapes\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeGroup.prototype.undo = function () {\n        // Delete a group\n        var parent = this._parent;\n        var selection = this._selection;\n        selection.lock();\n        var createds = this._createds;\n        for (var i = createds.length - 1; 0 <= i; --i) {\n            createds[i].detach();\n        }\n        // Restore deleted shapes\n        var deleteds = this._deleteds;\n        var indices = this._indices;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].attach(parent, indices[i]);\n        }\n        // Restore the selection\n        this._selection.restore(this._before);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeGroup.prototype.destroy = function () {\n        // Stored selection\n        this._before.length = 0;\n        // Deleted shapes\n        var deleteds = this._deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var deleted = deleteds[i];\n            deleted.reference -= 1;\n            if (deleted.parent == null && deleted.reference <= 0) {\n                deleted.destroy();\n            }\n        }\n        deleteds.length = 0;\n        // Created shapes\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            var created = createds[i];\n            created.reference -= 1;\n            if (created.parent == null && created.reference <= 0) {\n                created.destroy();\n            }\n        }\n        createds.length = 0;\n    };\n    return ECommandShapeGroup;\n}(DCommandBase));\nexport { ECommandShapeGroup };\n//# sourceMappingURL=e-command-shape-group.js.map","var NONE = 0;\nvar PROPERTY = 1;\nvar PROPERTY_ID = 2;\nvar SELECTION = 4;\nvar TREE = 8;\nexport var EToolSelectSelectionUpdatedPart = {\n    NONE: NONE,\n    PROPERTY: PROPERTY,\n    PROPERTY_ID: PROPERTY_ID,\n    SELECTION: SELECTION,\n    TREE: TREE,\n    ALL: PROPERTY | PROPERTY_ID | SELECTION | TREE\n};\n//# sourceMappingURL=e-tool-select-selection-updated-part.js.map","import { __extends } from \"tslib\";\nimport { EShapeGroup } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeCapabilities } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeProperty = /** @class */ (function (_super) {\n    __extends(ECommandShapeProperty, _super);\n    function ECommandShapeProperty(selection, property, targets) {\n        if (targets === void 0) { targets = selection.get(); }\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._shapes = [];\n        _this._capabilities = [];\n        _this._data = [];\n        _this._property = property;\n        _this._targets = targets;\n        _this._isMerged = false;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeProperty.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeProperty.prototype, \"shapes\", {\n        get: function () {\n            return this._shapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeProperty.prototype, \"capabilities\", {\n        get: function () {\n            return this._capabilities;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeProperty.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeProperty.prototype.toCapability = function (shape) {\n        return EShapeCapability.ALL;\n    };\n    ECommandShapeProperty.prototype.isRecursive = function () {\n        return false;\n    };\n    ECommandShapeProperty.prototype.isMergeable = function () {\n        return false;\n    };\n    ECommandShapeProperty.prototype.isClassMergeable = function (target) {\n        return target.constructor === this.constructor;\n    };\n    ECommandShapeProperty.prototype.execute = function () {\n        var shapes = this._shapes;\n        var capabilities = this._capabilities;\n        var property = this._property;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            this.initProperty(shapes[i], capabilities[i], property);\n        }\n        this._selection.update(this.getParts());\n        return true;\n    };\n    ECommandShapeProperty.prototype.init = function (targets, shapes, capabilities, data, recursive) {\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (recursive && target instanceof EShapeGroup) {\n                if (EShapeCapabilities.contains(target, EShapeCapability.CHILDREN)) {\n                    this.init(target.children, shapes, capabilities, data, recursive);\n                }\n            }\n            else {\n                var capability = this.toCapability(target);\n                if (capability !== EShapeCapability.NONE) {\n                    shapes.push(target);\n                    data.push(this.getProperty(target, capability));\n                    capabilities.push(capability);\n                }\n            }\n        }\n    };\n    ECommandShapeProperty.prototype.merge = function (target) {\n        if (this.isMergeable() && this.isClassMergeable(target)) {\n            this._isMerged = true;\n            this._shapes = target.shapes;\n            this._capabilities = target.capabilities;\n            this._data = target.data;\n            return true;\n        }\n        this.init(this._targets, this._shapes, this._capabilities, this._data, this.isRecursive());\n        return false;\n    };\n    ECommandShapeProperty.prototype.isMerged = function () {\n        return this._isMerged;\n    };\n    ECommandShapeProperty.prototype.redo = function () {\n        var shapes = this._shapes;\n        var data = this._data;\n        var capabilities = this._capabilities;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var datum = data[i];\n            var capability = capabilities[i];\n            data[i] = this.getProperty(shape, capability);\n            this.setProperty(shape, capability, datum);\n        }\n        this._selection.update(this.getParts());\n        return true;\n    };\n    ECommandShapeProperty.prototype.undo = function () {\n        return this.redo();\n    };\n    ECommandShapeProperty.prototype.destroy = function () {\n        this._shapes.length = 0;\n        this._data.length = 0;\n    };\n    ECommandShapeProperty.prototype.getParts = function () {\n        return EToolSelectSelectionUpdatedPart.PROPERTY;\n    };\n    return ECommandShapeProperty;\n}(DCommandBase));\nexport { ECommandShapeProperty };\n//# sourceMappingURL=e-command-shape-property.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyAll = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyAll, _super);\n    function ECommandShapePropertyAll(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyAll.prototype.toCapability = function (shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.ALL;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            var result = EShapeCapability.NONE;\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                result |= EShapeCapability.POSITION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n                result |= EShapeCapability.WIDTH;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n                result |= EShapeCapability.HEIGHT;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                result |= EShapeCapability.ROTATION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n                result |= EShapeCapability.SKEW;\n            }\n            return result;\n        }\n    };\n    ECommandShapePropertyAll.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y, 0, 0];\n        }\n        else {\n            var transform = shape.transform;\n            var position = transform.position;\n            var size = shape.size;\n            var skew = transform.skew;\n            return [position.x, position.y, size.x, size.y, transform.rotation, skew.x];\n        }\n    };\n    ECommandShapePropertyAll.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            var transform = shape.transform;\n            if (capability & EShapeCapability.POSITION) {\n                transform.position.set(property[0], property[1]);\n            }\n            if (capability & EShapeCapability.HEIGHT) {\n                if (capability & EShapeCapability.WIDTH) {\n                    shape.size.set(property[2], property[3]);\n                }\n                else {\n                    shape.size.y = property[3];\n                }\n            }\n            else if (capability & EShapeCapability.WIDTH) {\n                shape.size.x = property[2];\n            }\n            if (capability & EShapeCapability.ROTATION) {\n                transform.rotation = property[4];\n            }\n            if (capability & EShapeCapability.SKEW) {\n                transform.skew.set(property[5], property[5]);\n            }\n        }\n    };\n    ECommandShapePropertyAll.prototype.initProperty = function (shape, capability, property) {\n        // DO NOTHING\n    };\n    return ECommandShapePropertyAll;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyAll };\n//# sourceMappingURL=e-command-shape-property-all.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyCapability = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCapability, _super);\n    function ECommandShapePropertyCapability() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCapability.prototype.getProperty = function (shape, capability) {\n        var shapeCapability = shape.getCapability();\n        if (shapeCapability != null) {\n            return shapeCapability.locked;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyCapability.prototype.setProperty = function (shape, capability, property) {\n        if (property !== EShapeCapability.NONE) {\n            shape.capability.locked = property;\n        }\n        else {\n            var shapeCapability = shape.getCapability();\n            if (shapeCapability != null) {\n                shapeCapability.locked = property;\n            }\n        }\n    };\n    return ECommandShapePropertyCapability;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyCapability };\n//# sourceMappingURL=e-command-shape-property-capability.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyCapability } from \"./e-command-shape-property-capability\";\nvar ECommandShapePropertyCapabilityLock = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCapabilityLock, _super);\n    function ECommandShapePropertyCapabilityLock() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCapabilityLock.prototype.initProperty = function (shape, capability, property) {\n        shape.capability.locked |= property;\n    };\n    return ECommandShapePropertyCapabilityLock;\n}(ECommandShapePropertyCapability));\nexport { ECommandShapePropertyCapabilityLock };\n//# sourceMappingURL=e-command-shape-property-capability-lock.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyCapability } from \"./e-command-shape-property-capability\";\nvar ECommandShapePropertyCapabilityUnlock = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCapabilityUnlock, _super);\n    function ECommandShapePropertyCapabilityUnlock() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCapabilityUnlock.prototype.initProperty = function (shape, capability, property) {\n        shape.capability.locked &= ~property;\n    };\n    return ECommandShapePropertyCapabilityUnlock;\n}(ECommandShapePropertyCapability));\nexport { ECommandShapePropertyCapabilityUnlock };\n//# sourceMappingURL=e-command-shape-property-capability-unlock.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyCornerOff = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCornerOff, _super);\n    function ECommandShapePropertyCornerOff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCornerOff.prototype.getProperty = function (shape, capability) {\n        return shape.corner;\n    };\n    ECommandShapePropertyCornerOff.prototype.setProperty = function (shape, capability, property) {\n        shape.corner = property;\n    };\n    ECommandShapePropertyCornerOff.prototype.initProperty = function (shape, capability, property) {\n        shape.corner &= ~property;\n    };\n    return ECommandShapePropertyCornerOff;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyCornerOff };\n//# sourceMappingURL=e-command-shape-property-corner-off.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyCornerOn = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCornerOn, _super);\n    function ECommandShapePropertyCornerOn() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCornerOn.prototype.getProperty = function (shape, capability) {\n        return shape.corner;\n    };\n    ECommandShapePropertyCornerOn.prototype.setProperty = function (shape, capability, property) {\n        shape.corner = property;\n    };\n    ECommandShapePropertyCornerOn.prototype.initProperty = function (shape, capability, property) {\n        shape.corner |= property;\n    };\n    return ECommandShapePropertyCornerOn;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyCornerOn };\n//# sourceMappingURL=e-command-shape-property-corner-on.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertySimple = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySimple, _super);\n    function ECommandShapePropertySimple() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySimple.prototype.initProperty = function (shape, capability, property) {\n        this.setProperty(shape, capability, property);\n    };\n    return ECommandShapePropertySimple;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertySimple };\n//# sourceMappingURL=e-command-shape-property-simple.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyCursor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyCursor, _super);\n    function ECommandShapePropertyCursor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyCursor.prototype.getProperty = function (shape, capability) {\n        return shape.cursor;\n    };\n    ECommandShapePropertyCursor.prototype.setProperty = function (shape, capability, property) {\n        shape.cursor = property;\n    };\n    return ECommandShapePropertyCursor;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyCursor };\n//# sourceMappingURL=e-command-shape-property-cursor.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyRecursive = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRecursive, _super);\n    function ECommandShapePropertyRecursive(selection, property) {\n        return _super.call(this, selection, property) || this;\n    }\n    ECommandShapePropertyRecursive.prototype.isRecursive = function () {\n        return true;\n    };\n    return ECommandShapePropertyRecursive;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyRecursive };\n//# sourceMappingURL=e-command-shape-property-recursive.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyRecursiveSimple = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRecursiveSimple, _super);\n    function ECommandShapePropertyRecursiveSimple() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyRecursiveSimple.prototype.initProperty = function (shape, capability, property) {\n        this.setProperty(shape, capability, property);\n    };\n    return ECommandShapePropertyRecursiveSimple;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyRecursiveSimple };\n//# sourceMappingURL=e-command-shape-property-recursive-simple.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyFillColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFillColor, _super);\n    function ECommandShapePropertyFillColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFillColor.prototype.getProperty = function (shape, capability) {\n        return [shape.fill.color, shape.fill.alpha];\n    };\n    ECommandShapePropertyFillColor.prototype.setProperty = function (shape, capability, property) {\n        shape.fill.set(undefined, property[0], property[1]);\n    };\n    return ECommandShapePropertyFillColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyFillColor };\n//# sourceMappingURL=e-command-shape-property-fill-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyFillEnable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFillEnable, _super);\n    function ECommandShapePropertyFillEnable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFillEnable.prototype.getProperty = function (shape, capability) {\n        return shape.fill.enable;\n    };\n    ECommandShapePropertyFillEnable.prototype.setProperty = function (shape, capability, property) {\n        shape.fill.enable = property;\n    };\n    return ECommandShapePropertyFillEnable;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyFillEnable };\n//# sourceMappingURL=e-command-shape-property-fill-enable.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyFocusable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyFocusable, _super);\n    function ECommandShapePropertyFocusable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyFocusable.prototype.getProperty = function (shape, capability) {\n        return shape.state.isFocusable;\n    };\n    ECommandShapePropertyFocusable.prototype.setProperty = function (shape, capability, property) {\n        shape.state.isFocusable = property;\n    };\n    return ECommandShapePropertyFocusable;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyFocusable };\n//# sourceMappingURL=e-command-shape-property-focusable.js.map","import { __extends } from \"tslib\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyId = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyId, _super);\n    function ECommandShapePropertyId() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyId.prototype.getProperty = function (shape, capability) {\n        return shape.id;\n    };\n    ECommandShapePropertyId.prototype.setProperty = function (shape, capability, property) {\n        shape.id = property;\n    };\n    ECommandShapePropertyId.prototype.getParts = function () {\n        return EToolSelectSelectionUpdatedPart.PROPERTY_ID;\n    };\n    return ECommandShapePropertyId;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyId };\n//# sourceMappingURL=e-command-shape-property-id.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyImageClear = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyImageClear, _super);\n    function ECommandShapePropertyImageClear(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyImageClear.prototype.getProperty = function (shape, capability) {\n        return shape.image;\n    };\n    ECommandShapePropertyImageClear.prototype.setProperty = function (shape, capability, property) {\n        shape.image = property;\n    };\n    ECommandShapePropertyImageClear.prototype.initProperty = function (shape, capability, property) {\n        shape.image = undefined;\n        shape.gradient = undefined;\n    };\n    return ECommandShapePropertyImageClear;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyImageClear };\n//# sourceMappingURL=e-command-shape-property-image-clear.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyImageFitTo = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyImageFitTo, _super);\n    function ECommandShapePropertyImageFitTo(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyImageFitTo.prototype.getProperty = function (shape, capability) {\n        var size = shape.size;\n        return [size.x, size.y];\n    };\n    ECommandShapePropertyImageFitTo.prototype.setProperty = function (shape, capability, property) {\n        shape.size.set(property[0], property[1]);\n    };\n    ECommandShapePropertyImageFitTo.prototype.initProperty = function (shape, capability, property) {\n        var image = shape.image;\n        if (image) {\n            shape.size.set(image.width, image.height);\n        }\n    };\n    return ECommandShapePropertyImageFitTo;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyImageFitTo };\n//# sourceMappingURL=e-command-shape-property-image-fit-to.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyImage = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyImage, _super);\n    function ECommandShapePropertyImage(selection, image, gradient) {\n        return _super.call(this, selection, [image, gradient]) || this;\n    }\n    ECommandShapePropertyImage.prototype.getProperty = function (shape, capability) {\n        return shape.image;\n    };\n    ECommandShapePropertyImage.prototype.setProperty = function (shape, capability, property) {\n        shape.image = property;\n    };\n    ECommandShapePropertyImage.prototype.initProperty = function (shape, capability, property) {\n        shape.image = property[0];\n        shape.gradient = property[1];\n    };\n    return ECommandShapePropertyImage;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyImage };\n//# sourceMappingURL=e-command-shape-property-image.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyInteractive = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyInteractive, _super);\n    function ECommandShapePropertyInteractive() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyInteractive.prototype.getProperty = function (shape, capability) {\n        return shape.interactive;\n    };\n    ECommandShapePropertyInteractive.prototype.setProperty = function (shape, capability, property) {\n        shape.interactive = property;\n    };\n    return ECommandShapePropertyInteractive;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyInteractive };\n//# sourceMappingURL=e-command-shape-property-interactive.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadColor, _super);\n    function ECommandShapePropertyLineHeadColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadColor.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadColor.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            var fill = points.marker.head.fill;\n            return [fill.color, fill.alpha];\n        }\n        return [0, 0];\n    };\n    ECommandShapePropertyLineHeadColor.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.fill.set(undefined, property[0], property[1]);\n        }\n    };\n    return ECommandShapePropertyLineHeadColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadColor };\n//# sourceMappingURL=e-command-shape-property-line-head-color.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadMargin = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadMargin, _super);\n    function ECommandShapePropertyLineHeadMargin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadMargin.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadMargin.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            return shape.edge.head.margin;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineHeadMargin.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            shape.edge.head.margin = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadMargin;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadMargin };\n//# sourceMappingURL=e-command-shape-property-line-head-margin.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadSizeX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadSizeX, _super);\n    function ECommandShapePropertyLineHeadSizeX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadSizeX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadSizeX.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.head.size.x;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineHeadSizeX.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.size.x = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadSizeX;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadSizeX };\n//# sourceMappingURL=e-command-shape-property-line-head-size-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadSizeY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadSizeY, _super);\n    function ECommandShapePropertyLineHeadSizeY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadSizeY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadSizeY.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.head.size.y;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineHeadSizeY.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.size.y = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadSizeY;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadSizeY };\n//# sourceMappingURL=e-command-shape-property-line-head-size-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapePointsMarkerType } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineHeadType = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineHeadType, _super);\n    function ECommandShapePropertyLineHeadType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineHeadType.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineHeadType.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.head.type;\n        }\n        return EShapePointsMarkerType.NONE;\n    };\n    ECommandShapePropertyLineHeadType.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.head.type = property;\n        }\n    };\n    return ECommandShapePropertyLineHeadType;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineHeadType };\n//# sourceMappingURL=e-command-shape-property-line-head-type.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailColor, _super);\n    function ECommandShapePropertyLineTailColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailColor.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailColor.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            var fill = points.marker.tail.fill;\n            return [fill.color, fill.alpha];\n        }\n        return [0, 0];\n    };\n    ECommandShapePropertyLineTailColor.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.fill.set(undefined, property[0], property[1]);\n        }\n    };\n    return ECommandShapePropertyLineTailColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailColor };\n//# sourceMappingURL=e-command-shape-property-line-tail-color.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailMargin = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailMargin, _super);\n    function ECommandShapePropertyLineTailMargin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailMargin.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailMargin.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            return shape.edge.tail.margin;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineTailMargin.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            shape.edge.tail.margin = property;\n        }\n    };\n    return ECommandShapePropertyLineTailMargin;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailMargin };\n//# sourceMappingURL=e-command-shape-property-line-tail-margin.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailSizeX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailSizeX, _super);\n    function ECommandShapePropertyLineTailSizeX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailSizeX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailSizeX.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.tail.size.x;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineTailSizeX.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.size.x = property;\n        }\n    };\n    return ECommandShapePropertyLineTailSizeX;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailSizeX };\n//# sourceMappingURL=e-command-shape-property-line-tail-size-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailSizeY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailSizeY, _super);\n    function ECommandShapePropertyLineTailSizeY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailSizeY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailSizeY.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.tail.size.y;\n        }\n        return 0;\n    };\n    ECommandShapePropertyLineTailSizeY.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.size.y = property;\n        }\n    };\n    return ECommandShapePropertyLineTailSizeY;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailSizeY };\n//# sourceMappingURL=e-command-shape-property-line-tail-size-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapePointsMarkerType } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyLineTailType = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineTailType, _super);\n    function ECommandShapePropertyLineTailType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineTailType.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyLineTailType.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points) {\n            return points.marker.tail.type;\n        }\n        return EShapePointsMarkerType.NONE;\n    };\n    ECommandShapePropertyLineTailType.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points) {\n            points.marker.tail.type = property;\n        }\n    };\n    return ECommandShapePropertyLineTailType;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyLineTailType };\n//# sourceMappingURL=e-command-shape-property-line-tail-type.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapePointsStyle } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPointsStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPointsStyle, _super);\n    function ECommandShapePropertyPointsStyle(selection, added, removed) {\n        return _super.call(this, selection, [added, removed]) || this;\n    }\n    ECommandShapePropertyPointsStyle.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE)) {\n            return EShapeCapability.LINE;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPointsStyle.prototype.getProperty = function (shape, capability) {\n        var points = shape.points;\n        if (points != null) {\n            return points.style;\n        }\n        return EShapePointsStyle.NONE;\n    };\n    ECommandShapePropertyPointsStyle.prototype.setProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points != null) {\n            points.style = property;\n        }\n    };\n    ECommandShapePropertyPointsStyle.prototype.initProperty = function (shape, capability, property) {\n        var points = shape.points;\n        if (points != null) {\n            points.style = (points.style & ~property[1]) | property[0];\n        }\n    };\n    return ECommandShapePropertyPointsStyle;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPointsStyle };\n//# sourceMappingURL=e-command-shape-property-points-style.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPositionAndRotate = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionAndRotate, _super);\n    function ECommandShapePropertyPositionAndRotate(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyPositionAndRotate.prototype.toCapability = function (shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.ALL;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            var result = EShapeCapability.NONE;\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                result |= EShapeCapability.POSITION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                result |= EShapeCapability.ROTATION;\n            }\n            return result;\n        }\n    };\n    ECommandShapePropertyPositionAndRotate.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y];\n        }\n        else {\n            var transform = shape.transform;\n            var position = transform.position;\n            return [position.x, position.y, transform.rotation, 0];\n        }\n    };\n    ECommandShapePropertyPositionAndRotate.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            var transform = shape.transform;\n            if (capability & EShapeCapability.POSITION) {\n                transform.position.set(property[0], property[1]);\n            }\n            if (capability & EShapeCapability.ROTATION) {\n                transform.rotation = property[2];\n            }\n        }\n    };\n    ECommandShapePropertyPositionAndRotate.prototype.initProperty = function (shape, capability, property) {\n        // DO NOTHING\n    };\n    return ECommandShapePropertyPositionAndRotate;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPositionAndRotate };\n//# sourceMappingURL=e-command-shape-property-position-and-rotation.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPositionLeft = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionLeft, _super);\n    function ECommandShapePropertyPositionLeft() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionLeft.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionLeft.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.x;\n    };\n    ECommandShapePropertyPositionLeft.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.x = property;\n    };\n    ECommandShapePropertyPositionLeft.prototype.initProperty = function (shape, capability, property) {\n        var _a;\n        var rectangle = ((_a = ECommandShapePropertyPositionLeft.WORK) !== null && _a !== void 0 ? _a : (ECommandShapePropertyPositionLeft.WORK = new Rectangle()));\n        shape.getBoundsLocal(false, rectangle);\n        shape.transform.position.x += property - rectangle.x;\n    };\n    ECommandShapePropertyPositionLeft.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionLeft;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPositionLeft };\n//# sourceMappingURL=e-command-shape-property-position-left.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPositionTop = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionTop, _super);\n    function ECommandShapePropertyPositionTop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionTop.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionTop.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.y;\n    };\n    ECommandShapePropertyPositionTop.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.y = property;\n    };\n    ECommandShapePropertyPositionTop.prototype.initProperty = function (shape, capability, property) {\n        var _a;\n        var rectangle = ((_a = ECommandShapePropertyPositionTop.WORK) !== null && _a !== void 0 ? _a : (ECommandShapePropertyPositionTop.WORK = new Rectangle()));\n        shape.getBoundsLocal(false, rectangle);\n        shape.transform.position.y += property - rectangle.y;\n    };\n    ECommandShapePropertyPositionTop.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionTop;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPositionTop };\n//# sourceMappingURL=e-command-shape-property-position-top.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyPositionX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionX, _super);\n    function ECommandShapePropertyPositionX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionX.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.x;\n    };\n    ECommandShapePropertyPositionX.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.x = property;\n    };\n    ECommandShapePropertyPositionX.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionX;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyPositionX };\n//# sourceMappingURL=e-command-shape-property-position-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyPositionY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPositionY, _super);\n    function ECommandShapePropertyPositionY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyPositionY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyPositionY.prototype.getProperty = function (shape, capability) {\n        return shape.transform.position.y;\n    };\n    ECommandShapePropertyPositionY.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.position.y = property;\n    };\n    ECommandShapePropertyPositionY.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyPositionY;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyPositionY };\n//# sourceMappingURL=e-command-shape-property-position-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyPosition = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyPosition, _super);\n    function ECommandShapePropertyPosition(selection) {\n        return _super.call(this, selection, undefined) || this;\n    }\n    ECommandShapePropertyPosition.prototype.toCapability = function (shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.POSITION;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                return EShapeCapability.POSITION;\n            }\n            return EShapeCapability.NONE;\n        }\n    };\n    ECommandShapePropertyPosition.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y];\n        }\n        else {\n            var position = shape.transform.position;\n            return [position.x, position.y, 0, 0];\n        }\n    };\n    ECommandShapePropertyPosition.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            shape.transform.position.set(property[0], property[1]);\n        }\n    };\n    ECommandShapePropertyPosition.prototype.initProperty = function (shape, capability, property) {\n        // DO NOTHING\n    };\n    return ECommandShapePropertyPosition;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyPosition };\n//# sourceMappingURL=e-command-shape-property-position.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyRadius = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRadius, _super);\n    function ECommandShapePropertyRadius() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyRadius.prototype.getProperty = function (shape, capability) {\n        return shape.radius;\n    };\n    ECommandShapePropertyRadius.prototype.setProperty = function (shape, capability, property) {\n        shape.radius = property;\n    };\n    ECommandShapePropertyRadius.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyRadius;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyRadius };\n//# sourceMappingURL=e-command-shape-property-radius.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyRotation = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyRotation, _super);\n    function ECommandShapePropertyRotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyRotation.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n            return EShapeCapability.ROTATION;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertyRotation.prototype.getProperty = function (shape, capability) {\n        return shape.transform.rotation;\n    };\n    ECommandShapePropertyRotation.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.rotation = property;\n    };\n    ECommandShapePropertyRotation.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyRotation;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyRotation };\n//# sourceMappingURL=e-command-shape-property-rotation.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyShortcut = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyShortcut, _super);\n    function ECommandShapePropertyShortcut() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyShortcut.prototype.getProperty = function (shape, capability) {\n        return shape.shortcut;\n    };\n    ECommandShapePropertyShortcut.prototype.setProperty = function (shape, capability, property) {\n        shape.shortcut = property;\n    };\n    return ECommandShapePropertyShortcut;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyShortcut };\n//# sourceMappingURL=e-command-shape-property-shortcut.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertySizeX = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySizeX, _super);\n    function ECommandShapePropertySizeX() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySizeX.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n            return EShapeCapability.WIDTH;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertySizeX.prototype.getProperty = function (shape, capability) {\n        return shape.size.x;\n    };\n    ECommandShapePropertySizeX.prototype.setProperty = function (shape, capability, property) {\n        shape.size.x = property;\n    };\n    ECommandShapePropertySizeX.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertySizeX;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertySizeX };\n//# sourceMappingURL=e-command-shape-property-size-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertySizeY = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySizeY, _super);\n    function ECommandShapePropertySizeY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySizeY.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n            return EShapeCapability.HEIGHT;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertySizeY.prototype.getProperty = function (shape, capability) {\n        return shape.size.y;\n    };\n    ECommandShapePropertySizeY.prototype.setProperty = function (shape, capability, property) {\n        shape.size.y = property;\n    };\n    ECommandShapePropertySizeY.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertySizeY;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertySizeY };\n//# sourceMappingURL=e-command-shape-property-size-y.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertySkew = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertySkew, _super);\n    function ECommandShapePropertySkew() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertySkew.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n            return EShapeCapability.SKEW;\n        }\n        return EShapeCapability.NONE;\n    };\n    ECommandShapePropertySkew.prototype.getProperty = function (shape, capability) {\n        return shape.transform.skew.x;\n    };\n    ECommandShapePropertySkew.prototype.setProperty = function (shape, capability, property) {\n        shape.transform.skew.set(property, property);\n    };\n    ECommandShapePropertySkew.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertySkew;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertySkew };\n//# sourceMappingURL=e-command-shape-property-skew.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeAlign = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeAlign, _super);\n    function ECommandShapePropertyStrokeAlign() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeAlign.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.align;\n    };\n    ECommandShapePropertyStrokeAlign.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.align = property;\n    };\n    ECommandShapePropertyStrokeAlign.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyStrokeAlign;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeAlign };\n//# sourceMappingURL=e-command-shape-property-stroke-align.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeColor, _super);\n    function ECommandShapePropertyStrokeColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeColor.prototype.getProperty = function (shape, capability) {\n        return [shape.stroke.color, shape.stroke.alpha];\n    };\n    ECommandShapePropertyStrokeColor.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.set(undefined, property[0], property[1]);\n    };\n    return ECommandShapePropertyStrokeColor;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeColor };\n//# sourceMappingURL=e-command-shape-property-stroke-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeEnable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeEnable, _super);\n    function ECommandShapePropertyStrokeEnable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeEnable.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.enable;\n    };\n    ECommandShapePropertyStrokeEnable.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.enable = property;\n    };\n    return ECommandShapePropertyStrokeEnable;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeEnable };\n//# sourceMappingURL=e-command-shape-property-stroke-enable.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyStrokeSideOff = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeSideOff, _super);\n    function ECommandShapePropertyStrokeSideOff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeSideOff.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.side;\n    };\n    ECommandShapePropertyStrokeSideOff.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.side = property;\n    };\n    ECommandShapePropertyStrokeSideOff.prototype.initProperty = function (shape, capability, property) {\n        shape.stroke.side &= ~property;\n    };\n    return ECommandShapePropertyStrokeSideOff;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyStrokeSideOff };\n//# sourceMappingURL=e-command-shape-property-stroke-side-off.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nvar ECommandShapePropertyStrokeSideOn = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeSideOn, _super);\n    function ECommandShapePropertyStrokeSideOn() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeSideOn.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.side;\n    };\n    ECommandShapePropertyStrokeSideOn.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.side = property;\n    };\n    ECommandShapePropertyStrokeSideOn.prototype.initProperty = function (shape, capability, property) {\n        shape.stroke.side |= property;\n    };\n    return ECommandShapePropertyStrokeSideOn;\n}(ECommandShapePropertyRecursive));\nexport { ECommandShapePropertyStrokeSideOn };\n//# sourceMappingURL=e-command-shape-property-stroke-side-on.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyStrokeStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeStyle, _super);\n    function ECommandShapePropertyStrokeStyle(selection, added, removed) {\n        return _super.call(this, selection, [added, removed]) || this;\n    }\n    ECommandShapePropertyStrokeStyle.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.style;\n    };\n    ECommandShapePropertyStrokeStyle.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.style = property;\n    };\n    ECommandShapePropertyStrokeStyle.prototype.initProperty = function (shape, capability, property) {\n        var stroke = shape.stroke;\n        stroke.style = (stroke.style & ~property[1]) | property[0];\n    };\n    return ECommandShapePropertyStrokeStyle;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyStrokeStyle };\n//# sourceMappingURL=e-command-shape-property-stroke-style.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nvar ECommandShapePropertyStrokeWidth = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyStrokeWidth, _super);\n    function ECommandShapePropertyStrokeWidth() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyStrokeWidth.prototype.getProperty = function (shape, capability) {\n        return shape.stroke.width;\n    };\n    ECommandShapePropertyStrokeWidth.prototype.setProperty = function (shape, capability, property) {\n        shape.stroke.width = property;\n    };\n    ECommandShapePropertyStrokeWidth.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyStrokeWidth;\n}(ECommandShapePropertyRecursiveSimple));\nexport { ECommandShapePropertyStrokeWidth };\n//# sourceMappingURL=e-command-shape-property-stroke-width.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextAlignHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextAlignHorizontal, _super);\n    function ECommandShapePropertyTextAlignHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextAlignHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.align.horizontal;\n    };\n    ECommandShapePropertyTextAlignHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.align.horizontal = property;\n    };\n    return ECommandShapePropertyTextAlignHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextAlignHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-align-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextAlignVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextAlignVertical, _super);\n    function ECommandShapePropertyTextAlignVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextAlignVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.align.vertical;\n    };\n    ECommandShapePropertyTextAlignVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.align.vertical = property;\n    };\n    return ECommandShapePropertyTextAlignVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextAlignVertical };\n//# sourceMappingURL=e-command-shape-property-text-align-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextClipping = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextClipping, _super);\n    function ECommandShapePropertyTextClipping() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextClipping.prototype.getProperty = function (shape, capability) {\n        return shape.text.clipping;\n    };\n    ECommandShapePropertyTextClipping.prototype.setProperty = function (shape, capability, property) {\n        shape.text.clipping = property;\n    };\n    return ECommandShapePropertyTextClipping;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextClipping };\n//# sourceMappingURL=e-command-shape-property-text-clipping.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextColor, _super);\n    function ECommandShapePropertyTextColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextColor.prototype.getProperty = function (shape, capability) {\n        var text = shape.text;\n        return [text.color, text.alpha];\n    };\n    ECommandShapePropertyTextColor.prototype.setProperty = function (shape, capability, property) {\n        var text = shape.text;\n        text.color = property[0];\n        text.alpha = property[1];\n    };\n    return ECommandShapePropertyTextColor;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextColor };\n//# sourceMappingURL=e-command-shape-property-text-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextDirection = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextDirection, _super);\n    function ECommandShapePropertyTextDirection() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextDirection.prototype.getProperty = function (shape, capability) {\n        return shape.text.direction;\n    };\n    ECommandShapePropertyTextDirection.prototype.setProperty = function (shape, capability, property) {\n        shape.text.direction = property;\n    };\n    return ECommandShapePropertyTextDirection;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextDirection };\n//# sourceMappingURL=e-command-shape-property-text-direction.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextFamily = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextFamily, _super);\n    function ECommandShapePropertyTextFamily() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextFamily.prototype.getProperty = function (shape, capability) {\n        return shape.text.family;\n    };\n    ECommandShapePropertyTextFamily.prototype.setProperty = function (shape, capability, property) {\n        shape.text.family = property;\n    };\n    return ECommandShapePropertyTextFamily;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextFamily };\n//# sourceMappingURL=e-command-shape-property-text-family.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextFitting = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextFitting, _super);\n    function ECommandShapePropertyTextFitting() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextFitting.prototype.getProperty = function (shape, capability) {\n        return shape.text.fitting;\n    };\n    ECommandShapePropertyTextFitting.prototype.setProperty = function (shape, capability, property) {\n        shape.text.fitting = property;\n    };\n    return ECommandShapePropertyTextFitting;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextFitting };\n//# sourceMappingURL=e-command-shape-property-text-fitting.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOffsetHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOffsetHorizontal, _super);\n    function ECommandShapePropertyTextOffsetHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOffsetHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.offset.horizontal;\n    };\n    ECommandShapePropertyTextOffsetHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.offset.horizontal = property;\n    };\n    return ECommandShapePropertyTextOffsetHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOffsetHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-offset-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOffsetVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOffsetVertical, _super);\n    function ECommandShapePropertyTextOffsetVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOffsetVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.offset.vertical;\n    };\n    ECommandShapePropertyTextOffsetVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.offset.vertical = property;\n    };\n    return ECommandShapePropertyTextOffsetVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOffsetVertical };\n//# sourceMappingURL=e-command-shape-property-text-offset-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOutlineColor = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOutlineColor, _super);\n    function ECommandShapePropertyTextOutlineColor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOutlineColor.prototype.getProperty = function (shape, capability) {\n        var outline = shape.text.outline;\n        return [outline.color, outline.alpha];\n    };\n    ECommandShapePropertyTextOutlineColor.prototype.setProperty = function (shape, capability, property) {\n        var outline = shape.text.outline;\n        outline.color = property[0];\n        outline.alpha = property[1];\n    };\n    return ECommandShapePropertyTextOutlineColor;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOutlineColor };\n//# sourceMappingURL=e-command-shape-property-text-outline-color.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOutlineEnable = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOutlineEnable, _super);\n    function ECommandShapePropertyTextOutlineEnable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOutlineEnable.prototype.getProperty = function (shape, capability) {\n        return shape.text.outline.enable;\n    };\n    ECommandShapePropertyTextOutlineEnable.prototype.setProperty = function (shape, capability, property) {\n        shape.text.outline.enable = property;\n    };\n    return ECommandShapePropertyTextOutlineEnable;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOutlineEnable };\n//# sourceMappingURL=e-command-shape-property-text-outline-enable.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextOutlineWidth = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextOutlineWidth, _super);\n    function ECommandShapePropertyTextOutlineWidth() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextOutlineWidth.prototype.getProperty = function (shape, capability) {\n        return shape.text.outline.width;\n    };\n    ECommandShapePropertyTextOutlineWidth.prototype.setProperty = function (shape, capability, property) {\n        shape.text.outline.width = property;\n    };\n    ECommandShapePropertyTextOutlineWidth.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextOutlineWidth;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextOutlineWidth };\n//# sourceMappingURL=e-command-shape-property-text-outline-width.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextPaddingHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextPaddingHorizontal, _super);\n    function ECommandShapePropertyTextPaddingHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextPaddingHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.padding.horizontal;\n    };\n    ECommandShapePropertyTextPaddingHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.padding.horizontal = property;\n    };\n    return ECommandShapePropertyTextPaddingHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextPaddingHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-padding-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextPaddingVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextPaddingVertical, _super);\n    function ECommandShapePropertyTextPaddingVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextPaddingVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.padding.vertical;\n    };\n    ECommandShapePropertyTextPaddingVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.padding.vertical = property;\n    };\n    return ECommandShapePropertyTextPaddingVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextPaddingVertical };\n//# sourceMappingURL=e-command-shape-property-text-padding-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nvar ECommandShapePropertyTextSizeDelta = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSizeDelta, _super);\n    function ECommandShapePropertyTextSizeDelta() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSizeDelta.prototype.getProperty = function (shape, capability) {\n        return shape.text.size;\n    };\n    ECommandShapePropertyTextSizeDelta.prototype.setProperty = function (shape, capability, property) {\n        shape.text.size = property;\n    };\n    ECommandShapePropertyTextSizeDelta.prototype.initProperty = function (shape, capability, property) {\n        var text = shape.text;\n        text.size = Math.max(0, text.size + property);\n    };\n    return ECommandShapePropertyTextSizeDelta;\n}(ECommandShapeProperty));\nexport { ECommandShapePropertyTextSizeDelta };\n//# sourceMappingURL=e-command-shape-property-text-size-delta.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextSize = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSize, _super);\n    function ECommandShapePropertyTextSize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSize.prototype.getProperty = function (shape, capability) {\n        return shape.text.size;\n    };\n    ECommandShapePropertyTextSize.prototype.setProperty = function (shape, capability, property) {\n        shape.text.size = property;\n    };\n    return ECommandShapePropertyTextSize;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextSize };\n//# sourceMappingURL=e-command-shape-property-text-size.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextSpacingHorizontal = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSpacingHorizontal, _super);\n    function ECommandShapePropertyTextSpacingHorizontal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSpacingHorizontal.prototype.getProperty = function (shape, capability) {\n        return shape.text.spacing.horizontal;\n    };\n    ECommandShapePropertyTextSpacingHorizontal.prototype.setProperty = function (shape, capability, property) {\n        shape.text.spacing.horizontal = property;\n    };\n    ECommandShapePropertyTextSpacingHorizontal.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextSpacingHorizontal;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextSpacingHorizontal };\n//# sourceMappingURL=e-command-shape-property-text-spacing-horizontal.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextSpacingVertical = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextSpacingVertical, _super);\n    function ECommandShapePropertyTextSpacingVertical() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextSpacingVertical.prototype.getProperty = function (shape, capability) {\n        return shape.text.spacing.vertical;\n    };\n    ECommandShapePropertyTextSpacingVertical.prototype.setProperty = function (shape, capability, property) {\n        shape.text.spacing.vertical = property;\n    };\n    ECommandShapePropertyTextSpacingVertical.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextSpacingVertical;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextSpacingVertical };\n//# sourceMappingURL=e-command-shape-property-text-spacing-vertical.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextStyle, _super);\n    function ECommandShapePropertyTextStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextStyle.prototype.getProperty = function (shape, capability) {\n        return shape.text.style;\n    };\n    ECommandShapePropertyTextStyle.prototype.setProperty = function (shape, capability, property) {\n        shape.text.style = property;\n    };\n    return ECommandShapePropertyTextStyle;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextStyle };\n//# sourceMappingURL=e-command-shape-property-text-style.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextValue = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextValue, _super);\n    function ECommandShapePropertyTextValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextValue.prototype.getProperty = function (shape, capability) {\n        return shape.text.value;\n    };\n    ECommandShapePropertyTextValue.prototype.setProperty = function (shape, capability, property) {\n        shape.text.value = property;\n    };\n    ECommandShapePropertyTextValue.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandShapePropertyTextValue;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextValue };\n//# sourceMappingURL=e-command-shape-property-text-value.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTextWeight = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTextWeight, _super);\n    function ECommandShapePropertyTextWeight() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTextWeight.prototype.getProperty = function (shape, capability) {\n        return shape.text.weight;\n    };\n    ECommandShapePropertyTextWeight.prototype.setProperty = function (shape, capability, property) {\n        shape.text.weight = property;\n    };\n    return ECommandShapePropertyTextWeight;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTextWeight };\n//# sourceMappingURL=e-command-shape-property-text-weight.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nvar ECommandShapePropertyTitle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyTitle, _super);\n    function ECommandShapePropertyTitle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyTitle.prototype.getProperty = function (shape, capability) {\n        return shape.title;\n    };\n    ECommandShapePropertyTitle.prototype.setProperty = function (shape, capability, property) {\n        shape.title = property;\n    };\n    return ECommandShapePropertyTitle;\n}(ECommandShapePropertySimple));\nexport { ECommandShapePropertyTitle };\n//# sourceMappingURL=e-command-shape-property-title.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeReplaceOne = /** @class */ (function (_super) {\n    __extends(ECommandShapeReplaceOne, _super);\n    function ECommandShapeReplaceOne(newShape, oldShape, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._newShape = newShape;\n        _this._oldShape = oldShape;\n        _this._selection = selection;\n        _this._index = parent.children.indexOf(oldShape);\n        newShape.reference += 1;\n        oldShape.reference += 1;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"oldShape\", {\n        get: function () {\n            return this._oldShape;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"newShape\", {\n        get: function () {\n            return this._newShape;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"index\", {\n        get: function () {\n            return this._index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplaceOne.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeReplaceOne.prototype.execute = function () {\n        this._oldShape.detach();\n        this._newShape.attach(this._parent, this._index);\n        this._selection.swapLast(this._oldShape, this._newShape);\n        return true;\n    };\n    ECommandShapeReplaceOne.prototype.redo = function () {\n        this._newShape.attach(this._parent, this._index);\n        this._oldShape.detach();\n        this._selection.swapLast(this._oldShape, this._newShape);\n        return true;\n    };\n    ECommandShapeReplaceOne.prototype.undo = function () {\n        this._newShape.detach();\n        this._oldShape.attach(this._parent, this._index);\n        this._selection.swapLast(this._newShape, this._oldShape);\n        return true;\n    };\n    ECommandShapeReplaceOne.prototype.destroy = function () {\n        // Destroy new shapes\n        var newShape = this._newShape;\n        newShape.reference -= 1;\n        if (newShape.parent == null && newShape.reference <= 0) {\n            newShape.destroy();\n        }\n        // Destroy old shapes\n        var oldShape = this._oldShape;\n        oldShape.reference -= 1;\n        if (oldShape.parent == null && oldShape.reference <= 0) {\n            oldShape.destroy();\n        }\n    };\n    return ECommandShapeReplaceOne;\n}(DCommandBase));\nexport { ECommandShapeReplaceOne };\n//# sourceMappingURL=e-command-shape-replace-one.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeGroup, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeReplace, _super);\n    function ECommandShapeReplace(parent, factory, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._factory = factory;\n        _this._selection = selection;\n        _this._newShapes = [];\n        _this._oldShapes = [];\n        _this._indices = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeReplace.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"oldShapes\", {\n        get: function () {\n            return this._oldShapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"newShapes\", {\n        get: function () {\n            return this._newShapes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeReplace.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeReplace.prototype.execute = function () {\n        var parent = this._parent;\n        var indices = this._indices;\n        var newShapes = this._newShapes;\n        var oldShapes = this._oldShapes;\n        var children = parent.children;\n        var factory = this._factory;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (child.selected) {\n                var newShape = void 0;\n                if (EShapeCapabilities.contains(child, EShapeCapability.REPLACING)) {\n                    if (child instanceof EShapeGroup) {\n                        var pivot = child.transform.pivot;\n                        var pivotX = pivot.x;\n                        var pivotY = pivot.y;\n                        if (pivotX !== 0 || pivotY !== 0) {\n                            child.lock(EShapeLockPart.TRANSFORM);\n                            pivot.set(0, 0);\n                            newShape = factory(child) || child;\n                            pivot.set(pivotX, pivotY);\n                            child.unlock(EShapeLockPart.TRANSFORM, false);\n                        }\n                        else {\n                            newShape = factory(child) || child;\n                        }\n                    }\n                    else {\n                        newShape = factory(child) || child;\n                    }\n                    if (newShape !== child) {\n                        child.reference += 1;\n                        newShape.reference += 1;\n                        child.detach();\n                        newShape.attach(parent, i);\n                    }\n                }\n                else {\n                    newShape = child;\n                }\n                indices.push(i);\n                newShapes.push(newShape);\n                oldShapes.push(child);\n            }\n        }\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(newShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeReplace.prototype.redo = function () {\n        var parent = this._parent;\n        var indices = this._indices;\n        var oldShapes = this._oldShapes;\n        var newShapes = this._newShapes;\n        for (var i = 0, imax = newShapes.length; i < imax; ++i) {\n            var oldShape = oldShapes[i];\n            var newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                oldShape.detach();\n                newShape.attach(parent, indices[i]);\n            }\n        }\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(newShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeReplace.prototype.undo = function () {\n        var parent = this._parent;\n        var indices = this._indices;\n        var oldShapes = this._oldShapes;\n        var newShapes = this._newShapes;\n        for (var i = 0, imax = newShapes.length; i < imax; ++i) {\n            var oldShape = oldShapes[i];\n            var newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                newShape.detach();\n                oldShape.attach(parent, indices[i]);\n            }\n        }\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(oldShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeReplace.prototype.destroy = function () {\n        // Destroy Shapes\n        var oldShapes = this._oldShapes;\n        var newShapes = this._newShapes;\n        for (var i = 0, imax = newShapes.length; i < imax; ++i) {\n            var oldShape = oldShapes[i];\n            var newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                newShape.reference -= 1;\n                if (newShape.parent == null && newShape.reference <= 0) {\n                    newShape.destroy();\n                }\n                oldShape.reference -= 1;\n                if (oldShape.parent == null && oldShape.reference <= 0) {\n                    oldShape.destroy();\n                }\n            }\n        }\n        oldShapes.length = 0;\n        newShapes.length = 0;\n        this.indices.length = 0;\n    };\n    return ECommandShapeReplace;\n}(DCommandBase));\nexport { ECommandShapeReplace };\n//# sourceMappingURL=e-command-shape-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nvar ECommandShapeSelect = /** @class */ (function (_super) {\n    __extends(ECommandShapeSelect, _super);\n    function ECommandShapeSelect(before, after, selection) {\n        var _this = _super.call(this) || this;\n        _this._before = before;\n        _this._after = after;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeSelect.prototype, \"before\", {\n        get: function () {\n            return this._before;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeSelect.prototype, \"after\", {\n        get: function () {\n            return this._after;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeSelect.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeSelect.prototype.isClean = function () {\n        return true;\n    };\n    ECommandShapeSelect.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeSelect.prototype.redo = function () {\n        this._selection.restore(this._after);\n        return true;\n    };\n    ECommandShapeSelect.prototype.undo = function () {\n        this._selection.restore(this._before);\n        return true;\n    };\n    ECommandShapeSelect.prototype.destroy = function () {\n        this._before.length = 0;\n        this._after.length = 0;\n    };\n    return ECommandShapeSelect;\n}(DCommandBase));\nexport { ECommandShapeSelect };\n//# sourceMappingURL=e-command-shape-select.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeTreeBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeBringForward, _super);\n    /**\n     *\n     * @param indices indices of moved children sorted in the \"descending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeBringForward(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeBringForward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringForward.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringForward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeBringForward.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            children[index] = children[index + 1];\n            children[index + 1] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringForward.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = indices.length - 1; 0 <= i; --i) {\n            var index = indices[i];\n            var child = children[index + 1];\n            children[index + 1] = children[index];\n            children[index] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringForward.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeBringForward;\n}(DCommandBase));\nexport { ECommandShapeTreeBringForward };\n//# sourceMappingURL=e-command-shape-tree-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar SHAPE_COMPARATOR = function (a, b) {\n    return a.index - b.index;\n};\nvar ECommandShapeTreeBringToFront = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeBringToFront, _super);\n    /**\n     *\n     * @param indices indices of moved children sorted in the \"descending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeBringToFront(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeBringToFront.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringToFront.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeBringToFront.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeBringToFront.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeBringToFront.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var offset = children.length;\n        for (var i = 0; i < offset; ++i) {\n            children[i].index = i;\n        }\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            child.index = offset + index;\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringToFront.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var offset = children.length;\n        var indexSize = indices.length;\n        for (var i = 0, imax = indexSize; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[offset - 1 - i];\n            child.index = index;\n        }\n        var indexIndex = indexSize - 1;\n        var indexCurrent = indices[indexIndex];\n        var indexOffset = 0;\n        for (var i = 0, imax = offset - indexSize; i < imax; ++i) {\n            var child = children[i];\n            var index = i + indexOffset;\n            if (index < indexCurrent) {\n                child.index = index;\n            }\n            else {\n                indexOffset += 1;\n                indexIndex -= 1;\n                if (0 <= indexIndex) {\n                    indexCurrent = indices[indexIndex];\n                }\n                else {\n                    indexCurrent = Number.MAX_SAFE_INTEGER;\n                }\n                i -= 1;\n            }\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeBringToFront.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeBringToFront;\n}(DCommandBase));\nexport { ECommandShapeTreeBringToFront };\n//# sourceMappingURL=e-command-shape-tree-bring-to-front.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar ECommandShapeTreeSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeSendBackward, _super);\n    /**\n     * @param indices indices of moved children sorted in the \"ascending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeSendBackward(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeSendBackward.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendBackward.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendBackward.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeSendBackward.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            children[index] = children[index - 1];\n            children[index - 1] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendBackward.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        for (var i = indices.length - 1; 0 <= i; --i) {\n            var index = indices[i];\n            var child = children[index - 1];\n            children[index - 1] = children[index];\n            children[index] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendBackward.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeSendBackward;\n}(DCommandBase));\nexport { ECommandShapeTreeSendBackward };\n//# sourceMappingURL=e-command-shape-tree-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nvar SHAPE_COMPARATOR = function (a, b) {\n    return a.index - b.index;\n};\nvar ECommandShapeTreeSendToBack = /** @class */ (function (_super) {\n    __extends(ECommandShapeTreeSendToBack, _super);\n    /**\n     * @param indices indices of moved children sorted in the \"ascending\" order\n     * @param parent\n     * @param selection\n     */\n    function ECommandShapeTreeSendToBack(indices, parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._indices = indices;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeTreeSendToBack.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendToBack.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeTreeSendToBack.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeTreeSendToBack.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTreeSendToBack.prototype.redo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var offset = children.length;\n        for (var i = 0; i < offset; ++i) {\n            children[i].index = i;\n        }\n        for (var i = 0, imax = indices.length; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[index];\n            child.index = index - offset;\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendToBack.prototype.undo = function () {\n        var indices = this._indices;\n        var parent = this._parent;\n        var children = parent.children;\n        var indexSize = indices.length;\n        for (var i = 0, imax = indexSize; i < imax; ++i) {\n            var index = indices[i];\n            var child = children[i];\n            child.index = index;\n        }\n        var indexIndex = 0;\n        var indexCurrent = indices[indexIndex];\n        var indexOffset = -indexSize;\n        var offset = children.length;\n        for (var i = indexSize; i < offset; ++i) {\n            var child = children[i];\n            var index = i + indexOffset;\n            if (index < indexCurrent) {\n                child.index = index;\n            }\n            else {\n                indexOffset += 1;\n                indexIndex += 1;\n                if (indexIndex < indexSize) {\n                    indexCurrent = indices[indexIndex];\n                }\n                else {\n                    indexCurrent = Number.MAX_SAFE_INTEGER;\n                }\n                i -= 1;\n            }\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    };\n    ECommandShapeTreeSendToBack.prototype.destroy = function () {\n        this._indices.length = 0;\n    };\n    return ECommandShapeTreeSendToBack;\n}(DCommandBase));\nexport { ECommandShapeTreeSendToBack };\n//# sourceMappingURL=e-command-shape-tree-send-to-back.js.map","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { EShapeBase, EShapeCapability, EShapeEditor, EShapeLockPart, toSizeNormalized } from \"@wcardinal/wcardinal-ui\";\nvar UtilShapeTransforms = /** @class */ (function () {\n    function UtilShapeTransforms() {\n    }\n    UtilShapeTransforms.prepare = function (shape) {\n        var editor = shape.editor;\n        if (editor == null) {\n            editor = new EShapeEditor();\n            shape.editor = editor;\n        }\n        // Transform\n        shape.updateTransform();\n        var parent = shape.parent;\n        if (parent instanceof EShapeBase) {\n            parent.transform.internalTransform\n                .copyTo(editor.internalTransformParentInverse)\n                .invert();\n        }\n        else {\n            editor.internalTransformParentInverse.identity();\n        }\n        shape.transform.internalTransform.copyTo(editor.internalTransform);\n        // Rotation\n        editor.rotation = shape.transform.rotation;\n        // Size\n        editor.size.copyFrom(shape.size);\n        //\n        shape.lock(EShapeLockPart.TRANSFORM_CHILD);\n    };\n    UtilShapeTransforms.finalize = function (shape) {\n        shape.unlock(EShapeLockPart.TRANSFORM_CHILD, true);\n    };\n    UtilShapeTransforms.apply = function (shape, transform, capability) {\n        var editor = shape.editor;\n        if (editor != null) {\n            var newLocalTransform = editor.localTransform;\n            editor.internalTransformParentInverse\n                .copyTo(newLocalTransform)\n                .append(transform)\n                .append(editor.internalTransform);\n            this.applyLocal(shape, newLocalTransform, capability, editor.size);\n        }\n    };\n    UtilShapeTransforms.applyLocal = function (shape, localTransform, capability, size) {\n        // Reconstruct the position, the rotation and the size\n        var a = localTransform.a;\n        var b = localTransform.b;\n        var c = localTransform.c;\n        var d = localTransform.d;\n        var tx = localTransform.tx;\n        var ty = localTransform.ty;\n        shape.lock(EShapeLockPart.UPLOADED);\n        // Transform\n        var transform = shape.transform;\n        // Capability\n        var cposition = !!(capability & EShapeCapability.POSITION);\n        var crotation = !!(capability & EShapeCapability.ROTATION);\n        var cskew = !!(capability & EShapeCapability.SKEW);\n        var cwidth = !!(capability & EShapeCapability.WIDTH);\n        var cheight = !!(capability & EShapeCapability.HEIGHT);\n        // Rotation and skew\n        if (crotation || cskew) {\n            // Rotation\n            var rx = Math.atan2(-c, d); // rotation - skewX\n            var ry = Math.atan2(+b, a); // rotation + skewY\n            if (crotation) {\n                transform.rotation = (rx + ry) * 0.5; // Here, assumes `skewX` === `skewY`\n            }\n            // Skew\n            if (cskew) {\n                var skew = (ry - rx) * 0.5;\n                transform.skew.set(skew, skew);\n            }\n        }\n        // Position\n        if (cposition) {\n            // Assumes the pivot is invariant.\n            // tx = position.x - (a * px + c * py)\n            // ty = position.y - (b * px + d * py)\n            //\n            // Thus,\n            // position.x = tx + (a * px + c * py)\n            // position.y = ty + (b * px + d * py)\n            var pivot = transform.pivot;\n            var px = pivot.x;\n            var py = pivot.y;\n            transform.position.set(tx + (a * px + c * py), ty + (b * px + d * py));\n        }\n        // Scale\n        if (size != null && (cwidth || cheight)) {\n            var w = toSizeNormalized(size.x * Math.sqrt(a * a + b * b));\n            var h = toSizeNormalized(size.y * Math.sqrt(c * c + d * d));\n            var s = shape.size;\n            if (cwidth && cheight) {\n                s.set(w, h);\n            }\n            else if (cwidth) {\n                s.x = w;\n            }\n            else {\n                s.y = h;\n            }\n        }\n        //\n        shape.unlock(EShapeLockPart.UPLOADED, true);\n    };\n    return UtilShapeTransforms;\n}());\nexport { UtilShapeTransforms };\n//# sourceMappingURL=util-shape-transforms.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeConnectors, EShapeGroup, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeTransforms } from \"../util/util-shape-transforms\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nvar ECommandShapeUngroup = /** @class */ (function (_super) {\n    __extends(ECommandShapeUngroup, _super);\n    function ECommandShapeUngroup(parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._selection = selection;\n        _this._before = [];\n        _this._deleteds = [];\n        _this._indices = [];\n        _this._createds = [];\n        return _this;\n    }\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"before\", {\n        get: function () {\n            return this._before;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"deleteds\", {\n        get: function () {\n            return this._deleteds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"indices\", {\n        get: function () {\n            return this._indices;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ECommandShapeUngroup.prototype, \"createds\", {\n        get: function () {\n            return this._createds;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ECommandShapeUngroup.prototype.execute = function () {\n        // Save the current selection\n        var selection = this._selection;\n        selection.lock();\n        this._before = selection.store();\n        // Unselect non-group shapes\n        var shapes = selection.get();\n        for (var i = shapes.length - 1; 0 <= i; --i) {\n            var shape = shapes[i];\n            if (!this.isUngroupable(shape)) {\n                shape.selected = false;\n                shapes.splice(i, 1);\n            }\n        }\n        // Delete groups\n        var parent = this._parent;\n        var deleteds = UtilShapeDeleter.delete(parent, shapes, true) || [];\n        this._deleteds = deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].reference += 1;\n        }\n        // Create shapes\n        var createds = [];\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var target = deleteds[i];\n            var targetLocalTransform = target.transform.localTransform;\n            var a = targetLocalTransform.a;\n            var b = targetLocalTransform.b;\n            var c = targetLocalTransform.c;\n            var d = targetLocalTransform.d;\n            var tx = targetLocalTransform.tx;\n            var ty = targetLocalTransform.ty;\n            var targetChildren = target.children;\n            var clones = [];\n            for (var j = 0, jmax = targetChildren.length; j < jmax; ++j) {\n                var clone = targetChildren[j].clone();\n                clone.lock(EShapeLockPart.ALL);\n                clone.parent = null;\n                clone.updateTransform();\n                var localTransform = clone.transform.localTransform;\n                localTransform.prepend(targetLocalTransform);\n                var capability = EShapeCapability.NONE;\n                if (EShapeCapabilities.contains(clone, EShapeCapability.POSITION)) {\n                    capability |= EShapeCapability.POSITION;\n                }\n                if (EShapeCapabilities.contains(clone, EShapeCapability.ROTATION)) {\n                    capability |= EShapeCapability.ROTATION;\n                }\n                if (EShapeCapabilities.contains(clone, EShapeCapability.SKEW)) {\n                    capability |= EShapeCapability.SKEW;\n                }\n                if (capability !== EShapeCapability.NONE) {\n                    UtilShapeTransforms.applyLocal(clone, localTransform, capability);\n                }\n                if (clone instanceof EShapeConnectorLine) {\n                    var edge = clone.edge;\n                    var tail = edge.tail;\n                    if (tail.acceptor.shape == null) {\n                        // Local\n                        var tailLocal = tail.local;\n                        var tailLocalX = tailLocal.x;\n                        var tailLocalY = tailLocal.y;\n                        tailLocal.set(a * tailLocalX + c * tailLocalY + tx, b * tailLocalX + d * tailLocalY + ty);\n                        // Normal\n                        var tailNormal = tail.normal;\n                        var tailNormalX = tailNormal.x;\n                        var tailNormalY = tailNormal.y;\n                        var ndx = a * tailNormalX + c * tailNormalY;\n                        var ndy = b * tailNormalX + d * tailNormalY;\n                        var nd = ndx * ndx + ndy * ndy;\n                        if (0.000001 < nd) {\n                            var f = Math.sqrt(1 / nd);\n                            tailNormal.set(ndx * f, ndy * f);\n                        }\n                    }\n                    var head = edge.head;\n                    if (head.acceptor.shape == null) {\n                        // Local\n                        var headLocal = head.local;\n                        var headLocalX = headLocal.x;\n                        var headLocalY = headLocal.y;\n                        headLocal.set(a * headLocalX + c * headLocalY + tx, b * headLocalX + d * headLocalY + ty);\n                        // Normal\n                        var headNormal = head.normal;\n                        var headNormalX = headNormal.x;\n                        var headNormalY = headNormal.y;\n                        var ndx = a * headNormalX + c * headNormalY;\n                        var ndy = b * headNormalX + d * headNormalY;\n                        var nd = ndx * ndx + ndy * ndy;\n                        if (0.000001 < nd) {\n                            var f = Math.sqrt(1 / nd);\n                            headNormal.set(ndx * f, ndy * f);\n                        }\n                    }\n                }\n                clones.push(clone);\n            }\n            EShapeConnectors.moveAll(targetChildren, clones, targetChildren, clones);\n            for (var j = 0, jmax = clones.length; j < jmax; ++j) {\n                var clone = clones[j];\n                clone.unlock(EShapeLockPart.ALL, true);\n                clone.attach(parent);\n                clone.reference += 1;\n                createds.push(clone);\n            }\n        }\n        this._createds = createds;\n        // Indices\n        this._indices = UtilShapeSearch.toIndices(deleteds);\n        // Select created shapes\n        selection.clearAndAddAll(createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeUngroup.prototype.isUngroupable = function (shape) {\n        return (shape instanceof EShapeGroup &&\n            EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n            EShapeCapabilities.contains(shape, EShapeCapability.UNGROUPING));\n    };\n    ECommandShapeUngroup.prototype.redo = function () {\n        // Delete shapes\n        var selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(this._deleteds);\n        selection.delete(false);\n        // Add created shapes\n        var parent = this._parent;\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            createds[i].attach(parent);\n        }\n        // Select created shapes\n        selection.clearAndAddAll(createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeUngroup.prototype.undo = function () {\n        // Delete created shapes\n        var parent = this._parent;\n        var selection = this._selection;\n        selection.lock();\n        var createds = this._createds;\n        for (var i = createds.length - 1; 0 <= i; --i) {\n            createds[i].detach();\n        }\n        // Restore deleted shapes\n        var deleteds = this._deleteds;\n        var indices = this._indices;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].attach(parent, indices[i]);\n        }\n        // Restore the selection\n        this._selection.restore(this._before);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    };\n    ECommandShapeUngroup.prototype.destroy = function () {\n        // Stored selection\n        this._before.length = 0;\n        // Deleted shapes\n        var deleteds = this._deleteds;\n        for (var i = 0, imax = deleteds.length; i < imax; ++i) {\n            var deleted = deleteds[i];\n            deleted.reference -= 1;\n            if (deleted.parent == null && deleted.reference <= 0) {\n                deleted.destroy();\n            }\n        }\n        deleteds.length = 0;\n        // Created shapes\n        var createds = this._createds;\n        for (var i = 0, imax = createds.length; i < imax; ++i) {\n            var created = createds[i];\n            created.reference -= 1;\n            if (created.parent == null && created.reference <= 0) {\n                created.destroy();\n            }\n        }\n        createds.length = 0;\n    };\n    return ECommandShapeUngroup;\n}(DCommandBase));\nexport { ECommandShapeUngroup };\n//# sourceMappingURL=e-command-shape-ungroup.js.map","export function newGraphicTester(name, graphic) {\n    return {\n        id: undefined,\n        graphicId: graphic.id,\n        name: name,\n        mappings: new Map()\n    };\n}\n//# sourceMappingURL=new-graphic-tester.js.map","var UtilCsvState = /** @class */ (function () {\n    function UtilCsvState(lines) {\n        this.lines = lines;\n        this.linesLength = lines.length;\n        this.cursor = -1;\n        this.line = \"\";\n        this.lineLength = 0;\n    }\n    UtilCsvState.prototype.next = function () {\n        var newCursor = this.cursor + 1;\n        if (newCursor < this.linesLength) {\n            this.cursor = newCursor;\n            var nextLine = this.lines[newCursor];\n            this.line = nextLine;\n            this.lineLength = nextLine.length;\n            return true;\n        }\n        return false;\n    };\n    return UtilCsvState;\n}());\nexport { UtilCsvState };\nvar UtilCsv = /** @class */ (function () {\n    function UtilCsv() {\n    }\n    UtilCsv.parseLine = function (state) {\n        var result = [];\n        var icomma = -1;\n        var line = state.line;\n        var length = state.lineLength;\n        for (var i = 0; i < length; ++i) {\n            if (line.charAt(i) === '\"') {\n                // Find the corresponding double quote\n                for (var j = i + 1; j < length; ++j) {\n                    var k = line.indexOf('\"', j);\n                    if (k < 0) {\n                        // Not found.\n                        if (state.next()) {\n                            // Consumes the next line\n                            line += \"\\n\" + state.line;\n                            length += 1 + state.lineLength;\n                            // And try again\n                            j -= 1;\n                            continue;\n                        }\n                        else {\n                            // Skip to the end.\n                            j = length + 1;\n                            result.push(this.unescape(line.substring(i + 1, j - 1)));\n                            i = j;\n                        }\n                    }\n                    else {\n                        j = k + 1;\n                        // If the next character is a double quote, then continues.\n                        if (j < length && line.charAt(j) === '\"') {\n                            continue;\n                        }\n                        // The next character isn't a double quote\n                        result.push(this.unescape(line.substring(i + 1, j - 1)));\n                        i = j;\n                    }\n                    break;\n                }\n            }\n            else {\n                if (icomma < i) {\n                    icomma = line.indexOf(\",\", i);\n                    if (icomma < 0) {\n                        icomma = length;\n                    }\n                }\n                result.push(line.substring(i, icomma));\n                i = icomma;\n            }\n        }\n        return result;\n    };\n    UtilCsv.parse = function (str) {\n        var lines = str.split(/(?:\\r\\n?|\\n)/g);\n        var result = [];\n        var state = new UtilCsvState(lines);\n        while (state.next()) {\n            var row = this.parseLine(state);\n            if (0 < row.length) {\n                result.push(row);\n            }\n        }\n        return result;\n    };\n    UtilCsv.stringifyLine = function (line) {\n        var result = \"\";\n        var delimiter = \"\";\n        for (var i = 0, imax = line.length; i < imax; ++i) {\n            result += delimiter + this.escape(String(line[i]));\n            delimiter = \",\";\n        }\n        return result;\n    };\n    UtilCsv.stringify = function (lines) {\n        var result = \"\";\n        var delimiter = \"\";\n        for (var i = 0, imax = lines.length; i < imax; ++i) {\n            result += delimiter + this.stringifyLine(lines[i]);\n            delimiter = \"\\n\";\n        }\n        return result;\n    };\n    UtilCsv.escape = function (target) {\n        var result = target.replace(/\"/g, '\"\"');\n        if (result.length !== target.length ||\n            0 <= target.indexOf(\",\") ||\n            0 <= target.indexOf(\"\\n\") ||\n            0 <= target.indexOf(\"\\r\")) {\n            return \"\\\"\".concat(result, \"\\\"\");\n        }\n        return target;\n    };\n    UtilCsv.unescape = function (target) {\n        return target.replace(/\"\"/g, '\"');\n    };\n    return UtilCsv;\n}());\nexport { UtilCsv };\n//# sourceMappingURL=util-csv.js.map","import { UtilCsv } from \"../util/util-csv\";\nexport function toGraphicTesterObject(data) {\n    var rows = UtilCsv.parse(data);\n    var result = new Map();\n    for (var i = 0, imax = rows.length; i < imax; ++i) {\n        var row = rows[i];\n        var uuid = parseInt(row[0], 10);\n        if (uuid === uuid) {\n            var original = row[1] || \"\";\n            var value = row[2] || \"\";\n            if (0 < original.length && 0 < value.length) {\n                var object = result.get(uuid);\n                if (object == null) {\n                    object = {};\n                    result.set(uuid, object);\n                }\n                object[original] = value;\n            }\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=to-graphic-tester-object.js.map","export function toGraphicTesterSerialized(simple) {\n    var parsed = JSON.parse(simple.mappings);\n    var uuids = parsed[0];\n    var objects = parsed[1];\n    var mappings = new Map();\n    for (var i = 0, imax = Math.min(uuids.length, objects.length); i < imax; ++i) {\n        mappings.set(uuids[i], objects[i]);\n    }\n    return {\n        id: simple.id,\n        graphicId: simple.graphicId,\n        name: simple.name,\n        mappings: mappings\n    };\n}\n//# sourceMappingURL=to-graphic-tester-serialized.js.map","export function toGraphicTesterSimple(serialized) {\n    var mappings = serialized.mappings;\n    var uuids = [];\n    var objects = [];\n    mappings.forEach(function (object, key) {\n        uuids.push(key);\n        objects.push(object);\n    });\n    return {\n        id: serialized.id,\n        graphicId: serialized.graphicId,\n        name: serialized.name,\n        mappings: JSON.stringify([uuids, objects])\n    };\n}\n//# sourceMappingURL=to-graphic-tester-simple.js.map","import { EShapeActionValueDeserializers } from \"@wcardinal/wcardinal-ui\";\nvar EShapeActionExtensions = /** @class */ (function () {\n    function EShapeActionExtensions() {\n    }\n    EShapeActionExtensions.add = function (extension) {\n        var _a, _b;\n        ((_a = this._typeToExtension) !== null && _a !== void 0 ? _a : (this._typeToExtension = new Map())).set(extension.type, extension);\n        ((_b = this._extensions) !== null && _b !== void 0 ? _b : (this._extensions = [])).push(extension);\n        EShapeActionValueDeserializers[extension.type] = extension.deserializer;\n    };\n    EShapeActionExtensions.get = function (type) {\n        var typeToExtension = this._typeToExtension;\n        if (typeToExtension != null) {\n            return typeToExtension.get(type);\n        }\n    };\n    EShapeActionExtensions.each = function (iteratee) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                iteratee(extension);\n            }\n        }\n    };\n    return EShapeActionExtensions;\n}());\nexport { EShapeActionExtensions };\n//# sourceMappingURL=e-shape-action-extensions.js.map","import { DDialogSelect, DDialogSelectListItem, isString, toSvgTexture } from \"@wcardinal/wcardinal-ui\";\nimport { Texture } from \"pixi.js\";\nvar dialogSelectThumbnailSize = 128;\nexport var getDialogSelectThumbnailSize = function () {\n    return dialogSelectThumbnailSize;\n};\nexport var setDialogSelectThumbnailSize = function (size) {\n    dialogSelectThumbnailSize = size;\n};\nvar dialogSelectTHumbnailNotFound;\nexport var getDialogSelectThumbnailNotFound = function () {\n    var result = dialogSelectTHumbnailNotFound;\n    if (result == null) {\n        result = newDialogTHumbnailNotFound();\n        dialogSelectTHumbnailNotFound = result;\n    }\n    return result;\n};\nexport var newDialogTHumbnailNotFound = function () {\n    var thumbnailSize = getDialogSelectThumbnailSize();\n    var resolution = window.devicePixelRatio || 1;\n    var svgSize = thumbnailSize * resolution;\n    return toSvgTexture(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"\".concat(svgSize, \"px\\\" width=\\\"\").concat(svgSize, \"px\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"#000000\\\" fill-opacity=\\\"0.05\\\">\") +\n        \"<path d=\\\"M19,5v11.17l2,2V5c0-1.1-0.9-2-2-2H5.83l2,2H19z\\\"/>\" +\n        \"<path d=\\\"M2.81,2.81L1.39,4.22L3,5.83V19c0,1.1,0.9,2,2,2h13.17l1.61,1.61l1.41-1.41L2.81,2.81z M5,19V7.83l7.07,7.07L11.25,16 L9,13l-3,4h8.17l2,2H5z\\\"/>\" +\n        \"</svg>\", resolution);\n};\nexport var newDialogSelectWithThumbnailsOptions = function (controller, toThumbnail, onSelect) {\n    var thumbnailSize = getDialogSelectThumbnailSize();\n    var thumbnailNotFound = getDialogSelectThumbnailNotFound();\n    var itemPadding = 8;\n    var itemLabelHeight = 30;\n    var itemSize = itemPadding + thumbnailSize + itemLabelHeight + itemPadding;\n    var textures = new Map();\n    var items = new Set();\n    var toImage = function (item) {\n        if (toThumbnail) {\n            var image_1 = toThumbnail(item.id);\n            if (isString(image_1)) {\n                var texture = textures.get(image_1);\n                if (texture == null) {\n                    var newTexture_1 = Texture.from(image_1);\n                    newTexture_1.baseTexture.on(\"error\", function () {\n                        checkTextures(newTexture_1, image_1);\n                    });\n                    texture = newTexture_1;\n                    textures.set(image_1, newTexture_1);\n                }\n                return texture;\n            }\n            else if (image_1 != null) {\n                return image_1;\n            }\n        }\n        return thumbnailNotFound;\n    };\n    var openTextures = function () {\n        items.forEach(function (item) {\n            var value = item.value;\n            if (value != null) {\n                item.image = toImage(value);\n            }\n        });\n    };\n    var clearTimeoutId = null;\n    var clearTextures = function () {\n        items.forEach(function (item) {\n            item.image = null;\n        });\n        textures.forEach(function (texture, url) {\n            if (texture !== thumbnailNotFound) {\n                var baseTexture = texture.baseTexture;\n                texture.destroy();\n                if (baseTexture) {\n                    baseTexture.destroy();\n                    baseTexture.off(\"error\");\n                }\n            }\n        });\n        textures.clear();\n    };\n    var checkTextures = function (texture, url) {\n        if (texture !== thumbnailNotFound && !texture.valid) {\n            items.forEach(function (item) {\n                var image = item.image.get(0);\n                if (image != null && image.source === texture) {\n                    image.source = thumbnailNotFound;\n                }\n            });\n            var baseTexture = texture.baseTexture;\n            texture.destroy();\n            if (baseTexture) {\n                baseTexture.destroy();\n                baseTexture.off(\"error\");\n            }\n            textures.set(url, thumbnailNotFound);\n        }\n    };\n    return {\n        width: \"auto\",\n        height: \"auto\",\n        layout: {\n            width: \"auto\",\n            height: \"auto\"\n        },\n        content: {\n            width: \"auto\",\n            height: \"auto\"\n        },\n        list: {\n            width: itemSize * 3,\n            height: itemSize * 2 + itemPadding * 4,\n            data: {\n                toImage: toImage\n            },\n            updater: {\n                newItem: function (data) {\n                    var result = new DDialogSelectListItem(data, {\n                        width: itemSize,\n                        height: itemSize,\n                        padding: itemPadding,\n                        text: {\n                            align: {\n                                vertical: \"BOTTOM\",\n                                horizontal: \"CENTER\"\n                            }\n                        },\n                        image: {\n                            align: {\n                                vertical: \"TOP\",\n                                horizontal: \"CENTER\",\n                                with: \"PADDING\"\n                            },\n                            margin: {\n                                vertical: 0\n                            },\n                            tint: {\n                                color: 0xffffff,\n                                alpha: 1.0\n                            }\n                        }\n                    });\n                    items.add(result);\n                    return result;\n                }\n            }\n        },\n        controller: controller,\n        on: {\n            open: function () {\n                if (clearTimeoutId != null) {\n                    window.clearTimeout(clearTimeoutId);\n                    clearTimeoutId = null;\n                    clearTextures();\n                }\n                openTextures();\n            },\n            close: function () {\n                if (clearTimeoutId == null) {\n                    clearTimeoutId = window.setTimeout(function () {\n                        clearTimeoutId = null;\n                        clearTextures();\n                    }, 1000);\n                }\n            },\n            select: onSelect\n        }\n    };\n};\nexport var newDialogSelectWithThumbnails = function (controller, toThumbnail, onSelect) {\n    return new DDialogSelect(newDialogSelectWithThumbnailsOptions(controller, toThumbnail, onSelect));\n};\n//# sourceMappingURL=e-dialog-select-with-thumbnails.js.map","import { DThemes } from \"@wcardinal/wcardinal-ui\";\nvar shapeTypeTheme;\nexport var getShapeTypeTheme = function () {\n    return (shapeTypeTheme !== null && shapeTypeTheme !== void 0 ? shapeTypeTheme : (shapeTypeTheme = DThemes.get(\"FShapeType\")));\n};\n//# sourceMappingURL=get-shape-type-theme.js.map","export var EToolSelectMode;\n(function (EToolSelectMode) {\n    EToolSelectMode[EToolSelectMode[\"NONE\"] = 0] = \"NONE\";\n    EToolSelectMode[EToolSelectMode[\"SELECT\"] = 1] = \"SELECT\";\n    EToolSelectMode[EToolSelectMode[\"TRANSLATE\"] = 2] = \"TRANSLATE\";\n    EToolSelectMode[EToolSelectMode[\"SCALE\"] = 3] = \"SCALE\";\n    EToolSelectMode[EToolSelectMode[\"ROTATE\"] = 4] = \"ROTATE\";\n})(EToolSelectMode || (EToolSelectMode = {}));\n//# sourceMappingURL=e-tool-select-mode.js.map","export var EShapeActionExtensionInputType = {\n    TEXT: 0\n};\n//# sourceMappingURL=e-shape-action-extension-input.js.map","import { DInputLabel, DInputText, DLayoutHorizontal, DLayoutSpace, DSelect } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeActionExtensionInputType } from \"../extension/e-shape-action-extension-input\";\nvar EDialogActionExtension = /** @class */ (function () {\n    function EDialogActionExtension(extension, dialog, condition, layout) {\n        this._extension = extension;\n        this._dialog = dialog;\n        this._condition = condition;\n        this._layout = layout;\n    }\n    Object.defineProperty(EDialogActionExtension.prototype, \"select\", {\n        get: function () {\n            var result = this._select;\n            if (result === undefined) {\n                result = this.newSelect();\n                this._select = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newSelect = function () {\n        var extensionItems = this._extension.items;\n        if (extensionItems != null && 0 < extensionItems.length) {\n            var result = new DSelect({\n                weight: 1,\n                value: extensionItems[0].type,\n                menu: {\n                    items: this.newSelectMenuItems(extensionItems)\n                }\n            });\n            return result;\n        }\n        return null;\n    };\n    EDialogActionExtension.prototype.newSelectMenuItems = function (items) {\n        var result = [];\n        for (var i = 0, imax = items.length; i < imax; ++i) {\n            var item = items[i];\n            result.push({\n                value: item.type,\n                text: {\n                    value: item.label\n                }\n            });\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"selectLayout\", {\n        get: function () {\n            var result = this._selectLayout;\n            if (result === undefined) {\n                result = this.newSelectLayout();\n                if (result != null) {\n                    var layout = this._layout;\n                    var conditionIndex = layout.getChildIndex(this._condition);\n                    if (0 <= conditionIndex) {\n                        layout.addChildAt(result, conditionIndex);\n                    }\n                    else {\n                        layout.addChild(result);\n                    }\n                }\n                this._selectLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newSelectLayout = function () {\n        var select = this.select;\n        if (select != null) {\n            return this.newLabeled(\"\", select);\n        }\n        return null;\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"inputs\", {\n        get: function () {\n            var result = this._inputs;\n            if (result === undefined) {\n                result = this.newInputs();\n                this._inputs = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newInputs = function () {\n        var result = [];\n        var extensionInputs = this._extension.inputs;\n        if (extensionInputs != null) {\n            for (var i = 0, imax = extensionInputs.length; i < imax; ++i) {\n                var input = extensionInputs[i];\n                switch (input.type) {\n                    case EShapeActionExtensionInputType.TEXT:\n                        var inputText = this.newInputText();\n                        result.push(inputText);\n                        break;\n                }\n            }\n        }\n        return result;\n    };\n    EDialogActionExtension.prototype.newInputText = function () {\n        var _this = this;\n        return new DInputText({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    EDialogActionExtension.prototype.newLabel = function (label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    };\n    EDialogActionExtension.prototype.newSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    EDialogActionExtension.prototype.newLabeled = function (label, input) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                input,\n                this.newSpace()\n            ]\n        });\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"inputLayouts\", {\n        get: function () {\n            var result = this._inputLayouts;\n            if (result === undefined) {\n                result = this.newInputLayouts();\n                this._inputLayouts = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.newInputLayouts = function () {\n        var result = [];\n        var inputs = this.inputs;\n        var layout = this._layout;\n        var extensionInputs = this._extension.inputs;\n        if (extensionInputs != null) {\n            var conditionIndex = layout.getChildIndex(this._condition);\n            for (var i = 0, imax = inputs.length; i < imax; ++i) {\n                var labeled = this.newLabeled(extensionInputs[i].label, inputs[i]);\n                result.push(labeled);\n                if (0 <= conditionIndex) {\n                    layout.addChildAt(labeled, conditionIndex + 1 + i);\n                }\n                else {\n                    layout.addChild(labeled);\n                }\n            }\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogActionExtension.prototype, \"value\", {\n        get: function () {\n            return this._extension.toValue(this.select, this._condition.input, this.inputs);\n        },\n        set: function (value) {\n            if (value != null) {\n                this._extension.fromValue(value, this.select, this._condition.input, this.inputs);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtension.prototype.show = function () {\n        // Select\n        var selectLayout = this.selectLayout;\n        if (selectLayout != null) {\n            selectLayout.show();\n        }\n        // Inputs\n        var inputLayouts = this.inputLayouts;\n        if (0 < inputLayouts.length) {\n            var extension = this._extension;\n            if (extension.onShow != null) {\n                extension.onShow(inputLayouts);\n            }\n            else {\n                for (var i = 0, imax = inputLayouts.length; i < imax; ++i) {\n                    inputLayouts[i].show();\n                }\n            }\n        }\n    };\n    EDialogActionExtension.prototype.hide = function () {\n        // Select\n        var selectLayout = this._selectLayout;\n        if (selectLayout != null) {\n            selectLayout.hide();\n        }\n        // Inputs\n        var inputLayouts = this._inputLayouts;\n        if (inputLayouts != null) {\n            for (var i = 0, imax = inputLayouts.length; i < imax; ++i) {\n                inputLayouts[i].hide();\n            }\n        }\n    };\n    EDialogActionExtension.prototype.reset = function () {\n        // Select\n        var select = this._select;\n        if (select) {\n            var items = this._extension.items;\n            if (items != null && 0 < items.length) {\n                select.value = items[0].type;\n            }\n            else {\n                select.value = null;\n            }\n        }\n        // Inputs\n        var inputs = this._inputs;\n        if (inputs) {\n            var extensionInputs = this._extension.inputs;\n            if (extensionInputs != null) {\n                for (var i = 0, imax = inputs.length; i < imax; ++i) {\n                    inputs[i].value = extensionInputs[i].initial || \"\";\n                }\n            }\n        }\n    };\n    EDialogActionExtension.prototype.ok = function () {\n        this._dialog.ok();\n    };\n    return EDialogActionExtension;\n}());\nexport { EDialogActionExtension };\n//# sourceMappingURL=e-dialog-action-extension.js.map","import { EShapeActionExtensions } from \"../extension/e-shape-action-extensions\";\nimport { EDialogActionExtension } from \"./e-dialog-action-extension\";\nvar EDialogActionExtensionContainer = /** @class */ (function () {\n    function EDialogActionExtensionContainer(dialog, condition, layout) {\n        this._data = new Map();\n        this._dialog = dialog;\n        this._condition = condition;\n        this._layout = layout;\n    }\n    Object.defineProperty(EDialogActionExtensionContainer.prototype, \"value\", {\n        get: function () {\n            var selected = this._selected;\n            if (selected) {\n                return selected.value;\n            }\n            return null;\n        },\n        set: function (value) {\n            if (value != null) {\n                var datum = this._data.get(value.type);\n                if (datum != null) {\n                    datum.value = value;\n                }\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionExtensionContainer.prototype.get = function (type) {\n        var data = this._data;\n        var result = data.get(type);\n        if (result != null) {\n            return result;\n        }\n        var e = EShapeActionExtensions.get(type);\n        if (e == null) {\n            return null;\n        }\n        result = new EDialogActionExtension(e, this._dialog, this._condition, this._layout);\n        data.set(type, result);\n        return result;\n    };\n    EDialogActionExtensionContainer.prototype.show = function (type) {\n        if (type != null) {\n            var datum = this.get(type);\n            if (datum != null) {\n                var selected = this._selected;\n                if (selected !== datum) {\n                    if (selected != null) {\n                        selected.hide();\n                    }\n                    this._selected = datum;\n                    datum.show();\n                }\n            }\n            else {\n                this.hide();\n            }\n        }\n        else {\n            this.hide();\n        }\n    };\n    EDialogActionExtensionContainer.prototype.hide = function () {\n        var selected = this._selected;\n        if (selected != null) {\n            selected.hide();\n            this._selected = null;\n        }\n    };\n    EDialogActionExtensionContainer.prototype.reset = function () {\n        this._data.forEach(function (datum) {\n            datum.reset();\n        });\n    };\n    EDialogActionExtensionContainer.prototype.onChange = function (type) {\n        this.show(type);\n    };\n    return EDialogActionExtensionContainer;\n}());\nexport { EDialogActionExtensionContainer };\n//# sourceMappingURL=e-dialog-action-extension-container.js.map","import { createGroupUploaded, EShapeCapabilities, EShapeDeserializers, EShapeOnDeserializeds, EShapeRuntimes, EShapeUploadeds } from \"@wcardinal/wcardinal-ui\";\nvar toIconName = function (index) {\n    return \"extension_icon_\".concat(index);\n};\nvar EShapeExtensions = /** @class */ (function () {\n    function EShapeExtensions() {\n    }\n    EShapeExtensions.add = function (extension) {\n        var _a, _b;\n        if (\"type\" in extension) {\n            var type = extension.type;\n            // Name\n            ((_a = this._typeToExtension) !== null && _a !== void 0 ? _a : (this._typeToExtension = new Map())).set(type, extension);\n            // Deserializer\n            var deserializer = extension.deserializer;\n            if (deserializer != null) {\n                EShapeDeserializers[type] = deserializer;\n            }\n            // OnDeserialized\n            var onDeserialized = extension.onDeserialized;\n            if (onDeserialized != null) {\n                EShapeOnDeserializeds[type] = onDeserialized;\n            }\n            // Runtime\n            var runtime = extension.runtime;\n            if (runtime) {\n                EShapeRuntimes[type] = runtime;\n            }\n            // Capability\n            var capability = extension.capability;\n            if (capability != null) {\n                EShapeCapabilities.set(type, capability);\n            }\n            // Uploaded\n            var uploaded = extension.uploaded;\n            if (uploaded != null) {\n                EShapeUploadeds[type] = uploaded;\n            }\n            else {\n                if (EShapeUploadeds[type] == null) {\n                    EShapeUploadeds[type] = createGroupUploaded;\n                }\n            }\n        }\n        ((_b = this._extensions) !== null && _b !== void 0 ? _b : (this._extensions = [])).push(extension);\n    };\n    EShapeExtensions.get = function (type) {\n        var typeToExtension = this._typeToExtension;\n        if (typeToExtension != null) {\n            return typeToExtension.get(type);\n        }\n    };\n    EShapeExtensions.each = function (iteratee) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                iteratee(extension);\n            }\n        }\n    };\n    EShapeExtensions.merge = function (iconBuilder) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                if (\"icon\" in extension) {\n                    var icon = extension.icon;\n                    iconBuilder.add(toIconName(i), icon.width, icon.height, icon.svg);\n                }\n            }\n        }\n    };\n    EShapeExtensions.build = function (icons) {\n        var extensions = this._extensions;\n        if (extensions != null) {\n            for (var i = 0, imax = extensions.length; i < imax; ++i) {\n                var extension = extensions[i];\n                if (\"icon\" in extension) {\n                    extension.icon.texture = icons[toIconName(i)];\n                }\n            }\n        }\n    };\n    return EShapeExtensions;\n}());\nexport { EShapeExtensions };\n//# sourceMappingURL=e-shape-extensions.js.map","import { __extends } from \"tslib\";\nimport { EShapeAcceptorEdgeSide, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeEmbeddedAcceptorEdgePropertySide = /** @class */ (function (_super) {\n    __extends(ECommandShapeEmbeddedAcceptorEdgePropertySide, _super);\n    function ECommandShapeEmbeddedAcceptorEdgePropertySide() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeEmbeddedAcceptorEdgePropertySide.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.side;\n        }\n        return EShapeAcceptorEdgeSide.NONE;\n    };\n    ECommandShapeEmbeddedAcceptorEdgePropertySide.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.side = property;\n        }\n    };\n    return ECommandShapeEmbeddedAcceptorEdgePropertySide;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeEmbeddedAcceptorEdgePropertySide };\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-side.js.map","import { __extends } from \"tslib\";\nimport { EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeEmbeddedAcceptorEdgePropertySubtype = /** @class */ (function (_super) {\n    __extends(ECommandShapeEmbeddedAcceptorEdgePropertySubtype, _super);\n    function ECommandShapeEmbeddedAcceptorEdgePropertySubtype() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeEmbeddedAcceptorEdgePropertySubtype.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.subtype;\n        }\n        return EShapeAcceptorEdgeType.HEAD;\n    };\n    ECommandShapeEmbeddedAcceptorEdgePropertySubtype.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.subtype = property;\n        }\n    };\n    return ECommandShapeEmbeddedAcceptorEdgePropertySubtype;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeEmbeddedAcceptorEdgePropertySubtype };\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-subtype.js.map","import { __extends } from \"tslib\";\nimport { EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeEmbeddedAcceptorEdgePropertyVvisible = /** @class */ (function (_super) {\n    __extends(ECommandShapeEmbeddedAcceptorEdgePropertyVvisible, _super);\n    function ECommandShapeEmbeddedAcceptorEdgePropertyVvisible() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeEmbeddedAcceptorEdgePropertyVvisible.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.vvisible;\n        }\n        return false;\n    };\n    ECommandShapeEmbeddedAcceptorEdgePropertyVvisible.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.vvisible = property;\n        }\n    };\n    return ECommandShapeEmbeddedAcceptorEdgePropertyVvisible;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeEmbeddedAcceptorEdgePropertyVvisible };\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-vvisible.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheckRight, DControllers, DLayoutVertical, DPane, DSelect, DSelectMultiple, DText, DThemes, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertySide } from \"./e-command-shape-embedded-acceptor-edge-property-side\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertySubtype } from \"./e-command-shape-embedded-acceptor-edge-property-subtype\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertyVvisible } from \"./e-command-shape-embedded-acceptor-edge-property-vvisible\";\nvar EEditorShapeEmbeddedAcceptorEdge = /** @class */ (function (_super) {\n    __extends(EEditorShapeEmbeddedAcceptorEdge, _super);\n    function EEditorShapeEmbeddedAcceptorEdge(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        // Layout\n        _this.initLayout();\n        return _this;\n    }\n    EEditorShapeEmbeddedAcceptorEdge.prototype.initLayout = function () {\n        var _this = this;\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [this.newTextLabel(), this.selectSubtype, this.selectSide, this.checkVvisible]\n        });\n        // Selection\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n            _this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"selectSubtype\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectSubtype) !== null && _a !== void 0 ? _a : (this._selectSubtype = this.newSelectSubtype()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newSelectSubtype = function () {\n        var _this = this;\n        var subtheme = this.subtheme;\n        return new DSelect({\n            width: \"padding\",\n            value: EShapeAcceptorEdgeType.HEAD,\n            menu: {\n                items: [\n                    {\n                        value: EShapeAcceptorEdgeType.HEAD,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.HEAD)\n                        }\n                    },\n                    {\n                        value: EShapeAcceptorEdgeType.TAIL,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.TAIL)\n                        }\n                    },\n                    {\n                        value: EShapeAcceptorEdgeType.ALL,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.ALL)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this.onSelectSubtypeChanged(value);\n                }\n            }\n        });\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onSelectSubtypeChanged = function (value) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertySubtype(this._selection, value));\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"selectSide\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectSide) !== null && _a !== void 0 ? _a : (this._selectSide = this.newSelectSide()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newSelectSide = function () {\n        var _this = this;\n        var subtheme = this.subtheme;\n        return new DSelectMultiple({\n            width: \"padding\",\n            values: [EShapeAcceptorEdgeSide.LEFT],\n            menu: {\n                items: [\n                    {\n                        value: EShapeAcceptorEdgeSide.LEFT,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.LEFT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.TOP,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.TOP)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.RIGHT,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.RIGHT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.BOTTOM,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.BOTTOM)\n                        },\n                        check: true\n                    }\n                ]\n            },\n            on: {\n                change: function (values) {\n                    _this.onSelectSideChange(values);\n                }\n            }\n        });\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onSelectSideChange = function (values) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertySide(this._selection, this.fromSelectSideValues(values)));\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.toSelectSideValues = function (value) {\n        var result = [];\n        if (value & EShapeAcceptorEdgeSide.LEFT) {\n            result.push(EShapeAcceptorEdgeSide.LEFT);\n        }\n        if (value & EShapeAcceptorEdgeSide.TOP) {\n            result.push(EShapeAcceptorEdgeSide.TOP);\n        }\n        if (value & EShapeAcceptorEdgeSide.RIGHT) {\n            result.push(EShapeAcceptorEdgeSide.RIGHT);\n        }\n        if (value & EShapeAcceptorEdgeSide.BOTTOM) {\n            result.push(EShapeAcceptorEdgeSide.BOTTOM);\n        }\n        return result;\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.fromSelectSideValues = function (values) {\n        var result = EShapeAcceptorEdgeSide.NONE;\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            result |= values[i];\n        }\n        return result;\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"checkVvisible\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkVvisible) !== null && _a !== void 0 ? _a : (this._checkVvisible = this.newCheckIsVvisible()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newCheckIsVvisible = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsVvisibleLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckVvisibleChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckVvisibleChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onCheckVvisibleChanged = function (isVvisible) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertyVvisible(this._selection, isVvisible));\n    };\n    EEditorShapeEmbeddedAcceptorEdge.prototype.onSelectionChange = function (selection) {\n        var selectSubtype = this.selectSubtype;\n        var selectSide = this.selectSide;\n        var checkVvisible = this.checkVvisible;\n        var last = selection.last();\n        if (last instanceof EShapeEmbeddedAcceptorEdge) {\n            selectSubtype.value = last.subtype;\n            selectSubtype.state.isEnabled = true;\n            selectSide.values = this.toSelectSideValues(last.side);\n            selectSide.state.isEnabled = true;\n            checkVvisible.state.isActive = last.vvisible;\n            checkVvisible.state.isEnabled = true;\n        }\n        else {\n            selectSubtype.state.isEnabled = false;\n            selectSide.state.isEnabled = false;\n            checkVvisible.state.isEnabled = false;\n        }\n    };\n    Object.defineProperty(EEditorShapeEmbeddedAcceptorEdge.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeEmbeddedAcceptorEdge.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeEmbeddedAcceptorEdge\");\n    };\n    return EEditorShapeEmbeddedAcceptorEdge;\n}(DPane));\nexport { EEditorShapeEmbeddedAcceptorEdge };\n//# sourceMappingURL=e-editor-shape-embedded-acceptor-edge.js.map","import { DThemes, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeEmbeddedAcceptorEdge } from \"./e-editor-shape-embedded-acceptor-edge\";\nvar EShapeEmbeddedAcceptorEdges = /** @class */ (function () {\n    function EShapeEmbeddedAcceptorEdges() {\n    }\n    EShapeEmbeddedAcceptorEdges.getTheme = function () {\n        return DThemes.get(\"EShapeEmbeddedAcceptorEdge\");\n    };\n    EShapeEmbeddedAcceptorEdges.create = function (existing) {\n        var result = new EShapeEmbeddedAcceptorEdge();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            result.subtype = EShapeAcceptorEdgeType.HEAD; // Connectable to heads only\n            result.side = EShapeAcceptorEdgeSide.LEFT; // Connectable from the left side\n            result.vvisible = true; // True if visible in the viewer mode\n            result.stroke.set(false, 0x3399ff, 1);\n            result.fill.set(true, 0x3399ff, 1);\n        }\n        return result;\n    };\n    EShapeEmbeddedAcceptorEdges.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeType.EMBEDDED_ACCEPTOR_EDGE,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(0.667,0.667) translate(480, 480) rotate(+90) translate(-480, 480)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M480-640 280-440l56 56 104-103v407h80v-407l104 103 56-56-200-200ZM146-260q-32-49-49-105T80-480q0-83 31.5\" +\n                    \"-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 59-17 115t-49 105l-58-58q22-37\" +\n                    \" 33-78t11-84q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 43 11 84t33 78l-58 58Z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeEmbeddedAcceptorEdges.create(existing); },\n            editor: EEditorShapeEmbeddedAcceptorEdge\n        });\n    };\n    return EShapeEmbeddedAcceptorEdges;\n}());\nexport { EShapeEmbeddedAcceptorEdges };\n//# sourceMappingURL=e-shape-embedded-acceptor-edges.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeButtonPropertyIsActive = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonPropertyIsActive, _super);\n    function ECommandShapeButtonPropertyIsActive() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeButtonPropertyIsActive.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.state.isActive;\n        }\n        return false;\n    };\n    ECommandShapeButtonPropertyIsActive.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.state.isActive = property;\n        }\n    };\n    return ECommandShapeButtonPropertyIsActive;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeButtonPropertyIsActive };\n//# sourceMappingURL=e-command-shape-button-property-is-active.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeButtonPropertyIsGrouped = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonPropertyIsGrouped, _super);\n    function ECommandShapeButtonPropertyIsGrouped() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeButtonPropertyIsGrouped.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.isGrouped;\n        }\n        return false;\n    };\n    ECommandShapeButtonPropertyIsGrouped.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.isGrouped = property;\n        }\n    };\n    return ECommandShapeButtonPropertyIsGrouped;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeButtonPropertyIsGrouped };\n//# sourceMappingURL=e-command-shape-button-property-is-grouped.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nvar ECommandShapeButtonPropertyIsToggle = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonPropertyIsToggle, _super);\n    function ECommandShapeButtonPropertyIsToggle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapeButtonPropertyIsToggle.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.isToggle;\n        }\n        return false;\n    };\n    ECommandShapeButtonPropertyIsToggle.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.isToggle = property;\n        }\n    };\n    return ECommandShapeButtonPropertyIsToggle;\n}(ECommandShapePropertySimple));\nexport { ECommandShapeButtonPropertyIsToggle };\n//# sourceMappingURL=e-command-shape-button-property-is-toggle.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheckRight, DControllers, DLayoutVertical, DPane, DText, DThemes, EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeButtonPropertyIsActive } from \"./e-command-shape-button-property-is-active\";\nimport { ECommandShapeButtonPropertyIsGrouped } from \"./e-command-shape-button-property-is-grouped\";\nimport { ECommandShapeButtonPropertyIsToggle } from \"./e-command-shape-button-property-is-toggle\";\nvar EEditorShapeButton = /** @class */ (function (_super) {\n    __extends(EEditorShapeButton, _super);\n    function EEditorShapeButton(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        // Layout\n        _this.initLayout();\n        return _this;\n    }\n    EEditorShapeButton.prototype.initLayout = function () {\n        var _this = this;\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                this.newTextLabel(),\n                this.checkIsToggle,\n                this.checkIsGrouped,\n                this.checkIsActive\n            ]\n        });\n        // Selection\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n            _this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    };\n    EEditorShapeButton.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"checkIsToggle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsToggle) !== null && _a !== void 0 ? _a : (this._checkIsToggle = this.newCheckIsToggle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newCheckIsToggle = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsToggleLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckIsToggleChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckIsToggleChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeButton.prototype.onCheckIsToggleChanged = function (isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsToggle(this._selection, isActive));\n    };\n    EEditorShapeButton.prototype.onSelectionChangeCheckIsToggle = function (selection) {\n        var state = this.checkIsToggle.state;\n        var last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.isToggle;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"checkIsGrouped\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsGrouped) !== null && _a !== void 0 ? _a : (this._checkIsGrouped = this.newCheckIsGrouped()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newCheckIsGrouped = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsGroupedLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckIsGroupedChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckIsGroupedChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeButton.prototype.onCheckIsGroupedChanged = function (isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsGrouped(this._selection, isActive));\n    };\n    EEditorShapeButton.prototype.onSelectionChangeCheckIsGrouped = function (selection) {\n        var state = this.checkIsGrouped.state;\n        var last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.isGrouped;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"checkIsActive\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsActive) !== null && _a !== void 0 ? _a : (this._checkIsActive = this.newCheckIsActive()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newCheckIsActive = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsActiveLabel()\n            },\n            on: {\n                active: function () {\n                    _this.onCheckIsActiveChanged(true);\n                },\n                inactive: function () {\n                    _this.onCheckIsActiveChanged(false);\n                }\n            }\n        });\n    };\n    EEditorShapeButton.prototype.onCheckIsActiveChanged = function (isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsActive(this._selection, isActive));\n    };\n    EEditorShapeButton.prototype.onSelectionChangeCheckIsActive = function (selection) {\n        var state = this.checkIsActive.state;\n        var last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.state.isActive;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    };\n    EEditorShapeButton.prototype.onSelectionChange = function (selection) {\n        this.onSelectionChangeCheckIsToggle(selection);\n        this.onSelectionChangeCheckIsGrouped(selection);\n        this.onSelectionChangeCheckIsActive(selection);\n    };\n    Object.defineProperty(EEditorShapeButton.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButton.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeButton\");\n    };\n    return EEditorShapeButton;\n}(DPane));\nexport { EEditorShapeButton };\n//# sourceMappingURL=e-editor-shape-button.js.map","import { DThemes, EShapeButton, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeButton } from \"./e-editor-shape-button\";\nvar EShapeButtons = /** @class */ (function () {\n    function EShapeButtons() {\n    }\n    EShapeButtons.getTheme = function () {\n        return DThemes.get(\"EShapeButton\");\n    };\n    EShapeButtons.create = function (existing) {\n        var result = new EShapeButton();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            var label = this.getTheme().getLabel();\n            result.stroke.set(false, 0x3399ff, 1);\n            result.fill.set(true, 0x3399ff, 1);\n            result.text.set(label, 0xffffff, 1);\n            result.cursor = \"pointer\";\n            result.state.isFocusable = true;\n            result.interactive = true;\n        }\n        return result;\n    };\n    EShapeButtons.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeType.BUTTON,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2\" +\n                    \"-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z M14.5,19 l1.\" +\n                    \"09-2.41L18,15.5l-2.41-1.09L14.5,12l-1.09,2.41L11,15.5l2.41,1.0\" +\n                    \"9L14.5,19z M17,14l0.62-1.38L19,12l-1.38-0.62L17,10l-0.62,1.38 \" +\n                    \"L15,12l1.38,0.62L17,14z M14.5,19l1.09-2.41L18,15.5l-2.41-1.09L\" +\n                    \"14.5,12l-1.09,2.41L11,15.5l2.41,1.09L14.5,19z M17,14l0.62-1.38\" +\n                    \" L19,12l-1.38-0.62L17,10l-0.62,1.38L15,12l1.38,0.62L17,14z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeButtons.create(existing); },\n            editor: EEditorShapeButton\n        });\n    };\n    return EShapeButtons;\n}());\nexport { EShapeButtons };\n//# sourceMappingURL=e-shape-buttons.js.map","import { EShapeActionValueShowHideLayer } from \"@wcardinal/wcardinal-ui\";\nvar EShapeButtonLayerButtonValue = /** @class */ (function () {\n    function EShapeButtonLayerButtonValue(label, weight, layers, bringToFront, isGrouped, isActive) {\n        this.label = label;\n        this.weight = weight;\n        this.layers = layers;\n        this.bringToFront = bringToFront;\n        this.isGrouped = isGrouped;\n        this.isActive = isActive;\n        this.action = new EShapeActionValueShowHideLayer(\"isActive\", layers, bringToFront);\n    }\n    EShapeButtonLayerButtonValue.prototype.isEquals = function (target) {\n        if (this.label !== target.label) {\n            return false;\n        }\n        if (this.weight !== target.weight) {\n            return false;\n        }\n        if (this.bringToFront !== target.bringToFront) {\n            return false;\n        }\n        if (this.isGrouped !== target.isGrouped) {\n            return false;\n        }\n        if (this.isActive !== target.isActive) {\n            return false;\n        }\n        var layers = this.layers;\n        var layersLength = layers.length;\n        var targetLayers = target.layers;\n        if (layersLength !== targetLayers.length) {\n            return false;\n        }\n        for (var i = 0; i < layersLength; ++i) {\n            if (layers[i] !== targetLayers[i]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    EShapeButtonLayerButtonValue.prototype.serizlize = function (manager) {\n        var layersId = this.serializedLayers(manager);\n        var bringToFront = this.bringToFront ? 1 : 0;\n        var isGrouped = this.isGrouped ? 2 : 0;\n        var isActive = this.isActive ? 4 : 0;\n        var type = bringToFront | isGrouped | isActive;\n        return manager.addResource(\"[\".concat(manager.addResource(this.label), \",\").concat(this.weight, \",\").concat(layersId, \",\").concat(type, \"]\"));\n    };\n    EShapeButtonLayerButtonValue.prototype.serializedLayers = function (manager) {\n        var layers = this.layers;\n        var serialized = \"[\";\n        var delimiter = \"\";\n        for (var i = 0, imax = layers.length; i < imax; ++i) {\n            serialized += delimiter + layers[i];\n            delimiter = \",\";\n        }\n        serialized += \"]\";\n        return manager.addResource(serialized);\n    };\n    EShapeButtonLayerButtonValue.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeButtonLayerButtonValue(resources[parsed[0]], parsed[1], this.deserializeLayers(parsed[2], manager), !!(parsed[3] & 0x1), !!(parsed[3] & 0x2), !!(parsed[3] & 0x4));\n        }\n        return null;\n    };\n    EShapeButtonLayerButtonValue.deserializeLayers = function (target, manager) {\n        var result = [];\n        var resources = manager.resources;\n        var resourcesLength = resources.length;\n        if (0 <= target && target < resourcesLength) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            for (var i = 0, imax = parsed.length; i < imax; ++i) {\n                result.push(parsed[i]);\n            }\n        }\n        return result;\n    };\n    return EShapeButtonLayerButtonValue;\n}());\nexport { EShapeButtonLayerButtonValue };\n//# sourceMappingURL=e-shape-button-layer-button-value.js.map","import { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nvar EShapeButtonLayerButtonValueContainer = /** @class */ (function () {\n    function EShapeButtonLayerButtonValueContainer(onChange) {\n        this._values = [];\n        this._sizeX = 1;\n        this._margin = 2;\n        this._onChange = onChange;\n    }\n    Object.defineProperty(EShapeButtonLayerButtonValueContainer.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EShapeButtonLayerButtonValueContainer.prototype, \"margin\", {\n        get: function () {\n            return this._margin;\n        },\n        set: function (margin) {\n            if (this._margin !== margin) {\n                this._margin = margin;\n                this._onChange();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeButtonLayerButtonValueContainer.prototype.add = function (value, at) {\n        if (at != null) {\n            this._values.splice(at, 0, value);\n        }\n        else {\n            this._values.push(value);\n        }\n        this._onChange();\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.remove = function (index) {\n        var values = this._values;\n        if (0 <= index && index < values.length) {\n            var result = values.splice(index, 1)[0];\n            this._onChange();\n            return result;\n        }\n        return null;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.indexOf = function (target) {\n        var values = this._values;\n        // Instance-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value === target) {\n                return i;\n            }\n        }\n        // Data-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value.isEquals(target)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.get = function (index) {\n        var result = this._values[index];\n        if (result != null) {\n            return result;\n        }\n        return null;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.set = function (index, value) {\n        this._values[index] = value;\n        this._onChange();\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.swap = function (indexA, indexB) {\n        var values = this._values;\n        var tmp = values[indexB];\n        values[indexB] = values[indexA];\n        values[indexA] = tmp;\n        this._onChange();\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.size = function () {\n        return this._values.length;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.copy = function (source) {\n        // Values\n        var values = this._values;\n        var sourceValues = source._values;\n        var sourceValuesLength = sourceValues.length;\n        for (var i = 0; i < sourceValuesLength; ++i) {\n            values[i] = sourceValues[i];\n        }\n        if (values.length !== sourceValuesLength) {\n            values.length = sourceValuesLength;\n        }\n        //\n        this._sizeX = source._sizeX;\n        this._onChange();\n        return this;\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.serialize = function (manager) {\n        var serialized = \"\";\n        var delimiter = \"[\";\n        var values = this._values;\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            serialized += delimiter + values[i].serizlize(manager);\n            delimiter = \",\";\n        }\n        serialized += delimiter + this._margin + \"]\";\n        return manager.addResource(serialized);\n    };\n    EShapeButtonLayerButtonValueContainer.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var isChanged = false;\n            var values = this._values;\n            if (0 < values.length) {\n                values.length = 0;\n                isChanged = true;\n            }\n            for (var i = 0, imax = parsed.length - 1; i < imax; ++i) {\n                var value = EShapeButtonLayerButtonValue.deserialize(parsed[i], manager);\n                if (value != null) {\n                    values.push(value);\n                }\n            }\n            var margin = parsed[parsed.length - 1];\n            if (this._margin !== margin) {\n                this._margin = margin;\n                isChanged = true;\n            }\n            if (0 < values.length) {\n                isChanged = true;\n            }\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    };\n    return EShapeButtonLayerButtonValueContainer;\n}());\nexport { EShapeButtonLayerButtonValueContainer };\n//# sourceMappingURL=e-shape-button-layer-button-value-container.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nvar EShapeButtonLayerIds = /** @class */ (function () {\n    function EShapeButtonLayerIds() {\n    }\n    EShapeButtonLayerIds.ID = EShapeType.EXTENSION + 200;\n    return EShapeButtonLayerIds;\n}());\nexport { EShapeButtonLayerIds };\n//# sourceMappingURL=e-shape-button-layer-ids.js.map","import { __extends } from \"tslib\";\nimport { EShapeButton, EShapeCopyPart, EShapeCorner, EShapeGroupShadowed, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayerButtonValueContainer } from \"./e-shape-button-layer-button-value-container\";\nimport { EShapeButtonLayerIds } from \"./e-shape-button-layer-ids\";\nvar EShapeButtonLayer = /** @class */ (function (_super) {\n    __extends(EShapeButtonLayer, _super);\n    function EShapeButtonLayer(mode, type) {\n        if (type === void 0) { type = EShapeButtonLayerIds.ID; }\n        var _this = _super.call(this, mode, type) || this;\n        _this._button = new EShapeButtonLayerButtonValueContainer(function () {\n            _this.onButtonValueChange();\n        });\n        _this._corner = EShapeCorner.ALL;\n        return _this;\n    }\n    Object.defineProperty(EShapeButtonLayer.prototype, \"button\", {\n        get: function () {\n            return this._button;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EShapeButtonLayer.prototype, \"corner\", {\n        get: function () {\n            return this._corner;\n        },\n        set: function (corner) {\n            if (this._corner !== corner) {\n                this._corner = corner;\n                this.updateUploaded();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeButtonLayer.prototype.onButtonValueChange = function () {\n        this.newButtons();\n        this.layoutButtons();\n    };\n    EShapeButtonLayer.prototype.onSizeChange = function () {\n        _super.prototype.onSizeChange.call(this);\n        this.layoutButtons();\n    };\n    EShapeButtonLayer.prototype.newButtons = function () {\n        var shapeButton = this.button;\n        var buttonCount = shapeButton.size();\n        var values = shapeButton.values;\n        var children = this.children;\n        var childrenLength = children.length;\n        // Create / delete children\n        if (childrenLength < buttonCount) {\n            var master = 0 < childrenLength ? children[childrenLength - 1] : null;\n            for (var i = childrenLength; i < buttonCount; ++i) {\n                var button = new EShapeButton();\n                var value = values[i];\n                if (master != null) {\n                    button.copy(master);\n                    button.text.value = value.label;\n                }\n                else {\n                    button.stroke.set(false, 0x3399ff, 1);\n                    button.fill.set(true, 0x3399ff, 1);\n                    button.text.set(value.label, 0xffffff, 1);\n                    button.state.isFocusable = true;\n                    button.interactive = true;\n                }\n                if (0 < button.action.size()) {\n                    button.action.set(0, value.action);\n                }\n                else {\n                    button.action.add(value.action);\n                }\n                button.isToggle = true;\n                button.isGrouped = true;\n                button.attach(this);\n            }\n        }\n        else if (buttonCount < childrenLength) {\n            for (var i = childrenLength - 1; buttonCount <= i; --i) {\n                children[i].detach();\n            }\n        }\n        // Update corner, action and state\n        var corner = this.corner;\n        for (var i = 0; i < buttonCount; ++i) {\n            var child = children[i];\n            var value = values[i];\n            child.corner = this.toCorner(i, buttonCount, corner);\n            child.text.value = value.label;\n            if (0 < child.action.size()) {\n                child.action.set(0, value.action);\n            }\n            else {\n                child.action.add(value.action);\n            }\n            child.state.isActive = value.isActive;\n        }\n    };\n    EShapeButtonLayer.prototype.layoutButtons = function () {\n        var button = this.button;\n        var buttonValues = button.values;\n        var buttonValuesLength = buttonValues.length;\n        var buttonMargin = button.margin;\n        var size = this.size;\n        var sizeX = size.x;\n        var sizeY = size.y;\n        var children = this.children;\n        var childrenLength = children.length;\n        // Total weight\n        var totalWeight = 0;\n        for (var i = 0; i < buttonValuesLength; ++i) {\n            totalWeight += buttonValues[i].weight;\n        }\n        totalWeight = Math.max(0.0001, totalWeight);\n        var buttonSpace = Math.max(0, sizeX - (buttonValuesLength - 1) * buttonMargin);\n        var buttonSpaceFactor = buttonSpace / totalWeight;\n        // Update\n        var x = -sizeX * 0.5;\n        for (var i = 0; i < childrenLength; ++i) {\n            var buttonValue = buttonValues[i];\n            var width = buttonValue.weight * buttonSpaceFactor;\n            var child = children[i];\n            child.lock(EShapeLockPart.ALL);\n            child.size.set(width, sizeY);\n            child.transform.position.set(x + width * 0.5, 0);\n            child.unlock(EShapeLockPart.ALL, true);\n            x += width + buttonMargin;\n        }\n    };\n    EShapeButtonLayer.prototype.toCorner = function (index, size, corner) {\n        var result = EShapeCorner.NONE;\n        if (index === 0) {\n            result |= EShapeCorner.LEFT & corner;\n        }\n        if (index === size - 1) {\n            result |= EShapeCorner.RIGHT & corner;\n        }\n        return result;\n    };\n    EShapeButtonLayer.prototype.copy = function (source, part) {\n        if (part === void 0) { part = EShapeCopyPart.ALL; }\n        var result = _super.prototype.copy.call(this, source, part);\n        if (source instanceof EShapeButtonLayer) {\n            this._button.copy(source.button);\n        }\n        return result;\n    };\n    EShapeButtonLayer.prototype.serialize = function (manager) {\n        var result = _super.prototype.serialize.call(this, manager);\n        var resource = result[15];\n        result[15] = manager.addResource(\"[\".concat(this._button.serialize(manager), \",\").concat(resource, \"]\"));\n        return result;\n    };\n    return EShapeButtonLayer;\n}(EShapeGroupShadowed));\nexport { EShapeButtonLayer };\n//# sourceMappingURL=e-shape-button-layer.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueAdd, _super);\n    function ECommandShapeButtonLayerValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    ECommandShapeButtonLayerValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeButtonLayerValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                shape.button.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                shape.button.remove(shape.button.size() - 1);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeButtonLayerValueAdd;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueAdd };\n//# sourceMappingURL=e-command-shape-button-layer-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueBringForward, _super);\n    function ECommandShapeButtonLayerValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = shape.button.indexOf(target);\n                indices.push(index);\n                if (0 < index) {\n                    shape.button.swap(index - 1, index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 < index) {\n                    shape.button.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeButtonLayerValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueBringForward };\n//# sourceMappingURL=e-command-shape-button-layer-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueMargin = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueMargin, _super);\n    function ECommandShapeButtonLayerValueMargin(value, selection) {\n        var _this = _super.call(this) || this;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                values.push(shape.button.margin);\n                shape.button.margin = value;\n            }\n            else {\n                values.push(0);\n            }\n        }\n        _this._values = values;\n        _this._selection = selection;\n        return _this;\n    }\n    ECommandShapeButtonLayerValueMargin.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueMargin.prototype.redo = function () {\n        var selection = this._selection;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var value = values[i];\n                values[i] = shape.button.margin;\n                shape.button.margin = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueMargin.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeButtonLayerValueMargin;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueMargin };\n//# sourceMappingURL=e-command-shape-button-layer-value-margin.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueRemove, _super);\n    function ECommandShapeButtonLayerValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = shape.button.indexOf(target);\n                indices.push(index);\n                if (0 <= index) {\n                    shape.button.remove(index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeButtonLayerValueRemove;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueRemove };\n//# sourceMappingURL=e-command-shape-button-layer-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueReplace, _super);\n    function ECommandShapeButtonLayerValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = shape.button.indexOf(oldValue);\n                indices.push(index);\n                if (0 <= index) {\n                    oldValues.push(shape.button.get(index));\n                    shape.button.set(index, newValue);\n                }\n                else {\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.set(index, newValue);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.button.set(index, oldValues[i]);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeButtonLayerValueReplace;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueReplace };\n//# sourceMappingURL=e-command-shape-button-layer-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar ECommandShapeButtonLayerValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeButtonLayerValueSendBackward, _super);\n    function ECommandShapeButtonLayerValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var button = shape.button;\n                var index = button.indexOf(target);\n                indices.push(index);\n                if (0 <= index && index < button.size() - 1) {\n                    button.swap(index + 1, index);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeButtonLayerValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeButtonLayerValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                var button = shape.button;\n                var index = indices[i];\n                if (0 <= index && index < button.size() - 1) {\n                    button.swap(index + 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeButtonLayerValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeButtonLayerValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeButtonLayerValueSendBackward };\n//# sourceMappingURL=e-command-shape-button-layer-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheck, DDialogLayered, DInputLabel, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DMenu, DSelectMultiple } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nvar EDialogShapeButtonLayerValue = /** @class */ (function (_super) {\n    __extends(EDialogShapeButtonLayerValue, _super);\n    function EDialogShapeButtonLayerValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogShapeButtonLayerValue.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.inputLabel, this.inputWidth, this.newLayoutOf(theme.getSelectLayerLabel(), this.selectLayer), this.newLayoutOf(null, this.checkBringToFront), this.newLayoutOf(null, this.checkIsGrouped), this.newLayoutOf(null, this.checkIsActive));\n        return result;\n    };\n    EDialogShapeButtonLayerValue.prototype.newLayoutOf = function (label, target) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLayoutLabel(label), target, this.newLayoutSpace()]\n        });\n    };\n    EDialogShapeButtonLayerValue.prototype.newLayoutLabel = function (label) {\n        if (label != null) {\n            return new DInputLabel({\n                width: 60,\n                text: {\n                    value: label\n                }\n            });\n        }\n        else {\n            return this.newLayoutSpace();\n        }\n    };\n    EDialogShapeButtonLayerValue.prototype.newLayoutSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"inputLabel\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLabel) !== null && _a !== void 0 ? _a : (this._inputLabel = this.newInputLabel()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newInputLabel = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"inputWidth\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputWidth) !== null && _a !== void 0 ? _a : (this._inputWidth = this.newInputWidth()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newInputWidth = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                min: 0,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"selectLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayer) !== null && _a !== void 0 ? _a : (this._selectLayer = this.newSelectLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newSelectLayer = function () {\n        return new DSelectMultiple({\n            weight: 1\n        });\n    };\n    EDialogShapeButtonLayerValue.prototype.newSelectLayerMenuItemOptions = function () {\n        var _a;\n        var diagram = (_a = this.options) === null || _a === void 0 ? void 0 : _a.diagram;\n        if (diagram != null) {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var result = [];\n                var layers = canvas.layer.children;\n                for (var i = layers.length - 1; 0 <= i; --i) {\n                    var layer = layers[i];\n                    result.push({\n                        value: i,\n                        text: {\n                            value: layer.name\n                        },\n                        check: true\n                    });\n                }\n                return result;\n            }\n        }\n        return [];\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"checkBringToFront\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkBringToFront) !== null && _a !== void 0 ? _a : (this._checkBringToFront = this.newCheckBringToFront()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newCheckBringToFront = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBringToFromLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"checkIsGrouped\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsGrouped) !== null && _a !== void 0 ? _a : (this._checkIsGrouped = this.newCheckIsGrouped()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newCheckIsGrouped = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckIsGroupedLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"checkIsActive\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkIsActive) !== null && _a !== void 0 ? _a : (this._checkIsActive = this.newCheckIsActive()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.newCheckIsActive = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckIsActiveLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    EDialogShapeButtonLayerValue.prototype.reset = function () {\n        this.inputLabel.input.value = this.theme.newInputLabel();\n        this.inputWidth.input.value = 1;\n        this.selectLayer.values = [];\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        this.checkBringToFront.state.isActive = false;\n        this.checkIsGrouped.state.isActive = true;\n        return this;\n    };\n    Object.defineProperty(EDialogShapeButtonLayerValue.prototype, \"value\", {\n        get: function () {\n            return new EShapeButtonLayerButtonValue(this.inputLabel.input.value, this.inputWidth.input.value, this.selectLayer.values.slice(0), this.checkBringToFront.state.isActive, this.checkIsGrouped.state.isActive, this.checkIsActive.state.isActive);\n        },\n        set: function (value) {\n            this.selectLayer.menu = new DMenu({\n                fit: true,\n                items: this.newSelectLayerMenuItemOptions()\n            });\n            if (value != null) {\n                this.inputLabel.input.value = value.label;\n                this.inputWidth.input.value = value.weight;\n                this.selectLayer.values = value.layers;\n                this.checkBringToFront.state.isActive = value.bringToFront;\n                this.checkIsGrouped.state.isActive = value.isGrouped;\n                this.checkIsActive.state.isActive = value.isActive;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogShapeButtonLayerValue.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogShapeButtonLayerValue.prototype.getType = function () {\n        return \"EDialogShapeButtonLayerValue\";\n    };\n    return EDialogShapeButtonLayerValue;\n}(DDialogLayered));\nexport { EDialogShapeButtonLayerValue };\n//# sourceMappingURL=e-dialog-shape-button-layer-value.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DInputRealAndLabel, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DPane, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeButtonLayerValueAdd } from \"./e-command-shape-button-layer-value-add\";\nimport { ECommandShapeButtonLayerValueBringForward } from \"./e-command-shape-button-layer-value-bring-forward\";\nimport { ECommandShapeButtonLayerValueMargin } from \"./e-command-shape-button-layer-value-margin\";\nimport { ECommandShapeButtonLayerValueRemove } from \"./e-command-shape-button-layer-value-remove\";\nimport { ECommandShapeButtonLayerValueReplace } from \"./e-command-shape-button-layer-value-replace\";\nimport { ECommandShapeButtonLayerValueSendBackward } from \"./e-command-shape-button-layer-value-send-backward\";\nimport { EDialogShapeButtonLayerValue } from \"./e-dialog-shape-button-layer-value\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nvar EEditorShapeButtonLayer = /** @class */ (function (_super) {\n    __extends(EEditorShapeButtonLayer, _super);\n    function EEditorShapeButtonLayer(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        // Layout\n        _this.initLayout();\n        return _this;\n    }\n    EEditorShapeButtonLayer.prototype.initLayout = function () {\n        var _this = this;\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        this.newTextLabel(),\n                        this.buttonNew,\n                        this.buttonDelete,\n                        this.buttonBringForward,\n                        this.buttonSendBackward\n                    ]\n                }),\n                this.columnList,\n                this.inputMargin\n            ]\n        });\n        // Selection\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n            _this.onSelectionChange(selection);\n        });\n        var columnList = this.columnList;\n        columnList.data.selection.on(\"change\", function () {\n            _this.onListSelectionChange(columnList);\n        });\n        this.onSelectionChange(selection);\n    };\n    EEditorShapeButtonLayer.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonNew\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.subtheme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.dialogButton\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandShapeButtonLayerValueAdd(value, _this._selection));\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChangeButtonNew = function (selection) {\n        var buttonNew = this.buttonNew;\n        if (selection.last() instanceof EShapeButtonLayer) {\n            buttonNew.state.isDisabled = false;\n        }\n        else {\n            buttonNew.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.subtheme.getButtonDeleteTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.data.selection.first;\n                    if (first != null && 1 < columnList.data.size()) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueRemove(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChangeButtonDelete = function (columnList) {\n        this.buttonDelete.state.isDisabled =\n            columnList.data.size() <= 1 || columnList.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.subtheme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    if (first != null && columnList.data.items[0] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueBringForward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChangeButtonBringForward = function (columnList) {\n        var first = columnList.data.selection.first;\n        var items = columnList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.subtheme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    var items = columnList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueSendBackward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChangeButtonSendBackward = function (columnList) {\n        var first = columnList.selection.first;\n        var items = columnList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"dialogButton\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogButton) !== null && _a !== void 0 ? _a : (this._dialogButton = this.newDialogButton()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newDialogButton = function () {\n        return new EDialogShapeButtonLayerValue({\n            diagram: this._diagram\n        });\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"columnList\", {\n        get: function () {\n            var _a;\n            return ((_a = this._columnList) !== null && _a !== void 0 ? _a : (this._columnList = this.newColumnList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newColumnList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"100%\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return value.label;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onColumnListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorShapeButtonLayer.prototype.onColumnListDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var columnDialog = this.dialogButton;\n            columnDialog.value = oldValue;\n            columnDialog.open(item).then(function (newValue) {\n                if (newValue != null) {\n                    DControllers.getCommandController().push(new ECommandShapeButtonLayerValueReplace(oldValue, newValue, _this._selection, list));\n                }\n            });\n        }\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChangeColumnList = function (selection) {\n        var last = selection.last();\n        var columnList = this.columnList;\n        columnList.data.items = last instanceof EShapeButtonLayer ? last.button.values : [];\n        this.onListSelectionChange(columnList);\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"inputMargin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputMargin) !== null && _a !== void 0 ? _a : (this._inputMargin = this.newInputMargin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newInputMargin = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.subtheme.getInputMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueMargin(value, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChangeInputRowHeight = function (selection) {\n        var last = selection.last();\n        var input = this.inputMargin;\n        if (last instanceof EShapeButtonLayer) {\n            input.input.value = last.button.margin;\n            input.state.isDisabled = false;\n        }\n        else {\n            input.state.isDisabled = true;\n        }\n    };\n    EEditorShapeButtonLayer.prototype.onSelectionChange = function (selection) {\n        this.onSelectionChangeButtonNew(selection);\n        this.onSelectionChangeColumnList(selection);\n    };\n    EEditorShapeButtonLayer.prototype.onListSelectionChange = function (columnList) {\n        this.onListSelectionChangeButtonDelete(columnList);\n        this.onListSelectionChangeButtonBringForward(columnList);\n        this.onListSelectionChangeButtonSendBackward(columnList);\n    };\n    Object.defineProperty(EEditorShapeButtonLayer.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeButtonLayer.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeButtonLayer\");\n    };\n    return EEditorShapeButtonLayer;\n}(DPane));\nexport { EEditorShapeButtonLayer };\n//# sourceMappingURL=e-editor-shape-button-layer.js.map","import { createGroupUploaded, deserializeBase, DThemes, EShapeCapability, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nimport { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EShapeButtonLayerIds } from \"./e-shape-button-layer-ids\";\nimport { EEditorShapeButtonLayer } from \"./e-editor-shape-button-layer\";\nvar EShapeButtonLayers = /** @class */ (function () {\n    function EShapeButtonLayers() {\n    }\n    EShapeButtonLayers.getTheme = function () {\n        return DThemes.get(\"EShapeButtonLayer\");\n    };\n    EShapeButtonLayers.create = function (existing) {\n        var result = new EShapeButtonLayer(EShapeResourceManagerDeserializationMode.EDITOR);\n        if (existing) {\n            result.copy(existing);\n            if (!(existing instanceof EShapeButtonLayer)) {\n                var label = this.getTheme().getLabel();\n                result.button.add(new EShapeButtonLayerButtonValue(label, 1, [], false, true, false));\n            }\n        }\n        else {\n            var label = this.getTheme().getLabel();\n            result.button.add(new EShapeButtonLayerButtonValue(label, 1, [], false, true, false));\n        }\n        result.onSizeChange();\n        return result;\n    };\n    EShapeButtonLayers.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeButtonLayerIds.ID,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2\" +\n                    \"-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z\\\"/>\" +\n                    \"<path d=\\\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7\" +\n                    \".36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16zm0-11.47L17.74 9 12 13.47 6.\" +\n                    \"26 9 12 4.53z\\\" transform=\\\"translate(7.25,8) scale(0.6)\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeButtonLayers.create(existing); },\n            deserializer: function (item, manager) { return EShapeButtonLayers.deserialize(item, manager); },\n            editor: EEditorShapeButtonLayer,\n            uploaded: createGroupUploaded,\n            capability: (EShapeCapability.PRIMITIVE |\n                EShapeCapability.STROKE_SIDE |\n                EShapeCapability.BORDER_RADIUS) &\n                ~EShapeCapability.CHILDREN\n        });\n    };\n    EShapeButtonLayers.deserialize = function (item, manager) {\n        var shape = new EShapeButtonLayer(manager.mode);\n        var index = item[15];\n        var resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            var parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.button.deserialize(parsed[0], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    return EShapeButtonLayers;\n}());\nexport { EShapeButtonLayers };\n//# sourceMappingURL=e-shape-button-layers.js.map","var EShapeChartTick = /** @class */ (function () {\n    function EShapeChartTick(major, minor) {\n        this.major = major;\n        this.minor = minor;\n    }\n    EShapeChartTick.prototype.copy = function (source) {\n        this.major.copy(source.major);\n        this.minor.copy(source.minor);\n        return this;\n    };\n    EShapeChartTick.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.major.serialize(manager), \",\").concat(this.minor.serialize(manager), \"]\"));\n    };\n    EShapeChartTick.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.major.deserialize(parsed[0], manager);\n            this.minor.deserialize(parsed[1], manager);\n        }\n    };\n    return EShapeChartTick;\n}());\nexport { EShapeChartTick };\n//# sourceMappingURL=e-shape-chart-tick.js.map","var EShapeChartTickMajor = /** @class */ (function () {\n    function EShapeChartTickMajor(count) {\n        this.count = count;\n    }\n    EShapeChartTickMajor.prototype.copy = function (source) {\n        this.count = source.count;\n        return this;\n    };\n    EShapeChartTickMajor.prototype.serialize = function (manager) {\n        return manager.addResource(\"\".concat(this.count));\n    };\n    EShapeChartTickMajor.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.count = parsed;\n        }\n    };\n    return EShapeChartTickMajor;\n}());\nexport { EShapeChartTickMajor };\n//# sourceMappingURL=e-shape-chart-tick-major.js.map","var EShapeChartTickMinor = /** @class */ (function () {\n    function EShapeChartTickMinor(count) {\n        this.count = count;\n    }\n    EShapeChartTickMinor.prototype.copy = function (source) {\n        this.count = source.count;\n        return this;\n    };\n    EShapeChartTickMinor.prototype.serialize = function (manager) {\n        return manager.addResource(\"\".concat(this.count));\n    };\n    EShapeChartTickMinor.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.count = parsed;\n        }\n    };\n    return EShapeChartTickMinor;\n}());\nexport { EShapeChartTickMinor };\n//# sourceMappingURL=e-shape-chart-tick-minor.js.map","import { EShapeChartTick } from \"./e-shape-chart-tick\";\nimport { EShapeChartTickMajor } from \"./e-shape-chart-tick-major\";\nimport { EShapeChartTickMinor } from \"./e-shape-chart-tick-minor\";\nvar EShapeChartAxisX = /** @class */ (function () {\n    function EShapeChartAxisX() {\n        this.padding = 10;\n        this.tick = new EShapeChartTick(new EShapeChartTickMajor(3), new EShapeChartTickMinor(3));\n    }\n    EShapeChartAxisX.prototype.copy = function (source) {\n        this.padding = source.padding;\n        this.tick.copy(source.tick);\n        return this;\n    };\n    EShapeChartAxisX.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.padding, \",\").concat(this.tick.serialize(manager), \"]\"));\n    };\n    EShapeChartAxisX.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.padding = parsed[0];\n            this.tick.deserialize(parsed[1], manager);\n        }\n    };\n    return EShapeChartAxisX;\n}());\nexport { EShapeChartAxisX };\n//# sourceMappingURL=e-shape-chart-axis-x.js.map","import { __extends } from \"tslib\";\nimport { EShapeChartAxisX } from \"./e-shape-chart-axis-x\";\nvar EShapeChartAxisY = /** @class */ (function (_super) {\n    __extends(EShapeChartAxisY, _super);\n    function EShapeChartAxisY() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EShapeChartAxisY;\n}(EShapeChartAxisX));\nexport { EShapeChartAxisY };\n//# sourceMappingURL=e-shape-chart-axis-y.js.map","import { EShapeChartAxisX } from \"./e-shape-chart-axis-x\";\nimport { EShapeChartAxisY } from \"./e-shape-chart-axis-y\";\nvar EShapeChartAxis = /** @class */ (function () {\n    function EShapeChartAxis() {\n        this.x = new EShapeChartAxisX();\n        this.y = new EShapeChartAxisY();\n    }\n    EShapeChartAxis.prototype.copy = function (source) {\n        this.x.copy(source.x);\n        this.y.copy(source.y);\n        return this;\n    };\n    EShapeChartAxis.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.x.serialize(manager), \",\").concat(this.y.serialize(manager), \"]\"));\n    };\n    EShapeChartAxis.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.x.deserialize(parsed[0], manager);\n            this.y.deserialize(parsed[1], manager);\n        }\n    };\n    return EShapeChartAxis;\n}());\nexport { EShapeChartAxis };\n//# sourceMappingURL=e-shape-chart-axis.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nvar EShapeChartLineIds = /** @class */ (function () {\n    function EShapeChartLineIds() {\n    }\n    EShapeChartLineIds.ID = EShapeType.EXTENSION + 0;\n    EShapeChartLineIds.PLOT_AREA_ID = \"plot-area\";\n    EShapeChartLineIds.LINE_ID = \"line\";\n    EShapeChartLineIds.X_AXIS_ID = \"x-axis\";\n    EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID = \"x-axis-tick-major\";\n    EShapeChartLineIds.X_AXIS_TICK_MINOR_ID = \"x-axis-tick-minor\";\n    EShapeChartLineIds.Y_AXIS_ID = \"y-axis\";\n    EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID = \"y-axis-tick-major\";\n    EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID = \"y-axis-tick-minor\";\n    return EShapeChartLineIds;\n}());\nexport { EShapeChartLineIds };\n//# sourceMappingURL=e-shape-chart-line-ids.js.map","import { __extends } from \"tslib\";\nimport { EShapeCopyPart, EShapeGroup } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartAxis } from \"./e-shape-chart-axis\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nvar EShapeChartLine = /** @class */ (function (_super) {\n    __extends(EShapeChartLine, _super);\n    function EShapeChartLine(mode, type) {\n        if (type === void 0) { type = EShapeChartLineIds.ID; }\n        var _this = _super.call(this, mode, type) || this;\n        _this.axis = new EShapeChartAxis();\n        return _this;\n    }\n    EShapeChartLine.prototype.copy = function (source, part) {\n        if (part === void 0) { part = EShapeCopyPart.ALL; }\n        var result = _super.prototype.copy.call(this, source, part);\n        if (source instanceof EShapeChartLine) {\n            this.axis.copy(source.axis);\n        }\n        return result;\n    };\n    EShapeChartLine.prototype.serialize = function (manager) {\n        var result = _super.prototype.serialize.call(this, manager);\n        var resource = result[15];\n        result[15] = manager.addResource(\"[\".concat(this.axis.serialize(manager), \",\").concat(resource, \"]\"));\n        return result;\n    };\n    return EShapeChartLine;\n}(EShapeGroup));\nexport { EShapeChartLine };\n//# sourceMappingURL=e-shape-chart-line.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartAxisXPadding = /** @class */ (function (_super) {\n    __extends(ECommandChartAxisXPadding, _super);\n    function ECommandChartAxisXPadding() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartAxisXPadding.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.padding;\n        }\n        return 0;\n    };\n    ECommandChartAxisXPadding.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.padding = property;\n        }\n    };\n    ECommandChartAxisXPadding.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartAxisXPadding;\n}(ECommandShapePropertySimple));\nexport { ECommandChartAxisXPadding };\n//# sourceMappingURL=e-command-chart-axis-x-padding.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartAxisYPadding = /** @class */ (function (_super) {\n    __extends(ECommandChartAxisYPadding, _super);\n    function ECommandChartAxisYPadding() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartAxisYPadding.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.padding;\n        }\n        return 0;\n    };\n    ECommandChartAxisYPadding.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.padding = property;\n        }\n    };\n    ECommandChartAxisYPadding.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartAxisYPadding;\n}(ECommandShapePropertySimple));\nexport { ECommandChartAxisYPadding };\n//# sourceMappingURL=e-command-chart-axis-y-padding.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickXMajorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickXMajorCount, _super);\n    function ECommandChartTickXMajorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickXMajorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.tick.major.count;\n        }\n        return 0;\n    };\n    ECommandChartTickXMajorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.tick.major.count = property;\n        }\n    };\n    ECommandChartTickXMajorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickXMajorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickXMajorCount };\n//# sourceMappingURL=e-command-chart-tick-x-major-count.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickXMinorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickXMinorCount, _super);\n    function ECommandChartTickXMinorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickXMinorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.tick.minor.count;\n        }\n        return 0;\n    };\n    ECommandChartTickXMinorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.tick.minor.count = property;\n        }\n    };\n    ECommandChartTickXMinorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickXMinorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickXMinorCount };\n//# sourceMappingURL=e-command-chart-tick-x-minor-count.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickYMajorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickYMajorCount, _super);\n    function ECommandChartTickYMajorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickYMajorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.tick.major.count;\n        }\n        return 0;\n    };\n    ECommandChartTickYMajorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.tick.major.count = property;\n        }\n    };\n    ECommandChartTickYMajorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickYMajorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickYMajorCount };\n//# sourceMappingURL=e-command-chart-tick-y-major-count.js.map","import { __extends } from \"tslib\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nvar ECommandChartTickYMinorCount = /** @class */ (function (_super) {\n    __extends(ECommandChartTickYMinorCount, _super);\n    function ECommandChartTickYMinorCount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandChartTickYMinorCount.prototype.getProperty = function (shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.tick.minor.count;\n        }\n        return 0;\n    };\n    ECommandChartTickYMinorCount.prototype.setProperty = function (shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.tick.minor.count = property;\n        }\n    };\n    ECommandChartTickYMinorCount.prototype.isMergeable = function () {\n        return true;\n    };\n    return ECommandChartTickYMinorCount;\n}(ECommandShapePropertySimple));\nexport { ECommandChartTickYMinorCount };\n//# sourceMappingURL=e-command-chart-tick-y-minor-count.js.map","import { createLine, DControllers, DThemes, EShapeBar, EShapeBarPosition, EShapeDefaults, EShapePointsStyle, EShapeRectangle, EShapeTextAlignHorizontal, EShapeTextAlignVertical, EShapeTextDirection } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandChartAxisXPadding } from \"./e-command-chart-axis-x-padding\";\nimport { ECommandChartAxisYPadding } from \"./e-command-chart-axis-y-padding\";\nimport { ECommandChartTickXMajorCount } from \"./e-command-chart-tick-x-major-count\";\nimport { ECommandChartTickXMinorCount } from \"./e-command-chart-tick-x-minor-count\";\nimport { ECommandChartTickYMajorCount } from \"./e-command-chart-tick-y-major-count\";\nimport { ECommandChartTickYMinorCount } from \"./e-command-chart-tick-y-minor-count\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nvar EShapeChartAxes = /** @class */ (function () {\n    function EShapeChartAxes() {\n    }\n    EShapeChartAxes.getTheme = function () {\n        return DThemes.get(\"EShapeChartLine\");\n    };\n    EShapeChartAxes.getPlotArea = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.PLOT_AREA_ID);\n    };\n    EShapeChartAxes.newPlotArea = function (shape) {\n        var result = new EShapeRectangle();\n        result.id = EShapeChartLineIds.PLOT_AREA_ID;\n        result.size.set(shape.size.x, shape.size.y);\n        result.stroke.enable = false;\n        result.fill.alpha = EShapeDefaults.FILL_ALPHA * 0.5;\n        result.text.value = this.getTheme().newPlotAreaLabel();\n        result.text.align.vertical = EShapeTextAlignVertical.OUTSIDE_TOP;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.getLine = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.LINE_ID);\n    };\n    EShapeChartAxes.newLine = function (shape) {\n        var sx = 0.8 * shape.size.x;\n        var sy = 0.8 * shape.size.y;\n        var sxh = sx * 0.5;\n        var syh = sy * 0.5;\n        var result = createLine([-sxh, +syh, +sxh, -syh], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n        result.id = EShapeChartLineIds.LINE_ID;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.getXAxis = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_ID);\n    };\n    EShapeChartAxes.getXAxisTickMajor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID);\n    };\n    EShapeChartAxes.getXAxisTickMinor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MINOR_ID);\n    };\n    EShapeChartAxes.newXAxis = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_ID;\n        result.size.set(shape.size.x, 0);\n        result.transform.position.set(0, shape.size.y * 0.5);\n        result.points.position = EShapeBarPosition.LEFT;\n        result.points.size = -1;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = this.getTheme().newXAxisLabel();\n        result.text.align.vertical = EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n        result.text.padding.set(50, 50);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createXAxis = function (selection) {\n        selection.createChildren(function (shape) {\n            return [EShapeChartAxes.newXAxis(shape)];\n        });\n    };\n    EShapeChartAxes.deleteXAxis = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                result = [axis];\n            }\n            var major = EShapeChartAxes.getXAxisTickMajor(shape);\n            if (major != null) {\n                if (result == null) {\n                    result = [major];\n                }\n                else {\n                    result.push(major);\n                }\n            }\n            var minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setXAxisPadding = function (padding, selection) {\n        DControllers.getCommandController().push(new ECommandChartAxisXPadding(selection, padding));\n    };\n    EShapeChartAxes.newXAxisTickMajor = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(0, shape.size.y * 0.5);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = 10;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = \"%YMD\\n%Hms.%mi\";\n        result.text.align.vertical = EShapeTextAlignVertical.TOP;\n        result.text.padding.set(12.5, 12.5);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.newXAxisTickMinor = function (shape, x, y) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_TICK_MINOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(x, y);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = 5;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH * 0.5;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createXAxisTickMajor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                return [_this.newXAxisTickMajor(shape)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteXAxisTickMajor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var major = EShapeChartAxes.getXAxisTickMajor(shape);\n            if (major != null) {\n                result = [major];\n            }\n            var minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setXAxisTickMajorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickXMajorCount(selection, count));\n    };\n    EShapeChartAxes.createXAxisTickMinor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                var sizeX = axis.size.x;\n                var position = axis.transform.position;\n                return [_this.newXAxisTickMinor(shape, position.x - sizeX * 0.25, position.y)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteXAxisTickMinor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                return [minor];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.setXAxisTickMinorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickXMinorCount(selection, count));\n    };\n    EShapeChartAxes.getYAxis = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_ID);\n    };\n    EShapeChartAxes.getYAxisTickMajor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID);\n    };\n    EShapeChartAxes.getYAxisTickMinor = function (shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID);\n    };\n    EShapeChartAxes.newYAxis = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_ID;\n        result.size.set(0, shape.size.y);\n        result.transform.position.set(-shape.size.x * 0.5, 0);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = -1;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = this.getTheme().newYAxisLabel();\n        result.text.align.horizontal = EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n        result.text.direction = EShapeTextDirection.BOTTOM_TO_TOP;\n        result.text.padding.set(50, 50);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createYAxis = function (selection) {\n        selection.createChildren(function (shape) {\n            return [EShapeChartAxes.newYAxis(shape)];\n        });\n    };\n    EShapeChartAxes.deleteYAxis = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                result = [axis];\n            }\n            var major = EShapeChartAxes.getYAxisTickMajor(shape);\n            if (major != null) {\n                if (result == null) {\n                    result = [major];\n                }\n                else {\n                    result.push(major);\n                }\n            }\n            var minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setYAxisPadding = function (padding, selection) {\n        DControllers.getCommandController().push(new ECommandChartAxisYPadding(selection, padding));\n    };\n    EShapeChartAxes.newYAxisTickMajor = function (shape) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(-shape.size.x * 0.5, 0);\n        result.points.position = EShapeBarPosition.RIGHT;\n        result.points.size = 10;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = \"%ssi\";\n        result.text.align.horizontal = EShapeTextAlignHorizontal.RIGHT;\n        result.text.padding.set(12.5, 12.5);\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.newYAxisTickMinor = function (shape, x, y) {\n        var result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(x, y);\n        result.points.position = EShapeBarPosition.RIGHT;\n        result.points.size = 5;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH * 0.5;\n        result.attach(shape);\n        return result;\n    };\n    EShapeChartAxes.createYAxisTickMajor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                return [_this.newYAxisTickMajor(shape)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteYAxisTickMajor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var result = null;\n            var major = EShapeChartAxes.getYAxisTickMajor(shape);\n            if (major != null) {\n                result = [major];\n            }\n            var minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    };\n    EShapeChartAxes.setYAxisTickMajorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickYMajorCount(selection, count));\n    };\n    EShapeChartAxes.createYAxisTickMinor = function (selection) {\n        var _this = this;\n        selection.createChildren(function (shape) {\n            var axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                var sizeY = axis.size.y;\n                var position = axis.transform.position;\n                return [_this.newYAxisTickMinor(shape, position.x, position.y + sizeY * 0.25)];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.deleteYAxisTickMinor = function (selection) {\n        selection.deleteChildren(function (shape) {\n            var minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                return [minor];\n            }\n            return null;\n        });\n    };\n    EShapeChartAxes.setYAxisTickMinorCount = function (count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickYMinorCount(selection, count));\n    };\n    return EShapeChartAxes;\n}());\nexport { EShapeChartAxes };\n//# sourceMappingURL=e-shape-chart-axes.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheckRight, DInputInteger, DLayoutHorizontal, DLayoutVertical, DPane, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartAxes } from \"./e-shape-chart-axes\";\nvar EEditorShapeChartLine = /** @class */ (function (_super) {\n    __extends(EEditorShapeChartLine, _super);\n    function EEditorShapeChartLine(options) {\n        var _this = _super.call(this, options) || this;\n        var selection = options.selection;\n        _this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n        });\n        var subtheme = _this.subtheme;\n        new DLayoutVertical({\n            parent: _this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisLabel()\n                    },\n                    padding: 0,\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    self.state.isActive = EShapeChartAxes.getXAxis(last) != null;\n                                    self.state.isDisabled = false;\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createXAxis(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteXAxis(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisMajorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getXAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getXAxisTickMajor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createXAxisTickMajor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteXAxisTickMajor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisMinorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getXAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getXAxisTickMinor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createXAxisTickMinor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteXAxisTickMinor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisLabel()\n                    },\n                    padding: 0,\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    self.state.isActive = EShapeChartAxes.getYAxis(last) != null;\n                                    self.state.isDisabled = false;\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createYAxis(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteYAxis(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisMajorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getYAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getYAxisTickMajor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createYAxisTickMajor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteYAxisTickMajor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisMinorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: function (self) {\n                            var update = function () {\n                                var last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getYAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getYAxisTickMinor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: function () {\n                            EShapeChartAxes.createYAxisTickMinor(selection);\n                        },\n                        inactive: function () {\n                            EShapeChartAxes.deleteYAxisTickMinor(selection);\n                        }\n                    }\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextMajorTickCountLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.tick.major.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setXAxisTickMajorCount(count, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.tick.major.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setYAxisTickMajorCount(count, selection);\n                                }\n                            }\n                        })\n                    ]\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextMinorTickCountLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.tick.minor.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setXAxisTickMinorCount(count, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.tick.minor.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (count) {\n                                    EShapeChartAxes.setYAxisTickMinorCount(count, selection);\n                                }\n                            }\n                        })\n                    ]\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextPaddingLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.padding;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (padding) {\n                                    EShapeChartAxes.setXAxisPadding(padding, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: function (self) {\n                                    var update = function () {\n                                        var last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.padding;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: function (padding) {\n                                    EShapeChartAxes.setYAxisPadding(padding, selection);\n                                }\n                            }\n                        })\n                    ]\n                })\n            ],\n            on: {\n                init: function (self) {\n                    var update = function () {\n                        self.state.isDisabled = !(selection.last() instanceof EShapeChartLine);\n                    };\n                    update();\n                    selection.on(\"change\", update);\n                }\n            }\n        });\n        return _this;\n    }\n    EEditorShapeChartLine.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeChartLine.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeChartLine.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeChartLine\");\n    };\n    return EEditorShapeChartLine;\n}(DPane));\nexport { EEditorShapeChartLine };\n//# sourceMappingURL=e-editor-shape-chart-line.js.map","import { __extends } from \"tslib\";\nimport { NumberFormatters, EShapeActionRuntimeBase, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nvar EShapeChartLineActionRuntime = /** @class */ (function (_super) {\n    __extends(EShapeChartLineActionRuntime, _super);\n    function EShapeChartLineActionRuntime(shape) {\n        var _this = _super.call(this) || this;\n        // Lines\n        var line = UtilShapeSearch.findChildById(shape, \"line\");\n        if (line != null) {\n            var data = shape.data;\n            if (data.size() <= 0) {\n                line.detach();\n                _this.lines = [];\n            }\n            else {\n                var lines = [line];\n                for (var i = 1, imax = data.size(); i < imax; ++i) {\n                    var cloned = line.clone();\n                    cloned.attach(shape);\n                    lines.push(cloned);\n                }\n                _this.lines = lines;\n            }\n        }\n        else {\n            _this.lines = [];\n        }\n        // Ticks\n        var xmajorCount = 3;\n        var ymajorCount = 3;\n        var xminorCount = 3;\n        var yminorCount = 3;\n        if (shape instanceof EShapeChartLine) {\n            xmajorCount = shape.axis.x.tick.major.count;\n            ymajorCount = shape.axis.y.tick.major.count;\n            xminorCount = shape.axis.x.tick.minor.count;\n            yminorCount = shape.axis.y.tick.minor.count;\n        }\n        _this.xmajorCount = xmajorCount;\n        _this.ymajorCount = ymajorCount;\n        _this.xminorCount = xminorCount;\n        _this.yminorCount = yminorCount;\n        _this.xmajors = _this.initTicks(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID, xmajorCount);\n        _this.ymajors = _this.initTicks(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID, ymajorCount);\n        _this.xminors = _this.initTicks(shape, EShapeChartLineIds.X_AXIS_TICK_MINOR_ID, (xmajorCount + 1) * xminorCount);\n        _this.yminors = _this.initTicks(shape, EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID, (ymajorCount + 1) * yminorCount);\n        _this.workMajorPositions = new Float64Array(Math.max(xmajorCount, ymajorCount));\n        // Tick format\n        var xtick = UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID);\n        _this.xformatter = NumberFormatters.create(xtick != null ? xtick.text.value : \"\");\n        var ytick = UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID);\n        _this.yformatter = NumberFormatters.create(ytick != null ? ytick.text.value : \"\");\n        // Plot area\n        _this.plotArea = UtilShapeSearch.findChildById(shape, \"plot-area\");\n        // Padding\n        var xpadding = 10;\n        var ypadding = 10;\n        if (shape instanceof EShapeChartLine) {\n            xpadding = shape.axis.x.padding;\n            ypadding = shape.axis.y.padding;\n        }\n        _this.xpadding = xpadding;\n        _this.ypadding = ypadding;\n        return _this;\n    }\n    EShapeChartLineActionRuntime.prototype.initTicks = function (shape, id, count) {\n        var tick = UtilShapeSearch.findChildById(shape, id);\n        if (tick != null) {\n            if (count <= 0) {\n                tick.detach();\n                return [];\n            }\n            else {\n                var ticks = [tick];\n                for (var i = 1; i < count; ++i) {\n                    var cloned = tick.clone();\n                    cloned.attach(shape);\n                    ticks.push(cloned);\n                }\n                return ticks;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.toStepScale = function (scale) {\n        if (5.5 <= scale) {\n            return 10;\n        }\n        else if (2.2 <= scale) {\n            return 5;\n        }\n        else if (1.1 <= scale) {\n            return 2;\n        }\n        return 1;\n    };\n    EShapeChartLineActionRuntime.prototype.getStep = function (min, max, count) {\n        if (count <= 0 || max <= min) {\n            return -1;\n        }\n        // Calculate the step\n        var span = (max - min) / count;\n        var power = Math.floor(Math.log(span) / Math.LN10);\n        var base = Math.pow(10, power);\n        return this.toStepScale(span / base) * base;\n    };\n    EShapeChartLineActionRuntime.prototype.getTickPositions = function (min, max, count, step, padding, ratio, result) {\n        if (count <= 0) {\n            return result;\n        }\n        if (max <= min || step <= 0) {\n            result[0] = min;\n            for (var i = 1; i < count; ++i) {\n                result[i] = NaN;\n            }\n            return result;\n        }\n        // Set positions\n        var start = min / step;\n        var istart = Math.floor(start);\n        var dstart = start - istart;\n        if (padding < dstart * step * ratio) {\n            istart = Math.ceil(start);\n        }\n        var stop = max / step;\n        var istop = Math.ceil(stop);\n        var dstop = istop - stop;\n        if (padding < dstop * step * ratio) {\n            istop = Math.floor(stop);\n        }\n        var nticks = Math.min(count, Math.ceil(istop - istart + 1));\n        for (var i = 0; i < nticks; ++i) {\n            result[i] = (istart + i) * step;\n        }\n        for (var i = nticks; i < count; ++i) {\n            result[i] = NaN;\n        }\n        //\n        return result;\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksXMinor = function (mstep, index, position, min, ratio, lmin, lmax) {\n        var mticks = this.xminors;\n        if (0 < mticks.length) {\n            var minorCount = this.xminorCount;\n            if (0 < mstep) {\n                var padding = this.xpadding;\n                if (index < 0) {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var x = (position - (minorCount - i) * mstep - min) * ratio + lmin;\n                        if (lmin - padding <= x) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.x = x;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n                else {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var x = (position + (i + 1) * mstep - min) * ratio + lmin;\n                        if (x <= lmax + padding) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.x = x;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n            }\n            else {\n                for (var i = (index + 1) * minorCount, imax = i + minorCount; i < imax; ++i) {\n                    mticks[i].visible = false;\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.toStepMinor = function (step, minorCount) {\n        if (0 <= step) {\n            return step / (minorCount + 1);\n        }\n        else {\n            return -1;\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksX = function (min, max, ratio, lmin, lmax) {\n        var ticks = this.xmajors;\n        var mticks = this.xminors;\n        var minorCount = this.xminorCount;\n        var padding = this.xpadding;\n        // Major tick positions\n        var step = this.getStep(min, max, ticks.length);\n        var positions = this.getTickPositions(min, max, ticks.length, step, padding, ratio, this.workMajorPositions);\n        // First minors\n        var mstep = this.toStepMinor(step, minorCount);\n        this.updateTicksXMinor(mstep, -1, positions[0], min, ratio, lmin, lmax);\n        // Major and minor ticks\n        for (var i = 0, imax = ticks.length; i < imax; ++i) {\n            var tick = ticks[i];\n            var position = positions[i];\n            if (position === position) {\n                // Major tick\n                tick.lock(EShapeLockPart.UPLOADED);\n                tick.visible = true;\n                tick.transform.position.x = (position - min) * ratio + lmin;\n                tick.text.value = this.xformatter.format(position, step);\n                tick.unlock(EShapeLockPart.UPLOADED, true);\n                // Minor ticks\n                this.updateTicksXMinor(mstep, i, positions[i], min, ratio, lmin, lmax);\n            }\n            else {\n                // Major tick\n                tick.visible = false;\n                // Minor ticks\n                if (0 < mticks.length) {\n                    for (var j = (i + 1) * minorCount, jmax = j + minorCount; j < jmax; ++j) {\n                        mticks[j].visible = false;\n                    }\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksYMinor = function (mstep, index, position, min, ratio, lmin, lmax) {\n        var mticks = this.yminors;\n        if (0 < mticks.length) {\n            var minorCount = this.yminorCount;\n            if (0 < mstep) {\n                var padding = this.ypadding;\n                if (index < 0) {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var y = lmax - (position - (minorCount - i) * mstep - min) * ratio;\n                        if (y <= lmax + padding) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.y = y;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n                else {\n                    for (var i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        var mtick = mticks[j];\n                        var y = lmax - (position + (i + 1) * mstep - min) * ratio;\n                        if (lmin - padding <= y) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.y = y;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n            }\n            else {\n                for (var i = (index + 1) * minorCount, imax = i + minorCount; i < imax; ++i) {\n                    mticks[i].visible = false;\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateTicksY = function (min, max, ratio, lmin, lmax) {\n        var ticks = this.ymajors;\n        var mticks = this.yminors;\n        var minorCount = this.yminorCount;\n        var padding = this.ypadding;\n        // Major tick positions\n        var step = this.getStep(min, max, ticks.length);\n        var positions = this.getTickPositions(min, max, ticks.length, step, padding, ratio, this.workMajorPositions);\n        // First minors\n        var mstep = this.toStepMinor(step, minorCount);\n        this.updateTicksYMinor(mstep, -1, positions[0], min, ratio, lmin, lmax);\n        // Major and minor ticks\n        for (var i = 0, imax = ticks.length; i < imax; ++i) {\n            var tick = ticks[i];\n            var position = positions[i];\n            if (position === position) {\n                // Major tick\n                tick.lock(EShapeLockPart.UPLOADED);\n                tick.visible = true;\n                tick.transform.position.y = lmax - (position - min) * ratio;\n                tick.text.value = this.yformatter.format(position, step);\n                tick.unlock(EShapeLockPart.UPLOADED, true);\n                // Minor ticks\n                this.updateTicksYMinor(mstep, i, positions[i], min, ratio, lmin, lmax);\n            }\n            else {\n                // Major tick\n                tick.visible = false;\n                // Minor ticks\n                if (0 < mticks.length) {\n                    for (var j = (i + 1) * minorCount, jmax = j + minorCount; j < jmax; ++j) {\n                        mticks[j].visible = false;\n                    }\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.updateLines = function (data, xmin, xratio, lxmin, ymin, yratio, lymax) {\n        var lines = this.lines;\n        for (var i = 0, imax = Math.min(lines.length, data.size()); i < imax; ++i) {\n            var value = data.get(i);\n            if (value != null) {\n                var line = lines[i];\n                var points = line.points;\n                if (points != null) {\n                    var pointsValues = points.values;\n                    var valueValues = value.values;\n                    var valueValuesLength = valueValues.length;\n                    if (2 <= valueValuesLength) {\n                        var valueTimes = value.times;\n                        var valueTimesLength = valueTimes.length;\n                        if (valueTimesLength < valueValuesLength) {\n                            // Index mode\n                            for (var j = 0; j < valueValuesLength; ++j) {\n                                var index = j << 1;\n                                pointsValues[index + 0] = (j + 1 - xmin) * xratio + lxmin;\n                                pointsValues[index + 1] = lymax - (valueValues[j] - ymin) * yratio;\n                            }\n                        }\n                        else {\n                            // Time mode\n                            for (var j = 0; j < valueValuesLength; ++j) {\n                                var index = j << 1;\n                                pointsValues[index + 0] = (valueTimes[j] - xmin) * xratio + lxmin;\n                                pointsValues[index + 1] = lymax - (valueValues[j] - ymin) * yratio;\n                            }\n                        }\n                        line.lock(EShapeLockPart.UPLOADED);\n                        line.visible = true;\n                        points.values = pointsValues;\n                        line.unlock(EShapeLockPart.UPLOADED, true);\n                    }\n                    else {\n                        line.visible = false;\n                    }\n                }\n            }\n        }\n    };\n    EShapeChartLineActionRuntime.prototype.execute = function (shape, runtime, time) {\n        var data = shape.data;\n        if (data.isChanged) {\n            // Calculate the plot range in the time-value coordinate\n            var xmin = +Infinity;\n            var xmax = -Infinity;\n            var ymin = +Infinity;\n            var ymax = -Infinity;\n            for (var i = 0, imax = data.size(); i < imax; ++i) {\n                var value = data.get(i);\n                if (value != null) {\n                    var values = value.values;\n                    var valuesLength = values.length;\n                    var times = value.times;\n                    var timesLength = times.length;\n                    // X\n                    if (timesLength < valuesLength) {\n                        // Index mode\n                        if (1 < xmin) {\n                            xmin = 1;\n                        }\n                        if (xmax < valuesLength) {\n                            xmax = valuesLength;\n                        }\n                    }\n                    else {\n                        // Time mode\n                        for (var j = 0; j < timesLength; ++j) {\n                            var t = times[j];\n                            if (t < xmin) {\n                                xmin = t;\n                            }\n                            if (xmax < t) {\n                                xmax = t;\n                            }\n                        }\n                    }\n                    // Y\n                    for (var j = 0; j < valuesLength; ++j) {\n                        var v = values[j];\n                        if (v < ymin) {\n                            ymin = v;\n                        }\n                        if (ymax < v) {\n                            ymax = v;\n                        }\n                    }\n                }\n            }\n            if (xmax < xmin) {\n                xmin = 0;\n                xmax = 1;\n            }\n            else if (xmax <= xmin) {\n                xmax = xmin + 1;\n            }\n            if (ymax < ymin) {\n                ymax = 1;\n                ymin = 0;\n            }\n            else if (ymax <= ymin) {\n                ymax = ymin + 1;\n            }\n            var xspan = xmax - xmin;\n            var yspan = ymax - ymin;\n            // Calculate plot range in the local coordinate\n            var plotArea = this.plotArea;\n            var size = plotArea != null ? plotArea.size : shape.size;\n            var sx = size.x * 0.5;\n            var sy = size.y * 0.5;\n            var xpadding = this.xpadding;\n            var ypadding = this.ypadding;\n            var lxmin = -sx + xpadding;\n            var lxmax = +sx - xpadding;\n            var lymin = -sy + ypadding;\n            var lymax = +sy - ypadding;\n            if (lxmax <= lxmin) {\n                lxmax = lxmin + 1;\n            }\n            if (lymax <= lymin) {\n                lymax = lymin + 1;\n            }\n            var lxspan = lxmax - lxmin;\n            var lyspan = lymax - lymin;\n            // x (in the time-value coordinate)\n            // lx (in the local coordinate)\n            // lx = (x - xmin) / (xmax - xmin) * (lxmax - lxmin) + lxmin\n            //    = (x - xmin) * xratio + lxmin\n            // where xratio := (lxmax - lxmin) / (xmax - xmin)\n            //\n            // Please note thay the y coordinate in the local coordinate is upside down.\n            // Namely, ly = lymax - (y - ymin) * yratio.\n            var xratio = lxspan / xspan;\n            var yratio = lyspan / yspan;\n            // X ticks\n            this.updateTicksX(xmin, xmax, xratio, lxmin, lxmax);\n            // Y ticks\n            this.updateTicksY(ymin, ymax, yratio, lymin, lymax);\n            // Lines\n            this.updateLines(data, xmin, xratio, lxmin, ymin, yratio, lymax);\n        }\n    };\n    return EShapeChartLineActionRuntime;\n}(EShapeActionRuntimeBase));\nexport { EShapeChartLineActionRuntime };\n//# sourceMappingURL=e-shape-chart-line-action-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLineActionRuntime } from \"./e-shape-chart-line-action-runtime\";\nvar EShapeChartLineRuntime = /** @class */ (function (_super) {\n    __extends(EShapeChartLineRuntime, _super);\n    function EShapeChartLineRuntime(shape) {\n        var _this = _super.call(this, shape) || this;\n        _this.actions.push(new EShapeChartLineActionRuntime(shape));\n        return _this;\n    }\n    return EShapeChartLineRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeChartLineRuntime };\n//# sourceMappingURL=e-shape-chart-line-runtime.js.map","import { deserializeBase, DThemes, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeChartLine } from \"./e-editor-shape-chart-line\";\nimport { EShapeChartLineRuntime } from \"./e-shape-chart-line-runtime\";\nimport { EShapeChartAxes } from \"./e-shape-chart-axes\";\nvar EShapeChartLines = /** @class */ (function () {\n    function EShapeChartLines() {\n    }\n    EShapeChartLines.getTheme = function () {\n        return DThemes.get(\"EShapeChartLine\");\n    };\n    EShapeChartLines.deserialize = function (item, manager) {\n        var shape = new EShapeChartLine(manager.mode);\n        var index = item[15];\n        var resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            var parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.axis.deserialize(parsed[0], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    EShapeChartLines.create = function (existing) {\n        var result = new EShapeChartLine(EShapeResourceManagerDeserializationMode.EDITOR);\n        if (existing) {\n            result.copy(existing);\n        }\n        // Plot area\n        EShapeChartAxes.newPlotArea(result);\n        // Line\n        EShapeChartAxes.newLine(result);\n        // Axis\n        EShapeChartAxes.newXAxis(result);\n        EShapeChartAxes.newXAxisTickMajor(result);\n        EShapeChartAxes.newYAxis(result);\n        EShapeChartAxes.newYAxisTickMajor(result);\n        if (existing instanceof EShapeChartLine) {\n            result.axis.copy(existing.axis);\n        }\n        return result;\n    };\n    EShapeChartLines.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeChartLineIds.ID,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M23,8c0,1.1-0.9,2-2,2c-0.18,0-0.35-0.02-0.51-0.07l-3.56,\" +\n                    \"3.55C16.98,13.64,17,13.82,17,14c0,1.1-0.9,2-2,2s-2-0.9-2-2 c0-0.1\" +\n                    \"8,0.02-0.36,0.07-0.52l-2.55-2.55C10.36,10.98,10.18,11,10,11c-0.18\" +\n                    \",0-0.36-0.02-0.52-0.07l-4.55,4.56 C4.98,15.65,5,15.82,5,16c0,1.1-\" +\n                    \"0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2c0.18,0,0.35,0.02,0.51,0.07l4.56-4.\" +\n                    \"55C8.02,9.36,8,9.18,8,9 c0-1.1,0.9-2,2-2s2,0.9,2,2c0,0.18-0.02,0.\" +\n                    \"36-0.07,0.52l2.55,2.55C14.64,12.02,14.82,12,15,12c0.18,0,0.36,0.0\" +\n                    \"2,0.52,0.07 l3.55-3.56C19.02,8.35,19,8.18,19,8c0-1.1,0.9-2,2-2S23\" +\n                    \",6.9,23,8z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeChartLines.create(existing); },\n            editor: EEditorShapeChartLine,\n            deserializer: function (item, manager) { return EShapeChartLines.deserialize(item, manager); },\n            runtime: EShapeChartLineRuntime\n        });\n    };\n    return EShapeChartLines;\n}());\nexport { EShapeChartLines };\n//# sourceMappingURL=e-shape-chart-lines.js.map","import { DThemes, EShapeActionValueChangeColor, EShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType, EShapeActionValueMiscInput, EShapeActionValueMiscType, EShapeActionValueOnInputAction, EShapeDefaults, EShapeRectangleRounded } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nvar EShapeInputs = /** @class */ (function () {\n    function EShapeInputs() {\n    }\n    EShapeInputs.getTheme = function () {\n        return DThemes.get(\"EShapeInput\");\n    };\n    EShapeInputs.create = function (existing) {\n        var result = new EShapeRectangleRounded();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            result.stroke.set(true, EShapeDefaults.STROKE_COLOR, 1, 1);\n            result.fill.set(true, 0xffffff, 1);\n            result.text.set(this.getTheme().getLabel());\n            result.cursor = \"text\";\n            result.state.isFocusable = true;\n            result.interactive = true;\n        }\n        result.action.add(new EShapeActionValueMiscInput(EShapeActionValueMiscType.INPUT_TEXT, '\"ALWAYS\"', \"\", EShapeActionValueOnInputAction.EMIT_EVENT));\n        result.action.add(new EShapeActionValueChangeColor(EShapeActionValueChangeColorType.STROKE, \"inFocused\", EShapeActionValueChangeColorTarget.COLOR, EShapeDefaults.HIGHLIGHT_COLOR, 0, \"\"));\n        result.action.add(new EShapeActionValueChangeColor(EShapeActionValueChangeColorType.TEXT, \"inDisabled\", EShapeActionValueChangeColorTarget.ALPHA, 0, 0.5, \"\"));\n        return result;\n    };\n    EShapeInputs.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2\" +\n                    \"-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z\\\"/>\" +\n                    \"<path d=\\\"M5 4v3h5.5v12h3V7H19V4H5z\\\" transform=\\\"translate(7.25,8.5) scale(0.6)\\\" />\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeInputs.create(existing); }\n        });\n    };\n    return EShapeInputs;\n}());\nexport { EShapeInputs };\n//# sourceMappingURL=e-shape-inputs.js.map","var EShapeTableCell = /** @class */ (function () {\n    function EShapeTableCell(parent) {\n        this._parent = parent;\n    }\n    Object.defineProperty(EShapeTableCell.prototype, \"values\", {\n        get: function () {\n            var parent = this._parent;\n            var values = parent.data.values;\n            var columnValues = parent.column.values;\n            var result = [];\n            for (var i = 0, imax = values.length; i < imax; ++i) {\n                var value = values[i];\n                var row = [];\n                for (var j = 0, jmax = columnValues.length; j < jmax; ++j) {\n                    var columnValue = columnValues[j];\n                    var columnValueRuntime = columnValue.runtime;\n                    if (columnValueRuntime != null) {\n                        row.push(columnValueRuntime.toValue(value, j, values));\n                    }\n                }\n                result.push(row);\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return EShapeTableCell;\n}());\nexport { EShapeTableCell };\n//# sourceMappingURL=e-shape-table-cell.js.map","var EShapeTableColumnValueBody = /** @class */ (function () {\n    function EShapeTableColumnValueBody() {\n    }\n    EShapeTableColumnValueBody.prototype.isEquals = function (target) {\n        return true;\n    };\n    EShapeTableColumnValueBody.prototype.serialize = function (manager) {\n        return -1;\n    };\n    EShapeTableColumnValueBody.deserialize = function (target, manager) {\n        return new EShapeTableColumnValueBody();\n    };\n    return EShapeTableColumnValueBody;\n}());\nexport { EShapeTableColumnValueBody };\n//# sourceMappingURL=e-shape-table-column-value-body.js.map","var EShapeTableColumnValueHeader = /** @class */ (function () {\n    function EShapeTableColumnValueHeader(label) {\n        this.label = label;\n    }\n    EShapeTableColumnValueHeader.prototype.isEquals = function (target) {\n        return this.label === target.label;\n    };\n    EShapeTableColumnValueHeader.prototype.serialize = function (manager) {\n        var labelId = manager.addResource(this.label);\n        return manager.addResource(\"[\".concat(labelId, \"]\"));\n    };\n    EShapeTableColumnValueHeader.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeTableColumnValueHeader(resources[parsed[0]]);\n        }\n        return new EShapeTableColumnValueHeader(\"\");\n    };\n    return EShapeTableColumnValueHeader;\n}());\nexport { EShapeTableColumnValueHeader };\n//# sourceMappingURL=e-shape-table-column-value-header.js.map","import { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nexport var EShapeTableColumnValueType = {\n    TEXT: 0,\n    NUMBER: 1\n};\nvar EShapeTableColumnValue = /** @class */ (function () {\n    function EShapeTableColumnValue(weight, type, getter, setter, format, align, header, body) {\n        this.weight = weight;\n        this.type = type;\n        this.getter = getter;\n        this.setter = setter;\n        this.format = format;\n        this.align = align;\n        this.header = header;\n        this.body = body;\n    }\n    EShapeTableColumnValue.prototype.isEquals = function (target) {\n        return (this.weight === target.weight &&\n            this.type === target.type &&\n            this.getter === target.getter &&\n            this.setter === target.setter &&\n            this.format === target.format &&\n            this.align === target.align &&\n            this.header.isEquals(target.header) &&\n            this.body.isEquals(target.body));\n    };\n    EShapeTableColumnValue.prototype.toLabel = function () {\n        return this.header.label;\n    };\n    EShapeTableColumnValue.prototype.serialize = function (manager) {\n        var getterId = manager.addResource(this.getter);\n        var setterId = manager.addResource(this.setter);\n        var formatterId = manager.addResource(this.format);\n        var headerId = this.header.serialize(manager);\n        var bodyId = this.body.serialize(manager);\n        return manager.addResource(\"[\".concat(this.weight, \",\").concat(this.type, \",\").concat(getterId, \",\").concat(setterId, \",\") +\n            \"\".concat(formatterId, \",\").concat(this.align, \",-1,\").concat(headerId, \",\").concat(bodyId, \"]\"));\n    };\n    EShapeTableColumnValue.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeTableColumnValue(parsed[0], parsed[1], resources[parsed[2]], resources[parsed[3]], resources[parsed[4]], parsed[5], EShapeTableColumnValueHeader.deserialize(parsed[7], manager), EShapeTableColumnValueBody.deserialize(parsed[8], manager));\n        }\n        return null;\n    };\n    return EShapeTableColumnValue;\n}());\nexport { EShapeTableColumnValue };\n//# sourceMappingURL=e-shape-table-column-value.js.map","import { EShapeTableColumnValue } from \"./e-shape-table-column-value\";\nvar EShapeTableColumn = /** @class */ (function () {\n    function EShapeTableColumn(onChange) {\n        this.values = [];\n        this._sizeX = 1;\n        this._onChange = onChange;\n    }\n    EShapeTableColumn.prototype.add = function (value, at) {\n        if (at != null) {\n            this.values.splice(at, 0, value);\n        }\n        else {\n            this.values.push(value);\n        }\n        this._onChange();\n    };\n    EShapeTableColumn.prototype.remove = function (index) {\n        var values = this.values;\n        if (0 <= index && index < values.length) {\n            var result = values.splice(index, 1)[0];\n            this._onChange();\n            return result;\n        }\n        return null;\n    };\n    EShapeTableColumn.prototype.indexOf = function (target) {\n        var values = this.values;\n        // Instance-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value === target) {\n                return i;\n            }\n        }\n        // Data-based matching\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            if (value.isEquals(target)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    EShapeTableColumn.prototype.get = function (index) {\n        var result = this.values[index];\n        if (result != null) {\n            return result;\n        }\n        return null;\n    };\n    EShapeTableColumn.prototype.set = function (index, value) {\n        this.values[index] = value;\n        this._onChange();\n    };\n    EShapeTableColumn.prototype.swap = function (indexA, indexB) {\n        var values = this.values;\n        var tmp = values[indexB];\n        values[indexB] = values[indexA];\n        values[indexA] = tmp;\n        this._onChange();\n    };\n    EShapeTableColumn.prototype.size = function () {\n        return this.values.length;\n    };\n    EShapeTableColumn.prototype.copy = function (source) {\n        // Values\n        var values = this.values;\n        var sourceValues = source.values;\n        var sourceValuesLength = sourceValues.length;\n        for (var i = 0; i < sourceValuesLength; ++i) {\n            values.push(sourceValues[i]);\n        }\n        if (values.length !== sourceValuesLength) {\n            values.length = sourceValuesLength;\n        }\n        //\n        this._sizeX = source._sizeX;\n        this._onChange();\n        return this;\n    };\n    EShapeTableColumn.prototype.serialize = function (manager) {\n        var serialized = \"\";\n        var delimiter = \"[\";\n        var values = this.values;\n        for (var i = 0, imax = values.length; i < imax; ++i) {\n            var value = values[i];\n            serialized += delimiter + value.serialize(manager);\n            delimiter = \",\";\n        }\n        serialized += \"]\";\n        return manager.addResource(serialized);\n    };\n    EShapeTableColumn.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var isChanged = false;\n            var values = this.values;\n            if (0 < values.length) {\n                values.length = 0;\n                isChanged = true;\n            }\n            for (var i = 0, imax = parsed.length; i < imax; ++i) {\n                var value = EShapeTableColumnValue.deserialize(parsed[i], manager);\n                if (value != null) {\n                    values.push(value);\n                }\n            }\n            if (0 < values.length) {\n                isChanged = true;\n            }\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    };\n    return EShapeTableColumn;\n}());\nexport { EShapeTableColumn };\n//# sourceMappingURL=e-shape-table-column.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nvar EShapeTableIds = /** @class */ (function () {\n    function EShapeTableIds() {\n    }\n    EShapeTableIds.ID = EShapeType.EXTENSION + 100;\n    EShapeTableIds.HEADER_ID = EShapeType.EXTENSION + 101;\n    EShapeTableIds.BODY_ID = EShapeType.EXTENSION + 102;\n    return EShapeTableIds;\n}());\nexport { EShapeTableIds };\n//# sourceMappingURL=e-shape-table-ids.js.map","import { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nexport var EShapeTableRowSelectionType = {\n    NONE: 0,\n    SINGLE: 1,\n    MULTIPLE: 2\n};\nvar EShapeTableRowSelection = /** @class */ (function () {\n    function EShapeTableRowSelection(parent) {\n        this.parent = parent;\n        this.type = EShapeTableRowSelectionType.NONE;\n        this.indices = [];\n        this.body = null;\n    }\n    Object.defineProperty(EShapeTableRowSelection.prototype, \"values\", {\n        get: function () {\n            var indices = this.indices;\n            var values = this.parent.data.values;\n            var result = (this._values = this._values || []);\n            if (values != null) {\n                result.length = 0;\n                for (var i = 0, imax = indices.length; i < imax; ++i) {\n                    var index = indices[i];\n                    if (0 <= index && index < values.length) {\n                        result.push(values[index]);\n                    }\n                }\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeTableRowSelection.prototype.size = function () {\n        return this.indices.length;\n    };\n    EShapeTableRowSelection.prototype.isEmpty = function () {\n        return this.indices.length <= 0;\n    };\n    EShapeTableRowSelection.prototype.toggle = function (index) {\n        var indices = this.indices;\n        var indexIndex = indices.indexOf(index);\n        if (indexIndex < 0) {\n            indices.push(index);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, true);\n            }\n        }\n        else {\n            indices.splice(indexIndex, 1);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, false);\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.add = function (index) {\n        var indices = this.indices;\n        var indexIndex = indices.indexOf(index);\n        if (indexIndex < 0) {\n            indices.push(index);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, true);\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.addTo = function (index) {\n        var indices = this.indices;\n        var lastIndex = indices[indices.length - 1];\n        if (lastIndex < index) {\n            var body = this.getBody();\n            for (var i = lastIndex + 1; i <= index; ++i) {\n                if (indices.indexOf(i) < 0) {\n                    indices.push(i);\n                    if (body != null) {\n                        this.setRowActive(body, i, true);\n                    }\n                }\n            }\n        }\n        else if (index < lastIndex) {\n            var body = this.getBody();\n            for (var i = lastIndex - 1; index <= i; --i) {\n                if (indices.indexOf(i) < 0) {\n                    indices.push(i);\n                    if (body != null) {\n                        this.setRowActive(body, i, true);\n                    }\n                }\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.remove = function (index) {\n        var indices = this.indices;\n        var indexIndex = indices.indexOf(index);\n        if (0 <= indexIndex) {\n            indices.splice(indexIndex, 1);\n            var body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, false);\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.clear = function () {\n        var indices = this.indices;\n        var body = this.getBody();\n        if (body != null) {\n            for (var i = 0, imax = indices.length; i < imax; ++i) {\n                this.setRowActive(body, indices[i], false);\n            }\n        }\n        indices.length = 0;\n    };\n    EShapeTableRowSelection.prototype.clearAndAdd = function (index) {\n        var indices = this.indices;\n        var body = this.getBody();\n        if (body != null) {\n            for (var i = 0, imax = indices.length; i < imax; ++i) {\n                var target = indices[i];\n                if (target !== index) {\n                    this.setRowActive(body, target, false);\n                }\n            }\n            this.setRowActive(body, index, true);\n        }\n        indices.length = 0;\n        indices.push(index);\n    };\n    EShapeTableRowSelection.prototype.getBody = function () {\n        var body = this.body;\n        if (body != null) {\n            return body;\n        }\n        return (this.body = UtilShapeSearch.findChildByType(this.parent, EShapeTableIds.BODY_ID));\n    };\n    EShapeTableRowSelection.prototype.getRow = function (body, index) {\n        var rows = body.children;\n        if (0 <= index && index < rows.length) {\n            return rows[index];\n        }\n        return null;\n    };\n    EShapeTableRowSelection.prototype.setRowActive = function (body, index, isActive) {\n        var row = this.getRow(body, index);\n        if (row != null) {\n            var cells = row.children;\n            for (var i = 0, imax = cells.length; i < imax; ++i) {\n                cells[i].state.isActive = isActive;\n            }\n        }\n    };\n    EShapeTableRowSelection.prototype.serialize = function (manager) {\n        return manager.addResource(\"[\".concat(this.type, \"]\"));\n    };\n    EShapeTableRowSelection.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var type = parsed[0];\n            if (this.type !== type) {\n                this.type = type;\n            }\n        }\n    };\n    return EShapeTableRowSelection;\n}());\nexport { EShapeTableRowSelection };\n//# sourceMappingURL=e-shape-table-row-selection.js.map","import { EShapeTableRowSelection } from \"./e-shape-table-row-selection\";\nvar EShapeTableRow = /** @class */ (function () {\n    function EShapeTableRow(parent, onChange) {\n        this._height = 40;\n        this._onChange = onChange;\n        this._isCellUpdateAllowed = true;\n        this._isCellUpdateCalled = false;\n        this.selection = new EShapeTableRowSelection(parent);\n    }\n    EShapeTableRow.prototype.toDirty = function () {\n        this.updateCells();\n    };\n    EShapeTableRow.prototype.disallowCellUpdate = function () {\n        this._isCellUpdateAllowed = false;\n        this._isCellUpdateCalled = false;\n    };\n    EShapeTableRow.prototype.allowCellUpdate = function (invoke) {\n        this._isCellUpdateAllowed = true;\n        var isCellUpdatedCalled = this._isCellUpdateCalled;\n        if (invoke && isCellUpdatedCalled) {\n            this.updateCells();\n        }\n    };\n    EShapeTableRow.prototype.updateCells = function () {\n        if (this._isCellUpdateAllowed) {\n            this._onChange();\n        }\n        else {\n            this._isCellUpdateCalled = true;\n        }\n    };\n    Object.defineProperty(EShapeTableRow.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (height) {\n            height = Math.max(5, height);\n            if (this._height !== height) {\n                this._height = height;\n                this.updateCells();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EShapeTableRow.prototype.copy = function (source) {\n        this.disallowCellUpdate();\n        this._height = source._height;\n        this.allowCellUpdate(false);\n        this.updateCells();\n        return this;\n    };\n    EShapeTableRow.prototype.serialize = function (manager) {\n        var selectionId = this.selection.serialize(manager);\n        return manager.addResource(\"[\".concat(this._height, \",\").concat(selectionId, \"]\"));\n    };\n    EShapeTableRow.prototype.deserialize = function (target, manager) {\n        var resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            var parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            var isChanged = false;\n            var height = parsed[0];\n            if (this._height !== height) {\n                this._height = height;\n                isChanged = true;\n            }\n            this.selection.deserialize(parsed[1], manager);\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    };\n    return EShapeTableRow;\n}());\nexport { EShapeTableRow };\n//# sourceMappingURL=e-shape-table-row.js.map","import { __extends } from \"tslib\";\nimport { EShapeCopyPart, EShapeGroupShadowed, EShapeLockPart, EShapeRectangle } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableCell } from \"./e-shape-table-cell\";\nimport { EShapeTableColumn } from \"./e-shape-table-column\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { EShapeTableRow } from \"./e-shape-table-row\";\nvar EShapeTable = /** @class */ (function (_super) {\n    __extends(EShapeTable, _super);\n    function EShapeTable(mode, type) {\n        if (type === void 0) { type = EShapeTableIds.ID; }\n        var _this = _super.call(this, mode, type) || this;\n        _this._columnWidths = [];\n        _this._columnXs = [];\n        _this.column = new EShapeTableColumn(function () {\n            _this.onColumnChange();\n        });\n        _this.row = new EShapeTableRow(_this, function () {\n            _this.onRowChange();\n        });\n        _this.cell = new EShapeTableCell(_this);\n        return _this;\n    }\n    EShapeTable.prototype.onColumnChange = function () {\n        this.newCellsHeader();\n        this.newCellsBody(true);\n        this.layoutCells();\n    };\n    EShapeTable.prototype.onRowChange = function () {\n        this.newCellsBody(false);\n        this.layoutCells();\n    };\n    EShapeTable.prototype.onSizeChange = function () {\n        _super.prototype.onSizeChange.call(this);\n        this.newCellsBody(false);\n        this.layoutCells();\n    };\n    EShapeTable.prototype.newCellsHeader = function () {\n        if (this.children.length <= 0) {\n            return;\n        }\n        var header = this.children[0];\n        var column = this.column;\n        var columnCount = column.size();\n        var values = column.values;\n        // Create / delete children\n        var children = header.children;\n        var childrenLength = children.length;\n        if (childrenLength < columnCount) {\n            var master = children[childrenLength - 1] || this;\n            for (var i = childrenLength; i < columnCount; ++i) {\n                var cell = new EShapeRectangle().copy(master);\n                cell.text.value = values[i].header.label;\n                cell.attach(header);\n            }\n        }\n        else if (columnCount < childrenLength) {\n            for (var i = childrenLength - 1; columnCount <= i; --i) {\n                children[i].detach();\n            }\n        }\n        // Update text\n        for (var i = 0; i < columnCount; ++i) {\n            children[i].text.value = values[i].header.label;\n        }\n    };\n    EShapeTable.prototype.toRowCountRequired = function () {\n        return Math.min(1000, Math.max(1, Math.floor(Math.abs(this.size.y) / this.row.height))) - 1;\n    };\n    EShapeTable.prototype.newCellsBody = function (isColumnDirty) {\n        // Rows\n        if (this.children.length <= 1) {\n            return;\n        }\n        var body = this.children[1];\n        var rows = body.children;\n        var rowsLength = rows.length;\n        var rowCountRequired = this.toRowCountRequired();\n        var rowCount = Math.max(2, rowCountRequired);\n        if (rowsLength < rowCount) {\n            var masterEven = (0 < rowsLength ? rows[0] : null) || this;\n            var masterOdd = (1 < rowsLength ? rows[1] : null) || this;\n            var mode = this.mode;\n            for (var irow = rowsLength; irow < rowCount; ++irow) {\n                var master = irow % 2 === 0 ? masterEven : masterOdd;\n                new EShapeGroupShadowed(mode).copy(master, EShapeCopyPart.ACTION).attach(body);\n            }\n        }\n        else if (rowCount < rowsLength) {\n            for (var i = rowsLength - 1; rowCount <= i; --i) {\n                rows[i].detach();\n            }\n        }\n        if (0 < rows.length) {\n            rows[0].visible = 0 < rowCountRequired;\n        }\n        if (1 < rows.length) {\n            rows[1].visible = 1 < rowCountRequired;\n        }\n        // Cells\n        var masterCellEven = (0 < rows.length ? rows[0].children[0] : null) || this;\n        var masterCellOdd = (1 < rows.length ? rows[1].children[0] : null) || this;\n        var column = this.column;\n        var columnValues = column.values;\n        var columnCount = column.size();\n        for (var irow = 0; irow < rowCount; ++irow) {\n            var columnCountRequired = irow <= 1 ? Math.max(1, columnCount) : columnCount;\n            var row = rows[irow];\n            var cells = row.children;\n            var cellsLength = cells.length;\n            var master = irow % 2 === 0 ? masterCellEven : masterCellOdd;\n            if (cellsLength < columnCountRequired) {\n                for (var icolumn = cellsLength; icolumn < columnCountRequired; ++icolumn) {\n                    new EShapeRectangle().copy(master).attach(row);\n                }\n            }\n            else if (columnCountRequired < cellsLength) {\n                for (var i = cellsLength - 1; columnCountRequired <= i; --i) {\n                    cells[i].detach();\n                }\n            }\n            if (0 < cells.length) {\n                cells[0].visible = 0 < columnCount;\n            }\n            if (1 < cells.length) {\n                cells[1].visible = 1 < columnCount;\n            }\n            if (isColumnDirty) {\n                for (var i = 0; i < columnCount; ++i) {\n                    cells[i].text.align.horizontal = columnValues[i].align;\n                }\n            }\n        }\n    };\n    EShapeTable.prototype.layoutCells = function () {\n        if (this.children.length <= 1) {\n            return;\n        }\n        var rowHeight = this.row.height;\n        var rowHeightHalf = rowHeight * 0.5;\n        var column = this.column;\n        var size = this.size;\n        var sizeX = size.x;\n        var sizeY = size.y;\n        var sxh = -sizeX * 0.5;\n        var syh = -sizeY * 0.5;\n        var columnValues = column.values;\n        var columnValuesLength = columnValues.length;\n        // Total weight\n        var totalWeight = 0;\n        for (var i = 0; i < columnValuesLength; ++i) {\n            totalWeight += columnValues[i].weight;\n        }\n        totalWeight = Math.max(0.00001, totalWeight);\n        // Column width and x position\n        var columnWidths = this._columnWidths;\n        var columnXs = this._columnXs;\n        var columnWidthFactor = sizeX / totalWeight;\n        var columnX = 0;\n        for (var i = 0; i < columnValuesLength; ++i) {\n            var columnWidth = columnValues[i].weight * columnWidthFactor;\n            columnWidths[i] = columnWidth;\n            columnXs[i] = columnX + columnWidth * 0.5;\n            columnX += columnWidth;\n        }\n        // Header\n        var header = this.children[0];\n        header.lock(EShapeLockPart.ALL);\n        header.size.set(sizeX, rowHeight);\n        header.transform.position.set(0, syh + rowHeightHalf);\n        header.unlock(EShapeLockPart.ALL, true);\n        var hcells = header.children;\n        var hcellsLength = hcells.length;\n        for (var icolumn = 0; icolumn < hcellsLength; ++icolumn) {\n            var hcell = hcells[icolumn];\n            hcell.lock(EShapeLockPart.ALL);\n            hcell.size.set(columnWidths[icolumn], rowHeight);\n            hcell.transform.position.set(sxh + columnXs[icolumn], 0);\n            hcell.unlock(EShapeLockPart.ALL, true);\n        }\n        // Body\n        var body = this.children[1];\n        body.lock(EShapeLockPart.ALL);\n        body.size.set(sizeX, sizeY - rowHeight);\n        body.transform.position.set(0, rowHeightHalf);\n        body.unlock(EShapeLockPart.ALL, true);\n        var rows = body.children;\n        var rowsLength = rows.length;\n        for (var irow = 0, y = syh + rowHeight; irow < rowsLength; ++irow, y += rowHeight) {\n            var row = rows[irow];\n            row.lock(EShapeLockPart.ALL);\n            row.size.set(sizeX, rowHeight);\n            row.transform.position.set(0, y);\n            row.unlock(EShapeLockPart.ALL, true);\n            var cells = row.children;\n            var cellsLength = cells.length;\n            for (var icolumn = 0; icolumn < cellsLength; ++icolumn) {\n                var cell = cells[icolumn];\n                cell.lock(EShapeLockPart.ALL);\n                cell.size.set(columnWidths[icolumn], rowHeight);\n                cell.transform.position.set(sxh + columnXs[icolumn], 0);\n                cell.unlock(EShapeLockPart.ALL, true);\n            }\n        }\n    };\n    EShapeTable.prototype.copy = function (source, part) {\n        if (part === void 0) { part = EShapeCopyPart.ALL; }\n        var result = _super.prototype.copy.call(this, source, part);\n        if (source instanceof EShapeTable) {\n            this.column.copy(source.column);\n            this.row.copy(source.row);\n        }\n        return result;\n    };\n    EShapeTable.prototype.serialize = function (manager) {\n        var result = _super.prototype.serialize.call(this, manager);\n        var resource = result[15];\n        result[15] = manager.addResource(\"[\".concat(this.column.serialize(manager), \",\").concat(this.row.serialize(manager), \",\").concat(resource, \"]\"));\n        return result;\n    };\n    return EShapeTable;\n}(EShapeGroupShadowed));\nexport { EShapeTable };\n//# sourceMappingURL=e-shape-table.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueAdd = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueAdd, _super);\n    function ECommandShapeTableColumnValueAdd(value, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._value = value;\n        return _this;\n    }\n    ECommandShapeTableColumnValueAdd.prototype.execute = function () {\n        return this.redo();\n    };\n    ECommandShapeTableColumnValueAdd.prototype.redo = function () {\n        var value = this._value;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                shape.column.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueAdd.prototype.undo = function () {\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                shape.column.remove(shape.column.size() - 1);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeTableColumnValueAdd;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueAdd };\n//# sourceMappingURL=e-command-shape-table-column-value-add.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueBringForward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueBringForward, _super);\n    function ECommandShapeTableColumnValueBringForward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = shape.column.indexOf(target);\n                indices.push(index);\n                if (0 < index) {\n                    shape.column.swap(index - 1, index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueBringForward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueBringForward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 < index) {\n                    shape.column.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueBringForward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableColumnValueBringForward;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueBringForward };\n//# sourceMappingURL=e-command-shape-table-column-value-bring-forward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueRemove = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueRemove, _super);\n    function ECommandShapeTableColumnValueRemove(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = shape.column.indexOf(target);\n                indices.push(index);\n                if (0 <= index) {\n                    shape.column.remove(index);\n                }\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueRemove.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueRemove.prototype.redo = function () {\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueRemove.prototype.undo = function () {\n        var target = this._target;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeTableColumnValueRemove;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueRemove };\n//# sourceMappingURL=e-command-shape-table-column-value-remove.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueReplace = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueReplace, _super);\n    function ECommandShapeTableColumnValueReplace(oldValue, newValue, selection, list) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._oldValue = oldValue;\n        _this._newValue = newValue;\n        _this._list = list;\n        var indices = [];\n        var oldValues = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = shape.column.indexOf(oldValue);\n                indices.push(index);\n                if (0 <= index) {\n                    oldValues.push(shape.column.get(index));\n                    shape.column.set(index, newValue);\n                }\n                else {\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        _this._indices = indices;\n        _this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueReplace.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueReplace.prototype.redo = function () {\n        var newValue = this._newValue;\n        var indices = this._indices;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.set(index, newValue);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueReplace.prototype.undo = function () {\n        var indices = this._indices;\n        var oldValues = this._oldValues;\n        var shapes = this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var index = indices[i];\n                if (0 <= index) {\n                    shape.column.set(index, oldValues[i]);\n                }\n            }\n        }\n        var list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    return ECommandShapeTableColumnValueReplace;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueReplace };\n//# sourceMappingURL=e-command-shape-table-column-value-replace.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableColumnValueSendBackward = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableColumnValueSendBackward, _super);\n    function ECommandShapeTableColumnValueSendBackward(target, selection) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._target = target;\n        var indices = [];\n        var shapes = _this._selection.get();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var column = shape.column;\n                var index = column.indexOf(target);\n                indices.push(index);\n                if (0 <= index && index < column.size() - 1) {\n                    column.swap(index + 1, index);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        _this._indices = indices;\n        _this._selection.update(\"PROPERTY\");\n        return _this;\n    }\n    ECommandShapeTableColumnValueSendBackward.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableColumnValueSendBackward.prototype.redo = function () {\n        var shapes = this._selection.get();\n        var indices = this._indices;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var column = shape.column;\n                var index = indices[i];\n                if (0 <= index && index < column.size() - 1) {\n                    column.swap(index + 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableColumnValueSendBackward.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableColumnValueSendBackward;\n}(DCommandBase));\nexport { ECommandShapeTableColumnValueSendBackward };\n//# sourceMappingURL=e-command-shape-table-column-value-send-backward.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nvar ECommandShapeTableRowHeight = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableRowHeight, _super);\n    function ECommandShapeTableRowHeight(value, selection) {\n        var _this = _super.call(this) || this;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                values.push(shape.row.height);\n                shape.row.height = value;\n            }\n            else {\n                values.push(35);\n            }\n        }\n        _this._values = values;\n        _this._selection = selection;\n        return _this;\n    }\n    ECommandShapeTableRowHeight.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableRowHeight.prototype.redo = function () {\n        var selection = this._selection;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var value = values[i];\n                values[i] = shape.row.height;\n                shape.row.height = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableRowHeight.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableRowHeight;\n}(DCommandBase));\nexport { ECommandShapeTableRowHeight };\n//# sourceMappingURL=e-command-shape-table-row-height.js.map","import { __extends } from \"tslib\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nvar ECommandShapeTableRowSelectionType = /** @class */ (function (_super) {\n    __extends(ECommandShapeTableRowSelectionType, _super);\n    function ECommandShapeTableRowSelectionType(value, selection) {\n        var _this = _super.call(this) || this;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                values.push(shape.row.selection.type);\n                shape.row.selection.type = value;\n            }\n            else {\n                values.push(EShapeTableRowSelectionType.NONE);\n            }\n        }\n        _this._values = values;\n        _this._selection = selection;\n        return _this;\n    }\n    ECommandShapeTableRowSelectionType.prototype.execute = function () {\n        return true;\n    };\n    ECommandShapeTableRowSelectionType.prototype.redo = function () {\n        var selection = this._selection;\n        var shapes = selection.get();\n        var values = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                var value = values[i];\n                values[i] = shape.row.selection.type;\n                shape.row.selection.type = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    };\n    ECommandShapeTableRowSelectionType.prototype.undo = function () {\n        return this.redo();\n    };\n    return ECommandShapeTableRowSelectionType;\n}(DCommandBase));\nexport { ECommandShapeTableRowSelectionType };\n//# sourceMappingURL=e-command-shape-table-row-selection-type.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputLabel, DInputReal, DInputText, DLayoutHorizontal, DLayoutSpace, DSelect, EShapeTextAlignHorizontal } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableColumnValue, EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nimport { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nvar EDialogTableColumn = /** @class */ (function (_super) {\n    __extends(EDialogTableColumn, _super);\n    function EDialogTableColumn() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogTableColumn.prototype.newContentChildren = function (theme, options) {\n        var _this = this;\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        // Type\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectColumnValueTypeLabel()\n                    }\n                }),\n                new DSelect({\n                    weight: 1,\n                    value: EShapeTableColumnValueType.TEXT,\n                    menu: {\n                        items: [\n                            {\n                                value: EShapeTableColumnValueType.TEXT,\n                                text: {\n                                    value: theme.toSelectColumnValueTypeLabel(EShapeTableColumnValueType.TEXT)\n                                }\n                            },\n                            {\n                                value: EShapeTableColumnValueType.NUMBER,\n                                text: {\n                                    value: theme.toSelectColumnValueTypeLabel(EShapeTableColumnValueType.NUMBER)\n                                }\n                            }\n                        ]\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._selectType = self;\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Label\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputLabelLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputLabel = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Width Weight\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputWidthLabel()\n                    }\n                }),\n                new DInputReal({\n                    weight: 1,\n                    text: {\n                        value: 0\n                    },\n                    min: 0,\n                    on: {\n                        init: function (self) {\n                            _this._inputWidth = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Getter / setter\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputGetterLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputGetter = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputSetterLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputSetter = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Format\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputFormatLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._inputFormat = self;\n                        },\n                        enter: function () {\n                            _this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Align\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectTextAlignLabel()\n                    }\n                }),\n                new DSelect({\n                    weight: 1,\n                    value: EShapeTextAlignHorizontal.CENTER,\n                    menu: {\n                        items: [\n                            {\n                                value: EShapeTextAlignHorizontal.LEFT,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.LEFT)\n                                }\n                            },\n                            {\n                                value: EShapeTextAlignHorizontal.CENTER,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.CENTER)\n                                }\n                            },\n                            {\n                                value: EShapeTextAlignHorizontal.RIGHT,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.RIGHT)\n                                }\n                            }\n                        ]\n                    },\n                    on: {\n                        init: function (self) {\n                            _this._selectAlign = self;\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        return result;\n    };\n    EDialogTableColumn.prototype.reset = function () {\n        this._selectType.value = EShapeTableColumnValueType.TEXT;\n        this._inputLabel.value = this.theme.newInputLabel();\n        this._inputWidth.value = 1;\n        this._inputGetter.value = \"\";\n        this._inputSetter.value = \"\";\n        this._inputFormat.value = \"\";\n        this._selectAlign.value = EShapeTextAlignHorizontal.CENTER;\n        return this;\n    };\n    Object.defineProperty(EDialogTableColumn.prototype, \"value\", {\n        get: function () {\n            return new EShapeTableColumnValue(this._inputWidth.value, this._selectType.value || EShapeTableColumnValueType.TEXT, this._inputGetter.value, this._inputSetter.value, this._inputFormat.value, this._selectAlign.value || EShapeTextAlignHorizontal.LEFT, new EShapeTableColumnValueHeader(this._inputLabel.value), new EShapeTableColumnValueBody());\n        },\n        set: function (value) {\n            if (value != null) {\n                this._selectType.value = value.type;\n                this._inputLabel.value = value.header.label;\n                this._inputWidth.value = value.weight;\n                this._inputGetter.value = value.getter;\n                this._inputSetter.value = value.setter;\n                this._inputFormat.value = value.format;\n                this._selectAlign.value = value.align;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogTableColumn.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogTableColumn.prototype.getType = function () {\n        return \"EDialogShapeTableColumn\";\n    };\n    return EDialogTableColumn;\n}(DDialogLayered));\nexport { EDialogTableColumn };\n//# sourceMappingURL=e-dialog-shape-table-column.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DInputReal, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DPane, DSelect, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeTableColumnValueAdd } from \"./e-command-shape-table-column-value-add\";\nimport { ECommandShapeTableColumnValueBringForward } from \"./e-command-shape-table-column-value-bring-forward\";\nimport { ECommandShapeTableColumnValueRemove } from \"./e-command-shape-table-column-value-remove\";\nimport { ECommandShapeTableColumnValueReplace } from \"./e-command-shape-table-column-value-replace\";\nimport { ECommandShapeTableColumnValueSendBackward } from \"./e-command-shape-table-column-value-send-backward\";\nimport { ECommandShapeTableRowHeight } from \"./e-command-shape-table-row-height\";\nimport { ECommandShapeTableRowSelectionType } from \"./e-command-shape-table-row-selection-type\";\nimport { EDialogTableColumn } from \"./e-dialog-shape-table-column\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nvar EEditorShapeTable = /** @class */ (function (_super) {\n    __extends(EEditorShapeTable, _super);\n    function EEditorShapeTable(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", function () {\n            _this.state.isDisabled = selection.isEmpty();\n        });\n        _this.content.setHeight(\"padding\");\n        new DLayoutVertical({\n            parent: _this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        _this.newTextLabel(),\n                        _this.buttonNew,\n                        _this.buttonDelete,\n                        _this.buttonBringForward,\n                        _this.buttonSendBackward\n                    ]\n                }),\n                _this.columnList,\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: _this.subtheme.getInputRowHeightLabel()\n                    }\n                }),\n                _this.inputRowHeight,\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: _this.subtheme.getSelectRowSelectionTypeLabel()\n                    }\n                }),\n                _this.selectRowSelectionType\n            ]\n        });\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var columnList = _this.columnList;\n        columnList.data.selection.on(\"change\", function () {\n            _this.onListSelectionChange(columnList);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorShapeTable.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonNew\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.subtheme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.columnDialog\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandShapeTableColumnValueAdd(value, _this._selection));\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onSelectionChangeButtonNew = function (selection) {\n        var buttonNew = this.buttonNew;\n        if (selection.last() instanceof EShapeTable) {\n            buttonNew.state.isDisabled = false;\n        }\n        else {\n            buttonNew.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.subtheme.getButtonDeleteTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.data.selection.first;\n                    if (first != null && 1 < columnList.data.size()) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueRemove(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onListSelectionChangeButtonDelete = function (columnList) {\n        this.buttonDelete.state.isDisabled =\n            columnList.data.size() <= 1 || columnList.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.subtheme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    if (first != null && columnList.data.items[0] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueBringForward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onListSelectionChangeButtonBringForward = function (columnList) {\n        var first = columnList.data.selection.first;\n        var items = columnList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.subtheme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    var columnList = _this.columnList;\n                    var first = columnList.selection.first;\n                    var items = columnList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueSendBackward(first, _this._selection));\n                    }\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onListSelectionChangeButtonSendBackward = function (columnList) {\n        var first = columnList.selection.first;\n        var items = columnList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"columnDialog\", {\n        get: function () {\n            var _a;\n            return ((_a = this._columnDialog) !== null && _a !== void 0 ? _a : (this._columnDialog = this.newColumnDialog()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newColumnDialog = function () {\n        return new EDialogTableColumn();\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"columnList\", {\n        get: function () {\n            var _a;\n            return ((_a = this._columnList) !== null && _a !== void 0 ? _a : (this._columnList = this.newColumnList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newColumnList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"100%\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return value.toLabel();\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onColumnListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorShapeTable.prototype.onColumnListDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var columnDialog_1 = this.columnDialog;\n            columnDialog_1.value = oldValue;\n            columnDialog_1.open(item).then(function () {\n                var newValue = columnDialog_1.value;\n                if (newValue != null) {\n                    DControllers.getCommandController().push(new ECommandShapeTableColumnValueReplace(oldValue, newValue, _this._selection, list));\n                }\n            });\n        }\n    };\n    EEditorShapeTable.prototype.onSelectionChangeColumnList = function (selection) {\n        var last = selection.last();\n        var columnList = this.columnList;\n        columnList.data.items = last instanceof EShapeTable ? last.column.values : [];\n        this.onListSelectionChange(columnList);\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"inputRowHeight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputRowHeight) !== null && _a !== void 0 ? _a : (this._inputRowHeight = this.newInputRowHeight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newInputRowHeight = function () {\n        var _this = this;\n        return new DInputReal({\n            width: \"100%\",\n            min: 5,\n            step: 1,\n            on: {\n                change: function (value) {\n                    DControllers.getCommandController().push(new ECommandShapeTableRowHeight(value, _this._selection));\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onSelectionChangeInputRowHeight = function (selection) {\n        var last = selection.last();\n        var input = this.inputRowHeight;\n        if (last instanceof EShapeTable) {\n            input.value = last.row.height;\n            input.state.isDisabled = false;\n        }\n        else {\n            input.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"selectRowSelectionType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectRowSelectionType) !== null && _a !== void 0 ? _a : (this._selectRowSelectionType = this.newSelectRowSelectionType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newSelectRowSelectionType = function () {\n        var _this = this;\n        var subtheme = this.subtheme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapeTableRowSelectionType.SINGLE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeTableRowSelectionType.NONE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeTableRowSelectionType.SINGLE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.SINGLE)\n                        }\n                    },\n                    {\n                        value: EShapeTableRowSelectionType.MULTIPLE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.MULTIPLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    if (value == null) {\n                        value = EShapeTableRowSelectionType.SINGLE;\n                    }\n                    DControllers.getCommandController().push(new ECommandShapeTableRowSelectionType(value, _this._selection));\n                }\n            }\n        });\n    };\n    EEditorShapeTable.prototype.onSelectionChangeSelectRowSelectionType = function (selection) {\n        var last = selection.last();\n        var select = this.selectRowSelectionType;\n        if (last instanceof EShapeTable) {\n            select.value = last.row.selection.type;\n            select.state.isDisabled = false;\n        }\n        else {\n            select.state.isDisabled = true;\n        }\n    };\n    EEditorShapeTable.prototype.onSelectionChange = function (selection) {\n        this.onSelectionChangeButtonNew(selection);\n        this.onSelectionChangeColumnList(selection);\n        this.onSelectionChangeInputRowHeight(selection);\n        this.onSelectionChangeSelectRowSelectionType(selection);\n    };\n    EEditorShapeTable.prototype.onListSelectionChange = function (columnList) {\n        this.onListSelectionChangeButtonDelete(columnList);\n        this.onListSelectionChangeButtonBringForward(columnList);\n        this.onListSelectionChangeButtonSendBackward(columnList);\n    };\n    Object.defineProperty(EEditorShapeTable.prototype, \"subtheme\", {\n        get: function () {\n            var _a;\n            return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShapeTable.prototype.newSubtheme = function () {\n        return DThemes.get(\"EEditorShapeTable\");\n    };\n    return EEditorShapeTable;\n}(DPane));\nexport { EEditorShapeTable };\n//# sourceMappingURL=e-editor-shape-table.js.map","import { __extends } from \"tslib\";\nimport { EShapeActionRuntimeBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nvar EShapeTableActionRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableActionRuntime, _super);\n    function EShapeTableActionRuntime(table) {\n        var _this = _super.call(this) || this;\n        _this.body = UtilShapeSearch.findChildByType(table, EShapeTableIds.BODY_ID);\n        _this.column = table.column;\n        return _this;\n    }\n    EShapeTableActionRuntime.prototype.execute = function (shape, runtime, time) {\n        var body = this.body;\n        var column = this.column;\n        if (body != null && column != null) {\n            var data = shape.data;\n            if (data.isChanged) {\n                var rows = body.children;\n                var rowsLength = rows.length;\n                var first = data.get(0);\n                if (first != null) {\n                    var columnValues = column.values;\n                    var values = first.values;\n                    var valuesLength = values.length;\n                    var imin = Math.min(rowsLength, valuesLength);\n                    for (var i = 0; i < imin; ++i) {\n                        var value = values[i];\n                        var row = rows[i];\n                        var cells = row.children;\n                        var cellsLength = cells.length;\n                        var jmin = Math.min(cellsLength, columnValues.length);\n                        for (var j = 0; j < jmin; ++j) {\n                            var cell = cells[j];\n                            var columnValue = columnValues[j];\n                            var columnRuntime = columnValue.runtime;\n                            if (columnRuntime != null) {\n                                cell.state.isFocusable = true;\n                                cell.text.value = columnRuntime.formatter(columnRuntime.toValue(value, j, values), j);\n                            }\n                        }\n                        for (var j = jmin; j < cellsLength; ++j) {\n                            var cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                    for (var i = imin; i < rowsLength; ++i) {\n                        var row = rows[i];\n                        var cells = row.children;\n                        var cellsLength = cells.length;\n                        for (var j = 0; j < cellsLength; ++j) {\n                            var cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                }\n                else {\n                    for (var i = 0; i < rowsLength; ++i) {\n                        var row = rows[i];\n                        var cells = row.children;\n                        var cellsLength = cells.length;\n                        for (var j = 0; j < cellsLength; ++j) {\n                            var cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                }\n            }\n        }\n    };\n    return EShapeTableActionRuntime;\n}(EShapeActionRuntimeBase));\nexport { EShapeTableActionRuntime };\n//# sourceMappingURL=e-shape-table-action-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeActionValueChangeColorCode, EShapeActionValueChangeColorType, EShapeDefaults, UtilRgb } from \"@wcardinal/wcardinal-ui\";\nvar EShapeTableCellActionValueChangeColor = /** @class */ (function (_super) {\n    __extends(EShapeTableCellActionValueChangeColor, _super);\n    function EShapeTableCellActionValueChangeColor() {\n        return _super.call(this, EShapeActionValueChangeColorType.FILL, \"\", EShapeTableCellActionValueChangeColor.getColorCode(), \"\", \"\") || this;\n    }\n    EShapeTableCellActionValueChangeColor.getColorCode = function () {\n        var activeHoverColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.8);\n        var activeColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.75);\n        var hoverColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.85);\n        var disabledColor = UtilRgb.darken(EShapeDefaults.FILL_COLOR, 0.25);\n        return (\"inDisabled ? \".concat(disabledColor, \" : ( isActive ?\") +\n            \"\\t( isHovered ? \".concat(activeHoverColor, \" : \").concat(activeColor, \" ) :\") +\n            \"\\t( isHovered ? \".concat(hoverColor, \" : null )\") +\n            \")\");\n    };\n    return EShapeTableCellActionValueChangeColor;\n}(EShapeActionValueChangeColorCode));\nexport { EShapeTableCellActionValueChangeColor };\n//# sourceMappingURL=e-shape-table-cell-action-value-change-color.js.map","import { __extends } from \"tslib\";\nimport { DApplications, EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableCellActionValueChangeColor } from \"./e-shape-table-cell-action-value-change-color\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nvar EShapeTableBodyRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableBodyRuntime, _super);\n    function EShapeTableBodyRuntime(shape) {\n        var _this = _super.call(this, shape) || this;\n        _this.lastRowIndex = -1;\n        _this.lastColumnIndex = -1;\n        _this.init(shape);\n        return _this;\n    }\n    EShapeTableBodyRuntime.prototype.init = function (shape) {\n        var parent = shape.parent;\n        if (parent instanceof EShapeTable) {\n            this.selection = parent.row.selection;\n            var rows = shape.children;\n            for (var i = 0, imax = rows.length; i < imax; ++i) {\n                var row = rows[i];\n                var cells = row.children;\n                for (var j = 0, jmax = cells.length; j < jmax; ++j) {\n                    cells[j].action.add(new EShapeTableCellActionValueChangeColor());\n                }\n            }\n        }\n    };\n    EShapeTableBodyRuntime.prototype.onClick = function (shape, e) {\n        _super.prototype.onClick.call(this, shape, e);\n        // Update the selection\n        var selection = this.selection;\n        if (e != null && selection != null && selection.type !== EShapeTableRowSelectionType.NONE) {\n            var lastRowIndex = this.lastRowIndex;\n            if (0 <= lastRowIndex) {\n                var indices = selection.indices;\n                var isSingle = selection.type === EShapeTableRowSelectionType.SINGLE;\n                var isNotSingle = !isSingle;\n                var originalEvent = \"data\" in e ? e.data.originalEvent : e;\n                var ctrlKey = originalEvent.ctrlKey;\n                var shiftKey = originalEvent.shiftKey;\n                if (isSingle || indices.length <= 0 || !(isNotSingle && (ctrlKey || shiftKey))) {\n                    selection.clearAndAdd(lastRowIndex);\n                }\n                else if (ctrlKey) {\n                    selection.toggle(lastRowIndex);\n                }\n                else if (shiftKey) {\n                    selection.addTo(lastRowIndex);\n                }\n            }\n        }\n    };\n    EShapeTableBodyRuntime.prototype.onDblClick = function (shape, e, interactionManager) {\n        var result = _super.prototype.onDblClick.call(this, shape, e, interactionManager);\n        // Focus on clicked cell\n        var cell = this.getCell(shape, this.lastRowIndex, this.lastColumnIndex);\n        if (cell != null) {\n            cell.focus();\n        }\n        return result;\n    };\n    EShapeTableBodyRuntime.prototype.onOut = function (shape, e) {\n        _super.prototype.onOut.call(this, shape, e);\n        // Clear highlight\n        var lastRowIndex = this.lastRowIndex;\n        if (0 <= lastRowIndex) {\n            this.setRowHovered(shape, lastRowIndex, false);\n            this.lastRowIndex = -1;\n        }\n    };\n    EShapeTableBodyRuntime.prototype.onCellTouched = function (shape, rowIndex, columnIndex) {\n        var isChanged = false;\n        var lastRowTouched = this.lastRowIndex;\n        if (lastRowTouched !== rowIndex) {\n            this.setRowHovered(shape, lastRowTouched, false);\n            this.setRowHovered(shape, rowIndex, true);\n            this.lastRowIndex = rowIndex;\n            isChanged = true;\n        }\n        var lastColumnIndex = this.lastColumnIndex;\n        if (lastColumnIndex !== columnIndex) {\n            this.lastColumnIndex = columnIndex;\n            isChanged = true;\n        }\n        if (isChanged) {\n            var cell = this.getCell(shape, rowIndex, columnIndex);\n            shape.title = (cell && cell.text.value) || \"\";\n            var layer = DApplications.getLayer(shape);\n            if (layer) {\n                layer.view.title = shape.title;\n            }\n        }\n    };\n    EShapeTableBodyRuntime.prototype.getRow = function (shape, index) {\n        var rows = shape.children;\n        if (0 <= index && index < rows.length) {\n            return rows[index];\n        }\n        return null;\n    };\n    EShapeTableBodyRuntime.prototype.getCell = function (shape, rowIndex, columnIndex) {\n        var row = this.getRow(shape, rowIndex);\n        if (row != null) {\n            var cells = row.children;\n            if (0 <= columnIndex && columnIndex < cells.length) {\n                return cells[columnIndex];\n            }\n        }\n        return null;\n    };\n    EShapeTableBodyRuntime.prototype.setRowHovered = function (shape, index, isHovered) {\n        var row = this.getRow(shape, index);\n        if (row != null) {\n            var cells = row.children;\n            for (var i = 0, imax = cells.length; i < imax; ++i) {\n                cells[i].state.isHovered = isHovered;\n            }\n        }\n    };\n    EShapeTableBodyRuntime.WORK_POINT = new Point();\n    return EShapeTableBodyRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeTableBodyRuntime };\n//# sourceMappingURL=e-shape-table-body-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeGroupShadowed } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableBodyRuntime } from \"./e-shape-table-body-runtime\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nvar EShapeTableBody = /** @class */ (function (_super) {\n    __extends(EShapeTableBody, _super);\n    function EShapeTableBody(mode, type) {\n        if (type === void 0) { type = EShapeTableIds.BODY_ID; }\n        return _super.call(this, mode, type) || this;\n    }\n    EShapeTableBody.prototype.containsAbs = function (x, y, ax, ay) {\n        if (this.containsAbsBBox(x, y, ax, ay)) {\n            var children = this.children;\n            if (0 < children.length) {\n                var first = children[0];\n                var rowIndex = ((ay + y) / first.size.y) | 0;\n                if (rowIndex < children.length) {\n                    var cells = first.children;\n                    for (var i = 0, imax = cells.length; i < imax; ++i) {\n                        var cell = cells[i];\n                        var cx = cell.transform.position.x;\n                        var csx = 0.5 * cell.size.x;\n                        if (x < cx + csx) {\n                            var runtime = this.runtime;\n                            if (runtime instanceof EShapeTableBodyRuntime) {\n                                runtime.onCellTouched(this, rowIndex, i);\n                            }\n                            return true;\n                        }\n                    }\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EShapeTableBody.prototype.containsText = function (x, y) {\n        return null;\n    };\n    EShapeTableBody.prototype.containsChildren = function (x, y) {\n        return null;\n    };\n    return EShapeTableBody;\n}(EShapeGroupShadowed));\nexport { EShapeTableBody };\n//# sourceMappingURL=e-shape-table-body.js.map","import { NumberFormatters } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nvar toValueDefault = function (row, index) { return row[index]; };\nvar fromValueDefault = function (row, index, rows, value) {\n    row[index] = value;\n};\nvar formatterDefault = function (value) { return String(value); };\nvar EShapeTableColumnValueRuntime = /** @class */ (function () {\n    function EShapeTableColumnValueRuntime(value) {\n        this.toValue = this.parseToValue(value.getter, toValueDefault, '\"\"');\n        this.fromValue = this.parseFromValue(value.setter, fromValueDefault);\n        if (value.type === EShapeTableColumnValueType.TEXT) {\n            this.formatter = this.parseFormat(value.format, formatterDefault, '\"\"');\n        }\n        else {\n            var format = value.format;\n            if (0 < format.trim().length) {\n                var formatter_1 = NumberFormatters.create(format);\n                this.formatter = function (v) {\n                    return formatter_1.format(v, 1);\n                };\n            }\n            else {\n                this.formatter = formatterDefault;\n            }\n        }\n    }\n    EShapeTableColumnValueRuntime.prototype.parseToValue = function (expression, def, defLiteral) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"row\", \"index\", \"rows\", \"try{ return (\".concat(expression, \"); } catch( e ) { return \").concat(defLiteral, \"; }\"));\n        }\n        catch (_a) {\n            return def;\n        }\n    };\n    EShapeTableColumnValueRuntime.prototype.parseFromValue = function (expression, def) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"row\", \"index\", \"rows\", \"value\", \"try{ \".concat(expression, \" = value; } catch( e ) {}\"));\n        }\n        catch (_a) {\n            return def;\n        }\n    };\n    EShapeTableColumnValueRuntime.prototype.parseFormat = function (expression, def, defLiteral) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"value\", \"index\", \"try{ return (\".concat(expression, \"); } catch( e ) { return \").concat(defLiteral, \"; }\"));\n        }\n        catch (_a) {\n            return def;\n        }\n    };\n    return EShapeTableColumnValueRuntime;\n}());\nexport { EShapeTableColumnValueRuntime };\n//# sourceMappingURL=e-shape-table-column-value-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nvar EShapeTableHeaderRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableHeaderRuntime, _super);\n    function EShapeTableHeaderRuntime() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EShapeTableHeaderRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeTableHeaderRuntime };\n//# sourceMappingURL=e-shape-table-header-runtime.js.map","import { __extends } from \"tslib\";\nimport { EShapeGroupShadowed } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nvar EShapeTableHeader = /** @class */ (function (_super) {\n    __extends(EShapeTableHeader, _super);\n    function EShapeTableHeader(mode, type) {\n        if (type === void 0) { type = EShapeTableIds.HEADER_ID; }\n        return _super.call(this, mode, type) || this;\n    }\n    return EShapeTableHeader;\n}(EShapeGroupShadowed));\nexport { EShapeTableHeader };\n//# sourceMappingURL=e-shape-table-header.js.map","import { __extends } from \"tslib\";\nimport { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableActionRuntime } from \"./e-shape-table-action-runtime\";\nimport { EShapeTableColumnValueRuntime } from \"./e-shape-table-column-value-runtime\";\nvar EShapeTableRuntime = /** @class */ (function (_super) {\n    __extends(EShapeTableRuntime, _super);\n    function EShapeTableRuntime(shape) {\n        var _this = _super.call(this, shape) || this;\n        if (shape instanceof EShapeTable) {\n            // Columns\n            var values = shape.column.values;\n            for (var i = 0, imax = values.length; i < imax; ++i) {\n                var value = values[i];\n                value.runtime = new EShapeTableColumnValueRuntime(value);\n            }\n            // Action\n            _this.actions.push(new EShapeTableActionRuntime(shape));\n        }\n        return _this;\n    }\n    return EShapeTableRuntime;\n}(EShapeRuntimeImpl));\nexport { EShapeTableRuntime };\n//# sourceMappingURL=e-shape-table-runtime.js.map","import { createGroupUploaded, deserializeBase, DThemes, EShapeCapability, EShapeDefaults, EShapeGroupShadowed, EShapeRectangle, EShapeResourceManagerDeserializationMode, EShapeStrokeSide, EShapeTextAlignHorizontal, UtilRgb } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableBody } from \"./e-shape-table-body\";\nimport { EShapeTableColumnValue, EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nimport { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nimport { EShapeTableHeader } from \"./e-shape-table-header\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { EEditorShapeTable } from \"./e-editor-shape-table\";\nimport { EShapeTableRuntime } from \"./e-shape-table-runtime\";\nimport { EShapeTableHeaderRuntime } from \"./e-shape-table-header-runtime\";\nimport { EShapeTableBodyRuntime } from \"./e-shape-table-body-runtime\";\nvar EShapeTables = /** @class */ (function () {\n    function EShapeTables() {\n    }\n    EShapeTables.getTheme = function () {\n        return DThemes.get(\"EShapeTable\");\n    };\n    EShapeTables.create = function (existing) {\n        var mode = EShapeResourceManagerDeserializationMode.EDITOR;\n        var result = new EShapeTable(mode);\n        var header = new EShapeTableHeader(mode).attach(result);\n        var headerCell = new EShapeRectangle().attach(header);\n        headerCell.stroke.side = EShapeStrokeSide.BOTTOM;\n        headerCell.stroke.width = 1;\n        headerCell.stroke.color = UtilRgb.brighten(EShapeDefaults.STROKE_COLOR, 0.65);\n        var body = new EShapeTableBody(mode).attach(result);\n        body.state.isFocusable = true;\n        body.interactive = true;\n        var even = new EShapeGroupShadowed(mode).attach(body);\n        var odd = new EShapeGroupShadowed(mode).attach(body);\n        var cellEven = new EShapeRectangle().attach(even);\n        cellEven.stroke.enable = false;\n        cellEven.text.value = \"-\";\n        cellEven.text.clipping = true;\n        var cellOdd = new EShapeRectangle().attach(odd);\n        cellOdd.fill.color = UtilRgb.darken(EShapeDefaults.FILL_COLOR, 0.05);\n        cellOdd.stroke.enable = false;\n        cellOdd.text.value = \"-\";\n        cellOdd.text.clipping = true;\n        result.column.add(new EShapeTableColumnValue(1, EShapeTableColumnValueType.TEXT, \"\", \"\", \"\", EShapeTextAlignHorizontal.CENTER, new EShapeTableColumnValueHeader(this.getTheme().newHeaderLabel()), new EShapeTableColumnValueBody()));\n        if (existing) {\n            result.copy(existing);\n        }\n        result.onSizeChange();\n        return result;\n    };\n    EShapeTables.load = function () {\n        var theme = this.getTheme();\n        var name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeTableIds.ID,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: \"<g transform=\\\"scale(26.6666)\\\" fill=\\\"#fff\\\" stroke=\\\"none\\\">\" +\n                    \"<path d=\\\"M20 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 2v3H5V5h15z\" +\n                    \"m-5 14h-5v-9h5v9zM5 10h3v9H5v-9zm12 9v-9h3v9h-3z\\\"/>\" +\n                    \"</g>\"\n            },\n            title: name,\n            creator: function (existing) { return EShapeTables.create(existing); },\n            deserializer: function (item, manager) { return EShapeTables.deserialize(item, manager); },\n            editor: EEditorShapeTable,\n            runtime: EShapeTableRuntime,\n            uploaded: createGroupUploaded\n        });\n        EShapeExtensions.add({\n            type: EShapeTableIds.HEADER_ID,\n            name: theme.getHeaderName(),\n            deserializer: function (item, manager) { return EShapeTables.deserializeHeader(item, manager); },\n            runtime: EShapeTableHeaderRuntime,\n            capability: EShapeCapability.PRIMITIVE & ~EShapeCapability.CHILDREN\n        });\n        EShapeExtensions.add({\n            type: EShapeTableIds.BODY_ID,\n            name: theme.getBodyName(),\n            deserializer: function (item, manager) { return EShapeTables.deserializeBody(item, manager); },\n            runtime: EShapeTableBodyRuntime,\n            capability: EShapeCapability.PRIMITIVE & ~EShapeCapability.CHILDREN\n        });\n    };\n    EShapeTables.deserialize = function (item, manager) {\n        var shape = new EShapeTable(manager.mode);\n        var index = item[15];\n        var resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            var parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.column.deserialize(parsed[0], manager);\n            shape.row.deserialize(parsed[1], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    EShapeTables.deserializeHeader = function (item, manager) {\n        var shape = new EShapeTableHeader(manager.mode);\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    EShapeTables.deserializeBody = function (item, manager) {\n        var shape = new EShapeTableBody(manager.mode);\n        var result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    };\n    return EShapeTables;\n}());\nexport { EShapeTables };\n//# sourceMappingURL=e-shape-tables.js.map","var toIconName = function (index) {\n    return \"extension_factory_icon_\".concat(index);\n};\nvar EShapeExtensionFactories = /** @class */ (function () {\n    function EShapeExtensionFactories() {\n    }\n    EShapeExtensionFactories.add = function (factory) {\n        this._factories.push(factory);\n    };\n    EShapeExtensionFactories.each = function (iteratee) {\n        var factories = this._factories;\n        for (var i = 0, imax = factories.length; i < imax; ++i) {\n            iteratee(factories[i]);\n        }\n    };\n    EShapeExtensionFactories.merge = function (iconBuilder) {\n        var factories = this._factories;\n        for (var i = 0, imax = factories.length; i < imax; ++i) {\n            var factory = factories[i];\n            var icon = factory.icon;\n            iconBuilder.add(toIconName(i), icon.width, icon.height, icon.svg);\n        }\n    };\n    EShapeExtensionFactories.build = function (icons) {\n        var factories = this._factories;\n        for (var i = 0, imax = factories.length; i < imax; ++i) {\n            var factory = factories[i];\n            factory.icon.texture = icons[toIconName(i)];\n        }\n    };\n    EShapeExtensionFactories._factories = [];\n    return EShapeExtensionFactories;\n}());\nexport { EShapeExtensionFactories };\n//# sourceMappingURL=e-shape-extension-factories.js.map","import { __extends } from \"tslib\";\nimport { DInputSearch, UtilHtmlElement } from \"@wcardinal/wcardinal-ui\";\nvar EDialogActionKeywordInput = /** @class */ (function (_super) {\n    __extends(EDialogActionKeywordInput, _super);\n    function EDialogActionKeywordInput() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogActionKeywordInput.prototype.getClipperRect = function (resolution, point, result) {\n        return UtilHtmlElement.getClipperRect(null, this, resolution, point, result);\n    };\n    return EDialogActionKeywordInput;\n}(DInputSearch));\nexport { EDialogActionKeywordInput };\n//# sourceMappingURL=e-dialog-action-keyword-input.js.map","import { __extends } from \"tslib\";\nimport { DBoard, DLayoutVertical, DList, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogActionKeywordInput } from \"./e-dialog-action-keyword-input\";\nvar EDialogActionKeywordBoard = /** @class */ (function (_super) {\n    __extends(EDialogActionKeywordBoard, _super);\n    function EDialogActionKeywordBoard(options) {\n        var _this = _super.call(this, options) || this;\n        _this.addChild(new DLayoutVertical({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [_this.input, _this.list, _this.text]\n        }));\n        _this.onInputChange(\"\");\n        return _this;\n    }\n    Object.defineProperty(EDialogActionKeywordBoard.prototype, \"input\", {\n        // Input\n        get: function () {\n            var result = this._input;\n            if (result == null) {\n                result = this.newInput();\n                this._input = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionKeywordBoard.prototype.newInput = function () {\n        var _this = this;\n        return new EDialogActionKeywordInput({\n            width: \"padding\",\n            on: {\n                input: function (value) {\n                    _this.onInputChange(value);\n                }\n            }\n        });\n    };\n    EDialogActionKeywordBoard.prototype.onInputChange = function (word) {\n        this.list.data.clearAndAddAll(this.newKeywords(word));\n    };\n    EDialogActionKeywordBoard.prototype.newKeywords = function (word) {\n        var _a;\n        var keywords = ((_a = this._keywords) !== null && _a !== void 0 ? _a : (this._keywords = DThemes.get(\"EDialogAction\").newKeywords()));\n        if (0 < word.trim().length) {\n            var filtered = [];\n            for (var i = 0, imax = keywords.length; i < imax; ++i) {\n                var keyword = keywords[i];\n                if (0 <= keyword.keyword.indexOf(word)) {\n                    filtered.push(keyword);\n                }\n            }\n            return filtered;\n        }\n        else {\n            return keywords;\n        }\n    };\n    Object.defineProperty(EDialogActionKeywordBoard.prototype, \"list\", {\n        // List\n        get: function () {\n            var result = this._list;\n            if (result == null) {\n                result = this.newList();\n                this._list = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionKeywordBoard.prototype.newList = function () {\n        var _this = this;\n        return new DList({\n            weight: 1,\n            width: \"padding\",\n            data: {\n                selection: {\n                    on: {\n                        change: function () {\n                            _this.onListSelectionChange();\n                        }\n                    }\n                },\n                toLabel: function (keyword) {\n                    return keyword.keyword;\n                },\n                toId: function (keyword) {\n                    return keyword.keyword;\n                }\n            }\n        });\n    };\n    EDialogActionKeywordBoard.prototype.onListSelectionChange = function () {\n        var first = this.list.data.selection.first;\n        if (first) {\n            this.text.text = \"\".concat(first.keyword, \": \").concat(first.type, \"\\n\").concat(first.description);\n        }\n        else {\n            this.text.text = \"\";\n        }\n    };\n    Object.defineProperty(EDialogActionKeywordBoard.prototype, \"text\", {\n        // Text\n        get: function () {\n            var result = this._text;\n            if (result == null) {\n                result = this.newText();\n                this._text = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogActionKeywordBoard.prototype.newText = function () {\n        return new DText({\n            width: \"padding\",\n            height: 120,\n            state: \"READ_ONLY\",\n            text: {\n                style: {\n                    wordWrap: \"NORMAL\"\n                }\n            },\n            theme: \"DInputTextArea\"\n        });\n    };\n    EDialogActionKeywordBoard.prototype.getType = function () {\n        return \"DDialog\";\n    };\n    return EDialogActionKeywordBoard;\n}(DBoard));\nexport { EDialogActionKeywordBoard };\n//# sourceMappingURL=e-dialog-action-keyword-board.js.map","import { __extends } from \"tslib\";\nimport { DAlignHorizontal, DButtonCheck, DButtonColor, DDialogLayered, DInputInteger, DInputLabel, DInputReal, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DMenu, DSelect, DSelectMultiple, DText, DThemes, EShapeActionValueBlink, EShapeActionValueBlinkType, EShapeActionValueChangeColor, EShapeActionValueChangeColorBrightness, EShapeActionValueChangeColorCode, EShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType, EShapeActionValueChangeColorTypes, EShapeActionValueChangeCursor, EShapeActionValueChangeText, EShapeActionValueChangeTextType, EShapeActionValueEmitEvent, EShapeActionValueMisc, EShapeActionValueMiscEmitEvent, EShapeActionValueGesture, EShapeActionValueGestureType, EShapeActionValueMiscHtmlElement, EShapeActionValueMiscInput, EShapeActionValueShowHideLayer, EShapeActionValueMiscType, EShapeActionValueMiscWrite, EShapeActionValueOnInputAction, EShapeActionValueOpen, EShapeActionValueOpenType, EShapeActionValueShowHideShape, EShapeActionValueShowHideType, EShapeActionValueTransformMove, EShapeActionValueTransformMoveType, EShapeActionValueTransformResize, EShapeActionValueTransformResizeType, EShapeActionValueTransformRotate, EShapeActionValueTransformRotateType, EShapeActionValueTransformType, EShapeActionValueType, UtilHtmlElementWhen, EShapeActionValueGestureOperationType, EShapeActionValueShowHide, EShapeActionValueOpenDialog, EShapeActionValueOpenDialogType, EShapeActionValueOpenExtension, EShapeActionOpenExtensions, EShapeActionValueMiscExecute, EShapeActionValueOpenDialogExtension, EShapeActionOpenDialogExtensions, DButtonAmbient, DApplications, EShapeActionMiscExtensions, EShapeActionValueMiscExtension } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeActionExtensions } from \"../extension\";\nimport { EDialogActionExtensionContainer } from \"./e-dialog-action-extension-container\";\nimport { EDialogActionKeywordBoard } from \"./e-dialog-action-keyword-board\";\nvar EDialogAction = /** @class */ (function (_super) {\n    __extends(EDialogAction, _super);\n    function EDialogAction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogAction.prototype.newContentChildren = function (theme, options) {\n        var _this = this;\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.selectLayout, this.showHideTypeLayout, this.blinkTypeLayout, this.transformTypeLayout, this.changeColorTypeLayout, this.changeColorTargetLayout, this.rotateTypeLayout, this.resizeTypeLayout, this.originXLayout, this.originYLayout, this.moveTypeLayout, this.openTypeLayout, this.openDialogTypeLayout, this.changeTextTypeLayout, this.miscTypeLayout, this.onInputActionLayout, this.whenTypeLayout, this.gestureTypeLayout, this.gestureOperationTypeLayout, this.selectLayerLayout, this.condition, this.intervalLayout, this.size, this.amount, this.targetName, this.colorLayout, this.target, this.argument, this.contents, this.initialization, this.pointerEventsLayout, this.colorCode, this.alphaCode, this.brightness, this.blend, this.initial, this.step, this.min, this.max, this.scaleLayout, this.checkBringToFrontLayout, this.inNewWindowLayout);\n        var onChangeBound = function () {\n            _this.onChange();\n        };\n        this.select.on(\"change\", onChangeBound);\n        this.showHideType.on(\"change\", onChangeBound);\n        this.blinkType.on(\"change\", onChangeBound);\n        this.transformType.on(\"change\", onChangeBound);\n        this.resizeType.on(\"change\", onChangeBound);\n        this.changeColorTarget.on(\"change\", onChangeBound);\n        this.openType.on(\"change\", onChangeBound);\n        this.openDialogType.on(\"change\", onChangeBound);\n        this.miscType.on(\"change\", onChangeBound);\n        return result;\n    };\n    EDialogAction.prototype.newLabel = function (label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    };\n    EDialogAction.prototype.newSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    EDialogAction.prototype.newLabeled = function (label, input) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                input,\n                this.newSpace()\n            ]\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"themeShape\", {\n        // Theme\n        get: function () {\n            var _a;\n            return ((_a = this._themeShape) !== null && _a !== void 0 ? _a : (this._themeShape = this.newThemeShape()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newThemeShape = function () {\n        return DThemes.get(\"EShapeActionValue\");\n    };\n    Object.defineProperty(EDialogAction.prototype, \"select\", {\n        // Select\n        get: function () {\n            var _a;\n            return ((_a = this._select) !== null && _a !== void 0 ? _a : (this._select = this.newSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSelect = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueType.SHOW_HIDE,\n            menu: {\n                items: this.newSelectMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newSelectMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueType.SHOW_HIDE,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.SHOW_HIDE)\n                }\n            },\n            {\n                value: EShapeActionValueType.BLINK,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.BLINK)\n                }\n            },\n            {\n                value: EShapeActionValueType.TRANSFORM,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.TRANSFORM)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_COLOR,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_COLOR)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_TEXT,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_CURSOR,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_CURSOR)\n                }\n            },\n            {\n                value: EShapeActionValueType.OPEN,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.OPEN)\n                }\n            },\n            {\n                value: EShapeActionValueType.GESTURE,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.GESTURE)\n                }\n            },\n            {\n                value: EShapeActionValueType.MISC,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.MISC)\n                }\n            }\n        ];\n        EShapeActionExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"selectLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayout) !== null && _a !== void 0 ? _a : (this._selectLayout = this.newSelectLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSelectLayout = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabel(this.theme.getSelectActionLabel()),\n                this.select,\n                new DLayoutHorizontal({\n                    width: 60,\n                    height: \"auto\",\n                    children: [\n                        new DLayoutSpace({\n                            weight: 1\n                        }),\n                        this.buttonKeyword\n                    ]\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"buttonKeyword\", {\n        // Keyword button\n        get: function () {\n            var _a;\n            return ((_a = this._buttonKeyword) !== null && _a !== void 0 ? _a : (this._buttonKeyword = this.newButtonKeyword()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newButtonKeyword = function () {\n        var _this = this;\n        var _a;\n        return new DButtonAmbient({\n            width: 30,\n            toggle: true,\n            image: {\n                source: (_a = this.options) === null || _a === void 0 ? void 0 : _a.icons.action_keyword\n            },\n            title: this.theme.getButtonKeywordTitle(),\n            on: {\n                active: function () {\n                    _this.onButtonKeywordActive();\n                },\n                inactive: function () {\n                    _this.onButtonKeywordInactive();\n                }\n            }\n        });\n    };\n    EDialogAction.prototype.onButtonKeywordActive = function () {\n        var boardKeyword = this.boardKeyword;\n        var offset = this.getBoardKeywordOffset();\n        var width = this.width;\n        var layer = DApplications.getLayer(this);\n        if (layer != null) {\n            var boardKeywordWidth = boardKeyword.width;\n            if (layer.width < this.position.x + width + offset + boardKeywordWidth) {\n                boardKeyword.position.x = -boardKeywordWidth - offset;\n            }\n            else {\n                boardKeyword.position.x = width + offset;\n            }\n        }\n        else {\n            boardKeyword.position.x = width + offset;\n        }\n        boardKeyword.show();\n    };\n    EDialogAction.prototype.onButtonKeywordInactive = function () {\n        this.boardKeyword.hide();\n    };\n    Object.defineProperty(EDialogAction.prototype, \"boardKeyword\", {\n        // Keyword board\n        get: function () {\n            var _a;\n            return ((_a = this._boardKeyword) !== null && _a !== void 0 ? _a : (this._boardKeyword = this.newBoardKeyword()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBoardKeyword = function () {\n        // To exclude this board from the automatic height calculation targets,\n        // The width and the height must be functions.\n        return new EDialogActionKeywordBoard({\n            parent: this,\n            x: 0,\n            y: 0,\n            width: function () { return 300; },\n            height: function () { return 400; },\n            padding: 16\n        });\n    };\n    EDialogAction.prototype.getBoardKeywordOffset = function () {\n        return 16;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"showHideType\", {\n        // Select show / hide type\n        get: function () {\n            var _a;\n            return ((_a = this._showHideType) !== null && _a !== void 0 ? _a : (this._showHideType = this.newShowHideType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newShowHideType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueShowHideType.SHAPE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueShowHideType.SHAPE,\n                        text: {\n                            value: themeShape.toShowHideTypeLabel(EShapeActionValueShowHideType.SHAPE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueShowHideType.LAYER,\n                        text: {\n                            value: themeShape.toShowHideTypeLabel(EShapeActionValueShowHideType.LAYER)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"showHideTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._showHideTypeLayout) !== null && _a !== void 0 ? _a : (this._showHideTypeLayout = this.newLabeled(null, this.showHideType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeShowHideTypeLayout = function (select) {\n        var showHideTypeLayout = this.showHideTypeLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            showHideTypeLayout.show();\n        }\n        else {\n            showHideTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"blinkType\", {\n        // Select blink type\n        get: function () {\n            var _a;\n            return ((_a = this._blinkType) !== null && _a !== void 0 ? _a : (this._blinkType = this.newBlinkType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBlinkType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueBlinkType.VISIBILITY,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueBlinkType.VISIBILITY,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.VISIBILITY)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.BRIGHTEN,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.BRIGHTEN)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.DARKEN,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.DARKEN)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.OPACITY,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.OPACITY)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.COLOR_FILL,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.COLOR_FILL)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.COLOR_STROKE,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.COLOR_STROKE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"blinkTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._blinkTypeLayout) !== null && _a !== void 0 ? _a : (this._blinkTypeLayout = this.newLabeled(null, this.blinkType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeBlinkTypeLayout = function (select) {\n        var blinkTypeLayout = this.blinkTypeLayout;\n        if (select === EShapeActionValueType.BLINK) {\n            blinkTypeLayout.show();\n        }\n        else {\n            blinkTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"transformType\", {\n        // Transform type\n        get: function () {\n            var _a;\n            return ((_a = this._transformType) !== null && _a !== void 0 ? _a : (this._transformType = this.newTransformType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newTransformType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformType.MOVE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformType.MOVE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.MOVE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformType.ROTATE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.ROTATE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformType.RESIZE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.RESIZE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"transformTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._transformTypeLayout) !== null && _a !== void 0 ? _a : (this._transformTypeLayout = this.newLabeled(null, this.transformType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeTransformTypeLayout = function (select) {\n        var transformTypeLayout = this.transformTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            transformTypeLayout.show();\n        }\n        else {\n            transformTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorType\", {\n        // Select color type\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorType) !== null && _a !== void 0 ? _a : (this._changeColorType = this.newChangeColorType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newChangeColorType = function () {\n        var themeShape = this.themeShape;\n        return new DSelectMultiple({\n            weight: 1,\n            values: [EShapeActionValueChangeColorType.FILL],\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeColorType.FILL,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.FILL)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.STROKE,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.STROKE)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.TEXT,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.TEXT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.TEXT_OUTLINE,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.TEXT_OUTLINE)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorTypeLayout) !== null && _a !== void 0 ? _a : (this._changeColorTypeLayout = this.newLabeled(null, this.changeColorType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeChangeColorTypeLayout = function (select) {\n        var changeColorTypeLayout = this.changeColorTypeLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            changeColorTypeLayout.show();\n        }\n        else {\n            changeColorTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorTarget\", {\n        // Select color target\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorTarget) !== null && _a !== void 0 ? _a : (this._changeColorTarget = this.newChangeColorTarget()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newChangeColorTarget = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.COLOR,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.COLOR)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.ALPHA,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.ALPHA)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.CODE,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.CODE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.BRIGHTNESS,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.BRIGHTNESS)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeColorTargetLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._changeColorTargetLayout) !== null && _a !== void 0 ? _a : (this._changeColorTargetLayout = this.newLabeled(null, this.changeColorTarget)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeChangeColorTargetLayout = function (select) {\n        var changeColorTargetLayout = this.changeColorTargetLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            changeColorTargetLayout.show();\n        }\n        else {\n            changeColorTargetLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"rotateType\", {\n        // Select rotate type\n        get: function () {\n            var _a;\n            return ((_a = this._rotateType) !== null && _a !== void 0 ? _a : (this._rotateType = this.newRotateType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newRotateType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformRotateType.RELATIVE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformRotateType.RELATIVE,\n                        text: {\n                            value: themeShape.toTransformRotateTypeLabel(EShapeActionValueTransformRotateType.RELATIVE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformRotateType.ABSOLUTE,\n                        text: {\n                            value: themeShape.toTransformRotateTypeLabel(EShapeActionValueTransformRotateType.ABSOLUTE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"rotateTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._rotateTypeLayout) !== null && _a !== void 0 ? _a : (this._rotateTypeLayout = this.newLabeled(null, this.rotateType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeRotateTypeLayout = function (select) {\n        var rotateTypeLayout = this.rotateTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.ROTATE) {\n                rotateTypeLayout.show();\n            }\n            else {\n                rotateTypeLayout.hide();\n            }\n        }\n        else {\n            rotateTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"resizeType\", {\n        // Select resize type\n        get: function () {\n            var _a;\n            return ((_a = this._resizeType) !== null && _a !== void 0 ? _a : (this._resizeType = this.newResizeType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newResizeType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformResizeType.RELATIVE_SIZE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_SIZE,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_SIZE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_SIZE,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_SIZE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_HEIGHT,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_HEIGHT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_WIDTH,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_WIDTH)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"resizeTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._resizeTypeLayout) !== null && _a !== void 0 ? _a : (this._resizeTypeLayout = this.newLabeled(null, this.resizeType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeResizeTypeLayout = function (select) {\n        var resizeTypeLayout = this.resizeTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.RESIZE) {\n                resizeTypeLayout.show();\n            }\n            else {\n                resizeTypeLayout.hide();\n            }\n        }\n        else {\n            resizeTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originX\", {\n        // X Origin\n        get: function () {\n            var _a;\n            return ((_a = this._originX) !== null && _a !== void 0 ? _a : (this._originX = this.newOriginX()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOriginX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0.5\n            },\n            step: 0.1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originXLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._originXLayout) !== null && _a !== void 0 ? _a : (this._originXLayout = this.newLabeled(this.theme.getInputOriginXLabel(), this.originX)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOriginXLayout = function (select) {\n        var originXLayout = this.originXLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            var transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.RESIZE) {\n                var resizeType = this.resizeType.value;\n                if (resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_WIDTH) {\n                    originXLayout.show();\n                }\n                else {\n                    originXLayout.hide();\n                }\n            }\n            else if (transformType === EShapeActionValueTransformType.ROTATE) {\n                originXLayout.show();\n            }\n            else {\n                originXLayout.hide();\n            }\n        }\n        else {\n            originXLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originY\", {\n        // Y Origin\n        get: function () {\n            var _a;\n            return ((_a = this._originY) !== null && _a !== void 0 ? _a : (this._originY = this.newOriginY()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOriginY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0.5\n            },\n            step: 0.1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"originYLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._originYLayout) !== null && _a !== void 0 ? _a : (this._originYLayout = this.newLabeled(this.theme.getInputOriginYLabel(), this.originY)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOriginYLayout = function (select) {\n        var originYLayout = this.originYLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            var transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.RESIZE) {\n                var resizeType = this.resizeType.value;\n                if (resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_HEIGHT) {\n                    originYLayout.show();\n                }\n                else {\n                    originYLayout.hide();\n                }\n            }\n            else if (transformType === EShapeActionValueTransformType.ROTATE) {\n                originYLayout.show();\n            }\n            else {\n                originYLayout.hide();\n            }\n        }\n        else {\n            originYLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"moveType\", {\n        // Select move type\n        get: function () {\n            var _a;\n            return ((_a = this._moveType) !== null && _a !== void 0 ? _a : (this._moveType = this.newMoveType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMoveType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformMoveType.RELATIVE_X,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformMoveType.RELATIVE_X,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.RELATIVE_X)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.RELATIVE_Y,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.RELATIVE_Y)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.ABSOLUTE_X,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.ABSOLUTE_X)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.ABSOLUTE_Y,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.ABSOLUTE_Y)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.LEFT_OR_RIGHT,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.LEFT_OR_RIGHT)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"moveTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._moveTypeLayout) !== null && _a !== void 0 ? _a : (this._moveTypeLayout = this.newLabeled(null, this.moveType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeMoveTypeLayout = function (select) {\n        var moveTypeLayout = this.moveTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.MOVE) {\n                moveTypeLayout.show();\n            }\n            else {\n                moveTypeLayout.hide();\n            }\n        }\n        else {\n            moveTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openType\", {\n        // Select open type\n        get: function () {\n            var _a;\n            return ((_a = this._openType) !== null && _a !== void 0 ? _a : (this._openType = this.newOpenType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOpenType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOpenType.DIAGRAM,\n            menu: {\n                items: this.newOpenTypeMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newOpenTypeMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueOpenType.DIAGRAM,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.DIAGRAM)\n                }\n            },\n            {\n                value: EShapeActionValueOpenType.PAGE,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.PAGE)\n                }\n            },\n            {\n                value: EShapeActionValueOpenType.DIALOG,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.DIALOG)\n                }\n            }\n        ];\n        EShapeActionOpenExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._openTypeLayout) !== null && _a !== void 0 ? _a : (this._openTypeLayout = this.newLabeled(null, this.openType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOpenTypeLayout = function (select) {\n        var openTypeLayout = this.openTypeLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            openTypeLayout.show();\n        }\n        else {\n            openTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openDialogType\", {\n        // Select open dialog type\n        get: function () {\n            var _a;\n            return ((_a = this._openDialogType) !== null && _a !== void 0 ? _a : (this._openDialogType = this.newOpenDialogType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOpenDialogType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOpenDialogType.TEXT,\n            menu: {\n                items: this.newOpenDialogTypeMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newOpenDialogTypeMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueOpenDialogType.TEXT,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.INTEGER,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.INTEGER)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.REAL,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.REAL)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.BOOLEAN,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.BOOLEAN)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.DATE,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.DATE)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.TIME,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.TIME)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.DATETIME,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.DATETIME)\n                }\n            }\n        ];\n        EShapeActionOpenDialogExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"openDialogTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._openDialogTypeLayout) !== null && _a !== void 0 ? _a : (this._openDialogTypeLayout = this.newLabeled(null, this.openDialogType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOpenDialogTypeLayout = function (select) {\n        var openDialogTypeLayout = this.openDialogTypeLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            if (this.openType.value === EShapeActionValueOpenType.DIALOG) {\n                openDialogTypeLayout.show();\n            }\n            else {\n                openDialogTypeLayout.hide();\n            }\n        }\n        else {\n            openDialogTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeTextType\", {\n        // Select change text type\n        get: function () {\n            var _a;\n            return ((_a = this._changeTextType) !== null && _a !== void 0 ? _a : (this._changeTextType = this.newChangeTextType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newChangeTextType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueChangeTextType.TEXT,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeTextType.TEXT,\n                        text: {\n                            value: themeShape.toChangeTextTypeLabel(EShapeActionValueChangeTextType.TEXT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeTextType.NUMBER,\n                        text: {\n                            value: themeShape.toChangeTextTypeLabel(EShapeActionValueChangeTextType.NUMBER)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"changeTextTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._changeTextTypeLayout) !== null && _a !== void 0 ? _a : (this._changeTextTypeLayout = this.newLabeled(null, this.changeTextType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeChangeTextTypeLayout = function (select) {\n        var changeTextTypeLayout = this.changeTextTypeLayout;\n        if (select === EShapeActionValueType.CHANGE_TEXT) {\n            changeTextTypeLayout.show();\n        }\n        else {\n            changeTextTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"miscType\", {\n        // Select misc. type\n        get: function () {\n            var _a;\n            return ((_a = this._miscType) !== null && _a !== void 0 ? _a : (this._miscType = this.newMiscType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMiscType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueMiscType.INPUT_TEXT,\n            menu: {\n                items: this.newMiscTypeMenuItems()\n            }\n        });\n    };\n    EDialogAction.prototype.newMiscTypeMenuItems = function () {\n        var themeShape = this.themeShape;\n        var result = [\n            {\n                value: EShapeActionValueMiscType.INPUT_TEXT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.INPUT_INTEGER,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_INTEGER)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.INPUT_REAL,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_REAL)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.EMIT_EVENT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.EMIT_EVENT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_BOTH,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_BOTH)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_LOCAL,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_LOCAL)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_REMOTE,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_REMOTE)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.HTML_ELEMENT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.HTML_ELEMENT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.EXECUTE,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.EXECUTE)\n                }\n            }\n        ];\n        EShapeActionMiscExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"miscTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._miscTypeLayout) !== null && _a !== void 0 ? _a : (this._miscTypeLayout = this.newLabeled(null, this.miscType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeMiscTypeLayout = function (select) {\n        var miscTypeLayout = this.miscTypeLayout;\n        if (select === EShapeActionValueType.MISC) {\n            miscTypeLayout.show();\n        }\n        else {\n            miscTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"onInputAction\", {\n        // OnInput Action type\n        get: function () {\n            var _a;\n            return ((_a = this._onInputAction) !== null && _a !== void 0 ? _a : (this._onInputAction = this.newOnInputAction()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newOnInputAction = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOnInputAction.WRITE_REMOTE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueOnInputAction.EMIT_EVENT,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.EMIT_EVENT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_BOTH,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_BOTH)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_LOCAL,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_LOCAL)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_REMOTE,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_REMOTE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"onInputActionLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._onInputActionLayout) !== null && _a !== void 0 ? _a : (this._onInputActionLayout = this.newLabeled(null, this.onInputAction)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeOnInputActionLayout = function (select) {\n        var onInputActionLayout = this.onInputActionLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG_TEXT:\n                case EShapeActionValueOpenType.DIALOG_INTEGER:\n                case EShapeActionValueOpenType.DIALOG_REAL:\n                case EShapeActionValueOpenType.DIALOG_BOOLEAN:\n                    onInputActionLayout.show();\n                    break;\n                case EShapeActionValueOpenType.DIALOG:\n                    var openDialogType = this.openDialogType.value;\n                    if (openDialogType == null) {\n                        onInputActionLayout.hide();\n                    }\n                    else if (EShapeActionValueOpenDialogType.EXTENSION <= openDialogType) {\n                        onInputActionLayout.hide();\n                    }\n                    else {\n                        onInputActionLayout.show();\n                    }\n                    break;\n                default:\n                    onInputActionLayout.hide();\n                    break;\n            }\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                    onInputActionLayout.show();\n                    break;\n                default:\n                    onInputActionLayout.hide();\n                    break;\n            }\n        }\n        else {\n            onInputActionLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"whenType\", {\n        // Select when type\n        get: function () {\n            var _a;\n            return ((_a = this._whenType) !== null && _a !== void 0 ? _a : (this._whenType = this.newWhenType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newWhenType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: UtilHtmlElementWhen.FOCUSED,\n            menu: {\n                items: [\n                    {\n                        value: UtilHtmlElementWhen.CLICKED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.CLICKED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.DOUBLE_CLICKED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.DOUBLE_CLICKED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.FOCUSED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.FOCUSED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.ALWAYS,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.ALWAYS)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"whenTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._whenTypeLayout) !== null && _a !== void 0 ? _a : (this._whenTypeLayout = this.newLabeled(this.theme.getSelectWhenLabel(), this.whenType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.toWhenTypeValue = function (whenType) {\n        switch (whenType) {\n            case UtilHtmlElementWhen.CLICKED:\n                return '\"CLICKED\"';\n            case UtilHtmlElementWhen.DOUBLE_CLICKED:\n                return '\"DOUBLE_CLICKED\"';\n            case UtilHtmlElementWhen.FOCUSED:\n                return '\"FOCUSED\"';\n            case UtilHtmlElementWhen.ALWAYS:\n                return '\"ALWAYS\"';\n        }\n        return '\"FOCUSED\"';\n    };\n    EDialogAction.prototype.toWhenType = function (whenTypeValue) {\n        switch (whenTypeValue) {\n            case '\"CLICKED\"':\n                return UtilHtmlElementWhen.CLICKED;\n            case '\"DOUBLE_CLICKED\"':\n                return UtilHtmlElementWhen.DOUBLE_CLICKED;\n            case '\"FOCUSED\"':\n                return UtilHtmlElementWhen.FOCUSED;\n            case '\"ALWAYS\"':\n                return UtilHtmlElementWhen.ALWAYS;\n        }\n        return UtilHtmlElementWhen.FOCUSED;\n    };\n    EDialogAction.prototype.onChangeWhenTypeLayout = function (select) {\n        var whenTypeLayout = this.whenTypeLayout;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    whenTypeLayout.show();\n                    break;\n                default:\n                    whenTypeLayout.hide();\n                    break;\n            }\n        }\n        else {\n            whenTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureType) !== null && _a !== void 0 ? _a : (this._gestureType = this.newGestureType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newGestureType = function () {\n        var themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueGestureType.SHAPE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureType.SHAPE,\n                        text: {\n                            value: themeShape.toGestureTypeLabel(EShapeActionValueGestureType.SHAPE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueGestureType.LAYER,\n                        text: {\n                            value: themeShape.toGestureTypeLabel(EShapeActionValueGestureType.LAYER)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureTypeLayout) !== null && _a !== void 0 ? _a : (this._gestureTypeLayout = this.newLabeled(\"\", this.gestureType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeGestureTypeLayout = function (select) {\n        var gestureTypeLayout = this.gestureTypeLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            gestureTypeLayout.show();\n        }\n        else {\n            gestureTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureOperationType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureOperationType) !== null && _a !== void 0 ? _a : (this._gestureOperationType = this.newGestureOperationType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newGestureOperationType = function () {\n        var themeShape = this.themeShape;\n        return new DSelectMultiple({\n            weight: 1,\n            values: this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL),\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureOperationType.DRAG,\n                        text: {\n                            value: themeShape.toGestureOperationTypeLabel(EShapeActionValueGestureOperationType.DRAG)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueGestureOperationType.PINCH,\n                        text: {\n                            value: themeShape.toGestureOperationTypeLabel(EShapeActionValueGestureOperationType.PINCH)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    };\n    EDialogAction.prototype.toGestureOperationType = function (types) {\n        var result = EShapeActionValueGestureOperationType.NONE;\n        for (var i = 0, imax = types.length; i < imax; ++i) {\n            result |= types[i];\n        }\n        return result;\n    };\n    EDialogAction.prototype.fromGestureOperationType = function (type) {\n        var result = [];\n        if (type & EShapeActionValueGestureOperationType.DRAG) {\n            result.push(EShapeActionValueGestureOperationType.DRAG);\n        }\n        if (type & EShapeActionValueGestureOperationType.PINCH) {\n            result.push(EShapeActionValueGestureOperationType.PINCH);\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"gestureOperationTypeLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._gestureOperationTypeLayout) !== null && _a !== void 0 ? _a : (this._gestureOperationTypeLayout = this.newLabeled(\"\", this.gestureOperationType)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeGestureOperationTypeLayout = function (select) {\n        var gestureOperationTypeLayout = this.gestureOperationTypeLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            gestureOperationTypeLayout.show();\n        }\n        else {\n            gestureOperationTypeLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"selectLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayer) !== null && _a !== void 0 ? _a : (this._selectLayer = this.newSelectLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSelectLayer = function () {\n        return new DSelectMultiple({\n            weight: 1\n        });\n    };\n    EDialogAction.prototype.newSelectLayerMenuItemOptions = function () {\n        var _a;\n        var diagram = (_a = this.options) === null || _a === void 0 ? void 0 : _a.diagram;\n        if (diagram != null) {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var result = [];\n                var layers = canvas.layer.children;\n                for (var i = layers.length - 1; 0 <= i; --i) {\n                    var layer = layers[i];\n                    result.push({\n                        value: i,\n                        text: {\n                            value: layer.name\n                        },\n                        check: true\n                    });\n                }\n                return result;\n            }\n        }\n        return [];\n    };\n    Object.defineProperty(EDialogAction.prototype, \"selectLayerLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLayerLayout) !== null && _a !== void 0 ? _a : (this._selectLayerLayout = this.newLabeled(this.theme.getSelectLayerLabel(), this.selectLayer)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeSelectLayerLayout = function (select) {\n        var selectLayerLayout = this.selectLayerLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            switch (this.showHideType.value) {\n                case EShapeActionValueShowHideType.LAYER:\n                    selectLayerLayout.show();\n                    break;\n                default:\n                    selectLayerLayout.hide();\n                    break;\n            }\n        }\n        else {\n            selectLayerLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"condition\", {\n        // Condition\n        get: function () {\n            var _a;\n            return ((_a = this._condition) !== null && _a !== void 0 ? _a : (this._condition = this.newCondition()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newCondition = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputConditionLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeCondition = function (select) {\n        var condition = this.condition;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    condition.hide();\n                    break;\n                default:\n                    condition.show();\n                    break;\n            }\n        }\n        else {\n            condition.show();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"interval\", {\n        // Interval\n        get: function () {\n            var _a;\n            return ((_a = this._interval) !== null && _a !== void 0 ? _a : (this._interval = this.newInterval()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInterval = function () {\n        var _this = this;\n        return new DInputInteger({\n            weight: 1,\n            text: {\n                value: 1000\n            },\n            min: 0,\n            step: 100,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"intervalLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._intervalLayout) !== null && _a !== void 0 ? _a : (this._intervalLayout = this.newIntervalLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newIntervalLayout = function () {\n        var theme = this.theme;\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabel(theme.getInputIntervalLabel()),\n                this.interval,\n                new DText({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalUnitLabel(),\n                        align: {\n                            horizontal: DAlignHorizontal.LEFT\n                        }\n                    }\n                })\n            ]\n        });\n    };\n    EDialogAction.prototype.onChangeIntervalLayout = function (select) {\n        var intervalLayout = this.intervalLayout;\n        if (select === EShapeActionValueType.BLINK) {\n            intervalLayout.show();\n        }\n        else {\n            intervalLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"size\", {\n        // Size\n        get: function () {\n            var _a;\n            return ((_a = this._size) !== null && _a !== void 0 ? _a : (this._size = this.newSize()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newSize = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputSizeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeSize = function (select) {\n        var size = this.size;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.RESIZE) {\n                size.show();\n            }\n            else {\n                size.hide();\n            }\n        }\n        else {\n            size.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"amount\", {\n        // Move amount\n        get: function () {\n            var _a;\n            return ((_a = this._amount) !== null && _a !== void 0 ? _a : (this._amount = this.newAmount()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newAmount = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAmountLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeAmount = function (select) {\n        var amount = this.amount;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            var transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.MOVE ||\n                transformType === EShapeActionValueTransformType.ROTATE) {\n                amount.show();\n            }\n            else {\n                amount.hide();\n            }\n        }\n        else {\n            amount.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"contents\", {\n        // Value\n        get: function () {\n            var _a;\n            return ((_a = this._contents) !== null && _a !== void 0 ? _a : (this._contents = this.newContents()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newContents = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputValueLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeContents = function (select) {\n        var contents = this.contents;\n        if (select === EShapeActionValueType.CHANGE_TEXT) {\n            contents.show();\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.WRITE_BOTH:\n                case EShapeActionValueMiscType.WRITE_LOCAL:\n                case EShapeActionValueMiscType.WRITE_REMOTE:\n                    contents.show();\n                    break;\n                default:\n                    contents.hide();\n                    break;\n            }\n        }\n        else {\n            contents.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"initialization\", {\n        // Initialization\n        get: function () {\n            var _a;\n            return ((_a = this._initialization) !== null && _a !== void 0 ? _a : (this._initialization = this.newInitialization()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInitialization = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitializationLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeInitialization = function (select) {\n        var initialization = this.initialization;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    initialization.show();\n                    break;\n                default:\n                    initialization.hide();\n                    break;\n            }\n        }\n        else {\n            initialization.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"pointerEventsLayout\", {\n        // Pointer events layout\n        get: function () {\n            var _a;\n            return ((_a = this._pointerEventsLayout) !== null && _a !== void 0 ? _a : (this._pointerEventsLayout = this.newLabeled(null, this.pointerEvents)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangePointerEventsLayout = function (select) {\n        var pointerEventsLayout = this.pointerEventsLayout;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    pointerEventsLayout.show();\n                    break;\n                default:\n                    pointerEventsLayout.hide();\n                    break;\n            }\n        }\n        else {\n            pointerEventsLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"pointerEvents\", {\n        // Pointer events\n        get: function () {\n            var _a;\n            return ((_a = this._pointerEvents) !== null && _a !== void 0 ? _a : (this._pointerEvents = this.newPointerEvents()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newPointerEvents = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckPointEventsLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"targetName\", {\n        // Event Name / Cursor name\n        get: function () {\n            var _a;\n            return ((_a = this._targetName) !== null && _a !== void 0 ? _a : (this._targetName = this.newTargetName()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newTargetName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputTargetNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeTargetName = function (select) {\n        var targetName = this.targetName;\n        if (select === EShapeActionValueType.EMIT_EVENT ||\n            select === EShapeActionValueType.CHANGE_CURSOR) {\n            targetName.show();\n        }\n        else {\n            targetName.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"color\", {\n        // Color\n        get: function () {\n            var _a;\n            return ((_a = this._color) !== null && _a !== void 0 ? _a : (this._color = this.newColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newColor = function () {\n        var result = new DButtonColor({\n            weight: 1\n        });\n        result.dialog.on(\"open\", function () {\n            var dialogNew = result.dialog.new;\n            var dialogCurrent = result.dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"colorLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._colorLayout) !== null && _a !== void 0 ? _a : (this._colorLayout = this.newColorLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newColorLayout = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getButtonColorLabel()\n                    }\n                }),\n                this.color,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogAction.prototype.onChangeColorLayout = function (select) {\n        var colorLayout = this.colorLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            var changeColorTarget = this.changeColorTarget.value;\n            if (changeColorTarget === EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.COLOR ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.ALPHA) {\n                colorLayout.show();\n            }\n            else {\n                colorLayout.hide();\n            }\n        }\n        else if (select === EShapeActionValueType.BLINK) {\n            var blinkType = this.blinkType.value;\n            if (blinkType === EShapeActionValueBlinkType.COLOR_FILL ||\n                blinkType === EShapeActionValueBlinkType.COLOR_STROKE) {\n                colorLayout.show();\n            }\n            else {\n                colorLayout.hide();\n            }\n        }\n        else {\n            colorLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"target\", {\n        // Target\n        get: function () {\n            var _a;\n            return ((_a = this._target) !== null && _a !== void 0 ? _a : (this._target = this.newTarget()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newTarget = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputTargetLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeTarget = function (select) {\n        var target = this.target;\n        if (select === EShapeActionValueType.OPEN) {\n            target.show();\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            var miscType = this.miscType.value;\n            if (miscType == null) {\n                target.show();\n            }\n            else if (miscType === EShapeActionValueMiscType.HTML_ELEMENT ||\n                miscType === EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS ||\n                EShapeActionValueMiscType.EXTENSION <= miscType) {\n                target.hide();\n            }\n            else {\n                target.show();\n            }\n        }\n        else {\n            target.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"argument\", {\n        // Argument\n        get: function () {\n            var _a;\n            return ((_a = this._argument) !== null && _a !== void 0 ? _a : (this._argument = this.newArgument()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newArgument = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputArgumentLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeArgument = function (select) {\n        var argument = this.argument;\n        if (select === EShapeActionValueType.OPEN) {\n            var openType = this.openType.value;\n            if (openType === EShapeActionValueOpenType.DIALOG) {\n                var openDialogType = this.openDialogType.value;\n                if (openDialogType == null) {\n                    argument.hide();\n                }\n                else if (EShapeActionValueOpenDialogType.EXTENSION <= openDialogType) {\n                    argument.show();\n                }\n                else {\n                    argument.hide();\n                }\n            }\n            else {\n                argument.hide();\n            }\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            var miscType = this.miscType.value;\n            if (miscType != null && EShapeActionValueMiscType.EXTENSION <= miscType) {\n                argument.show();\n            }\n            else {\n                argument.hide();\n            }\n        }\n        else {\n            argument.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"colorCode\", {\n        // Color code\n        get: function () {\n            var _a;\n            return ((_a = this._colorCode) !== null && _a !== void 0 ? _a : (this._colorCode = this.newColorCode()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newColorCode = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputColorCodeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeColorCode = function (select) {\n        var colorCode = this.colorCode;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.CODE) {\n                colorCode.show();\n            }\n            else {\n                colorCode.hide();\n            }\n        }\n        else {\n            colorCode.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"alphaCode\", {\n        // Alpha code\n        get: function () {\n            var _a;\n            return ((_a = this._alphaCode) !== null && _a !== void 0 ? _a : (this._alphaCode = this.newAlphaCode()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newAlphaCode = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAlphaCodeLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeAlphaCode = function (select) {\n        var alphaCode = this.alphaCode;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.CODE) {\n                alphaCode.show();\n            }\n            else {\n                alphaCode.hide();\n            }\n        }\n        else {\n            alphaCode.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"brightness\", {\n        // Brightness\n        get: function () {\n            var _a;\n            return ((_a = this._brightness) !== null && _a !== void 0 ? _a : (this._brightness = this.newBrightness()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBrightness = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputBrightnessLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeBrightness = function (select) {\n        var brightness = this.brightness;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.BRIGHTNESS) {\n                brightness.show();\n            }\n            else {\n                brightness.hide();\n            }\n        }\n        else {\n            brightness.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"blend\", {\n        // Blend\n        get: function () {\n            var _a;\n            return ((_a = this._blend) !== null && _a !== void 0 ? _a : (this._blend = this.newBlend()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newBlend = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputBlendLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeBlend = function (select) {\n        var blend = this.blend;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            var changeColorTarget = this.changeColorTarget.value;\n            if (changeColorTarget === EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.COLOR ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.CODE) {\n                blend.show();\n            }\n            else {\n                blend.hide();\n            }\n        }\n        else {\n            blend.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"initial\", {\n        // Initial\n        get: function () {\n            var _a;\n            return ((_a = this._initial) !== null && _a !== void 0 ? _a : (this._initial = this.newInitial()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInitial = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeInitial = function (select) {\n        var initial = this.initial;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.TEXT:\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                        case EShapeActionValueOpenDialogType.BOOLEAN:\n                        case EShapeActionValueOpenDialogType.DATE:\n                        case EShapeActionValueOpenDialogType.TIME:\n                        case EShapeActionValueOpenDialogType.DATETIME:\n                            initial.show();\n                            break;\n                        default:\n                            initial.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    initial.hide();\n                    break;\n            }\n        }\n        else {\n            initial.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"step\", {\n        get: function () {\n            var _a;\n            return ((_a = this._step) !== null && _a !== void 0 ? _a : (this._step = this.newStep()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newStep = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputStepLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeStep = function (select) {\n        var step = this.step;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            step.show();\n                            break;\n                        default:\n                            step.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    step.hide();\n                    break;\n            }\n        }\n        else {\n            step.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"min\", {\n        get: function () {\n            var _a;\n            return ((_a = this._min) !== null && _a !== void 0 ? _a : (this._min = this.newMin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMin = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputMinLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeMin = function (select) {\n        var min = this.min;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            min.show();\n                            break;\n                        default:\n                            min.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    min.hide();\n                    break;\n            }\n        }\n        else {\n            min.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"max\", {\n        get: function () {\n            var _a;\n            return ((_a = this._max) !== null && _a !== void 0 ? _a : (this._max = this.newMax()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newMax = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputMaxLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogAction.prototype.onChangeMax = function (select) {\n        var max = this.max;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            max.show();\n                            break;\n                        default:\n                            max.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    max.hide();\n                    break;\n            }\n        }\n        else {\n            max.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"scaleLayout\", {\n        // Scale layout\n        get: function () {\n            var _a;\n            return ((_a = this._scaleLayout) !== null && _a !== void 0 ? _a : (this._scaleLayout = this.newScaleLayout()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newScaleLayout = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getInputScaleLabel()\n                    }\n                }),\n                this.scaleMin,\n                this.scaleMax,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogAction.prototype.onChangeScaleLayout = function (select) {\n        var scaleLayout = this.scaleLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            scaleLayout.show();\n        }\n        else {\n            scaleLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"scaleMin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._scaleMin) !== null && _a !== void 0 ? _a : (this._scaleMin = this.newScaleMin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newScaleMin = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"scaleMax\", {\n        // Scale max\n        get: function () {\n            var _a;\n            return ((_a = this._scaleMax) !== null && _a !== void 0 ? _a : (this._scaleMax = this.newScaleMax()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newScaleMax = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"checkBringToFront\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkBringToFront) !== null && _a !== void 0 ? _a : (this._checkBringToFront = this.newCheckBringToFront()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newCheckBringToFront = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBringToFrontLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"checkBringToFrontLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkBringToFrontLayout) !== null && _a !== void 0 ? _a : (this._checkBringToFrontLayout = this.newLabeled(null, this.checkBringToFront)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeCheckBringToFrontLayout = function (select) {\n        var checkBringToFrontLayout = this.checkBringToFrontLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            switch (this.showHideType.value) {\n                case EShapeActionValueShowHideType.LAYER:\n                    checkBringToFrontLayout.show();\n                    break;\n                default:\n                    checkBringToFrontLayout.hide();\n                    break;\n            }\n        }\n        else {\n            checkBringToFrontLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"inNewWindow\", {\n        // inNewWindow\n        get: function () {\n            var _a;\n            return ((_a = this._inNewWindow) !== null && _a !== void 0 ? _a : (this._inNewWindow = this.newInNewWindow()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.newInNewWindow = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckInNewWindowLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogAction.prototype, \"inNewWindowLayout\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inNewWindowLayout) !== null && _a !== void 0 ? _a : (this._inNewWindowLayout = this.newLabeled(null, this.inNewWindow)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChangeInNewWindowLayout = function (select) {\n        var inNewWindowLayout = this.inNewWindowLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    inNewWindowLayout.hide();\n                    break;\n                default:\n                    inNewWindowLayout.show();\n                    break;\n            }\n        }\n        else {\n            inNewWindowLayout.hide();\n        }\n    };\n    Object.defineProperty(EDialogAction.prototype, \"extension\", {\n        get: function () {\n            var _a;\n            return ((_a = this._extension) !== null && _a !== void 0 ? _a : (this._extension = new EDialogActionExtensionContainer(this, this.condition, this.content)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.onChange = function () {\n        var select = this.select.value;\n        this.onChangeAlphaCode(select);\n        this.onChangeAmount(select);\n        this.onChangeBlend(select);\n        this.onChangeBlinkTypeLayout(select);\n        this.onChangeBrightness(select);\n        this.onChangeChangeColorTargetLayout(select);\n        this.onChangeChangeColorTypeLayout(select);\n        this.onChangeChangeTextTypeLayout(select);\n        this.onChangeCondition(select);\n        this.onChangeColorCode(select);\n        this.onChangeColorLayout(select);\n        this.onChangeInitial(select);\n        this.onChangeStep(select);\n        this.onChangeMin(select);\n        this.onChangeMax(select);\n        this.onChangeIntervalLayout(select);\n        this.onChangeMiscTypeLayout(select);\n        this.onChangeMoveTypeLayout(select);\n        this.onChangeOnInputActionLayout(select);\n        this.onChangeWhenTypeLayout(select);\n        this.onChangeGestureTypeLayout(select);\n        this.onChangeGestureOperationTypeLayout(select);\n        this.onChangeSelectLayerLayout(select);\n        this.onChangeOpenTypeLayout(select);\n        this.onChangeOpenDialogTypeLayout(select);\n        this.onChangeOriginXLayout(select);\n        this.onChangeOriginYLayout(select);\n        this.onChangeResizeTypeLayout(select);\n        this.onChangeRotateTypeLayout(select);\n        this.onChangeShowHideTypeLayout(select);\n        this.onChangeSize(select);\n        this.onChangeTarget(select);\n        this.onChangeArgument(select);\n        this.onChangeTargetName(select);\n        this.onChangeContents(select);\n        this.onChangeInitialization(select);\n        this.onChangePointerEventsLayout(select);\n        this.onChangeTransformTypeLayout(select);\n        this.onChangeScaleLayout(select);\n        this.onChangeCheckBringToFrontLayout(select);\n        this.onChangeInNewWindowLayout(select);\n        this.extension.onChange(select);\n    };\n    EDialogAction.prototype.reset = function () {\n        this.select.value = EShapeActionValueType.SHOW_HIDE;\n        this.showHideType.value = EShapeActionValueShowHideType.SHAPE;\n        this.blinkType.value = EShapeActionValueBlinkType.VISIBILITY;\n        this.transformType.value = EShapeActionValueTransformType.MOVE;\n        this.changeColorType.values = [EShapeActionValueChangeColorType.FILL];\n        this.changeColorTarget.value = EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA;\n        this.resizeType.value = EShapeActionValueTransformResizeType.RELATIVE_SIZE;\n        this.originY.value = 0.5;\n        this.originX.value = 0.5;\n        this.moveType.value = EShapeActionValueTransformMoveType.RELATIVE_X;\n        this.rotateType.value = EShapeActionValueTransformRotateType.RELATIVE;\n        this.openType.value = EShapeActionValueOpenType.DIAGRAM;\n        this.openDialogType.value = EShapeActionValueOpenDialogType.TEXT;\n        this.changeTextType.value = EShapeActionValueChangeTextType.TEXT;\n        this.miscType.value = EShapeActionValueMiscType.INPUT_TEXT;\n        this.onInputAction.value = EShapeActionValueOnInputAction.WRITE_REMOTE;\n        this.whenType.value = UtilHtmlElementWhen.FOCUSED;\n        this.gestureType.value = EShapeActionValueGestureType.SHAPE;\n        this.gestureOperationType.values = this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL);\n        this.selectLayer.values = [];\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        this.condition.input.value = \"\";\n        this.size.input.value = \"\";\n        this.amount.input.value = \"\";\n        this.contents.input.value = \"\";\n        this.initialization.input.value = \"\";\n        this.pointerEvents.state.isActive = true;\n        this.targetName.input.value = \"\";\n        this.interval.value = 1000;\n        this.color.value.color = 0xffffff;\n        this.color.value.alpha = 1;\n        this.target.input.value = \"\";\n        this.argument.input.value = \"\";\n        this.colorCode.input.value = \"\";\n        this.alphaCode.input.value = \"\";\n        this.brightness.input.value = \"\";\n        this.blend.input.value = \"\";\n        this.initial.input.value = \"\";\n        this.step.input.value = \"\";\n        this.min.input.value = \"\";\n        this.max.input.value = \"\";\n        this.scaleMin.value = 0.05;\n        this.scaleMax.value = 20;\n        this.checkBringToFront.state.isActive = false;\n        this.inNewWindow.state.isActive = false;\n        this.extension.reset();\n        this.onChange();\n        return this;\n    };\n    Object.defineProperty(EDialogAction.prototype, \"value\", {\n        get: function () {\n            var _a, _b, _c, _d;\n            var select = this.select.value;\n            var condition = this.condition.input.value;\n            if (select != null) {\n                switch (select) {\n                    case EShapeActionValueType.SHOW_HIDE:\n                        switch (this.showHideType.value) {\n                            case EShapeActionValueShowHideType.SHAPE:\n                            case null:\n                                return new EShapeActionValueShowHideShape(condition);\n                            case EShapeActionValueShowHideType.LAYER:\n                                return new EShapeActionValueShowHideLayer(condition, this.selectLayer.values.slice(0), this.checkBringToFront.state.isActive);\n                        }\n                        break;\n                    case EShapeActionValueType.BLINK:\n                        var blinkType = this.blinkType.value || EShapeActionValueBlinkType.VISIBILITY;\n                        var interval = this.interval.value;\n                        var blinkColor = this.color.value;\n                        return new EShapeActionValueBlink(blinkType, condition, interval, blinkColor.color, blinkColor.alpha);\n                    case EShapeActionValueType.CHANGE_COLOR:\n                        var changeColorType = EShapeActionValueChangeColorTypes.pack(this.changeColorType.values);\n                        var changeColorTarget = this.changeColorTarget.value ||\n                            EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA;\n                        switch (changeColorTarget) {\n                            case EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\n                            case EShapeActionValueChangeColorTarget.COLOR:\n                            case EShapeActionValueChangeColorTarget.ALPHA:\n                                var changeColor = this.color.value;\n                                return new EShapeActionValueChangeColor(changeColorType, condition, changeColorTarget, changeColor.color, changeColor.alpha, this.blend.input.value);\n                            case EShapeActionValueChangeColorTarget.CODE:\n                                return new EShapeActionValueChangeColorCode(changeColorType, condition, this.colorCode.input.value, this.alphaCode.input.value, this.blend.input.value);\n                            case EShapeActionValueChangeColorTarget.BRIGHTNESS:\n                                return new EShapeActionValueChangeColorBrightness(changeColorType, condition, this.brightness.input.value);\n                        }\n                        break;\n                    case EShapeActionValueType.TRANSFORM:\n                        var transformType = this.transformType.value;\n                        var originX = this.originX.value;\n                        var originY = this.originY.value;\n                        switch (transformType) {\n                            case EShapeActionValueTransformType.RESIZE:\n                                var resizeType = this.resizeType.value ||\n                                    EShapeActionValueTransformResizeType.RELATIVE_SIZE;\n                                return new EShapeActionValueTransformResize(resizeType, condition, originX, originY, this.size.input.value);\n                            case EShapeActionValueTransformType.MOVE:\n                                var moveType = this.moveType.value ||\n                                    EShapeActionValueTransformMoveType.RELATIVE_X;\n                                return new EShapeActionValueTransformMove(moveType, condition, this.amount.input.value);\n                            case EShapeActionValueTransformType.ROTATE:\n                                var rotateType = this.rotateType.value ||\n                                    EShapeActionValueTransformRotateType.RELATIVE;\n                                return new EShapeActionValueTransformRotate(rotateType, condition, originX, originY, this.amount.input.value);\n                        }\n                        break;\n                    case EShapeActionValueType.CHANGE_TEXT:\n                        var changeTextType = this.changeTextType.value || EShapeActionValueChangeTextType.TEXT;\n                        return new EShapeActionValueChangeText(changeTextType, condition, this.contents.input.value);\n                    case EShapeActionValueType.OPEN:\n                        var openType = (_a = this.openType.value) !== null && _a !== void 0 ? _a : EShapeActionValueOpenType.DIAGRAM;\n                        switch (openType) {\n                            case EShapeActionValueOpenType.DIALOG:\n                                var openDialogType = (_b = this.openDialogType.value) !== null && _b !== void 0 ? _b : EShapeActionValueOpenDialogType.TEXT;\n                                switch (openDialogType) {\n                                    case EShapeActionValueOpenDialogType.INTEGER:\n                                    case EShapeActionValueOpenDialogType.REAL:\n                                        return new EShapeActionValueOpenDialog(condition, this.target.input.value, (_c = this.onInputAction.value) !== null && _c !== void 0 ? _c : EShapeActionValueOnInputAction.EMIT_EVENT, this.initial.input.value, this.step.input.value, this.min.input.value, this.max.input.value, openDialogType);\n                                    case EShapeActionValueOpenDialogType.TEXT:\n                                    case EShapeActionValueOpenDialogType.BOOLEAN:\n                                    case EShapeActionValueOpenDialogType.DATE:\n                                    case EShapeActionValueOpenDialogType.TIME:\n                                    case EShapeActionValueOpenDialogType.DATETIME:\n                                        return new EShapeActionValueOpenDialog(condition, this.target.input.value, (_d = this.onInputAction.value) !== null && _d !== void 0 ? _d : EShapeActionValueOnInputAction.EMIT_EVENT, this.initial.input.value, \"\", \"\", \"\", openDialogType);\n                                    default:\n                                        return new EShapeActionValueOpenDialogExtension(condition, this.target.input.value, this.argument.input.value, openDialogType);\n                                }\n                            case EShapeActionValueOpenType.DIAGRAM:\n                            case EShapeActionValueOpenType.PAGE:\n                                return new EShapeActionValueOpen(openType, condition, this.target.input.value, this.inNewWindow.state.isActive);\n                            default:\n                                return new EShapeActionValueOpenExtension(openType, condition, this.target.input.value, this.inNewWindow.state.isActive);\n                        }\n                    case EShapeActionValueType.EMIT_EVENT:\n                        return new EShapeActionValueEmitEvent(condition, this.targetName.input.value);\n                    case EShapeActionValueType.CHANGE_CURSOR:\n                        return new EShapeActionValueChangeCursor(condition, this.targetName.input.value);\n                    case EShapeActionValueType.GESTURE:\n                        return new EShapeActionValueGesture(condition, this.gestureType.value || EShapeActionValueGestureType.SHAPE, this.toGestureOperationType(this.gestureOperationType.values), this.scaleMin.value, this.scaleMax.value);\n                    case EShapeActionValueType.MISC:\n                        var miscType = this.miscType.value || EShapeActionValueMiscType.INPUT_TEXT;\n                        switch (miscType) {\n                            case EShapeActionValueMiscType.INPUT_TEXT:\n                            case EShapeActionValueMiscType.INPUT_REAL:\n                            case EShapeActionValueMiscType.INPUT_INTEGER:\n                                return new EShapeActionValueMiscInput(miscType, this.toWhenTypeValue(this.whenType.value), this.target.input.value, this.onInputAction.value ||\n                                    EShapeActionValueOnInputAction.EMIT_EVENT);\n                            case EShapeActionValueMiscType.EMIT_EVENT:\n                                return new EShapeActionValueMiscEmitEvent(condition, this.target.input.value);\n                            case EShapeActionValueMiscType.WRITE_BOTH:\n                            case EShapeActionValueMiscType.WRITE_LOCAL:\n                            case EShapeActionValueMiscType.WRITE_REMOTE:\n                                return new EShapeActionValueMiscWrite(miscType, condition, this.target.input.value, this.contents.input.value);\n                            case EShapeActionValueMiscType.HTML_ELEMENT:\n                                if (this.pointerEvents.state.isActive) {\n                                    return new EShapeActionValueMiscHtmlElement(miscType, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                                }\n                                else {\n                                    return new EShapeActionValueMiscHtmlElement(EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                                }\n                            case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                                return new EShapeActionValueMiscHtmlElement(miscType, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                            case EShapeActionValueMiscType.EXECUTE:\n                                return new EShapeActionValueMiscExecute(condition, this.target.input.value);\n                            default:\n                                if (EShapeActionValueMiscType.EXTENSION <= miscType) {\n                                    return new EShapeActionValueMiscExtension(miscType, condition, this.argument.input.value);\n                                }\n                        }\n                        break;\n                    default:\n                        return this.extension.value;\n                }\n            }\n            return null;\n        },\n        set: function (value) {\n            this.selectLayer.menu = new DMenu({\n                fit: true,\n                items: this.newSelectLayerMenuItemOptions()\n            });\n            if (value != null) {\n                this.select.value = value.type;\n                if (value instanceof EShapeActionValueShowHide) {\n                    this.condition.input.value = value.condition;\n                    this.showHideType.value = EShapeActionValueShowHideType.SHAPE;\n                }\n                else if (value instanceof EShapeActionValueShowHideShape) {\n                    this.condition.input.value = value.condition;\n                    this.showHideType.value = value.subtype;\n                }\n                else if (value instanceof EShapeActionValueShowHideLayer) {\n                    this.condition.input.value = value.condition;\n                    this.showHideType.value = value.subtype;\n                    this.selectLayer.values = value.layers.slice(0);\n                    this.checkBringToFront.state.isActive = value.bringToFront;\n                }\n                else if (value instanceof EShapeActionValueBlink) {\n                    this.condition.input.value = value.condition;\n                    this.blinkType.value = value.subtype;\n                    this.interval.value = value.interval;\n                    this.color.value.color = value.color;\n                    this.color.value.alpha = value.alpha;\n                }\n                else if (value instanceof EShapeActionValueChangeColor) {\n                    this.condition.input.value = value.condition;\n                    this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                    this.changeColorTarget.value = value.target;\n                    this.color.value.color = value.color;\n                    this.color.value.alpha = value.alpha;\n                    this.blend.input.value = value.blend;\n                }\n                else if (value instanceof EShapeActionValueChangeColorCode) {\n                    this.condition.input.value = value.condition;\n                    this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                    this.changeColorTarget.value = EShapeActionValueChangeColorTarget.CODE;\n                    this.colorCode.input.value = value.color;\n                    this.alphaCode.input.value = value.alpha;\n                    this.blend.input.value = value.blend;\n                }\n                else if (value instanceof EShapeActionValueChangeColorBrightness) {\n                    this.condition.input.value = value.condition;\n                    this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                    this.changeColorTarget.value = EShapeActionValueChangeColorTarget.BRIGHTNESS;\n                    this.brightness.input.value = value.brightness;\n                }\n                else if (value instanceof EShapeActionValueTransformResize) {\n                    this.condition.input.value = value.condition;\n                    this.transformType.value = EShapeActionValueTransformType.RESIZE;\n                    this.resizeType.value = value.opetype;\n                    this.originX.value = value.originX;\n                    this.originY.value = value.originY;\n                    this.size.input.value = value.amount;\n                }\n                else if (value instanceof EShapeActionValueTransformMove) {\n                    this.condition.input.value = value.condition;\n                    this.transformType.value = EShapeActionValueTransformType.MOVE;\n                    this.moveType.value = value.opetype;\n                    this.amount.input.value = value.amount;\n                }\n                else if (value instanceof EShapeActionValueTransformRotate) {\n                    this.condition.input.value = value.condition;\n                    this.transformType.value = EShapeActionValueTransformType.ROTATE;\n                    this.rotateType.value = value.opetype;\n                    this.originX.value = value.originX;\n                    this.originY.value = value.originY;\n                    this.amount.input.value = value.amount;\n                }\n                else if (value instanceof EShapeActionValueChangeText) {\n                    this.condition.input.value = value.condition;\n                    this.changeTextType.value = value.subtype;\n                    this.contents.input.value = value.value;\n                }\n                else if (value instanceof EShapeActionValueOpen) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.inNewWindow.state.isActive = value.inNewWindow;\n                }\n                else if (value instanceof EShapeActionValueOpenDialog) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.onInputAction.value = value.onInputAction;\n                    this.initial.input.value = value.initial;\n                    this.step.input.value = value.step;\n                    this.min.input.value = value.min;\n                    this.max.input.value = value.max;\n                    this.openDialogType.value = value.dialogType;\n                }\n                else if (value instanceof EShapeActionValueOpenDialogExtension) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.argument.input.value = value.argument;\n                    this.openDialogType.value = value.dialogType;\n                }\n                else if (value instanceof EShapeActionValueOpenExtension) {\n                    this.condition.input.value = value.condition;\n                    this.openType.value = value.subtype;\n                    this.target.input.value = value.target;\n                    this.inNewWindow.state.isActive = value.inNewWindow;\n                }\n                else if (value instanceof EShapeActionValueEmitEvent) {\n                    this.condition.input.value = value.condition;\n                    this.targetName.input.value = value.name;\n                }\n                else if (value instanceof EShapeActionValueChangeCursor) {\n                    this.condition.input.value = value.condition;\n                    this.targetName.input.value = value.name;\n                }\n                else if (value instanceof EShapeActionValueGesture) {\n                    this.condition.input.value = value.condition;\n                    this.gestureType.value = value.subtype;\n                    this.gestureOperationType.values = this.fromGestureOperationType(value.operationType);\n                    this.scaleMin.value = value.scaleMin;\n                    this.scaleMax.value = value.scaleMax;\n                }\n                else if (value instanceof EShapeActionValueMisc) {\n                    switch (value.subtype) {\n                        case EShapeActionValueMiscType.INPUT_TEXT:\n                        case EShapeActionValueMiscType.INPUT_REAL:\n                        case EShapeActionValueMiscType.INPUT_INTEGER:\n                            this.miscType.value = value.subtype;\n                            this.whenType.value = this.toWhenType(value.condition);\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.contents.input.value = value.value;\n                            break;\n                        case EShapeActionValueMiscType.HTML_ELEMENT:\n                            this.miscType.value = EShapeActionValueMiscType.HTML_ELEMENT;\n                            this.whenType.value = this.toWhenType(value.condition);\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.initialization.input.value = value.value;\n                            this.pointerEvents.state.isActive = true;\n                            break;\n                        case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                            this.miscType.value = EShapeActionValueMiscType.HTML_ELEMENT;\n                            this.whenType.value = this.toWhenType(value.condition);\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.initialization.input.value = value.value;\n                            this.pointerEvents.state.isActive = false;\n                            break;\n                        default:\n                            this.condition.input.value = value.condition;\n                            this.miscType.value = value.subtype;\n                            this.target.input.value = value.target;\n                            this.onInputAction.value = value.onInputAction;\n                            this.contents.input.value = value.value;\n                            break;\n                    }\n                }\n                else if (value instanceof EShapeActionValueMiscExecute) {\n                    this.miscType.value = EShapeActionValueMiscType.EXECUTE;\n                    this.condition.input.value = value.condition;\n                    this.target.input.value = value.target;\n                }\n                else if (value instanceof EShapeActionValueMiscExtension) {\n                    this.miscType.value = EShapeActionValueMiscType.EXTENSION;\n                    this.condition.input.value = value.condition;\n                    this.argument.input.value = value.argument;\n                }\n                else {\n                    this.extension.value = value;\n                }\n                this.onChange();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogAction.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogAction.prototype.getType = function () {\n        return \"EDialogAction\";\n    };\n    return EDialogAction;\n}(DDialogLayered));\nexport { EDialogAction };\n//# sourceMappingURL=e-dialog-action.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputTextAndLabel, DLayoutSpace, DTable, EShapeDataMapperImpl, EShapeDataValueImpl, EShapeDataValueScope } from \"@wcardinal/wcardinal-ui\";\nvar EDialogDataMappingValue = /** @class */ (function (_super) {\n    __extends(EDialogDataMappingValue, _super);\n    function EDialogDataMappingValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogDataMappingValue.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.inputSource, this.inputDestination, this.inputInitial, new DLayoutSpace({\n            height: 6\n        }), this.table);\n        return result;\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"inputSource\", {\n        get: function () {\n            var result = this._inputSource;\n            if (result == null) {\n                result = this.newInputSource();\n                this._inputSource = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newInputSource = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    input: function (value) {\n                        _this.onInputSourceChanged(value);\n                    },\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputSourceLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogDataMappingValue.prototype.onInputSourceChanged = function (value) {\n        this._newSource = value;\n        this.updateRows();\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"inputDestination\", {\n        get: function () {\n            var result = this._inputDestination;\n            if (result == null) {\n                result = this.newInputDestination();\n                this._inputDestination = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newInputDestination = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    input: function (value) {\n                        _this.onInputDestinationChanged(value);\n                    },\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputDestinationLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    EDialogDataMappingValue.prototype.onInputDestinationChanged = function (value) {\n        this._newDestination = value;\n        this.updateRows();\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"inputInitial\", {\n        get: function () {\n            var result = this._inputInitial;\n            if (result == null) {\n                result = this.newInputInitial();\n                this._inputInitial = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newInputInitial = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"table\", {\n        get: function () {\n            var result = this._table;\n            if (result == null) {\n                result = this.newTable();\n                this._table = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newTable = function () {\n        return new DTable({\n            width: \"padding\",\n            height: 300,\n            columns: this.newColumnOptions()\n        });\n    };\n    EDialogDataMappingValue.prototype.newColumnOptions = function () {\n        var theme = this.theme;\n        return [\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnDataIdLabel(),\n                editable: false,\n                sortable: true,\n                getter: function (row) {\n                    return row.id;\n                }\n            },\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnMappedToLabel(),\n                editable: false,\n                sortable: true,\n                getter: function (row) {\n                    return row.mappedId;\n                }\n            }\n        ];\n    };\n    EDialogDataMappingValue.prototype.set = function (value, shape) {\n        var isChanged = false;\n        if (value !== undefined) {\n            if (value != null) {\n                this.inputSource.input.value = value[0];\n                this.inputDestination.input.value = value[1];\n                this.inputInitial.input.value = value[2];\n                this._newSource = value[0];\n                this._newDestination = value[1];\n            }\n            else {\n                this.inputSource.input.value = \"\";\n                this.inputDestination.input.value = \"\";\n                this.inputInitial.input.value = \"\";\n                this._newSource = \"\";\n                this._newDestination = \"\";\n            }\n            isChanged = true;\n        }\n        if (shape !== undefined) {\n            this._ids = this.toIds(shape);\n            isChanged = true;\n        }\n        if (isChanged) {\n            this.updateRows();\n        }\n        return this;\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"value\", {\n        get: function () {\n            return [\n                this.inputSource.input.value.trim(),\n                this.inputDestination.input.value.trim(),\n                this.inputInitial.input.value.trim()\n            ];\n        },\n        set: function (value) {\n            this.set(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogDataMappingValue.prototype.toIds = function (shape) {\n        var result = [];\n        if (shape != null) {\n            var ids = new Set();\n            this.newIds(shape.children, ids);\n            ids.forEach(function (id) {\n                result.push(id);\n            });\n            result.sort();\n        }\n        return result;\n    };\n    EDialogDataMappingValue.prototype.newIds = function (shapes, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var data = shape.data;\n            for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                var value = data.get(j);\n                if (value && value.scope !== EShapeDataValueScope.PRIVATE) {\n                    result.add(value.id);\n                }\n            }\n            var children = shape.children;\n            if (0 < children.length) {\n                this.newIds(children, result);\n            }\n        }\n    };\n    Object.defineProperty(EDialogDataMappingValue.prototype, \"onUpdateRowsBound\", {\n        get: function () {\n            var result = this._onUpdateRowsBound;\n            if (result == null) {\n                result = this.newOnUpdateRowsBound();\n                this._onUpdateRowsBound = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataMappingValue.prototype.newOnUpdateRowsBound = function () {\n        var _this = this;\n        return function () {\n            _this.onUpdateRows();\n        };\n    };\n    EDialogDataMappingValue.prototype.onUpdateRows = function () {\n        this._onUpdateRowsTimeout = undefined;\n        if (this._isRowsDirty) {\n            this._isRowsDirty = false;\n            this.table.data.clearAndAddAll(this.newRows());\n            this._onUpdateRowsTimeout = window.setTimeout(this.onUpdateRowsBound, 100);\n        }\n    };\n    EDialogDataMappingValue.prototype.newRows = function () {\n        var ids = this._ids;\n        if (ids == null || ids.length <= 0) {\n            return [];\n        }\n        // Source\n        var mapper = this._mapper;\n        var newSource = this._newSource;\n        if (mapper === undefined || this._lastSource !== newSource) {\n            this._lastSource = newSource;\n            if (newSource != null) {\n                var newSourceTrimmed = newSource.trim();\n                if (0 < newSourceTrimmed.length) {\n                    mapper = new EShapeDataMapperImpl(newSource);\n                }\n                else {\n                    mapper = null;\n                }\n            }\n            else {\n                mapper = null;\n            }\n        }\n        // Destination\n        var destinations = this._destinations;\n        var newDestination = this._newDestination;\n        if (destinations === undefined || this._lastDestination !== newDestination) {\n            this._lastDestination = newDestination;\n            destinations = EShapeDataMapperImpl.split(newDestination);\n        }\n        // Rows\n        var result = [];\n        if (mapper != null) {\n            var value = new EShapeDataValueImpl();\n            value.initial = \"\";\n            for (var i = 0, imax = ids.length; i < imax; ++i) {\n                var id = ids[i];\n                value.id = id;\n                if (mapper.map(value, destinations, \"\")) {\n                    result.push({\n                        id: id,\n                        mappedId: value.id\n                    });\n                }\n            }\n        }\n        else {\n            for (var i = 0, imax = ids.length; i < imax; ++i) {\n                var id = ids[i];\n                result.push({\n                    id: id,\n                    mappedId: id\n                });\n            }\n        }\n        return result;\n    };\n    EDialogDataMappingValue.prototype.updateRows = function () {\n        this._isRowsDirty = true;\n        if (this._onUpdateRowsTimeout == null) {\n            this.onUpdateRows();\n        }\n    };\n    EDialogDataMappingValue.prototype.getType = function () {\n        return \"EDialogDataMappingValue\";\n    };\n    return EDialogDataMappingValue;\n}(DDialogLayered));\nexport { EDialogDataMappingValue };\n//# sourceMappingURL=e-dialog-data-mapping-value.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputInteger, DInputIntegerAndLabel, DInputLabel, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DSelect, EShapeDataValueExtensions, EShapeDataValueImpl, EShapeDataValueOrder, EShapeDataValueRangeType, EShapeDataValueScope, EShapeDataValueType } from \"@wcardinal/wcardinal-ui\";\nvar EDialogDataValue = /** @class */ (function (_super) {\n    __extends(EDialogDataValue, _super);\n    function EDialogDataValue() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogDataValue.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.layoutType, this.layoutScope, this.inputId, this.inputAs, this.inputInitial, this.layoutInterval, this.inputFormat, this.layoutRangeType, this.inputRangeFrom, this.inputRangeTo, this.inputCapacity, this.layoutOrder);\n        return result;\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputId\", {\n        get: function () {\n            var result = this._inputId;\n            if (result == null) {\n                result = this.newInputId();\n                this._inputId = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputId = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputIdLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputAs\", {\n        get: function () {\n            var result = this._inputAs;\n            if (result == null) {\n                result = this.newInputAs();\n                this._inputAs = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputAs = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAsLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutType\", {\n        get: function () {\n            var result = this._layoutType;\n            if (result == null) {\n                result = this.newLayoutType();\n                this._layoutType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutType = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectTypeLabel()\n                    }\n                }),\n                this.selectType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectType\", {\n        get: function () {\n            var _this = this;\n            var result = this._selectType;\n            if (result == null) {\n                result = this.newSelectType();\n                result.on(\"change\", function () {\n                    _this.onChange();\n                });\n                this._selectType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueType.NUMBER,\n            menu: {\n                items: this.newSelectTypeItems()\n            }\n        });\n    };\n    EDialogDataValue.prototype.newSelectTypeItems = function () {\n        var theme = this.theme;\n        var result = [\n            {\n                value: EShapeDataValueType.BOOLEAN,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.BOOLEAN)\n                }\n            },\n            {\n                value: EShapeDataValueType.BOOLEAN_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.BOOLEAN_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.NUMBER,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.NUMBER)\n                }\n            },\n            {\n                value: EShapeDataValueType.NUMBER_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.NUMBER_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.STRING,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.STRING)\n                }\n            },\n            {\n                value: EShapeDataValueType.STRING_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.STRING_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.OBJECT,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.OBJECT)\n                }\n            },\n            {\n                value: EShapeDataValueType.OBJECT_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.OBJECT_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.TICKER,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.TICKER)\n                }\n            }\n        ];\n        EShapeDataValueExtensions.each(function (extension) {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutScope\", {\n        get: function () {\n            var result = this._layoutScope;\n            if (result == null) {\n                result = this.newLayoutScope();\n                this._layoutScope = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutScope = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectScopeLabel()\n                    }\n                }),\n                this.selectScope,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectScope\", {\n        get: function () {\n            var result = this._selectScope;\n            if (result == null) {\n                result = this.newSelectScope();\n                this._selectScope = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectScope = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueScope.PUBLIC,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueScope.PUBLIC,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PUBLIC)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueScope.PROTECTED,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PROTECTED)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueScope.PRIVATE,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PRIVATE)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputInitial\", {\n        get: function () {\n            var result = this._inputInitial;\n            if (result == null) {\n                result = this.newInputInitial();\n                this._inputInitial = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputInitial = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutInterval\", {\n        get: function () {\n            var result = this._layoutInterval;\n            if (result == null) {\n                result = this.newLayoutInterval();\n                this._layoutInterval = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutInterval = function () {\n        var theme = this.theme;\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalLabel()\n                    }\n                }),\n                this.inputInterval,\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalUnitLabel(),\n                        align: {\n                            horizontal: \"LEFT\"\n                        }\n                    }\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputInterval\", {\n        get: function () {\n            var result = this._inputInterval;\n            if (result == null) {\n                result = this.newInputInterval();\n                this._inputInterval = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputInterval = function () {\n        var _this = this;\n        return new DInputInteger({\n            weight: 1,\n            text: {\n                value: 1000\n            },\n            step: 1,\n            min: 0,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputFormat\", {\n        get: function () {\n            var result = this._inputFormat;\n            if (result == null) {\n                result = this.newInputFormat();\n                this._inputFormat = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputFormat = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputFormatLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutRangeType\", {\n        get: function () {\n            var result = this._layoutRangeType;\n            if (result == null) {\n                result = this.newLayoutRangeType();\n                this._layoutRangeType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutRangeType = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectRangeTypeLabel()\n                    }\n                }),\n                this.selectRangeType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectRangeType\", {\n        get: function () {\n            var _this = this;\n            var result = this._selectRangeType;\n            if (result == null) {\n                result = this.newSelectRangeType();\n                result.on(\"change\", function () {\n                    _this.onChange();\n                });\n                this._selectRangeType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectRangeType = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueRangeType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueRangeType.NONE,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.FROM,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.FROM)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.TO,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.TO)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.FROM_TO,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.FROM_TO)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputRangeFrom\", {\n        get: function () {\n            var result = this._inputRangeFrom;\n            if (result == null) {\n                result = this.newInputRangeFrom();\n                this._inputRangeFrom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputRangeFrom = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 90,\n                text: {\n                    value: this.theme.getInputRangeFromLabel()\n                }\n            },\n            space: {\n                width: 90\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputRangeTo\", {\n        get: function () {\n            var result = this._inputRangeTo;\n            if (result == null) {\n                result = this.newInputRangeTo();\n                this._inputRangeTo = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputRangeTo = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            input: {\n                weight: 1,\n                text: {\n                    value: 1\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 90,\n                text: {\n                    value: this.theme.getInputRangeToLabel()\n                }\n            },\n            space: {\n                width: 90\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"inputCapacity\", {\n        get: function () {\n            var result = this._inputCapacity;\n            if (result == null) {\n                result = this.newInputCapacity();\n                this._inputCapacity = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newInputCapacity = function () {\n        var _this = this;\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputCapacityLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"layoutOrder\", {\n        get: function () {\n            var result = this._layoutOrder;\n            if (result == null) {\n                result = this.newLayoutOrder();\n                this._layoutOrder = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newLayoutOrder = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectOrderLabel()\n                    }\n                }),\n                this.selectOrder,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"selectOrder\", {\n        get: function () {\n            var result = this._selectOrder;\n            if (result == null) {\n                result = this.newSelectOrder();\n                this._selectOrder = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.newSelectOrder = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueOrder.ASCENDING,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueOrder.ASCENDING,\n                        text: {\n                            value: theme.getSelectOrderValueLabel(EShapeDataValueOrder.ASCENDING)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueOrder.DESCENDING,\n                        text: {\n                            value: theme.getSelectOrderValueLabel(EShapeDataValueOrder.DESCENDING)\n                        }\n                    }\n                ]\n            },\n            on: {\n                init: function (self) {\n                    _this._selectOrder = self;\n                }\n            }\n        });\n    };\n    EDialogDataValue.prototype.onChange = function () {\n        var type = this.selectType.value;\n        switch (type) {\n            case EShapeDataValueType.BOOLEAN:\n            case EShapeDataValueType.BOOLEAN_ARRAY:\n            case EShapeDataValueType.NUMBER:\n            case EShapeDataValueType.NUMBER_ARRAY:\n            case EShapeDataValueType.STRING:\n            case EShapeDataValueType.STRING_ARRAY:\n            case EShapeDataValueType.OBJECT:\n            case EShapeDataValueType.OBJECT_ARRAY:\n                this.layoutScope.show();\n                this.inputId.show();\n                this.inputAs.show();\n                this.inputInitial.show();\n                this.layoutInterval.hide();\n                this.inputFormat.show();\n                if (type === EShapeDataValueType.NUMBER) {\n                    this.layoutRangeType.show();\n                    var rangeType = this.selectRangeType.value;\n                    if (rangeType != null && (rangeType & EShapeDataValueRangeType.FROM) !== 0) {\n                        this.inputRangeFrom.show();\n                    }\n                    else {\n                        this.inputRangeFrom.hide();\n                    }\n                    if (rangeType != null && (rangeType & EShapeDataValueRangeType.TO) !== 0) {\n                        this.inputRangeTo.show();\n                    }\n                    else {\n                        this.inputRangeTo.hide();\n                    }\n                }\n                else {\n                    this.layoutRangeType.hide();\n                    this.inputRangeFrom.hide();\n                    this.inputRangeTo.hide();\n                }\n                break;\n            case EShapeDataValueType.TICKER:\n                this.layoutScope.hide();\n                this.inputId.hide();\n                this.inputAs.show();\n                this.inputInitial.hide();\n                this.layoutInterval.show();\n                this.inputFormat.hide();\n                this.layoutRangeType.hide();\n                this.inputRangeFrom.hide();\n                this.inputRangeTo.hide();\n                break;\n            default:\n                this.layoutScope.hide();\n                this.inputId.hide();\n                this.inputAs.show();\n                this.inputInitial.hide();\n                this.layoutInterval.hide();\n                this.inputFormat.hide();\n                this.layoutRangeType.hide();\n                this.inputRangeFrom.hide();\n                this.inputRangeTo.hide();\n                break;\n        }\n    };\n    EDialogDataValue.prototype.reset = function () {\n        this.selectType.value = EShapeDataValueType.NUMBER;\n        this.selectScope.value = EShapeDataValueScope.PUBLIC;\n        this.inputId.input.value = \"\";\n        this.inputAs.input.value = \"\";\n        this.inputInitial.input.value = \"\";\n        this.inputInterval.value = 1000;\n        this.inputFormat.input.value = \"\";\n        this.selectRangeType.value = EShapeDataValueRangeType.NONE;\n        this.inputRangeFrom.input.value = 0;\n        this.inputRangeTo.input.value = 1;\n        this.inputCapacity.input.value = 0;\n        this.selectOrder.value = EShapeDataValueOrder.ASCENDING;\n        this.onChange();\n        return this;\n    };\n    Object.defineProperty(EDialogDataValue.prototype, \"value\", {\n        get: function () {\n            var _a, _b, _c, _d;\n            var result = new EShapeDataValueImpl();\n            var type = (_a = this.selectType.value) !== null && _a !== void 0 ? _a : EShapeDataValueType.NUMBER;\n            var scope = (_b = this.selectScope.value) !== null && _b !== void 0 ? _b : EShapeDataValueScope.PUBLIC;\n            var order = (_c = this.selectOrder.value) !== null && _c !== void 0 ? _c : EShapeDataValueOrder.ASCENDING;\n            result.type = type;\n            switch (type) {\n                case EShapeDataValueType.BOOLEAN:\n                case EShapeDataValueType.BOOLEAN_ARRAY:\n                case EShapeDataValueType.NUMBER:\n                case EShapeDataValueType.NUMBER_ARRAY:\n                case EShapeDataValueType.STRING:\n                case EShapeDataValueType.STRING_ARRAY:\n                case EShapeDataValueType.OBJECT:\n                case EShapeDataValueType.OBJECT_ARRAY:\n                    result.scope = scope;\n                    result.id = this.inputId.input.value.trim();\n                    result.as = this.inputAs.input.value.trim();\n                    result.initial = this.inputInitial.input.value.trim();\n                    result.format = this.inputFormat.input.value.trim();\n                    if (type === EShapeDataValueType.NUMBER) {\n                        result.range.type = (_d = this.selectRangeType.value) !== null && _d !== void 0 ? _d : EShapeDataValueRangeType.NONE;\n                        result.range.from = this.inputRangeFrom.input.value;\n                        result.range.to = this.inputRangeTo.input.value;\n                    }\n                    else {\n                        result.range.type = EShapeDataValueRangeType.NONE;\n                        result.range.from = 0;\n                        result.range.to = 1;\n                    }\n                    result.order = order;\n                    break;\n                case EShapeDataValueType.TICKER:\n                    result.scope = EShapeDataValueScope.PUBLIC;\n                    result.id = \"\";\n                    result.as = this.inputAs.input.value.trim();\n                    result.initial = \"\".concat(this.inputInterval.value);\n                    result.format = \"\";\n                    result.range.type = EShapeDataValueRangeType.NONE;\n                    result.range.from = 0;\n                    result.range.to = 1;\n                    result.order = order;\n                    break;\n                default:\n                    result.scope = EShapeDataValueScope.PUBLIC;\n                    result.id = \"\";\n                    result.as = this.inputAs.input.value.trim();\n                    result.initial = \"\";\n                    result.format = \"\";\n                    result.range.type = EShapeDataValueRangeType.NONE;\n                    result.range.from = 0;\n                    result.range.to = 1;\n                    result.order = order;\n                    break;\n            }\n            return result;\n        },\n        set: function (value) {\n            if (value != null) {\n                this.selectType.value = value.type;\n                this.selectScope.value = value.scope;\n                this.inputId.input.value = value.id;\n                this.inputAs.input.value = value.as;\n                if (value.type === EShapeDataValueType.TICKER) {\n                    this.inputInitial.input.value = \"\";\n                    this.inputInterval.value = this.toInterval(value.initial);\n                }\n                else {\n                    this.inputInitial.input.value = value.initial;\n                    this.inputInterval.value = 1000;\n                }\n                this.inputFormat.input.value = value.format;\n                this.selectRangeType.value = value.range.type;\n                this.inputRangeFrom.input.value = value.range.from;\n                this.inputRangeTo.input.value = value.range.to;\n                this.inputCapacity.input.value = value.capacity;\n                this.selectOrder.value = value.order;\n                this.onChange();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogDataValue.prototype.toInterval = function (target) {\n        try {\n            var result = parseInt(target, 10);\n            if (result === result) {\n                return Math.max(0, result);\n            }\n        }\n        catch (_a) {\n            // DO NOTHING\n        }\n        return 1000;\n    };\n    EDialogDataValue.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogDataValue.prototype.getType = function () {\n        return \"EDialogDataValue\";\n    };\n    return EDialogDataValue;\n}(DDialogLayered));\nexport { EDialogDataValue };\n//# sourceMappingURL=e-dialog-data-value.js.map","import { __extends } from \"tslib\";\nimport { DButtonCheck, DButtonColor, DDialogLayered, DInputLabel, DInputReal, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DSelectMultiple, EShapeActionValueGestureOperationType } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValue } from \"./e-dialog-layer-value\";\nimport { EDialogLayerValueBackground } from \"./e-dialog-layer-value-background\";\nvar EDialogLayer = /** @class */ (function (_super) {\n    __extends(EDialogLayer, _super);\n    function EDialogLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogLayer.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.inputName, this.inputPositionLayout, this.inputSizeLayout, this.checkBackgroundLayout, this.colorBackgroundLayout, this.selectGestureLayout, this.checkVisibleLayout, this.checkInteractiveLayout);\n        return result;\n    };\n    EDialogLayer.prototype.newLabel = function (label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    };\n    EDialogLayer.prototype.newSpace = function () {\n        return new DLayoutSpace({\n            width: 60\n        });\n    };\n    EDialogLayer.prototype.newLabeled = function (label, inputA, inputB) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                inputA,\n                inputB,\n                this.newSpace()\n            ]\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputName\", {\n        get: function () {\n            var result = this._inputName;\n            if (result == null) {\n                result = this.newInputName();\n                this._inputName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputX\", {\n        get: function () {\n            var result = this._inputX;\n            if (result == null) {\n                result = this.newInputX();\n                this._inputX = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputY\", {\n        get: function () {\n            var result = this._inputY;\n            if (result == null) {\n                result = this.newInputY();\n                this._inputY = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputPositionLayout\", {\n        get: function () {\n            var result = this._inputPositionLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getInputPositionLabel(), this.inputX, this.inputY);\n                this._inputPositionLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"inputWidth\", {\n        get: function () {\n            var result = this._inputWidth;\n            if (result == null) {\n                result = this.newInputWidth();\n                this._inputWidth = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputWidth = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputHeight\", {\n        get: function () {\n            var result = this._inputHeight;\n            if (result == null) {\n                result = this.newInputHeight();\n                this._inputHeight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newInputHeight = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"inputSizeLayout\", {\n        get: function () {\n            var result = this._inputSizeLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getInputSizeLabel(), this.inputWidth, this.inputHeight);\n                this._inputSizeLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"checkBackground\", {\n        get: function () {\n            var result = this._checkBackground;\n            if (result == null) {\n                result = this.newCheckBackground();\n                this._checkBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newCheckBackground = function () {\n        var _this = this;\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBackgroundLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            },\n            on: {\n                active: function () {\n                    _this.onCheckBackgroundChange(true);\n                },\n                inactive: function () {\n                    _this.onCheckBackgroundChange(false);\n                }\n            }\n        });\n    };\n    EDialogLayer.prototype.onCheckBackgroundChange = function (isActive) {\n        this.colorBackground.state.isDisabled = !isActive;\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"checkBackgroundLayout\", {\n        get: function () {\n            var result = this._checkBackgroundLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getTextBackgroundLabel(), this.checkBackground, null);\n                this._checkBackgroundLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"colorBackground\", {\n        get: function () {\n            var result = this._colorBackground;\n            if (result == null) {\n                result = this.newColorBackground();\n                this._colorBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newColorBackground = function () {\n        return new DButtonColor({\n            weight: 1\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"colorBackgroundLayout\", {\n        get: function () {\n            var result = this._colorBackgroundLayout;\n            if (result == null) {\n                result = this.newLabeled(null, this.colorBackground, null);\n                this._colorBackgroundLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"checkVisible\", {\n        get: function () {\n            var result = this._checkVisible;\n            if (result == null) {\n                result = this.newCheckVisible();\n                this._checkVisible = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newCheckVisible = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckVisibleLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"checkVisibleLayout\", {\n        get: function () {\n            var result = this._checkVisibleLayout;\n            if (result == null) {\n                result = this.newLabeled(null, this.checkVisible, null);\n                this._checkVisibleLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"checkInteractive\", {\n        get: function () {\n            var result = this._checkInteractive;\n            if (result == null) {\n                result = this.newCheckInteractive();\n                this._checkInteractive = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newCheckInteractive = function () {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckInteractiveLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"checkInteractiveLayout\", {\n        get: function () {\n            var result = this._checkInteractiveLayout;\n            if (result == null) {\n                result = this.newLabeled(null, this.checkInteractive, null);\n                this._checkInteractiveLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EDialogLayer.prototype, \"selectGesture\", {\n        get: function () {\n            var result = this._selectGesture;\n            if (result == null) {\n                result = this.newSelectGesture();\n                this._selectGesture = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.newSelectGesture = function () {\n        var theme = this.theme;\n        return new DSelectMultiple({\n            weight: 1,\n            values: this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL),\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureOperationType.DRAG,\n                        text: {\n                            value: theme.getSelectGestureValueLabel(EShapeActionValueGestureOperationType.DRAG)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueGestureOperationType.PINCH,\n                        text: {\n                            value: theme.getSelectGestureValueLabel(EShapeActionValueGestureOperationType.PINCH)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    };\n    EDialogLayer.prototype.toGestureOperationType = function (types) {\n        var result = EShapeActionValueGestureOperationType.NONE;\n        for (var i = 0, imax = types.length; i < imax; ++i) {\n            result |= types[i];\n        }\n        return result;\n    };\n    EDialogLayer.prototype.fromGestureOperationType = function (type) {\n        var result = [];\n        if (type & EShapeActionValueGestureOperationType.DRAG) {\n            result.push(EShapeActionValueGestureOperationType.DRAG);\n        }\n        if (type & EShapeActionValueGestureOperationType.PINCH) {\n            result.push(EShapeActionValueGestureOperationType.PINCH);\n        }\n        return result;\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"selectGestureLayout\", {\n        get: function () {\n            var result = this._selectGestureLayout;\n            if (result == null) {\n                result = this.newLabeled(this.theme.getSelectGestureLabel(), this.selectGesture, null);\n                this._selectGestureLayout = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.reset = function (width, height) {\n        this.inputName.input.value = \"\";\n        this.inputX.value = 0;\n        this.inputY.value = 0;\n        this.inputWidth.value = width;\n        this.inputHeight.value = height;\n        this.checkBackground.state.isActive = false;\n        this.colorBackground.value.color = 0xffffff;\n        this.colorBackground.value.alpha = 1;\n        this.checkVisible.state.isActive = true;\n        this.checkInteractive.state.isActive = true;\n        this.selectGesture.values = [];\n        this.onCheckBackgroundChange(false);\n        return this;\n    };\n    Object.defineProperty(EDialogLayer.prototype, \"value\", {\n        get: function () {\n            return new EDialogLayerValue(this.inputName.input.value, this.inputX.value, this.inputY.value, this.inputWidth.value, this.inputHeight.value, new EDialogLayerValueBackground(this.checkBackground.state.isActive, this.colorBackground.value.color, this.colorBackground.value.alpha), this.checkVisible.state.isActive, this.checkInteractive.state.isActive, this.toGestureOperationType(this.selectGesture.values));\n        },\n        set: function (value) {\n            if (value != null) {\n                this.inputName.input.value = value.name;\n                this.inputX.value = value.x;\n                this.inputY.value = value.y;\n                this.inputWidth.value = value.width;\n                this.inputHeight.value = value.height;\n                this.checkBackground.state.isActive = value.background.enable;\n                this.colorBackground.value.color = value.background.color;\n                this.colorBackground.value.alpha = value.background.alpha;\n                this.checkVisible.state.isActive = value.visible;\n                this.checkInteractive.state.isActive = value.interactive;\n                this.selectGesture.values = this.fromGestureOperationType(value.gesture);\n                this.onCheckBackgroundChange(value.background.enable);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogLayer.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogLayer.prototype.getType = function () {\n        return \"EDialogLayer\";\n    };\n    return EDialogLayer;\n}(DDialogLayered));\nexport { EDialogLayer };\n//# sourceMappingURL=e-dialog-layer.js.map","import { __extends } from \"tslib\";\nimport { DDialogProcessing } from \"@wcardinal/wcardinal-ui\";\nvar EDialogProcessing = /** @class */ (function (_super) {\n    __extends(EDialogProcessing, _super);\n    function EDialogProcessing() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogProcessing.prototype.toReasonMalformedLabel = function (target) {\n        switch (target) {\n            case \"uid\":\n                return \"An ID\";\n            case \"password\":\n                return \"A password\";\n            case \"description\":\n                return \"A description\";\n            case \"name\":\n                return \"A name\";\n            case \"label\":\n                return \"A label\";\n            case \"summary\":\n                return \"A summary\";\n            default:\n                return \"Something\";\n        }\n    };\n    EDialogProcessing.prototype.toReasonMalformedRange = function (target) {\n        switch (target) {\n            case \"uid\":\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n            case \"password\":\n                return {\n                    lower: 6,\n                    upper: 32\n                };\n            case \"description\":\n                return {\n                    lower: 0,\n                    upper: 256\n                };\n            case \"name\":\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n            case \"label\":\n                return {\n                    lower: 0,\n                    upper: 16\n                };\n            case \"summary\":\n                return {\n                    lower: 0,\n                    upper: 32\n                };\n            default:\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n        }\n    };\n    EDialogProcessing.prototype.toReasonMalformed = function (at, target, reason) {\n        var label = this.toReasonMalformedLabel(target);\n        switch (reason) {\n            case \"short\":\n            case \"long\":\n                var range = this.toReasonMalformedRange(target);\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must be of \").concat(range.lower, \" to \").concat(range.upper, \"\\ncharacters long.\");\n            case \"simple\":\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must contain letters (A-Za-z_)\\nand digits (0-9).\");\n            case \"slash\":\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must not contain the slash mark (/).\");\n            case \"non-alphanumeric\":\n                return (\"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" must contain only letters (A-Za-z_),\\n\") +\n                    \"digits (0-9) and a sharp symbol (#).\");\n            default:\n                return \"Failed to save '\".concat(at, \"'.\\n\").concat(label, \" is invalid.\");\n        }\n    };\n    EDialogProcessing.prototype.toReasonTarget = function (at, target, targetLabel) {\n        if (target != null) {\n            return \"Failed to save '\".concat(at, \"'.\\n\").concat(targetLabel, \" '\").concat(target, \"' does not exit.\");\n        }\n        else {\n            return \"Failed to save '\".concat(at, \"'.\\n\").concat(targetLabel, \" is missing.\");\n        }\n    };\n    EDialogProcessing.prototype.toReasonTargetAt = function (at, target, atLabel, targetLabel) {\n        if (target != null) {\n            return \"Failed to save.\\n\".concat(atLabel, \" '\").concat(at, \"'\\nrequires \").concat(targetLabel, \" '\").concat(target, \"'.\");\n        }\n        else {\n            return \"Failed to save.\\n\".concat(atLabel, \" '\").concat(at, \"'\\nrequires \").concat(targetLabel, \".\");\n        }\n    };\n    EDialogProcessing.prototype.toReason = function (reason) {\n        if (reason == null) {\n            return undefined;\n        }\n        else {\n            if (0 < reason.length && reason[0] === \"{\") {\n                try {\n                    var parsed = JSON.parse(reason);\n                    switch (parsed.id) {\n                        case \"no-sensor-found\":\n                            return this.toReasonTarget(parsed.at, parsed.target, \"Sensor\");\n                        case \"no-device-model-found\":\n                            return this.toReasonTarget(parsed.at, parsed.target, \"Device model\");\n                        case \"malformed\":\n                            return this.toReasonMalformed(parsed.at, parsed.target, parsed.reason);\n                        case \"invalid-operation-mode\":\n                            return \"Failed to save.\\nInvalid operation mode.\";\n                        case \"no-graphic-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"A graphic sensor mapping\", \"a graphic\");\n                        case \"no-alarm-list-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"An alarm mapping\", \"an alarm list\");\n                        case \"no-trend-graph-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"A trend graph sensor mapping\", \"a trend graph\");\n                    }\n                }\n                catch (_a) {\n                    return undefined;\n                }\n            }\n            else {\n                switch (reason) {\n                    case \"duplication\":\n                        return \"Failed to save.\\nThe name has already been used.\";\n                    case \"duplications\":\n                        return \"Failed to save.\\nIDs must be unique.\";\n                    case \"invalid-operation-mode\":\n                        return \"Failed to save.\\nInvalid operation mode.\";\n                    case \"validation\":\n                        return \"A validation error has occurred.\";\n                    case \"validation-fail\":\n                        return \"A validation failed.\";\n                }\n            }\n        }\n        return undefined;\n    };\n    EDialogProcessing.prototype.toButtonText = function (reason) {\n        if (reason === \"validation\" || reason === \"validation-fail\" || reason != undefined) {\n            return \"OK\";\n        }\n        return \"Save\";\n    };\n    EDialogProcessing.prototype.reject = function (reason) {\n        _super.prototype.reject.call(this, this.toReason(reason));\n        // Button text\n        var footer = this.footer;\n        if (footer) {\n            var buttonOk = footer.buttonOk;\n            if (buttonOk) {\n                buttonOk.text = this.toButtonText(reason);\n            }\n        }\n    };\n    return EDialogProcessing;\n}(DDialogProcessing));\nexport { EDialogProcessing };\n//# sourceMappingURL=e-dialog-processing.js.map","import { __extends } from \"tslib\";\nimport { DDialogLayered, DInputLabel, DInputReal, DLayoutHorizontal, DLayoutSpace, DSelect, ESnapperTargetValue, ESnapperTargetValueType } from \"@wcardinal/wcardinal-ui\";\nvar EDialogSnap = /** @class */ (function (_super) {\n    __extends(EDialogSnap, _super);\n    function EDialogSnap() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EDialogSnap.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectDirectionLabel()\n                    }\n                }),\n                this.selectType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputPositionLabel()\n                    }\n                }),\n                this.inputPosition,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        return result;\n    };\n    Object.defineProperty(EDialogSnap.prototype, \"selectType\", {\n        get: function () {\n            var result = this._selectType;\n            if (result == null) {\n                result = this.newSelectType();\n                this._selectType = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogSnap.prototype.newSelectType = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: ESnapperTargetValueType.VERTICAL,\n            menu: {\n                items: [\n                    {\n                        value: ESnapperTargetValueType.VERTICAL,\n                        text: {\n                            value: theme.getSelectDirectionValueLabel(ESnapperTargetValueType.VERTICAL)\n                        }\n                    },\n                    {\n                        value: ESnapperTargetValueType.HORIZONTAL,\n                        text: {\n                            value: theme.getSelectDirectionValueLabel(ESnapperTargetValueType.HORIZONTAL)\n                        }\n                    }\n                ]\n            }\n        });\n    };\n    Object.defineProperty(EDialogSnap.prototype, \"inputPosition\", {\n        get: function () {\n            var result = this._inputPosition;\n            if (result == null) {\n                result = this.newInputPosition();\n                this._inputPosition = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogSnap.prototype.newInputPosition = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0\n            },\n            step: 1,\n            on: {\n                enter: function () {\n                    _this.ok();\n                }\n            }\n        });\n    };\n    EDialogSnap.prototype.reset = function () {\n        this.selectType.value = ESnapperTargetValueType.VERTICAL;\n        this.inputPosition.value = 0;\n        return this;\n    };\n    Object.defineProperty(EDialogSnap.prototype, \"value\", {\n        get: function () {\n            var type = this.selectType.value;\n            var position = this.inputPosition.value;\n            if (type != null) {\n                return new ESnapperTargetValue(type, position);\n            }\n            return null;\n        },\n        set: function (value) {\n            if (value != null) {\n                this.selectType.value = value.type;\n                this.inputPosition.value = value.position;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogSnap.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogSnap.prototype.getType = function () {\n        return \"EDialogSnap\";\n    };\n    return EDialogSnap;\n}(DDialogLayered));\nexport { EDialogSnap };\n//# sourceMappingURL=e-dialog-snap.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DButtonCheckRight, DDropdown, DInputText, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, DThemes, EShapeActionValueChangeColor } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogAction } from \"./e-dialog-action\";\nvar EEditorAction = /** @class */ (function (_super) {\n    __extends(EEditorAction, _super);\n    function EEditorAction(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var selection = options.selection;\n        _this._selection = selection;\n        _this._diagram = options.diagram;\n        _this.addChild(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                _this.buttonNew,\n                _this.buttonDelete,\n                _this.buttonBringForward,\n                _this.buttonSendBackward\n            ]\n        }));\n        _this.addChild(_this.actionList);\n        _this.addChild(_this.checkInteractive);\n        _this.addChild(_this.checkFocusable);\n        _this.addChild(_this.labelTitle);\n        _this.addChild(_this.inputTitle);\n        _this.addChild(_this.labelShortcut);\n        _this.addChild(_this.inputShortcut);\n        _this.addChild(_this.labelCursor);\n        _this.addChild(_this.dropdownCursor);\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var actionList = _this.actionList;\n        actionList.data.selection.on(\"change\", function () {\n            _this.onListSelectionChange(actionList);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorAction.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonNew\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.actionDialog\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                _this._selection.addActionValue(value);\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var first = _this.actionList.data.selection.first;\n                    if (first != null) {\n                        _this._selection.removeActionValue(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onListSelectionChangeButtonDelete = function (actionList) {\n        this.buttonDelete.state.isDisabled = actionList.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var actionList = _this.actionList;\n                    var first = actionList.data.selection.first;\n                    var items = actionList.data.items;\n                    if (first != null && items[0] !== first) {\n                        _this._selection.bringActionValueForward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onListSelectionChangeButtonBringForward = function (actionList) {\n        var first = actionList.data.selection.first;\n        var items = actionList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorAction.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var actionList = _this.actionList;\n                    var first = actionList.data.selection.first;\n                    var items = actionList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        _this._selection.sendActionValueBackward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onListSelectionChangeButtonSendBackward = function (actionList) {\n        var first = actionList.data.selection.first;\n        var items = actionList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorAction.prototype, \"actionDialog\", {\n        get: function () {\n            var _a;\n            return ((_a = this._actionDialog) !== null && _a !== void 0 ? _a : (this._actionDialog = this.newActionDialog()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newActionDialog = function () {\n        return new EDialogAction({\n            icons: this._icons,\n            diagram: this._diagram\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"actionList\", {\n        get: function () {\n            var _a;\n            return ((_a = this._actionList) !== null && _a !== void 0 ? _a : (this._actionList = this.newActionList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newActionList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (item) {\n                    return item.toLabel();\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        image: {\n                            tint: {\n                                color: null\n                            }\n                        },\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onActionListDblClick(e, _, item, result);\n                            },\n                            set: function (value, index, item) {\n                                _this.onActionListSet(item, value);\n                            },\n                            unset: function (item) {\n                                _this.onActionListUnset(item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorAction.prototype.onActionListDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldActionValue = item.value;\n        if (oldActionValue != null) {\n            var actionDialog_1 = this.actionDialog;\n            actionDialog_1.reset();\n            actionDialog_1.value = oldActionValue;\n            actionDialog_1.open(item).then(function () {\n                var newActionValue = actionDialog_1.value;\n                if (newActionValue != null) {\n                    _this._selection.replaceActionValue(oldActionValue, newActionValue, list);\n                }\n            });\n        }\n    };\n    EEditorAction.prototype.onActionListSet = function (item, value) {\n        if (value instanceof EShapeActionValueChangeColor) {\n            var image = item.image.get(0);\n            if (image != null) {\n                var theme = DThemes.get(\"DButtonColor\");\n                image.source = theme.getImageSource(item.state);\n                image.tint.color = value.color;\n            }\n        }\n        else {\n            item.image = null;\n        }\n    };\n    EEditorAction.prototype.onActionListUnset = function (item) {\n        item.image = null;\n    };\n    EEditorAction.prototype.onSelectionChangeActionList = function (selection) {\n        var last = selection.last();\n        var actionList = this.actionList;\n        actionList.data.items = last != null ? last.action.values : [];\n        this.onListSelectionChange(actionList);\n    };\n    Object.defineProperty(EEditorAction.prototype, \"checkInteractive\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkInteractive) !== null && _a !== void 0 ? _a : (this._checkInteractive = this.newCheckInteractive()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newCheckInteractive = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.theme.getCheckInteractiveLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setInteractive(true);\n                },\n                inactive: function () {\n                    _this._selection.setInteractive(false);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onSelectionChangeCheckInteractive = function (selection) {\n        var last = selection.last();\n        var checkInteractive = this.checkInteractive;\n        if (last != null) {\n            checkInteractive.state.isActive = last.interactive;\n            checkInteractive.state.isDisabled = false;\n        }\n        else {\n            checkInteractive.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorAction.prototype, \"checkFocusable\", {\n        get: function () {\n            var _a;\n            return ((_a = this._checkFocusable) !== null && _a !== void 0 ? _a : (this._checkFocusable = this.newCheckFocusable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newCheckFocusable = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.theme.getCheckFocusableLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setFocusable(true);\n                },\n                inactive: function () {\n                    _this._selection.setFocusable(false);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.onSelectionChangeCheckFocusable = function (selection) {\n        var last = selection.last();\n        var checkFocusable = this.checkFocusable;\n        if (last != null) {\n            checkFocusable.state.isActive = last.state.isFocusable;\n            checkFocusable.state.isDisabled = false;\n        }\n        else {\n            checkFocusable.state.isDisabled = true;\n        }\n    };\n    Object.defineProperty(EEditorAction.prototype, \"labelShortcut\", {\n        get: function () {\n            var _a;\n            return ((_a = this._labelShortcut) !== null && _a !== void 0 ? _a : (this._labelShortcut = this.newLabelShortcut()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newLabelShortcut = function () {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getInputShortcutLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"inputShortcut\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputShortcut) !== null && _a !== void 0 ? _a : (this._inputShortcut = this.newInputShortcut()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newInputShortcut = function () {\n        var _this = this;\n        return new DInputText({\n            width: \"padding\",\n            on: {\n                change: function (value) {\n                    _this._selection.setShortcut(_this.toNormalizedShortcut(value));\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.toNormalizedShortcut = function (value) {\n        var trimmed = value.trim();\n        if (0 < trimmed.length) {\n            return trimmed;\n        }\n    };\n    EEditorAction.prototype.onSelectionChangeInputShortcut = function (selection) {\n        var _a;\n        this.inputShortcut.value = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.shortcut) || \"\";\n    };\n    Object.defineProperty(EEditorAction.prototype, \"labelTitle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._labelTitle) !== null && _a !== void 0 ? _a : (this._labelTitle = this.newLabelTitle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newLabelTitle = function () {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getInputTitleLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"inputTitle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputTitle) !== null && _a !== void 0 ? _a : (this._inputTitle = this.newInputTitle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newInputTitle = function () {\n        var _this = this;\n        return new DInputText({\n            width: \"padding\",\n            on: {\n                change: function (value) {\n                    _this._selection.setTitle(_this.toNormalizedTitle(value));\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.toNormalizedTitle = function (value) {\n        if (0 < value.trim().length) {\n            return value;\n        }\n    };\n    EEditorAction.prototype.onSelectionChangeInputTitle = function (selection) {\n        var _a;\n        this.inputTitle.value = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.title) || \"\";\n    };\n    Object.defineProperty(EEditorAction.prototype, \"labelCursor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._labelCursor) !== null && _a !== void 0 ? _a : (this._labelCursor = this.newLabelCursor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newLabelCursor = function () {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getDropdownCursorLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorAction.prototype, \"dropdownCursor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dropdownCursor) !== null && _a !== void 0 ? _a : (this._dropdownCursor = this.newDropdownCursor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.newDropdownCursor = function () {\n        var _this = this;\n        return new DDropdown({\n            width: \"padding\",\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newDropdownCursorMenuItems()\n            },\n            on: {\n                select: function (value) {\n                    var _a;\n                    _this.dropdownCursor.text = (_a = _this.cursors.get(value)) !== null && _a !== void 0 ? _a : value;\n                    _this._selection.setCursor(value);\n                }\n            }\n        });\n    };\n    EEditorAction.prototype.newDropdownCursorMenuItems = function () {\n        var result = [];\n        this.cursors.forEach(function (label, cursor) {\n            result.push({\n                width: 200,\n                value: cursor,\n                text: {\n                    value: label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorAction.prototype, \"cursors\", {\n        get: function () {\n            var _a;\n            return ((_a = this._cursors) !== null && _a !== void 0 ? _a : (this._cursors = this.theme.getCursors()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorAction.prototype.onSelectionChangeDropdownCursor = function (selection) {\n        var _a, _b, _c;\n        var cursor = (_b = (_a = selection.last()) === null || _a === void 0 ? void 0 : _a.cursor) !== null && _b !== void 0 ? _b : \"\";\n        this.dropdownCursor.text = (_c = this.cursors.get(cursor)) !== null && _c !== void 0 ? _c : cursor;\n    };\n    EEditorAction.prototype.onSelectionChange = function (selection) {\n        this.state.isDisabled = selection.isEmpty();\n        this.onSelectionChangeActionList(selection);\n        this.onSelectionChangeCheckInteractive(selection);\n        this.onSelectionChangeCheckFocusable(selection);\n        this.onSelectionChangeInputShortcut(selection);\n        this.onSelectionChangeInputTitle(selection);\n        this.onSelectionChangeDropdownCursor(selection);\n    };\n    EEditorAction.prototype.onListSelectionChange = function (actionList) {\n        this.onListSelectionChangeButtonDelete(actionList);\n        this.onListSelectionChangeButtonBringForward(actionList);\n        this.onListSelectionChangeButtonSendBackward(actionList);\n    };\n    EEditorAction.prototype.getType = function () {\n        return \"EEditorAction\";\n    };\n    return EEditorAction;\n}(DLayoutVertical));\nexport { EEditorAction };\n//# sourceMappingURL=e-editor-action.js.map","import { __extends } from \"tslib\";\nimport { DButtonColor, DDialogLayered, DInputIntegerAndLabel, DInputLabel, DInputTextAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutSpace, DMenu, DSelect, isNumber } from \"@wcardinal/wcardinal-ui\";\nvar EDialogCanvas = /** @class */ (function (_super) {\n    __extends(EDialogCanvas, _super);\n    function EDialogCanvas(options) {\n        var _this = _super.call(this, options) || this;\n        var canvas = options.canvas;\n        _this._canvas = options.canvas;\n        _this.onDefaultChange(canvas);\n        return _this;\n    }\n    EDialogCanvas.prototype.onDefaultChange = function (def) {\n        var category = def.category;\n        var categoryDefault = category.default;\n        var categoryItems = category.items;\n        var layout = this.layoutCategory;\n        if (categoryDefault != null && 0 < categoryItems.length) {\n            var items = [];\n            for (var i = 0, imax = categoryItems.length; i < imax; ++i) {\n                var categoryItem = categoryItems[i];\n                items.push({\n                    value: categoryItem.id,\n                    text: {\n                        value: categoryItem.label\n                    }\n                });\n            }\n            var selectCategory = this.selectCategory;\n            selectCategory.menu = new DMenu({\n                fit: true,\n                items: items\n            });\n            selectCategory.value = category.default;\n            layout.state.isEnabled = category.writable;\n            layout.show();\n        }\n        else {\n            layout.hide();\n        }\n    };\n    EDialogCanvas.prototype.newContentChildren = function (theme, options) {\n        var result = _super.prototype.newContentChildren.call(this, theme, options);\n        result.push(this.layoutName, this.layoutLabel, this.layoutWidth, this.layoutHeight, this.layoutCategory, this.layoutSummary, this.layoutDescription, this.layoutBackground);\n        return result;\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutName\", {\n        get: function () {\n            var result = this._layoutName;\n            if (result == null) {\n                result = this.newLayoutName();\n                this._layoutName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutLabel\", {\n        get: function () {\n            var result = this._layoutLabel;\n            if (result == null) {\n                result = this.newLayoutLabel();\n                this._layoutLabel = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutLabel = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutWidth\", {\n        get: function () {\n            var result = this._layoutWidth;\n            if (result == null) {\n                result = this.newLayoutWidth();\n                this._layoutWidth = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutWidth = function () {\n        var _this = this;\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutHeight\", {\n        get: function () {\n            var result = this._layoutHeight;\n            if (result == null) {\n                result = this.newLayoutHeight();\n                this._layoutHeight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutHeight = function () {\n        var _this = this;\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputHeightLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    enter: function () {\n                        _this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutCategory\", {\n        get: function () {\n            var result = this._layoutCategory;\n            if (result == null) {\n                result = this.newLayoutCategory();\n                this._layoutCategory = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutCategory = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            visible: false,\n            children: [\n                new DInputLabel({\n                    text: {\n                        value: this.theme.getSelectCategoryLabel()\n                    }\n                }),\n                this.selectCategory,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"selectCategory\", {\n        get: function () {\n            var result = this._selectCategory;\n            if (result == null) {\n                result = this.newSelectCategory();\n                this._selectCategory = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newSelectCategory = function () {\n        return new DSelect({\n            weight: 1\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutSummary\", {\n        get: function () {\n            var result = this._layoutSummary;\n            if (result == null) {\n                result = this.newLayoutSummary();\n                this._layoutSummary = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutSummary = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelSummary(),\n                this.inputSummary,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogCanvas.prototype.newLabelSummary = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputSummaryLabel()\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"inputSummary\", {\n        get: function () {\n            var result = this._inputSummary;\n            if (result == null) {\n                result = this.newInputSummary();\n                this._inputSummary = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newInputSummary = function () {\n        return new DInputTextArea({\n            weight: 1,\n            height: 60\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutDescription\", {\n        get: function () {\n            var result = this._layoutDescription;\n            if (result == null) {\n                result = this.newLayoutDescription();\n                this._layoutDescription = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutDescription = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelDescription(),\n                this.inputDescription,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogCanvas.prototype.newLabelDescription = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputDescriptionLabel()\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"inputDescription\", {\n        get: function () {\n            var result = this._inputDescription;\n            if (result == null) {\n                result = this.newInputDescription();\n                this._inputDescription = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newInputDescription = function () {\n        return new DInputTextArea({\n            weight: 1,\n            height: 100\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"layoutBackground\", {\n        get: function () {\n            var result = this._layoutBackground;\n            if (result == null) {\n                result = this.newLayoutBackground();\n                this._layoutBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newLayoutBackground = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelBackground(),\n                this.inputBackground,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    };\n    EDialogCanvas.prototype.newLabelBackground = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputBackgroundLabel()\n            }\n        });\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"inputBackground\", {\n        get: function () {\n            var result = this._inputBackground;\n            if (result == null) {\n                result = this.newInputBackground();\n                this._inputBackground = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.newInputBackground = function () {\n        var result = new DButtonColor({\n            weight: 1\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    EDialogCanvas.prototype.reset = function (diagram) {\n        var diagramCanvas = diagram === null || diagram === void 0 ? void 0 : diagram.canvas;\n        if (diagramCanvas != null) {\n            var background = diagramCanvas.background;\n            var backgroundColor = background.color;\n            var backgroundAlpha = background.alpha;\n            this.value = {\n                name: diagramCanvas.name,\n                label: diagramCanvas.label,\n                width: diagramCanvas.width,\n                height: diagramCanvas.height,\n                category: diagramCanvas.category,\n                summary: diagramCanvas.summary,\n                description: diagramCanvas.description,\n                background: {\n                    color: isNumber(backgroundColor) ? backgroundColor : 0xffffff,\n                    alpha: isNumber(backgroundAlpha) ? backgroundAlpha : 1\n                }\n            };\n        }\n        else {\n            var canvas = this._canvas;\n            this.value = {\n                name: canvas.name,\n                label: canvas.label,\n                width: canvas.width,\n                height: canvas.height,\n                category: canvas.category.default,\n                summary: canvas.summary,\n                description: canvas.description,\n                background: {\n                    color: canvas.background.color,\n                    alpha: canvas.background.alpha\n                }\n            };\n        }\n        return this;\n    };\n    Object.defineProperty(EDialogCanvas.prototype, \"value\", {\n        get: function () {\n            return {\n                name: this.layoutName.input.value,\n                label: this.layoutLabel.input.value,\n                width: this.layoutWidth.input.value,\n                height: this.layoutHeight.input.value,\n                category: this.selectCategory.value,\n                summary: this.inputSummary.value,\n                description: this.inputDescription.value,\n                background: this.inputBackground.value\n            };\n        },\n        set: function (value) {\n            var _a, _b;\n            this.layoutName.input.value = value.name;\n            this.layoutLabel.input.value = value.label;\n            this.layoutWidth.input.value = value.width;\n            this.layoutHeight.input.value = value.height;\n            this.selectCategory.value = (_b = (_a = value.category) !== null && _a !== void 0 ? _a : this._canvas.category.default) !== null && _b !== void 0 ? _b : null;\n            this.inputSummary.value = value.summary;\n            this.inputDescription.value = value.description;\n            this.inputBackground.value.color = value.background.color;\n            this.inputBackground.value.alpha = value.background.alpha;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EDialogCanvas.prototype.getResolvedValue = function () {\n        return this.value;\n    };\n    EDialogCanvas.prototype.getType = function () {\n        return \"EDialogCanvas\";\n    };\n    return EDialogCanvas;\n}(DDialogLayered));\nexport { EDialogCanvas };\n//# sourceMappingURL=e-dialog-canvas.js.map","import { __extends } from \"tslib\";\nimport { DBoard, DButtonAmbient, DControllers, DCornerMask, DInputText, DLayoutHorizontal } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentName } from \"../command/e-command-document-name\";\nimport { EDialogCanvas } from \"./e-dialog-canvas\";\nimport { ECommandDocumentAll } from \"../command/e-command-document-all\";\nvar toOptions = function (options) {\n    var _a, _b, _c, _d, _e;\n    (_a = options.width) !== null && _a !== void 0 ? _a : (options.width = 200);\n    (_b = options.height) !== null && _b !== void 0 ? _b : (options.height = 30);\n    (_c = options.padding) !== null && _c !== void 0 ? _c : (options.padding = 0);\n    (_d = options.corner) !== null && _d !== void 0 ? _d : (options.corner = { mask: \"BOTTOM\" });\n    (_e = options.shadow) !== null && _e !== void 0 ? _e : (options.shadow = \"WEAK\");\n    return options;\n};\nvar EEditorCanvas = /** @class */ (function (_super) {\n    __extends(EEditorCanvas, _super);\n    function EEditorCanvas(options) {\n        var _this = _super.call(this, toOptions(options)) || this;\n        _this._icons = options.icons;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        diagram.on(\"change\", function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                _this.inputName.value = canvas.name;\n            }\n        });\n        diagram.on(\"set\", function (canvas) {\n            _this.inputName.value = canvas.name;\n            _this.show();\n        });\n        diagram.on(\"unset\", function (canvas) {\n            _this.hide();\n        });\n        _this._canvas = options.canvas;\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            margin: 0,\n            children: [_this.inputName, _this.buttonEditor]\n        }));\n        _this.hide();\n        return _this;\n    }\n    Object.defineProperty(EEditorCanvas.prototype, \"inputName\", {\n        get: function () {\n            var result = this._inputName;\n            if (result == null) {\n                result = this.newInputName();\n                this._inputName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCanvas.prototype.newInputName = function () {\n        var _this = this;\n        return new DInputText({\n            weight: 1,\n            background: {\n                color: null\n            },\n            border: {\n                color: null\n            },\n            corner: {\n                mask: DCornerMask.ALL & ~DCornerMask.TOP_LEFT\n            },\n            on: {\n                change: function (value) {\n                    _this.onInputNameChange(value);\n                }\n            }\n        });\n    };\n    EEditorCanvas.prototype.onInputNameChange = function (value) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas != null && canvas.name !== value) {\n            DControllers.getCommandController().push(new ECommandDocumentName(diagram, canvas, value));\n        }\n    };\n    Object.defineProperty(EEditorCanvas.prototype, \"buttonEditor\", {\n        get: function () {\n            var result = this._buttonEditor;\n            if (result == null) {\n                result = this.newButtonEditor();\n                this._buttonEditor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCanvas.prototype.newButtonEditor = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_canvas\n            },\n            on: {\n                active: function (emitter) {\n                    _this.onButtonEditorActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorCanvas.prototype.onButtonEditorActive = function (opener) {\n        var _this = this;\n        this.dialogEditor.then(function (dialogEditor) {\n            var diagram = _this._diagram;\n            dialogEditor\n                .reset(diagram)\n                .open(opener)\n                .then(function (value) {\n                var canvas = diagram.canvas;\n                if (canvas != null) {\n                    DControllers.getCommandController().push(new ECommandDocumentAll(diagram, canvas, value.name, value.label, value.width, value.height, value.category, value.summary, value.description, value.background.color, value.background.alpha));\n                }\n            });\n        });\n    };\n    Object.defineProperty(EEditorCanvas.prototype, \"dialogEditor\", {\n        get: function () {\n            var result = this._dialogEditor;\n            if (result == null) {\n                result = this.newDialogEditor();\n                this._dialogEditor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCanvas.prototype.newDialogEditor = function () {\n        return this._canvas.get().then(function (canvas) {\n            return new EDialogCanvas({\n                canvas: canvas\n            });\n        });\n    };\n    EEditorCanvas.prototype.render = function (renderer) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas != null) {\n            var position = canvas.position;\n            this.position.set(position.x, position.y - this.height);\n            this.updateTransform();\n        }\n        _super.prototype.render.call(this, renderer);\n    };\n    EEditorCanvas.prototype.getType = function () {\n        return \"EEditorCanvas\";\n    };\n    return EEditorCanvas;\n}(DBoard));\nexport { EEditorCanvas };\n//# sourceMappingURL=e-editor-canvas.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DButtonCheck, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DText, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nvar textFormat = function (value) {\n    return \"\".concat(+value.toFixed(2));\n};\nvar textFormatDegree = function (value) {\n    return textFormat((value / Math.PI) * 180);\n};\nvar textUnformatDegree = function (text) {\n    return (parseFloat(text) / 180) * Math.PI;\n};\nvar EEditorCoordinate = /** @class */ (function (_super) {\n    __extends(EEditorCoordinate, _super);\n    function EEditorCoordinate(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        _this._selection = options.selection;\n        _this._workRectangle = new Rectangle();\n        // Input updater\n        _this._updateInputShape = null;\n        _this._updateInputId = null;\n        _this._isUpdateInputShapeChanged = false;\n        _this._renderInputsBound = function () {\n            _this.renderInputs();\n        };\n        //\n        _this.addChild(_this.newTextLabel());\n        _this.addChild(_this.inputId);\n        _this.addChild(_this.inputPositionX);\n        _this.addChild(_this.inputPositionY);\n        _this.addChild(_this.inputPositionLeft);\n        _this.addChild(_this.inputPositionTop);\n        _this.addChild(_this.inputSizeX);\n        _this.addChild(_this.inputSizeY);\n        _this.addChild(_this.inputRotation);\n        _this.addChild(_this.inputSkew);\n        _this.addChild(_this.layoutAlignHorizontally);\n        _this.addChild(_this.layoutAlignVertically);\n        //\n        var selection = _this._selection;\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorCoordinate.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputId\", {\n        get: function () {\n            var result = this._inputId;\n            if (result == null) {\n                result = this.newInputId();\n                this._inputId = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputId = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputIdLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setId(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionX\", {\n        get: function () {\n            var result = this._inputPositionX;\n            if (result == null) {\n                result = this.newInputPositionX();\n                this._inputPositionX = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionX = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionXLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionX(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionY\", {\n        get: function () {\n            var result = this._inputPositionY;\n            if (result == null) {\n                result = this.newInputPositionY();\n                this._inputPositionY = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionY = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionYLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionY(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionLeft\", {\n        get: function () {\n            var result = this._inputPositionLeft;\n            if (result == null) {\n                result = this.newInputPositionLeft();\n                this._inputPositionLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionLeft = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionLeftLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionLeft(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputPositionTop\", {\n        get: function () {\n            var result = this._inputPositionTop;\n            if (result == null) {\n                result = this.newInputPositionTop();\n                this._inputPositionTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputPositionTop = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionTopLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setPositionTop(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputSizeX\", {\n        get: function () {\n            var result = this._inputSizeX;\n            if (result == null) {\n                result = this.newInputSizeX();\n                this._inputSizeX = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputSizeX = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSizeXLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setSizeX(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputSizeY\", {\n        get: function () {\n            var result = this._inputSizeY;\n            if (result == null) {\n                result = this.newInputSizeY();\n                this._inputSizeY = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputSizeY = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSizeYLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setSizeY(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputRotation\", {\n        get: function () {\n            var result = this._inputRotation;\n            if (result == null) {\n                result = this.newInputRotation();\n                this._inputRotation = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputRotation = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputRotationLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormatDegree\n                },\n                editing: {\n                    unformatter: textUnformatDegree\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setRotation(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"inputSkew\", {\n        get: function () {\n            var result = this._inputSkew;\n            if (result == null) {\n                result = this.newInputSkew();\n                this._inputSkew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newInputSkew = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSkewLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormatDegree\n                },\n                editing: {\n                    unformatter: textUnformatDegree\n                },\n                on: {\n                    input: function (value) {\n                        _this._selection.setSkew(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"layoutAlignHorizontally\", {\n        get: function () {\n            var result = this._layoutAlignHorizontally;\n            if (result == null) {\n                result = this.newLayoutAlignHorizontally();\n                this._layoutAlignHorizontally = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newLayoutAlignHorizontally = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonAlignLeft,\n                this.buttonAlignCenter,\n                this.buttonAlignRight,\n                this.buttonDistributeHorizontally,\n                this.buttonDistributeVertically,\n                this.buttonLock,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"layoutAlignVertically\", {\n        get: function () {\n            var result = this._layoutAlignVertically;\n            if (result == null) {\n                result = this.newLayoutAlignVertically();\n                this._layoutAlignVertically = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newLayoutAlignVertically = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonAlignTop,\n                this.buttonAlignMiddle,\n                this.buttonAlignBottom,\n                this.buttonRotateLeft,\n                this.buttonRotateRight,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignLeft\", {\n        get: function () {\n            var result = this._buttonAlignLeft;\n            if (result == null) {\n                result = this.newButtonAlignLeft();\n                this._buttonAlignLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_left\n            },\n            title: this.theme.getButtonAlignLeftTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignLeft();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignCenter\", {\n        get: function () {\n            var result = this._buttonAlignCenter;\n            if (result == null) {\n                result = this.newButtonAlignCenter();\n                this._buttonAlignCenter = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignCenter = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_center\n            },\n            title: this.theme.getButtonAlignCenterTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignCenter();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignRight\", {\n        get: function () {\n            var result = this._buttonAlignRight;\n            if (result == null) {\n                result = this.newButtonAlignRight();\n                this._buttonAlignRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_right\n            },\n            title: this.theme.getButtonAlignRightTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignRight();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignTop\", {\n        get: function () {\n            var result = this._buttonAlignTop;\n            if (result == null) {\n                result = this.newButtonAlignTop();\n                this._buttonAlignTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_top\n            },\n            title: this.theme.getButtonAlignTopTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignTop();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignMiddle\", {\n        get: function () {\n            var result = this._buttonAlignMiddle;\n            if (result == null) {\n                result = this.newButtonAlignMiddle();\n                this._buttonAlignMiddle = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignMiddle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_middle\n            },\n            title: this.theme.getButtonAlignMiddleTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignMiddle();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonAlignBottom\", {\n        get: function () {\n            var result = this._buttonAlignBottom;\n            if (result == null) {\n                result = this.newButtonAlignBottom();\n                this._buttonAlignBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonAlignBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_bottom\n            },\n            title: this.theme.getButtonAlignBottomTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.alignBottom();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonDistributeHorizontally\", {\n        get: function () {\n            var result = this._buttonDistributeHorizontally;\n            if (result == null) {\n                result = this.newButtonDistributeHorizontally();\n                this._buttonDistributeHorizontally = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonDistributeHorizontally = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_distribute_horizontally\n            },\n            title: this.theme.getButtonDistributeHorizontallyTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.distributeHorizontally();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonDistributeVertically\", {\n        get: function () {\n            var result = this._buttonDistributeVertically;\n            if (result == null) {\n                result = this.newButtonDistributeVertically();\n                this._buttonDistributeVertically = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonDistributeVertically = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_distribute_vertically\n            },\n            title: this.theme.getButtonDistributeVerticallyTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    selection.saveForTranslate();\n                    selection.distributeVertically();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonRotateLeft\", {\n        get: function () {\n            var result = this._buttonRotateLeft;\n            if (result == null) {\n                result = this.newButtonRotateLeft();\n                this._buttonRotateLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonRotateLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_rotate_left\n            },\n            title: this.theme.getButtonRotateLeftTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    if (selection.prepareRotate()) {\n                        selection.saveForRotate();\n                        selection.rotate(-0.5 * Math.PI);\n                        selection.finalize();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonRotateRight\", {\n        get: function () {\n            var result = this._buttonRotateRight;\n            if (result == null) {\n                result = this.newButtonRotateRight();\n                this._buttonRotateRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonRotateRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_rotate_right\n            },\n            title: this.theme.getButtonRotateRightTitle(),\n            on: {\n                active: function () {\n                    var selection = _this._selection;\n                    if (selection.prepareRotate()) {\n                        selection.saveForRotate();\n                        selection.rotate(+0.5 * Math.PI);\n                        selection.finalize();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorCoordinate.prototype, \"buttonLock\", {\n        get: function () {\n            var result = this._buttonLock;\n            if (result == null) {\n                result = this.newButtonLock();\n                this._buttonLock = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorCoordinate.prototype.newButtonLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.COORDINATE);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.COORDINATE);\n                }\n            }\n        });\n    };\n    EEditorCoordinate.prototype.onSelectionChange = function (selection) {\n        var last = selection.last();\n        this.state.isDisabled = last == null;\n        var hasPositionCapability = EShapeCapabilities.contains(last, EShapeCapability.POSITION);\n        this.inputPositionX.state.isEnabled = hasPositionCapability;\n        this.inputPositionY.state.isEnabled = hasPositionCapability;\n        this.inputPositionLeft.state.isEnabled = hasPositionCapability;\n        this.inputPositionTop.state.isEnabled = hasPositionCapability;\n        this.inputRotation.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.ROTATION);\n        this.inputSizeX.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.WIDTH);\n        this.inputSizeY.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.HEIGHT);\n        this.inputSkew.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.SKEW);\n        this.buttonLock.state.isActive = this.isLocked(last);\n        this.updateInputs(selection.get());\n    };\n    EEditorCoordinate.prototype.isLocked = function (last) {\n        if (last == null) {\n            return false;\n        }\n        var capability = last.getCapability();\n        if (capability == null) {\n            return false;\n        }\n        var target = EShapeCapability.COORDINATE;\n        if (capability.locked & target) {\n            return true;\n        }\n        return false;\n    };\n    EEditorCoordinate.prototype.renderInputs = function () {\n        this._updateInputId = null;\n        if (this._isUpdateInputShapeChanged) {\n            this._isUpdateInputShapeChanged = false;\n            var shape = this._updateInputShape;\n            if (shape != null) {\n                var transform = shape.transform;\n                var position = transform.position;\n                var size = shape.size;\n                this.inputId.input.value = shape.id;\n                this.inputPositionX.input.value = position.x;\n                this.inputPositionY.input.value = position.y;\n                this.inputSizeX.input.value = size.x;\n                this.inputSizeY.input.value = size.y;\n                this.inputRotation.input.value = transform.rotation;\n                this.inputSkew.input.value = transform.skew.x;\n                var rectangle = this._workRectangle;\n                shape.getBoundsLocal(false, rectangle);\n                this.inputPositionLeft.input.value = rectangle.x;\n                this.inputPositionTop.input.value = rectangle.y;\n            }\n            this._updateInputId = window.setTimeout(this._renderInputsBound, 100);\n        }\n    };\n    EEditorCoordinate.prototype.updateInputs = function (shapes) {\n        var shape = 0 < shapes.length ? shapes[shapes.length - 1] : null;\n        this._updateInputShape = shape;\n        this._isUpdateInputShapeChanged = true;\n        if (this._updateInputId == null) {\n            this.renderInputs();\n        }\n    };\n    EEditorCoordinate.prototype.getType = function () {\n        return \"EEditorCoordinate\";\n    };\n    return EEditorCoordinate;\n}(DLayoutVertical));\nexport { EEditorCoordinate };\n//# sourceMappingURL=e-editor-coordinate.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogDataMappingValue } from \"./e-dialog-data-mapping-value\";\nvar EEditorDataMapping = /** @class */ (function (_super) {\n    __extends(EEditorDataMapping, _super);\n    function EEditorDataMapping(options) {\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Layout\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                _this.buttonNew,\n                _this.buttonDelete,\n                _this.buttonBringForward,\n                _this.buttonSendBackward\n            ]\n        }));\n        _this.addChild(_this.listDataMappingValue);\n        // Initialize\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var listDataMappingValue = _this.listDataMappingValue;\n        listDataMappingValue.selection.on(\"change\", function () {\n            _this.onListDataMappingValueSelectionChange(listDataMappingValue);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorDataMapping.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonNew\", {\n        get: function () {\n            var result = this._buttonNew;\n            if (result == null) {\n                result = this.newButtonNew();\n                this._buttonNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.dialogDataMappingValue\n            .set(null, this._selection.last())\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                _this._selection.addDataMappingValue(value);\n            }\n        });\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonDelete\", {\n        get: function () {\n            var result = this._buttonDelete;\n            if (result == null) {\n                result = this.newButtonDelete();\n                this._buttonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var first = _this.listDataMappingValue.selection.first;\n                    if (first != null) {\n                        _this._selection.removeDataMappingValue(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChangeButtonDelete = function (listDataMappingValue) {\n        this.buttonDelete.state.isDisabled = listDataMappingValue.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonBringForward\", {\n        get: function () {\n            var result = this._buttonBringForward;\n            if (result == null) {\n                result = this.newButtonBringForward();\n                this._buttonBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataMappingValue = _this.listDataMappingValue;\n                    var first = listDataMappingValue.data.selection.first;\n                    var items = listDataMappingValue.data.items;\n                    if (first != null && items[0] !== first) {\n                        _this._selection.bringDataMappingValueForward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChangeButtonBringForward = function (listDataMappingValue) {\n        var first = listDataMappingValue.data.selection.first;\n        var items = listDataMappingValue.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var result = this._buttonSendBackward;\n            if (result == null) {\n                result = this.newButtonSendBackward();\n                this._buttonSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataMappingValue = _this.listDataMappingValue;\n                    var first = listDataMappingValue.data.selection.first;\n                    var items = listDataMappingValue.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        _this._selection.sendDataMappingValueBackward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChangeButtonSendBackward = function (listDataMappingValue) {\n        var first = listDataMappingValue.data.selection.first;\n        var items = listDataMappingValue.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"dialogDataMappingValue\", {\n        get: function () {\n            var result = this._dialogDataMappingValue;\n            if (result == null) {\n                result = this.newDialogDataMappingValue();\n                this._dialogDataMappingValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newDialogDataMappingValue = function () {\n        return new EDialogDataMappingValue();\n    };\n    Object.defineProperty(EEditorDataMapping.prototype, \"listDataMappingValue\", {\n        get: function () {\n            var result = this._listDataMappingValue;\n            if (result == null) {\n                result = this.newListDataMappingValue();\n                this._listDataMappingValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorDataMapping.prototype.newListDataMappingValue = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    var source = value[0];\n                    var destination = value[1];\n                    var initial = value[2];\n                    if (0 < destination.length) {\n                        if (0 < initial.length) {\n                            return \"\".concat(source, \" -> \").concat(destination, \", \").concat(initial);\n                        }\n                        else {\n                            return \"\".concat(source, \" -> \").concat(destination);\n                        }\n                    }\n                    else {\n                        if (0 < initial.length) {\n                            return \"\".concat(source, \" -> \").concat(initial);\n                        }\n                        else {\n                            return \"\".concat(source);\n                        }\n                    }\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onListDataMappingValueDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            this.dialogDataMappingValue\n                .set(oldValue, this._selection.last())\n                .open(item)\n                .then(function (newValue) {\n                if (newValue != null) {\n                    _this._selection.replaceDataMappingValue(oldValue, newValue, list);\n                }\n            });\n        }\n    };\n    EEditorDataMapping.prototype.onSelectionChangeListDataMappingValue = function (selection) {\n        var _a, _b;\n        var listDataMappingValue = this.listDataMappingValue;\n        listDataMappingValue.data.items = ((_b = (_a = selection.last()) === null || _a === void 0 ? void 0 : _a.data.getMapping()) === null || _b === void 0 ? void 0 : _b.values) || [];\n        this.onListDataMappingValueSelectionChange(listDataMappingValue);\n    };\n    EEditorDataMapping.prototype.onSelectionChange = function (selection) {\n        this.state.isDisabled = !EShapeCapabilities.contains(selection.last(), EShapeCapability.DATA_MAPPING);\n        this.onSelectionChangeListDataMappingValue(selection);\n    };\n    EEditorDataMapping.prototype.onListDataMappingValueSelectionChange = function (listDataMappingValue) {\n        this.onListDataMappingValueSelectionChangeButtonDelete(listDataMappingValue);\n        this.onListDataMappingValueSelectionChangeButtonBringForward(listDataMappingValue);\n        this.onListDataMappingValueSelectionChangeButtonSendBackward(listDataMappingValue);\n    };\n    EEditorDataMapping.prototype.getType = function () {\n        return \"EEditorDataMapping\";\n    };\n    return EEditorDataMapping;\n}(DLayoutVertical));\nexport { EEditorDataMapping };\n//# sourceMappingURL=e-editor-data-mapping.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, EShapeDataValueExtensions, EShapeDataValueType } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogDataValue } from \"./e-dialog-data-value\";\nvar EEditorData = /** @class */ (function (_super) {\n    __extends(EEditorData, _super);\n    function EEditorData(options) {\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Layout\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newTextLabel(),\n                _this.buttonNew,\n                _this.buttonDelete,\n                _this.buttonBringForward,\n                _this.buttonSendBackward\n            ]\n        }));\n        _this.addChild(_this.listDataValue);\n        // Initialize\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        var listDataValue = _this.listDataValue;\n        listDataValue.selection.on(\"change\", function () {\n            _this.onListDataValueSelectionChange(listDataValue);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorData.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonNew\", {\n        get: function () {\n            var result = this._buttonNew;\n            if (result == null) {\n                result = this.newButtonNew();\n                this._buttonNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        this.dialogDataValue\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                _this._selection.addDataValue(value);\n            }\n        });\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonDelete\", {\n        get: function () {\n            var result = this._buttonDelete;\n            if (result == null) {\n                result = this.newButtonDelete();\n                this._buttonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var first = _this.listDataValue.selection.first;\n                    if (first != null) {\n                        _this._selection.removeDataValue(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onListDataValueSelectionChangeButtonDelete = function (listDataValue) {\n        this.buttonDelete.state.isDisabled = listDataValue.data.selection.isEmpty();\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonBringForward\", {\n        get: function () {\n            var result = this._buttonBringForward;\n            if (result == null) {\n                result = this.newButtonBringForward();\n                this._buttonBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataValue = _this.listDataValue;\n                    var first = listDataValue.data.selection.first;\n                    var items = listDataValue.data.items;\n                    if (first != null && items[0] !== first) {\n                        _this._selection.bringDataValueForward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onListDataValueSelectionChangeButtonBringForward = function (listDataValue) {\n        var first = listDataValue.data.selection.first;\n        var items = listDataValue.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    };\n    Object.defineProperty(EEditorData.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var result = this._buttonSendBackward;\n            if (result == null) {\n                result = this.newButtonSendBackward();\n                this._buttonSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listDataValue = _this.listDataValue;\n                    var first = listDataValue.data.selection.first;\n                    var items = listDataValue.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        _this._selection.sendDataValueBackward(first);\n                    }\n                }\n            }\n        });\n    };\n    EEditorData.prototype.onListDataValueSelectionChangeButtonSendBackward = function (listDataValue) {\n        var first = listDataValue.data.selection.first;\n        var items = listDataValue.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    Object.defineProperty(EEditorData.prototype, \"dialogDataValue\", {\n        get: function () {\n            var result = this._dialogDataValue;\n            if (result == null) {\n                result = this.newDialogDataValue();\n                this._dialogDataValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newDialogDataValue = function () {\n        return new EDialogDataValue();\n    };\n    Object.defineProperty(EEditorData.prototype, \"listDataValue\", {\n        get: function () {\n            var result = this._listDataValue;\n            if (result == null) {\n                result = this.newListDataValue();\n                this._listDataValue = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorData.prototype.newListDataValue = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    var type = value.type;\n                    var as = value.as;\n                    var prefix = 0 < as.length ? \"\".concat(as, \": \") : \"\";\n                    switch (type) {\n                        case EShapeDataValueType.BOOLEAN:\n                        case EShapeDataValueType.BOOLEAN_ARRAY:\n                        case EShapeDataValueType.NUMBER:\n                        case EShapeDataValueType.NUMBER_ARRAY:\n                        case EShapeDataValueType.STRING:\n                        case EShapeDataValueType.STRING_ARRAY:\n                        case EShapeDataValueType.OBJECT:\n                        case EShapeDataValueType.OBJECT_ARRAY:\n                            return prefix + value.id;\n                        case EShapeDataValueType.TICKER:\n                            return prefix + \"Ticker \".concat(value.initial, \" ms\");\n                        default:\n                            var extension = EShapeDataValueExtensions.get(type);\n                            if (extension) {\n                                return prefix + extension.label;\n                            }\n                            return prefix + \"Unknown\";\n                    }\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onListDataValueDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorData.prototype.onListDataValueDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var dialogDataValue = this.dialogDataValue;\n            dialogDataValue.value = oldValue;\n            dialogDataValue.open(item).then(function (newValue) {\n                if (newValue != null) {\n                    _this._selection.replaceDataValue(oldValue, newValue, list);\n                }\n            });\n        }\n    };\n    EEditorData.prototype.onSelectionChangeListDataValue = function (selection) {\n        var _a;\n        var listDataValue = this.listDataValue;\n        listDataValue.data.items = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.data.values) || [];\n        this.onListDataValueSelectionChange(listDataValue);\n    };\n    EEditorData.prototype.onSelectionChange = function (selection) {\n        this.state.isDisabled = selection.isEmpty();\n        this.onSelectionChangeListDataValue(selection);\n    };\n    EEditorData.prototype.onListDataValueSelectionChange = function (listDataValue) {\n        this.onListDataValueSelectionChangeButtonDelete(listDataValue);\n        this.onListDataValueSelectionChangeButtonBringForward(listDataValue);\n        this.onListDataValueSelectionChangeButtonSendBackward(listDataValue);\n    };\n    EEditorData.prototype.getType = function () {\n        return \"EEditorData\";\n    };\n    return EEditorData;\n}(DLayoutVertical));\nexport { EEditorData };\n//# sourceMappingURL=e-editor-data.js.map","import { __extends } from \"tslib\";\nimport { DListItem, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nvar EEditorLayerItem = /** @class */ (function (_super) {\n    __extends(EEditorLayerItem, _super);\n    function EEditorLayerItem(iconsEye, iconsEyeSlash, work, data, options) {\n        var _this = _super.call(this, data, options) || this;\n        _this._iconsEye = iconsEye;\n        _this._iconsEyeSlash = iconsEyeSlash;\n        _this._iconsWork = work;\n        return _this;\n    }\n    EEditorLayerItem.prototype.onSelect = function (e, value) {\n        if (e != null) {\n            var local = this._iconsWork;\n            if (\"data\" in e) {\n                this.toLocal(e.data.global, undefined, local);\n                if (local.x <= this._iconsEye.width + this.padding.getLeft()) {\n                    this.emit(\"eyeclick\", e, value, this);\n                    return;\n                }\n            }\n        }\n        _super.prototype.onSelect.call(this, e, value);\n    };\n    EEditorLayerItem.prototype.onDblClick = function (e, interactionManager) {\n        var global = UtilPointerEvent.toGlobal(e, interactionManager, this._iconsWork);\n        var local = this.toLocal(global, undefined, global);\n        if (this._iconsEye.width + this.padding.getLeft() < local.x) {\n            return _super.prototype.onDblClick.call(this, e, interactionManager);\n        }\n        else {\n            this.emit(\"eyedblclick\", e, interactionManager, this);\n            return false;\n        }\n    };\n    return EEditorLayerItem;\n}(DListItem));\nexport { EEditorLayerItem };\n//# sourceMappingURL=e-editor-layer-item.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DLayoutHorizontal, DLayoutVertical, DList, DText, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandLayerBringForward } from \"../command/e-command-layer-bring-forward\";\nimport { ECommandLayerCreate } from \"../command/e-command-layer-create\";\nimport { ECommandLayerDelete } from \"../command/e-command-layer-delete\";\nimport { ECommandLayerChange } from \"../command/e-command-layer-change\";\nimport { ECommandLayerSendBackward } from \"../command/e-command-layer-send-backward\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { EDialogLayer } from \"./e-dialog-layer\";\nimport { EDialogLayerValue } from \"./e-dialog-layer-value\";\nimport { EEditorLayerItem } from \"./e-editor-layer-item\";\nvar EEditorLayer = /** @class */ (function (_super) {\n    __extends(EEditorLayer, _super);\n    function EEditorLayer(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        _this._diagram = options.diagram;\n        _this._selection = options.selection;\n        _this._isInitialized = false;\n        _this._canvas = null;\n        return _this;\n    }\n    EEditorLayer.prototype.show = function () {\n        _super.prototype.show.call(this);\n        this.onShow();\n        return this;\n    };\n    EEditorLayer.prototype.onShow = function () {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onCanvasChange(this._diagram.canvas, true);\n    };\n    EEditorLayer.prototype.initLayout = function () {\n        var _this = this;\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonNew,\n                this.buttonDelete,\n                this.buttonBringForward,\n                this.buttonSendBackward\n            ]\n        }));\n        this.addChild(this.list);\n        // Layer change even handling\n        var diagram = this._diagram;\n        diagram.on(\"set\", function (newCanvas) {\n            if (_this.isShown()) {\n                _this.onCanvasChange(newCanvas, false);\n            }\n        });\n        diagram.on(\"ready\", function () {\n            if (_this.isShown()) {\n                _this.onLayerChange();\n            }\n        });\n        diagram.on(\"unset\", function () {\n            if (_this.isShown()) {\n                _this.onCanvasChange(null, false);\n            }\n        });\n    };\n    EEditorLayer.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"onLayerChangeBound\", {\n        get: function () {\n            var _this = this;\n            var result = this._onLayerChangeBound;\n            if (result == null) {\n                result = function () {\n                    _this.onLayerChange();\n                };\n                this._onLayerChangeBound = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorLayer.prototype, \"dialog\", {\n        get: function () {\n            var result = this._dialog;\n            if (result == null) {\n                result = this.newDialog();\n                this._dialog = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newDialog = function () {\n        return new EDialogLayer();\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonNew\", {\n        get: function () {\n            var result = this._buttonNew;\n            if (result == null) {\n                result = this.newButtonNew();\n                this._buttonNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorLayer.prototype.onButtonNewActive = function (opener) {\n        var _this = this;\n        var canvas = this._canvas;\n        if (canvas) {\n            var dialogLayer = this.dialog;\n            dialogLayer\n                .reset(canvas.width, canvas.height)\n                .open(opener)\n                .then(function (value) {\n                if (value) {\n                    DControllers.getCommandController().push(new ECommandLayerCreate(value, canvas.layer, _this._selection));\n                }\n            });\n        }\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonDelete\", {\n        get: function () {\n            var result = this._buttonDelete;\n            if (result == null) {\n                result = this.newButtonDelete();\n                this._buttonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            on: {\n                active: function () {\n                    var canvas = _this._canvas;\n                    if (canvas) {\n                        var layer = canvas.layer;\n                        var size = layer.size();\n                        var active = layer.active;\n                        if (1 < size && active) {\n                            DControllers.getCommandController().push(new ECommandLayerDelete(active, canvas.layer, _this._selection));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonBringForward\", {\n        get: function () {\n            var result = this._buttonBringForward;\n            if (result == null) {\n                result = this.newButtonBringForward();\n                this._buttonBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    var canvas = _this._canvas;\n                    if (canvas) {\n                        var layer = canvas.layer;\n                        var active = layer.active;\n                        if (active) {\n                            var index = layer.children.indexOf(active);\n                            DControllers.getCommandController().push(new ECommandLayerBringForward(index, layer));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var result = this._buttonSendBackward;\n            if (result == null) {\n                result = this.newButtonSendBackward();\n                this._buttonSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    var canvas = _this._canvas;\n                    if (canvas) {\n                        var layer = canvas.layer;\n                        var active = layer.active;\n                        if (active) {\n                            var index = layer.children.indexOf(active);\n                            DControllers.getCommandController().push(new ECommandLayerSendBackward(index, layer));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorLayer.prototype, \"list\", {\n        get: function () {\n            var result = this._list;\n            if (result == null) {\n                result = this.newList();\n                this._list = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorLayer.prototype.newList = function () {\n        var _this = this;\n        var icons = this._icons;\n        var iconsEye = icons.eye;\n        var iconsEyeSlash = icons.eye_slash;\n        var work = new Point();\n        var result = new DList({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            data: {\n                selection: {\n                    on: {\n                        change: function () {\n                            _this.onListSelectionChange();\n                        }\n                    }\n                },\n                toImage: function (layer) {\n                    return layer.visible ? iconsEye : iconsEyeSlash;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new EEditorLayerItem(iconsEye, iconsEyeSlash, work, data, {\n                        on: {\n                            eyeclick: function (e, value, item) {\n                                if (value) {\n                                    if (value.visible) {\n                                        value.visible = false;\n                                        item.image = iconsEyeSlash;\n                                    }\n                                    else {\n                                        value.visible = true;\n                                        item.image = iconsEye;\n                                    }\n                                }\n                            },\n                            dblclick: function (e, _, item) {\n                                _this.onListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            },\n            on: {\n                keydown: function (e) {\n                    if (UtilKeyboardEvent.isDeleteKey(e)) {\n                        var canvas = _this._canvas;\n                        if (canvas) {\n                            var layer = canvas.layer;\n                            var size = layer.size();\n                            var active = layer.active;\n                            if (1 < size && active) {\n                                DControllers.getCommandController().push(new ECommandLayerDelete(active, layer, _this._selection));\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        return result;\n    };\n    EEditorLayer.prototype.onListDblClick = function (e, _, item, list) {\n        var canvas = this._canvas;\n        if (canvas) {\n            var layerActive_1 = canvas.layer.active;\n            if (layerActive_1) {\n                var oldValue_1 = EDialogLayerValue.from(layerActive_1);\n                var dialogLayer = this.dialog;\n                dialogLayer.value = oldValue_1;\n                dialogLayer.open(item).then(function (newValue) {\n                    if (newValue && !newValue.isEqual(oldValue_1)) {\n                        DControllers.getCommandController().push(new ECommandLayerChange(layerActive_1, newValue, canvas.layer));\n                    }\n                });\n            }\n        }\n    };\n    EEditorLayer.prototype.onListLayerChange = function () {\n        var listLayer = this.list;\n        var canvas = this._canvas;\n        if (canvas) {\n            var layerContainer = canvas.layer;\n            var layers = layerContainer.children;\n            var layerActive = layerContainer.active;\n            var items = listLayer.data.items;\n            for (var i = 0, imax = layers.length; i < imax; ++i) {\n                items[i] = layers[imax - 1 - i];\n            }\n            items.length = layers.length;\n            listLayer.update(true);\n            if (layerActive != null) {\n                listLayer.data.selection.clearAndAdd(layerActive);\n            }\n            else {\n                listLayer.data.selection.clear();\n            }\n        }\n        else {\n            listLayer.data.items = [];\n        }\n    };\n    EEditorLayer.prototype.onListSelectionChange = function () {\n        var first = this.list.data.selection.first;\n        if (first) {\n            var canvas = this._canvas;\n            if (canvas) {\n                var layerActive = canvas.layer.active;\n                if (layerActive !== first) {\n                    // Unselect\n                    var selection = this._selection;\n                    if (!selection.isEmpty()) {\n                        var before = selection.store();\n                        if (selection.clear()) {\n                            var after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    // Change the active layer\n                    canvas.layer.active = first;\n                }\n            }\n        }\n    };\n    EEditorLayer.prototype.onCanvasChange = function (newCanvas, forcibly) {\n        var oldCanvas = this._canvas;\n        if (newCanvas !== this._canvas) {\n            var onLayerChangeBound = this.onLayerChangeBound;\n            if (oldCanvas != null) {\n                oldCanvas.layer.off(\"change\", onLayerChangeBound);\n            }\n            this._canvas = newCanvas;\n            if (newCanvas != null) {\n                this.state.isDisabled = false;\n                newCanvas.layer.on(\"change\", onLayerChangeBound);\n            }\n            else {\n                this.state.isDisabled = true;\n            }\n            this.onLayerChange();\n        }\n        else if (forcibly) {\n            this.onLayerChange();\n        }\n    };\n    EEditorLayer.prototype.isActiveDeletable = function (canvas) {\n        if (canvas) {\n            return 1 < canvas.layer.size();\n        }\n        return false;\n    };\n    EEditorLayer.prototype.isActiveNotLast = function (canvas) {\n        if (canvas) {\n            var layer = canvas.layer;\n            var layers = layer.children;\n            var active = layer.active;\n            if (active) {\n                return active !== layers[layers.length - 1];\n            }\n        }\n        return false;\n    };\n    EEditorLayer.prototype.isActiveNotFirst = function (canvas) {\n        if (canvas) {\n            var layer = canvas.layer;\n            var layers = layer.children;\n            var active = layer.active;\n            if (active) {\n                return active !== layers[0];\n            }\n        }\n        return false;\n    };\n    EEditorLayer.prototype.onLayerChange = function () {\n        // Update buttons\n        var canvas = this._canvas;\n        this.state.isEnabled = canvas != null;\n        this.buttonDelete.state.isEnabled = this.isActiveDeletable(canvas);\n        this.buttonSendBackward.state.isEnabled = this.isActiveNotFirst(canvas);\n        this.buttonBringForward.state.isEnabled = this.isActiveNotLast(canvas);\n        // Update the list\n        this.onListLayerChange();\n        // Update the modifier\n        this._selection.updateModifier();\n    };\n    EEditorLayer.prototype.getType = function () {\n        return \"EEditorLayer\";\n    };\n    return EEditorLayer;\n}(DLayoutVertical));\nexport { EEditorLayer };\n//# sourceMappingURL=e-editor-layer.js.map","import { EShapeEmbedded, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { getShapeTypeTheme } from \"./get-shape-type-theme\";\nexport var toShapeLabel = function (shape) {\n    var id = shape.id;\n    if (0 < id.length) {\n        return id;\n    }\n    var shapeType = shape.type;\n    if (EShapeType.EXTENSION <= shapeType) {\n        var extension = EShapeExtensions.get(shapeType);\n        if (extension && \"name\" in extension) {\n            var name_1 = extension.name;\n            if (name_1 != null) {\n                return name_1;\n            }\n        }\n        return getShapeTypeTheme().getLabel(shapeType);\n    }\n    else if (shapeType === EShapeType.EMBEDDED) {\n        if (shape instanceof EShapeEmbedded) {\n            return shape.name;\n        }\n        else {\n            return getShapeTypeTheme().getLabel(shapeType);\n        }\n    }\n    return getShapeTypeTheme().getLabel(shapeType);\n};\n//# sourceMappingURL=to-shape-label.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { getShapeTypeTheme } from \"./get-shape-type-theme\";\nexport var toShapeTypeLabel = function (shapeType) {\n    if (EShapeType.EXTENSION <= shapeType) {\n        var extension = EShapeExtensions.get(shapeType);\n        if (extension && \"name\" in extension) {\n            var name_1 = extension.name;\n            if (name_1 != null) {\n                return name_1;\n            }\n        }\n        return getShapeTypeTheme().getLabel(shapeType);\n    }\n    return getShapeTypeTheme().getLabel(shapeType);\n};\n//# sourceMappingURL=to-shape-type-label.js.map","import { __extends } from \"tslib\";\nimport { DButtonPrimary, DControllers, DDialogMessage, DDialogProcessing, DIndicatorProcessing, DInputLabel, DInputSearch, DInputText, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DSelect, DText, EShapeConnectorLine, EShapeType, isArray } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { toShapeLabel } from \"./to-shape-label\";\nimport { EEditorSearchConditionState } from \"./e-editor-search-condition-state\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { EEditorSearchConditionType } from \"./e-editor-search-condition-type\";\nimport { toShapeTypeLabel } from \"./to-shape-type-label\";\nvar EEditorSearch = /** @class */ (function (_super) {\n    __extends(EEditorSearch, _super);\n    function EEditorSearch(options) {\n        var _a;\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Finder\n        _this._finder = options.finder;\n        // Interval\n        _this._interval = (_a = options.interval) !== null && _a !== void 0 ? _a : 333;\n        // Diagram\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.list.data.clear();\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        // Layout\n        _this.addChild(_this.newTextLabel());\n        if (_this._finder != null) {\n            _this.addChild(_this.inputSearch);\n        }\n        else {\n            _this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: _this.theme.getInputIdLabel()\n                        }\n                    }),\n                    _this.inputId\n                ]\n            }));\n            _this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: _this.theme.getSelectTypeLabel()\n                        }\n                    }),\n                    _this.selectType\n                ]\n            }));\n            _this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: _this.theme.getSelectStateLabel()\n                        }\n                    }),\n                    _this.selectState\n                ]\n            }));\n            _this.addChild(_this.buttonExecute);\n        }\n        _this.addChild(_this.list);\n        return _this;\n    }\n    EEditorSearch.prototype.newTextLabel = function () {\n        return new DText({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"inputSearch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputSearch) !== null && _a !== void 0 ? _a : (this._inputSearch = this.newInputSearch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newInputSearch = function () {\n        var _this = this;\n        return new DInputSearch({\n            x: \"padding\",\n            width: \"padding\",\n            on: {\n                input: function (newValue) {\n                    _this.search(newValue);\n                },\n                enter: function (emitter) {\n                    _this.search(emitter.value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"inputId\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputId) !== null && _a !== void 0 ? _a : (this._inputId = this.newInputId()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newInputId = function () {\n        var _this = this;\n        return new DInputText({\n            weight: 1,\n            on: {\n                enter: function () {\n                    _this.buttonExecute.activate();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"selectType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectType) !== null && _a !== void 0 ? _a : (this._selectType = this.newSelectType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newSelectType = function () {\n        return new DSelect({\n            weight: 1,\n            value: EEditorSearchConditionType.NONE,\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newSelectTypeMenuItems()\n            }\n        });\n    };\n    EEditorSearch.prototype.newSelectTypeMenuItems = function () {\n        var _this = this;\n        var result = [\n            this.newSelectTypeMenuItem(EEditorSearchConditionType.NONE, this.theme.toTypeLabel(EEditorSearchConditionType.NONE)),\n            this.newSelectTypeMenuItemShape(EShapeType.CIRCLE),\n            this.newSelectTypeMenuItemShape(EShapeType.SEMICIRCLE),\n            this.newSelectTypeMenuItemShape(EShapeType.RECTANGLE),\n            this.newSelectTypeMenuItemShape(EShapeType.RECTANGLE_ROUNDED),\n            this.newSelectTypeMenuItemShape(EShapeType.TRIANGLE),\n            this.newSelectTypeMenuItemShape(EShapeType.TRIANGLE_ROUNDED),\n            this.newSelectTypeMenuItemShape(EShapeType.LINE),\n            this.newSelectTypeMenuItemShape(EShapeType.CONNECTOR_LINE),\n            this.newSelectTypeMenuItemShape(EShapeType.CONNECTOR_ELBOW),\n            this.newSelectTypeMenuItemShape(EShapeType.IMAGE),\n            this.newSelectTypeMenuItemShape(EShapeType.GROUP),\n            this.newSelectTypeMenuItemShape(EShapeType.BAR),\n            this.newSelectTypeMenuItemShape(EShapeType.BUTTON),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED_LAYER),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED_ACCEPTOR_EDGE)\n        ];\n        EShapeExtensions.each(function (extension) {\n            if (\"type\" in extension) {\n                result.push(_this.newSelectTypeMenuItemShape(extension.type));\n            }\n        });\n        return result;\n    };\n    EEditorSearch.prototype.newSelectTypeMenuItem = function (type, label) {\n        return {\n            width: 200,\n            value: type,\n            text: {\n                value: label\n            }\n        };\n    };\n    EEditorSearch.prototype.newSelectTypeMenuItemShape = function (type) {\n        return this.newSelectTypeMenuItem(type, toShapeTypeLabel(type));\n    };\n    EEditorSearch.prototype.getSelectTypeValue = function () {\n        var selectType = this._selectType;\n        if (selectType != null) {\n            var value = selectType.value;\n            if (value != null && 0 <= value) {\n                return value;\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"selectState\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectState) !== null && _a !== void 0 ? _a : (this._selectState = this.newSelectState()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newSelectState = function () {\n        var theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EEditorSearchConditionState.NONE,\n            menu: {\n                items: [\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.NONE, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.CONNECTED_FULLY, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.CONNECTED_PARTIALLY, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.UNCONNECTED, theme)\n                ]\n            }\n        });\n    };\n    EEditorSearch.prototype.newSelectStateMenuItem = function (state, theme) {\n        return {\n            value: state,\n            text: {\n                value: theme.toStateLabel(state)\n            }\n        };\n    };\n    EEditorSearch.prototype.getSelectStateValue = function () {\n        var result = this.selectState.value;\n        if (result != null && 0 <= result) {\n            return result;\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"buttonExecute\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonExecute) !== null && _a !== void 0 ? _a : (this._buttonExecute = this.newButtonExecute()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newButtonExecute = function () {\n        var _this = this;\n        return new DButtonPrimary({\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonExecuteTitle()\n            },\n            image: {\n                source: this._icons.editor_search\n            },\n            on: {\n                active: function (emitter) {\n                    _this.onButtonExecuteActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorSearch.prototype.onButtonExecuteActive = function (opener) {\n        var _a, _b;\n        var indicator = this.indicatorExecute;\n        indicator.start();\n        var shapes = [];\n        var canvas = this._diagram.canvas;\n        if (canvas != null) {\n            var id_1 = this.inputId.value.trim();\n            var type_1 = (_a = this.selectType.value) !== null && _a !== void 0 ? _a : EEditorSearchConditionType.NONE;\n            var state_1 = (_b = this.selectState.value) !== null && _b !== void 0 ? _b : EEditorSearchConditionState.NONE;\n            canvas.shape.each(function (shape) {\n                if (0 < id_1.length && shape.id.indexOf(id_1) < 0) {\n                    return true;\n                }\n                if (type_1 !== EEditorSearchConditionType.NONE && type_1 !== shape.type) {\n                    return true;\n                }\n                switch (state_1) {\n                    case EEditorSearchConditionState.CONNECTED_FULLY:\n                        if (shape instanceof EShapeConnectorLine) {\n                            var edge = shape.edge;\n                            var tail = edge.tail.acceptor.shape;\n                            var head = edge.head.acceptor.shape;\n                            if (tail == null || head == null) {\n                                return true;\n                            }\n                        }\n                        else {\n                            if (shape.connector.size() <= 0) {\n                                return true;\n                            }\n                        }\n                        break;\n                    case EEditorSearchConditionState.CONNECTED_PARTIALLY:\n                        if (shape instanceof EShapeConnectorLine) {\n                            var edge = shape.edge;\n                            var tail = edge.tail.acceptor.shape;\n                            var head = edge.head.acceptor.shape;\n                            if ((tail == null && head == null) || (tail != null && head != null)) {\n                                return true;\n                            }\n                        }\n                        else {\n                            return true;\n                        }\n                        break;\n                    case EEditorSearchConditionState.UNCONNECTED:\n                        if (shape instanceof EShapeConnectorLine) {\n                            var edge = shape.edge;\n                            var tail = edge.tail.acceptor.shape;\n                            var head = edge.head.acceptor.shape;\n                            if (tail != null || head != null) {\n                                return true;\n                            }\n                        }\n                        else {\n                            if (0 < shape.connector.size()) {\n                                return true;\n                            }\n                        }\n                        break;\n                }\n                shapes.push(shape);\n                return true;\n            });\n        }\n        this.list.data.clearAndAddAll(shapes);\n        indicator.resolve();\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"indicatorExecute\", {\n        get: function () {\n            var _a;\n            return ((_a = this._indicatorExecute) !== null && _a !== void 0 ? _a : (this._indicatorExecute = this.newIndicatorExecute()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newIndicatorExecute = function () {\n        return new DIndicatorProcessing(this.buttonExecute);\n    };\n    EEditorSearch.prototype.search = function (word) {\n        var _this = this;\n        var threshold = 500;\n        var searching = this._searching;\n        var searched = this._searched;\n        var searchedAt = this._searchedAt;\n        if (searching !== searched || (searchedAt != null && Date.now() - searchedAt < threshold)) {\n            this._requested = word;\n            if (this._timeoutId == null) {\n                this._timeoutId = window.setTimeout(function () {\n                    _this._timeoutId = null;\n                    var newWord = _this._requested;\n                    if (newWord != null) {\n                        _this._requested = undefined;\n                        _this.search(newWord);\n                    }\n                }, threshold);\n            }\n        }\n        else {\n            var timeoutId = this._timeoutId;\n            if (timeoutId != null) {\n                this._timeoutId = null;\n                window.clearTimeout(timeoutId);\n            }\n            this._searching = word;\n            this.doSearch(word).then(function (result) {\n                _this.list.data.clearAndAddAll(result.shapes);\n                _this._searched = result.word;\n                _this._searchedAt = Date.now();\n            });\n        }\n    };\n    EEditorSearch.prototype.doSearch = function (word) {\n        var finder = this._finder;\n        if (finder == null) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n        var canvas = this._diagram.canvas;\n        if (canvas == null) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n        var trimmed = word.trim();\n        if (trimmed.length <= 0) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n        try {\n            var found = finder(canvas, trimmed);\n            if (isArray(found)) {\n                return Promise.resolve({\n                    word: word,\n                    shapes: found\n                });\n            }\n            else {\n                return found.then(function (shapes) {\n                    return {\n                        word: word,\n                        shapes: shapes\n                    };\n                }, function () {\n                    return {\n                        word: word,\n                        shapes: []\n                    };\n                });\n            }\n        }\n        catch (_a) {\n            return Promise.resolve({\n                word: word,\n                shapes: []\n            });\n        }\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"list\", {\n        get: function () {\n            var _a;\n            return ((_a = this._list) !== null && _a !== void 0 ? _a : (this._list = this.newList()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newList = function () {\n        var _this = this;\n        return new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return toShapeLabel(value);\n                },\n                toTitle: function (value) {\n                    return undefined;\n                },\n                toImage: function (value) {\n                    return null;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            select: function (value, item) {\n                                _this.onListItemDown(value, item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    };\n    EEditorSearch.prototype.onListItemDown = function (value, item) {\n        var shape = value;\n        if (shape != null) {\n            var canvas = this._diagram.canvas;\n            var layer = shape.root.parent;\n            if (canvas != null && layer != null) {\n                // Selection\n                var selection = this._selection;\n                var before = selection.store();\n                if (selection.set(shape)) {\n                    selection.focus();\n                    var after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n                // Change the active layer\n                var layerActive = canvas.layer.active;\n                if (layerActive !== layer) {\n                    canvas.layer.active = layer;\n                }\n            }\n            else {\n                this.dialogError.open(item);\n            }\n        }\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"dialogError\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogError) !== null && _a !== void 0 ? _a : (this._dialogError = this.newDialogError()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newDialogError = function () {\n        return new DDialogMessage({\n            message: this.theme.getDialogErrorLabel()\n        });\n    };\n    Object.defineProperty(EEditorSearch.prototype, \"dialogProcessing\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogProcessing) !== null && _a !== void 0 ? _a : (this._dialogProcessing = this.newDialogProcessing()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSearch.prototype.newDialogProcessing = function () {\n        return new DDialogProcessing();\n    };\n    EEditorSearch.prototype.getType = function () {\n        return \"EEditorSearch\";\n    };\n    return EEditorSearch;\n}(DLayoutVertical));\nexport { EEditorSearch };\n//# sourceMappingURL=e-editor-search.js.map","export var EEditorSearchConditionType = {\n    NONE: -1\n};\n//# sourceMappingURL=e-editor-search-condition-type.js.map","export var EEditorSearchConditionState = {\n    NONE: -1,\n    UNCONNECTED: 0,\n    CONNECTED_PARTIALLY: 1,\n    CONNECTED_FULLY: 2\n};\n//# sourceMappingURL=e-editor-search-condition-state.js.map","import { __extends } from \"tslib\";\nimport { createLine, DButton, DButtonAmbient, DButtonCheck, DButtonCheckRight, DButtonColor, DButtonColorGradient, DButtonFile, DButtonFileAs, DDialogSelect, DInputReal, DInputRealAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DPane, DSelect, DText, EShapeAcceptorEdgeSide, EShapeCapabilities, EShapeCapability, EShapeCircle, EShapeConnectorElbow, EShapeConnectorLine, EShapeCopyPart, EShapeCorner, EShapeDefaults, EShapeEmbeddeds, EShapeGroup, EShapeImage, EShapeLine, EShapeLockPart, EShapePointsFormatters, EShapePointsMarkerType, EShapePointsStyle, EShapeRectangle, EShapeRectangleRounded, EShapeResourceManagerDeserializationMode, EShapeSemicircle, EShapeStrokeSide, EShapeStrokeStyle, EShapeTriangle, EShapeTriangleRounded, EShapeType, isFunction, isString, toGradientImageUrl, toImageElement } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensionFactories } from \"../extension/e-shape-extension-factories\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { newDialogSelectWithThumbnails } from \"./e-dialog-select-with-thumbnails\";\nimport { EEDITOR_BUTTON_COUNT } from \"./e-editors\";\nvar EEditorShape = /** @class */ (function (_super) {\n    __extends(EEditorShape, _super);\n    function EEditorShape(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        _this._canvas = options.canvas;\n        _this._selection = options.selection;\n        _this._isInitialized = false;\n        var piece = options.piece;\n        if (piece) {\n            _this._isPieceEnabled = piece.enable;\n            _this._pieceExcluder = piece.exclude;\n            _this._controller = piece.controller;\n        }\n        else {\n            _this._isPieceEnabled = false;\n        }\n        _this._isChangeable = options.changeable;\n        return _this;\n    }\n    EEditorShape.prototype.show = function () {\n        _super.prototype.show.call(this);\n        this.onShow();\n        return this;\n    };\n    EEditorShape.prototype.onShow = function () {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onSelectionChange();\n    };\n    EEditorShape.prototype.initLayout = function () {\n        var _this = this;\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.layoutChangeTo,\n                this.buttonFill,\n                this.buttonFillColor,\n                this.layoutTexture,\n                this.buttonStroke,\n                this.buttonStrokeColor,\n                this.inputStrokeWidth,\n                this.inputStrokeAlign,\n                this.layoutStrokeSide,\n                this.textCorner,\n                this.inputCornerRadius,\n                this.layoutCorner,\n                this.layoutLine,\n                this.selectLineStyle,\n                this.selectLineType,\n                this.layoutLineTail,\n                this.selectLineTailType,\n                this.layoutLineTailSize,\n                this.buttonLineTailColor,\n                this.inputLineTailMargin,\n                this.layoutLineHead,\n                this.selectLineHeadType,\n                this.layoutLineHeadSize,\n                this.buttonLineHeadColor,\n                this.inputLineHeadMargin\n            ]\n        });\n        // Selection change handling\n        this._selection.on(\"change\", function () {\n            if (_this.isShown()) {\n                _this.onSelectionChange();\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutChangeTo\", {\n        get: function () {\n            var result = this._layoutChangeTo;\n            if (result === undefined) {\n                result = this._isChangeable !== false ? this.newLayoutChangeTo() : null;\n                this._layoutChangeTo = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutChangeTo = function () {\n        var _this = this;\n        var children = [\n            this.newTextChangeToLabel(),\n            this.buttonCircle,\n            this.buttonSemicircle,\n            this.buttonRectangle,\n            this.buttonRectangleRounded,\n            this.buttonTriangle,\n            this.buttonTriangleRounded,\n            this.buttonLine,\n            this.buttonLineConnector,\n            this.buttonElbowConnector,\n            this.buttonImage,\n            this.buttonGraphicPiece\n        ];\n        EShapeExtensionFactories.each(function (factory) {\n            children.push(_this.newButtonExtensionFactory(factory));\n        });\n        EShapeExtensions.each(function (extension) {\n            if (_this.isExtensionReplacable(extension)) {\n                var creator = extension.creator;\n                if (isFunction(creator)) {\n                    children.push(_this.newButtonExtension(extension, creator));\n                }\n            }\n        });\n        children.push(this.buttonGroup, this.buttonUngroup);\n        return new DLayoutVertical({\n            width: \"100%\",\n            height: \"auto\",\n            column: EEDITOR_BUTTON_COUNT,\n            children: children\n        });\n    };\n    EEditorShape.prototype.isExtensionReplacable = function (extension) {\n        if (\"icon\" in extension) {\n            if (\"type\" in extension) {\n                var capability = EShapeCapabilities.get(extension.type);\n                if (capability != null) {\n                    if (capability & EShapeCapability.REPLACING) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    EEditorShape.prototype.newTextChangeToLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getTextChangeToLabel()\n            },\n            clear: \"AFTER\"\n        });\n    };\n    EEditorShape.prototype.newButtonExtensionFactory = function (factory) {\n        var _this = this;\n        var selectDialog = null;\n        return new DButtonAmbient({\n            image: {\n                source: factory.icon.texture\n            },\n            title: this.toExtensionTitle(factory),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function (emitter) {\n                    selectDialog = selectDialog || _this.newDialogSelectExtensionFactory(factory);\n                    selectDialog.open(emitter);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectExtensionFactory = function (factory) {\n        var _this = this;\n        return new DDialogSelect({\n            controller: factory,\n            list: {\n                data: {\n                    toLabel: factory.item.toLabel\n                }\n            },\n            on: {\n                select: function (value) {\n                    factory.item.toCreator(value).then(function (creator) {\n                        _this._selection.replace(creator);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newButtonExtension = function (extension, creator) {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: extension.icon.texture\n            },\n            title: this.toExtensionTitle(extension),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(creator);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.toExtensionTitle = function (extension) {\n        var title = extension.title;\n        if (isString(title)) {\n            return title;\n        }\n        return title.change;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCircle) !== null && _a !== void 0 ? _a : (this._buttonCircle = this.newButtonCircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCircle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_circle\n            },\n            title: this.theme.getButtonCircleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.CIRCLE) {\n                            return new EShapeCircle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonSemicircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSemicircle) !== null && _a !== void 0 ? _a : (this._buttonSemicircle = this.newButtonSemicircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonSemicircle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_semicircle\n            },\n            title: this.theme.getButtonSemicircleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.SEMICIRCLE) {\n                            return new EShapeSemicircle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonRectangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonRectangle) !== null && _a !== void 0 ? _a : (this._buttonRectangle = this.newButtonRectangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonRectangle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_rectangle\n            },\n            title: this.theme.getButtonRectangleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.RECTANGLE) {\n                            return new EShapeRectangle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonRectangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonRectangleRounded) !== null && _a !== void 0 ? _a : (this._buttonRectangleRounded = this.newButtonRectangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonRectangleRounded = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_rectangle_rounded\n            },\n            title: this.theme.getButtonRectangleRoundedTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.RECTANGLE_ROUNDED) {\n                            return new EShapeRectangleRounded().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTriangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTriangle) !== null && _a !== void 0 ? _a : (this._buttonTriangle = this.newButtonTriangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTriangle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_triangle\n            },\n            title: this.theme.getButtonTriangleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.TRIANGLE) {\n                            return new EShapeTriangle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTriangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTriangleRounded) !== null && _a !== void 0 ? _a : (this._buttonTriangleRounded = this.newButtonTriangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTriangleRounded = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_triangle_rounded\n            },\n            title: this.theme.getButtonTriangleRoundedTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        if (existing.type !== EShapeType.TRIANGLE_ROUNDED) {\n                            return new EShapeTriangleRounded().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLine) !== null && _a !== void 0 ? _a : (this._buttonLine = this.newButtonLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLine = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_line\n            },\n            title: this.theme.getButtonLineTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.replace(function (existing) {\n                        return _this.replaceLine(existing);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.replaceLine = function (existing) {\n        if (existing.type !== EShapeType.LINE) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeLine().copy(existing);\n            }\n            else {\n                var size = existing.size;\n                var sxh = size.x * 0.5;\n                var syh = size.y * 0.5;\n                return createLine([-sxh, -syh, +sxh, +syh], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE).copy(existing, EShapeCopyPart.ALL & ~(EShapeCopyPart.SIZE | EShapeCopyPart.POINTS));\n            }\n        }\n        return null;\n    };\n    EEditorShape.prototype.isDanglingConnectorAllowed = function () {\n        var _a, _b, _c;\n        return (_c = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.connector) === null || _b === void 0 ? void 0 : _b.dangling) !== null && _c !== void 0 ? _c : false;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineConnector) !== null && _a !== void 0 ? _a : (this._buttonLineConnector = this.newButtonLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineConnector = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_line_connector\n            },\n            title: this.theme.getButtonLineConnectorTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    var isDanglingConnectorAllowed = _this.isDanglingConnectorAllowed();\n                    _this._selection.replace(function (existing) {\n                        return _this.replaceLineConnector(existing, isDanglingConnectorAllowed);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.replaceLineConnector = function (existing, isDanglingConnectorAllowed) {\n        if (existing.type !== EShapeType.CONNECTOR_LINE) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeConnectorLine().copy(existing);\n            }\n            else if (isDanglingConnectorAllowed) {\n                return this.replaceConnector(existing, new EShapeConnectorLine());\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonElbowConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonElbowConnector) !== null && _a !== void 0 ? _a : (this._buttonElbowConnector = this.newButtonElbowConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonElbowConnector = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_elbow_connector\n            },\n            title: this.theme.getButtonElbowConnectorTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    var isDanglingConnectorAllowed = _this.isDanglingConnectorAllowed();\n                    _this._selection.replace(function (existing) {\n                        return _this.replaceElbowConnector(existing, isDanglingConnectorAllowed);\n                    });\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.replaceElbowConnector = function (existing, isDanglingConnectorAllowed) {\n        if (existing.type !== EShapeType.CONNECTOR_ELBOW) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeConnectorElbow().copy(existing);\n            }\n            else if (isDanglingConnectorAllowed) {\n                return this.replaceConnector(existing, new EShapeConnectorElbow());\n            }\n        }\n        return null;\n    };\n    EEditorShape.prototype.replaceConnector = function (existing, result) {\n        result.lock(EShapeLockPart.ALL);\n        result.fill.alpha = 1;\n        var marker = result.points.marker;\n        marker.tail.type = EShapePointsMarkerType.CIRCLE;\n        marker.head.type = EShapePointsMarkerType.TRIANGLE;\n        result.copy(existing, EShapeCopyPart.ALL &\n            ~(EShapeCopyPart.SIZE | EShapeCopyPart.POINTS | EShapeCopyPart.TRANSFORM));\n        var size = existing.size;\n        var sxh = size.x * 0.5;\n        var syh = size.y * 0.5;\n        var localTransform = existing.transform.localTransform;\n        var rx = localTransform.a * sxh + localTransform.c * syh;\n        var ry = localTransform.b * sxh + localTransform.d * syh;\n        var tx = localTransform.tx;\n        var ty = localTransform.ty;\n        var edge = result.edge;\n        edge.lock();\n        edge.tail.set(null, null, null, null, 0, -rx + tx, -ry + ty, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        edge.head.set(null, null, null, null, 0, +rx + tx, +ry + ty, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        edge.unlock();\n        result.unlock(EShapeLockPart.ALL, true);\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonImage\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonImage) !== null && _a !== void 0 ? _a : (this._buttonImage = this.newButtonImage()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonImage = function () {\n        var _this = this;\n        return new DButtonFile({\n            image: {\n                source: this._icons.editor_image\n            },\n            as: DButtonFileAs.DATA_URL,\n            title: this.theme.getButtonImageTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                open: function (dataUrl) {\n                    toImageElement(dataUrl).then(function (item) {\n                        _this._selection.replace(function (existing) {\n                            return new EShapeImage(item).copy(existing, EShapeCopyPart.ALL & ~EShapeCopyPart.IMAGE);\n                        });\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonGraphicPiece\", {\n        get: function () {\n            var result = this._buttonGraphicPiece;\n            if (result === undefined) {\n                result = this._isPieceEnabled ? this.newButtonGraphicPiece() : null;\n                this._buttonGraphicPiece = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonGraphicPiece = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.graphic_piece\n            },\n            title: this.theme.getButtonGraphicPieceTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function (emitter) {\n                    _this.onButtonGraphicPieceActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.onButtonGraphicPieceActive = function (opener) {\n        this.dialogSelectGraphicPiece.then(function (dialogSelectGraphicPiece) {\n            dialogSelectGraphicPiece.open(opener);\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"dialogSelectGraphicPiece\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSelectGraphicPiece) !== null && _a !== void 0 ? _a : (this._dialogSelectGraphicPiece = this.newDialogSelectGraphicPiece()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newDialogSelectGraphicPiece = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            var controller = _this._controller;\n            if (controller) {\n                if (controller.toPieceThumbnail) {\n                    var result = _this.newDialogSelectGraphicPieceImage(controller);\n                    result.categories = canvas.category.items;\n                    return result;\n                }\n                else {\n                    var result = _this.newDialogSelectGraphicPieceNoImage(controller);\n                    result.categories = canvas.category.items;\n                    return result;\n                }\n            }\n            else {\n                var result = _this.newDialogSelectGraphicPieceNoController();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceNoImage = function (controller) {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this.newDialogSelectGraphicPieceController(controller),\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectGraphicPieceSelect(value, controller);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceImage = function (controller) {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this.newDialogSelectGraphicPieceController(controller), controller.toPieceThumbnail, function (value) {\n            _this.onDialogSelectGraphicPieceSelect(value, controller);\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceNoController = function () {\n        return new DDialogSelect({\n            controller: {\n                search: function () {\n                    return Promise.resolve([]);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newDialogSelectGraphicPieceController = function (controller) {\n        var _this = this;\n        var graphicPiece = controller.graphic.piece;\n        return {\n            search: function (word, categoryId) {\n                return graphicPiece.search(word, categoryId).then(function (pieces) {\n                    return _this.toDialogSelectGraphicPieceResult(pieces);\n                });\n            }\n        };\n    };\n    EEditorShape.prototype.toDialogSelectGraphicPieceResult = function (targets) {\n        var _a;\n        var pieceId = (_a = this._pieceExcluder) === null || _a === void 0 ? void 0 : _a.call(this);\n        if (pieceId == null) {\n            return targets;\n        }\n        var result = [];\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (target.id !== pieceId) {\n                result.push(target);\n            }\n        }\n        return result;\n    };\n    EEditorShape.prototype.onDialogSelectGraphicPieceSelect = function (value, controller) {\n        var _this = this;\n        controller.graphic.piece.get(value.id).then(function (serialized) {\n            EShapeEmbeddeds.from(serialized, controller.graphic, EShapeResourceManagerDeserializationMode.EDITOR).then(function (shape) {\n                _this._selection.replace(function (existing) {\n                    return shape.clone().copy(existing);\n                });\n            });\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonGroup) !== null && _a !== void 0 ? _a : (this._buttonGroup = this.newButtonGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonGroup = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_group\n            },\n            title: this.theme.getButtonGroupTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.group();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonUngroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonUngroup) !== null && _a !== void 0 ? _a : (this._buttonUngroup = this.newButtonUngroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonUngroup = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_ungroup\n            },\n            title: this.theme.getButtonUngroupTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.ungroup();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFill\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFill) !== null && _a !== void 0 ? _a : (this._buttonFill = this.newButtonFill()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFill = function () {\n        var selection = this._selection;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonFillLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    selection.setFillEnabled(true);\n                },\n                inactive: function () {\n                    selection.setFillEnabled(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonFillColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonFillColor) !== null && _a !== void 0 ? _a : (this._buttonFillColor = this.newButtonFillColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonFillColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setFill(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStroke\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStroke) !== null && _a !== void 0 ? _a : (this._buttonStroke = this.newButtonStroke()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStroke = function () {\n        var selection = this._selection;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonStrokeLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    selection.setStrokeEnabled(true);\n                },\n                inactive: function () {\n                    selection.setStrokeEnabled(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeColor) !== null && _a !== void 0 ? _a : (this._buttonStrokeColor = this.newButtonStrokeColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setStroke(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputStrokeWidth\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputStrokeWidth) !== null && _a !== void 0 ? _a : (this._inputStrokeWidth = this.newInputStrokeWidth()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputStrokeWidth = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputStrokeWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                on: {\n                    change: function (value) {\n                        _this._selection.setStrokeWidth(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputStrokeAlign\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputStrokeAlign) !== null && _a !== void 0 ? _a : (this._inputStrokeAlign = this.newInputStrokeAlign()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputStrokeAlign = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputStrokeAlignLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                max: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setStrokeAlign(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutStrokeSide\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutStrokeSide) !== null && _a !== void 0 ? _a : (this._layoutStrokeSide = this.newLayoutStrokeSide()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutStrokeSide = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonStrokeSideTop,\n                this.buttonStrokeSideRight,\n                this.buttonStrokeSideBottom,\n                this.buttonStrokeSideLeft,\n                this.buttonStrokeExpandable,\n                this.buttonStrokeShrinkable,\n                this.buttonStrokeScalableDotDash,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideTop\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideTop) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideTop = this.newButtonStrokeSideTop()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideTop = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_top\n            },\n            title: this.theme.getButtonStrokeSideTopTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.TOP, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.TOP, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideRight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideRight) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideRight = this.newButtonStrokeSideRight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideRight = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_right\n            },\n            title: this.theme.getButtonStrokeSideRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.RIGHT, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.RIGHT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideBottom\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideBottom) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideBottom = this.newButtonStrokeSideBottom()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideBottom = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_bottom\n            },\n            title: this.theme.getButtonStrokeSideBottomTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.BOTTOM, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.BOTTOM, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeSideLeft\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeSideLeft) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideLeft = this.newButtonStrokeSideLeft()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeSideLeft = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_left\n            },\n            title: this.theme.getButtonStrokeSideLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.LEFT, true);\n                },\n                inactive: function () {\n                    selection.setStrokeSide(EShapeStrokeSide.LEFT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textCorner\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textCorner) !== null && _a !== void 0 ? _a : (this._textCorner = this.newTextCorner()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextCorner = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getTextCornerLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputCornerRadius\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputCornerRadius) !== null && _a !== void 0 ? _a : (this._inputCornerRadius = this.newInputCornerRadius()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputCornerRadius = function () {\n        var _this = this;\n        return new DInputReal({\n            width: \"100%\",\n            min: 0,\n            step: 1,\n            max: 100,\n            text: {\n                formatter: function (value) {\n                    return \"\".concat(+(value * 100).toFixed(2), \" %\");\n                }\n            },\n            editing: {\n                formatter: function (value) {\n                    return \"\".concat(+(value * 100).toFixed(2));\n                },\n                unformatter: function (text) {\n                    return parseFloat(text) * 0.01;\n                }\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setRadius(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutCorner\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutCorner) !== null && _a !== void 0 ? _a : (this._layoutCorner = this.newLayoutCorner()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutCorner = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonCornerTopLeft,\n                this.buttonCornerTopRight,\n                this.buttonCornerBottomRight,\n                this.buttonCornerBottomLeft,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerTopLeft\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerTopLeft) !== null && _a !== void 0 ? _a : (this._buttonCornerTopLeft = this.newButtonCornerTopLeft()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerTopLeft = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_top_left\n            },\n            title: this.theme.getButtonCornerTopLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.TOP_LEFT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.TOP_LEFT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerTopRight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerTopRight) !== null && _a !== void 0 ? _a : (this._buttonCornerTopRight = this.newButtonCornerTopRight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerTopRight = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_top_right\n            },\n            title: this.theme.getButtonCornerTopRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.TOP_RIGHT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.TOP_RIGHT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerBottomRight\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerBottomRight) !== null && _a !== void 0 ? _a : (this._buttonCornerBottomRight = this.newButtonCornerBottomRight()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerBottomRight = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_bottom_right\n            },\n            title: this.theme.getButtonCornerBottomRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_RIGHT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_RIGHT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonCornerBottomLeft\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonCornerBottomLeft) !== null && _a !== void 0 ? _a : (this._buttonCornerBottomLeft = this.newButtonCornerBottomLeft()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonCornerBottomLeft = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_bottom_left\n            },\n            title: this.theme.getButtonCornerBottomLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_LEFT, true);\n                },\n                inactive: function () {\n                    selection.setCorner(EShapeCorner.BOTTOM_LEFT, false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLine) !== null && _a !== void 0 ? _a : (this._layoutLine = this.newLayoutLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLine = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLine, this.buttonLineClosed, this.buttonLineLock]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textLine) !== null && _a !== void 0 ? _a : (this._textLine = this.newTextLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextLine = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineLock\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineLock) !== null && _a !== void 0 ? _a : (this._buttonLineLock = this.newButtonLineLock()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.LINE);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.LINE);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.isLocked = function (last, target) {\n        if (last == null) {\n            return false;\n        }\n        var capability = last.getCapability();\n        if (capability == null) {\n            return false;\n        }\n        if (capability.locked & target) {\n            return true;\n        }\n        return false;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineStyle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineStyle) !== null && _a !== void 0 ? _a : (this._selectLineStyle = this.newSelectLineStyle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineStyle = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapeStrokeStyle.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeStrokeStyle.NONE,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED_DENSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED_DENSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED_LOOSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED_LOOSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED_DENSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED_DENSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED_LOOSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED_LOOSELY)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setLineStyle(value !== null && value !== void 0 ? value : EShapeStrokeStyle.NONE, EShapeStrokeStyle.DOTTED_MASK | EShapeStrokeStyle.DASHED_MASK);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineType) !== null && _a !== void 0 ? _a : (this._selectLineType = this.newSelectLineType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineType = function () {\n        var _this = this;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsStyle.NONE,\n            menu: {\n                items: this.newSelectLineTypeMenuItems()\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setPointsStyle(value !== null && value !== void 0 ? value : EShapePointsStyle.NONE, EShapePointsStyle.FORMATTER_MASK);\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.newSelectLineTypeMenuItems = function () {\n        var result = [\n            {\n                value: EShapePointsStyle.NONE,\n                text: {\n                    value: this.theme.getSelectLineTypeLabel(EShapePointsStyle.NONE)\n                }\n            }\n        ];\n        EShapePointsFormatters.each(function (id, datum) {\n            result.push({\n                value: id << EShapePointsStyle.FORMATTER_SHIFT,\n                text: {\n                    value: datum.label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineClosed\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineClosed) !== null && _a !== void 0 ? _a : (this._buttonLineClosed = this.newButtonLineClosed()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineClosed = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.line_closed\n            },\n            title: this.theme.getButtonLineClosedTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setPointsStyle(EShapePointsStyle.CLOSED, EShapePointsStyle.NONE);\n                },\n                inactive: function () {\n                    selection.setPointsStyle(EShapePointsStyle.NONE, EShapePointsStyle.CLOSED);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeExpandable\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeExpandable) !== null && _a !== void 0 ? _a : (this._buttonStrokeExpandable = this.newButtonStrokeExpandable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeExpandable = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_expandable\n            },\n            title: this.theme.getButtonStrokeExpandableTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_EXPANDING_WIDTH);\n                },\n                inactive: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_EXPANDING_WIDTH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeShrinkable\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeShrinkable) !== null && _a !== void 0 ? _a : (this._buttonStrokeShrinkable = this.newButtonStrokeShrinkable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeShrinkable = function () {\n        var selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_shrinkable\n            },\n            title: this.theme.getButtonStrokeShrinkableTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_SHRINKING_WIDTH);\n                },\n                inactive: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_SHRINKING_WIDTH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonStrokeScalableDotDash\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonStrokeScalableDotDash) !== null && _a !== void 0 ? _a : (this._buttonStrokeScalableDotDash = this.newButtonStrokeScalableDotDash()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonStrokeScalableDotDash = function () {\n        var selection = this._selection;\n        return new DButtonCheckRight({\n            image: {\n                source: this._icons.stroke_scalable_dot_dash\n            },\n            title: this.theme.getButtonStrokeScalableDotDashTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH);\n                },\n                inactive: function () {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineTail\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineTail) !== null && _a !== void 0 ? _a : (this._layoutLineTail = this.newLayoutLineTail()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineTail = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLineTail, this.buttonLineTailLock]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textLineTail\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textLineTail) !== null && _a !== void 0 ? _a : (this._textLineTail = this.newTextLineTail()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextLineTail = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineTailLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineTailLock\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineTailLock) !== null && _a !== void 0 ? _a : (this._buttonLineTailLock = this.newButtonLineTailLock()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineTailLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.LINE_TAIL);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.LINE_TAIL);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineTailType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineTailType) !== null && _a !== void 0 ? _a : (this._selectLineTailType = this.newSelectLineTailType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineTailType = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsMarkerType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapePointsMarkerType.NONE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.CIRCLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.CIRCLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.TRIANGLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.TRIANGLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.RECTANGLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.RECTANGLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailType(value !== null && value !== void 0 ? value : EShapePointsMarkerType.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineTailSize\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineTailSize) !== null && _a !== void 0 ? _a : (this._layoutLineTailSize = this.newLayoutLineTailSize()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineTailSize = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.inputLineTailSizeX, this.inputLineTailSizeY]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineTailSizeX\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineTailSizeX) !== null && _a !== void 0 ? _a : (this._inputLineTailSizeX = this.newInputLineTailSizeX()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineTailSizeX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailSizeX(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineTailSizeY\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineTailSizeY) !== null && _a !== void 0 ? _a : (this._inputLineTailSizeY = this.newInputLineTailSizeY()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineTailSizeY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailSizeY(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineTailColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineTailColor) !== null && _a !== void 0 ? _a : (this._buttonLineTailColor = this.newButtonLineTailColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineTailColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setLineTailColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineTailMargin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineTailMargin) !== null && _a !== void 0 ? _a : (this._inputLineTailMargin = this.newInputLineTailMargin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineTailMargin = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLineTailMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setLineTailMargin(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineHead\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineHead) !== null && _a !== void 0 ? _a : (this._layoutLineHead = this.newLayoutLineHead()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineHead = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLineHead, this.buttonLineHeadLock]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"textLineHead\", {\n        get: function () {\n            var _a;\n            return ((_a = this._textLineHead) !== null && _a !== void 0 ? _a : (this._textLineHead = this.newTextLineHead()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newTextLineHead = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineHeadLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineHeadLock\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineHeadLock) !== null && _a !== void 0 ? _a : (this._buttonLineHeadLock = this.newButtonLineHeadLock()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineHeadLock = function () {\n        var _this = this;\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: function () {\n                    _this._selection.lockCapability(EShapeCapability.LINE_HEAD);\n                },\n                inactive: function () {\n                    _this._selection.unlockCapability(EShapeCapability.LINE_HEAD);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"selectLineHeadType\", {\n        get: function () {\n            var _a;\n            return ((_a = this._selectLineHeadType) !== null && _a !== void 0 ? _a : (this._selectLineHeadType = this.newSelectLineHeadType()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newSelectLineHeadType = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsMarkerType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapePointsMarkerType.NONE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.CIRCLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.CIRCLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.TRIANGLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.TRIANGLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.RECTANGLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.RECTANGLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadType(value !== null && value !== void 0 ? value : EShapePointsMarkerType.NONE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutLineHeadSize\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layoutLineHeadSize) !== null && _a !== void 0 ? _a : (this._layoutLineHeadSize = this.newLayoutLineHeadSize()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutLineHeadSize = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.inputLineHeadSizeX, this.inputLineHeadSizeY]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineHeadSizeX\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineHeadSizeX) !== null && _a !== void 0 ? _a : (this._inputLineHeadSizeX = this.newInputLineHeadSizeX()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineHeadSizeX = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadSizeX(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineHeadSizeY\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineHeadSizeY) !== null && _a !== void 0 ? _a : (this._inputLineHeadSizeY = this.newInputLineHeadSizeY()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineHeadSizeY = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadSizeY(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonLineHeadColor\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonLineHeadColor) !== null && _a !== void 0 ? _a : (this._buttonLineHeadColor = this.newButtonLineHeadColor()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonLineHeadColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setLineHeadColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"inputLineHeadMargin\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputLineHeadMargin) !== null && _a !== void 0 ? _a : (this._inputLineHeadMargin = this.newInputLineHeadMargin()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newInputLineHeadMargin = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLineHeadMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        _this._selection.setLineHeadMargin(value);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"layoutTexture\", {\n        get: function () {\n            var result = this._layoutTexture;\n            if (result == null) {\n                result = this.newLayoutTexture();\n                this._layoutTexture = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newLayoutTexture = function () {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonTextureImage,\n                this.buttonTextureGradient,\n                this.buttonTextureFitTo,\n                this.buttonTextureClear,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureImage\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureImage) !== null && _a !== void 0 ? _a : (this._buttonTextureImage = this.newButtonTextureImage()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureImage = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DButtonFile({\n            image: {\n                source: this._icons.editor_image\n            },\n            as: DButtonFileAs.DATA_URL,\n            title: theme.getButtonTextureImageTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                open: function (dataUrl) {\n                    toImageElement(dataUrl).then(function (imageElement) {\n                        _this._selection.setImage(imageElement);\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureGradient\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureGradient) !== null && _a !== void 0 ? _a : (this._buttonTextureGradient = this.newButtonTextureGradient()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureGradient = function () {\n        var _this = this;\n        var theme = this.theme;\n        var result = new DButtonColorGradient({\n            image: {\n                source: this._icons.texture_gradient\n            },\n            text: {\n                formatter: function () { return \"\"; }\n            },\n            title: theme.getButtonTextureGradientTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                change: function (value) {\n                    var url = toGradientImageUrl(value);\n                    toImageElement(url).then(function (imageElement) {\n                        _this._selection.setGradient(imageElement, value.toObject());\n                    });\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var last = _this._selection.last();\n            if (last != null && last.gradient != null) {\n                result.dialog.value.fromObject(last.gradient);\n            }\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureFitTo\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureFitTo) !== null && _a !== void 0 ? _a : (this._buttonTextureFitTo = this.newButtonTextureFitTo()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureFitTo = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DButton({\n            image: {\n                source: this._icons.texture_fit_to\n            },\n            title: theme.getButtonTextureFitToTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.fitToImage();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorShape.prototype, \"buttonTextureClear\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonTextureClear) !== null && _a !== void 0 ? _a : (this._buttonTextureClear = this.newButtonTextureClear()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorShape.prototype.newButtonTextureClear = function () {\n        var _this = this;\n        var theme = this.theme;\n        return new DButton({\n            image: {\n                source: this._icons.texture_clear\n            },\n            title: theme.getButtonTextureClearTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: function () {\n                    _this._selection.clearImage();\n                }\n            }\n        });\n    };\n    EEditorShape.prototype.onSelectionChange = function () {\n        var selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        var last = selection.last();\n        // Shape\n        var layoutChangeTo = this.layoutChangeTo;\n        if (layoutChangeTo) {\n            layoutChangeTo.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.REPLACING);\n        }\n        // Grouping\n        var ngroupable = 0;\n        if (2 <= selection.size()) {\n            var shapes = selection.get();\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                if (EShapeCapabilities.contains(shapes[i], EShapeCapability.GROUPING)) {\n                    ngroupable += 1;\n                    if (2 <= ngroupable) {\n                        break;\n                    }\n                }\n            }\n        }\n        this.buttonGroup.state.isEnabled = 2 <= ngroupable;\n        // Ungrouping\n        this.buttonUngroup.state.isEnabled =\n            last instanceof EShapeGroup &&\n                EShapeCapabilities.contains(last, EShapeCapability.CHILDREN) &&\n                EShapeCapabilities.contains(last, EShapeCapability.UNGROUPING);\n        // Fill\n        if (last != null) {\n            this.buttonFill.state.isActive = last.fill.enable;\n            var fill = last.fill;\n            var buttonFillColor = this.buttonFillColor;\n            var value = buttonFillColor.value;\n            value.color = fill.color;\n            value.alpha = fill.alpha;\n            buttonFillColor.state.isEnabled = fill.enable;\n        }\n        // Stroke\n        if (last != null) {\n            var stroke = last.stroke;\n            var strokeEnable = stroke.enable;\n            this.buttonStroke.state.isActive = strokeEnable;\n            // Stroke color\n            var buttonStrokeColor = this.buttonStrokeColor;\n            var value = buttonStrokeColor.value;\n            value.color = stroke.color;\n            value.alpha = stroke.alpha;\n            buttonStrokeColor.state.isEnabled = strokeEnable;\n            // Stroke align\n            var inputStrokeAlign = this.inputStrokeAlign;\n            inputStrokeAlign.input.value = stroke.align;\n            inputStrokeAlign.state.isEnabled = strokeEnable;\n            // Stroke width\n            var inputStrokeWidth = this.inputStrokeWidth;\n            inputStrokeWidth.input.value = stroke.width;\n            inputStrokeWidth.state.isEnabled = strokeEnable;\n            // Stroke side\n            var side = stroke.side;\n            var hasStrokeSide = strokeEnable && EShapeCapabilities.contains(last, EShapeCapability.STROKE_SIDE);\n            var buttonStrokeSideTop = this.buttonStrokeSideTop;\n            var buttonStrokeSideRight = this.buttonStrokeSideRight;\n            var buttonStrokeSideBottom = this.buttonStrokeSideBottom;\n            var buttonStrokeSideLeft = this.buttonStrokeSideLeft;\n            buttonStrokeSideTop.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideRight.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideBottom.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideLeft.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideTop.state.isActive = !!(side & EShapeStrokeSide.TOP);\n            buttonStrokeSideRight.state.isActive = !!(side & EShapeStrokeSide.RIGHT);\n            buttonStrokeSideBottom.state.isActive = !!(side & EShapeStrokeSide.BOTTOM);\n            buttonStrokeSideLeft.state.isActive = !!(side & EShapeStrokeSide.LEFT);\n            // Stroke style\n            var style = stroke.style;\n            var buttonStrokeExpandable = this.buttonStrokeExpandable;\n            var buttonStrokeShrinkable = this.buttonStrokeShrinkable;\n            var buttonStrokeScalableDotDash = this.buttonStrokeScalableDotDash;\n            buttonStrokeExpandable.state.isEnabled = strokeEnable;\n            buttonStrokeShrinkable.state.isEnabled = strokeEnable;\n            buttonStrokeScalableDotDash.state.isEnabled = strokeEnable;\n            buttonStrokeExpandable.state.isActive = !(style & EShapeStrokeStyle.NON_EXPANDING_WIDTH);\n            buttonStrokeShrinkable.state.isActive = !(style & EShapeStrokeStyle.NON_SHRINKING_WIDTH);\n            buttonStrokeScalableDotDash.state.isActive = !(style & EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH);\n        }\n        // Line\n        var layoutLine = this.layoutLine;\n        var buttonLineLock = this.buttonLineLock;\n        var selectLineStyle = this.selectLineStyle;\n        var selectLineType = this.selectLineType;\n        var buttonLineClosed = this.buttonLineClosed;\n        var layoutLineTail = this.layoutLineTail;\n        var buttonLineTailLock = this.buttonLineTailLock;\n        var selectLineTailType = this.selectLineTailType;\n        var inputLineTailSizeX = this.inputLineTailSizeX;\n        var inputLineTailSizeY = this.inputLineTailSizeY;\n        var buttonLineTailColor = this.buttonLineTailColor;\n        var inputLineTailMargin = this.inputLineTailMargin;\n        var layoutLineHead = this.layoutLineHead;\n        var buttonLineHeadLock = this.buttonLineHeadLock;\n        var selectLineHeadType = this.selectLineHeadType;\n        var inputLineHeadSizeX = this.inputLineHeadSizeX;\n        var inputLineHeadSizeY = this.inputLineHeadSizeY;\n        var buttonLineHeadColor = this.buttonLineHeadColor;\n        var inputLineHeadMargin = this.inputLineHeadMargin;\n        if (last != null && last.points != null) {\n            var points = last.points;\n            var hasLine = EShapeCapabilities.contains(last, EShapeCapability.LINE);\n            layoutLine.state.isEnabled = true;\n            buttonLineLock.state.isActive = this.isLocked(last, EShapeCapability.LINE);\n            buttonLineLock.state.isEnabled = true;\n            var lineStrokeMask = EShapeStrokeStyle.DOTTED_MASK | EShapeStrokeStyle.DASHED_MASK;\n            selectLineStyle.value = last.stroke.style & lineStrokeMask;\n            selectLineStyle.state.isEnabled = hasLine;\n            selectLineType.value = points.style & EShapePointsStyle.FORMATTER_MASK;\n            selectLineType.state.isEnabled = hasLine;\n            buttonLineClosed.state.isActive = (points.style & EShapePointsStyle.CLOSED) !== 0;\n            buttonLineClosed.state.isEnabled = hasLine;\n            var hasLineTail = EShapeCapabilities.contains(last, EShapeCapability.LINE_TAIL);\n            layoutLineTail.state.isEnabled = true;\n            buttonLineTailLock.state.isActive = this.isLocked(last, EShapeCapability.LINE_TAIL);\n            buttonLineTailLock.state.isEnabled = true;\n            var markerTail = points.marker.tail;\n            selectLineTailType.value = markerTail.type;\n            selectLineTailType.state.isEnabled = hasLineTail;\n            inputLineTailSizeX.value = markerTail.size.x;\n            inputLineTailSizeX.state.isEnabled = hasLineTail;\n            inputLineTailSizeY.value = markerTail.size.y;\n            inputLineTailSizeY.state.isEnabled = hasLineTail;\n            var markerTailFill = markerTail.fill;\n            var buttonLineTailColorValue = buttonLineTailColor.value;\n            buttonLineTailColorValue.color = markerTailFill.color;\n            buttonLineTailColorValue.alpha = markerTailFill.alpha;\n            buttonLineTailColor.state.isEnabled = markerTailFill.enable && hasLineTail;\n            if (last instanceof EShapeConnectorLine) {\n                inputLineTailMargin.input.value = last.edge.tail.margin;\n                inputLineTailMargin.state.isEnabled = hasLineTail;\n            }\n            else {\n                inputLineTailMargin.state.isEnabled = false;\n            }\n            var hasLineHead = EShapeCapabilities.contains(last, EShapeCapability.LINE_HEAD);\n            layoutLineHead.state.isEnabled = true;\n            buttonLineHeadLock.state.isActive = this.isLocked(last, EShapeCapability.LINE_HEAD);\n            buttonLineHeadLock.state.isEnabled = true;\n            var markerHead = points.marker.head;\n            selectLineHeadType.value = markerHead.type;\n            selectLineHeadType.state.isEnabled = hasLineHead;\n            inputLineHeadSizeX.value = markerHead.size.x;\n            inputLineHeadSizeX.state.isEnabled = hasLineHead;\n            inputLineHeadSizeY.value = markerHead.size.y;\n            inputLineHeadSizeY.state.isEnabled = hasLineHead;\n            var markerHeadFill = markerHead.fill;\n            var buttonLineHeadColorValue = buttonLineHeadColor.value;\n            buttonLineHeadColorValue.color = markerHeadFill.color;\n            buttonLineHeadColorValue.alpha = markerHeadFill.alpha;\n            buttonLineHeadColor.state.isEnabled = markerHeadFill.enable && hasLineHead;\n            if (last instanceof EShapeConnectorLine) {\n                inputLineHeadMargin.input.value = last.edge.head.margin;\n                inputLineHeadMargin.state.isEnabled = hasLineHead;\n            }\n            else {\n                inputLineHeadMargin.state.isEnabled = false;\n            }\n        }\n        else {\n            layoutLine.state.isEnabled = false;\n            buttonLineLock.state.isEnabled = false;\n            selectLineStyle.state.isEnabled = false;\n            selectLineType.state.isEnabled = false;\n            buttonLineClosed.state.isEnabled = false;\n            layoutLineTail.state.isEnabled = false;\n            buttonLineTailLock.state.isEnabled = false;\n            selectLineTailType.state.isEnabled = false;\n            inputLineTailSizeX.state.isEnabled = false;\n            inputLineTailSizeY.state.isEnabled = false;\n            buttonLineTailColor.state.isEnabled = false;\n            inputLineTailMargin.state.isEnabled = false;\n            layoutLineHead.state.isEnabled = false;\n            buttonLineHeadLock.state.isEnabled = false;\n            selectLineHeadType.state.isEnabled = false;\n            inputLineHeadSizeX.state.isEnabled = false;\n            inputLineHeadSizeY.state.isEnabled = false;\n            buttonLineHeadColor.state.isEnabled = false;\n            inputLineHeadMargin.state.isEnabled = false;\n        }\n        // Corner\n        if (last != null) {\n            var hasBorderRadius = EShapeCapabilities.contains(last, EShapeCapability.BORDER_RADIUS);\n            this.textCorner.state.isEnabled = hasBorderRadius;\n            this.inputCornerRadius.value = last.radius;\n            this.inputCornerRadius.state.isEnabled = hasBorderRadius;\n            this.layoutCorner.state.isEnabled = hasBorderRadius;\n            this.buttonCornerBottomLeft.state.isActive = !!(last.corner & EShapeCorner.BOTTOM_LEFT);\n            this.buttonCornerBottomRight.state.isActive = !!(last.corner & EShapeCorner.BOTTOM_RIGHT);\n            this.buttonCornerTopLeft.state.isActive = !!(last.corner & EShapeCorner.TOP_LEFT);\n            this.buttonCornerTopRight.state.isActive = !!(last.corner & EShapeCorner.TOP_RIGHT);\n        }\n        // Texture\n        if (last != null) {\n            this.buttonTextureFitTo.state.isDisabled = last.image == null;\n            this.buttonTextureClear.state.isDisabled = last.image == null;\n        }\n    };\n    EEditorShape.prototype.getType = function () {\n        return \"EEditorShape\";\n    };\n    return EEditorShape;\n}(DPane));\nexport { EEditorShape };\n//# sourceMappingURL=e-editor-shape.js.map","export var EEDITOR_BUTTON_COUNT = 7;\n//# sourceMappingURL=e-editors.js.map","import { __extends } from \"tslib\";\nimport { DBaseState, DButtonAmbient, DButtonCheckRight, DControllers, DInputRealAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DList, DListItem } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentSnapBringForward } from \"../command/e-command-document-snap-bring-forward\";\nimport { ECommandDocumentSnapCreate } from \"../command/e-command-document-snap-create\";\nimport { ECommandDocumentSnapDelete } from \"../command/e-command-document-snap-delete\";\nimport { ECommandDocumentSnapGridSize } from \"../command/e-command-document-snap-grid-size\";\nimport { ECommandDocumentSnapGridToggle } from \"../command/e-command-document-snap-grid-toggle\";\nimport { ECommandDocumentSnapGridToggleVisibility } from \"../command/e-command-document-snap-grid-toggle-visibility\";\nimport { ECommandDocumentSnapReplace } from \"../command/e-command-document-snap-replace\";\nimport { ECommandDocumentSnapSendBackward } from \"../command/e-command-document-snap-send-backward\";\nimport { ECommandDocumentSnapTargetToggle } from \"../command/e-command-document-snap-target-toggle\";\nimport { ECommandDocumentSnapTargetToggleVisibility } from \"../command/e-command-document-snap-target-toggle-visibility\";\nimport { ECommandDocumentSnapToggle } from \"../command/e-command-document-snap-toggle\";\nimport { EDialogSnap } from \"../editor/e-dialog-snap\";\nvar EEditorSnap = /** @class */ (function (_super) {\n    __extends(EEditorSnap, _super);\n    function EEditorSnap(options) {\n        var _this = _super.call(this, options) || this;\n        // Icons\n        _this._icons = options.icons;\n        // Diagram\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        // Snapper\n        var snapper = diagram.snapper;\n        _this._snapper = snapper;\n        snapper.on(\"change\", function () {\n            _this.onSnapperChange(snapper);\n        });\n        var snapperTarget = snapper.target;\n        snapperTarget.on(\"change\", function () {\n            _this.onSnapperTargetChange(snapperTarget);\n        });\n        var snapperGrid = snapper.grid;\n        snapperGrid.on(\"change\", function () {\n            _this.onSnapperGridChange(snapperGrid);\n        });\n        // Layout\n        _this.addChild(_this.buttonLabel);\n        _this.addChild(_this.buttonGrid);\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [_this.buttonGridEye, _this.inputGridSize]\n        }));\n        _this.addChild(_this.buttonTarget);\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                _this.buttonTargetNew,\n                _this.buttonTargetDelete,\n                _this.buttonTargetBringForward,\n                _this.buttonTargetSendBackward,\n                _this.buttonTargetEye,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        }));\n        _this.addChild(_this.listTarget);\n        // Selection\n        var listSnapTarget = _this.listTarget;\n        listSnapTarget.data.selection.on(\"change\", function () {\n            _this.onSelectionChange(listSnapTarget);\n        });\n        // Initialization\n        _this.onSnapperChange(snapper);\n        _this.onSnapperTargetChange(snapperTarget);\n        _this.onSnapperGridChange(snapperGrid);\n        _this.onSelectionChange(listSnapTarget);\n        return _this;\n    }\n    Object.defineProperty(EEditorSnap.prototype, \"buttonLabel\", {\n        get: function () {\n            var result = this._buttonLabel;\n            if (result == null) {\n                result = this.newButtonLabel();\n                this._buttonLabel = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonLabel = function () {\n        var snapper = this._diagram.snapper;\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    if (!snapper.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapToggle(snapper));\n                    }\n                },\n                inactive: function () {\n                    if (snapper.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapToggle(snapper));\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTarget\", {\n        get: function () {\n            var result = this._buttonTarget;\n            if (result == null) {\n                result = this.newButtonTarget();\n                this._buttonTarget = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTarget = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonTargetLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    var snapper = _this._snapper;\n                    if (!snapper.target.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggle(snapper));\n                    }\n                },\n                inactive: function () {\n                    var snapper = _this._snapper;\n                    if (snapper.target.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggle(snapper));\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetNew\", {\n        get: function () {\n            var result = this._buttonTargetNew;\n            if (result == null) {\n                result = this.newButtonTargetNew();\n                this._buttonTargetNew = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetNew = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonTargetNewTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonTargetNewActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorSnap.prototype.onButtonTargetNewActive = function (opener) {\n        var _this = this;\n        this.dialogTarget\n            .reset()\n            .open(opener)\n            .then(function (value) {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandDocumentSnapCreate(_this._snapper, value));\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetDelete\", {\n        get: function () {\n            var result = this._buttonTargetDelete;\n            if (result == null) {\n                result = this.newButtonTargetDelete();\n                this._buttonTargetDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetDelete = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonTargetDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listTarget = _this.listTarget;\n                    var first = listTarget.data.selection.first;\n                    if (first != null) {\n                        var items = listTarget.data.items;\n                        var index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapDelete(_this._snapper, index, first));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetBringForward\", {\n        get: function () {\n            var result = this._buttonTargetBringForward;\n            if (result == null) {\n                result = this.newButtonTargetBringForward();\n                this._buttonTargetBringForward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonTargetBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var listTarget = _this.listTarget;\n                    var first = listTarget.data.selection.first;\n                    var items = listTarget.data.items;\n                    if (first != null && items[0] !== first) {\n                        var index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapBringForward(_this._snapper, index));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetSendBackward\", {\n        get: function () {\n            var result = this._buttonTargetSendBackward;\n            if (result == null) {\n                result = this.newButtonTargetSendBackward();\n                this._buttonTargetSendBackward = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonTargetSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    var snapper = _this._snapper;\n                    var listTarget = _this.listTarget;\n                    var first = listTarget.data.selection.first;\n                    var items = listTarget.data.items;\n                    if (first != null && items[items.length] !== first) {\n                        var index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapSendBackward(snapper, index));\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonTargetEye\", {\n        get: function () {\n            var result = this._buttonTargetEye;\n            if (result == null) {\n                result = this.newButtonTargetEye();\n                this._buttonTargetEye = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonTargetEye = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.eye\n            },\n            title: this.theme.getButtonTargetEyeTitle(),\n            on: {\n                active: function () {\n                    DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggleVisibility(_this._snapper));\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"dialogTarget\", {\n        get: function () {\n            var result = this._dialogTarget;\n            if (result == null) {\n                result = this.newDialogTarget();\n                this._dialogTarget = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newDialogTarget = function () {\n        return new EDialogSnap();\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"listTarget\", {\n        get: function () {\n            var result = this._listTarget;\n            if (result == null) {\n                result = this.newListTarget();\n                this._listTarget = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newListTarget = function () {\n        var _this = this;\n        var theme = this.theme;\n        var result = new DList({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return theme.getListTargetItemLabel(value);\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: function (e, _, item) {\n                                _this.onListTargetDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorSnap.prototype.onListTargetDblClick = function (e, _, item, list) {\n        var _this = this;\n        var oldValue = item.value;\n        if (oldValue != null) {\n            var index = list.data.items.indexOf(oldValue);\n            if (0 <= index) {\n                var dialog = this.dialogTarget;\n                dialog.value = oldValue;\n                dialog.open(item).then(function (newValue) {\n                    if (newValue != null) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapReplace(_this._snapper, oldValue, newValue, list));\n                    }\n                });\n            }\n        }\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonGrid\", {\n        get: function () {\n            var result = this._buttonGrid;\n            if (result == null) {\n                result = this.newButtonGrid();\n                this._buttonGrid = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonGrid = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonGridLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    var snapper = _this._snapper;\n                    if (!snapper.grid.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridToggle(snapper));\n                    }\n                },\n                inactive: function () {\n                    var snapper = _this._snapper;\n                    if (snapper.grid.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridToggle(snapper));\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"buttonGridEye\", {\n        get: function () {\n            var result = this._buttonGridEye;\n            if (result == null) {\n                result = this.newButtonGridEye();\n                this._buttonGridEye = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newButtonGridEye = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.eye\n            },\n            title: this.theme.getButtonGridEyeTitle(),\n            on: {\n                active: function () {\n                    DControllers.getCommandController().push(new ECommandDocumentSnapGridToggleVisibility(_this._snapper));\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorSnap.prototype, \"inputGridSize\", {\n        get: function () {\n            var result = this._inputGridSize;\n            if (result == null) {\n                result = this.newInputGridSize();\n                this._inputGridSize = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorSnap.prototype.newInputGridSize = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            weight: 1,\n            label: {\n                text: {\n                    value: this.theme.getInputGridSizeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: 10\n                },\n                min: 2,\n                on: {\n                    change: function (value) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridSize(_this._snapper, value));\n                    }\n                }\n            }\n        });\n    };\n    EEditorSnap.prototype.onSnapperChange = function (snapper) {\n        this.buttonLabel.state.isActive = snapper.enable;\n    };\n    EEditorSnap.prototype.onSnapperTargetChange = function (target) {\n        this.buttonTarget.state.isActive = target.enable;\n        var icons = this._icons;\n        this.buttonTargetEye.image = target.visible ? icons.eye : icons.eye_slash;\n        var listTarget = this.listTarget;\n        listTarget.data.items = target.values;\n        this.onSelectionChange(listTarget);\n    };\n    EEditorSnap.prototype.onSnapperGridChange = function (grid) {\n        this.buttonGrid.state.isActive = grid.enable;\n        var icons = this._icons;\n        this.buttonGridEye.image = grid.visible ? icons.eye : icons.eye_slash;\n        this.inputGridSize.input.value = grid.size;\n    };\n    EEditorSnap.prototype.onSelectionChange = function (listSnapTarget) {\n        this.buttonTargetDelete.state.isDisabled = listSnapTarget.data.selection.isEmpty();\n        var first = listSnapTarget.data.selection.first;\n        var items = listSnapTarget.data.items;\n        this.buttonTargetBringForward.state.isDisabled = first == null || items[0] === first;\n        this.buttonTargetSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    };\n    EEditorSnap.prototype.getType = function () {\n        return \"EEditorSnap\";\n    };\n    return EEditorSnap;\n}(DLayoutVertical));\nexport { EEditorSnap };\n//# sourceMappingURL=e-editor-snap.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DButtonCheckRight, DButtonColor, DDropdown, DInputReal, DInputRealAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutVertical, DPane, DText, EShapeTextAlignHorizontal, EShapeTextAlignVertical, EShapeTextDirection, EShapeTextStyle, EShapeTextWeight } from \"@wcardinal/wcardinal-ui\";\nimport { EEDITOR_BUTTON_COUNT } from \"./e-editors\";\nvar EEditorText = /** @class */ (function (_super) {\n    __extends(EEditorText, _super);\n    function EEditorText(options) {\n        var _this = _super.call(this, options) || this;\n        _this._fromShapeTextRegEx = /\\\\+n|\\n/g;\n        _this._toShapeTextRegEx = /\\\\+n/g;\n        var selection = options.selection;\n        _this._selection = selection;\n        var icons = options.icons;\n        _this._icons = icons;\n        var theme = _this.theme;\n        new DLayoutVertical({\n            parent: _this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                _this.newLabel(theme.getLabel()),\n                _this.inputText,\n                _this.newLabel(theme.getTextFontLabel()),\n                _this.dropdownFontFamily,\n                _this.buttonFontColor,\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        _this.inputFontSize,\n                        _this.buttonFontSizeDecrease,\n                        _this.buttonFontSizeIncrease,\n                        _this.buttonFontItalic,\n                        _this.buttonFontBold\n                    ]\n                }),\n                _this.buttonOutline,\n                _this.buttonOutlineColor,\n                _this.inputOutlineWidth,\n                _this.newLabel(theme.getTextAlignLabel()),\n                new DLayoutVertical({\n                    width: \"100%\",\n                    height: \"auto\",\n                    column: EEDITOR_BUTTON_COUNT,\n                    children: [\n                        _this.buttonAlignOutsideLeft,\n                        _this.buttonAlignLeft,\n                        _this.buttonAlignCenter,\n                        _this.buttonAlignRight,\n                        _this.buttonAlignOutsideRight,\n                        _this.buttonAlignOutsideTop,\n                        _this.buttonAlignTop,\n                        _this.buttonAlignMiddle,\n                        _this.buttonAlignBottom,\n                        _this.buttonAlignOutsideBottom,\n                        _this.buttonDirectionLeftToRight,\n                        _this.buttonDirectionTopToBottom,\n                        _this.buttonDirectionBottomToTop,\n                        _this.buttonDirectionRightToLeft\n                    ]\n                }),\n                _this.buttonClipping,\n                _this.buttonFitting,\n                _this.newLabel(theme.getTextSpacingLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [_this.inputSpacingHorizontal, _this.inputSpacingVertical]\n                }),\n                _this.newLabel(theme.getTextPaddingLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [_this.inputPaddingHorizontal, _this.inputPaddingVertical]\n                }),\n                _this.newLabel(theme.getTextOffsetLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [_this.inputOffsetHorizontal, _this.inputOffsetVertical]\n                })\n            ]\n        });\n        selection.on(\"change\", function () {\n            _this.onSelectionChange(selection);\n        });\n        _this.onSelectionChange(selection);\n        return _this;\n    }\n    EEditorText.prototype.newLabel = function (label) {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: label\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputText\", {\n        get: function () {\n            var result = this._inputText;\n            if (result == null) {\n                result = this.newInputText();\n                this._inputText = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputText = function () {\n        var _this = this;\n        return new DInputTextArea({\n            width: \"100%\",\n            height: this.theme.getInputTextHeight(),\n            text: {\n                value: \"\"\n            },\n            on: {\n                input: function (value) {\n                    _this._selection.setText(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"dropdownFontFamily\", {\n        get: function () {\n            var result = this._dropdownFontFamily;\n            if (result == null) {\n                result = this.newDropdownFontFamily();\n                this._dropdownFontFamily = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newDropdownFontFamily = function () {\n        var _this = this;\n        return new DDropdown({\n            width: \"100%\",\n            text: {\n                value: this.fontFamilies.get(\"auto\")\n            },\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newDropdownFontFamilyMenuItems()\n            },\n            on: {\n                select: function (value) {\n                    var _a;\n                    _this.dropdownFontFamily.text = (_a = _this.fontFamilies.get(value)) !== null && _a !== void 0 ? _a : value;\n                    _this._selection.setTextFamily(value);\n                }\n            }\n        });\n    };\n    EEditorText.prototype.newDropdownFontFamilyMenuItems = function () {\n        var result = [];\n        this.fontFamilies.forEach(function (label, fontFamily) {\n            result.push({\n                width: 200,\n                value: fontFamily,\n                text: {\n                    value: label\n                }\n            });\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorText.prototype, \"fontFamilies\", {\n        get: function () {\n            var result = this._fontFamilies;\n            if (result == null) {\n                result = this.theme.getFontFamilies();\n                this._fontFamilies = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorText.prototype, \"buttonFontColor\", {\n        get: function () {\n            var result = this._buttonFontColor;\n            if (result == null) {\n                result = this.newButtonFontColor();\n                this._buttonFontColor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setTextColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputFontSize\", {\n        get: function () {\n            var result = this._inputFontSize;\n            if (result == null) {\n                result = this.newInputFontSize();\n                this._inputFontSize = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputFontSize = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0\n            },\n            min: 0,\n            on: {\n                input: function (size) {\n                    _this._selection.setTextSize(size);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontSizeDecrease\", {\n        get: function () {\n            var result = this._buttonFontSizeDecrease;\n            if (result == null) {\n                result = this.newButtonFontSizeDecrease();\n                this._buttonFontSizeDecrease = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontSizeDecrease = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_font_size_decrease\n            },\n            title: this.theme.getButtonFontSizeDecreaseTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextSizeDelta(-1);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontSizeIncrease\", {\n        get: function () {\n            var result = this._buttonFontSizeIncrease;\n            if (result == null) {\n                result = this.newButtonFontSizeIncrease();\n                this._buttonFontSizeIncrease = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontSizeIncrease = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_font_size_increase\n            },\n            title: this.theme.getButtonFontSizeIncreaseTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextSizeDelta(+1);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontItalic\", {\n        get: function () {\n            var result = this._buttonFontItalic;\n            if (result == null) {\n                result = this.newButtonFontItalic();\n                this._buttonFontItalic = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontItalic = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.italic\n            },\n            toggle: true,\n            title: this.theme.getButtonFontItalicTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextStyle(EShapeTextStyle.ITALIC);\n                },\n                inactive: function () {\n                    _this._selection.setTextStyle(EShapeTextStyle.NORMAL);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFontBold\", {\n        get: function () {\n            var result = this._buttonFontBold;\n            if (result == null) {\n                result = this.newButtonFontBold();\n                this._buttonFontBold = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFontBold = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.bold\n            },\n            toggle: true,\n            title: this.theme.getButtonFontBoldTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextWeight(EShapeTextWeight.BOLD);\n                },\n                inactive: function () {\n                    _this._selection.setTextWeight(EShapeTextWeight.NORMAL);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonOutline\", {\n        get: function () {\n            var result = this._buttonOutline;\n            if (result == null) {\n                result = this.newButtonOutline();\n                this._buttonOutline = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonOutline = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonOutlineLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setTextOutlineEnabled(true);\n                },\n                inactive: function () {\n                    _this._selection.setTextOutlineEnabled(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonOutlineColor\", {\n        get: function () {\n            var result = this._buttonOutlineColor;\n            if (result == null) {\n                result = this.newButtonOutlineColor();\n                this._buttonOutlineColor = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonOutlineColor = function () {\n        var _this = this;\n        var result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: function (value) {\n                    _this._selection.setTextOutlineColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputOutlineWidth\", {\n        get: function () {\n            var _a;\n            return ((_a = this._inputOutlineWidth) !== null && _a !== void 0 ? _a : (this._inputOutlineWidth = this.newInputOutlineWidth()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputOutlineWidth = function () {\n        var _this = this;\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputOutlineWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                step: 1,\n                max: 100,\n                on: {\n                    change: function (value) {\n                        _this._selection.setTextOutlineWidth(value * 0.01);\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideLeft\", {\n        get: function () {\n            var result = this._buttonAlignOutsideLeft;\n            if (result == null) {\n                result = this.newButtonAlignOutsideLeft();\n                this._buttonAlignOutsideLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_left\n            },\n            title: this.theme.getButtonAlignOutsideLeftTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.OUTSIDE_LEFT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignLeft\", {\n        get: function () {\n            var result = this._buttonAlignLeft;\n            if (result == null) {\n                result = this.newButtonAlignLeft();\n                this._buttonAlignLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_left\n            },\n            title: this.theme.getButtonAlignLeftTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.LEFT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignCenter\", {\n        get: function () {\n            var result = this._buttonAlignCenter;\n            if (result == null) {\n                result = this.newButtonAlignCenter();\n                this._buttonAlignCenter = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignCenter = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_center\n            },\n            title: this.theme.getButtonAlignCenterTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.CENTER);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignRight\", {\n        get: function () {\n            var result = this._buttonAlignRight;\n            if (result == null) {\n                result = this.newButtonAlignRight();\n                this._buttonAlignRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_right\n            },\n            title: this.theme.getButtonAlignRightTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.RIGHT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideRight\", {\n        get: function () {\n            var result = this._buttonAlignOutsideRight;\n            if (result == null) {\n                result = this.newButtonAlignOutsideRight();\n                this._buttonAlignOutsideRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_right\n            },\n            title: this.theme.getButtonAlignOutsideRightTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.OUTSIDE_RIGHT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideTop\", {\n        get: function () {\n            var result = this._buttonAlignOutsideTop;\n            if (result == null) {\n                result = this.newButtonAlignOutsideTop();\n                this._buttonAlignOutsideTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_top\n            },\n            title: this.theme.getButtonAlignOutsideTopTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.OUTSIDE_TOP);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignTop\", {\n        get: function () {\n            var result = this._buttonAlignTop;\n            if (result == null) {\n                result = this.newButtonAlignTop();\n                this._buttonAlignTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_top\n            },\n            title: this.theme.getButtonAlignTopTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.TOP);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignMiddle\", {\n        get: function () {\n            var result = this._buttonAlignMiddle;\n            if (result == null) {\n                result = this.newButtonAlignMiddle();\n                this._buttonAlignMiddle = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignMiddle = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_middle\n            },\n            title: this.theme.getButtonAlignMiddleTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.MIDDLE);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignBottom\", {\n        get: function () {\n            var result = this._buttonAlignBottom;\n            if (result == null) {\n                result = this.newButtonAlignBottom();\n                this._buttonAlignBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_bottom\n            },\n            title: this.theme.getButtonAlignBottomTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.BOTTOM);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonAlignOutsideBottom\", {\n        get: function () {\n            var result = this._buttonAlignOutsideBottom;\n            if (result == null) {\n                result = this.newButtonAlignOutsideBottom();\n                this._buttonAlignOutsideBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonAlignOutsideBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_bottom\n            },\n            title: this.theme.getButtonAlignOutsideBottomTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextAlignVertical(EShapeTextAlignVertical.OUTSIDE_BOTTOM);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionLeftToRight\", {\n        get: function () {\n            var result = this._buttonDirectionLeftToRight;\n            if (result == null) {\n                result = this.newButtonDirectionLeftToRight();\n                this._buttonDirectionLeftToRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionLeftToRight = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_left_to_right\n            },\n            title: this.theme.getButtonDirectionLeftToRightTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.LEFT_TO_RIGHT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionTopToBottom\", {\n        get: function () {\n            var result = this._buttonDirectionTopToBottom;\n            if (result == null) {\n                result = this.newButtonDirectionTopToBottom();\n                this._buttonDirectionTopToBottom = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionTopToBottom = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_top_to_bottom\n            },\n            title: this.theme.getButtonDirectionTopToBottomTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.TOP_TO_BOTTOM);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionBottomToTop\", {\n        get: function () {\n            var result = this._buttonDirectionBottomToTop;\n            if (result == null) {\n                result = this.newButtonDirectionBottomToTop();\n                this._buttonDirectionBottomToTop = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionBottomToTop = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_bottom_to_top\n            },\n            title: this.theme.getButtonDirectionBottomToTopTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.BOTTOM_TO_TOP);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonDirectionRightToLeft\", {\n        get: function () {\n            var result = this._buttonDirectionRightToLeft;\n            if (result == null) {\n                result = this.newButtonDirectionRightToLeft();\n                this._buttonDirectionRightToLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonDirectionRightToLeft = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_right_to_left\n            },\n            title: this.theme.getButtonDirectionRightToLeftTitle(),\n            on: {\n                active: function () {\n                    _this._selection.setTextDirection(EShapeTextDirection.RIGHT_TO_LEFT);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonClipping\", {\n        get: function () {\n            var result = this._buttonClipping;\n            if (result == null) {\n                result = this.newButtonClipping();\n                this._buttonClipping = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonClipping = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonClippingLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setTextClipping(true);\n                },\n                inactive: function () {\n                    _this._selection.setTextClipping(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"buttonFitting\", {\n        get: function () {\n            var result = this._buttonFitting;\n            if (result == null) {\n                result = this.newButtonFitting();\n                this._buttonFitting = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newButtonFitting = function () {\n        var _this = this;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonFittingLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: function () {\n                    _this._selection.setTextFitting(true);\n                },\n                inactive: function () {\n                    _this._selection.setTextFitting(false);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputSpacingHorizontal\", {\n        get: function () {\n            var result = this._inputSpacingHorizontal;\n            if (result == null) {\n                result = this.newInputSpacingHorizontal();\n                this._inputSpacingHorizontal = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputSpacingHorizontal = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextSpacingHorizontal(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputSpacingVertical\", {\n        get: function () {\n            var result = this._inputSpacingVertical;\n            if (result == null) {\n                result = this.newInputSpacingVertical();\n                this._inputSpacingVertical = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputSpacingVertical = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextSpacingVertical(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputPaddingHorizontal\", {\n        get: function () {\n            var result = this._inputPaddingHorizontal;\n            if (result == null) {\n                result = this.newInputPaddingHorizontal();\n                this._inputPaddingHorizontal = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputPaddingHorizontal = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextPaddingHorizontal(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputPaddingVertical\", {\n        get: function () {\n            var result = this._inputTextPaddingVertical;\n            if (result == null) {\n                result = this.newInputPaddingVertical();\n                this._inputTextPaddingVertical = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputPaddingVertical = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextPaddingVertical(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputOffsetHorizontal\", {\n        get: function () {\n            var result = this._inputOffsetHorizontal;\n            if (result == null) {\n                result = this.newInputOffsetHorizontal();\n                this._inputOffsetHorizontal = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputOffsetHorizontal = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextOffsetHorizontal(value);\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorText.prototype, \"inputOffsetVertical\", {\n        get: function () {\n            var result = this._inputOffsetVertical;\n            if (result == null) {\n                result = this.newInputOffsetVertical();\n                this._inputOffsetVertical = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorText.prototype.newInputOffsetVertical = function () {\n        var _this = this;\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: function (value) {\n                    _this._selection.setTextOffsetVertical(value);\n                }\n            }\n        });\n    };\n    EEditorText.prototype.onSelectionChange = function (selection) {\n        var _a;\n        this.state.isDisabled = selection.isEmpty();\n        var last = selection.last();\n        if (last != null) {\n            var text = last.text;\n            this.inputText.value = text.value;\n            var textFamily = text.family;\n            this.dropdownFontFamily.text = (_a = this.fontFamilies.get(textFamily)) !== null && _a !== void 0 ? _a : textFamily;\n            var buttonFontColor = this.buttonFontColor.value;\n            buttonFontColor.color = text.color;\n            buttonFontColor.alpha = text.alpha;\n            this.inputFontSize.value = text.size;\n            this.buttonFontItalic.state.isActive = text.style === EShapeTextStyle.ITALIC;\n            this.buttonFontBold.state.isActive = text.weight === EShapeTextWeight.BOLD;\n            var outline = text.outline;\n            this.buttonOutline.state.isActive = outline.enable;\n            var buttonOutlineColor = this.buttonOutlineColor;\n            var buttonOutlineColorValue = buttonOutlineColor.value;\n            buttonOutlineColorValue.color = outline.color;\n            buttonOutlineColorValue.alpha = outline.alpha;\n            buttonOutlineColor.state.isDisabled = !outline.enable;\n            var inputOutlineWidth = this.inputOutlineWidth;\n            inputOutlineWidth.input.value = outline.width * 100;\n            inputOutlineWidth.state.isDisabled = !outline.enable;\n            this.buttonClipping.state.isActive = text.clipping;\n            this.buttonFitting.state.isActive = text.fitting;\n            var spacing = text.spacing;\n            this.inputSpacingHorizontal.value = spacing.horizontal;\n            this.inputSpacingVertical.value = spacing.vertical;\n            var padding = text.padding;\n            this.inputPaddingHorizontal.value = padding.horizontal;\n            this.inputPaddingVertical.value = padding.vertical;\n            var offset = text.offset;\n            this.inputOffsetHorizontal.value = offset.horizontal;\n            this.inputOffsetVertical.value = offset.vertical;\n        }\n    };\n    EEditorText.prototype.getType = function () {\n        return \"EEditorText\";\n    };\n    return EEditorText;\n}(DPane));\nexport { EEditorText };\n//# sourceMappingURL=e-editor-text.js.map","import { __extends } from \"tslib\";\nimport { DControllers, DTableDataSelectionType } from \"@wcardinal/wcardinal-ui\";\nimport { utils } from \"pixi.js\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nvar COMPARATOR = function (a, b) {\n    return a[0] - b[0];\n};\nvar EEditorTreeSelection = /** @class */ (function (_super) {\n    __extends(EEditorTreeSelection, _super);\n    function EEditorTreeSelection(parent, selection) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._selection = selection;\n        return _this;\n    }\n    Object.defineProperty(EEditorTreeSelection.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"indices\", {\n        get: function () {\n            var selection = this._selection;\n            var result = [];\n            this._parent.each(function (row, index) {\n                if (selection.contains(row)) {\n                    result.push(index);\n                }\n            });\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"rows\", {\n        get: function () {\n            var selection = this._selection;\n            var result = [];\n            this._parent.each(function (row, index) {\n                if (selection.contains(row)) {\n                    result.push(row);\n                }\n            });\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"type\", {\n        get: function () {\n            return DTableDataSelectionType.MULTIPLE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"first\", {\n        get: function () {\n            var row = this._selection.first();\n            if (row) {\n                return this.toIndex(row);\n            }\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EEditorTreeSelection.prototype, \"last\", {\n        get: function () {\n            var row = this._selection.last();\n            if (row) {\n                return this.toIndex(row);\n            }\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTreeSelection.prototype.onNodeChange = function (nodes) {\n        // DO NOTHING\n    };\n    EEditorTreeSelection.prototype.toggle = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            var before = selection.store();\n            selection.toggle(row);\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.add = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            if (!selection.contains(row)) {\n                var before = selection.store();\n                selection.toggle(row);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.toIndex = function (target) {\n        var result = null;\n        this._parent.each(function (row, index) {\n            if (target === row) {\n                result = index;\n                return false;\n            }\n            return true;\n        });\n        return result;\n    };\n    EEditorTreeSelection.prototype.addTo = function (rowIndex) {\n        var last = this._selection.last();\n        if (last != null) {\n            var index = this.toIndex(last);\n            if (index != null) {\n                this.addRange(index, false, rowIndex, true);\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.addRange = function (from, includeFrom, to, includeTo) {\n        var rows = [];\n        var parent = this._parent;\n        var selection = this._selection;\n        if (from < to) {\n            parent.each(function (row) {\n                if (!selection.contains(row)) {\n                    rows.push(row);\n                }\n            }, from + (includeFrom ? 0 : 1), to + (includeTo ? 1 : 0));\n        }\n        else {\n            parent.each(function (row) {\n                if (!selection.contains(row)) {\n                    rows.push(row);\n                }\n            }, to + (includeTo ? 0 : 1), from + (includeFrom ? 1 : 0));\n        }\n        if (0 < rows.length) {\n            var before = selection.store();\n            selection.addAll(rows);\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.addAll = function (rowIndices) {\n        if (0 < rowIndices.length) {\n            var rows = [];\n            var parent_1 = this._parent;\n            var selection = this._selection;\n            for (var i = 0, imax = rowIndices.length; i < imax; ++i) {\n                var row = parent_1.get(rowIndices[i]);\n                if (row && !selection.contains(row)) {\n                    rows.push(row);\n                }\n            }\n            if (0 < rows.length) {\n                var before = selection.store();\n                selection.addAll(rows);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.contains = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            return this._selection.contains(row);\n        }\n        return false;\n    };\n    EEditorTreeSelection.prototype.remove = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            if (selection.contains(row)) {\n                var before = selection.store();\n                selection.remove(row);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.clear = function () {\n        var selection = this._selection;\n        if (!selection.isEmpty()) {\n            var before = selection.store();\n            selection.clear();\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.clearAndAdd = function (rowIndex) {\n        var row = this._parent.get(rowIndex);\n        if (row) {\n            var selection = this._selection;\n            if (selection.contains(row)) {\n                if (1 < selection.size()) {\n                    var before = selection.store();\n                    selection.set(row);\n                    selection.focus();\n                    var after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n            }\n            else {\n                var before = selection.store();\n                selection.set(row);\n                selection.focus();\n                var after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    };\n    EEditorTreeSelection.prototype.clearAndAddAll = function (rowIndices) {\n        var selection = this._selection;\n        if (!selection.isEmpty() || 0 < rowIndices.length) {\n            var rows = [];\n            var parent_2 = this._parent;\n            for (var i = 0, imax = rowIndices.length; i < imax; ++i) {\n                var row = parent_2.get(rowIndices[i]);\n                if (row) {\n                    rows.push(row);\n                }\n            }\n            var before = selection.store();\n            selection.clearAndAddAll(rows);\n            selection.focus();\n            var after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    };\n    EEditorTreeSelection.prototype.shift = function (rowIndex, amount) {\n        // DO NOTHING\n    };\n    EEditorTreeSelection.prototype.size = function () {\n        return this._selection.size();\n    };\n    EEditorTreeSelection.prototype.isEmpty = function () {\n        return this._selection.isEmpty();\n    };\n    EEditorTreeSelection.prototype.each = function (iteratee) {\n        var selection = this._selection;\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                if (iteratee(index) === false) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    };\n    EEditorTreeSelection.prototype.toArray = function () {\n        var selection = this._selection;\n        var result = [];\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                result.push([index, row]);\n            }\n        });\n        return result;\n    };\n    EEditorTreeSelection.prototype.toSortedArray = function () {\n        return this.toArray().sort(COMPARATOR);\n    };\n    EEditorTreeSelection.prototype.toObject = function () {\n        var selection = this._selection;\n        var result = {};\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                result[index] = row;\n            }\n        });\n        return result;\n    };\n    EEditorTreeSelection.prototype.toMap = function () {\n        var selection = this._selection;\n        var result = new Map();\n        this._parent.each(function (row, index) {\n            if (selection.contains(row)) {\n                result.set(index, row);\n            }\n        });\n        return result;\n    };\n    return EEditorTreeSelection;\n}(utils.EventEmitter));\nexport { EEditorTreeSelection };\n//# sourceMappingURL=e-editor-tree-selection.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DLayoutHorizontal, DLayoutVertical, DTable, DTableDataTree, DText, EShapeCapabilities, EShapeCapability, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyId } from \"../command/e-command-shape-property-id\";\nimport { EEditorTreeSelection } from \"./e-editor-tree-selection\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nimport { toShapeLabel } from \"./to-shape-label\";\nvar EEditorTree = /** @class */ (function (_super) {\n    __extends(EEditorTree, _super);\n    function EEditorTree(options) {\n        var _this = _super.call(this, options) || this;\n        _this._icons = options.icons;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this._selection = options.selection;\n        _this._isInitialized = false;\n        _this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        return _this;\n    }\n    EEditorTree.prototype.show = function () {\n        _super.prototype.show.call(this);\n        this.onShow();\n        return this;\n    };\n    EEditorTree.prototype.onShow = function () {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onSelectionChange(EToolSelectSelectionUpdatedPart.NONE);\n    };\n    EEditorTree.prototype.initLayout = function () {\n        var _this = this;\n        this.addChild(this.layoutOrder);\n        this.addChild(this.table);\n        // Selection change event handling\n        this._selection.on(\"change\", function (parts) {\n            _this.onSelectionChange(parts);\n        });\n        // Layer change even handling\n        var onLayerChangeBound = function () {\n            _this.onLayerChange();\n        };\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas) {\n            this.state.isDisabled = false;\n            canvas.layer.on(\"change\", onLayerChangeBound);\n        }\n        else {\n            this.state.isDisabled = true;\n        }\n        diagram.on(\"set\", function (newCanvas) {\n            _this.state.isDisabled = false;\n            newCanvas.layer.on(\"change\", onLayerChangeBound);\n        });\n        diagram.on(\"ready\", function () {\n            _this.onLayerChange();\n        });\n        diagram.on(\"unset\", function (oldCanvas) {\n            _this.state.isDisabled = true;\n            _this.onLayerChange();\n            oldCanvas.layer.off(\"change\", onLayerChangeBound);\n        });\n        this.onLayerChange();\n    };\n    Object.defineProperty(EEditorTree.prototype, \"layoutOrder\", {\n        get: function () {\n            var _a;\n            return ((_a = this._layerOrder) !== null && _a !== void 0 ? _a : (this._layerOrder = this.newLayoutOrder()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newLayoutOrder = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonBringToFront,\n                this.buttonBringForward,\n                this.buttonSendBackward,\n                this.buttonSendToBack\n            ]\n        });\n    };\n    EEditorTree.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonBringToFront\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringToFront) !== null && _a !== void 0 ? _a : (this._buttonBringToFront = this.newButtonBringToFront()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonBringToFront = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_to_top\n            },\n            title: this.theme.getButtonBringToFrontTitle(),\n            on: {\n                active: function () {\n                    _this._selection.bringToFront();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonBringForward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonBringForward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            on: {\n                active: function () {\n                    _this._selection.bringForward();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonSendBackward\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonSendBackward = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            on: {\n                active: function () {\n                    _this._selection.sendBackward();\n                }\n            }\n        });\n    };\n    Object.defineProperty(EEditorTree.prototype, \"buttonSendToBack\", {\n        get: function () {\n            var _a;\n            return ((_a = this._buttonSendToBack) !== null && _a !== void 0 ? _a : (this._buttonSendToBack = this.newButtonSendToBack()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newButtonSendToBack = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_to_bottom\n            },\n            title: this.theme.getButtonSendToBackTitle(),\n            on: {\n                active: function () {\n                    _this._selection.sendToBack();\n                }\n            }\n        });\n    };\n    EEditorTree.prototype.onSelectionChange = function (parts) {\n        var _a;\n        if (this.isShown()) {\n            parts |= this._updatedParts;\n            this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n            if (parts & EToolSelectSelectionUpdatedPart.TREE) {\n                this.table.data.nodes = (_a = this._diagram.layer) === null || _a === void 0 ? void 0 : _a.children;\n            }\n            else if (parts & EToolSelectSelectionUpdatedPart.SELECTION) {\n                this.table.data.update();\n            }\n            else if (parts & EToolSelectSelectionUpdatedPart.PROPERTY_ID) {\n                this.table.data.update(true);\n            }\n            this.layoutOrder.state.isEnabled = EShapeCapabilities.contains(this._selection.last(), EShapeCapability.ORDER_IN_LAYER);\n        }\n        else {\n            this._updatedParts |= parts;\n        }\n    };\n    EEditorTree.prototype.onLayerChange = function () {\n        var _a;\n        this.table.data.nodes = (_a = this._diagram.layer) === null || _a === void 0 ? void 0 : _a.children;\n    };\n    Object.defineProperty(EEditorTree.prototype, \"table\", {\n        get: function () {\n            var _a;\n            return ((_a = this._table) !== null && _a !== void 0 ? _a : (this._table = this.newTable()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorTree.prototype.newTable = function () {\n        var _this = this;\n        return new DTable({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            columns: [\n                {\n                    type: \"TREE\",\n                    editable: true,\n                    getter: function (row) {\n                        return toShapeLabel(row);\n                    },\n                    setter: function (row, columnIndex, cell) {\n                        if (row.id !== cell) {\n                            DControllers.getCommandController().push(new ECommandShapePropertyId(_this._selection, cell, [row]));\n                        }\n                    }\n                }\n            ],\n            data: new DTableDataTree({\n                reverse: true,\n                toChildren: function (shape) {\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN)) {\n                        return shape.children;\n                    }\n                    return null;\n                },\n                selection: function (parent) {\n                    return new EEditorTreeSelection(parent, _this._selection);\n                }\n            }),\n            on: {\n                keydown: function (e) {\n                    if (UtilKeyboardEvent.isDeleteKey(e)) {\n                        _this._selection.delete();\n                        e.preventDefault();\n                    }\n                }\n            }\n        });\n    };\n    EEditorTree.prototype.getType = function () {\n        return \"EEditorTree\";\n    };\n    return EEditorTree;\n}(DLayoutVertical));\nexport { EEditorTree };\n//# sourceMappingURL=e-editor-tree.js.map","import { __extends } from \"tslib\";\nimport { DButtonAmbient, DControllers, DDialogMessage, DDialogProcessing, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, isArray } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nvar EEditorValidation = /** @class */ (function (_super) {\n    __extends(EEditorValidation, _super);\n    function EEditorValidation(options) {\n        var _this = _super.call(this, options) || this;\n        // Selection\n        var selection = options.selection;\n        _this._selection = selection;\n        // Icons\n        _this._icons = options.icons;\n        // Verifier\n        _this._validator = options.validator;\n        // Diagram\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.list.data.clear();\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        // Layout\n        _this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [_this.newTextLabel(), _this.buttonRevalidate]\n        }));\n        _this.addChild(_this.list);\n        return _this;\n    }\n    EEditorValidation.prototype.newTextLabel = function () {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"buttonRevalidate\", {\n        get: function () {\n            var result = this._buttonRevalidate;\n            if (result == null) {\n                result = this.newButtonRevalidate();\n                this._buttonRevalidate = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newButtonRevalidate = function () {\n        var _this = this;\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.refresh\n            },\n            title: this.theme.getButtonRevalidateTitle(),\n            on: {\n                active: function (emitter) {\n                    _this.onButtonValidateActive(emitter);\n                }\n            }\n        });\n    };\n    EEditorValidation.prototype.onButtonValidateActive = function (opener) {\n        var validator = this._validator;\n        if (validator != null) {\n            var canvas = this._diagram.canvas;\n            if (canvas != null) {\n                var dialogProcessing_1 = this.dialogProcessing;\n                dialogProcessing_1.open(opener);\n                var data_1 = this.list.data;\n                try {\n                    var result = validator(canvas);\n                    if (isArray(result)) {\n                        data_1.clearAndAddAll(result);\n                        dialogProcessing_1.resolve();\n                    }\n                    else {\n                        result.then(function (results) {\n                            data_1.clearAndAddAll(results);\n                            dialogProcessing_1.resolve();\n                        }, function () {\n                            data_1.clear();\n                            dialogProcessing_1.reject();\n                        });\n                    }\n                }\n                catch (_a) {\n                    data_1.clear();\n                    dialogProcessing_1.reject();\n                }\n            }\n        }\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"list\", {\n        get: function () {\n            var result = this._list;\n            if (result == null) {\n                result = this.newList();\n                this._list = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newList = function () {\n        var _this = this;\n        var result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: function (value) {\n                    return value.message;\n                }\n            },\n            updater: {\n                newItem: function (data) {\n                    return new DListItem(data, {\n                        on: {\n                            select: function (value, item) {\n                                _this.onListItemDown(value, item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    };\n    EEditorValidation.prototype.onListItemDown = function (value, item) {\n        var shape = value.shape;\n        if (shape != null) {\n            var canvas = this._diagram.canvas;\n            var layer = shape.root.parent;\n            if (canvas != null && layer != null) {\n                // Selection\n                var selection = this._selection;\n                var before = selection.store();\n                if (selection.set(shape)) {\n                    selection.focus();\n                    var after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n                // Change the active layer\n                var layerActive = canvas.layer.active;\n                if (layerActive !== layer) {\n                    canvas.layer.active = layer;\n                }\n            }\n            else {\n                this.dialogError.open(item);\n            }\n        }\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"dialogError\", {\n        get: function () {\n            var result = this._dialogError;\n            if (result == null) {\n                result = this.newDialogError();\n                this._dialogError = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newDialogError = function () {\n        return new DDialogMessage({\n            message: \"No shapes found.\"\n        });\n    };\n    Object.defineProperty(EEditorValidation.prototype, \"dialogProcessing\", {\n        get: function () {\n            var result = this._dialogProcessing;\n            if (result == null) {\n                result = this.newDialogProcessing();\n                this._dialogProcessing = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EEditorValidation.prototype.newDialogProcessing = function () {\n        return new DDialogProcessing({\n            footer: {\n                button: {\n                    ok: \"OK\",\n                    cancel: null\n                }\n            }\n        });\n    };\n    EEditorValidation.prototype.getType = function () {\n        return \"EEditorValidation\";\n    };\n    return EEditorValidation;\n}(DLayoutVertical));\nexport { EEditorValidation };\n//# sourceMappingURL=e-editor-validation.js.map","var EToolGroupImpl = /** @class */ (function () {\n    function EToolGroupImpl() {\n        this._isSuspended = false;\n        this._active = null;\n        this._activeParameter = null;\n    }\n    EToolGroupImpl.prototype.activate = function (target, parameter) {\n        var oldActive = this._active;\n        var oldActiveParameter = this._activeParameter;\n        if (oldActive !== target || oldActiveParameter !== parameter) {\n            this._activeParameter = parameter;\n            if (oldActive !== target) {\n                if (oldActive) {\n                    oldActive.deactivate();\n                }\n                this._active = target;\n                if (!this._isSuspended) {\n                    target.activate();\n                }\n            }\n        }\n    };\n    EToolGroupImpl.prototype.deactivate = function (target, parameter) {\n        if (this._active === target && this._activeParameter === parameter) {\n            this._active = null;\n            this._activeParameter = null;\n            target.deactivate();\n        }\n    };\n    EToolGroupImpl.prototype.suspend = function () {\n        if (!this._isSuspended) {\n            this._isSuspended = true;\n            var active = this._active;\n            if (active) {\n                active.deactivate();\n            }\n        }\n    };\n    EToolGroupImpl.prototype.resume = function () {\n        if (this._isSuspended) {\n            this._isSuspended = false;\n            var active = this._active;\n            if (active) {\n                active.activate();\n            }\n        }\n    };\n    EToolGroupImpl.prototype.isSuspended = function () {\n        return this._isSuspended;\n    };\n    return EToolGroupImpl;\n}());\nexport { EToolGroupImpl };\n//# sourceMappingURL=e-tool-group-impl.js.map","import { __extends } from \"tslib\";\nimport { utils } from \"pixi.js\";\nvar EToolImpl = /** @class */ (function (_super) {\n    __extends(EToolImpl, _super);\n    function EToolImpl() {\n        var _this = _super.call(this) || this;\n        _this._isActive = false;\n        return _this;\n    }\n    EToolImpl.prototype.activate = function () {\n        if (!this._isActive) {\n            this._isActive = true;\n            this.onActivate();\n        }\n    };\n    EToolImpl.prototype.deactivate = function () {\n        if (this._isActive) {\n            this._isActive = false;\n            this.onDeactivate();\n        }\n    };\n    EToolImpl.prototype.onActivate = function () {\n        // DO NOTHING\n    };\n    EToolImpl.prototype.onDeactivate = function () {\n        // DO NOTHING\n    };\n    EToolImpl.prototype.isActive = function () {\n        return this._isActive;\n    };\n    return EToolImpl;\n}(utils.EventEmitter));\nexport { EToolImpl };\n//# sourceMappingURL=e-tool-impl.js.map","import { __extends } from \"tslib\";\nimport { Graphics, Point } from \"pixi.js\";\nvar FILL_COLOR = 0x1e87f0;\nvar FILL_ALPHA = 0.5;\nvar EToolSelectArea = /** @class */ (function (_super) {\n    __extends(EToolSelectArea, _super);\n    function EToolSelectArea() {\n        var _this = _super.call(this) || this;\n        _this._size = new Point();\n        return _this;\n    }\n    Object.defineProperty(EToolSelectArea.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolSelectArea.prototype.update = function () {\n        this.clear();\n        var size = this._size;\n        var x = Math.min(0, size.x);\n        var y = Math.min(0, size.y);\n        var width = Math.abs(size.x);\n        var height = Math.abs(size.y);\n        this.beginFill(FILL_COLOR, FILL_ALPHA);\n        this.drawRect(x, y, width, height);\n        this.endFill();\n    };\n    return EToolSelectArea;\n}(Graphics));\nexport { EToolSelectArea };\n//# sourceMappingURL=e-tool-select-area.js.map","import { __extends } from \"tslib\";\nimport { Container } from \"pixi.js\";\nvar EToolSelectModifierContainer = /** @class */ (function (_super) {\n    __extends(EToolSelectModifierContainer, _super);\n    function EToolSelectModifierContainer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EToolSelectModifierContainer;\n}(Container));\nexport { EToolSelectModifierContainer };\n//# sourceMappingURL=e-tool-select-modifier-container.js.map","import { __extends } from \"tslib\";\nimport { ESnapperModifierAnchor } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nvar EToolSelectModifierHitArea = /** @class */ (function (_super) {\n    __extends(EToolSelectModifierHitArea, _super);\n    function EToolSelectModifierHitArea(modifier) {\n        var _this = _super.call(this) || this;\n        _this._modifier = modifier;\n        return _this;\n    }\n    EToolSelectModifierHitArea.prototype.contains = function (x, y) {\n        var modifier = this._modifier;\n        var s = modifier.getAnchorSize() * 2;\n        var t = s * 0.5;\n        var w = modifier.width;\n        var h = modifier.height;\n        var p = w * 0.5;\n        var q = h * 0.5;\n        var d = modifier.getAnchorRotationDistance();\n        var r = modifier.getAnchorRotationSize() * 2;\n        // Top left\n        if (0 - t <= x && 0 - t <= y && x <= 0 - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_LEFT);\n            return true;\n        }\n        // Top right\n        if (w - t <= x && 0 - t <= y && x <= w - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_RIGHT);\n            return true;\n        }\n        // Bottom left\n        if (0 - t <= x && h - t <= y && x <= 0 - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_LEFT);\n            return true;\n        }\n        // Bottom right\n        if (w - t <= x && h - t <= y && x <= w - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_RIGHT);\n            return true;\n        }\n        // Top Center\n        if (p - t <= x && 0 - t <= y && x <= p - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_CENTER);\n            return true;\n        }\n        // Middle Right\n        if (w - t <= x && q - t <= y && x <= w - t + s && y <= q - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.MIDDLE_RIGHT);\n            return true;\n        }\n        // Bottom Center\n        if (p - t <= x && h - t <= y && x <= p - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_CENTER);\n            return true;\n        }\n        // Middle Left\n        if (0 - t <= x && q - t <= y && x <= 0 - t + s && y <= q - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.MIDDLE_LEFT);\n            return true;\n        }\n        // Rotate\n        if (p - r <= x && d - r <= y && x <= p + r && y <= d + r) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.ROTATION);\n            return true;\n        }\n        return false;\n    };\n    return EToolSelectModifierHitArea;\n}(Rectangle));\nexport { EToolSelectModifierHitArea };\n//# sourceMappingURL=e-tool-select-modifier-hit-area.js.map","import { __extends } from \"tslib\";\nimport { EShapeCircle, EShapeContainer, EShapeLockPart, EShapeRectangle, ESnapperModifierAnchor } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectModifierHitArea } from \"./e-tool-select-modifier-hit-area\";\nvar EToolSelectModifier = /** @class */ (function (_super) {\n    __extends(EToolSelectModifier, _super);\n    function EToolSelectModifier(options) {\n        var _this = _super.call(this) || this;\n        _this.selected = false;\n        _this.index = 0;\n        _this._width = 0;\n        _this._height = 0;\n        _this._scaleBound = 1;\n        _this._scaleBoundInverse = 1;\n        _this._isAllowed = true;\n        _this._lastHitAnchor = ESnapperModifierAnchor.NONE;\n        if (options == null || options.editable !== false) {\n            _this.cursor = \"grab\";\n            _this.interactive = true;\n            _this.hitArea = new EToolSelectModifierHitArea(_this);\n        }\n        else {\n            _this.interactive = false;\n        }\n        _this.group = false;\n        _this._anchorBase = new EShapeRectangle().attach(_this);\n        _this._anchorsScale = [\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this),\n            new EShapeRectangle().attach(_this)\n        ];\n        _this._anchorRotate = new EShapeCircle().attach(_this);\n        return _this;\n    }\n    EToolSelectModifier.prototype.onPrerender = function () {\n        var scale0 = this.getParentScale();\n        var scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            this.update();\n        }\n    };\n    EToolSelectModifier.prototype.render = function (renderer) {\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n            return;\n        }\n        this.onPrerender();\n        _super.prototype.render.call(this, renderer);\n    };\n    EToolSelectModifier.prototype.getParentScale = function () {\n        var parent = this.parent;\n        if (parent != null) {\n            var parentParent = parent.parent;\n            if (parentParent != null) {\n                return parentParent.scale.y;\n            }\n        }\n        return 1;\n    };\n    Object.defineProperty(EToolSelectModifier.prototype, \"factor\", {\n        get: function () {\n            return this._scaleBoundInverse;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolSelectModifier.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (width) {\n            this._width = width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolSelectModifier.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (height) {\n            this._height = height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolSelectModifier.prototype.getLastHitAnchor = function () {\n        return this._lastHitAnchor;\n    };\n    EToolSelectModifier.prototype.setLastHitAnchor = function (anchor) {\n        var result = this._lastHitAnchor;\n        this._lastHitAnchor = anchor;\n        return result;\n    };\n    EToolSelectModifier.prototype.getAnchorSize = function () {\n        return 7 * this._scaleBoundInverse;\n    };\n    EToolSelectModifier.prototype.getAnchorRotationDistance = function () {\n        return (0 <= this._height ? -18 : +18) * this._scaleBoundInverse;\n    };\n    EToolSelectModifier.prototype.getAnchorRotationSize = function () {\n        return 5 * this._scaleBoundInverse;\n    };\n    EToolSelectModifier.prototype.update = function () {\n        var color = this.group ? 0x1ef087 : 0x1e87f0;\n        var width = this._width;\n        var height = this._height;\n        var scaleInverse = this._scaleBoundInverse;\n        var s = this.getAnchorSize();\n        var w = width;\n        var h = height;\n        var p = w * 0.5;\n        var q = h * 0.5;\n        var d = this.getAnchorRotationDistance();\n        var r = 2 * this.getAnchorRotationSize();\n        var l = 2 * scaleInverse;\n        var o = 1.5 * l;\n        // Anchor base\n        var anchorBase = this._anchorBase;\n        anchorBase.lock(EShapeLockPart.UPLOADED);\n        anchorBase.fill.enable = false;\n        anchorBase.stroke.set(true, color, 0.333, l, 2);\n        anchorBase.transform.position.set(width * 0.5, height * 0.5);\n        anchorBase.size.set(width, height);\n        anchorBase.unlock(EShapeLockPart.UPLOADED, true);\n        // Anchor for rotation\n        var anchorRotate = this._anchorRotate;\n        anchorRotate.lock(EShapeLockPart.UPLOADED);\n        anchorRotate.stroke.enable = false;\n        anchorRotate.fill.set(true, color, 1.0);\n        anchorRotate.size.set(r, r);\n        anchorRotate.transform.position.set(p, d);\n        anchorRotate.unlock(EShapeLockPart.UPLOADED, true);\n        // Anchor for scaling\n        var anchorsScale = this._anchorsScale;\n        for (var i = 0, imax = anchorsScale.length; i < imax; ++i) {\n            var anchorScale = anchorsScale[i];\n            anchorScale.lock(EShapeLockPart.UPLOADED);\n            anchorScale.stroke.enable = false;\n            anchorScale.fill.set(true, color, 1.0);\n            anchorScale.size.set(s, s);\n        }\n        anchorsScale[0].transform.position.set(-o, -o);\n        anchorsScale[1].transform.position.set(+o + w, -o);\n        anchorsScale[2].transform.position.set(-o, +o + h);\n        anchorsScale[3].transform.position.set(+o + w, +o + h);\n        anchorsScale[4].transform.position.set(p, -o);\n        anchorsScale[5].transform.position.set(+o + w, q);\n        anchorsScale[6].transform.position.set(p, +o + h);\n        anchorsScale[7].transform.position.set(-o, q);\n        for (var i = 0, imax = anchorsScale.length; i < imax; ++i) {\n            anchorsScale[i].unlock(EShapeLockPart.UPLOADED, true);\n        }\n    };\n    EToolSelectModifier.prototype.allow = function () {\n        this._isAllowed = true;\n    };\n    EToolSelectModifier.prototype.isAllowed = function () {\n        return this._isAllowed;\n    };\n    EToolSelectModifier.prototype.disallow = function () {\n        this._isAllowed = false;\n    };\n    EToolSelectModifier.prototype.destroy = function () {\n        var parent = this.parent;\n        if (parent) {\n            parent.removeChild(this);\n        }\n    };\n    return EToolSelectModifier;\n}(EShapeContainer));\nexport { EToolSelectModifier };\n//# sourceMappingURL=e-tool-select-modifier.js.map","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { __extends } from \"tslib\";\nimport { EShapeEditor } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { UtilShapeTransforms } from \"./util-shape-transforms\";\nvar UtilShapeConnectorTransformData = /** @class */ (function (_super) {\n    __extends(UtilShapeConnectorTransformData, _super);\n    function UtilShapeConnectorTransformData() {\n        var _this = _super.call(this) || this;\n        _this.tailVector = new Point();\n        _this.headVector = new Point();\n        return _this;\n    }\n    return UtilShapeConnectorTransformData;\n}(EShapeEditor));\nexport { UtilShapeConnectorTransformData };\nvar UtilShapeConnectorTransforms = /** @class */ (function () {\n    function UtilShapeConnectorTransforms() {\n    }\n    UtilShapeConnectorTransforms.prepare = function (connector) {\n        var editor = null;\n        if (connector.editor instanceof UtilShapeConnectorTransformData) {\n            editor = connector.editor;\n        }\n        else {\n            editor = new UtilShapeConnectorTransformData();\n            connector.editor = editor;\n        }\n        // Edges\n        var tailVector = editor.tailVector;\n        var headVector = editor.headVector;\n        var edge = connector.edge;\n        edge.tail.local.copyTo(tailVector);\n        edge.head.local.copyTo(headVector);\n        var localTransform = connector.transform.localTransform;\n        localTransform.applyInverse(tailVector, tailVector);\n        localTransform.applyInverse(headVector, headVector);\n        // Other preparations\n        UtilShapeTransforms.prepare(connector);\n    };\n    UtilShapeConnectorTransforms.finalize = function (connector) {\n        UtilShapeTransforms.finalize(connector);\n    };\n    UtilShapeConnectorTransforms.apply = function (connector, transform) {\n        var editor = connector.editor;\n        if (editor instanceof UtilShapeConnectorTransformData) {\n            var localTransform = editor.localTransform;\n            editor.internalTransformParentInverse\n                .copyTo(localTransform)\n                .append(transform)\n                .append(editor.internalTransform);\n            var a = localTransform.a;\n            var b = localTransform.b;\n            var c = localTransform.c;\n            var d = localTransform.d;\n            var tx = localTransform.tx;\n            var ty = localTransform.ty;\n            var edge = connector.edge;\n            var tail = edge.tail;\n            var head = edge.head;\n            var editorTailVector = editor.tailVector;\n            var editorTailVectorX = editorTailVector.x;\n            var editorTailVectorY = editorTailVector.y;\n            var newTailLocalX = a * editorTailVectorX + c * editorTailVectorY + tx;\n            var newTailLocalY = b * editorTailVectorX + d * editorTailVectorY + ty;\n            var editorHeadVector = editor.headVector;\n            var editorHeadVectorX = editorHeadVector.x;\n            var editorHeadVectorY = editorHeadVector.y;\n            var newHeadLocalX = a * editorHeadVectorX + c * editorHeadVectorY + tx;\n            var newHeadLocalY = b * editorHeadVectorX + d * editorHeadVectorY + ty;\n            edge.lock();\n            tail.local.set(newTailLocalX, newTailLocalY);\n            head.local.set(newHeadLocalX, newHeadLocalY);\n            edge.unlock();\n        }\n    };\n    return UtilShapeConnectorTransforms;\n}());\nexport { UtilShapeConnectorTransforms };\n//# sourceMappingURL=util-shape-connector-transforms.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyStrokeStyle } from \"./e-command-shape-property-stroke-style\";\nvar ECommandShapePropertyLineStyle = /** @class */ (function (_super) {\n    __extends(ECommandShapePropertyLineStyle, _super);\n    function ECommandShapePropertyLineStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ECommandShapePropertyLineStyle.prototype.toCapability = function (shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE)) {\n            return EShapeCapability.LINE;\n        }\n        return EShapeCapability.NONE;\n    };\n    return ECommandShapePropertyLineStyle;\n}(ECommandShapePropertyStrokeStyle));\nexport { ECommandShapePropertyLineStyle };\n//# sourceMappingURL=e-command-shape-property-line-style.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, DDiagramEditor, DDiagramLayer, DDiagrams, DDiagramSerializedVersion, EShapeBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeGroup, EShapeResourceManagerDeserialization, EShapeResourceManagerSerialization, ESnapperModifierAnchor, isNumber, deserializeAll, EShapeResourceManagerDeserializationMode, DBase } from \"@wcardinal/wcardinal-ui\";\nimport { Matrix, Point, Rectangle, utils } from \"pixi.js\";\nimport { ECommandComposition } from \"../command/e-command-composition\";\nimport { ECommandShapeActionValueAdd } from \"../command/e-command-shape-action-value-add\";\nimport { ECommandShapeActionValueBringForward } from \"../command/e-command-shape-action-value-bring-forward\";\nimport { ECommandShapeActionValueRemove } from \"../command/e-command-shape-action-value-remove\";\nimport { ECommandShapeActionValueReplace } from \"../command/e-command-shape-action-value-replace\";\nimport { ECommandShapeActionValueSendBackward } from \"../command/e-command-shape-action-value-send-backward\";\nimport { ECommandShapeTreeBringForward } from \"../command/e-command-shape-tree-bring-forward\";\nimport { ECommandShapeTreeBringToFront } from \"../command/e-command-shape-tree-bring-to-front\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { ECommandShapeDelete } from \"../command/e-command-shape-delete\";\nimport { ECommandShapePropertyAll } from \"../command/e-command-shape-property-all\";\nimport { ECommandShapePropertyCornerOff } from \"../command/e-command-shape-property-corner-off\";\nimport { ECommandShapePropertyCursor } from \"../command/e-command-shape-property-cursor\";\nimport { ECommandShapePropertyLineHeadMargin } from \"../command/e-command-shape-property-line-head-margin\";\nimport { ECommandShapePropertyLineTailMargin } from \"../command/e-command-shape-property-line-tail-margin\";\nimport { ECommandShapePropertyFillColor } from \"../command/e-command-shape-property-fill-color\";\nimport { ECommandShapePropertyFillEnable } from \"../command/e-command-shape-property-fill-enable\";\nimport { ECommandShapePropertyFocusable } from \"../command/e-command-shape-property-focusable\";\nimport { ECommandShapePropertyId } from \"../command/e-command-shape-property-id\";\nimport { ECommandShapePropertyImage } from \"../command/e-command-shape-property-image\";\nimport { ECommandShapePropertyImageFitTo } from \"../command/e-command-shape-property-image-fit-to\";\nimport { ECommandShapePropertyInteractive } from \"../command/e-command-shape-property-interactive\";\nimport { ECommandShapePropertyLineHeadColor } from \"../command/e-command-shape-property-line-head-color\";\nimport { ECommandShapePropertyLineHeadSizeX } from \"../command/e-command-shape-property-line-head-size-x\";\nimport { ECommandShapePropertyLineHeadSizeY } from \"../command/e-command-shape-property-line-head-size-y\";\nimport { ECommandShapePropertyLineHeadType } from \"../command/e-command-shape-property-line-head-type\";\nimport { ECommandShapePropertyLineTailColor } from \"../command/e-command-shape-property-line-tail-color\";\nimport { ECommandShapePropertyLineTailSizeX } from \"../command/e-command-shape-property-line-tail-size-x\";\nimport { ECommandShapePropertyLineTailSizeY } from \"../command/e-command-shape-property-line-tail-size-y\";\nimport { ECommandShapePropertyLineTailType } from \"../command/e-command-shape-property-line-tail-type\";\nimport { ECommandShapePropertyPointsStyle } from \"../command/e-command-shape-property-points-style\";\nimport { ECommandShapePropertyPosition } from \"../command/e-command-shape-property-position\";\nimport { ECommandShapePropertyPositionAndRotate } from \"../command/e-command-shape-property-position-and-rotation\";\nimport { ECommandShapePropertyPositionX } from \"../command/e-command-shape-property-position-x\";\nimport { ECommandShapePropertyPositionY } from \"../command/e-command-shape-property-position-y\";\nimport { ECommandShapePropertyRadius } from \"../command/e-command-shape-property-radius\";\nimport { ECommandShapePropertyRotation } from \"../command/e-command-shape-property-rotation\";\nimport { ECommandShapePropertyShortcut } from \"../command/e-command-shape-property-shortcut\";\nimport { ECommandShapePropertySizeX } from \"../command/e-command-shape-property-size-x\";\nimport { ECommandShapePropertySizeY } from \"../command/e-command-shape-property-size-y\";\nimport { ECommandShapePropertySkew } from \"../command/e-command-shape-property-skew\";\nimport { ECommandShapePropertyStrokeAlign } from \"../command/e-command-shape-property-stroke-align\";\nimport { ECommandShapePropertyStrokeColor } from \"../command/e-command-shape-property-stroke-color\";\nimport { ECommandShapePropertyStrokeEnable } from \"../command/e-command-shape-property-stroke-enable\";\nimport { ECommandShapePropertyStrokeSideOff } from \"../command/e-command-shape-property-stroke-side-off\";\nimport { ECommandShapePropertyStrokeStyle } from \"../command/e-command-shape-property-stroke-style\";\nimport { ECommandShapePropertyStrokeWidth } from \"../command/e-command-shape-property-stroke-width\";\nimport { ECommandShapePropertyTextAlignHorizontal } from \"../command/e-command-shape-property-text-align-horizontal\";\nimport { ECommandShapePropertyTextAlignVertical } from \"../command/e-command-shape-property-text-align-vertical\";\nimport { ECommandShapePropertyTextClipping } from \"../command/e-command-shape-property-text-clipping\";\nimport { ECommandShapePropertyTextColor } from \"../command/e-command-shape-property-text-color\";\nimport { ECommandShapePropertyTextDirection } from \"../command/e-command-shape-property-text-direction\";\nimport { ECommandShapePropertyTextFamily } from \"../command/e-command-shape-property-text-family\";\nimport { ECommandShapePropertyTextOffsetHorizontal } from \"../command/e-command-shape-property-text-offset-horizontal\";\nimport { ECommandShapePropertyTextOffsetVertical } from \"../command/e-command-shape-property-text-offset-vertical\";\nimport { ECommandShapePropertyTextOutlineColor } from \"../command/e-command-shape-property-text-outline-color\";\nimport { ECommandShapePropertyTextOutlineEnable } from \"../command/e-command-shape-property-text-outline-enable\";\nimport { ECommandShapePropertyTextOutlineWidth } from \"../command/e-command-shape-property-text-outline-width\";\nimport { ECommandShapePropertyTextPaddingHorizontal } from \"../command/e-command-shape-property-text-padding-horizontal\";\nimport { ECommandShapePropertyTextPaddingVertical } from \"../command/e-command-shape-property-text-padding-vertical\";\nimport { ECommandShapePropertyTextSize } from \"../command/e-command-shape-property-text-size\";\nimport { ECommandShapePropertyTextSpacingHorizontal } from \"../command/e-command-shape-property-text-spacing-horizontal\";\nimport { ECommandShapePropertyTextSpacingVertical } from \"../command/e-command-shape-property-text-spacing-vertical\";\nimport { ECommandShapePropertyTextStyle } from \"../command/e-command-shape-property-text-style\";\nimport { ECommandShapePropertyTextValue } from \"../command/e-command-shape-property-text-value\";\nimport { ECommandShapePropertyTextWeight } from \"../command/e-command-shape-property-text-weight\";\nimport { ECommandShapePropertyTitle } from \"../command/e-command-shape-property-title\";\nimport { ECommandShapeReplace } from \"../command/e-command-shape-replace\";\nimport { ECommandShapeTreeSendBackward } from \"../command/e-command-shape-tree-send-backward\";\nimport { ECommandShapeTreeSendToBack } from \"../command/e-command-shape-tree-send-to-back\";\nimport { ECommandShapeDataValueAdd } from \"../command/e-command-shape-data-value-add\";\nimport { ECommandShapeDataValueBringForward } from \"../command/e-command-shape-data-value-bring-forward\";\nimport { ECommandShapeDataValueRemove } from \"../command/e-command-shape-data-value-remove\";\nimport { ECommandShapeDataValueReplace } from \"../command/e-command-shape-data-value-replace\";\nimport { ECommandShapeDataValueSendBackward } from \"../command/e-command-shape-data-value-send-backward\";\nimport { EToolSelectModifier } from \"./e-tool-select-modifier\";\nimport { EToolSelectModifierContainer } from \"./e-tool-select-modifier-container\";\nimport { EToolSelectSelectionUpdatedPart } from \"./e-tool-select-selection-updated-part\";\nimport { ECommandShapeDataMappingValueAdd } from \"../command/e-command-shape-data-mapping-value-add\";\nimport { ECommandShapeDataMappingValueReplace } from \"../command/e-command-shape-data-mapping-value-replace\";\nimport { ECommandShapeDataMappingValueRemove } from \"../command/e-command-shape-data-mapping-value-remove\";\nimport { ECommandShapeDataMappingValueBringForward } from \"../command/e-command-shape-data-mapping-value-bring-forward\";\nimport { ECommandShapeDataMappingValueSendBackward } from \"../command/e-command-shape-data-mapping-value-send-backward\";\nimport { ECommandShapePropertyCapabilityLock } from \"../command/e-command-shape-property-capability-lock\";\nimport { ECommandShapePropertyCapabilityUnlock } from \"../command/e-command-shape-property-capability-unlock\";\nimport { ECommandShapePropertyPositionTop } from \"../command/e-command-shape-property-position-top\";\nimport { ECommandShapePropertyPositionLeft } from \"../command/e-command-shape-property-position-left\";\nimport { ECommandShapePropertyImageClear } from \"../command/e-command-shape-property-image-clear\";\nimport { ECommandShapePropertyCornerOn } from \"../command/e-command-shape-property-corner-on\";\nimport { ECommandShapePropertyStrokeSideOn } from \"../command/e-command-shape-property-stroke-side-on\";\nimport { ECommandShapeGroup } from \"../command/e-command-shape-group\";\nimport { ECommandShapeUngroup } from \"../command/e-command-shape-ungroup\";\nimport { ECommandShapePropertyTextSizeDelta } from \"../command/e-command-shape-property-text-size-delta\";\nimport { ECommandShapePropertyTextFitting } from \"../command/e-command-shape-property-text-fitting\";\nimport { UtilShapeTransforms } from \"../util/util-shape-transforms\";\nimport { UtilShapeConnectorTransforms } from \"../util/util-shape-connector-transforms\";\nimport { ECommandShapePropertyLineStyle } from \"../command/e-command-shape-property-line-style\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nvar initLeft = function (rect) {\n    return rect.x;\n};\nvar initCenter = function (rect) {\n    return rect.x + rect.width * 0.5;\n};\nvar initRight = function (rect) {\n    return rect.x + rect.width;\n};\nvar initTop = function (rect) {\n    return rect.y;\n};\nvar initMiddle = function (rect) {\n    return rect.y + rect.height * 0.5;\n};\nvar initBottom = function (rect) {\n    return rect.y + rect.height;\n};\nvar initWidth = function (rect) {\n    return rect.width;\n};\nvar initHeight = function (rect) {\n    return rect.height;\n};\nvar initZero = function (rect) {\n    return 0;\n};\nvar updateMin = function (valueA, valueB) {\n    return Math.min(valueA, valueB);\n};\nvar updateMax = function (valueA, valueB) {\n    return Math.max(valueA, valueB);\n};\nvar updateSum = function (valueA, valueB) {\n    return valueA + valueB;\n};\nvar finishupIdentity = function (value, size) {\n    return value;\n};\nvar finishupAverage = function (value, size) {\n    return value / size;\n};\nvar assingX = function (value, point) {\n    point.x = value;\n};\nvar assingY = function (value, point) {\n    point.y = value;\n};\nvar applyLeft = function (point, diff, scale, shape) {\n    shape.transform.position.x = point.x + diff / scale.x;\n};\nvar applyCenter = function (point, diff, scale, shape) {\n    shape.transform.position.x = point.x;\n};\nvar applyRight = function (point, diff, scale, shape) {\n    shape.transform.position.x = point.x - diff / scale.x;\n};\nvar applyTop = function (point, diff, scale, shape) {\n    shape.transform.position.y = point.y + diff / scale.y;\n};\nvar applyMiddle = function (point, diff, scale, shape) {\n    shape.transform.position.y = point.y;\n};\nvar applyBottom = function (point, diff, scale, shape) {\n    shape.transform.position.y = point.y - diff / scale.y;\n};\nvar EToolSelectSelection = /** @class */ (function (_super) {\n    __extends(EToolSelectSelection, _super);\n    function EToolSelectSelection(options) {\n        var _this = _super.call(this) || this;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        var modifier = new EToolSelectModifier(options.modifier);\n        _this._modifier = modifier;\n        var modifierContainer = new EToolSelectModifierContainer();\n        modifierContainer.addChild(modifier);\n        diagram.on(\"unset\", function (canvas) {\n            if (modifierContainer.parent === canvas) {\n                // Because after this event, a canvas is destroyed.\n                // At that time, all its children also be destroyed.\n                // The modifier container therefore should be removed.\n                canvas.removeChild(modifierContainer);\n            }\n        });\n        _this._modifierContainer = modifierContainer;\n        _this._originGlobal = new Point();\n        _this._originLocal = new Point();\n        _this._rotationAxisGlobal = new Point();\n        _this._scale = new Point();\n        _this._scaleAxis0 = new Point();\n        _this._scaleAxis1 = new Point();\n        _this._scaleDet = 1;\n        _this._scaleDetInverse = 1;\n        _this._scaleTransform = new Matrix();\n        _this._scaleTransformInverse = new Matrix();\n        _this._scaleAnchor = ESnapperModifierAnchor.NONE;\n        _this._shapes = [];\n        _this._shapeBound = new Rectangle();\n        _this._shapeBoundRect = new Rectangle();\n        _this._alignPoint = new Point();\n        _this._alignRectangle = new Rectangle();\n        _this._shiftPoint1 = new Point();\n        _this._shiftPoint2 = new Point();\n        _this._transform = new Matrix();\n        _this._translateDelta = new Point();\n        _this._isUpdated = false;\n        _this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        _this._lockCount = 0;\n        return _this;\n    }\n    EToolSelectSelection.prototype.lock = function () {\n        this._lockCount += 1;\n        if (this._lockCount === 1) {\n            this._isUpdated = false;\n            this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        }\n    };\n    EToolSelectSelection.prototype.unlock = function () {\n        this._lockCount -= 1;\n        if (this._lockCount === 0) {\n            if (this._isUpdated) {\n                this.update(this._updatedParts);\n            }\n        }\n    };\n    EToolSelectSelection.prototype.update = function (parts) {\n        var parsed = EToolSelectSelectionUpdatedPart.ALL;\n        if (parts != null) {\n            if (isNumber(parts)) {\n                parsed = parts;\n            }\n            else {\n                // eslint-disable-next-line prefer-rest-params\n                parsed = this.toParts(arguments);\n            }\n        }\n        if (this._lockCount <= 0) {\n            this.updateModifier();\n            this.emit(\"change\", parsed, this);\n        }\n        else {\n            this._isUpdated = true;\n            this._updatedParts |= parsed;\n        }\n    };\n    EToolSelectSelection.prototype.toParts = function (parts) {\n        if (isNumber(parts)) {\n            return parts;\n        }\n        var result = EToolSelectSelectionUpdatedPart.NONE;\n        for (var i = 0, imax = parts.length; i < imax; ++i) {\n            result |= EToolSelectSelectionUpdatedPart[parts[i]];\n        }\n        return result;\n    };\n    EToolSelectSelection.prototype.updateModifier = function () {\n        var diagram = this._diagram;\n        var modifier = this._modifier;\n        if (modifier.isAllowed()) {\n            var shapes = this._shapes;\n            var canvas = diagram.canvas;\n            var modifierContainer = this._modifierContainer;\n            if (canvas == null || shapes.length <= 0) {\n                modifier.visible = false;\n                DApplications.update(diagram);\n            }\n            else if (shapes.length <= 1) {\n                var shape = shapes[0];\n                if (shape.parent instanceof EShapeBase) {\n                    shape.updateTransform();\n                    var internalTransform = shape.transform.internalTransform;\n                    var a = internalTransform.a;\n                    var b = internalTransform.b;\n                    var c = internalTransform.c;\n                    var d = internalTransform.d;\n                    var pivot = shape.transform.pivot;\n                    var modifierPosition = modifier.position;\n                    modifierPosition.set(a * pivot.x + c * pivot.y + internalTransform.tx, b * pivot.x + d * pivot.y + internalTransform.ty);\n                    var layer = shape.root.parent;\n                    if (layer) {\n                        modifierContainer.transform.position.copyFrom(layer.transform.position);\n                    }\n                    else {\n                        modifierContainer.transform.position.set(0, 0);\n                    }\n                    var width = shape.size.x * Math.sqrt(a * a + b * b);\n                    var height = shape.size.y * Math.sqrt(c * c + d * d);\n                    modifier.width = width;\n                    modifier.height = height;\n                    modifier.pivot.set(width * 0.5, height * 0.5);\n                    var rx = Math.atan2(-c, d);\n                    var ry = Math.atan2(+b, a);\n                    var skew = (ry - rx) * 0.5;\n                    var rotation = (rx + ry) * 0.5;\n                    modifier.rotation = rotation;\n                    modifier.skew.set(skew, skew);\n                }\n                else {\n                    shape.updateTransform();\n                    var internalTransform = shape.transform.internalTransform;\n                    var a = internalTransform.a;\n                    var b = internalTransform.b;\n                    var c = internalTransform.c;\n                    var d = internalTransform.d;\n                    var pivot = shape.transform.pivot;\n                    var modifierPosition = modifier.position;\n                    modifierPosition.set(a * pivot.x + c * pivot.y + internalTransform.tx, b * pivot.x + d * pivot.y + internalTransform.ty);\n                    var layer = shape.root.parent;\n                    if (layer) {\n                        modifierContainer.transform.position.copyFrom(layer.transform.position);\n                    }\n                    else {\n                        modifierContainer.transform.position.set(0, 0);\n                    }\n                    modifier.width = shape.size.x;\n                    modifier.height = shape.size.y;\n                    modifier.pivot.set(shape.size.x * 0.5, shape.size.y * 0.5);\n                    modifier.rotation = shape.transform.rotation;\n                    modifier.skew.copyFrom(shape.transform.skew);\n                }\n                modifier.visible = true;\n                modifier.group =\n                    EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n                        0 < shape.children.length;\n                if (modifierContainer.parent !== canvas) {\n                    canvas.addChild(modifierContainer);\n                }\n                modifier.update();\n                DApplications.update(diagram);\n            }\n            else {\n                var bound = this._shapeBound;\n                var tempRect = this._shapeBoundRect;\n                shapes[0].getBoundsInternal(false, bound);\n                for (var i = 1, imax = shapes.length; i < imax; ++i) {\n                    var shape = shapes[i];\n                    shape.getBoundsInternal(false, tempRect);\n                    bound.enlarge(tempRect);\n                }\n                var layer = shapes[0].root.parent;\n                if (layer) {\n                    modifierContainer.transform.position.copyFrom(layer.transform.position);\n                }\n                else {\n                    modifierContainer.transform.position.set(0, 0);\n                }\n                modifier.position.set(bound.x, bound.y);\n                modifier.width = bound.width;\n                modifier.height = bound.height;\n                modifier.rotation = 0;\n                modifier.pivot.set(0, 0);\n                modifier.skew.set(0, 0);\n                modifier.visible = true;\n                modifier.group = false;\n                if (modifierContainer.parent !== canvas) {\n                    canvas.addChild(modifierContainer);\n                }\n                modifier.update();\n                DApplications.update(diagram);\n            }\n        }\n        else {\n            modifier.visible = false;\n            DApplications.update(diagram);\n        }\n    };\n    EToolSelectSelection.prototype.toggle = function (shape) {\n        var shapes = this._shapes;\n        if (shapes.length <= 0) {\n            var root = shape.root;\n            root.selected = true;\n            shapes.push(root);\n        }\n        else {\n            var first = shapes[0];\n            if (UtilShapeSearch.isParent(shape, first)) {\n                first.selected = false;\n                if (EShapeCapabilities.contains(first, EShapeCapability.CHILDREN)) {\n                    var shapeOfParent = UtilShapeSearch.toOfParent(shape, first);\n                    shapeOfParent.selected = true;\n                    shapes[0] = shapeOfParent;\n                }\n                else {\n                    shapes.splice(0, 1);\n                }\n            }\n            else if (first.parent === shape.parent) {\n                if (!shape.selected) {\n                    shape.selected = true;\n                    shapes.push(shape);\n                }\n                else {\n                    shape.selected = false;\n                    shapes.splice(shapes.indexOf(shape), 1);\n                }\n            }\n            else {\n                var sharedParent = UtilShapeSearch.toSharedParent(first, shape);\n                if (first.parent === sharedParent) {\n                    var shapeOfParent = UtilShapeSearch.toOfParent(shape, sharedParent);\n                    if (shapeOfParent.selected) {\n                        shapeOfParent.selected = false;\n                        shapes.splice(shapes.indexOf(shapeOfParent), 1);\n                    }\n                    else {\n                        shapeOfParent.selected = true;\n                        shapes.push(shapeOfParent);\n                    }\n                }\n                else {\n                    var newLength = 0;\n                    for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                        var oldShape = shapes[i];\n                        oldShape.selected = false;\n                        var newShape = UtilShapeSearch.toOfParent(oldShape, sharedParent);\n                        if (!newShape.selected) {\n                            newShape.selected = true;\n                            shapes[newLength] = newShape;\n                            newLength += 1;\n                        }\n                    }\n                    shapes.length = newLength;\n                    var shapeOfParent = UtilShapeSearch.toOfParent(shape, sharedParent);\n                    if (!shapeOfParent.selected) {\n                        shapeOfParent.selected = true;\n                        shapes.push(shapeOfParent);\n                    }\n                }\n            }\n        }\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n    };\n    /**\n     * Please note that the specified targets must be root shapes.\n     *\n     * @param targets root shapes to be added\n     */\n    EToolSelectSelection.prototype.addAll = function (targets) {\n        var shapes = this._shapes;\n        var isChanged = false;\n        // Convert to root shapes\n        if (0 < shapes.length) {\n            var first = shapes[0];\n            if (first.root !== first) {\n                var oldShapes = shapes.slice(0);\n                shapes.length = 0;\n                for (var i = 0, imax = oldShapes.length; i < imax; ++i) {\n                    var oldShape = oldShapes[i];\n                    oldShape.selected = false;\n                    var oldShapeRoot = oldShape.root;\n                    if (!oldShapeRoot.selected) {\n                        oldShapeRoot.selected = true;\n                        shapes.push(oldShapeRoot);\n                    }\n                }\n                isChanged = true;\n            }\n        }\n        // Add targets\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (!target.selected) {\n                target.selected = true;\n                shapes.push(target);\n                isChanged = true;\n            }\n        }\n        if (isChanged) {\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n        }\n        return isChanged;\n    };\n    EToolSelectSelection.prototype.clearAndAddAll = function (targets) {\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].selected = false;\n        }\n        shapes.length = 0;\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            target.selected = true;\n            shapes.push(target);\n        }\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n        return true;\n    };\n    EToolSelectSelection.prototype.set = function (target) {\n        var shapes = this._shapes;\n        if (1 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = false;\n            }\n            shapes.length = 0;\n            target.selected = true;\n            shapes.push(target);\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n        else if (shapes.length === 1) {\n            if (shapes[0] === target) {\n                return false;\n            }\n            else {\n                shapes[0].selected = false;\n                target.selected = true;\n                shapes[0] = target;\n                this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n                return true;\n            }\n        }\n        else {\n            target.selected = true;\n            shapes.push(target);\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n    };\n    EToolSelectSelection.prototype.get = function () {\n        return this._shapes;\n    };\n    EToolSelectSelection.prototype.first = function () {\n        var shapes = this._shapes;\n        return 0 < shapes.length ? shapes[0] : null;\n    };\n    EToolSelectSelection.prototype.last = function () {\n        var shapes = this._shapes;\n        return 0 < shapes.length ? shapes[shapes.length - 1] : null;\n    };\n    EToolSelectSelection.prototype.swapLast = function (expectedLast, newLast) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var last = shapes[shapes.length - 1];\n            if (last === expectedLast) {\n                last.selected = false;\n                shapes[shapes.length - 1] = newLast;\n                newLast.selected = true;\n                this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n            }\n        }\n    };\n    EToolSelectSelection.prototype.remove = function (target) {\n        var shapes = this._shapes;\n        var index = shapes.indexOf(target);\n        if (0 <= index) {\n            target.selected = false;\n            shapes.splice(index, 1);\n            this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        }\n    };\n    EToolSelectSelection.prototype.contains = function (shape) {\n        return shape.selected;\n    };\n    EToolSelectSelection.prototype.size = function () {\n        return this._shapes.length;\n    };\n    EToolSelectSelection.prototype.isEmpty = function () {\n        return this._shapes.length <= 0;\n    };\n    EToolSelectSelection.prototype.clear = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = false;\n            }\n            this._shapes.length = 0;\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.focus = function () {\n        if (this.isEmpty()) {\n            return false;\n        }\n        // Canvas\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas == null) {\n            return false;\n        }\n        // Canvas parent\n        var cparent = canvas.parent;\n        if (!(cparent instanceof DBase)) {\n            return false;\n        }\n        // Center\n        var cw = canvas.width;\n        var ch = canvas.height;\n        var p = cparent.padding;\n        var pl = p.getLeft();\n        var pt = p.getTop();\n        var pr = p.getRight();\n        var pb = p.getBottom();\n        var sw = Math.max(0, cparent.width - pl - pr);\n        var sh = Math.max(0, cparent.height - pt - pb);\n        var cx = pl + (sw - cw) * 0.5;\n        var cy = pt + (sh - ch) * 0.5;\n        // Offset\n        var modifier = this._modifier;\n        var point = this._alignPoint;\n        point.set(modifier.width * 0.5, modifier.height * 0.5);\n        modifier.toGlobal(point, point, false);\n        cparent.toLocal(point, undefined, point, false);\n        var cposition = canvas.position;\n        var ox = cw * 0.5 - (point.x - cposition.x);\n        var oy = ch * 0.5 - (point.y - cposition.y);\n        // Move\n        diagram.view.moveTo(cx + ox, cy + oy);\n        return true;\n    };\n    EToolSelectSelection.prototype.prepare = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    UtilShapeConnectorTransforms.prepare(shape);\n                }\n                else {\n                    UtilShapeTransforms.prepare(shape);\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareTranslateSnap = function () {\n        var diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForTranslate(this._modifier);\n        }\n    };\n    EToolSelectSelection.prototype.prepareRotateSnap = function () {\n        var diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForRotate(this._modifier);\n        }\n    };\n    EToolSelectSelection.prototype.prepareScaleSnap = function () {\n        var diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForScale(this._modifier, this._scaleAnchor);\n        }\n    };\n    EToolSelectSelection.prototype.prepareTranslate = function () {\n        return this.prepare();\n    };\n    EToolSelectSelection.prototype.prepareRotate = function (global) {\n        if (this.prepare()) {\n            // Origin\n            var originGlobal = this._originGlobal;\n            var originLocal = this._originLocal;\n            var modifier = this._modifier;\n            originLocal.set(modifier.width * 0.5, modifier.height * 0.5);\n            originGlobal.copyFrom(originLocal);\n            modifier.updateTransform();\n            modifier.transform.localTransform.apply(originLocal, originLocal);\n            modifier.transform.worldTransform.apply(originGlobal, originGlobal);\n            // Axis\n            if (global == null) {\n                return true;\n            }\n            else {\n                var rotationAxisGlobal = this._rotationAxisGlobal;\n                var vx = global.x - originGlobal.x;\n                var vy = global.y - originGlobal.y;\n                var v = Math.sqrt(vx * vx + vy * vy);\n                if (0.001 < v) {\n                    var vi = 1 / v;\n                    rotationAxisGlobal.set(vx * vi, vy * vi);\n                    return true;\n                }\n                else {\n                    this.finalize();\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScale = function (anchor) {\n        if (this.prepare()) {\n            if (this.prepareScaleOriginAndAxes(anchor)) {\n                var modifier = this._modifier;\n                var rotation = modifier.rotation;\n                var skew = modifier.skew;\n                var originLocal = this._originLocal;\n                var scaleTransform = this._scaleTransform;\n                scaleTransform.setTransform(0, 0, 0, 0, 1, 1, rotation, skew.x, skew.y).invert();\n                scaleTransform.apply(originLocal, originLocal);\n                scaleTransform.translate(-originLocal.x, -originLocal.y);\n                scaleTransform.copyTo(this._scaleTransformInverse).invert();\n                return true;\n            }\n            else {\n                this.finalize();\n                return false;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScaleOriginAndAxes = function (anchor) {\n        var modifier = this._modifier;\n        modifier.updateTransform();\n        var localTransform = modifier.transform.localTransform;\n        var worldTransform = modifier.transform.worldTransform;\n        var width = modifier.width;\n        var height = modifier.height;\n        var originGlobal = this._originGlobal;\n        var originLocal = this._originLocal;\n        this._scaleAnchor = anchor;\n        switch (anchor) {\n            case ESnapperModifierAnchor.TOP_LEFT:\n                originLocal.set(width, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(0, height, width, 0, originGlobal);\n            case ESnapperModifierAnchor.TOP_CENTER:\n                originLocal.set(width * 0.5, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width * 0.5, 0, originGlobal);\n            case ESnapperModifierAnchor.TOP_RIGHT:\n                originLocal.set(0, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(width, height, 0, 0, originGlobal);\n            case ESnapperModifierAnchor.MIDDLE_LEFT:\n                originLocal.set(width, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(0, height * 0.5, originGlobal);\n            case ESnapperModifierAnchor.NONE:\n                originLocal.set(width * 0.5, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                if (0.001 < Math.abs(width)) {\n                    this._scaleAxis0.x = width;\n                }\n                else {\n                    return false;\n                }\n                if (0.001 < Math.abs(height)) {\n                    this._scaleAxis0.y = height;\n                }\n                else {\n                    return false;\n                }\n                return true;\n            case ESnapperModifierAnchor.MIDDLE_RIGHT:\n                originLocal.set(0, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width, height * 0.5, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_LEFT:\n                originLocal.set(width, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(0, 0, width, height, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_CENTER:\n                originLocal.set(width * 0.5, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width * 0.5, height, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_RIGHT:\n                originLocal.set(0, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(width, 0, 0, height, originGlobal);\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScaleAxis = function (x, y, origin) {\n        var axis = this._scaleAxis0;\n        axis.set(x, y);\n        this._modifier.toGlobal(axis, axis, true);\n        axis.x -= origin.x;\n        axis.y -= origin.y;\n        var v = Math.sqrt(axis.x * axis.x + axis.y * axis.y);\n        if (0.001 < v) {\n            var vi = 1 / v;\n            axis.x *= vi;\n            axis.y *= vi;\n            this._scaleDet = v;\n            this._scaleDetInverse = vi;\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.prepareScaleAxes = function (x0, y0, x1, y1, originGlobal) {\n        var modifier = this._modifier;\n        var worldTransform = modifier.transform.worldTransform;\n        // v0\n        var axis0 = this._scaleAxis0;\n        axis0.set(x0, y0);\n        worldTransform.apply(axis0, axis0);\n        axis0.x -= originGlobal.x;\n        axis0.y -= originGlobal.y;\n        // v1\n        var axis1 = this._scaleAxis1;\n        axis1.set(x1, y1);\n        worldTransform.apply(axis1, axis1);\n        axis1.x -= originGlobal.x;\n        axis1.y -= originGlobal.y;\n        var det = axis0.x * axis1.y - axis0.y * axis1.x;\n        if (0.001 < Math.abs(det)) {\n            this._scaleDet = det;\n            this._scaleDetInverse = 1 / det;\n            return true;\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.finalize = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    UtilShapeConnectorTransforms.finalize(shape);\n                }\n                else {\n                    UtilShapeTransforms.finalize(shape);\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.saveForTranslate = function () {\n        DControllers.getCommandController().push(new ECommandShapePropertyPosition(this));\n    };\n    EToolSelectSelection.prototype.saveForRotate = function () {\n        DControllers.getCommandController().push(new ECommandShapePropertyPositionAndRotate(this));\n    };\n    EToolSelectSelection.prototype.saveForScale = function () {\n        DControllers.getCommandController().push(new ECommandShapePropertyAll(this));\n    };\n    EToolSelectSelection.prototype.alignLeft = function () {\n        this.align(initLeft, initWidth, updateMin, finishupIdentity, assingX, applyLeft);\n    };\n    EToolSelectSelection.prototype.alignCenter = function () {\n        this.align(initCenter, initZero, updateSum, finishupAverage, assingX, applyCenter);\n    };\n    EToolSelectSelection.prototype.alignRight = function () {\n        this.align(initRight, initWidth, updateMax, finishupIdentity, assingX, applyRight);\n    };\n    EToolSelectSelection.prototype.alignTop = function () {\n        this.align(initTop, initHeight, updateMin, finishupIdentity, assingY, applyTop);\n    };\n    EToolSelectSelection.prototype.alignMiddle = function () {\n        this.align(initMiddle, initZero, updateSum, finishupAverage, assingY, applyMiddle);\n    };\n    EToolSelectSelection.prototype.alignBottom = function () {\n        this.align(initBottom, initHeight, updateMax, finishupIdentity, assingY, applyBottom);\n    };\n    EToolSelectSelection.prototype.align = function (init, initSpace, update, finishup, assing, apply) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        var shapes = this._shapes;\n        var shapesLength = shapes.length;\n        if (canvas && 1 <= shapesLength) {\n            var parent_1 = shapes[0].parent;\n            if (parent_1) {\n                var point = this._alignPoint;\n                var rectangle = this._alignRectangle;\n                var isFirst = true;\n                var value = 0;\n                var data = [];\n                for (var i = 0; i < shapesLength; ++i) {\n                    var shape = shapes[i];\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        shape.getBounds(false, rectangle);\n                        if (isFirst) {\n                            isFirst = false;\n                            value = init(rectangle);\n                        }\n                        else {\n                            value = update(value, init(rectangle));\n                        }\n                        data.push([initSpace(rectangle), shape]);\n                    }\n                }\n                var dataLength = data.length;\n                if (1 <= dataLength) {\n                    if (dataLength <= 1) {\n                        value = init(canvas.getBounds(false, rectangle));\n                    }\n                    value = finishup(value, dataLength);\n                    point.set(0, 0);\n                    assing(value, point);\n                    parent_1.toLocal(point, undefined, point);\n                    var scale = canvas.scale;\n                    for (var i = 0; i < dataLength; ++i) {\n                        var datum = data[i];\n                        apply(point, datum[0] * 0.5, scale, datum[1]);\n                    }\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.distributeHorizontally = function () {\n        this.distribute(initCenter, initWidth, assingX, applyLeft);\n    };\n    EToolSelectSelection.prototype.distributeVertically = function () {\n        this.distribute(initMiddle, initHeight, assingY, applyTop);\n    };\n    EToolSelectSelection.prototype.distribute = function (init, initSpace, assing, apply) {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        var shapes = this._shapes;\n        var shapesLength = shapes.length;\n        if (canvas && 1 <= shapesLength) {\n            var parent_2 = shapes[0].parent;\n            if (parent_2) {\n                var point = this._alignPoint;\n                var rectangle = this._alignRectangle;\n                var spaceTotal = 0;\n                var data = [];\n                for (var i = 0; i < shapesLength; ++i) {\n                    var shape = shapes[i];\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        shape.getBounds(false, rectangle);\n                        var space = initSpace(rectangle);\n                        spaceTotal += space;\n                        data.push([init(rectangle), space, shape]);\n                    }\n                }\n                var dataLength = data.length;\n                if (2 < dataLength) {\n                    data.sort(function (a, b) {\n                        return a[0] - b[0];\n                    });\n                    var first = data[0];\n                    var last = data[dataLength - 1];\n                    var spaceLeft = last[0] - first[0] - (spaceTotal - last[1] * 0.5 - first[1] * 0.5);\n                    var margin = spaceLeft / (dataLength - 1);\n                    point.set(0, 0);\n                    assing(first[0], point);\n                    parent_2.toLocal(point, undefined, point);\n                    var diff = first[1] * 0.5 + margin;\n                    var scale = canvas.scale;\n                    for (var i = 1, imax = dataLength - 1; i < imax; ++i) {\n                        var datum = data[i];\n                        var shape = datum[2];\n                        diff += datum[1] * 0.5;\n                        apply(point, diff, scale, shape);\n                        diff += datum[1] * 0.5 + margin;\n                    }\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n                else if (dataLength === 1) {\n                    point.set(0, 0);\n                    assing(init(canvas.getBounds(false, rectangle)), point);\n                    parent_2.toLocal(point, undefined, point);\n                    var datum = data[0];\n                    apply(point, 0, canvas.scale, datum[2]);\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.replace = function (shapeFactory) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_3 = shapes[0].parent;\n            if (parent_3) {\n                DControllers.getCommandController().push(new ECommandShapeReplace(parent_3, shapeFactory, this));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.group = function () {\n        var shapes = this._shapes;\n        if (2 <= shapes.length) {\n            var parent_4 = shapes[0].parent;\n            if (parent_4) {\n                DControllers.getCommandController().push(new ECommandShapeGroup(parent_4, this));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.hasUngroupable = function (shapes) {\n        for (var i = shapes.length - 1; 0 <= i; --i) {\n            if (this.isUngroupable(shapes[i])) {\n                return true;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.isUngroupable = function (shape) {\n        return (shape instanceof EShapeGroup &&\n            EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n            EShapeCapabilities.contains(shape, EShapeCapability.UNGROUPING));\n    };\n    EToolSelectSelection.prototype.ungroup = function () {\n        var shapes = this._shapes;\n        if (this.hasUngroupable(shapes)) {\n            var parent_5 = shapes[0].parent;\n            if (parent_5) {\n                DControllers.getCommandController().push(new ECommandShapeUngroup(parent_5, this));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setFill = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setFillEnabled = function (enable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillEnable(this, enable));\n        }\n    };\n    EToolSelectSelection.prototype.setStroke = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeWidth = function (width) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeWidth(this, width));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeAlign = function (align) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeAlign(this, align));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeSide = function (side, isOn) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            if (isOn) {\n                DControllers.getCommandController().push(new ECommandShapePropertyStrokeSideOn(this, side));\n            }\n            else {\n                DControllers.getCommandController().push(new ECommandShapePropertyStrokeSideOff(this, side));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeStyle = function (add, remove) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeStyle(this, add, remove));\n        }\n    };\n    EToolSelectSelection.prototype.setStrokeEnabled = function (enable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeEnable(this, enable));\n        }\n    };\n    EToolSelectSelection.prototype.setLineStyle = function (add, remove) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineStyle(this, add, remove));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailType = function (type) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailType(this, type));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailSizeX = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailSizeX(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailSizeY = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailSizeY(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setLineTailMargin = function (margin) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailMargin(this, margin));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadType = function (type) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadType(this, type));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadSizeX = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadSizeX(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadSizeY = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadSizeY(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setLineHeadMargin = function (margin) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadMargin(this, margin));\n        }\n    };\n    EToolSelectSelection.prototype.setPointsStyle = function (add, remove) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPointsStyle(this, add, remove));\n        }\n    };\n    EToolSelectSelection.prototype.setText = function (text) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextValue(this, text));\n        }\n    };\n    EToolSelectSelection.prototype.setTextColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setTextFamily = function (family) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextFamily(this, family));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSize = function (size) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSize(this, size));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSizeDelta = function (delta) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSizeDelta(this, delta));\n        }\n    };\n    EToolSelectSelection.prototype.setTextWeight = function (weight) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextWeight(this, weight));\n        }\n    };\n    EToolSelectSelection.prototype.setTextStyle = function (style) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextStyle(this, style));\n        }\n    };\n    EToolSelectSelection.prototype.setTextAlignHorizontal = function (align) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextAlignHorizontal(this, align));\n        }\n    };\n    EToolSelectSelection.prototype.setTextAlignVertical = function (align) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextAlignVertical(this, align));\n        }\n    };\n    EToolSelectSelection.prototype.setTextPaddingHorizontal = function (padding) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextPaddingHorizontal(this, padding));\n        }\n    };\n    EToolSelectSelection.prototype.setTextPaddingVertical = function (padding) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextPaddingVertical(this, padding));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOffsetHorizontal = function (offset) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOffsetHorizontal(this, offset));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOffsetVertical = function (offset) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOffsetVertical(this, offset));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOutlineColor = function (color, alpha) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineColor(this, [color, alpha]));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOutlineWidth = function (width) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineWidth(this, width));\n        }\n    };\n    EToolSelectSelection.prototype.setTextOutlineEnabled = function (enable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineEnable(this, enable));\n        }\n    };\n    EToolSelectSelection.prototype.setTextClipping = function (clipping) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextClipping(this, clipping));\n        }\n    };\n    EToolSelectSelection.prototype.setTextFitting = function (fitting) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextFitting(this, fitting));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSpacingHorizontal = function (spacing) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSpacingHorizontal(this, spacing));\n        }\n    };\n    EToolSelectSelection.prototype.setTextSpacingVertical = function (spacing) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSpacingVertical(this, spacing));\n        }\n    };\n    EToolSelectSelection.prototype.setTextDirection = function (direction) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextDirection(this, direction));\n        }\n    };\n    EToolSelectSelection.prototype.setInteractive = function (interactive) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyInteractive(this, interactive));\n        }\n    };\n    EToolSelectSelection.prototype.setFocusable = function (isFocusable) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFocusable(this, isFocusable));\n        }\n    };\n    EToolSelectSelection.prototype.setShortcut = function (shortcut) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyShortcut(this, shortcut));\n        }\n    };\n    EToolSelectSelection.prototype.setTitle = function (title) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTitle(this, title));\n        }\n    };\n    EToolSelectSelection.prototype.setCursor = function (cursor) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCursor(this, cursor));\n        }\n    };\n    EToolSelectSelection.prototype.setRadius = function (radius) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyRadius(this, radius));\n        }\n    };\n    EToolSelectSelection.prototype.setCorner = function (corner, isOn) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            if (isOn) {\n                DControllers.getCommandController().push(new ECommandShapePropertyCornerOn(this, corner));\n            }\n            else {\n                DControllers.getCommandController().push(new ECommandShapePropertyCornerOff(this, corner));\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setImage = function (image) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImage(this, image, undefined));\n        }\n    };\n    EToolSelectSelection.prototype.setGradient = function (image, gradient) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImage(this, image, gradient));\n        }\n    };\n    EToolSelectSelection.prototype.fitToImage = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImageFitTo(this));\n        }\n    };\n    EToolSelectSelection.prototype.clearImage = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImageClear(this));\n        }\n    };\n    EToolSelectSelection.prototype.bringToFront = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_6 = shapes[0].parent;\n            if (parent_6) {\n                var children = parent_6.children;\n                // Update indices\n                var offset = children.length;\n                var indices = [];\n                for (var i = offset - 1; 0 <= i; --i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        child.index = offset + i;\n                        indices.push(i);\n                    }\n                    else {\n                        child.index = i;\n                    }\n                }\n                // Sort\n                children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n                //\n                var isChanged = false;\n                for (var i = 0, imax = indices.length; i < imax; ++i) {\n                    if (offset - 1 - i !== indices[i]) {\n                        isChanged = true;\n                    }\n                }\n                //\n                if (isChanged) {\n                    parent_6.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeBringToFront(indices, parent_6, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return true;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.bringForward = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_7 = shapes[0].parent;\n            if (parent_7) {\n                var isChanged = false;\n                var children = parent_7.children;\n                var indices = [];\n                var previous = null;\n                for (var i = children.length - 1; 0 <= i; --i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        if (previous) {\n                            children[i] = children[i + 1];\n                            children[i + 1] = child;\n                            indices.push(i);\n                            isChanged = true;\n                        }\n                    }\n                    else {\n                        previous = child;\n                    }\n                }\n                if (isChanged) {\n                    parent_7.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeBringForward(indices, parent_7, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return isChanged;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.sendBackward = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_8 = shapes[0].parent;\n            if (parent_8) {\n                var isChanged = false;\n                var children = parent_8.children;\n                var indices = [];\n                var previous = null;\n                for (var i = 0, imax = children.length; i < imax; ++i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        if (previous) {\n                            children[i] = children[i - 1];\n                            children[i - 1] = child;\n                            indices.push(i);\n                            isChanged = true;\n                        }\n                    }\n                    else {\n                        previous = child;\n                    }\n                }\n                if (isChanged) {\n                    parent_8.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeSendBackward(indices, parent_8, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return isChanged;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.sendToBack = function () {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_9 = shapes[0].parent;\n            if (parent_9) {\n                var children = parent_9.children;\n                // Update indices\n                var indices = [];\n                var offset = children.length;\n                for (var i = 0; i < offset; ++i) {\n                    var child = children[i];\n                    if (child.selected) {\n                        child.index = i - offset;\n                        indices.push(i);\n                    }\n                    else {\n                        child.index = i;\n                    }\n                }\n                // Sort\n                children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n                //\n                var isChanged = false;\n                for (var i = 0; i < indices.length; ++i) {\n                    if (i !== indices[i]) {\n                        isChanged = true;\n                    }\n                }\n                //\n                if (isChanged) {\n                    parent_9.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeSendToBack(indices, parent_9, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return true;\n            }\n        }\n        return false;\n    };\n    EToolSelectSelection.prototype.serialize = function () {\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        if (canvas == null) {\n            return null;\n        }\n        // Update UUID\n        var manager = new EShapeResourceManagerSerialization();\n        var shapes = this._shapes;\n        var shapesLength = shapes.length;\n        if (0 < shapesLength) {\n            var root = shapes[0].root;\n            if (root != null) {\n                var layer = root.parent;\n                if (layer instanceof DDiagramLayer) {\n                    layer.addUuid(manager);\n                    layer.updateUuid(manager);\n                }\n            }\n        }\n        // Shape set\n        var shapeSet = new Set();\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapeSet.add(shapes[i]);\n        }\n        // Serialize selected shapes\n        var items = [];\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var item = shape.serialize(manager);\n            item[16] = 0;\n            if (shape instanceof EShapeConnectorLine) {\n                var item29 = item[29];\n                if (item29 & EShapeCapability.LINE_TAIL) {\n                    if (!shapeSet.has(shape.edge.tail.acceptor.shape)) {\n                        item29 &= ~EShapeCapability.LINE_TAIL;\n                    }\n                }\n                if (item29 & EShapeCapability.LINE_HEAD) {\n                    if (!shapeSet.has(shape.edge.head.acceptor.shape)) {\n                        item29 &= ~EShapeCapability.LINE_HEAD;\n                    }\n                }\n                item[29] = item29;\n            }\n            items.push(item);\n        }\n        // Done\n        var serialized = {\n            version: DDiagramSerializedVersion,\n            name: canvas.name,\n            label: canvas.label,\n            width: canvas.width,\n            height: canvas.height,\n            summary: canvas.summary,\n            description: canvas.description,\n            resources: manager.resources,\n            data: manager.data,\n            pieces: manager.pieces,\n            items: items,\n            layers: [\n                [\n                    diagram instanceof DDiagramEditor\n                        ? diagram.theme.getBaseLayerLabel()\n                        : \"Base Layer\"\n                ]\n            ]\n        };\n        return JSON.stringify(serialized);\n    };\n    EToolSelectSelection.prototype.deserialize = function (data) {\n        var _this = this;\n        var diagram = this._diagram;\n        var layer = diagram.layer;\n        if (layer != null) {\n            var parsed_1 = DDiagrams.parse(data);\n            if (parsed_1 != null) {\n                DDiagrams.toPieceData(diagram.controller, parsed_1.pieces, EShapeResourceManagerDeserializationMode.EDITOR).then(function (pieceData) {\n                    _this.deserialize_(layer, parsed_1, pieceData);\n                });\n            }\n        }\n    };\n    EToolSelectSelection.prototype.deserialize_ = function (layer, parsed, pieceData) {\n        var _this = this;\n        var manager = new EShapeResourceManagerDeserialization(parsed, parsed.pieces, pieceData, EShapeResourceManagerDeserializationMode.EDITOR, 0);\n        var shapePromise = deserializeAll(parsed.items, manager);\n        if (shapePromise) {\n            shapePromise.then(function (shapes) {\n                var shift = _this.calcShift(shapes, layer);\n                var shapesLength = shapes.length;\n                var layerChildren = layer.children;\n                for (var i = 0; i < shapesLength; ++i) {\n                    var shape = shapes[i];\n                    shape.parent = layer;\n                    shape.uploaded = undefined;\n                    layerChildren.push(shape);\n                }\n                layer.onChildTransformChange();\n                layer.toDirty();\n                for (var i = 0; i < shapesLength; ++i) {\n                    shapes[i].onAttach();\n                }\n                _this.shift(shapes, shift);\n                DControllers.getCommandController().push(new ECommandShapeCreate(shapes, layer, _this, true));\n            });\n        }\n    };\n    EToolSelectSelection.prototype.calcShift = function (shapes, parent) {\n        if (shapes.length <= 0) {\n            return null;\n        }\n        var work1 = this._shiftPoint1;\n        var work2 = this._shiftPoint2;\n        var first = shapes[0];\n        first.updateTransform();\n        var firstTransform = first.transform;\n        work1.copyFrom(firstTransform.pivot);\n        firstTransform.worldTransform.apply(work1, work1);\n        parent.transform.worldTransform.apply(work1, work1);\n        var gx = work1.x;\n        var gy = work1.y;\n        var delta = 0;\n        while (true) {\n            work1.set(gx + delta, gy + delta);\n            var found = parent.hitTestBBox(work1, function (target) {\n                if (target.type === first.type) {\n                    target.updateTransform();\n                    var targetTransform = target.transform;\n                    work2.copyFrom(targetTransform.pivot);\n                    targetTransform.worldTransform.apply(work2, work2);\n                    var dx = work2.x - (gx + delta);\n                    var dy = work2.y - (gy + delta);\n                    return Math.abs(dx) <= 0.1 && Math.abs(dy) <= 0.1;\n                }\n                return false;\n            });\n            if (found == null) {\n                work1.set(gx + delta, gy + delta);\n                parent.toLocal(work1, undefined, work1);\n                work2.set(work1.x - firstTransform.position.x, work1.y - firstTransform.position.y);\n                return work2;\n            }\n            delta += 10;\n        }\n    };\n    EToolSelectSelection.prototype.shift = function (shapes, amount) {\n        if (shapes.length <= 0 || amount == null) {\n            return;\n        }\n        var ax = amount.x;\n        var ay = amount.y;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                var position = shape.transform.position;\n                position.set(position.x + ax, position.y + ay);\n            }\n            else if (shape instanceof EShapeConnectorLine) {\n                var edge = shape.edge;\n                var head = edge.head;\n                var tail = edge.tail;\n                if (head.acceptor.shape == null && tail.acceptor.shape == null) {\n                    edge.lock();\n                    var headLocal = head.local;\n                    headLocal.set(headLocal.x + ax, headLocal.y + ay);\n                    var tailLocal = tail.local;\n                    tailLocal.set(tailLocal.x + ax, tailLocal.y + ay);\n                    edge.unlock();\n                }\n            }\n        }\n    };\n    EToolSelectSelection.prototype.setId = function (id) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyId(this, id));\n        }\n    };\n    EToolSelectSelection.prototype.addActionValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueAdd(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.replaceActionValue = function (target, value, list) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueReplace(target, value, this, list));\n        }\n    };\n    EToolSelectSelection.prototype.removeActionValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueRemove(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.bringActionValueForward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueBringForward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.sendActionValueBackward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueSendBackward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.addDataValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueAdd(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.replaceDataValue = function (oldValue, newValue, list) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueReplace(oldValue, newValue, this, list));\n        }\n    };\n    EToolSelectSelection.prototype.removeDataValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueRemove(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.bringDataValueForward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueBringForward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.sendDataValueBackward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueSendBackward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.addDataMappingValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueAdd(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.replaceDataMappingValue = function (oldValue, newValue, list) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueReplace(oldValue, newValue, this, list));\n        }\n    };\n    EToolSelectSelection.prototype.removeDataMappingValue = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueRemove(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.bringDataMappingValueForward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueBringForward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.sendDataMappingValueBackward = function (value) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueSendBackward(value, this));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionX = function (x) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionX(this, x));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionY = function (y) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionY(this, y));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionLeft = function (left) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionLeft(this, left));\n        }\n    };\n    EToolSelectSelection.prototype.setPositionTop = function (top) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionTop(this, top));\n        }\n    };\n    EToolSelectSelection.prototype.setSizeX = function (x) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySizeX(this, x));\n        }\n    };\n    EToolSelectSelection.prototype.setSizeY = function (y) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySizeY(this, y));\n        }\n    };\n    EToolSelectSelection.prototype.setRotation = function (rotation) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyRotation(this, rotation));\n        }\n    };\n    EToolSelectSelection.prototype.setSkew = function (skew) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySkew(this, skew));\n        }\n    };\n    EToolSelectSelection.prototype.toInternalVector = function (vector, result) {\n        // Convert to the internal coordinate vector\n        // A = modifier.parent.worldTransform\n        // (ndx, ndy)^T = A^-1 (0, 0)^T - A^-1 (dx, dy)^T\n        var modifier = this._modifier;\n        modifier.updateTransform();\n        var worldTransform = modifier.parent.worldTransform;\n        var a = worldTransform.a;\n        var b = worldTransform.b;\n        var c = worldTransform.c;\n        var d = worldTransform.d;\n        var detInverse = 1 / (a * d - c * b);\n        result.set((d * vector.x - c * vector.y) * detInverse, (a * vector.y - b * vector.x) * detInverse);\n        return result;\n    };\n    EToolSelectSelection.prototype.translate = function (dx, dy, snap) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var work = this._translateDelta;\n            work.set(dx, dy);\n            this.toInternalVector(work, work);\n            if (snap) {\n                var diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    diagram.snapper.toTranslationSnapped(work, work);\n                }\n            }\n            var transform = this._transform.set(1, 0, 0, 1, work.x, work.y);\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    var edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    var capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    };\n    EToolSelectSelection.prototype.rotateTo = function (global, snap) {\n        var rotationAxisGlobal = this._rotationAxisGlobal;\n        var originGlobal = this._originGlobal;\n        var vx = global.x - originGlobal.x;\n        var vy = global.y - originGlobal.y;\n        var v = Math.sqrt(vx * vx + vy * vy);\n        if (0.001 < v) {\n            var vi = 1 / v;\n            var nx = vx * vi;\n            var ny = vy * vi;\n            var dot = Math.max(-1, Math.min(1, rotationAxisGlobal.x * nx + rotationAxisGlobal.y * ny));\n            var cross = rotationAxisGlobal.x * ny - rotationAxisGlobal.y * nx;\n            var rotation = 0 <= cross ? +Math.acos(dot) : -Math.acos(dot);\n            if (snap) {\n                var diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    var baseRotation = this._modifier.rotation;\n                    rotation = diagram.snapper.toRotationSnapped(baseRotation, rotation);\n                }\n            }\n            this.rotate(rotation);\n        }\n    };\n    EToolSelectSelection.prototype.rotate = function (rotation) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var originLocal = this._originLocal;\n            var transform = this._transform\n                .identity()\n                .translate(-originLocal.x, -originLocal.y)\n                .rotate(rotation)\n                .translate(+originLocal.x, +originLocal.y);\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    var edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    var capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                        capability |= EShapeCapability.ROTATION;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    };\n    EToolSelectSelection.prototype.getScale = function (dx, dy, anchor, keepRatio, result) {\n        switch (anchor) {\n            case ESnapperModifierAnchor.TOP_LEFT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.TOP_CENTER:\n                this.getScaleY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.TOP_RIGHT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.MIDDLE_LEFT:\n                this.getScaleX(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.NONE:\n                var axis = this._scaleAxis0;\n                var width = axis.x;\n                var height = axis.y;\n                var scaleX = (width + dx) / width;\n                var scaleY = (height + dy) / height;\n                if (keepRatio) {\n                    result.x = result.y = Math.max(scaleX, scaleY);\n                }\n                else {\n                    result.set(scaleX, scaleY);\n                }\n                break;\n            case ESnapperModifierAnchor.MIDDLE_RIGHT:\n                this.getScaleX(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_LEFT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_CENTER:\n                this.getScaleY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_RIGHT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n        }\n    };\n    EToolSelectSelection.prototype.getScaleX = function (dx, dy, keepRatio, result) {\n        var scale = this.calcScale(dx, dy);\n        if (keepRatio) {\n            result.set(scale, scale);\n        }\n        else {\n            result.set(scale, 1);\n        }\n    };\n    EToolSelectSelection.prototype.getScaleY = function (dx, dy, keepRatio, result) {\n        var scale = this.calcScale(dx, dy);\n        if (keepRatio) {\n            result.set(scale, scale);\n        }\n        else {\n            result.set(1, scale);\n        }\n    };\n    EToolSelectSelection.prototype.calcScale = function (dx, dy) {\n        var axis = this._scaleAxis0;\n        var dot = axis.x * dx + axis.y * dy;\n        return (this._scaleDet + dot) * this._scaleDetInverse;\n    };\n    EToolSelectSelection.prototype.getScaleXY = function (dx, dy, keepRatio, result) {\n        // v0\n        var axis0 = this._scaleAxis0;\n        var vx0 = axis0.x;\n        var vy0 = axis0.y;\n        // v1\n        var axis1 = this._scaleAxis1;\n        var vx1 = axis1.x;\n        var vy1 = axis1.y;\n        // v2\n        var vx2 = vx0 + vx1 + dx;\n        var vy2 = vy0 + vy1 + dy;\n        // A = | vx0, vx1 |\n        //     | vy0, vy1 |\n        // D = (dx, dy)^T\n        // V0 = (vx0, vy0)^T\n        // V1 = (vx1, vy1)^T\n        // V2 = V0 + V1 + D;\n        // A x = V\n        //\n        // det A = vx0 * vy1 - vy0 * vx1\n        // (det A) A^-1 = |  vy1 -vx1 |\n        //                | -vy0  vx0 |\n        var detInverse = this._scaleDetInverse;\n        var scaleX = (+vy1 * vx2 - vx1 * vy2) * detInverse;\n        var scaleY = (-vy0 * vx2 + vx0 * vy2) * detInverse;\n        this.setScale(scaleX, scaleY, keepRatio, result);\n    };\n    EToolSelectSelection.prototype.setScale = function (scaleX, scaleY, keepRatio, result) {\n        if (keepRatio) {\n            if (0 <= scaleX) {\n                if (0 <= scaleY) {\n                    var scale = Math.max(scaleX, scaleY);\n                    result.set(scale, scale);\n                }\n                else {\n                    var scale = Math.max(scaleX, -scaleY);\n                    result.set(scale, -scale);\n                }\n            }\n            else {\n                if (0 <= scaleY) {\n                    var scale = Math.max(-scaleX, scaleY);\n                    result.set(-scale, scale);\n                }\n                else {\n                    var scale = Math.min(scaleX, scaleY);\n                    result.set(scale, scale);\n                }\n            }\n        }\n        else {\n            result.set(scaleX, scaleY);\n        }\n        return result;\n    };\n    EToolSelectSelection.prototype.makeScaleTransform = function (scale, result) {\n        return this._scaleTransform\n            .copyTo(result)\n            .scale(scale.x, scale.y)\n            .prepend(this._scaleTransformInverse);\n    };\n    EToolSelectSelection.prototype.scale = function (dx, dy, keepRatio, snap) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var scale = this._scale;\n            var scaleAnchor = this._scaleAnchor;\n            this.getScale(dx, dy, scaleAnchor, keepRatio, scale);\n            var transform = this._transform;\n            this.makeScaleTransform(scale, transform);\n            if (snap) {\n                var diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    if (diagram.snapper.toScaleSnapped(transform, scaleAnchor, keepRatio, scale)) {\n                        this.makeScaleTransform(scale, transform);\n                    }\n                }\n            }\n            for (var i = 0, imax = shapes.length; i < imax; ++i) {\n                var shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    var edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    var capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n                        capability |= EShapeCapability.WIDTH;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n                        capability |= EShapeCapability.HEIGHT;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                        capability |= EShapeCapability.ROTATION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n                        capability |= EShapeCapability.SKEW;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    };\n    EToolSelectSelection.prototype.delete = function (save) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            var parent_10 = shapes[0].parent;\n            if (parent_10) {\n                if (save !== false) {\n                    var deleteds = UtilShapeDeleter.delete(parent_10, shapes, true);\n                    if (deleteds) {\n                        var indices = UtilShapeSearch.toIndices(deleteds);\n                        DControllers.getCommandController().push(new ECommandShapeDelete(deleteds, indices, parent_10, this, true));\n                    }\n                }\n                else {\n                    UtilShapeDeleter.delete(parent_10, shapes, false);\n                }\n                this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n            }\n        }\n    };\n    EToolSelectSelection.prototype.createChildren = function (creator) {\n        this.lock();\n        var commands = [];\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var created = creator(shape);\n            if (created) {\n                commands.push(new ECommandShapeCreate(created, shape, this, false));\n            }\n        }\n        if (0 < commands.length) {\n            DControllers.getCommandController().push(new ECommandComposition(commands, this));\n            this.update(EToolSelectSelectionUpdatedPart.TREE);\n        }\n        this.unlock();\n    };\n    EToolSelectSelection.prototype.deleteChildren = function (deletor) {\n        this.lock();\n        var commands = [];\n        var shapes = this._shapes;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var targets = deletor(shape);\n            if (targets) {\n                for (var j = 0, jmax = targets.length; j < jmax; ++j) {\n                    targets[j].selected = true;\n                }\n                var deleteds = UtilShapeDeleter.delete(shape, undefined, true);\n                if (deleteds) {\n                    var indices = UtilShapeSearch.toIndices(deleteds);\n                    commands.push(new ECommandShapeDelete(deleteds, indices, shape, this, false));\n                }\n            }\n        }\n        if (0 < commands.length) {\n            DControllers.getCommandController().push(new ECommandComposition(commands, this));\n            this.update(EToolSelectSelectionUpdatedPart.TREE);\n        }\n        this.unlock();\n    };\n    EToolSelectSelection.prototype.lockCapability = function (target) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCapabilityLock(this, target));\n        }\n    };\n    EToolSelectSelection.prototype.unlockCapability = function (target) {\n        var shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCapabilityUnlock(this, target));\n        }\n    };\n    EToolSelectSelection.prototype.store = function () {\n        return this._shapes.slice(0);\n    };\n    EToolSelectSelection.prototype.restore = function (stored) {\n        var shapes = this._shapes;\n        // Unselect\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].selected = false;\n        }\n        shapes.length = 0;\n        // Select\n        for (var i = 0, imax = stored.length; i < imax; ++i) {\n            var newShape = stored[i];\n            newShape.selected = true;\n            shapes.push(newShape);\n        }\n        // Done\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n    };\n    Object.defineProperty(EToolSelectSelection.prototype, \"modifier\", {\n        get: function () {\n            return this._modifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return EToolSelectSelection;\n}(utils.EventEmitter));\nexport { EToolSelectSelection };\n//# sourceMappingURL=e-tool-select-selection.js.map","import { Rectangle } from \"pixi.js\";\nvar UtilShapeAreaSelect = /** @class */ (function () {\n    function UtilShapeAreaSelect() {\n    }\n    UtilShapeAreaSelect.isShapeIn = function (shape, rect) {\n        var _a;\n        var bound = shape.getBounds(false, ((_a = this._work) !== null && _a !== void 0 ? _a : (this._work = new Rectangle())));\n        var x = bound.x;\n        var y = bound.y;\n        var w = bound.width;\n        var h = bound.height;\n        return (rect.contains(x, y) &&\n            rect.contains(x + w, y) &&\n            rect.contains(x, y + h) &&\n            rect.contains(x + w, y + h));\n    };\n    UtilShapeAreaSelect.findShapes = function (container, rect, result) {\n        var children = container.children;\n        for (var i = 0, imax = children.length; i < imax; ++i) {\n            var child = children[i];\n            if (this.isShapeIn(child, rect)) {\n                result.push(child);\n            }\n        }\n    };\n    return UtilShapeAreaSelect;\n}());\nexport { UtilShapeAreaSelect };\n//# sourceMappingURL=util-shape-area-select.js.map","import { Point } from \"pixi.js\";\nvar UtilHitTest = /** @class */ (function () {\n    function UtilHitTest() {\n    }\n    UtilHitTest.execute = function (global, target, interactionManager) {\n        var _a, _b;\n        var offsets = ((_a = UtilHitTest.OFFSETS) !== null && _a !== void 0 ? _a : (UtilHitTest.OFFSETS = this.newOffsets()));\n        var work = ((_b = UtilHitTest.WORK) !== null && _b !== void 0 ? _b : (UtilHitTest.WORK = new Point()));\n        var x = global.x;\n        var y = global.y;\n        if (interactionManager) {\n            for (var i = 0, imax = offsets.length; i < imax; i += 1) {\n                work.set(x + offsets[i], y + offsets[i + 1]);\n                var result = interactionManager.hitTest(work, target);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        else {\n            for (var i = 0, imax = offsets.length; i < imax; i += 1) {\n                work.set(x + offsets[i], y + offsets[i + 1]);\n                var result = target.hitTest(work);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    };\n    UtilHitTest.newOffsets = function () {\n        return [\n            +0, +0, -1, -1, +1, -1, +1, +1, -1, +1, +0, -2, +2, +0, +0, -2, -2, +0, -2, -2, +2, -2,\n            +2, +2, -2, +2, +0, -4, +4, +0, +0, -4, -4, +0\n        ];\n    };\n    return UtilHitTest;\n}());\nexport { UtilHitTest };\n//# sourceMappingURL=util-hit-test.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, EShapeBase, EShapeCapabilities, EShapeCapability, ESnapperModifierAnchor, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point, Rectangle } from \"pixi.js\";\nimport { UtilShapeAreaSelect } from \"../util/util-shape-area-select\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { EToolImpl } from \"./e-tool-impl\";\nimport { EToolSelectArea } from \"./e-tool-select-area\";\nimport { EToolSelectSelection } from \"./e-tool-select-selection\";\nimport { UtilHitTest } from \"../util/util-hit-test\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nvar toSelectionOptions = function (options) {\n    var selection = options.selection;\n    return {\n        diagram: options.diagram,\n        modifier: selection && selection.modifier\n    };\n};\nvar EToolSelect = /** @class */ (function (_super) {\n    __extends(EToolSelect, _super);\n    function EToolSelect(options) {\n        var _this = _super.call(this) || this;\n        _this._selection = new EToolSelectSelection(toSelectionOptions(options));\n        _this._area = new EToolSelectArea();\n        _this._diagram = options.diagram;\n        _this._applicationLayer = null;\n        _this._onDownPoint = new Point();\n        _this._onMovePoint = new Point();\n        _this._onUpPoint = new Point();\n        _this._areaRect = new Rectangle();\n        _this._mode = 0 /* EToolSelectMode.NONE */;\n        _this._isFirstMove = false;\n        _this._childSelectTime = -1;\n        _this._childSelectChild = null;\n        var allow = options.allow;\n        if (allow) {\n            _this._isTransformationAllowed = allow.transformation !== false;\n            _this._isDeletionAllowed = allow.deletion !== false;\n        }\n        else {\n            _this._isTransformationAllowed = true;\n            _this._isDeletionAllowed = true;\n        }\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        _this._onKeydownBound = function (e) {\n            _this.onKeydown(e);\n        };\n        _this._onKeyupBound = function (e) {\n            _this.onKeyup(e);\n        };\n        _this._onDblClickBound = function (e) {\n            _this.onDblClick(e);\n        };\n        return _this;\n    }\n    Object.defineProperty(EToolSelect.prototype, \"selection\", {\n        get: function () {\n            return this._selection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolSelect.prototype.onActivate = function () {\n        var diagram = this._diagram;\n        diagram.on(UtilPointerEvent.down, this._onDownBound);\n        diagram.on(\"dblclick\", this._onDblClickBound);\n        diagram.on(\"keydown\", this._onKeydownBound);\n        diagram.on(\"keyup\", this._onKeyupBound);\n    };\n    EToolSelect.prototype.onDeactivate = function () {\n        var diagram = this._diagram;\n        diagram.off(UtilPointerEvent.down, this._onDownBound);\n        diagram.off(\"dblclick\", this._onDblClickBound);\n        diagram.off(\"keydown\", this._onKeydownBound);\n        diagram.off(\"keyup\", this._onKeyupBound);\n    };\n    EToolSelect.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this._diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        if (diagramCanvas && diagramLayer) {\n            var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n            if (this._mode === 1 /* EToolSelectMode.SELECT */) {\n                this._mode = 0 /* EToolSelectMode.NONE */;\n                this.onSelectEnd(diagramCanvas, diagramLayer, isAddMode);\n                return;\n            }\n            var global_1 = e.data.global;\n            var onDownPoint = this._onDownPoint;\n            onDownPoint.copyFrom(global_1);\n            var selection = this._selection;\n            var modifier = selection.modifier;\n            var hitObject = this.hitTest(global_1, modifier, diagramLayer);\n            var commandController = DControllers.getCommandController();\n            if (hitObject instanceof EShapeBase) {\n                if (isAddMode) {\n                    var before = selection.store();\n                    selection.toggle(hitObject);\n                    var after = selection.store();\n                    commandController.push(new ECommandShapeSelect(before, after, selection));\n                }\n                else if (!selection.contains(hitObject)) {\n                    var first = selection.first();\n                    if (first == null) {\n                        var before = selection.store();\n                        if (selection.set(hitObject.root)) {\n                            var after = selection.store();\n                            commandController.push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    else {\n                        var selected = UtilShapeSearch.toSelected(hitObject);\n                        if (selected != null) {\n                            if (EShapeCapabilities.contains(selected, EShapeCapability.CHILDREN)) {\n                                this._childSelectTime = Date.now();\n                                this._childSelectChild = UtilShapeSearch.toOfParent(hitObject, selected);\n                            }\n                        }\n                        else {\n                            var sharedParent = UtilShapeSearch.toSharedParent(first, hitObject);\n                            var before = selection.store();\n                            if (selection.set(UtilShapeSearch.toOfParent(hitObject, sharedParent))) {\n                                var after = selection.store();\n                                commandController.push(new ECommandShapeSelect(before, after, selection));\n                            }\n                        }\n                    }\n                }\n                if (this._isTransformationAllowed && selection.prepareTranslate()) {\n                    selection.prepareTranslateSnap();\n                    this._mode = 2 /* EToolSelectMode.TRANSLATE */;\n                    this._isFirstMove = true;\n                }\n            }\n            else if (hitObject === modifier) {\n                switch (modifier.getLastHitAnchor()) {\n                    case ESnapperModifierAnchor.ROTATION:\n                        if (selection.prepareRotate(global_1)) {\n                            selection.prepareRotateSnap();\n                            this._mode = 4 /* EToolSelectMode.ROTATE */;\n                            this._isFirstMove = true;\n                        }\n                        break;\n                    default:\n                        if (selection.prepareScale(modifier.getLastHitAnchor())) {\n                            selection.prepareScaleSnap();\n                            this._mode = 3 /* EToolSelectMode.SCALE */;\n                            this._isFirstMove = true;\n                        }\n                }\n            }\n            else {\n                // Select area\n                var area = this._area;\n                diagramCanvas.toLocal(global_1, undefined, onDownPoint);\n                area.x = onDownPoint.x;\n                area.y = onDownPoint.y;\n                area.size.set(0, 0);\n                area.update();\n                diagramCanvas.addChild(area);\n                DApplications.update(diagram);\n                // Select mode\n                this._mode = 1 /* EToolSelectMode.SELECT */;\n            }\n            if (this._mode !== 0 /* EToolSelectMode.NONE */) {\n                var oldApplicationLayer = this._applicationLayer;\n                if (oldApplicationLayer) {\n                    this._applicationLayer = null;\n                    var oldInteractionManager = oldApplicationLayer.renderer.plugins.interaction;\n                    oldInteractionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                    var onUpBound = this._onUpBound;\n                    oldInteractionManager.off(UtilPointerEvent.up, onUpBound);\n                    oldInteractionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                    oldInteractionManager.off(UtilPointerEvent.cancel, onUpBound);\n                }\n                var newApplicationLayer = DApplications.getLayer(diagram);\n                if (newApplicationLayer) {\n                    this._applicationLayer = newApplicationLayer;\n                    var newInteractionManager = newApplicationLayer.renderer.plugins.interaction;\n                    newInteractionManager.on(UtilPointerEvent.move, this._onMoveBound);\n                    var onUpBound = this._onUpBound;\n                    newInteractionManager.on(UtilPointerEvent.up, onUpBound);\n                    newInteractionManager.on(UtilPointerEvent.upoutside, onUpBound);\n                    newInteractionManager.on(UtilPointerEvent.cancel, onUpBound);\n                }\n            }\n        }\n    };\n    EToolSelect.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this._diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._mode;\n        var applicationLayer = this._applicationLayer;\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */ && applicationLayer) {\n            var global_2 = e.data.global;\n            applicationLayer.lock();\n            var onDownPoint = this._onDownPoint;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var area = this._area;\n                var onMovePoint = diagramCanvas.toLocal(global_2, undefined, this._onMovePoint);\n                area.x = Math.min(onDownPoint.x, onMovePoint.x);\n                area.y = Math.min(onDownPoint.y, onMovePoint.y);\n                area.size.set(Math.max(onDownPoint.x, onMovePoint.x) - area.x, Math.max(onDownPoint.y, onMovePoint.y) - area.y);\n                area.update();\n            }\n            else {\n                var dx = global_2.x - onDownPoint.x;\n                var dy = global_2.y - onDownPoint.y;\n                if (1 <= Math.abs(dx) || 1 <= Math.abs(dy)) {\n                    var isFirstMove = this._isFirstMove;\n                    this._isFirstMove = false;\n                    this._childSelectChild = null;\n                    var selection = this._selection;\n                    selection.modifier.disallow();\n                    switch (mode) {\n                        case 2 /* EToolSelectMode.TRANSLATE */:\n                            if (isFirstMove) {\n                                selection.saveForTranslate();\n                            }\n                            selection.translate(dx, dy, true);\n                            break;\n                        case 4 /* EToolSelectMode.ROTATE */:\n                            if (isFirstMove) {\n                                selection.saveForRotate();\n                            }\n                            selection.rotateTo(global_2, true);\n                            break;\n                        case 3 /* EToolSelectMode.SCALE */:\n                            if (isFirstMove) {\n                                selection.saveForScale();\n                            }\n                            var keepRatio = originalEvent.shiftKey;\n                            selection.scale(dx, dy, keepRatio, true);\n                            break;\n                    }\n                }\n            }\n            applicationLayer.unlock();\n            applicationLayer.update();\n        }\n    };\n    EToolSelect.prototype.hitTest = function (global, modifier, diagramLayer) {\n        // Modifier\n        if (this._isTransformationAllowed && modifier.visible) {\n            var applicationLayer = DApplications.getLayer(diagramLayer);\n            if (applicationLayer) {\n                var interactionManager = applicationLayer.renderer.plugins.interaction;\n                var modifierHit = UtilHitTest.execute(global, modifier, interactionManager);\n                if (modifierHit != null) {\n                    return modifierHit;\n                }\n            }\n        }\n        // Layer\n        if (diagramLayer.visible) {\n            return UtilHitTest.execute(global, diagramLayer);\n        }\n        // Found nothing\n        return null;\n    };\n    EToolSelect.prototype.onSelectEnd = function (canvas, diagramLayer, isAddMode) {\n        var area = this._area;\n        var selection = this._selection;\n        var commandController = DControllers.getCommandController();\n        if (0 < area.size.x && 0 < area.size.y) {\n            var areaRect = area.getBounds(false, this._areaRect);\n            var foundShapes = [];\n            UtilShapeAreaSelect.findShapes(diagramLayer, areaRect, foundShapes);\n            if (isAddMode) {\n                if (0 < foundShapes.length) {\n                    var before = selection.store();\n                    if (selection.addAll(foundShapes)) {\n                        var after = selection.store();\n                        commandController.push(new ECommandShapeSelect(before, after, selection));\n                    }\n                }\n            }\n            else {\n                if (0 < foundShapes.length || !selection.isEmpty()) {\n                    var before = selection.store();\n                    if (selection.clearAndAddAll(foundShapes)) {\n                        var after = selection.store();\n                        commandController.push(new ECommandShapeSelect(before, after, selection));\n                    }\n                }\n            }\n        }\n        else if (!isAddMode) {\n            if (!selection.isEmpty()) {\n                var before = selection.store();\n                if (selection.clear()) {\n                    var after = selection.store();\n                    commandController.push(new ECommandShapeSelect(before, after, selection));\n                }\n            }\n        }\n        canvas.removeChild(area);\n        DApplications.update(diagramLayer);\n    };\n    EToolSelect.prototype.onUp = function (e) {\n        var diagram = this._diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._mode;\n        var applicationLayer = this._applicationLayer;\n        if (applicationLayer) {\n            this._applicationLayer = null;\n            var interactionManager = applicationLayer.renderer.plugins.interaction;\n            interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n        }\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            this._mode = 0 /* EToolSelectMode.NONE */;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var originalEvent = e.data.originalEvent;\n                var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n                this.onSelectEnd(diagramCanvas, diagramLayer, isAddMode);\n            }\n            else {\n                var selection = this._selection;\n                // Finalize\n                selection.finalize();\n                // Select the child\n                var childSelectChild = this._childSelectChild;\n                if (childSelectChild != null) {\n                    this._childSelectChild = null;\n                    var elapsedTime = Date.now() - this._childSelectTime;\n                    if (elapsedTime < 333) {\n                        var before = selection.store();\n                        if (selection.set(childSelectChild)) {\n                            var after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                }\n                //\n                selection.modifier.allow();\n                selection.updateModifier();\n                if (applicationLayer) {\n                    applicationLayer.update();\n                }\n            }\n        }\n    };\n    EToolSelect.prototype.getRotateAmount = function (e) {\n        return (Math.PI * (e.ctrlKey ? 1 : 15)) / 180;\n    };\n    EToolSelect.prototype.getScaleAmount = function (e) {\n        return e.ctrlKey ? 1 : 10;\n    };\n    EToolSelect.prototype.getTranslateAmount = function (e) {\n        return e.ctrlKey ? 1 : 10;\n    };\n    EToolSelect.prototype.onKeydown = function (e) {\n        var selection = this._selection;\n        if (!selection.isEmpty()) {\n            if (this._isTransformationAllowed) {\n                if (UtilKeyboardEvent.isArrowUpKey(e)) {\n                    if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(0, this.getScaleAmount(e), false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(0, -this.getTranslateAmount(e), false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowRightKey(e)) {\n                    if (e.altKey) {\n                        if (selection.prepareRotate()) {\n                            selection.saveForRotate();\n                            selection.rotate(this.getRotateAmount(e));\n                            selection.finalize();\n                        }\n                    }\n                    else if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(this.getScaleAmount(e), 0, false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(this.getTranslateAmount(e), 0, false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowDownKey(e)) {\n                    if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(0, -this.getScaleAmount(e), false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(0, this.getTranslateAmount(e), false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowLeftKey(e)) {\n                    if (e.altKey) {\n                        if (selection.prepareRotate()) {\n                            selection.saveForRotate();\n                            selection.rotate(-this.getRotateAmount(e));\n                            selection.finalize();\n                        }\n                    }\n                    else if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(-this.getScaleAmount(e), 0, false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(-this.getTranslateAmount(e), 0, false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n            }\n            if (this._isDeletionAllowed) {\n                if (UtilKeyboardEvent.isDeleteKey(e)) {\n                    selection.delete();\n                    e.preventDefault();\n                }\n            }\n        }\n        if (UtilKeyboardEvent.isSelectAllKey(e)) {\n            var first = selection.first();\n            var parent_1 = first == null ? this._diagram.layer : first.parent;\n            if (parent_1 != null) {\n                var children = parent_1.children;\n                if (0 < children.length) {\n                    var before = selection.store();\n                    if (e.altKey) {\n                        var types = new Set();\n                        for (var i = 0, imax = before.length; i < imax; ++i) {\n                            types.add(before[i].type);\n                        }\n                        var after = [];\n                        for (var i = 0, imax = children.length; i < imax; ++i) {\n                            var child = children[i];\n                            if (child.selected) {\n                                after.push(child);\n                            }\n                            else if (types.has(child.type)) {\n                                after.push(child);\n                            }\n                        }\n                        if (selection.clearAndAddAll(after)) {\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    else {\n                        if (selection.clearAndAddAll(children)) {\n                            var after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    EToolSelect.prototype.onKeyup = function (e) {\n        // DO NOTHING\n    };\n    EToolSelect.prototype.onDblClick = function (e) {\n        var selection = this._selection;\n        var last = selection.last();\n        if (last != null) {\n            this.emit(\"edit\", last, this);\n        }\n    };\n    return EToolSelect;\n}(EToolImpl));\nexport { EToolSelect };\n//# sourceMappingURL=e-tool-select.js.map","import { __extends } from \"tslib\";\nimport { DApplications, EShapeAcceptorEdgeType, EShapeCircle, EShapeContainer, EShapeDefaults, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nvar EToolShapeAcceptorEdgeRenderer = /** @class */ (function (_super) {\n    __extends(EToolShapeAcceptorEdgeRenderer, _super);\n    function EToolShapeAcceptorEdgeRenderer(edge) {\n        var _this = _super.call(this) || this;\n        _this._edge = edge;\n        _this._circles = _this.newCircles();\n        _this._foundEdges = [];\n        _this._radius = EShapeDefaults.SIZE_X * 2;\n        _this._scaleBound = 1;\n        _this._scaleBoundInverse = 1;\n        _this._type = EShapeAcceptorEdgeType.TAIL;\n        _this._x = 0;\n        _this._y = 0;\n        _this._ox = 0;\n        _this._oy = 0;\n        _this._isDirty = false;\n        _this._isBegan = false;\n        _this._doUpdateBound = function () {\n            _this._timeout = null;\n            if (_this._isDirty) {\n                _this._isDirty = false;\n                if (_this._isBegan) {\n                    _this.visible = true;\n                    _this.doUpdate();\n                }\n            }\n        };\n        return _this;\n    }\n    EToolShapeAcceptorEdgeRenderer.prototype.newCircles = function () {\n        var result = [];\n        var color = EShapeDefaults.STROKE_COLOR;\n        var alpha = EShapeDefaults.STROKE_ALPHA;\n        for (var i = 0, imax = 64; i < imax; ++i) {\n            var shape = new EShapeCircle();\n            shape.stroke.set(false);\n            shape.fill.set(true, color, alpha);\n            shape.visible = false;\n            shape.attach(this);\n            result.push(shape);\n        }\n        return result;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.begin = function (canvas) {\n        canvas.addChild(this);\n        var layer = canvas.layer.active;\n        if (layer != null) {\n            var position = layer.transform.position;\n            this._ox = position.x;\n            this._oy = position.y;\n        }\n        else {\n            this._ox = 0;\n            this._oy = 0;\n        }\n        this.visible = false;\n        this._isBegan = true;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.end = function () {\n        var parent = this.parent;\n        if (parent != null) {\n            parent.removeChild(this);\n        }\n        this.visible = false;\n        this._isBegan = false;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.onPrerender = function () {\n        var scale0 = this.getParentScale();\n        var scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            var size = this.getCircleSize();\n            var circles = this._circles;\n            for (var i = 0, imax = circles.length; i < imax; ++i) {\n                circles[i].size.set(size, size);\n            }\n        }\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.render = function (renderer) {\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n            return;\n        }\n        this.onPrerender();\n        _super.prototype.render.call(this, renderer);\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.getParentScale = function () {\n        var parent = this.parent;\n        if (parent != null) {\n            return parent.scale.y;\n        }\n        return 1;\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.getCircleSize = function () {\n        return 10 * Math.min(1, this._scaleBoundInverse);\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.update = function (type, x, y) {\n        if (this._isBegan) {\n            this._type = type;\n            this._x = x;\n            this._y = y;\n            if (this._timeout == null) {\n                this.visible = true;\n                this.doUpdate();\n                this._timeout = window.setTimeout(this._doUpdateBound, 100);\n            }\n            else {\n                this._isDirty = true;\n            }\n        }\n    };\n    EToolShapeAcceptorEdgeRenderer.prototype.doUpdate = function () {\n        var radius = this._radius;\n        var circles = this._circles;\n        var circlesLength = circles.length;\n        var edges = this._foundEdges;\n        this._edge.findAll(this._type, this._x, this._y, radius, circlesLength, edges);\n        var edgesLength = edges.length;\n        var ox = this._ox;\n        var oy = this._oy;\n        var size = this.getCircleSize();\n        var isize = Math.min(circlesLength, edgesLength);\n        var distance = radius * radius;\n        for (var i = 0; i < isize; ++i) {\n            var edge = edges[i];\n            var edgeCenter = edge.center;\n            var circle = circles[i];\n            circle.lock(EShapeLockPart.UPLOADED);\n            circle.transform.position.set(ox + edgeCenter.x, oy + edgeCenter.y);\n            circle.size.set(size, size);\n            circle.fill.alpha = 0.5 * Math.max(0, 1 - edge.distance / distance);\n            circle.visible = true;\n            circle.unlock(EShapeLockPart.UPLOADED, true);\n        }\n        for (var i = isize; i < circlesLength; ++i) {\n            circles[i].visible = false;\n        }\n        DApplications.update(this);\n    };\n    return EToolShapeAcceptorEdgeRenderer;\n}(EShapeContainer));\nexport { EToolShapeAcceptorEdgeRenderer };\n//# sourceMappingURL=e-tool-shape-acceptor-edge-renderer.js.map","import { EShapeAcceptors, EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { Matrix, Point } from \"pixi.js\";\nimport { EToolShapeAcceptorEdgeRenderer } from \"./e-tool-shape-acceptor-edge-renderer\";\nvar SIZE = 10;\nvar EToolShapeAcceptorEdge = /** @class */ (function () {\n    function EToolShapeAcceptorEdge(diagram, canvasMode) {\n        this._diagram = diagram;\n        this._canvasMode = canvasMode;\n        this._renderer = new EToolShapeAcceptorEdgeRenderer(this);\n        this._work = new Set();\n    }\n    EToolShapeAcceptorEdge.prototype.begin = function (canvas, shape) {\n        this.clear();\n        this._shape = shape;\n        if (canvas != null) {\n            this._renderer.begin(canvas);\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.end = function () {\n        this._renderer.end();\n        this.clear();\n    };\n    EToolShapeAcceptorEdge.prototype.update = function (type, x, y) {\n        this._renderer.update(type, x, y);\n    };\n    EToolShapeAcceptorEdge.prototype.show = function () {\n        this._renderer.visible = true;\n    };\n    EToolShapeAcceptorEdge.prototype.hide = function () {\n        this._renderer.visible = false;\n    };\n    Object.defineProperty(EToolShapeAcceptorEdge.prototype, \"edges\", {\n        get: function () {\n            var result = this._edges;\n            if (result == null) {\n                result = this.newEdges();\n                this._edges = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeAcceptorEdge.prototype.newEdges = function () {\n        var result = new Map();\n        var layer = this._diagram.layer;\n        if (layer) {\n            var layerPositionX = 0;\n            var layerPositionY = 0;\n            if (this._canvasMode) {\n                var layerPosition = layer.transform.position;\n                layerPositionX = layerPosition.x;\n                layerPositionY = layerPosition.y;\n            }\n            var shape = this._shape;\n            if (shape != null) {\n                var shapeParent = shape.parent;\n                if (shapeParent != null) {\n                    this.addAll(shapeParent.children, layerPositionX, layerPositionY, result);\n                }\n            }\n            else {\n                this.addAll(layer.children, layerPositionX, layerPositionY, result);\n            }\n        }\n        return result;\n    };\n    EToolShapeAcceptorEdge.prototype.addAll = function (shapes, lx, ly, result) {\n        var _this = this;\n        var _loop_1 = function (i, imax) {\n            var shape = shapes[i];\n            if (!(shape instanceof EShapeConnectorLine)) {\n                var size = shape.size;\n                var sx = size.x;\n                var sy = size.y;\n                var transform = shape.transform;\n                var internal = transform.internalTransform;\n                var a = internal.a;\n                var b = internal.b;\n                var c = internal.c;\n                var d = internal.d;\n                var pivot = transform.pivot;\n                var px = pivot.x;\n                var py = pivot.y;\n                var matrix_1 = new Matrix(a * sx, b * sx, c * sy, d * sy, internal.tx + lx + (a * px + c * py), internal.ty + ly + (b * px + d * py));\n                EShapeAcceptors.get(shape.type).each(shape, function (edge, id) {\n                    _this.add(matrix_1, id, edge, shape, result);\n                });\n                if (EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN)) {\n                    var children = shape.children;\n                    if (children) {\n                        this_1.addAll(children, lx, ly, result);\n                    }\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            _loop_1(i, imax);\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.add = function (matrix, id, acceptorEdge, shape, coordinateToEdges) {\n        var aes = acceptorEdge.size;\n        var aesx = aes.x;\n        var aesy = aes.y;\n        var aex = acceptorEdge.x;\n        var aey = acceptorEdge.y;\n        var a = matrix.a;\n        var b = matrix.b;\n        var c = matrix.c;\n        var d = matrix.d;\n        var tx = matrix.tx;\n        var ty = matrix.ty;\n        var x = a * aex + c * aey + tx;\n        var y = b * aex + d * aey + ty;\n        var edge = {\n            shape: shape,\n            id: id,\n            x: null,\n            y: null,\n            acceptor: acceptorEdge,\n            matrix: matrix,\n            local: new Point(x, y),\n            center: new Point(x, y),\n            distance: 0\n        };\n        if (aesx === 0 && aesy === 0) {\n            var gx = this.toGridIndex(x);\n            var gy = this.toGridIndex(y);\n            var coordinate = this.toCoordinate(gx, gy);\n            var edges = coordinateToEdges.get(coordinate);\n            if (edges == null) {\n                coordinateToEdges.set(coordinate, [edge]);\n            }\n            else {\n                edges.push(edge);\n            }\n        }\n        else {\n            var aesxh = aesx * 0.5;\n            var aesyh = aesy * 0.5;\n            var aex0 = aex - aesxh;\n            var aey0 = aey - aesyh;\n            var aex1 = aex + aesxh;\n            var aey1 = aey - aesyh;\n            var aex2 = aex + aesxh;\n            var aey2 = aey + aesyh;\n            var aex3 = aex - aesxh;\n            var aey3 = aey + aesyh;\n            var x0 = a * aex0 + c * aey0;\n            var y0 = b * aex0 + d * aey0;\n            var x1 = a * aex1 + c * aey1;\n            var y1 = b * aex1 + d * aey1;\n            var x2 = a * aex2 + c * aey2;\n            var y2 = b * aex2 + d * aey2;\n            var x3 = a * aex3 + c * aey3;\n            var y3 = b * aex3 + d * aey3;\n            var x4 = Math.min(x0, x1, x2, x3) + tx;\n            var y4 = Math.min(y0, y1, y2, y3) + ty;\n            var x5 = Math.max(x0, x1, x2, x3) + tx;\n            var y5 = Math.max(y0, y1, y2, y3) + ty;\n            var ix0 = Math.floor(x4 / SIZE);\n            var iy0 = Math.floor(y4 / SIZE);\n            var ix1 = Math.ceil(x5 / SIZE);\n            var iy1 = Math.ceil(y5 / SIZE);\n            for (var ix = ix0; ix <= ix1; ++ix) {\n                for (var iy = iy0; iy <= iy1; ++iy) {\n                    var coordinate = this.toCoordinate(ix, iy);\n                    var edges = coordinateToEdges.get(coordinate);\n                    if (edges == null) {\n                        coordinateToEdges.set(coordinate, [edge]);\n                    }\n                    else {\n                        edges.push(edge);\n                    }\n                }\n            }\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.toCoordinate = function (ix, iy) {\n        return (ix % 1024) + (iy % 1024 << 10);\n    };\n    EToolShapeAcceptorEdge.prototype.toGridIndex = function (x) {\n        return Math.round(x / SIZE);\n    };\n    EToolShapeAcceptorEdge.prototype.find = function (type, x, y) {\n        var result = null;\n        var distance = 0;\n        var edges = this.edges;\n        var threshold = SIZE * SIZE;\n        for (var ix = -SIZE; ix <= SIZE; ix += SIZE) {\n            for (var iy = -SIZE; iy <= SIZE; iy += SIZE) {\n                var gix = this.toGridIndex(x + ix);\n                var giy = this.toGridIndex(y + iy);\n                var foundEdges = edges.get(this.toCoordinate(gix, giy));\n                if (foundEdges == null) {\n                    continue;\n                }\n                for (var i = 0, imax = foundEdges.length; i < imax; ++i) {\n                    var foundEdge = foundEdges[i];\n                    var acceptorEdge = foundEdge.acceptor;\n                    if ((acceptorEdge.type & type) === 0) {\n                        continue;\n                    }\n                    var size = acceptorEdge.size;\n                    var sx = size.x;\n                    var sy = size.y;\n                    if (sx === 0 && sy === 0) {\n                        var center = foundEdge.center;\n                        var dx = x - center.x;\n                        var dy = y - center.y;\n                        var dd = dx * dx + dy * dy;\n                        if (dd <= threshold && (result == null || dd < distance)) {\n                            result = foundEdge;\n                            distance = dd;\n                        }\n                    }\n                    else {\n                        var matrix = foundEdge.matrix;\n                        var a = matrix.a;\n                        var b = matrix.b;\n                        var c = matrix.c;\n                        var d = matrix.d;\n                        var tx = matrix.tx;\n                        var ty = matrix.ty;\n                        var det = a * d - c * b;\n                        if (0.0000001 < Math.abs(det)) {\n                            var di = 1 / det;\n                            var xtx = x - tx;\n                            var yty = y - ty;\n                            var lx = (+d * xtx - c * yty) * di;\n                            var ly = (-b * xtx + a * yty) * di;\n                            var sxh = sx * 0.5;\n                            var syh = sy * 0.5;\n                            var aex = acceptorEdge.x;\n                            var aey = acceptorEdge.y;\n                            var lx0 = aex - sxh;\n                            var ly0 = aey - syh;\n                            var lx1 = aex + sxh;\n                            var ly1 = aey + syh;\n                            var lx2 = Math.min(lx1, Math.max(lx0, lx));\n                            var ly2 = Math.min(ly1, Math.max(ly0, ly));\n                            var x0 = a * lx2 + c * ly2 + tx;\n                            var y0 = b * lx2 + d * ly2 + ty;\n                            var dx = x - x0;\n                            var dy = y - y0;\n                            var dd = dx * dx + dy * dy;\n                            if (dd <= threshold && (result == null || dd < distance)) {\n                                result = foundEdge;\n                                result.x = lx2;\n                                result.y = ly2;\n                                result.local.set(x0, y0);\n                                distance = dd;\n                            }\n                        }\n                        else {\n                            var center = foundEdge.center;\n                            var dx = x - center.x;\n                            var dy = y - center.y;\n                            var dd = dx * dx + dy * dy;\n                            if (dd <= threshold && (result == null || dd < distance)) {\n                                result = foundEdge;\n                                distance = dd;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    EToolShapeAcceptorEdge.prototype.findAll = function (type, x, y, range, limit, result) {\n        var edges = this.edges;\n        range = Math.ceil(range / SIZE) * SIZE;\n        var threshold = range * range;\n        var work = this._work;\n        work.clear();\n        this.findAllS1(type, x, y, 0, 0, edges, threshold, work);\n        for (var ir = SIZE; ir <= range && work.size < limit; ir += SIZE) {\n            this.findAllS2(type, x, y, edges, threshold, ir, work);\n        }\n        var iresult = -1;\n        work.forEach(function (found) {\n            result[++iresult] = found;\n        });\n        result.length = work.size;\n        result.sort(this.compare);\n        return result;\n    };\n    EToolShapeAcceptorEdge.prototype.findAllS2 = function (type, x, y, edges, threshold, radius, result) {\n        for (var dx = -radius; dx <= radius; dx += SIZE) {\n            this.findAllS1(type, x, y, dx, -radius, edges, threshold, result);\n            this.findAllS1(type, x, y, dx, +radius, edges, threshold, result);\n        }\n        for (var dy = -radius + SIZE, iymax = radius - SIZE; dy <= iymax; dy += SIZE) {\n            this.findAllS1(type, x, y, -radius, dy, edges, threshold, result);\n            this.findAllS1(type, x, y, +radius, dy, edges, threshold, result);\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.findAllS1 = function (type, x, y, dx, dy, edges, threshold, result) {\n        var gix = this.toGridIndex(x + dx);\n        var giy = this.toGridIndex(y + dy);\n        var foundEdges = edges.get(this.toCoordinate(gix, giy));\n        if (foundEdges) {\n            for (var i = 0, imax = foundEdges.length; i < imax; ++i) {\n                var foundEdge = foundEdges[i];\n                if (foundEdge.acceptor.type & type) {\n                    var foundEdgeLocal = foundEdge.local;\n                    var sx = x - foundEdgeLocal.x;\n                    var sy = y - foundEdgeLocal.y;\n                    var sd = sx * sx + sy * sy;\n                    if (sd <= threshold) {\n                        foundEdge.distance = sd;\n                        result.add(foundEdge);\n                    }\n                }\n            }\n        }\n    };\n    EToolShapeAcceptorEdge.prototype.compare = function (a, b) {\n        var ad = a.distance;\n        var bd = b.distance;\n        return ad < bd ? -1 : ad > bd ? +1 : 0;\n    };\n    EToolShapeAcceptorEdge.prototype.clear = function () {\n        this._edges = undefined;\n    };\n    return EToolShapeAcceptorEdge;\n}());\nexport { EToolShapeAcceptorEdge };\n//# sourceMappingURL=e-tool-shape-acceptor-edge.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeConnectorLine, EShapePointsMarkerType, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nimport { EToolShapeAcceptorEdge } from \"./e-tool-shape-acceptor-edge\";\nexport var EToolShapeCreateLineConnectorPhase = {\n    OFF: -1,\n    TAIL: 0,\n    HEAD: 1,\n    DONE: 2\n};\nvar EToolShapeCreateLineConnector = /** @class */ (function (_super) {\n    __extends(EToolShapeCreateLineConnector, _super);\n    function EToolShapeCreateLineConnector(options) {\n        var _this = _super.call(this) || this;\n        _this._options = options;\n        _this._selection = options.selection;\n        _this._diagram = options.diagram;\n        _this._edge = new EToolShapeAcceptorEdge(options.diagram, false);\n        _this._newShape = options.newShape || (function () { return _this.newShape(); });\n        _this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n        _this._work = new Point();\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        _this._onKeyDownBound = function (e) {\n            _this.onKeyDown(e);\n        };\n        _this._onSetBound = function (canvas) {\n            _this.onSet(canvas);\n        };\n        _this._onUnsetBound = function (canvas) {\n            _this.onUnset(canvas);\n        };\n        return _this;\n    }\n    EToolShapeCreateLineConnector.prototype.onActivate = function () {\n        this._phase = EToolShapeCreateLineConnectorPhase.TAIL;\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.on(UtilPointerEvent.down, this._onDownBound);\n            diagram.on(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.on(UtilPointerEvent.up, onUpBound);\n            interactionManager.on(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.on(UtilPointerEvent.cancel, onUpBound);\n            diagram.on(\"keydown\", this._onKeyDownBound);\n            diagram.on(\"set\", this._onSetBound);\n            diagram.on(\"unset\", this._onUnsetBound);\n        }\n        this._edge.begin(diagram.canvas, null);\n        var selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    };\n    EToolShapeCreateLineConnector.prototype.onDeactivate = function () {\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.off(UtilPointerEvent.down, this._onDownBound);\n            diagram.off(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n            diagram.off(\"keydown\", this._onKeyDownBound);\n            diagram.off(\"set\", this._onSetBound);\n            diagram.off(\"unset\", this._onUnsetBound);\n        }\n        this._edge.end();\n        var selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n        var connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n    };\n    EToolShapeCreateLineConnector.prototype.onSet = function (canvas) {\n        this._edge.begin(canvas, null);\n    };\n    EToolShapeCreateLineConnector.prototype.onUnset = function (canvas) {\n        this._edge.end();\n        var connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        this._phase = EToolShapeCreateLineConnectorPhase.TAIL;\n    };\n    EToolShapeCreateLineConnector.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        switch (this._phase) {\n            case EToolShapeCreateLineConnectorPhase.OFF:\n                break;\n            case EToolShapeCreateLineConnectorPhase.TAIL:\n                if (this.onTail(e)) {\n                    this._phase = EToolShapeCreateLineConnectorPhase.HEAD;\n                }\n                break;\n            case EToolShapeCreateLineConnectorPhase.HEAD:\n                if (this.onHead(e)) {\n                    this._phase = EToolShapeCreateLineConnectorPhase.DONE;\n                }\n                break;\n            case EToolShapeCreateLineConnectorPhase.DONE:\n                break;\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        switch (this._phase) {\n            case EToolShapeCreateLineConnectorPhase.OFF:\n                break;\n            case EToolShapeCreateLineConnectorPhase.TAIL:\n                this.onTail(e);\n                break;\n            case EToolShapeCreateLineConnectorPhase.HEAD:\n                this.onHead(e);\n                break;\n            case EToolShapeCreateLineConnectorPhase.DONE:\n                break;\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onUp = function (e) {\n        this.onDone();\n    };\n    EToolShapeCreateLineConnector.prototype.onTail = function (e) {\n        var diagram = this._diagram;\n        var layer = diagram.layer;\n        if (layer) {\n            var connector = this._connector;\n            var global_1 = e.data.global;\n            var local = layer.toLocal(global_1, undefined, this._work);\n            var edge = this._edge.find(EShapeAcceptorEdgeType.TAIL, local.x, local.y);\n            this._edge.update(EShapeAcceptorEdgeType.TAIL, local.x, local.y);\n            if (this.isTailAccepted(connector, local, edge)) {\n                if (connector == null) {\n                    connector = this._newShape();\n                    connector.fill.alpha = 1;\n                    this._connector = connector;\n                    connector.attach(layer);\n                }\n                this.onTailAccepted(connector, local, edge);\n                DApplications.update(diagram);\n                return true;\n            }\n            else {\n                if (connector != null) {\n                    this.onTailUnaccepted(connector, local);\n                    DApplications.update(diagram);\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EToolShapeCreateLineConnector.prototype.isDanglingEdgeAllowed = function () {\n        var _a;\n        return (_a = this._options.dangling) !== null && _a !== void 0 ? _a : false;\n    };\n    EToolShapeCreateLineConnector.prototype.isTailAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.getTailType = function () {\n        return EShapePointsMarkerType.CIRCLE;\n    };\n    EToolShapeCreateLineConnector.prototype.onTailAccepted = function (connector, local, edge) {\n        connector.points.marker.tail.type = this.getTailType();\n        if (edge != null) {\n            connector.edge.tail.set(edge.shape, edge.id, edge.x, edge.y, 0, edge.local.x, edge.local.y, undefined, undefined, edge.acceptor.side);\n            connector.edge.head.local.copyFrom(edge.local);\n        }\n        else {\n            connector.edge.tail.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n            connector.edge.head.local.copyFrom(local);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onTailUnaccepted = function (connector, local) {\n        connector.points.marker.tail.type = EShapePointsMarkerType.NONE;\n        connector.edge.tail.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        connector.edge.head.local.copyFrom(local);\n    };\n    EToolShapeCreateLineConnector.prototype.newShape = function () {\n        var result = new EShapeConnectorLine();\n        result.fill.alpha = 1;\n        return result;\n    };\n    EToolShapeCreateLineConnector.prototype.onHead = function (e) {\n        var diagram = this._diagram;\n        var layer = diagram.layer;\n        if (layer) {\n            var connector = this._connector;\n            if (connector) {\n                var global_2 = e.data.global;\n                var local = layer.toLocal(global_2, undefined, this._work);\n                var edge = this._edge.find(EShapeAcceptorEdgeType.HEAD, local.x, local.y);\n                this._edge.update(EShapeAcceptorEdgeType.HEAD, local.x, local.y);\n                if (this.isHeadAccepted(connector, local, edge)) {\n                    this.onHeadAccepted(connector, local, edge);\n                    DApplications.update(diagram);\n                    return true;\n                }\n                else {\n                    this.onHeadUnaccepted(connector, local);\n                    DApplications.update(diagram);\n                    return false;\n                }\n            }\n        }\n        return false;\n    };\n    EToolShapeCreateLineConnector.prototype.isHeadAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return !this.isSameAcceptor(connector.edge.tail.acceptor, edge);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.isSameAcceptor = function (a, b) {\n        return a.shape === b.shape && a.edge === b.id && a.x === b.x && a.y === b.y;\n    };\n    EToolShapeCreateLineConnector.prototype.getHeadType = function () {\n        return EShapePointsMarkerType.TRIANGLE;\n    };\n    EToolShapeCreateLineConnector.prototype.onHeadAccepted = function (connector, local, edge) {\n        connector.points.marker.head.type = this.getHeadType();\n        if (edge != null) {\n            connector.edge.head.set(edge.shape, edge.id, edge.x, edge.y, 10, edge.local.x, edge.local.y, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.head.set(null, null, null, null, 10, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onHeadUnaccepted = function (connector, local) {\n        connector.points.marker.head.type = EShapePointsMarkerType.NONE;\n        connector.edge.head.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n    };\n    EToolShapeCreateLineConnector.prototype.onDone = function () {\n        if (this._phase === EToolShapeCreateLineConnectorPhase.DONE) {\n            this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n            var connector = this._connector;\n            if (connector) {\n                this._connector = undefined;\n                var diagram = this._diagram;\n                var layer = diagram.layer;\n                if (layer) {\n                    connector.edge.attach();\n                    DControllers.getCommandController().push(new ECommandShapeCreate([connector], layer, this._selection, true));\n                }\n                else {\n                    connector.detach();\n                    connector.destroy();\n                }\n                this.emit(\"done\", this);\n            }\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onCancel = function () {\n        var connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        if (this._phase !== EToolShapeCreateLineConnectorPhase.OFF) {\n            this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n            this.emit(\"cancel\", this);\n        }\n    };\n    EToolShapeCreateLineConnector.prototype.onKeyDown = function (e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onCancel();\n        }\n    };\n    return EToolShapeCreateLineConnector;\n}(EToolImpl));\nexport { EToolShapeCreateLineConnector };\n//# sourceMappingURL=e-tool-shape-create-line-connector.js.map","import { __extends } from \"tslib\";\nimport { EShapeConnectorElbow } from \"@wcardinal/wcardinal-ui\";\nimport { EToolShapeCreateLineConnector } from \"./e-tool-shape-create-line-connector\";\nvar EToolShapeCreateElbowConnector = /** @class */ (function (_super) {\n    __extends(EToolShapeCreateElbowConnector, _super);\n    function EToolShapeCreateElbowConnector() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EToolShapeCreateElbowConnector.prototype.newShape = function () {\n        var result = new EShapeConnectorElbow();\n        result.fill.alpha = 1;\n        return result;\n    };\n    return EToolShapeCreateElbowConnector;\n}(EToolShapeCreateLineConnector));\nexport { EToolShapeCreateElbowConnector };\n//# sourceMappingURL=e-tool-shape-create-elbow-connector.js.map","import { __extends } from \"tslib\";\nimport { createLine, DApplications, DControllers, EShapeDefaults, EShapePointsStyle, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nvar EToolShapeCreateLine = /** @class */ (function (_super) {\n    __extends(EToolShapeCreateLine, _super);\n    function EToolShapeCreateLine(options) {\n        var _this = _super.call(this) || this;\n        _this._options = options;\n        _this._selection = options.selection;\n        _this._diagram = options.diagram;\n        _this._isNewPoint = false;\n        _this._onDownPoint = new Point();\n        _this._onMovePoint = new Point();\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onDblClickBound = function () {\n            _this.onDblClick();\n        };\n        _this._onKeydownBound = function (e) {\n            _this.onKeydown(e);\n        };\n        return _this;\n    }\n    EToolShapeCreateLine.prototype.onActivate = function () {\n        var diagram = this._diagram;\n        diagram.on(UtilPointerEvent.down, this._onDownBound);\n        diagram.on(UtilPointerEvent.move, this._onMoveBound);\n        diagram.on(\"dblclick\", this._onDblClickBound);\n        diagram.on(\"keydown\", this._onKeydownBound);\n        var selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    };\n    EToolShapeCreateLine.prototype.onDeactivate = function () {\n        var diagram = this._diagram;\n        diagram.off(UtilPointerEvent.down, this._onDownBound);\n        diagram.off(UtilPointerEvent.move, this._onMoveBound);\n        diagram.off(\"dblclick\", this._onDblClickBound);\n        diagram.off(\"keydown\", this._onKeydownBound);\n        this.onCancel();\n        var selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n    };\n    EToolShapeCreateLine.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this._diagram;\n        var canvas = diagram.canvas;\n        var layer = diagram.layer;\n        if (canvas && layer) {\n            this._isNewPoint = true;\n            var line = this._line;\n            if (line == null) {\n                var onDownPoint = this._onDownPoint;\n                canvas.toLocal(e.data.global, undefined, onDownPoint);\n                diagram.snapper.toSnapped(onDownPoint, onDownPoint);\n                layer.transform.localTransform.applyInverse(onDownPoint, onDownPoint);\n                var newLine = createLine([onDownPoint.x, onDownPoint.y], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n                newLine.attach(layer);\n                this._line = newLine;\n            }\n        }\n    };\n    EToolShapeCreateLine.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var line = this._line;\n        if (line) {\n            var diagram = this._diagram;\n            var canvas = diagram.canvas;\n            if (canvas) {\n                var values = line.points.values;\n                if (this._isNewPoint) {\n                    this._isNewPoint = false;\n                    values.push(0, 0);\n                }\n                var onMovePoint = this._onMovePoint;\n                canvas.toLocal(e.data.global, undefined, onMovePoint);\n                diagram.snapper.toSnapped(onMovePoint, onMovePoint);\n                var parent_1 = line.parent;\n                if (parent_1) {\n                    parent_1.transform.localTransform.applyInverse(onMovePoint, onMovePoint);\n                }\n                var position = line.transform.position;\n                var x = onMovePoint.x - position.x;\n                var y = onMovePoint.y - position.y;\n                var length_1 = values.length;\n                if (originalEvent.shiftKey && 4 <= length_1) {\n                    var px = values[length_1 - 4];\n                    var py = values[length_1 - 3];\n                    var dx = x - px;\n                    var dy = y - py;\n                    var dangle = Math.PI * 0.25;\n                    var angle = Math.round(Math.atan2(dy, dx) / dangle) * dangle;\n                    var d = Math.sqrt(dx * dx + dy * dy) | 0;\n                    values[length_1 - 2] = px + d * Math.cos(angle);\n                    values[length_1 - 1] = py + d * Math.sin(angle);\n                }\n                else {\n                    values[length_1 - 2] = x | 0;\n                    values[length_1 - 1] = y | 0;\n                }\n                line.points.values = values;\n                DApplications.update(diagram);\n            }\n        }\n    };\n    EToolShapeCreateLine.prototype.toValues = function (line) {\n        var position = line.transform.position;\n        var px = position.x;\n        var py = position.y;\n        var values = line.points.values;\n        var result = [];\n        var prevx = NaN;\n        var prevy = NaN;\n        for (var i = 0, imax = values.length; i < imax; i += 2) {\n            var x = values[i + 0];\n            var y = values[i + 1];\n            if (prevx !== x || prevy !== y) {\n                result.push(px + x, py + y);\n                prevx = x;\n                prevy = y;\n            }\n        }\n        return result;\n    };\n    EToolShapeCreateLine.prototype.add = function (values) {\n        var diagram = this._diagram;\n        var layer = diagram.layer;\n        if (layer && 4 <= values.length) {\n            var newLine = createLine(values, [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n            newLine.attach(layer);\n            DControllers.getCommandController().push(new ECommandShapeCreate([newLine], layer, this._selection, true));\n        }\n    };\n    EToolShapeCreateLine.prototype.onDblClick = function () {\n        var line = this._line;\n        if (line) {\n            this._line = undefined;\n            line.detach();\n            this.add(this.toValues(line));\n            DApplications.update(this._diagram);\n            this.emit(\"done\", this);\n        }\n    };\n    EToolShapeCreateLine.prototype.onCancel = function () {\n        var line = this._line;\n        if (line) {\n            line.points.values.length -= 2;\n            this.onDblClick();\n        }\n    };\n    EToolShapeCreateLine.prototype.onKeydown = function (e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onCancel();\n        }\n    };\n    return EToolShapeCreateLine;\n}(EToolImpl));\nexport { EToolShapeCreateLine };\n//# sourceMappingURL=e-tool-shape-create-line.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, toResized, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nvar EToolShapeCreate = /** @class */ (function (_super) {\n    __extends(EToolShapeCreate, _super);\n    function EToolShapeCreate(selection, diagram) {\n        var _this = _super.call(this) || this;\n        _this._selection = selection;\n        _this._diagram = diagram;\n        _this._applicationLayer = null;\n        _this._onDownPoint = new Point();\n        _this._onMovePoint = new Point();\n        _this._shape = null;\n        _this._creator = undefined;\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        return _this;\n    }\n    Object.defineProperty(EToolShapeCreate.prototype, \"shape\", {\n        get: function () {\n            return this._creator;\n        },\n        set: function (creator) {\n            this._creator = creator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeCreate.prototype.onActivate = function () {\n        this._diagram.on(UtilPointerEvent.down, this._onDownBound);\n    };\n    EToolShapeCreate.prototype.onDeactivate = function () {\n        this._diagram.off(UtilPointerEvent.down, this._onDownBound);\n        this.onDone();\n    };\n    EToolShapeCreate.prototype.onDown = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var selection = this._selection;\n        var diagram = this._diagram;\n        var diagramLayer = diagram.layer;\n        var creator = this._creator;\n        if (diagramLayer != null && creator != null && this._shape == null) {\n            var onDownPoint = diagramLayer.toLocal(e.data.global, undefined, this._onDownPoint);\n            diagram.snapper.toSnapped(onDownPoint, onDownPoint);\n            this._onMovePoint.copyFrom(onDownPoint);\n            var shape = (this._shape = creator());\n            toResized(shape, onDownPoint, onDownPoint, originalEvent.ctrlKey, originalEvent.shiftKey);\n            shape.attach(diagramLayer);\n            selection.modifier.disallow();\n            DControllers.getCommandController().push(new ECommandShapeCreate([shape], diagramLayer, this._selection, true));\n            var oldApplicationLayer = this._applicationLayer;\n            if (oldApplicationLayer) {\n                this._applicationLayer = null;\n                var oldInteractionManager = oldApplicationLayer.renderer.plugins.interaction;\n                oldInteractionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                var onUpBound = this._onUpBound;\n                oldInteractionManager.off(UtilPointerEvent.up, onUpBound);\n                oldInteractionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                oldInteractionManager.off(UtilPointerEvent.cancel, onUpBound);\n            }\n            var newApplicationLayer = DApplications.getLayer(diagram);\n            if (newApplicationLayer) {\n                this._applicationLayer = newApplicationLayer;\n                var newInteractionManager = newApplicationLayer.renderer.plugins.interaction;\n                newInteractionManager.on(UtilPointerEvent.move, this._onMoveBound);\n                var onUpBound = this._onUpBound;\n                newInteractionManager.on(UtilPointerEvent.up, onUpBound);\n                newInteractionManager.on(UtilPointerEvent.upoutside, onUpBound);\n                newInteractionManager.on(UtilPointerEvent.cancel, onUpBound);\n            }\n        }\n    };\n    EToolShapeCreate.prototype.onMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var shape = this._shape;\n        if (shape) {\n            var diagram = this._diagram;\n            var diagramLayer = diagram.layer;\n            var selection = this._selection;\n            var applicationLayer = this._applicationLayer;\n            if (diagramLayer && applicationLayer) {\n                applicationLayer.lock();\n                var onDownPoint = this._onDownPoint;\n                var onMovePoint = diagramLayer.toLocal(e.data.global, undefined, this._onMovePoint);\n                diagram.snapper.toSnapped(onMovePoint, onMovePoint);\n                toResized(shape, onDownPoint, onMovePoint, originalEvent.ctrlKey, originalEvent.shiftKey);\n                selection.update(\"PROPERTY\");\n                applicationLayer.unlock();\n                applicationLayer.update();\n            }\n        }\n    };\n    EToolShapeCreate.prototype.onUp = function (e) {\n        this.onDone();\n    };\n    EToolShapeCreate.prototype.onDone = function () {\n        var shape = this._shape;\n        if (shape) {\n            this._shape = null;\n            var selection = this._selection;\n            var onDownPoint = this._onDownPoint;\n            var onMovePoint = this._onMovePoint;\n            var applicationLayer = this._applicationLayer;\n            if (applicationLayer) {\n                this._applicationLayer = null;\n                var interactionManager = applicationLayer.renderer.plugins.interaction;\n                interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                var onUpBound = this._onUpBound;\n                interactionManager.off(UtilPointerEvent.up, onUpBound);\n                interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n                applicationLayer.lock();\n                if (onDownPoint.x === onMovePoint.x && onDownPoint.y === onMovePoint.y) {\n                    onMovePoint.set(onDownPoint.x + 100, onDownPoint.y + 100);\n                    toResized(shape, onDownPoint, onMovePoint, false, false);\n                }\n                selection.modifier.allow();\n                selection.update(\"PROPERTY\");\n                applicationLayer.unlock();\n                applicationLayer.update();\n            }\n            this.emit(\"done\", this);\n        }\n    };\n    return EToolShapeCreate;\n}(EToolImpl));\nexport { EToolShapeCreate };\n//# sourceMappingURL=e-tool-shape-create.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nvar EToolShapeEditLineHitArea = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLineHitArea, _super);\n    function EToolShapeEditLineHitArea(parent) {\n        var _this = _super.call(this) || this;\n        _this._parent = parent;\n        _this._capability = EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n        return _this;\n    }\n    Object.defineProperty(EToolShapeEditLineHitArea.prototype, \"capability\", {\n        get: function () {\n            return this._capability;\n        },\n        set: function (capability) {\n            this._capability = capability;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeEditLineHitArea.prototype.contains = function (x, y) {\n        var parent = this._parent;\n        if (parent.isEditing()) {\n            return true;\n        }\n        var points = parent.points;\n        var pointsClosed = parent.closed;\n        var capability = this._capability;\n        var hasTail = !!(capability & EShapeCapability.LINE_TAIL);\n        var hasHead = !!(capability & EShapeCapability.LINE_HEAD);\n        // Anchors\n        var s = parent.getAnchorSize() * 2;\n        var thresholdLine = s * s;\n        var thresholdAnchor = thresholdLine * 2;\n        for (var i = hasTail ? 0 : 1, imax = points.length - (hasHead ? 0 : 1); i < imax; ++i) {\n            var point = points[i];\n            var dx = point.x - x;\n            var dy = point.y - y;\n            var d = dx * dx + dy * dy;\n            if (d < thresholdAnchor) {\n                parent.setLastHitAnchor(i);\n                return true;\n            }\n        }\n        // Lines\n        for (var i = 0, imax = points.length - 1; i < imax; ++i) {\n            var p0 = points[i + 0];\n            var p1 = points[i + 1];\n            var hitPoint = this.calcHitPoint(x, y, p0.x, p0.y, p1.x, p1.y, thresholdLine);\n            if (0 <= hitPoint) {\n                parent.setLastHitSegment(i, hitPoint);\n                return true;\n            }\n        }\n        if (hasTail && hasHead && pointsClosed) {\n            var p0 = points[points.length - 1];\n            var p1 = points[0];\n            var hitPoint = this.calcHitPoint(x, y, p0.x, p0.y, p1.x, p1.y, thresholdLine);\n            if (0 <= hitPoint) {\n                parent.setLastHitSegment(points.length - 1, hitPoint);\n                return true;\n            }\n        }\n        parent.setLastHitSegment(-1, -1);\n        return false;\n    };\n    EToolShapeEditLineHitArea.prototype.calcHitPoint = function (x, y, p0x, p0y, p1x, p1y, threshold) {\n        var d0x = p1x - p0x;\n        var d0y = p1y - p0y;\n        var d1x = x - p0x;\n        var d1y = y - p0y;\n        var a = d0x * d0x + d0y * d0y;\n        var b = d0x * d1x + d0y * d1y;\n        var c = d1x * d1x + d1y * d1y;\n        if (0.0001 < a) {\n            var t = Math.max(0, Math.min(1, b / a));\n            var d = a * t * t - 2 * b * t + c;\n            if (d < threshold) {\n                return t;\n            }\n        }\n        return -1;\n    };\n    return EToolShapeEditLineHitArea;\n}(Rectangle));\nexport { EToolShapeEditLineHitArea };\n//# sourceMappingURL=e-tool-shape-edit-line-base-hit-area.js.map","import { __extends } from \"tslib\";\nimport { DApplications, DControllers, EShapeCapability, EShapePointsFormatters, EShapePointsStyle, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Graphics, Matrix, Point } from \"pixi.js\";\nimport { ECommandShapeReplaceOne } from \"../command/e-command-shape-replace-one\";\nimport { EToolShapeEditLineHitArea } from \"./e-tool-shape-edit-line-base-hit-area\";\nvar EToolShapeEditLineBase = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLineBase, _super);\n    function EToolShapeEditLineBase(options) {\n        var _this = _super.call(this) || this;\n        _this._options = options;\n        _this._selection = options.selection;\n        _this._diagram = options.diagram;\n        _this._onDownPoint = new Point();\n        _this._points = [];\n        _this._pointsStyle = EShapePointsStyle.NONE;\n        _this._onMovePoint = new Point();\n        _this._isEditing = false;\n        _this._isEdited = false;\n        _this._isActive = false;\n        _this._shape = null;\n        _this._capability = EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n        _this._scaleBound = 1;\n        _this._scaleBoundInverse = 1;\n        _this._lastHitAnchor = -1;\n        _this._lastHitSegment = -1;\n        _this._lastHitSegmentPosition = -1;\n        _this._targetCopy = new Point();\n        _this._target = null;\n        _this._targetIndex = -1;\n        _this._onDownBound = function (e) {\n            _this.onDown(e);\n        };\n        _this._onMoveBound = function (e) {\n            _this.onMove(e);\n        };\n        _this._onUpBound = function (e) {\n            _this.onUp(e);\n        };\n        _this._onKeydownBound = function (e) {\n            _this.onKeydown(e);\n        };\n        _this._onSetBound = function (canvas) {\n            _this.onSet(canvas);\n        };\n        _this._onUnsetBound = function (canvas) {\n            _this.onUnset(canvas);\n        };\n        _this.cursor = \"grab\";\n        _this.interactive = true;\n        _this.hitArea = new EToolShapeEditLineHitArea(_this);\n        _this._unformatted = {\n            length: 0,\n            plength: 0,\n            values: [],\n            segments: [],\n            style: EShapePointsStyle.NONE\n        };\n        _this._formatted = {\n            length: 0,\n            plength: 0,\n            values: [],\n            segments: [],\n            style: EShapePointsStyle.NONE\n        };\n        return _this;\n    }\n    EToolShapeEditLineBase.prototype.onPrerender = function () {\n        var scale0 = this.getParentScale();\n        var scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            this.reshape();\n        }\n    };\n    EToolShapeEditLineBase.prototype.getParentScale = function () {\n        var parent = this.parent;\n        return parent != null ? parent.scale.y : 1;\n    };\n    EToolShapeEditLineBase.prototype.render = function (renderer) {\n        this.onPrerender();\n        _super.prototype.render.call(this, renderer);\n    };\n    EToolShapeEditLineBase.prototype.getAnchorSize = function () {\n        return 6 * this._scaleBoundInverse;\n    };\n    EToolShapeEditLineBase.prototype.activate = function () {\n        if (!this._isActive) {\n            this._isActive = true;\n            this.onActivate();\n        }\n    };\n    EToolShapeEditLineBase.prototype.onActivate = function () {\n        this._isEditing = false;\n        this._isEdited = false;\n        this._target = null;\n        this._targetIndex = -1;\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.on(UtilPointerEvent.down, this._onDownBound);\n            interactionManager.on(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.on(UtilPointerEvent.up, onUpBound);\n            interactionManager.on(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.on(UtilPointerEvent.cancel, onUpBound);\n            diagram.on(\"keydown\", this._onKeydownBound);\n            diagram.on(\"set\", this._onSetBound);\n            diagram.on(\"unset\", this._onUnsetBound);\n        }\n        var selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    };\n    EToolShapeEditLineBase.prototype.deactivate = function () {\n        if (this._isActive) {\n            this._isActive = false;\n            this.onDeactivate();\n        }\n    };\n    EToolShapeEditLineBase.prototype.onDeactivate = function () {\n        this._isEditing = false;\n        this._isEdited = false;\n        this._target = null;\n        this._targetIndex = -1;\n        this.shape = null;\n        var diagram = this._diagram;\n        var layer = DApplications.getLayer(diagram);\n        if (layer) {\n            var interactionManager = layer.renderer.plugins.interaction;\n            diagram.off(UtilPointerEvent.down, this._onDownBound);\n            interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n            var onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n            diagram.off(\"keydown\", this._onKeydownBound);\n            diagram.off(\"set\", this._onSetBound);\n            diagram.off(\"unset\", this._onUnsetBound);\n        }\n        var selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n    };\n    EToolShapeEditLineBase.prototype.onSet = function (canvas) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.onUnset = function (canvas) {\n        this.onCancel();\n    };\n    EToolShapeEditLineBase.prototype.isActive = function () {\n        return this._isActive;\n    };\n    EToolShapeEditLineBase.prototype.isEditing = function () {\n        return this._isEditing;\n    };\n    Object.defineProperty(EToolShapeEditLineBase.prototype, \"points\", {\n        get: function () {\n            return this._points;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolShapeEditLineBase.prototype, \"closed\", {\n        get: function () {\n            return (this._pointsStyle & EShapePointsStyle.CLOSED) !== 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EToolShapeEditLineBase.prototype, \"shape\", {\n        get: function () {\n            return this._shape;\n        },\n        set: function (shape) {\n            var _a, _b;\n            if (this._shape !== shape) {\n                this._shape = shape;\n                var capability = this.toCapability(shape);\n                this.hitArea.capability = capability;\n                this._capability = capability;\n                this._isEdited = false;\n                if (shape == null) {\n                    this._points = [];\n                    this._pointsStyle = EShapePointsStyle.NONE;\n                    this._formatter = undefined;\n                    var parent_1 = this.parent;\n                    if (parent_1) {\n                        parent_1.removeChild(this);\n                        DApplications.update(this);\n                    }\n                }\n                else {\n                    var points = shape.points;\n                    if (points) {\n                        shape.updateTransform();\n                        this._points = this.toPoints(shape, points, this.toTransform(shape));\n                        var pointsStyle = points.style;\n                        this._pointsStyle = pointsStyle;\n                        this._formatter =\n                            (_a = points.formatter) !== null && _a !== void 0 ? _a : (_b = EShapePointsFormatters.find(pointsStyle)) === null || _b === void 0 ? void 0 : _b.formatter;\n                    }\n                    else {\n                        this._points = [];\n                        this._pointsStyle = EShapePointsStyle.NONE;\n                        this._formatter = undefined;\n                    }\n                    this.reshape();\n                    var canvas = this._diagram.canvas;\n                    if (canvas) {\n                        canvas.addChild(this);\n                    }\n                }\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EToolShapeEditLineBase.prototype.toTransform = function (shape) {\n        var _a;\n        var result = ((_a = this._workTransform) !== null && _a !== void 0 ? _a : (this._workTransform = new Matrix()));\n        result.copyFrom(shape.transform.internalTransform);\n        // If the layer this shape belongs to has a non-zero position,\n        // we have to take that into consideration.\n        var parent = shape.root.parent;\n        if (parent) {\n            result.prepend(parent.transform.localTransform);\n        }\n        return result;\n    };\n    EToolShapeEditLineBase.prototype.toPoints = function (shape, points, transform) {\n        var result = [];\n        var values = points.values;\n        for (var i = 0, imax = values.length; i < imax; i += 2) {\n            var point = new Point(values[i + 0], values[i + 1]);\n            result.push(transform.apply(point, point));\n        }\n        return result;\n    };\n    EToolShapeEditLineBase.prototype.setLastHitAnchor = function (index) {\n        if (this._lastHitAnchor !== index || this._lastHitSegment !== -1) {\n            this._lastHitAnchor = index;\n            this._lastHitSegment = -1;\n            this._lastHitSegmentPosition = -1;\n            this.reshape();\n            DApplications.update(this);\n        }\n    };\n    EToolShapeEditLineBase.prototype.setLastHitSegment = function (index, position) {\n        this._lastHitSegmentPosition = position;\n        if (this._lastHitAnchor !== -1 || this._lastHitSegment !== index) {\n            this._lastHitAnchor = -1;\n            this._lastHitSegment = index;\n            this.reshape();\n            DApplications.update(this);\n        }\n    };\n    EToolShapeEditLineBase.prototype.reshape = function () {\n        var graphics = this;\n        var points = this._points;\n        var pointsLength = points.length;\n        var pointsStyle = this._pointsStyle;\n        var formatter = this._formatter;\n        var pointsClosed = !!(pointsStyle & EShapePointsStyle.CLOSED);\n        var capability = this._capability;\n        var hasTail = !!(capability & EShapeCapability.LINE_TAIL);\n        var hasHead = !!(capability & EShapeCapability.LINE_HEAD);\n        graphics.clear();\n        if (0 < pointsLength) {\n            var s = this.getAnchorSize();\n            var hs = s * 0.5;\n            var color = 0x1e87f0;\n            var colorHit = 0xf36f27;\n            var colorFormatted = 0xaaaaaa;\n            var alpha = 1;\n            var alphaFormatted = 0.5;\n            var anchor = this._lastHitAnchor;\n            var segment = this._lastHitSegment;\n            // Formatted\n            if (formatter != null) {\n                var unformatted = this._unformatted;\n                var uvalues = unformatted.values;\n                var usegments = unformatted.segments;\n                for (var i = 0, j = 0; i < pointsLength; i += 1, j += 2) {\n                    var point = points[i];\n                    uvalues[j] = point.x;\n                    uvalues[j + 1] = point.y;\n                }\n                var formatted = this._formatted;\n                formatter(pointsLength, uvalues, usegments, pointsStyle, formatted);\n                var fvalues = formatted.values;\n                graphics.lineStyle(hs, colorFormatted, alphaFormatted);\n                if (0 < fvalues.length) {\n                    graphics.moveTo(fvalues[0], fvalues[1]);\n                    for (var i = 2, imax = fvalues.length; i < imax; i += 2) {\n                        graphics.lineTo(fvalues[i], fvalues[i + 1]);\n                    }\n                }\n            }\n            // Line\n            for (var i = 0, imax = pointsLength - 1; i < imax; ++i) {\n                var p0 = points[i];\n                var p1 = points[i + 1];\n                var c = segment === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.moveTo(p0.x, p0.y);\n                graphics.lineTo(p1.x, p1.y);\n            }\n            if (hasTail && hasHead && pointsClosed) {\n                var i = points.length - 1;\n                var p0 = points[i];\n                var p1 = points[0];\n                var c = segment === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.moveTo(p0.x, p0.y);\n                graphics.lineTo(p1.x, p1.y);\n            }\n            // Anchors\n            var targetIndex = this._targetIndex;\n            for (var i = hasTail ? 0 : 1, imax = pointsLength - (hasHead ? 0 : 1); i < imax; ++i) {\n                var point = points[i];\n                var c = anchor === i || targetIndex === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.beginFill(c, alpha);\n                graphics.drawRect(point.x - hs, point.y - hs, s, s);\n                graphics.endFill();\n            }\n        }\n    };\n    EToolShapeEditLineBase.prototype.replace = function () {\n        var oldShape = this._shape;\n        var points = this._points;\n        if (oldShape && oldShape.parent && 2 <= points.length) {\n            var values = this.toValues(points, oldShape);\n            if (2 < values.length) {\n                var newShape = this.newShape(values, [], this._pointsStyle, oldShape);\n                DControllers.getCommandController().push(new ECommandShapeReplaceOne(newShape, oldShape, oldShape.parent, this._selection));\n            }\n        }\n    };\n    EToolShapeEditLineBase.prototype.toValues = function (points, shape) {\n        shape.updateTransform();\n        var transform = this.toTransform(shape).invert();\n        var result = [];\n        var a = transform.a;\n        var b = transform.b;\n        var c = transform.c;\n        var d = transform.d;\n        var tx = transform.tx;\n        var ty = transform.ty;\n        var pprevx = NaN;\n        var pprevy = NaN;\n        for (var i = 0, imax = points.length; i < imax; ++i) {\n            var point = points[i];\n            var px = point.x;\n            var py = point.y;\n            if (pprevx !== px || pprevy !== py) {\n                var x = a * px + c * py + tx;\n                var y = b * px + d * py + ty;\n                result.push(x, y);\n                pprevx = x;\n                pprevy = y;\n            }\n        }\n        return result;\n    };\n    EToolShapeEditLineBase.prototype.onDown = function (e) {\n        if (e.target === this) {\n            var originalEvent = e.data.originalEvent;\n            if (originalEvent.altKey) {\n                return;\n            }\n            var diagram = this._diagram;\n            var canvas = diagram.canvas;\n            if (canvas != null && !this._isEditing) {\n                var lastHitAnchor = this._lastHitAnchor;\n                var points = this._points;\n                var onDownPoint = this._onDownPoint;\n                if (0 <= lastHitAnchor && lastHitAnchor < points.length) {\n                    this._isEditing = true;\n                    canvas.toLocal(e.data.global, undefined, onDownPoint);\n                    this._target = points[lastHitAnchor];\n                    this._targetCopy.copyFrom(this._target);\n                    this._targetIndex = lastHitAnchor;\n                    this.onTargetChange(lastHitAnchor, onDownPoint);\n                    this.reshape();\n                    DApplications.update(this);\n                }\n                else {\n                    var lastHitSegment = this._lastHitSegment;\n                    if (0 <= lastHitSegment) {\n                        this._lastHitSegment = -1;\n                        this._isEditing = true;\n                        canvas.toLocal(e.data.global, undefined, onDownPoint);\n                        var p0 = points[lastHitSegment + 0];\n                        var p1 = points[lastHitSegment < points.length - 1 ? lastHitSegment + 1 : 0];\n                        var t = this._lastHitSegmentPosition;\n                        var ti = 1 - t;\n                        var x = ti * p0.x + t * p1.x;\n                        var y = ti * p0.y + t * p1.y;\n                        var point = new Point(x, y);\n                        points.splice(lastHitSegment + 1, 0, point);\n                        this._target = point;\n                        this._targetCopy.copyFrom(point);\n                        this._targetIndex = lastHitSegment + 1;\n                        this.onTargetChange(this._targetIndex, onDownPoint);\n                        this.reshape();\n                        DApplications.update(this);\n                    }\n                }\n            }\n        }\n        else {\n            this.onDone();\n        }\n    };\n    EToolShapeEditLineBase.prototype.onTargetChange = function (targetIndex, point) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.onMove = function (e) {\n        if (this._isEditing) {\n            var originalEvent = e.data.originalEvent;\n            if (originalEvent.altKey) {\n                return;\n            }\n            var diagram = this._diagram;\n            var canvas = diagram.canvas;\n            var target = this._target;\n            var targetCopy = this._targetCopy;\n            if (canvas && target) {\n                this._isEdited = true;\n                var onDownPoint = this._onDownPoint;\n                var onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                target.set(targetCopy.x + onMovePoint.x - onDownPoint.x, targetCopy.y + onMovePoint.y - onDownPoint.y);\n                this.toSnapped(target, diagram, target);\n                if (originalEvent.shiftKey) {\n                    var points = this._points;\n                    var targetIndex = this._targetIndex;\n                    var previousIndex = 0 < targetIndex ? targetIndex - 1 : targetIndex + 1;\n                    if (0 <= previousIndex && previousIndex < points.length) {\n                        var previous = points[previousIndex];\n                        var dx = target.x - previous.x;\n                        var dy = target.y - previous.y;\n                        var dangle = Math.PI * 0.25;\n                        var angle = Math.round(Math.atan2(dy, dx) / dangle) * dangle;\n                        var d = Math.sqrt(dx * dx + dy * dy);\n                        target.set(previous.x + d * Math.cos(angle), previous.y + d * Math.sin(angle));\n                    }\n                }\n                this.onTargetMove(onMovePoint);\n                this.reshape();\n                DApplications.update(this);\n            }\n        }\n        else {\n            this.onTargetNotMove(e);\n        }\n    };\n    EToolShapeEditLineBase.prototype.onTargetMove = function (point) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.onTargetNotMove = function (e) {\n        // DO NOTHING\n    };\n    EToolShapeEditLineBase.prototype.toSnapped = function (target, diagram, result) {\n        diagram.snapper.toSnapped(target, result);\n    };\n    EToolShapeEditLineBase.prototype.onUp = function (e) {\n        if (this._isEditing) {\n            this._isEditing = false;\n            this._target = null;\n        }\n    };\n    EToolShapeEditLineBase.prototype.onDone = function () {\n        this._isEditing = false;\n        if (this._isEdited) {\n            this._isEdited = false;\n            this.replace();\n        }\n        this.emit(\"done\", this);\n    };\n    EToolShapeEditLineBase.prototype.onCancel = function () {\n        this._isEditing = false;\n        this._isEdited = false;\n        var parent = this.parent;\n        if (parent) {\n            parent.removeChild(this);\n            DApplications.update(this);\n        }\n        this.emit(\"cancel\", this);\n    };\n    EToolShapeEditLineBase.prototype.onKeydown = function (e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onDone();\n        }\n        else if (UtilKeyboardEvent.isDeleteKey(e)) {\n            var targetIndex = this._targetIndex;\n            var points = this._points;\n            if (0 <= targetIndex && targetIndex < points.length && 2 < points.length) {\n                this._isEdited = true;\n                points.splice(targetIndex, 1);\n                if (targetIndex === points.length) {\n                    this._targetIndex -= 1;\n                    this.onTargetChange(this._targetIndex, null);\n                }\n                this.reshape();\n                DApplications.update(this);\n            }\n        }\n    };\n    return EToolShapeEditLineBase;\n}(Graphics));\nexport { EToolShapeEditLineBase };\n//# sourceMappingURL=e-tool-shape-edit-line-base.js.map","import { __extends } from \"tslib\";\nimport { EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeCapabilities, EShapeCapability, EShapeConnectorBodies, EShapeConnectorLine, EShapeLockPart, toPointsBoundary } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { EToolShapeAcceptorEdge } from \"./e-tool-shape-acceptor-edge\";\nimport { EToolShapeEditLineBase } from \"./e-tool-shape-edit-line-base\";\nvar EToolShapeEditLineConnector = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLineConnector, _super);\n    function EToolShapeEditLineConnector(options) {\n        var _this = _super.call(this, options) || this;\n        _this._edge = new EToolShapeAcceptorEdge(_this._diagram, true);\n        _this._work = new Point();\n        return _this;\n    }\n    EToolShapeEditLineConnector.prototype.toCapability = function (shape) {\n        var result = EShapeCapability.NONE;\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            result |= EShapeCapability.LINE_TAIL;\n        }\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            result |= EShapeCapability.LINE_HEAD;\n        }\n        return result;\n    };\n    EToolShapeEditLineConnector.prototype.onActivate = function () {\n        this._edge.begin(this._diagram.canvas, this._shape);\n        this._edgeTail = undefined;\n        this._edgeHead = undefined;\n        _super.prototype.onActivate.call(this);\n    };\n    EToolShapeEditLineConnector.prototype.onDeactivate = function () {\n        this._edge.end();\n        this._edgeTail = undefined;\n        this._edgeHead = undefined;\n        _super.prototype.onDeactivate.call(this);\n    };\n    EToolShapeEditLineConnector.prototype.onTargetChange = function (targetIndex, point) {\n        if (targetIndex === 0) {\n            var edge = this._edge;\n            edge.show();\n            if (point != null) {\n                edge.update(EShapeAcceptorEdgeType.TAIL, point.x, point.y);\n            }\n        }\n        else if (targetIndex === this._points.length - 1) {\n            var edge = this._edge;\n            edge.show();\n            if (point != null) {\n                edge.update(EShapeAcceptorEdgeType.HEAD, point.x, point.y);\n            }\n        }\n        else {\n            this._edge.hide();\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onTargetMove = function (point) {\n        var targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            this._edge.update(EShapeAcceptorEdgeType.TAIL, point.x, point.y);\n        }\n        else if (targetIndex === this._points.length - 1) {\n            this._edge.update(EShapeAcceptorEdgeType.HEAD, point.x, point.y);\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onTargetNotMove = function (e) {\n        var targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            var canvas = this._diagram.canvas;\n            if (canvas) {\n                var onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                this._edge.update(EShapeAcceptorEdgeType.TAIL, onMovePoint.x, onMovePoint.y);\n            }\n        }\n        else if (targetIndex === this._points.length - 1) {\n            var canvas = this._diagram.canvas;\n            if (canvas) {\n                var onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                this._edge.update(EShapeAcceptorEdgeType.HEAD, onMovePoint.x, onMovePoint.y);\n            }\n        }\n    };\n    EToolShapeEditLineConnector.prototype.toSnapped = function (target, diagram, result) {\n        var targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            var edge = this._edge.find(EShapeAcceptorEdgeType.TAIL, target.x, target.y);\n            if (edge != null) {\n                result.copyFrom(edge.local);\n            }\n            this._edgeTail = edge;\n        }\n        else {\n            var points = this._points;\n            var pointsLength = points.length;\n            if (targetIndex === pointsLength - 1) {\n                var edge = this._edge.find(EShapeAcceptorEdgeType.HEAD, target.x, target.y);\n                if (edge != null) {\n                    result.copyFrom(edge.local);\n                }\n                this._edgeHead = edge;\n            }\n            else {\n                diagram.snapper.toSnapped(target, result);\n            }\n        }\n    };\n    EToolShapeEditLineConnector.prototype.toPoints = function (shape, points, transform) {\n        var result = [];\n        if (shape instanceof EShapeConnectorLine) {\n            var edge = shape.edge;\n            var tailLocal = edge.tail.local;\n            var headLocal = edge.head.local;\n            var transformPosition = shape.transform.position;\n            var px = transformPosition.x;\n            var py = transformPosition.y;\n            var x0 = tailLocal.x - px;\n            var y0 = tailLocal.y - py;\n            var x1 = headLocal.x - px;\n            var y1 = headLocal.y - py;\n            var tailPoint = new Point(x0, y0);\n            result.push(transform.apply(tailPoint, tailPoint));\n            var bodyValues = shape.body.values;\n            var bodyValuesLength = bodyValues.length;\n            if (0 < bodyValuesLength) {\n                var cx = (x1 + x0) * 0.5;\n                var cy = (y1 + y0) * 0.5;\n                var dx = x1 - x0;\n                var dy = y1 - y0;\n                var a = Math.atan2(dy, dx);\n                var l = Math.sqrt(dx * dx + dy * dy);\n                var c = Math.cos(a) * l;\n                var s = Math.sin(a) * l;\n                for (var i = 0; i < bodyValuesLength; i += 2) {\n                    var x = bodyValues[i + 0];\n                    var y = bodyValues[i + 1];\n                    var x2 = cx + c * x - s * y;\n                    var y2 = cy + c * y + s * x;\n                    var middlePoint = new Point(x2, y2);\n                    result.push(transform.apply(middlePoint, middlePoint));\n                }\n            }\n            var headPoint = new Point(x1, y1);\n            result.push(transform.apply(headPoint, headPoint));\n        }\n        return result;\n    };\n    EToolShapeEditLineConnector.prototype.newShape = function (values, segments, style, oldShape) {\n        var boundary = toPointsBoundary(values, [0, 0, 0, 0]);\n        var cx = (boundary[2] + boundary[0]) * 0.5;\n        var cy = (boundary[3] + boundary[1]) * 0.5;\n        var sx = boundary[2] - boundary[0];\n        var sy = boundary[3] - boundary[1];\n        var result = oldShape.clone();\n        var transform = result.transform;\n        var transformPosition = transform.position;\n        var px = transformPosition.x;\n        var py = transformPosition.y;\n        result.lock(EShapeLockPart.UPLOADED);\n        transformPosition.set(px + cx, py + cy);\n        transform.scale.set(1, 1);\n        transform.rotation = 0;\n        transform.skew.set(0, 0);\n        result.points.toFitted(sx, sy);\n        result.size.set(sx, sy);\n        result.edge.lock();\n        result.body.set(EShapeConnectorBodies.from(values, 0, 0));\n        var local = this._work;\n        if (2 <= values.length) {\n            local.set(px + values[0], py + values[1]);\n        }\n        else {\n            local.set(px, py);\n        }\n        var edgeTail = this._edgeTail;\n        if (edgeTail !== undefined) {\n            if (this.isTailAccepted(result, local, edgeTail)) {\n                this.onTailAccepted(result, local, edgeTail);\n            }\n        }\n        if (2 <= values.length) {\n            var valuesLength = values.length;\n            local.set(px + values[valuesLength - 2], py + values[valuesLength - 1]);\n        }\n        else {\n            local.set(px, py);\n        }\n        var edgeHead = this._edgeHead;\n        if (edgeHead !== undefined) {\n            if (this.isHeadAccepted(result, local, edgeHead)) {\n                this.onHeadAccepted(result, local, edgeHead);\n            }\n        }\n        result.edge.unlock();\n        result.unlock(EShapeLockPart.UPLOADED, true);\n        return result;\n    };\n    EToolShapeEditLineConnector.prototype.isDanglingEdgeAllowed = function () {\n        var _a;\n        return (_a = this._options.dangling) !== null && _a !== void 0 ? _a : false;\n    };\n    EToolShapeEditLineConnector.prototype.isTailAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onTailAccepted = function (connector, local, edge) {\n        if (edge != null) {\n            connector.edge.tail.set(edge.shape, edge.id, edge.x, edge.y, undefined, undefined, undefined, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.tail.set(null, null, null, null, undefined, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    };\n    EToolShapeEditLineConnector.prototype.isHeadAccepted = function (connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    };\n    EToolShapeEditLineConnector.prototype.onHeadAccepted = function (connector, local, edge) {\n        if (edge != null) {\n            connector.edge.head.set(edge.shape, edge.id, edge.x, edge.y, undefined, undefined, undefined, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.head.set(null, null, null, null, undefined, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    };\n    return EToolShapeEditLineConnector;\n}(EToolShapeEditLineBase));\nexport { EToolShapeEditLineConnector };\n//# sourceMappingURL=e-tool-shape-edit-line-connector.js.map","import { __extends } from \"tslib\";\nimport { EShapeCapability, EShapeLockPart, toPointsBoundary } from \"@wcardinal/wcardinal-ui\";\nimport { EToolShapeEditLineBase } from \"./e-tool-shape-edit-line-base\";\nvar EToolShapeEditLine = /** @class */ (function (_super) {\n    __extends(EToolShapeEditLine, _super);\n    function EToolShapeEditLine(options) {\n        return _super.call(this, options) || this;\n    }\n    EToolShapeEditLine.prototype.toCapability = function (shape) {\n        return EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n    };\n    EToolShapeEditLine.prototype.newShape = function (values, segments, style, oldShape) {\n        var boundary = toPointsBoundary(values, [0, 0, 0, 0]);\n        var cx = (boundary[2] + boundary[0]) * 0.5;\n        var cy = (boundary[3] + boundary[1]) * 0.5;\n        var sx = boundary[2] - boundary[0];\n        var sy = boundary[3] - boundary[1];\n        var result = oldShape.clone();\n        var transform = result.transform;\n        var transformPosition = transform.position;\n        var px = transformPosition.x;\n        var py = transformPosition.y;\n        var localTransform = oldShape.transform.localTransform;\n        var dx = localTransform.a * cx + localTransform.c * cy;\n        var dy = localTransform.b * cx + localTransform.d * cy;\n        var newValues = [];\n        for (var i = 0, imax = values.length; i < imax; i += 2) {\n            newValues.push(values[i + 0] - cx, values[i + 1] - cy);\n        }\n        result.lock(EShapeLockPart.UPLOADED);\n        result.transform.position.set(px + dx, py + dy);\n        result.size.set(sx, sy);\n        var points = result.points;\n        if (points) {\n            points.set(newValues, segments, style);\n        }\n        result.unlock(EShapeLockPart.UPLOADED, true);\n        return result;\n    };\n    return EToolShapeEditLine;\n}(EToolShapeEditLineBase));\nexport { EToolShapeEditLine };\n//# sourceMappingURL=e-tool-shape-edit-line.js.map","/*\n * Copyright (C) 2021 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nexport var UtilAjax = {\n    send: function (method, settings) {\n        var isCompleted = false;\n        var makeOnError = function (reason) {\n            return function () {\n                if (!isCompleted) {\n                    isCompleted = true;\n                    settings.error(reason, xhr);\n                }\n            };\n        };\n        var xhr = new XMLHttpRequest();\n        xhr.open(method, settings.url, true);\n        xhr.onload = function () {\n            if (!isCompleted) {\n                isCompleted = true;\n                var status_1 = xhr.status;\n                if ((200 <= status_1 && status_1 < 300) ||\n                    status_1 === 0 ||\n                    status_1 === 304 ||\n                    status_1 === 1223) {\n                    settings.success(xhr.responseText, xhr);\n                }\n                else {\n                    settings.error(xhr.statusText, xhr);\n                }\n            }\n        };\n        var onError = makeOnError(\"error\");\n        xhr.onerror = onError;\n        xhr.onabort = makeOnError(\"abort\");\n        // Headers\n        var headers = settings.headers;\n        if (headers != null) {\n            for (var name_1 in headers) {\n                var header = headers[name_1];\n                if (header != null) {\n                    xhr.setRequestHeader(name_1, header);\n                }\n            }\n        }\n        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        // Timeout\n        var timeout = settings.timeout;\n        if (timeout != null) {\n            xhr.timeout = timeout;\n            xhr.ontimeout = makeOnError(\"timeout\");\n            if (0 < timeout) {\n                // For browsers which do not support the `timeout`\n                setTimeout(function () {\n                    xhr.abort();\n                }, timeout);\n            }\n        }\n        // Send\n        try {\n            var data = settings.data;\n            if (data != null) {\n                xhr.send(data);\n            }\n            else {\n                xhr.send();\n            }\n        }\n        catch (_a) {\n            onError();\n        }\n    }\n};\n//# sourceMappingURL=util-ajax.js.map","import { DThemes, isFunction } from \"@wcardinal/wcardinal-ui\";\nvar UtilCanvasCategory = /** @class */ (function () {\n    function UtilCanvasCategory(options) {\n        this._options = options;\n    }\n    UtilCanvasCategory.prototype.get = function () {\n        var _a;\n        return ((_a = this._promise) !== null && _a !== void 0 ? _a : (this._promise = this.fetch()));\n    };\n    UtilCanvasCategory.prototype.fetch = function () {\n        var _this = this;\n        return Promise.all([this.doFetch()]).then(function (resolveds) {\n            var resolved = resolveds[0];\n            return _this.toFetched(resolved);\n        });\n    };\n    UtilCanvasCategory.prototype.doFetch = function () {\n        var options = this._options;\n        if (isFunction(options)) {\n            return options();\n        }\n        else {\n            return options;\n        }\n    };\n    UtilCanvasCategory.prototype.toFetched = function (options) {\n        var theme = DThemes.get(\"EEditorCanvas\");\n        if (options != null) {\n            var items = this.toItems(theme, options);\n            return {\n                default: this.toDefault(items, theme, options),\n                items: items,\n                writable: this.toWritable(theme, options)\n            };\n        }\n        return {\n            default: theme.getDefaultCategory(),\n            items: [],\n            writable: theme.isCategoryWritable()\n        };\n    };\n    UtilCanvasCategory.prototype.toItems = function (theme, options) {\n        var result = [];\n        var items = options.items;\n        if (items != null) {\n            for (var i = 0, imax = items.length; i < imax; ++i) {\n                var category = items[i];\n                var id = theme.toCategoryId(category);\n                var label = theme.toCategoryLabel(category);\n                result.push({\n                    id: id,\n                    label: label\n                });\n            }\n        }\n        return result;\n    };\n    UtilCanvasCategory.prototype.toDefault = function (items, theme, options) {\n        if (options.default != null) {\n            return options.default;\n        }\n        else if (0 < items.length) {\n            return items[0].id;\n        }\n        else {\n            return theme.getDefaultCategory();\n        }\n    };\n    UtilCanvasCategory.prototype.toWritable = function (theme, options) {\n        var _a;\n        return (_a = options.writable) !== null && _a !== void 0 ? _a : theme.isCategoryWritable();\n    };\n    return UtilCanvasCategory;\n}());\nexport { UtilCanvasCategory };\n//# sourceMappingURL=util-canvas-category.js.map","import { DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { UtilCanvasCategory } from \"./util-canvas-category\";\nvar UtilCanvas = /** @class */ (function () {\n    function UtilCanvas(options) {\n        this._category = new UtilCanvasCategory(options === null || options === void 0 ? void 0 : options.category);\n        this._options = options;\n    }\n    UtilCanvas.prototype.get = function () {\n        var _a;\n        return ((_a = this._promise) !== null && _a !== void 0 ? _a : (this._promise = this.fetch()));\n    };\n    UtilCanvas.prototype.fetch = function () {\n        var _this = this;\n        return this._category.get().then(function (category) {\n            return _this.toDefault(category);\n        });\n    };\n    UtilCanvas.prototype.toDefault = function (category) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        var theme = DThemes.get(\"EEditorCanvas\");\n        var options = this._options;\n        if (options != null) {\n            return {\n                name: (_a = options.name) !== null && _a !== void 0 ? _a : theme.getDefaultName(),\n                label: (_b = options.label) !== null && _b !== void 0 ? _b : theme.getDefaultLabel(),\n                width: (_c = options.width) !== null && _c !== void 0 ? _c : theme.getDefaultWidth(),\n                height: (_d = options.height) !== null && _d !== void 0 ? _d : theme.getDefaultHeight(),\n                category: category,\n                summary: (_e = options.summary) !== null && _e !== void 0 ? _e : theme.getDefaultSummary(),\n                description: (_f = options.description) !== null && _f !== void 0 ? _f : theme.getDefaultDescription(),\n                background: {\n                    color: (_h = (_g = options.background) === null || _g === void 0 ? void 0 : _g.color) !== null && _h !== void 0 ? _h : theme.getDefaultBackgroundColor(),\n                    alpha: (_k = (_j = options.background) === null || _j === void 0 ? void 0 : _j.alpha) !== null && _k !== void 0 ? _k : theme.getDefaultBackgroundAlpha()\n                }\n            };\n        }\n        return {\n            name: theme.getDefaultName(),\n            label: theme.getDefaultLabel(),\n            width: theme.getDefaultWidth(),\n            height: theme.getDefaultHeight(),\n            category: category,\n            summary: theme.getDefaultSummary(),\n            description: theme.getDefaultDescription(),\n            background: {\n                color: theme.getDefaultBackgroundColor(),\n                alpha: theme.getDefaultBackgroundAlpha()\n            }\n        };\n    };\n    return UtilCanvas;\n}());\nexport { UtilCanvas };\n//# sourceMappingURL=util-canvas.js.map","var UtilDataValues = /** @class */ (function () {\n    function UtilDataValues(parent) {\n        this.parent = parent;\n        this.mappings = {};\n    }\n    UtilDataValues.prototype.set = function (mappings) {\n        this.mappings = mappings;\n        var parent = this.parent;\n        var parentData = parent.data;\n        for (var id in mappings) {\n            var value = mappings[id];\n            if (value) {\n                parentData.set(id, value.value, value.time, value.state);\n            }\n        }\n        parent.update();\n    };\n    UtilDataValues.prototype.retain = function (ids) {\n        var retained = {};\n        var mapping = this.mappings;\n        for (var i = 0, imax = ids.length; i < imax; ++i) {\n            var id = ids[i];\n            if (id in mapping) {\n                retained[id] = mapping[id];\n            }\n        }\n        this.set(retained);\n    };\n    return UtilDataValues;\n}());\nexport { UtilDataValues };\n//# sourceMappingURL=util-data-values.js.map","import { NumberFormatters } from \"@wcardinal/wcardinal-ui\";\nvar UtilDate = /** @class */ (function () {\n    function UtilDate() {\n    }\n    UtilDate.getFormatter = function () {\n        if (UtilDate.DATE_FORMATTER == null) {\n            UtilDate.DATE_FORMATTER = NumberFormatters.create(\"%Y%M%D%H%m%s\");\n        }\n        return UtilDate.DATE_FORMATTER;\n    };\n    UtilDate.format = function (target) {\n        return this.getFormatter().format(target, 1);\n    };\n    UtilDate.DATE_FORMATTER = null;\n    return UtilDate;\n}());\nexport { UtilDate };\n//# sourceMappingURL=util-date.js.map","import { __extends } from \"tslib\";\nimport { DButtonColor, DControllers, DInputIntegerAndLabel, DInputLabel, DInputTextAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutVertical, DMenu, DPane, DSelect, DText, isNumber } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentBackground } from \"../command/e-command-document-background\";\nimport { ECommandDocumentName } from \"../command/e-command-document-name\";\nimport { ECommandDocumentHeight } from \"../command/e-command-document-height\";\nimport { ECommandDocumentWidth } from \"../command/e-command-document-width\";\nimport { ECommandDocumentLabel } from \"../command/e-command-document-label\";\nimport { ECommandDocumentSummary } from \"../command/e-command-document-summary\";\nimport { ECommandDocumentDescription } from \"../command/e-command-document-description\";\nimport { ECommandDocumentCategory } from \"../command/e-command-document-category\";\nvar EEditorCanvasLegacy = /** @class */ (function (_super) {\n    __extends(EEditorCanvasLegacy, _super);\n    function EEditorCanvasLegacy(options) {\n        var _this = _super.call(this, options) || this;\n        var diagram = options.diagram;\n        _this._diagram = diagram;\n        _this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", function () {\n            _this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", function () {\n            _this.state.isDisabled = false;\n        });\n        _this._canvas = options.canvas;\n        _this.content.addChild(_this.newLayout());\n        return _this;\n    }\n    EEditorCanvasLegacy.prototype.newLayout = function () {\n        return new DLayoutVertical({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: this.newLayoutItems()\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLayoutItems = function () {\n        return [\n            this.newTextLabel(),\n            this.newLayoutName(),\n            this.newLayoutLabel(),\n            this.newLayoutWidth(),\n            this.newLayoutHeight(),\n            this.newLayoutCategory(),\n            this.newLayoutSummary(),\n            this.newLayoutDescription(),\n            this.newLayoutBackground()\n        ];\n    };\n    EEditorCanvasLegacy.prototype.newTextLabel = function () {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLayoutName = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.name !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentName(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.name;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.name;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutLabel = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.label !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentLabel(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.label;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.label;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutWidth = function () {\n        var diagram = this._diagram;\n        var result = new DInputIntegerAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.width !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentWidth(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.width;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.width;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutHeight = function () {\n        var diagram = this._diagram;\n        var result = new DInputIntegerAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputHeightLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    change: function (value) {\n                        var canvas = diagram.canvas;\n                        if (canvas != null && canvas.height !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentHeight(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.height;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.input.value = canvas.height;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutBackground = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelBackground(), this.newInputBackground()]\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLabelBackground = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputBackgroundLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newInputBackground = function () {\n        var diagram = this._diagram;\n        var result = new DButtonColor({\n            weight: 1,\n            on: {\n                change: function (value) {\n                    DControllers.getCommandController().push(new ECommandDocumentBackground(diagram, value.color, value.alpha));\n                }\n            }\n        });\n        result.dialog.on(\"open\", function () {\n            var dialog = result.dialog;\n            var dialogNew = dialog.new;\n            var dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        var update = function () {\n            var value = result.value;\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var background = canvas.background;\n                var backgroundColor = background.color;\n                var backgroundAlpha = background.alpha;\n                value.color = isNumber(backgroundColor) ? backgroundColor : 0xffffff;\n                value.alpha = isNumber(backgroundAlpha) ? backgroundAlpha : 1;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", update);\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutCategory = function () {\n        var _this = this;\n        var label = this.newLabelCategory();\n        var select = this.newSelectCategory();\n        var result = new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            children: [label, select]\n        });\n        this._canvas.get().then(function (canvas) {\n            _this.onCanvasValueFetched(canvas, result, select);\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.onCanvasValueFetched = function (canvas, layout, select) {\n        var category = canvas.category;\n        var categoryDefault = category.default;\n        var categoryItems = category.items;\n        if (categoryDefault != null && 0 < categoryItems.length) {\n            var items = [];\n            for (var i = 0, imax = categoryItems.length; i < imax; ++i) {\n                var categoryItem = categoryItems[i];\n                items.push({\n                    value: categoryItem.id,\n                    text: {\n                        value: categoryItem.label\n                    }\n                });\n            }\n            select.menu = new DMenu({\n                fit: true,\n                items: items\n            });\n            select.value = categoryDefault;\n            var diagram_1 = this._diagram;\n            var update = function () {\n                var _a;\n                var diagramCanvas = diagram_1.canvas;\n                if (diagramCanvas != null) {\n                    select.value = (_a = diagramCanvas.category) !== null && _a !== void 0 ? _a : canvas.category.default;\n                }\n            };\n            update();\n            diagram_1.on(\"change\", update);\n            diagram_1.on(\"set\", function (diagramCanvas) {\n                var _a;\n                select.value = (_a = diagramCanvas.category) !== null && _a !== void 0 ? _a : canvas.category.default;\n            });\n            layout.state.isEnabled = category.writable;\n            layout.show();\n        }\n        else {\n            select.value = null;\n            layout.hide();\n        }\n    };\n    EEditorCanvasLegacy.prototype.newLabelCategory = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getSelectCategoryLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newSelectCategory = function () {\n        var _this = this;\n        return new DSelect({\n            weight: 1,\n            on: {\n                change: function (value) {\n                    var diagram = _this._diagram;\n                    var canvas = diagram.canvas;\n                    if (canvas != null && canvas.category !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentCategory(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLayoutSummary = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelSummary(), this.newInputSummary()]\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLabelSummary = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputSummaryLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newInputSummary = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextArea({\n            weight: 1,\n            height: 60,\n            on: {\n                change: function (value) {\n                    var canvas = diagram.canvas;\n                    if (canvas != null && canvas.summary !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentSummary(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.value = canvas.summary;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.value = canvas.summary;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.newLayoutDescription = function () {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelDescription(), this.newInputDescription()]\n        });\n    };\n    EEditorCanvasLegacy.prototype.newLabelDescription = function () {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputDescriptionLabel()\n            }\n        });\n    };\n    EEditorCanvasLegacy.prototype.newInputDescription = function () {\n        var diagram = this._diagram;\n        var result = new DInputTextArea({\n            weight: 1,\n            height: 100,\n            on: {\n                change: function (value) {\n                    var canvas = diagram.canvas;\n                    if (canvas != null && canvas.description !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentDescription(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n        var update = function () {\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                result.value = canvas.description;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", function (canvas) {\n            result.value = canvas.description;\n        });\n        return result;\n    };\n    EEditorCanvasLegacy.prototype.getType = function () {\n        return \"EEditorCanvasLegacy\";\n    };\n    return EEditorCanvasLegacy;\n}(DPane));\nexport { EEditorCanvasLegacy };\n//# sourceMappingURL=e-editor-canvas-legacy.js.map","import { createImage, DApplication, DBase, DBaseState, DButton, DButtonFile, DButtonFileAs, DButtonGroup, DButtonRedo, DButtonUndo, DCommandSave, DControllers, DDiagramEditor, DDiagrams, DDialogConfirmDelete, DDialogConfirmDiscard, DDialogSaveAs, DDialogSelect, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DThemes, EShapeCircle, EShapeConnectorLine, EShapeEmbeddeds, EShapeLine, EShapeRectangle, EShapeRectangleRounded, EShapeResourceManagerDeserializationMode, EShapeSemicircle, EShapeTriangle, EShapeTriangleRounded, isArray, isFunction, isString, UtilClipboard, UtilFileDownloader, UtilGestureModifier, UtilGestureModifiers, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"./command/e-command-shape-create\";\nimport { EDialogProcessing } from \"./editor/e-dialog-processing\";\nimport { getDialogSelectThumbnailSize, newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { EEditorAction } from \"./editor/e-editor-action\";\nimport { EEditorCanvas } from \"./editor/e-editor-canvas\";\nimport { EEditorCanvasLegacy } from \"./editor/e-editor-canvas-legacy\";\nimport { EEditorCoordinate } from \"./editor/e-editor-coordinate\";\nimport { EEditorLayer } from \"./editor/e-editor-layer\";\nimport { EEditorShape } from \"./editor/e-editor-shape\";\nimport { EEditorSnap } from \"./editor/e-editor-snap\";\nimport { EEditorData } from \"./editor/e-editor-data\";\nimport { EEditorText } from \"./editor/e-editor-text\";\nimport { EEditorTree } from \"./editor/e-editor-tree\";\nimport { EShapeExtensionFactories } from \"./extension/e-shape-extension-factories\";\nimport { EShapeExtensions } from \"./extension/e-shape-extensions\";\nimport { EToolGroupImpl } from \"./tool/e-tool-group-impl\";\nimport { EToolSelect } from \"./tool/e-tool-select\";\nimport { EToolShapeCreate } from \"./tool/e-tool-shape-create\";\nimport { EToolShapeCreateLine } from \"./tool/e-tool-shape-create-line\";\nimport { EToolShapeEditLine } from \"./tool/e-tool-shape-edit-line\";\nimport { EToolShapeCreateLineConnector } from \"./tool/e-tool-shape-create-line-connector\";\nimport { EToolShapeEditLineConnector } from \"./tool/e-tool-shape-edit-line-connector\";\nimport { EEditorDataMapping } from \"./editor/e-editor-data-mapping\";\nimport { EToolShapeCreateElbowConnector } from \"./tool/e-tool-shape-create-elbow-connector\";\nimport { EEditorValidation } from \"./editor/e-editor-validation\";\nimport { EEditorSearch } from \"./editor/e-editor-search\";\nimport { ECommandDocumentCreate } from \"./command/e-command-document-create\";\nimport { ECommandDocumentOpen } from \"./command/e-command-document-open\";\nimport { EDialogCanvas } from \"./editor/e-dialog-canvas\";\nimport { UtilCanvas } from \"./util/util-canvas\";\nvar FGraphicEditor = /** @class */ (function () {\n    function FGraphicEditor(options) {\n        var _a, _b, _c;\n        // Options\n        this._options = options;\n        var theme = this.toTheme(options);\n        this._theme = theme;\n        this._margin = (_a = options.margin) !== null && _a !== void 0 ? _a : theme.getMargin();\n        var piece = options.piece;\n        this._isPieceEnabled = (_b = piece === null || piece === void 0 ? void 0 : piece.enable) !== null && _b !== void 0 ? _b : true;\n        this._toPieceId = (_c = piece === null || piece === void 0 ? void 0 : piece.toId) !== null && _c !== void 0 ? _c : (function () { return null; });\n        this._isEditable = options.editable !== false;\n        this._icons = this.toIcons(theme);\n        this._validation = this.toValidation(options);\n        this._search = this.toSearch(options);\n        this._controller = options.controller;\n        this._canvas = new UtilCanvas(options.canvas);\n        // Application\n        this._application = new DApplication(options.application);\n        // Others\n        this._editorButtonGroup = null;\n        this.init();\n    }\n    Object.defineProperty(FGraphicEditor.prototype, \"application\", {\n        get: function () {\n            return this._application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicEditor.prototype, \"controller\", {\n        get: function () {\n            return this._controller;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.toIcons = function (theme) {\n        var iconBuilder = theme.getIconBuilder();\n        EShapeExtensions.merge(iconBuilder);\n        EShapeExtensionFactories.merge(iconBuilder);\n        var result = iconBuilder.build();\n        EShapeExtensions.build(result);\n        EShapeExtensionFactories.build(result);\n        return result;\n    };\n    FGraphicEditor.prototype.toValidation = function (options) {\n        var validation = options.validation;\n        if (validation != null) {\n            return {\n                validator: validation.validator,\n                force: validation.force === true\n            };\n        }\n        return {\n            validator: undefined,\n            force: false\n        };\n    };\n    FGraphicEditor.prototype.toSearch = function (options) {\n        var search = options.search;\n        if (search != null) {\n            return {\n                finder: search.finder\n            };\n        }\n        return {\n            finder: undefined\n        };\n    };\n    FGraphicEditor.prototype.init = function () {\n        this.initDiagram();\n        this.initHeader();\n        this.initTools();\n        this.initEditors();\n        this.initCopyAndPaste();\n        this.initShortcut();\n    };\n    FGraphicEditor.prototype.initDiagram = function () {\n        var diagram = this.diagram;\n        this.getDiagramContainer().addChild(diagram);\n        DControllers.setDocumentController(diagram);\n    };\n    FGraphicEditor.prototype.initHeader = function () {\n        var header = this.newHeader(this._options);\n        if (header) {\n            this.getHeaderContainer().addChild(header);\n            this._header = header;\n        }\n    };\n    FGraphicEditor.prototype.initTools = function () {\n        this.getToolButtonLayoutContainer().addChild(this.newToolButtonLayout());\n        // Activates the select tool and then disables all the tools.\n        // Otherwise, toolShapeButtonSelect.activate() won't work\n        // because toolShapeButtonSelect.state.isActionable is not true.\n        this.toolShapeButtonSelect.activate();\n        this.toolShapeButtonGroup.disable();\n    };\n    FGraphicEditor.prototype.initEditors = function () {\n        this.getEditorLayoutContainer().addChild(this.newEditorLayout());\n        if (!this.isEditorCanvasCompatible()) {\n            this.diagram.addChild(this.editorCanvas);\n        }\n        // Activate the coordinate editor\n        this.editorButtonCoordinate.activate();\n    };\n    FGraphicEditor.prototype.initCopyAndPaste = function () {\n        var _this = this;\n        new UtilClipboard()\n            .on(\"copy\", function (clipboardData) {\n            var serialized = _this.toolShapeSelect.selection.serialize();\n            if (serialized != null) {\n                clipboardData.setData(\"text\", serialized);\n            }\n        })\n            .on(\"cut\", function (clipboardData) {\n            var serialized = _this.toolShapeSelect.selection.serialize();\n            if (serialized != null) {\n                clipboardData.setData(\"text\", serialized);\n                _this.toolShapeSelect.selection.delete();\n            }\n        })\n            .on(\"paste\", function (clipboardData) {\n            var serialized = clipboardData.getData(\"text\");\n            _this.toolShapeSelect.selection.deserialize(serialized);\n        });\n    };\n    FGraphicEditor.prototype.initShortcut = function () {\n        this.initShortcutShape();\n        this.initShortcutTree();\n    };\n    FGraphicEditor.prototype.initShortcutShape = function () {\n        var _this = this;\n        var theme = DThemes.get(\"EEditorShape\");\n        var groupShortcut = theme.getButtonGroupShortcut();\n        if (groupShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, groupShortcut, function (e) {\n                _this.toolShapeSelect.selection.group();\n            });\n        }\n        var ungroupShortcut = theme.getButtonUngroupShortcut();\n        if (ungroupShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, ungroupShortcut, function (e) {\n                _this.toolShapeSelect.selection.ungroup();\n            });\n        }\n    };\n    FGraphicEditor.prototype.initShortcutTree = function () {\n        var _this = this;\n        var theme = DThemes.get(\"EEditorTree\");\n        var bringToFrontShortcut = theme.getButtonBringToFrontShortcut();\n        if (bringToFrontShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, bringToFrontShortcut, function (e) {\n                _this.toolShapeSelect.selection.bringToFront();\n            });\n        }\n        var bringToForwardShortcut = theme.getButtonBringForwardShortcut();\n        if (bringToForwardShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, bringToForwardShortcut, function (e) {\n                _this.toolShapeSelect.selection.bringForward();\n            });\n        }\n        var sendBackwardShortcut = theme.getButtonSendBackwardShortcut();\n        if (sendBackwardShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, sendBackwardShortcut, function (e) {\n                _this.toolShapeSelect.selection.sendBackward();\n            });\n        }\n        var sendToBackShortcut = theme.getButtonSendToBackShortcut();\n        if (sendToBackShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, sendToBackShortcut, function (e) {\n                _this.toolShapeSelect.selection.sendToBack();\n            });\n        }\n    };\n    FGraphicEditor.prototype.newHeader = function (options) {\n        var header = options.header;\n        if (header != null) {\n            var result = header(this.newToolFileButtons());\n            if (result) {\n                var margin_1 = this._margin;\n                result.x = margin_1;\n                result.y = margin_1;\n                result.setWidth(function (p) { return p - 2 * margin_1; });\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicEditor.prototype.getHeaderContainer = function () {\n        return this._application.stage;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonCreate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonCreate) !== null && _a !== void 0 ? _a : (this._toolFileButtonCreate = this.newToolFileButtonCreate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonCreate = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.new\n            },\n            title: theme.getToolFileButtonCreateTitle(),\n            shortcut: theme.getToolFileButtonCreateShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: this._isEditable ? undefined : DBaseState.DISABLED,\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonCreateActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolFileButtonCreateActive = function (opener) {\n        var _this = this;\n        if (this.diagram.isChanged()) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogCreate.then(function (dialogCreate) {\n                    dialogCreate.reset().open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogCreate.then(function (dialogCreate) {\n                dialogCreate.reset().open(opener);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonOpen\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonOpen) !== null && _a !== void 0 ? _a : (this._toolFileButtonOpen = this.newToolFileButtonOpen()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonOpenTitle(),\n            shortcut: theme.getToolFileButtonOpenShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolFileButtonOpenActive = function (opener) {\n        var _this = this;\n        if (this.diagram.isChanged()) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogSelect.then(function (dialogSelect) {\n                    dialogSelect.open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogSelect.then(function (dialogSelect) {\n                dialogSelect.open(opener);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonSave\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonSave) !== null && _a !== void 0 ? _a : (this._toolFileButtonSave = this.newToolFileButtonSave()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonSave = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.save\n            },\n            title: theme.getToolFileButtonSaveTitle(),\n            shortcut: theme.getToolFileButtonSaveShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    _this.onToolFileButtonSaveActive();\n                }\n            }\n        });\n        if (this._isEditable) {\n            var diagram_1 = this.diagram;\n            diagram_1.on(\"change\", function () {\n                result.state.isDisabled = !diagram_1.isChanged();\n            });\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonSaveActive = function () {\n        this.validate().then(function () {\n            DControllers.getCommandController().push(new DCommandSave());\n        });\n    };\n    FGraphicEditor.prototype.validate = function () {\n        var _this = this;\n        var validation = this._validation;\n        var validator = validation.validator;\n        if (validator != null && validation.force) {\n            var canvas = this.diagram.canvas;\n            if (canvas) {\n                try {\n                    var result = validator(canvas);\n                    if (result != null) {\n                        var dialogSaveProcessing_1 = this.dialogSaveProcessing;\n                        dialogSaveProcessing_1.open(this.toolFileButtonSave);\n                        if (isArray(result)) {\n                            if (0 < result.length) {\n                                var editorValidation = this.editorValidation;\n                                editorValidation.list.data.clearAndAddAll(result);\n                                var editorButtonValidation = this.editorButtonValidation;\n                                if (!editorButtonValidation.state.isActive) {\n                                    editorButtonValidation.activate();\n                                }\n                                dialogSaveProcessing_1.reject(\"validation\");\n                                return Promise.reject();\n                            }\n                            else {\n                                return Promise.resolve();\n                            }\n                        }\n                        else {\n                            return result.then(function (results) {\n                                if (0 < results.length) {\n                                    var editorValidation = _this.editorValidation;\n                                    editorValidation.list.data.clearAndAddAll(results);\n                                    var editorButtonValidation = _this.editorButtonValidation;\n                                    if (!editorButtonValidation.state.isActive) {\n                                        editorButtonValidation.activate();\n                                    }\n                                    dialogSaveProcessing_1.reject(\"validation\");\n                                    return Promise.reject();\n                                }\n                                else {\n                                    return Promise.resolve();\n                                }\n                            }, function () {\n                                dialogSaveProcessing_1.reject(\"validation-fail\");\n                                return Promise.reject();\n                            });\n                        }\n                    }\n                }\n                catch (_a) {\n                    var dialogSaveProcessing = this.dialogSaveProcessing;\n                    dialogSaveProcessing.open(this.toolFileButtonSave);\n                    dialogSaveProcessing.reject(\"validation-fail\");\n                    return Promise.reject();\n                }\n            }\n        }\n        return Promise.resolve();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonSaveAs\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonSaveAs) !== null && _a !== void 0 ? _a : (this._toolFileButtonSaveAs = this.newToolFileButtonSaveAs()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonSaveAs = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.save_as\n            },\n            title: theme.getToolFileButtonSaveAsTitle(),\n            shortcut: theme.getToolFileButtonSaveAsShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    _this.onToolFileButtonSaveAsActive();\n                }\n            }\n        });\n        if (this._isEditable) {\n            var diagram = this.diagram;\n            diagram.on(\"set\", function () {\n                result.state.isDisabled = false;\n            });\n            diagram.on(\"unset\", function () {\n                result.state.isDisabled = true;\n            });\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonSaveAsActive = function () {\n        var _this = this;\n        this.validate().then(function () {\n            _this.dialogSaveAs.open(_this.toolFileButtonSaveAs);\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonUpload\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonUpload) !== null && _a !== void 0 ? _a : (this._toolFileButtonUpload = this.newToolFileButtonUpload()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonUpload = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButtonFile({\n            image: {\n                source: this._icons.upload\n            },\n            title: theme.getToolFileButtonUploadTitle(),\n            shortcut: theme.getToolFileButtonUploadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            as: DButtonFileAs.TEXT,\n            checker: function () {\n                if (_this.diagram.isChanged()) {\n                    return _this.dialogDiscard.open(result);\n                }\n                else {\n                    return true;\n                }\n            },\n            on: {\n                open: function (data) {\n                    _this.onToolFileButtonUploadOpen(data);\n                }\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonUploadOpen = function (data) {\n        var parsed = DDiagrams.parse(data);\n        if (parsed != null) {\n            parsed.id = undefined;\n            this.diagram.set(parsed);\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonDownload\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonDownload) !== null && _a !== void 0 ? _a : (this._toolFileButtonDownload = this.newToolFileButtonDownload()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonDownload = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.download\n            },\n            title: theme.getToolFileButtonDownloadTitle(),\n            shortcut: theme.getToolFileButtonDownloadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function () {\n                    _this.onToolFileButtonDownloadActive();\n                }\n            }\n        });\n        var diagram = this.diagram;\n        diagram.on(\"set\", function () {\n            result.state.isDisabled = false;\n        });\n        diagram.on(\"unset\", function () {\n            result.state.isDisabled = true;\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonDownloadActive = function () {\n        var serialized = this.diagram.serialize();\n        if (serialized != null) {\n            UtilFileDownloader.download(\"\".concat(serialized.name, \".json\"), JSON.stringify(serialized));\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonUndo\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonUndo) !== null && _a !== void 0 ? _a : (this._toolFileButtonUndo = this.newToolFileButtonUndo()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonUndo = function () {\n        var theme = this._theme;\n        return new DButtonUndo({\n            title: theme.getToolFileButtonUndoTitle(),\n            shortcut: theme.getToolFileButtonUndoShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            image: {\n                source: this._icons.undo\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonRedo\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonRedo) !== null && _a !== void 0 ? _a : (this._toolFileButtonRedo = this.newToolFileButtonRedo()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonRedo = function () {\n        var theme = this._theme;\n        return new DButtonRedo({\n            title: theme.getToolFileButtonRedoTitle(),\n            shortcut: theme.getToolFileButtonRedoShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            image: {\n                source: this._icons.redo\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolFileButtonDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolFileButtonDelete) !== null && _a !== void 0 ? _a : (this._toolFileButtonDelete = this.newToolFileButtonDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolFileButtonDelete = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            image: {\n                source: this._icons.delete\n            },\n            title: theme.getToolFileButtonDeleteTitle(),\n            shortcut: theme.getToolFileButtonDeleteShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonDelete(emitter);\n                }\n            }\n        });\n        if (this._isEditable) {\n            var diagram = this.diagram;\n            diagram.on(\"set\", function () {\n                result.state.isDisabled = false;\n            });\n            diagram.on(\"unset\", function () {\n                result.state.isDisabled = true;\n            });\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onToolFileButtonDelete = function (opener) {\n        this.dialogDelete.open(opener);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonGroup) !== null && _a !== void 0 ? _a : (this._toolShapeButtonGroup = this.newToolShapeButtonGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonGroup = function () {\n        var result = new DButtonGroup();\n        var diagram = this.diagram;\n        diagram.on(\"set\", function () {\n            result.enable();\n        });\n        diagram.on(\"unset\", function () {\n            result.disable();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonSelect\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonSelect) !== null && _a !== void 0 ? _a : (this._toolShapeButtonSelect = this.newToolShapeButtonSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonSelect = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonSelectTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.select\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonSelectActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonSelectInactive();\n                }\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonSelectActive = function () {\n        this.toolGroup.activate(this.toolShapeSelect);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonSelectInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeSelect);\n    };\n    FGraphicEditor.prototype.newToolShapeButtonCreate = function (title, icon, constructor) {\n        var _this = this;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: title,\n            theme: this._theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons[icon]\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonCreateActive(constructor);\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonCreateInactive();\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolShapeButtonCreateActive = function (constructor) {\n        var toolShapeCreate = this.toolShapeCreate;\n        toolShapeCreate.shape = function () { return new constructor(); };\n        this.toolGroup.activate(toolShapeCreate, constructor);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonCreateInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreate);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonCircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonCircle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonCircle = this.newToolShapeButtonCircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonCircle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonCircleTitle(), \"shape_circle\", EShapeCircle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonSemicircle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonSemicircle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonSemicircle = this.newToolShapeButtonSemicircle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonSemicircle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonSemicircleTitle(), \"shape_semicircle\", EShapeSemicircle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonRectangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonRectangle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonRectangle = this.newToolShapeButtonRectangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonRectangle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonRectangleTitle(), \"shape_rectangle\", EShapeRectangle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonRectangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonRectangleRounded) !== null && _a !== void 0 ? _a : (this._toolShapeButtonRectangleRounded = this.newToolShapeButtonRectangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonRectangleRounded = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonRectangleRoundedTitle(), \"shape_rectangle_rounded\", EShapeRectangleRounded);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonTriangle\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonTriangle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonTriangle = this.newToolShapeButtonTriangle()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonTriangle = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonTriangleTitle(), \"shape_triangle\", EShapeTriangle);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonTriangleRounded\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonTriangleRounded) !== null && _a !== void 0 ? _a : (this._toolShapeButtonTriangleRounded = this.newToolShapeButtonTriangleRounded()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonTriangleRounded = function () {\n        var theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonTriangleRoundedTitle(), \"shape_triangle_rounded\", EShapeTriangleRounded);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonLine) !== null && _a !== void 0 ? _a : (this._toolShapeButtonLine = this.newToolShapeButtonLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonLine = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonLineTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_line\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonLineActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonLineInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", function (shape) {\n            if (shape instanceof EShapeLine) {\n                var toolShapeEditLine = _this.toolShapeEditLine;\n                toolShapeEditLine.shape = shape;\n                _this.toolGroup.activate(toolShapeEditLine);\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineActive = function () {\n        this.toolGroup.activate(this.toolShapeCreateLine);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreateLine);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeButtonLineConnector = this.newToolShapeButtonLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonLineConnector = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonLineConnectorTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_line_connector\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonLineConnectorActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonLineConnectorInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", function (shape) {\n            if (shape instanceof EShapeConnectorLine) {\n                var toolShapeEditLineConnector = _this.toolShapeEditLineConnector;\n                toolShapeEditLineConnector.shape = shape;\n                _this.toolGroup.activate(toolShapeEditLineConnector);\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineConnectorActive = function () {\n        this.toolGroup.activate(this.toolShapeCreateLineConnector);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonLineConnectorInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreateLineConnector);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonElbowConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonElbowConnector) !== null && _a !== void 0 ? _a : (this._toolShapeButtonElbowConnector = this.newToolShapeButtonElbowConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonElbowConnector = function () {\n        var _this = this;\n        var theme = this._theme;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonElbowConnectorTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_elbow_connector\n            },\n            on: {\n                active: function () {\n                    _this.onToolShapeButtonElbowConnectorActive();\n                },\n                inactive: function () {\n                    _this.onToolShapeButtonElbowConnectorInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", function (shape) {\n            if (shape instanceof EShapeConnectorLine) {\n                var toolShapeEditLineConnector = _this.toolShapeEditLineConnector;\n                toolShapeEditLineConnector.shape = shape;\n                _this.toolGroup.activate(toolShapeEditLineConnector);\n            }\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.onToolShapeButtonElbowConnectorActive = function () {\n        this.toolGroup.activate(this.toolShapeCreateElbowConnector);\n    };\n    FGraphicEditor.prototype.onToolShapeButtonElbowConnectorInactive = function () {\n        this.toolGroup.deactivate(this.toolShapeCreateElbowConnector);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonImage\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonImage) !== null && _a !== void 0 ? _a : (this._toolShapeButtonImage = this.newToolShapeButtonImage()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonImage = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButtonFile({\n            group: this.toolShapeButtonGroup,\n            title: theme.getToolShapeButtonImageTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            as: DButtonFileAs.DATA_URL,\n            image: {\n                source: this._icons.editor_image\n            },\n            on: {\n                open: function (dataUrl) {\n                    _this.onToolShapeButtonImageOpen(dataUrl);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolShapeButtonImageOpen = function (dataUrl) {\n        var _this = this;\n        var diagram = this.diagram;\n        var layer = diagram.layer;\n        var canvas = diagram.canvas;\n        if (canvas != null && layer != null) {\n            createImage(dataUrl).then(function (shape) {\n                shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                shape.attach(layer);\n                DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, _this.toolShapeSelect.selection, true));\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeButtonGraphicPiece\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeButtonGraphicPiece) !== null && _a !== void 0 ? _a : (this._toolShapeButtonGraphicPiece = this.newToolShapeButtonGraphicPiece()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeButtonGraphicPiece = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            title: theme.getToolShapeButtonGraphicPieceTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.graphic_piece\n            },\n            on: {\n                active: function (emitter) {\n                    _this.onToolShapeButtonGraphicPieceActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onToolShapeButtonGraphicPieceActive = function (opener) {\n        this.dialogSelectPiece.then(function (dialogSelectPiece) {\n            dialogSelectPiece.open(opener);\n        });\n    };\n    FGraphicEditor.prototype.newToolShapeButtonExtensionFactory = function (factory) {\n        var _this = this;\n        var dialogSelect = null;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            title: this.toExtensionTitle(factory),\n            theme: this._theme.getToolShapeButtonTheme(),\n            image: {\n                source: factory.icon.texture\n            },\n            on: {\n                active: function (emitter) {\n                    (dialogSelect !== null && dialogSelect !== void 0 ? dialogSelect : (dialogSelect = _this.newDialogSelectExtensionFactory(factory))).open(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newToolShapeButtonExtension = function (extension) {\n        var _this = this;\n        var creatorOrTool = null;\n        var result = new DButton({\n            group: this.toolShapeButtonGroup,\n            title: this.toExtensionTitle(extension),\n            theme: this._theme.getToolShapeButtonTheme(),\n            toggle: true,\n            image: {\n                source: extension.icon.texture\n            },\n            on: {\n                active: function () {\n                    if (creatorOrTool == null) {\n                        creatorOrTool = _this.toExtensionCreatorOrTool(extension);\n                    }\n                    _this.onToolShapeButtonExtensionActive(creatorOrTool);\n                },\n                inactive: function () {\n                    if (creatorOrTool == null) {\n                        creatorOrTool = _this.toExtensionCreatorOrTool(extension);\n                    }\n                    _this.onToolShapeButtonExtensionInactive(creatorOrTool);\n                }\n            }\n        });\n        if (\"type\" in extension) {\n            var updaterCreatorOrOptions_1 = extension.updater;\n            if (updaterCreatorOrOptions_1 != null) {\n                var type_1 = extension.type;\n                var updater_1 = null;\n                this.toolShapeSelect.on(\"edit\", function (shape) {\n                    if (shape.type === type_1) {\n                        if (updater_1 == null) {\n                            updater_1 = _this.toExtensionUpdater(updaterCreatorOrOptions_1);\n                        }\n                        updater_1.shape = shape;\n                        _this.toolGroup.activate(updater_1);\n                    }\n                });\n            }\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.toExtensionUpdater = function (updaterCreatorOrOptions) {\n        var _this = this;\n        var updaterCreator = isFunction(updaterCreatorOrOptions)\n            ? updaterCreatorOrOptions\n            : updaterCreatorOrOptions.tool;\n        var result = updaterCreator(this.toolShapeSelect.selection, this.diagram);\n        result.on(\"done\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        result.on(\"cancel\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.toExtensionCreatorOrTool = function (extension) {\n        var _this = this;\n        var creator = extension.creator;\n        if (isFunction(creator)) {\n            return creator;\n        }\n        else {\n            var result = creator.tool(this.toolShapeSelect.selection, this.diagram);\n            result.on(\"done\", function () {\n                _this.toolShapeButtonSelect.activate();\n            });\n            result.on(\"cancel\", function () {\n                _this.toolShapeButtonSelect.activate();\n            });\n            return result;\n        }\n    };\n    FGraphicEditor.prototype.onToolShapeButtonExtensionActive = function (creatorOrTool) {\n        var toolGroup = this.toolGroup;\n        if (isFunction(creatorOrTool)) {\n            var toolShapeCreate = this.toolShapeCreate;\n            toolShapeCreate.shape = creatorOrTool;\n            toolGroup.activate(toolShapeCreate, creatorOrTool);\n        }\n        else {\n            toolGroup.activate(creatorOrTool);\n        }\n    };\n    FGraphicEditor.prototype.onToolShapeButtonExtensionInactive = function (creatorOrTool) {\n        var toolGroup = this.toolGroup;\n        if (isFunction(creatorOrTool)) {\n            toolGroup.deactivate(this.toolShapeCreate, creatorOrTool);\n        }\n        else {\n            toolGroup.deactivate(creatorOrTool);\n        }\n    };\n    FGraphicEditor.prototype.toExtensionTitle = function (extension) {\n        var title = extension.title;\n        if (isString(title)) {\n            return title;\n        }\n        return title.create;\n    };\n    FGraphicEditor.prototype.newDialogSelectExtensionFactory = function (factory) {\n        var _this = this;\n        return new DDialogSelect({\n            controller: factory,\n            list: {\n                data: {\n                    toLabel: factory.item.toLabel\n                }\n            },\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectExtensionFactorySelect(value, factory);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onDialogSelectExtensionFactorySelect = function (value, factory) {\n        var _this = this;\n        var diagram = this.diagram;\n        var layer = diagram.layer;\n        var canvas = diagram.canvas;\n        if (canvas && layer) {\n            factory.item.toCreator(value).then(function (creator) {\n                var shape = creator();\n                shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                shape.attach(layer);\n                DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, _this.toolShapeSelect.selection, true));\n            });\n        }\n    };\n    FGraphicEditor.prototype.newToolFileButtons = function () {\n        return [\n            this.toolFileButtonCreate,\n            this.toolFileButtonOpen,\n            this.toolFileButtonSave,\n            this.toolFileButtonSaveAs,\n            this.toolFileButtonUpload,\n            this.toolFileButtonDownload,\n            this.toolFileButtonUndo,\n            this.toolFileButtonRedo,\n            this.toolFileButtonDelete\n        ];\n    };\n    FGraphicEditor.prototype.newToolShapeButtons = function () {\n        var result = [\n            this.toolShapeButtonSelect,\n            this.toolShapeButtonLine,\n            this.toolShapeButtonCircle,\n            this.toolShapeButtonSemicircle,\n            this.toolShapeButtonRectangle,\n            this.toolShapeButtonRectangleRounded,\n            this.toolShapeButtonTriangle,\n            this.toolShapeButtonTriangleRounded,\n            this.toolShapeButtonLineConnector,\n            this.toolShapeButtonElbowConnector,\n            this.toolShapeButtonImage\n        ];\n        if (this._isPieceEnabled) {\n            result.push(this.toolShapeButtonGraphicPiece);\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.newToolShapeButtonsExtension = function () {\n        var _this = this;\n        var result = [];\n        EShapeExtensions.each(function (extension) {\n            if (\"icon\" in extension) {\n                result.push(_this.newToolShapeButtonExtension(extension));\n            }\n        });\n        EShapeExtensionFactories.each(function (factory) {\n            result.push(_this.newToolShapeButtonExtensionFactory(factory));\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.getToolButtonLayoutContainer = function () {\n        return this._application.stage;\n    };\n    FGraphicEditor.prototype.newToolButtonLayout = function () {\n        var margin = this._margin;\n        return new DLayoutVertical({\n            x: margin,\n            y: this.getToolButtonLayoutY(margin),\n            theme: \"EButtonToolLayout\",\n            children: this.newToolButtons()\n        });\n    };\n    FGraphicEditor.prototype.getToolButtonLayoutY = function (margin) {\n        var header = this._header;\n        if (header != null) {\n            return margin + header.height + margin;\n        }\n        return margin;\n    };\n    FGraphicEditor.prototype.newToolButtons = function () {\n        var toolFileButtonCreate = this._toolFileButtonCreate;\n        if (toolFileButtonCreate == null || toolFileButtonCreate.parent == null) {\n            return this.newToolFileButtons()\n                .concat(new DLayoutSpace({ height: 10 }))\n                .concat(this.newToolShapeButtons())\n                .concat(this.newToolShapeButtonsExtension());\n        }\n        else {\n            return this.newToolShapeButtons().concat(this.newToolShapeButtonsExtension());\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonGroup) !== null && _a !== void 0 ? _a : (this._editorButtonGroup = this.newEditorButtonGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonGroup = function () {\n        return undefined;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonCoordinate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonCoordinate) !== null && _a !== void 0 ? _a : (this._editorButtonCoordinate = this.newEditorButtonCoordinate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonCoordinate = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_coordinate\n            },\n            title: theme.getEditorButtonCoordinateTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorCoordinate.show();\n                },\n                inactive: function () {\n                    _this.editorCoordinate.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorCoordinate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorCoordinate) !== null && _a !== void 0 ? _a : (this._editorCoordinate = this.newEditorCoordinate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorCoordinate = function () {\n        return this.initEditor(0, new EEditorCoordinate({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    };\n    FGraphicEditor.prototype.initEditor = function (zIndex, editor) {\n        editor.zIndex = zIndex;\n        editor.parent.sortChildren();\n        editor.interactive = true;\n        if (editor instanceof DBase) {\n            editor.state.isFocusable = false;\n        }\n        return editor;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonShape\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonShape) !== null && _a !== void 0 ? _a : (this._editorButtonShape = this.newEditorButtonShape()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonShape = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_shape\n            },\n            title: theme.getEditorButtonShapeTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorShape.show();\n                },\n                inactive: function () {\n                    _this.editorShape.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorShape\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorShape) !== null && _a !== void 0 ? _a : (this._editorShape = this.newEditorShape()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorShape = function () {\n        var _this = this;\n        return this.initEditor(1, new EEditorShape({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            canvas: this._canvas,\n            content: {\n                theme: \"EEditorPaneContent\"\n            },\n            piece: {\n                enable: this._isPieceEnabled,\n                controller: this._options.controller,\n                exclude: function () {\n                    return _this._toPieceId(_this.diagram);\n                }\n            },\n            connector: {\n                dangling: this.isDanglingConnectorAllowed()\n            }\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonText\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonText) !== null && _a !== void 0 ? _a : (this._editorButtonText = this.newEditorButtonText()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonText = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_text\n            },\n            title: theme.getEditorButtonTextTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorText.show();\n                },\n                inactive: function () {\n                    _this.editorText.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorText\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorText) !== null && _a !== void 0 ? _a : (this._editorText = this.newEditorText()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorText = function () {\n        return this.initEditor(2, new EEditorText({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            content: {\n                theme: \"EEditorPaneContent\"\n            }\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonData\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonData) !== null && _a !== void 0 ? _a : (this._editorButtonData = this.newEditorButtonData()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonData = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_data\n            },\n            title: theme.getEditorButtonDataTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorData.show();\n                },\n                inactive: function () {\n                    _this.editorData.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorData\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorData) !== null && _a !== void 0 ? _a : (this._editorData = this.newEditorData()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorData = function () {\n        return this.initEditor(3, new EEditorData({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonDataMapping\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonDataMapping) !== null && _a !== void 0 ? _a : (this._editorButtonDataMapping = this.newEditorButtonDataMapping()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonDataMapping = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_data_mapping\n            },\n            title: theme.getEditorButtonDataMappingTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorDataMapping.show();\n                },\n                inactive: function () {\n                    _this.editorDataMapping.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorDataMapping\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorDataMapping) !== null && _a !== void 0 ? _a : (this._editorDataMapping = this.newEditorDataMapping()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorDataMapping = function () {\n        return this.initEditor(4, new EEditorDataMapping({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonAction\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonAction) !== null && _a !== void 0 ? _a : (this._editorButtonAction = this.newEditorButtonAction()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonAction = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_action\n            },\n            title: theme.getEditorButtonActionTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorAction.show();\n                },\n                inactive: function () {\n                    _this.editorAction.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorAction\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorAction) !== null && _a !== void 0 ? _a : (this._editorAction = this.newEditorAction()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorAction = function () {\n        return this.initEditor(5, new EEditorAction({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonTree\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonTree) !== null && _a !== void 0 ? _a : (this._editorButtonTree = this.newEditorButtonTree()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonTree = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_tree\n            },\n            title: theme.getEditorButtonTreeTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorTree.show();\n                },\n                inactive: function () {\n                    _this.editorTree.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorTree\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorTree) !== null && _a !== void 0 ? _a : (this._editorTree = this.newEditorTree()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorTree = function () {\n        return this.initEditor(6, new EEditorTree({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonLayer) !== null && _a !== void 0 ? _a : (this._editorButtonLayer = this.newEditorButtonLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonLayer = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_layer\n            },\n            title: theme.getEditorButtonLayerTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorLayer.show();\n                },\n                inactive: function () {\n                    _this.editorLayer.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorLayer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorLayer) !== null && _a !== void 0 ? _a : (this._editorLayer = this.newEditorLayer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorLayer = function () {\n        return this.initEditor(7, new EEditorLayer({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonSnap\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonSnap) !== null && _a !== void 0 ? _a : (this._editorButtonSnap = this.newEditorButtonSnap()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonSnap = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_snap\n            },\n            title: theme.getEditorButtonSnapTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorSnap.show();\n                },\n                inactive: function () {\n                    _this.editorSnap.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorSnap\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorSnap) !== null && _a !== void 0 ? _a : (this._editorSnap = this.newEditorSnap()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorSnap = function () {\n        return this.initEditor(8, new EEditorSnap({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonValidation\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonValidation) !== null && _a !== void 0 ? _a : (this._editorButtonValidation = this.newEditorButtonValidation()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonValidation = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_validation\n            },\n            title: theme.getEditorButtonValidationTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorValidation.show();\n                },\n                inactive: function () {\n                    _this.editorValidation.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorValidation\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorValidation) !== null && _a !== void 0 ? _a : (this._editorValidation = this.newEditorValidation()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorValidation = function () {\n        return this.initEditor(9, new EEditorValidation({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram,\n            validator: this._validation.validator\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonSearch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonSearch) !== null && _a !== void 0 ? _a : (this._editorButtonSearch = this.newEditorButtonSearch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonSearch = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_search\n            },\n            title: theme.getEditorButtonSearchTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorSearch.show();\n                },\n                inactive: function () {\n                    _this.editorSearch.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorSearch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorSearch) !== null && _a !== void 0 ? _a : (this._editorSearch = this.newEditorSearch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorSearch = function () {\n        return this.initEditor(9, new EEditorSearch({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram,\n            finder: this._search.finder,\n            interval: this._search.interval\n        }));\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorCanvas\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorCanvas) !== null && _a !== void 0 ? _a : (this._editorCanvas = this.newEditorCanvas()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorCanvas = function () {\n        return new EEditorCanvas({\n            icons: this._icons,\n            diagram: this.diagram,\n            canvas: this._canvas\n        });\n    };\n    FGraphicEditor.prototype.isEditorCanvasCompatible = function () {\n        var _a, _b;\n        return !!((_b = (_a = this._options.compatibility) === null || _a === void 0 ? void 0 : _a.editor) === null || _b === void 0 ? void 0 : _b.canvas);\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorButtonCanvasLegacy\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorButtonCanvasLegacy) !== null && _a !== void 0 ? _a : (this._editorButtonCanvasLegacy = this.newEditorButtonCanvasLegacy()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorButtonCanvasLegacy = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_canvas_legacy\n            },\n            title: theme.getEditorButtonCanvasLegacyTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: function () {\n                    _this.editorCanvasLegacy.show();\n                },\n                inactive: function () {\n                    _this.editorCanvasLegacy.hide();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorCanvasLegacy\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorCanvasLegacy) !== null && _a !== void 0 ? _a : (this._editorCanvasLegacy = this.newEditorCanvasLegacy()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorCanvasLegacy = function () {\n        return this.initEditor(10, new EEditorCanvasLegacy({\n            parent: this.editorContainer,\n            diagram: this.diagram,\n            canvas: this._canvas,\n            content: {\n                theme: \"EEditorPaneContent\"\n            }\n        }));\n    };\n    FGraphicEditor.prototype.newEditorButtonExtension = function (extension, editor) {\n        var _this = this;\n        var editorInstance = null;\n        var result = new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: extension.icon.texture\n            },\n            title: editor.title,\n            theme: this._theme.getEditorButtonTheme(),\n            visible: false,\n            on: {\n                active: function () {\n                    editorInstance !== null && editorInstance !== void 0 ? editorInstance : (editorInstance = _this.newEditorExtension(editor));\n                    editorInstance.show();\n                },\n                inactive: function () {\n                    if (editorInstance) {\n                        editorInstance.hide();\n                    }\n                }\n            }\n        });\n        var selection = this.toolShapeSelect.selection;\n        selection.on(\"change\", function () {\n            _this.onEditorButtonExtensionSelectionChange(result, extension.type);\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.newEditorExtension = function (editor) {\n        return this.initEditor(11, new editor.constructor({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            icons: this._icons,\n            content: {\n                theme: \"EEditorPaneContent\"\n            },\n            theme: editor.theme\n        }));\n    };\n    FGraphicEditor.prototype.onEditorButtonExtensionSelectionChange = function (button, extensionType) {\n        var selection = this.toolShapeSelect.selection;\n        var last = selection.last();\n        var buttonLast = this._editorButtonExtensionLast;\n        if (last != null && last.type === extensionType && buttonLast !== button) {\n            var wasActive = false;\n            if (buttonLast != null) {\n                buttonLast.hide();\n                if (buttonLast.state.isActive) {\n                    buttonLast.activate();\n                    wasActive = true;\n                }\n            }\n            button.show();\n            this._editorButtonExtensionLast = button;\n            if (wasActive && !button.state.isActive) {\n                button.activate();\n            }\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonZoomOut\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonZoomOut) !== null && _a !== void 0 ? _a : (this._viewButtonZoomOut = this.newViewButtonZoomOut()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonZoomOut = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomOut();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonZoomIn\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonZoomIn) !== null && _a !== void 0 ? _a : (this._viewButtonZoomIn = this.newViewButtonZoomIn()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonZoomIn = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomIn();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonDragAndPinch\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonDragAndPinch) !== null && _a !== void 0 ? _a : (this._viewButtonDragAndPinch = this.newViewButtonDragAndPinch()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonDragAndPinch = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.camera\n            },\n            toggle: true,\n            title: theme.getViewButtonDragAndPinchTitle(),\n            shortcut: theme.getViewButtonDragAndPinchShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.toolGroup.suspend();\n                },\n                inactive: function () {\n                    _this.toolGroup.resume();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonReset\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonReset) !== null && _a !== void 0 ? _a : (this._viewButtonReset = this.newViewButtonReset()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonReset = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.reset();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"viewButtonFit\", {\n        get: function () {\n            var _a;\n            return ((_a = this._viewButtonFit) !== null && _a !== void 0 ? _a : (this._viewButtonFit = this.newViewButtonFit()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newViewButtonFit = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.fit();\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newEditorButtons = function () {\n        var _this = this;\n        var result = [\n            this.editorButtonCoordinate,\n            this.editorButtonShape,\n            this.editorButtonText,\n            this.editorButtonData,\n            this.editorButtonDataMapping,\n            this.editorButtonAction,\n            this.editorButtonTree,\n            this.editorButtonLayer,\n            this.editorButtonSnap\n        ];\n        if (this._validation.validator != null) {\n            result.push(this.editorButtonValidation);\n        }\n        result.push(this.editorButtonSearch);\n        if (this.isEditorCanvasCompatible()) {\n            result.push(this.editorButtonCanvasLegacy);\n        }\n        EShapeExtensions.each(function (extension) {\n            if (\"editor\" in extension) {\n                var editor = _this.toEditorExtentionConstructorOptions(extension);\n                if (editor) {\n                    result.push(_this.newEditorButtonExtension(extension, editor));\n                }\n            }\n        });\n        result.push(new DLayoutSpace({\n            weight: 1\n        }), this.viewButtonZoomOut, this.viewButtonZoomIn, this.viewButtonDragAndPinch, this.viewButtonReset, this.viewButtonFit);\n        return result;\n    };\n    FGraphicEditor.prototype.toEditorExtentionConstructorOptions = function (extension) {\n        var _a, _b;\n        var editor = extension.editor;\n        if (isFunction(editor)) {\n            return {\n                constructor: editor,\n                title: extension.name || \"\",\n                theme: \"EEditorPane\"\n            };\n        }\n        else if (editor.constructor) {\n            return {\n                constructor: editor.constructor,\n                title: (_a = editor.title) !== null && _a !== void 0 ? _a : (extension.name || \"\"),\n                theme: (_b = editor.theme) !== null && _b !== void 0 ? _b : \"EEditorPane\"\n            };\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"editorContainer\", {\n        get: function () {\n            var _a;\n            return ((_a = this._editorContainer) !== null && _a !== void 0 ? _a : (this._editorContainer = this.newEditorContainer()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newEditorContainer = function () {\n        return new DLayoutHorizontal({\n            width: \"auto\",\n            height: \"padding\"\n        });\n    };\n    FGraphicEditor.prototype.getEditorLayoutContainer = function () {\n        return this._application.stage;\n    };\n    FGraphicEditor.prototype.newEditorLayout = function () {\n        var _this = this;\n        var margin = this._margin;\n        var y = this.getToolButtonLayoutY(margin);\n        return new DLayoutHorizontal({\n            x: function (p, s) { return p - s - margin; },\n            y: y,\n            width: \"auto\",\n            height: function (p) { return p - y - margin; },\n            theme: \"EEditorLayout\",\n            children: [this.editorContainer, this.newEditorButtonLayout()],\n            on: {\n                resize: function (width, height) {\n                    _this.onEditorLayoutResized(width, height);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newEditorButtonLayout = function () {\n        return new DLayoutVertical({\n            theme: \"EEditorButtonLayout\",\n            children: this.newEditorButtons()\n        });\n    };\n    FGraphicEditor.prototype.onEditorLayoutResized = function (width, height) {\n        // The tool layout width is `margin + 65`.\n        // The editor layout width is `width`.\n        // Therefore here shifts the diagram `(margin + 65 - width) * 0.5` along the X axis.\n        var diagram = this.diagram;\n        var theme = diagram.theme;\n        var padding = diagram.padding;\n        var margin = this._margin;\n        var os = padding.getLeft() - padding.getRight();\n        padding.left = theme.getPaddingLeft() + margin + 65;\n        padding.right = theme.getPaddingRight() + margin + width;\n        var canvas = diagram.canvas;\n        if (canvas != null) {\n            var ns = padding.getLeft() - padding.getRight();\n            canvas.position.x += (ns - os) * 0.5;\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeSelect\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeSelect) !== null && _a !== void 0 ? _a : (this._toolShapeSelect = this.newToolShapeSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeSelect = function () {\n        var diagram = this.diagram;\n        var result = new EToolSelect({ diagram: diagram });\n        diagram.on(\"set\", function () {\n            result.selection.clear();\n        });\n        diagram.on(\"unset\", function () {\n            result.selection.clear();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreate) !== null && _a !== void 0 ? _a : (this._toolShapeCreate = this.newToolShapeCreate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreate = function () {\n        var _this = this;\n        var result = new EToolShapeCreate(this.toolShapeSelect.selection, this.diagram);\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreateLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreateLine) !== null && _a !== void 0 ? _a : (this._toolShapeCreateLine = this.newToolShapeCreateLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreateLine = function () {\n        var _this = this;\n        var result = new EToolShapeCreateLine({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreateLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreateLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeCreateLineConnector = this.newToolShapeCreateLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreateLineConnector = function () {\n        var _this = this;\n        var result = new EToolShapeCreateLineConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeCreateElbowConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeCreateElbowConnector) !== null && _a !== void 0 ? _a : (this._toolShapeCreateElbowConnector = this.newToolShapeCreateElbowConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeCreateElbowConnector = function () {\n        var _this = this;\n        var result = new EToolShapeCreateElbowConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", function () {\n            _this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    };\n    FGraphicEditor.prototype.isDanglingConnectorAllowed = function () {\n        var _a;\n        return (_a = this._options.connector) === null || _a === void 0 ? void 0 : _a.dangling;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeEditLine\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeEditLine) !== null && _a !== void 0 ? _a : (this._toolShapeEditLine = this.newToolShapeEditLine()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeEditLine = function () {\n        var _this = this;\n        var result = new EToolShapeEditLine({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        result.on(\"cancel\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolShapeEditLineConnector\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolShapeEditLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeEditLineConnector = this.newToolShapeEditLineConnector()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolShapeEditLineConnector = function () {\n        var _this = this;\n        var result = new EToolShapeEditLineConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        result.on(\"cancel\", function () {\n            _this.toolGroup.activate(_this.toolShapeSelect);\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"toolGroup\", {\n        get: function () {\n            var _a;\n            return ((_a = this._toolGroup) !== null && _a !== void 0 ? _a : (this._toolGroup = this.newToolGroup()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newToolGroup = function () {\n        return new EToolGroupImpl();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"diagram\", {\n        get: function () {\n            var _a;\n            return ((_a = this._diagram) !== null && _a !== void 0 ? _a : (this._diagram = this.newDiagram()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDiagram = function () {\n        return new DDiagramEditor(this.toDiagramOptions(this._options));\n    };\n    FGraphicEditor.prototype.getDiagramContainer = function () {\n        return this._application.stage;\n    };\n    FGraphicEditor.prototype.toDiagramOptions = function (options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6;\n        var result = options.diagram || {};\n        // Controller\n        (_a = result.controller) !== null && _a !== void 0 ? _a : (result.controller = this._controller.graphic);\n        // Coordinate\n        (_b = result.x) !== null && _b !== void 0 ? _b : (result.x = 0);\n        (_c = result.y) !== null && _c !== void 0 ? _c : (result.y = 0);\n        (_d = result.width) !== null && _d !== void 0 ? _d : (result.width = \"100%\");\n        (_e = result.height) !== null && _e !== void 0 ? _e : (result.height = \"100%\");\n        // Outline\n        var outline = ((_f = result.outline) !== null && _f !== void 0 ? _f : (result.outline = {}));\n        (_g = outline.color) !== null && _g !== void 0 ? _g : (outline.color = null);\n        // View settings\n        var view = ((_h = result.view) !== null && _h !== void 0 ? _h : (result.view = {}));\n        var gesture = ((_j = view.gesture) !== null && _j !== void 0 ? _j : (view.gesture = {}));\n        (_k = gesture.modifier) !== null && _k !== void 0 ? _k : (gesture.modifier = UtilGestureModifier.ALT);\n        var checker = ((_l = gesture.checker) !== null && _l !== void 0 ? _l : (gesture.checker = {}));\n        (_m = checker.start) !== null && _m !== void 0 ? _m : (checker.start = function (e, modifier) {\n            return UtilGestureModifiers.match(e, modifier) || _this.toolGroup.isSuspended();\n        });\n        (_o = checker.move) !== null && _o !== void 0 ? _o : (checker.move = function (e, modifier) {\n            return UtilGestureModifiers.match(e, modifier) || _this.diagram.state.isGesturing;\n        });\n        var zoom = ((_p = view.zoom) !== null && _p !== void 0 ? _p : (view.zoom = {}));\n        var dblclick = ((_q = zoom.dblclick) !== null && _q !== void 0 ? _q : (zoom.dblclick = {}));\n        (_r = dblclick.checker) !== null && _r !== void 0 ? _r : (dblclick.checker = function (e, modifier) {\n            return _this.toolGroup.isSuspended();\n        });\n        var viewOn = ((_s = view.on) !== null && _s !== void 0 ? _s : (view.on = {}));\n        (_t = viewOn.gesturestart) !== null && _t !== void 0 ? _t : (viewOn.gesturestart = function () {\n            _this.onDiagramViewOnStart();\n        });\n        (_u = viewOn.transformstart) !== null && _u !== void 0 ? _u : (viewOn.transformstart = function () {\n            _this.onDiagramViewOnStart();\n        });\n        (_v = viewOn.wheeltranslationstart) !== null && _v !== void 0 ? _v : (viewOn.wheeltranslationstart = function () {\n            _this.onDiagramViewOnStart();\n        });\n        (_w = view.constraint) !== null && _w !== void 0 ? _w : (view.constraint = function (target, x, y, scaleX, scaleY) {\n            _this.onDiagramViewConstraint(target, x, y, scaleX, scaleY);\n        });\n        // Thumbnail settings\n        var thumbnail = result.thumbnail;\n        if (thumbnail === null || thumbnail === void 0 ? void 0 : thumbnail.enable) {\n            (_x = thumbnail.size) !== null && _x !== void 0 ? _x : (thumbnail.size = getDialogSelectThumbnailSize() * 2);\n        }\n        // Event settings\n        var on = ((_y = result.on) !== null && _y !== void 0 ? _y : (result.on = {}));\n        (_z = on.saving) !== null && _z !== void 0 ? _z : (on.saving = function () {\n            _this.onDiagramSaving(_this._toolFileButtonSave);\n        });\n        (_0 = on.saved) !== null && _0 !== void 0 ? _0 : (on.saved = function (reason) {\n            _this.onDiagramSaved(reason, _this._toolFileButtonSave);\n        });\n        (_1 = on.deleting) !== null && _1 !== void 0 ? _1 : (on.deleting = function () {\n            _this.onDiagramDeleting(_this._toolFileButtonDelete);\n        });\n        (_2 = on.deleted) !== null && _2 !== void 0 ? _2 : (on.deleted = function (reason) {\n            _this.onDiagramDeleted(reason, _this._toolFileButtonDelete);\n        });\n        // Snapshot event settings\n        var snapshot = ((_3 = result.snapshot) !== null && _3 !== void 0 ? _3 : (result.snapshot = {}));\n        var snapshotOn = ((_4 = snapshot.on) !== null && _4 !== void 0 ? _4 : (snapshot.on = {}));\n        (_5 = snapshotOn.taking) !== null && _5 !== void 0 ? _5 : (snapshotOn.taking = function () {\n            _this.onDiagramSnapshotTaking();\n        });\n        (_6 = snapshotOn.took) !== null && _6 !== void 0 ? _6 : (snapshotOn.took = function () {\n            _this.onDiagramSnapshotTook();\n        });\n        // Done\n        return result;\n    };\n    FGraphicEditor.prototype.onDiagramViewOnStart = function () {\n        var _a, _b;\n        var diagram = this._diagram;\n        if (diagram != null) {\n            var d = ((_a = this._localBoundsDiagram) !== null && _a !== void 0 ? _a : (this._localBoundsDiagram = new Rectangle()));\n            var p = diagram.padding;\n            var l = p.getLeft() - 65 - this._margin;\n            var t = p.getTop();\n            var r = diagram.width - p.getRight();\n            var b = diagram.height - p.getBottom();\n            d.x = l;\n            d.y = t;\n            d.width = Math.max(0, r - l);\n            d.height = Math.max(0, b - t);\n            var canvas = diagram.canvas;\n            if (canvas != null) {\n                var c = ((_b = this._localBoundsCanvas) !== null && _b !== void 0 ? _b : (this._localBoundsCanvas = new Rectangle()));\n                canvas.getLocalBounds(c);\n            }\n        }\n    };\n    FGraphicEditor.prototype.onDiagramViewConstraint = function (target, x, y, sx, sy) {\n        var d = this._localBoundsDiagram;\n        var c = this._localBoundsCanvas;\n        if (d != null && c != null) {\n            target.position.set(Math.max(d.x - (c.x + c.width) * sx, Math.min(d.x + d.width - c.x * sx, x)), Math.max(d.y - (c.y + c.height) * sy, Math.min(d.y + d.height - c.y * sy, y)));\n            target.scale.set(sx, sy);\n        }\n    };\n    FGraphicEditor.prototype.onDiagramSaving = function (opener) {\n        this.dialogSaveProcessing.open(opener);\n    };\n    FGraphicEditor.prototype.onDiagramSaved = function (reason, opener) {\n        var _this = this;\n        var dialogSaveProcessing = this.dialogSaveProcessing;\n        if (reason == null) {\n            dialogSaveProcessing.resolve();\n        }\n        else {\n            if (reason === \"duplication\") {\n                dialogSaveProcessing.once(\"close\", function () {\n                    _this.dialogSaveAs.open(opener);\n                });\n            }\n            dialogSaveProcessing.reject(reason);\n        }\n    };\n    FGraphicEditor.prototype.onDiagramDeleting = function (opener) {\n        this.dialogDeleteProcessing.open(opener);\n    };\n    FGraphicEditor.prototype.onDiagramDeleted = function (reason, opener) {\n        var dialogDeleteProcessing = this.dialogDeleteProcessing;\n        if (reason == null) {\n            dialogDeleteProcessing.resolve();\n        }\n        else {\n            dialogDeleteProcessing.reject(reason);\n        }\n    };\n    FGraphicEditor.prototype.onDiagramSnapshotTaking = function () {\n        this.toolShapeSelect.selection.modifier.renderable = false;\n    };\n    FGraphicEditor.prototype.onDiagramSnapshotTook = function () {\n        this.toolShapeSelect.selection.modifier.renderable = true;\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSaveProcessing\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSaveProcessing) !== null && _a !== void 0 ? _a : (this._dialogSaveProcessing = this.newDialogSaveProcessing()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSaveProcessing = function () {\n        return new EDialogProcessing();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogDeleteProcessing\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogDeleteProcessing) !== null && _a !== void 0 ? _a : (this._dialogDeleteProcessing = this.newDialogDeleteProcessing()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogDeleteProcessing = function () {\n        return new EDialogProcessing();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSaveAs\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSaveAs) !== null && _a !== void 0 ? _a : (this._dialogSaveAs = this.newDialogSaveAs()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSaveAs = function () {\n        return new DDialogSaveAs();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogCreate\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogCreate) !== null && _a !== void 0 ? _a : (this._dialogCreate = this.newDialogCreate()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogCreate = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            return new EDialogCanvas({\n                canvas: canvas,\n                on: {\n                    ok: function (value, emitter) {\n                        _this.onDialogCreateOk(value, emitter);\n                    }\n                }\n            });\n        });\n    };\n    FGraphicEditor.prototype.onDialogCreateOk = function (value, opener) {\n        var _this = this;\n        this.diagram.create(value).then(function (canvas) {\n            DControllers.getCommandController().push(new ECommandDocumentCreate(_this.diagram, canvas));\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogDiscard\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogDiscard) !== null && _a !== void 0 ? _a : (this._dialogDiscard = this.newDialogDiscard()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogDiscard = function () {\n        return new DDialogConfirmDiscard();\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSelect\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSelect) !== null && _a !== void 0 ? _a : (this._dialogSelect = this.newDialogSelect()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSelect = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            var _a, _b;\n            if ((_b = (_a = _this._options.diagram) === null || _a === void 0 ? void 0 : _a.thumbnail) === null || _b === void 0 ? void 0 : _b.enable) {\n                var result = _this.newDialogSelectImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectNoImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this._controller.graphic,\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onDialogSelectSelect = function (value) {\n        var _this = this;\n        this.diagram.open(value.id).then(function (canvas) {\n            DControllers.getCommandController().push(new ECommandDocumentOpen(_this.diagram, canvas));\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectImage = function () {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this._options.controller.graphic, this._controller.toThumbnail, function (value) {\n            _this.onDialogSelectSelect(value);\n        });\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogSelectPiece\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogSelectPiece) !== null && _a !== void 0 ? _a : (this._dialogSelectPiece = this.newDialogSelectPiece()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogSelectPiece = function () {\n        var _this = this;\n        return this._canvas.get().then(function (canvas) {\n            var _a, _b;\n            if ((_b = (_a = _this._options.diagram) === null || _a === void 0 ? void 0 : _a.thumbnail) === null || _b === void 0 ? void 0 : _b.enable) {\n                var result = _this.newDialogSelectPieceImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectPieceNoImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectPieceNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this.newDialogSelectPieceController(),\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectPieceSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectPieceImage = function () {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this.newDialogSelectPieceController(), this._options.controller.toPieceThumbnail, function (value) {\n            _this.onDialogSelectPieceSelect(value);\n        });\n    };\n    FGraphicEditor.prototype.newDialogSelectPieceController = function () {\n        var _this = this;\n        var graphicPiece = this._options.controller.graphic.piece;\n        return {\n            search: function (word, categoryId) {\n                if (categoryId === undefined) {\n                    return graphicPiece.search(word).then(function (pieces) {\n                        return _this.toDialogSelectPieceResult(pieces);\n                    });\n                }\n                else {\n                    return graphicPiece.search(word, categoryId).then(function (pieces) {\n                        return _this.toDialogSelectPieceResult(pieces);\n                    });\n                }\n            }\n        };\n    };\n    FGraphicEditor.prototype.toDialogSelectPieceResult = function (targets) {\n        var pieceId = this._toPieceId(this.diagram);\n        if (pieceId == null) {\n            return targets;\n        }\n        var result = [];\n        for (var i = 0, imax = targets.length; i < imax; ++i) {\n            var target = targets[i];\n            if (target.id !== pieceId) {\n                result.push(target);\n            }\n        }\n        return result;\n    };\n    FGraphicEditor.prototype.onDialogSelectPieceSelect = function (value) {\n        var _this = this;\n        var diagram = this.diagram;\n        var layer = diagram.layer;\n        var canvas = diagram.canvas;\n        if (canvas && layer) {\n            var graphic_1 = this._options.controller.graphic;\n            graphic_1.piece.get(value.id).then(function (serialized) {\n                EShapeEmbeddeds.from(serialized, graphic_1, EShapeResourceManagerDeserializationMode.EDITOR).then(function (shape) {\n                    shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                    shape.attach(layer);\n                    DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, _this.toolShapeSelect.selection, true));\n                });\n            });\n        }\n    };\n    Object.defineProperty(FGraphicEditor.prototype, \"dialogDelete\", {\n        get: function () {\n            var _a;\n            return ((_a = this._dialogDelete) !== null && _a !== void 0 ? _a : (this._dialogDelete = this.newDialogDelete()));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicEditor.prototype.newDialogDelete = function () {\n        var _this = this;\n        return new DDialogConfirmDelete({\n            on: {\n                ok: function (value, emitter) {\n                    _this.onDialogDeleteOk(emitter);\n                }\n            }\n        });\n    };\n    FGraphicEditor.prototype.onDialogDeleteOk = function (opener) {\n        this.diagram.delete().then(function () {\n            DControllers.getCommandController().clear();\n        });\n    };\n    FGraphicEditor.prototype.toTheme = function (options) {\n        var theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    };\n    FGraphicEditor.prototype.getThemeDefault = function () {\n        return DThemes.getInstance().get(this.getType());\n    };\n    FGraphicEditor.prototype.getType = function () {\n        return \"FGraphicEditor\";\n    };\n    return FGraphicEditor;\n}());\nexport { FGraphicEditor };\n//# sourceMappingURL=f-graphic-editor.js.map","import { DApplication, DApplications, DBoard, DButton, DButtonFile, DButtonFileAs, DDiagram, DDiagrams, DDialogConfirmDelete, DDialogConfirmDiscard, DDialogInputText, DDialogSelect, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DTable, EShapeBase, EShapeCapabilities, EShapeCapability, UtilFileDownloader, UtilGestureModifier, UtilGestureModifiers, UtilKeyboardEvent, UtilPointerEvent, DInputSearch, EShapeEmbedded, DThemes, isString } from \"@wcardinal/wcardinal-ui\";\nimport { Point, Rectangle } from \"pixi.js\";\nimport { newGraphicTester } from \"./data/new-graphic-tester\";\nimport { toGraphicTesterObject } from \"./data/to-graphic-tester-object\";\nimport { toGraphicTesterSerialized } from \"./data/to-graphic-tester-serialized\";\nimport { toGraphicTesterSimple } from \"./data/to-graphic-tester-simple\";\nimport { EDialogProcessing } from \"./editor/e-dialog-processing\";\nimport { newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { EToolSelectArea } from \"./tool/e-tool-select-area\";\nimport { EToolSelectSelection } from \"./tool/e-tool-select-selection\";\nimport { UtilCsv } from \"./util/util-csv\";\nimport { UtilDate } from \"./util/util-date\";\nimport { UtilShapeAreaSelect } from \"./util/util-shape-area-select\";\nimport { UtilHitTest } from \"./util/util-hit-test\";\nimport { UtilCanvasCategory } from \"./util/util-canvas-category\";\nimport { UtilShapeSearch } from \"./util/util-shape-search\";\nvar FGraphicTester = /** @class */ (function () {\n    function FGraphicTester(options) {\n        var _this = this;\n        var _a, _b;\n        this._options = options;\n        var theme = this.toTheme(options);\n        this._theme = theme;\n        this._controller = options.controller;\n        this._category = new UtilCanvasCategory((_a = options.canvas) === null || _a === void 0 ? void 0 : _a.category);\n        this._icons = theme.getIconBuilder().build();\n        var margin = (_b = options.margin) !== null && _b !== void 0 ? _b : theme.getMargin();\n        this._margin = margin;\n        this._isEditable = options.editable !== false;\n        this._isChanged = false;\n        this._onDiagramMoveBound = function (e) {\n            _this.onDiagramMove(e);\n        };\n        this._onDiagramUpBound = function (e) {\n            _this.onDiagramUp(e);\n        };\n        this._onDiagramDownPoint = new Point();\n        this._onDiagramMovePoint = new Point();\n        this._selectAreaRect = new Rectangle();\n        this._selectMode = 0 /* EToolSelectMode.NONE */;\n        this._childSelectTime = 0;\n        this._childSelectChild = null;\n        this._isSelectSuspended = false;\n        this._expressionMap = new Map();\n        this._appliedValues = new Map();\n        this._isMappingsDirty = false;\n        // Application\n        var application = new DApplication(options.application);\n        this._application = application;\n        // Panes\n        application.stage.addChild(this.newPanes(options));\n        this.onChange();\n        var onMappingsChangeBound = function () {\n            if (_this._isMappingsDirty) {\n                _this._isMappingsDirty = false;\n                _this.onMappingsChange();\n            }\n            setTimeout(onMappingsChangeBound, 100);\n        };\n        onMappingsChangeBound();\n    }\n    Object.defineProperty(FGraphicTester.prototype, \"application\", {\n        get: function () {\n            return this._application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"controller\", {\n        get: function () {\n            return this._controller;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newHeader = function (options) {\n        var header = options.header;\n        if (header) {\n            var result = header();\n            if (result) {\n                var margin = this._margin;\n                result.x = margin;\n                result.y = margin;\n                result.setWidth(function (p) { return p; });\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicTester.prototype.newPanes = function (options) {\n        var margin = this._margin;\n        return new DLayoutVertical({\n            x: margin,\n            y: margin,\n            width: function (p) { return p - 2 * margin; },\n            height: function (p) { return p - 2 * margin; },\n            margin: margin,\n            children: [\n                this.newHeader(options),\n                new DLayoutHorizontal({\n                    weight: 1,\n                    width: \"padding\",\n                    margin: this._margin * 0.5,\n                    children: [this.leftPane, this.rightPane]\n                })\n            ]\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"leftPane\", {\n        get: function () {\n            var result = this._paneLeft;\n            if (result == null) {\n                result = this.newLeftPane();\n                this._paneLeft = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newLeftPane = function () {\n        return new DBoard({\n            weight: 1,\n            height: \"padding\",\n            shadow: \"WEAK\",\n            children: [this.diagram, this.toolFileButtonGraphicOpen, this.layoutViewButton]\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonGraphicOpen\", {\n        get: function () {\n            var result = this._toolFileButtonGraphicOpen;\n            if (result == null) {\n                result = this.newToolFileButtonGraphicOpen();\n                this._toolFileButtonGraphicOpen = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonGraphicOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        var margin = this._margin * 0.5;\n        return new DButton({\n            x: margin,\n            y: margin,\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonGraphicOpenTitle(),\n            shortcut: theme.getToolFileButtonGraphicOpenShortcut(),\n            theme: theme.getToolFileButtonGraphicTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonGraphicOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonGraphicOpenActive = function (opener) {\n        var _this = this;\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogSelectGraphic.then(function (dialogSelectGraphic) {\n                    dialogSelectGraphic.open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogSelectGraphic.then(function (dialogSelectGraphic) {\n                dialogSelectGraphic.open(opener);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"layoutViewButton\", {\n        get: function () {\n            var result = this._layoutViewButton;\n            if (result == null) {\n                result = this.newLayoutViewButton();\n                this._layoutViewButton = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newLayoutViewButton = function () {\n        var margin = this._margin * 0.5;\n        var position = function (p, s) { return p - s - margin; };\n        return new DLayoutHorizontal({\n            x: position,\n            y: position,\n            width: \"auto\",\n            height: \"auto\",\n            margin: 0,\n            padding: 0,\n            children: this.newViewButtons()\n        });\n    };\n    FGraphicTester.prototype.newViewButtons = function () {\n        return [\n            this.viewButtonZoomOut,\n            this.viewButtonZoomIn,\n            this.viewButtonDragAndPinch,\n            this.viewButtonReset,\n            this.viewButtonFit\n        ];\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonZoomOut\", {\n        get: function () {\n            var result = this._viewButtonZoomOut;\n            if (result == null) {\n                result = this.newViewButtonZoomOut();\n                this._viewButtonZoomOut = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonZoomOut = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomOut();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonZoomIn\", {\n        get: function () {\n            var result = this._viewButtonZoomIn;\n            if (result == null) {\n                result = this.newViewButtonZoomIn();\n                this._viewButtonZoomIn = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonZoomIn = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomIn();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonReset\", {\n        get: function () {\n            var result = this._viewButtonReset;\n            if (result == null) {\n                result = this.newViewButtonReset();\n                this._viewButtonReset = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonReset = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.reset();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonDragAndPinch\", {\n        get: function () {\n            var result = this._viewButtonDragAndPinch;\n            if (result == null) {\n                result = this.newViewButtonDragAndPinch();\n                this._viewButtonDragAndPinch = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonDragAndPinch = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.camera\n            },\n            toggle: true,\n            title: theme.getViewButtonDragAndPinchTitle(),\n            shortcut: theme.getViewButtonDragAndPinchShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this._isSelectSuspended = true;\n                },\n                inactive: function () {\n                    _this._isSelectSuspended = false;\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"viewButtonFit\", {\n        get: function () {\n            var result = this._viewButtonFit;\n            if (result == null) {\n                result = this.newViewButtonFit();\n                this._viewButtonFit = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newViewButtonFit = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.fit();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"rightPane\", {\n        get: function () {\n            var result = this._paneRight;\n            if (result == null) {\n                result = this.newRightPane();\n                this._paneRight = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newRightPane = function () {\n        return new DLayoutVertical({\n            width: 400,\n            height: \"padding\",\n            margin: this._margin * 0.5,\n            children: [\n                new DLayoutHorizontal({\n                    width: \"padding\",\n                    height: \"auto\",\n                    children: [\n                        new DLayoutSpace({\n                            weight: 1\n                        }),\n                        this.toolFileButtonCreate,\n                        this.toolFileButtonOpen,\n                        this.toolFileButtonSave,\n                        this.toolFileButtonDelete\n                    ]\n                }),\n                this.inputName,\n                new DLayoutHorizontal({\n                    width: \"padding\",\n                    height: \"auto\",\n                    children: [\n                        this.tableFilterInput,\n                        this.toolFileButtonUpload,\n                        this.toolFileButtonDownload\n                    ]\n                }),\n                this.table\n            ]\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogProcessing\", {\n        get: function () {\n            var result = this._dialogProcessing;\n            if (result == null) {\n                result = this.newDialogProcessing();\n                this._dialogProcessing = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogProcessing = function () {\n        return new EDialogProcessing();\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogDelete\", {\n        get: function () {\n            var result = this._dialogConfirmDelete;\n            if (result == null) {\n                result = this.newDialogDelete();\n                this._dialogConfirmDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogDelete = function () {\n        var _this = this;\n        return new DDialogConfirmDelete({\n            on: {\n                ok: function () {\n                    var tester = _this._tester;\n                    if (tester) {\n                        if (tester.id != null) {\n                            _this._controller.graphicTester.delete(tester.id);\n                        }\n                        _this.tester = undefined;\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"tableFilterInput\", {\n        get: function () {\n            var result = this._tableFilterInput;\n            if (result == null) {\n                result = this.newTableFilterInput();\n                this._tableFilterInput = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newTableFilterInput = function () {\n        var _this = this;\n        return new DInputSearch({\n            weight: 1,\n            on: {\n                input: function (value) {\n                    var word = value.trim();\n                    _this.tableFilter.word = word;\n                    var filter = _this.table.data.filter;\n                    if (0 < word.length) {\n                        filter.apply();\n                    }\n                    else {\n                        filter.unapply();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonCreate\", {\n        get: function () {\n            var result = this._toolFileButtonCreate;\n            if (result == null) {\n                result = this.newToolFileButtonCreate();\n                this._toolFileButtonCreate = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonCreate = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.new\n            },\n            title: theme.getToolFileButtonCreateTitle(),\n            shortcut: theme.getToolFileButtonCreateShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonCreateActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonCreateActive = function (opener) {\n        var _this = this;\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogCreate.open(opener);\n            });\n        }\n        else {\n            this.dialogCreate.open(opener);\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonOpen\", {\n        get: function () {\n            var result = this._toolFileButtonOpen;\n            if (result == null) {\n                result = this.newToolFileButtonOpen();\n                this._toolFileButtonOpen = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.open\n            },\n            title: theme.getToolFileButtonOpenTitle(),\n            shortcut: theme.getToolFileButtonOpenShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonOpenActive = function (opener) {\n        var _this = this;\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(function () {\n                _this.dialogSelectMapping.open(opener);\n            });\n        }\n        else {\n            this.dialogSelectMapping.open(opener);\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonUpload\", {\n        get: function () {\n            var result = this._toolFileButtonUpload;\n            if (result == null) {\n                result = this.newToolFileButtonUpload();\n                this._toolFileButtonUpload = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonUpload = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButtonFile({\n            image: {\n                source: this.icons.upload\n            },\n            title: theme.getToolFileButtonUploadTitle(),\n            shortcut: theme.getToolFileButtonUploadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            as: DButtonFileAs.TEXT,\n            on: {\n                open: function (data, file) {\n                    _this.onToolFileButtonUploadOpen(data, file);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonUploadOpen = function (data, file) {\n        var tester = this._tester;\n        if (tester) {\n            tester.mappings = toGraphicTesterObject(data);\n            this.onDiagramSelectionChange();\n            this.toDirty();\n            this.toMappingsDirty();\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonDownload\", {\n        get: function () {\n            var result = this._toolFileButtonDownload;\n            if (result == null) {\n                result = this.newToolFileButtonDownload();\n                this._toolFileButtonDownload = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonDownload = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.download\n            },\n            title: theme.getToolFileButtonDownloadTitle(),\n            shortcut: theme.getToolFileButtonDownloadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function () {\n                    _this.onToolFileButtonDownloadActive();\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonDownloadActive = function () {\n        var graphic = this._graphic;\n        var tester = this._tester;\n        if (graphic && tester) {\n            var diagram = this.diagram;\n            var canvas = diagram.canvas;\n            if (canvas) {\n                var layers = canvas.layer.children;\n                var uuidToDataValueIds = new Map();\n                var rows = [];\n                for (var i = 0, imax = layers.length; i < imax; ++i) {\n                    this.toCsvRows(layers[i].children, tester.mappings, null, uuidToDataValueIds, rows);\n                }\n                rows.sort(function (a, b) {\n                    return a[0] - b[0];\n                });\n                UtilFileDownloader.download(this.getFilename(), UtilCsv.stringify(rows));\n            }\n        }\n    };\n    FGraphicTester.prototype.toCsvRows = function (shapes, mappings, dataShape, uuidToDataValueIds, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var uuid = (dataShape || shape).uuid;\n            var object = mappings.get(uuid);\n            var data = shape.data;\n            var dataValueIds = uuidToDataValueIds.get(uuid);\n            if (dataValueIds == null) {\n                dataValueIds = new Set();\n                uuidToDataValueIds.set(uuid, dataValueIds);\n            }\n            for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                var dataValue = data.get(j);\n                if (dataValue) {\n                    var dataValueId = dataValue.id;\n                    if (!dataValueIds.has(dataValueId)) {\n                        dataValueIds.add(dataValueId);\n                        var value = (object && object[dataValueId]) || \"\";\n                        result.push([uuid, dataValueId, value]);\n                    }\n                }\n            }\n            this.toCsvRows(shape.children, mappings, this.toDataShape(dataShape, shape), uuidToDataValueIds, result);\n        }\n        return result;\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonSave\", {\n        get: function () {\n            var result = this._toolFileButtonSave;\n            if (result == null) {\n                result = this.newToolFileButtonSave();\n                this._toolFileButtonSave = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonSave = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.save\n            },\n            title: theme.getToolFileButtonSaveTitle(),\n            shortcut: theme.getToolFileButtonSaveShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonSaveActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonSaveActive = function (opener) {\n        var _this = this;\n        var graphic = this._graphic;\n        var tester = this._tester;\n        if (graphic && tester) {\n            tester.name = this.inputName.input.value;\n            var simple_1 = toGraphicTesterSimple(tester);\n            var dialogProcessing_1 = this.dialogProcessing;\n            dialogProcessing_1.open(opener);\n            this._controller.graphicTester.save(simple_1).then(function (id) {\n                simple_1.id = id;\n                _this.tester = toGraphicTesterSerialized(simple_1);\n                dialogProcessing_1.resolve();\n            }, function (reason) {\n                dialogProcessing_1.reject(reason);\n            });\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"toolFileButtonDelete\", {\n        get: function () {\n            var result = this._toolFileButtonDelete;\n            if (result == null) {\n                result = this.newToolFileButtonDelete();\n                this._toolFileButtonDelete = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newToolFileButtonDelete = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.delete\n            },\n            title: theme.getToolFileButtonDeleteTitle(),\n            shortcut: theme.getToolFileButtonDeleteShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonDeleteActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.onToolFileButtonDeleteActive = function (opener) {\n        this.dialogDelete.open(opener);\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"inputName\", {\n        get: function () {\n            var result = this._inputName;\n            if (result == null) {\n                result = this.newInputName();\n                this._inputName = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newInputName = function () {\n        var _this = this;\n        return new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this._theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: function () {\n                        _this.toDirty();\n                    }\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"icons\", {\n        get: function () {\n            return this._icons;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"diagram\", {\n        get: function () {\n            var result = this._diagram;\n            if (result == null) {\n                result = this.newDiagram();\n                this._diagram = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDiagram = function () {\n        var _this = this;\n        var result = new DDiagram(this.toDiagramOptions(this._options));\n        result.on(\"down\", function (e, diagram) {\n            _this.onDiagramDown(e, diagram);\n        });\n        result.on(\"keydown\", function (e) {\n            _this.onDiagramKeydown(e);\n        });\n        return result;\n    };\n    FGraphicTester.prototype.toDiagramOptions = function (options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        var result = options.diagram || {};\n        (_a = result.controller) !== null && _a !== void 0 ? _a : (result.controller = this._controller.graphic);\n        (_b = result.width) !== null && _b !== void 0 ? _b : (result.width = \"100%\");\n        (_c = result.height) !== null && _c !== void 0 ? _c : (result.height = \"100%\");\n        (_d = result.mask) !== null && _d !== void 0 ? _d : (result.mask = true);\n        (_e = result.ambient) !== null && _e !== void 0 ? _e : (result.ambient = true);\n        var view = ((_f = result.view) !== null && _f !== void 0 ? _f : (result.view = {}));\n        var gesture = ((_g = view.gesture) !== null && _g !== void 0 ? _g : (view.gesture = {}));\n        (_h = gesture.modifier) !== null && _h !== void 0 ? _h : (gesture.modifier = UtilGestureModifier.ALT);\n        var checker = ((_j = gesture.checker) !== null && _j !== void 0 ? _j : (gesture.checker = {}));\n        (_k = checker.start) !== null && _k !== void 0 ? _k : (checker.start = function (e, modifier) {\n            return UtilGestureModifiers.match(e, modifier) || _this._isSelectSuspended;\n        });\n        (_l = checker.move) !== null && _l !== void 0 ? _l : (checker.move = function (e, modifier) {\n            var diagram = _this._diagram;\n            return (UtilGestureModifiers.match(e, modifier) || !!(diagram && diagram.state.isGesturing));\n        });\n        var zoom = ((_m = view.zoom) !== null && _m !== void 0 ? _m : (view.zoom = {}));\n        var dblclick = ((_o = zoom.dblclick) !== null && _o !== void 0 ? _o : (zoom.dblclick = {}));\n        (_p = dblclick.checker) !== null && _p !== void 0 ? _p : (dblclick.checker = function (e, modifier) {\n            return _this._isSelectSuspended;\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"selection\", {\n        get: function () {\n            var _this = this;\n            var result = this._selection;\n            if (result == null) {\n                result = new EToolSelectSelection({\n                    diagram: this.diagram,\n                    modifier: {\n                        editable: false\n                    }\n                });\n                result.on(\"change\", function () {\n                    _this.onDiagramSelectionChange();\n                });\n                this._selection = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.toDataMappingRows = function (shapes, mappings, dataShape, dataValueIdToRow, result) {\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            var uuid = (dataShape || shape).uuid;\n            var object = mappings.get(uuid);\n            var data = shape.data;\n            for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                var dataValue = data.get(j);\n                if (dataValue != null) {\n                    var dataValueId = dataValue.id;\n                    var value = (object && object[dataValueId]) || \"\";\n                    var row = dataValueIdToRow.get(dataValueId);\n                    if (row == null) {\n                        row = {\n                            uuids: [uuid],\n                            id: dataValueId,\n                            value: value\n                        };\n                        dataValueIdToRow.set(dataValueId, row);\n                        result.push(row);\n                    }\n                    else {\n                        row.uuids.push(uuid);\n                        row.value = value;\n                    }\n                }\n            }\n            this.toDataMappingRows(shape.children, mappings, this.toDataShape(dataShape, shape), dataValueIdToRow, result);\n        }\n        return result;\n    };\n    FGraphicTester.prototype.toDataShape = function (dataShape, shape) {\n        if (dataShape) {\n            return dataShape;\n        }\n        if (shape instanceof EShapeEmbedded) {\n            return shape;\n        }\n        return null;\n    };\n    FGraphicTester.prototype.onDiagramSelectionChange = function () {\n        var selection = this._selection;\n        var tester = this._tester;\n        var table = this.table;\n        if (selection && tester) {\n            var shapes = selection.get();\n            if (0 < shapes.length) {\n                var rows = [];\n                this.toDataMappingRows(shapes, tester.mappings, null, new Map(), rows);\n                table.data.clearAndAddAll(rows);\n            }\n            else {\n                table.data.clear();\n            }\n        }\n        else {\n            table.data.clear();\n        }\n    };\n    FGraphicTester.prototype.onDiagramDown = function (e, diagram) {\n        if (this._isSelectSuspended) {\n            return;\n        }\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagramCanvas = diagram.canvas;\n        if (diagramCanvas) {\n            var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n            if (this._selectMode === 1 /* EToolSelectMode.SELECT */) {\n                this._selectMode = 0 /* EToolSelectMode.NONE */;\n                this.onDiagramSelectEnd(diagramCanvas, isAddMode);\n                return;\n            }\n            var global_1 = e.data.global;\n            var onDownPoint = this._onDiagramDownPoint;\n            onDownPoint.copyFrom(global_1);\n            var selection = this.selection;\n            var hitObject = this.hitTest(global_1, diagramCanvas);\n            if (hitObject instanceof EShapeBase) {\n                if (isAddMode) {\n                    selection.toggle(hitObject);\n                }\n                else if (!selection.contains(hitObject)) {\n                    var first = selection.first();\n                    if (first == null) {\n                        selection.set(hitObject.root);\n                    }\n                    else {\n                        var selected = UtilShapeSearch.toSelected(hitObject);\n                        if (selected != null) {\n                            if (EShapeCapabilities.contains(selected, EShapeCapability.CHILDREN)) {\n                                this._childSelectTime = Date.now();\n                                this._childSelectChild = UtilShapeSearch.toOfParent(hitObject, selected);\n                            }\n                        }\n                        else {\n                            var sharedParent = UtilShapeSearch.toSharedParent(first, hitObject);\n                            selection.set(UtilShapeSearch.toOfParent(hitObject, sharedParent));\n                        }\n                    }\n                }\n                this._selectMode = 2 /* EToolSelectMode.TRANSLATE */;\n            }\n            else {\n                // Select area\n                var area = this.selectArea;\n                diagramCanvas.toLocal(global_1, undefined, onDownPoint);\n                area.x = onDownPoint.x;\n                area.y = onDownPoint.y;\n                area.size.set(0, 0);\n                area.update();\n                diagramCanvas.addChild(area);\n                DApplications.update(diagram);\n                // Select mode\n                this._selectMode = 1 /* EToolSelectMode.SELECT */;\n            }\n            var oldInteractionManager = this._interactionManager;\n            if (oldInteractionManager) {\n                this._interactionManager = null;\n                oldInteractionManager.off(UtilPointerEvent.move, this._onDiagramMoveBound);\n                var onDiagramUpBound = this._onDiagramUpBound;\n                oldInteractionManager.off(UtilPointerEvent.up, onDiagramUpBound);\n                oldInteractionManager.off(UtilPointerEvent.upoutside, onDiagramUpBound);\n                oldInteractionManager.off(UtilPointerEvent.cancel, onDiagramUpBound);\n            }\n            var applicationLayer = DApplications.getLayer(diagram);\n            if (applicationLayer) {\n                var newInteractionManager = applicationLayer.renderer.plugins.interaction;\n                this._interactionManager = newInteractionManager;\n                newInteractionManager.on(UtilPointerEvent.move, this._onDiagramMoveBound);\n                var onDiagramUpBound = this._onDiagramUpBound;\n                newInteractionManager.on(UtilPointerEvent.up, onDiagramUpBound);\n                newInteractionManager.on(UtilPointerEvent.upoutside, onDiagramUpBound);\n                newInteractionManager.on(UtilPointerEvent.cancel, onDiagramUpBound);\n            }\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"selectArea\", {\n        get: function () {\n            var result = this._selectArea;\n            if (result == null) {\n                result = new EToolSelectArea();\n                this._selectArea = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.onDiagramMove = function (e) {\n        var originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        var diagram = this.diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._selectMode;\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            var global_2 = e.data.global;\n            var onDownPoint = this._onDiagramDownPoint;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var area = this.selectArea;\n                var onMovePoint = diagramCanvas.toLocal(global_2, undefined, this._onDiagramMovePoint);\n                area.x = Math.min(onDownPoint.x, onMovePoint.x);\n                area.y = Math.min(onDownPoint.y, onMovePoint.y);\n                area.size.set(Math.max(onDownPoint.x, onMovePoint.x) - area.x, Math.max(onDownPoint.y, onMovePoint.y) - area.y);\n                area.update();\n                DApplications.update(diagram);\n            }\n            else {\n                var dx = global_2.x - onDownPoint.x;\n                var dy = global_2.y - onDownPoint.y;\n                if (1 <= Math.abs(dx) || 1 <= Math.abs(dy)) {\n                    this._childSelectChild = null;\n                }\n            }\n        }\n    };\n    FGraphicTester.prototype.onDiagramUp = function (e) {\n        var diagram = this.diagram;\n        var diagramCanvas = diagram.canvas;\n        var diagramLayer = diagram.layer;\n        var mode = this._selectMode;\n        var interactionManager = this._interactionManager;\n        if (interactionManager) {\n            this._interactionManager = null;\n            interactionManager.off(UtilPointerEvent.move, this._onDiagramMoveBound);\n            var onDiagramUpBound = this._onDiagramUpBound;\n            interactionManager.off(UtilPointerEvent.up, onDiagramUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onDiagramUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onDiagramUpBound);\n        }\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            this._selectMode = 0 /* EToolSelectMode.NONE */;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                var originalEvent = e.data.originalEvent;\n                var isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n                this.onDiagramSelectEnd(diagramCanvas, isAddMode);\n            }\n            else {\n                // Select the child\n                var selection = this.selection;\n                var childSelectChild = this._childSelectChild;\n                if (childSelectChild != null) {\n                    this._childSelectChild = null;\n                    var elapsedTime = Date.now() - this._childSelectTime;\n                    if (elapsedTime < 333) {\n                        selection.set(childSelectChild);\n                    }\n                }\n                DApplications.update(diagram);\n            }\n        }\n    };\n    FGraphicTester.prototype.onDiagramSelectEnd = function (canvas, isAddMode) {\n        var area = this.selectArea;\n        var selection = this.selection;\n        if (0 < area.size.x && 0 < area.size.y) {\n            var areaRect = area.getBounds(false, this._selectAreaRect);\n            var foundShapes = [];\n            var layers = canvas.layer.children;\n            for (var i = layers.length - 1; 0 <= i; --i) {\n                UtilShapeAreaSelect.findShapes(layers[i], areaRect, foundShapes);\n            }\n            if (isAddMode) {\n                if (0 < foundShapes.length) {\n                    selection.addAll(foundShapes);\n                }\n            }\n            else {\n                if (0 < foundShapes.length || !selection.isEmpty()) {\n                    selection.clearAndAddAll(foundShapes);\n                }\n            }\n        }\n        else if (!isAddMode) {\n            if (!selection.isEmpty()) {\n                selection.clear();\n            }\n        }\n        canvas.removeChild(area);\n        DApplications.update(canvas);\n    };\n    FGraphicTester.prototype.hitTest = function (global, canvas) {\n        var layers = canvas.layer.children;\n        for (var i = layers.length - 1; 0 <= i; --i) {\n            var result = UtilHitTest.execute(global, layers[i]);\n            if (result != null) {\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicTester.prototype.onDiagramKeydown = function (e) {\n        if (UtilKeyboardEvent.isSelectAllKey(e)) {\n            var canvas = this.diagram.canvas;\n            if (canvas != null) {\n                var selection = this.selection;\n                selection.clear();\n                var layers = canvas.layer.children;\n                for (var i = 0, imax = layers.length; i < imax; ++i) {\n                    var children = layers[i].children;\n                    if (0 < children.length) {\n                        selection.addAll(children);\n                    }\n                }\n            }\n        }\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"table\", {\n        get: function () {\n            var result = this._table;\n            if (result == null) {\n                result = this.newTable();\n                this._table = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newTable = function () {\n        return new DTable({\n            weight: 1,\n            width: \"padding\",\n            columns: this.newColumnOptions(),\n            data: {\n                filter: this.tableFilter\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"tableFilter\", {\n        get: function () {\n            var result = this._tableFilter;\n            if (result == null) {\n                result = this.newTableFilter();\n                this._tableFilter = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newTableFilter = function () {\n        return {\n            word: \"\",\n            test: function (row) {\n                var word = this.word;\n                return (word.length <= 0 ||\n                    0 <= row.id.indexOf(word) ||\n                    0 <= row.value[0].indexOf(word) ||\n                    0 <= row.value[1].indexOf(word));\n            }\n        };\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogSelectGraphic\", {\n        get: function () {\n            var result = this._dialogSelectGraphic;\n            if (result == null) {\n                result = this.newDialogSelectGraphic();\n                this._dialogSelectGraphic = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogSelectGraphic = function () {\n        var _this = this;\n        return this._category.get().then(function (category) {\n            if (_this._options.controller.toThumbnail != null) {\n                var result = _this.newDialogSelectGraphicImage();\n                result.categories = category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectGraphicNoImage();\n                result.categories = category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicTester.prototype.newDialogSelectGraphicNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this._controller.graphic,\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectGraphicSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicTester.prototype.newDialogSelectGraphicImage = function () {\n        var _this = this;\n        return newDialogSelectWithThumbnails(this._options.controller.graphic, this._controller.toThumbnail, function (value) {\n            _this.onDialogSelectGraphicSelect(value);\n        });\n    };\n    FGraphicTester.prototype.onDialogSelectGraphicSelect = function (value) {\n        var _this = this;\n        this._controller.graphic.get(value.id).then(function (serialized) {\n            _this.graphic = DDiagrams.toSerialized(serialized);\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"graphic\", {\n        get: function () {\n            return this._graphic;\n        },\n        set: function (graphic) {\n            this._graphic = graphic;\n            var diagram = this.diagram;\n            if (graphic != null) {\n                diagram.set(graphic);\n            }\n            else {\n                diagram.set(null);\n            }\n            this._appliedValues.clear();\n            this.tester = undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"dialogSelectMapping\", {\n        get: function () {\n            var result = this._dialogSelectTester;\n            if (result == null) {\n                result = this.newDialogSelectMapping();\n                this._dialogSelectTester = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogSelectMapping = function () {\n        var _this = this;\n        var controller = this._controller;\n        return new DDialogSelect({\n            controller: {\n                search: function (word) {\n                    var graphic = _this._graphic;\n                    if (graphic) {\n                        return controller.graphicTester.search(graphic.name, word);\n                    }\n                    return Promise.resolve([]);\n                }\n            },\n            on: {\n                select: function (selected) {\n                    controller.graphicTester.get(selected.id).then(function (serialized) {\n                        var graphic = _this._graphic;\n                        if (graphic) {\n                            _this.tester = toGraphicTesterSerialized(serialized);\n                        }\n                    });\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"dialogDiscard\", {\n        get: function () {\n            var result = this._dialogDiscard;\n            if (result == null) {\n                result = new DDialogConfirmDiscard();\n                this._dialogDiscard = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"dialogCreate\", {\n        get: function () {\n            var result = this._dialogCreate;\n            if (result == null) {\n                result = this.newDialogCreate();\n                this._dialogCreate = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.newDialogCreate = function () {\n        var _this = this;\n        var result = new DDialogInputText({\n            on: {\n                open: function () {\n                    result.value = _this._theme.newDialogCreateTextValue();\n                },\n                ok: function (value) {\n                    var graphic = _this._graphic;\n                    if (graphic) {\n                        _this.tester = newGraphicTester(value, graphic);\n                    }\n                }\n            }\n        });\n        return result;\n    };\n    Object.defineProperty(FGraphicTester.prototype, \"tester\", {\n        get: function () {\n            return this._tester;\n        },\n        set: function (tester) {\n            this._isChanged = false;\n            var inputName = this.inputName.input;\n            this._tester = tester;\n            inputName.value = tester ? tester.name : \"\";\n            this.onDiagramSelectionChange();\n            this.onChange();\n            this.toMappingsDirty();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"isNew\", {\n        get: function () {\n            var tester = this._tester;\n            return tester != null && tester.id == null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicTester.prototype, \"isChanged\", {\n        get: function () {\n            return this._isChanged || this.isNew;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicTester.prototype.onChange = function () {\n        var hasNoGraphc = this._graphic == null;\n        var hasNoMapping = this._tester == null;\n        var hasNoChanges = !this.isChanged;\n        var isNotEditable = !this._isEditable;\n        this.table.state.isDisabled = hasNoMapping;\n        this.tableFilterInput.state.isDisabled = hasNoMapping;\n        this.inputName.state.isDisabled = hasNoMapping || isNotEditable;\n        this.toolFileButtonCreate.state.isDisabled = hasNoGraphc || isNotEditable;\n        this.toolFileButtonOpen.state.isDisabled = hasNoGraphc;\n        this.toolFileButtonUpload.state.isDisabled = hasNoMapping || isNotEditable;\n        this.toolFileButtonDownload.state.isDisabled = hasNoMapping;\n        this.toolFileButtonSave.state.isDisabled = hasNoMapping || hasNoChanges || isNotEditable;\n        this.toolFileButtonDelete.state.isDisabled = hasNoMapping || isNotEditable;\n    };\n    FGraphicTester.prototype.evaluate = function (expression) {\n        return Function(\"try { return (\".concat(expression, \"); } catch( e ) { return 0; }\"))();\n    };\n    FGraphicTester.prototype.onMappingsChange = function () {\n        var tester = this._tester;\n        if (tester) {\n            var mappings = tester.mappings;\n            var diagram = this.diagram;\n            var canvas = diagram.canvas;\n            if (canvas) {\n                var isChanged = false;\n                var layers = canvas.layer.children;\n                for (var i = 0, imax = layers.length; i < imax; ++i) {\n                    if (this.applyMappings(layers[i].children, mappings, null)) {\n                        isChanged = true;\n                    }\n                }\n                if (isChanged) {\n                    DApplications.update(diagram);\n                }\n            }\n        }\n    };\n    FGraphicTester.prototype.applyMappings = function (shapes, mappings, dataShape) {\n        var isChanged = false;\n        for (var i = 0, imax = shapes.length; i < imax; ++i) {\n            var shape = shapes[i];\n            // Apply the mappings\n            var uuid = (dataShape || shape).uuid;\n            var mapping = mappings.get(uuid);\n            if (mapping) {\n                var data = shape.data;\n                for (var j = 0, jmax = data.size(); j < jmax; ++j) {\n                    var dataValue = data.get(j);\n                    if (dataValue != null && this.applyMapping(dataValue, mapping[dataValue.id])) {\n                        isChanged = true;\n                    }\n                }\n            }\n            // Children\n            if (this.applyMappings(shape.children, mappings, this.toDataShape(dataShape, shape))) {\n                isChanged = true;\n            }\n        }\n        // Done\n        return isChanged;\n    };\n    FGraphicTester.prototype.applyMapping = function (dataValue, expression) {\n        if (expression != null) {\n            var expressionMap = this._expressionMap;\n            if (expressionMap.has(expression)) {\n                return this.applyMappingIfChanged(dataValue, expressionMap.get(expression));\n            }\n            else if (0 < expression.length) {\n                try {\n                    var evaluated = this.evaluate(expression);\n                    expressionMap.set(expression, evaluated);\n                    return this.applyMappingIfChanged(dataValue, evaluated);\n                }\n                catch (_a) {\n                    // DO NOTHING\n                }\n            }\n        }\n        return false;\n    };\n    FGraphicTester.prototype.applyMappingIfChanged = function (dataValue, value) {\n        var appliedValues = this._appliedValues;\n        if (appliedValues.has(dataValue)) {\n            var appliedValue = appliedValues.get(dataValue);\n            if (appliedValue !== value) {\n                appliedValues.set(dataValue, value);\n                dataValue.value = value;\n                return true;\n            }\n        }\n        else {\n            appliedValues.set(dataValue, value);\n            dataValue.value = value;\n            return true;\n        }\n        return false;\n    };\n    FGraphicTester.prototype.toDirty = function () {\n        if (!this._isChanged) {\n            this._isChanged = true;\n            this.onChange();\n        }\n    };\n    FGraphicTester.prototype.toMappingsDirty = function () {\n        this._isMappingsDirty = true;\n    };\n    FGraphicTester.prototype.getFilename = function () {\n        var name = this.inputName.input.value.toLowerCase();\n        var date = UtilDate.format(Date.now());\n        return \"graphic-tester-\".concat(name, \"-\").concat(date, \".csv\");\n    };\n    FGraphicTester.prototype.newColumnOptions = function () {\n        var _this = this;\n        var isEditable = this._isEditable;\n        var theme = this._theme;\n        return [\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnDataLabel(),\n                editable: false,\n                sortable: true,\n                getter: function (row) {\n                    return row.id;\n                },\n                setter: function (row, index, value) {\n                    row.id = value;\n                    _this.toDirty();\n                }\n            },\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnValueLabel(),\n                align: \"LEFT\",\n                editable: isEditable,\n                sortable: true,\n                formatter: function (value) {\n                    return value || \"\";\n                },\n                getter: function (row) {\n                    return row.value;\n                },\n                setter: function (row, index, value) {\n                    var tester = _this._tester;\n                    if (tester) {\n                        var uuids = row.uuids;\n                        var mappings = tester.mappings;\n                        var id = row.id;\n                        if (0 < value.length) {\n                            for (var i = 0, imax = uuids.length; i < imax; ++i) {\n                                var uuid = uuids[i];\n                                var object = mappings.get(uuid);\n                                if (object == null) {\n                                    object = {};\n                                    mappings.set(uuid, object);\n                                }\n                                object[id] = value;\n                            }\n                        }\n                        else {\n                            for (var i = 0, imax = uuids.length; i < imax; ++i) {\n                                var uuid = uuids[i];\n                                var object = mappings.get(uuid);\n                                if (object != null) {\n                                    delete object[id];\n                                }\n                            }\n                        }\n                    }\n                    row.value = value;\n                    _this.toDirty();\n                    _this.toMappingsDirty();\n                }\n            }\n        ];\n    };\n    FGraphicTester.prototype.toTheme = function (options) {\n        var theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    };\n    FGraphicTester.prototype.getThemeDefault = function () {\n        return DThemes.getInstance().get(this.getType());\n    };\n    FGraphicTester.prototype.getType = function () {\n        return \"FGraphicTester\";\n    };\n    return FGraphicTester;\n}());\nexport { FGraphicTester };\n//# sourceMappingURL=f-graphic-tester.js.map","import { DApplication, DButton, DDiagram, DDiagrams, DDialogSelect, DLayoutHorizontal, isString, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { UtilCanvasCategory } from \"./util/util-canvas-category\";\nvar FGraphicViewer = /** @class */ (function () {\n    function FGraphicViewer(options) {\n        var _a, _b;\n        // Options\n        this._options = options;\n        var theme = this.toTheme(options);\n        this._theme = theme;\n        var margin = (_a = options.margin) !== null && _a !== void 0 ? _a : theme.getMargin();\n        this._margin = margin;\n        var icons = theme.getIconBuilder().build();\n        this._icons = icons;\n        this._category = new UtilCanvasCategory((_b = options.canvas) === null || _b === void 0 ? void 0 : _b.category);\n        // Application\n        var application = new DApplication(options.application);\n        this._application = application;\n        var stage = application.stage;\n        // Diagram\n        var diagram = this.diagram;\n        stage.addChild(diagram);\n        // Header\n        var header = this.header;\n        if (header != null) {\n            stage.addChild(header);\n        }\n        // View operations\n        var button = options.button;\n        if (button == null || button.view !== false) {\n            stage.addChild(this.layoutViewButton);\n        }\n    }\n    Object.defineProperty(FGraphicViewer.prototype, \"application\", {\n        get: function () {\n            return this._application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FGraphicViewer.prototype, \"diagram\", {\n        get: function () {\n            var result = this._diagram;\n            if (result == null) {\n                result = this.newDiagram();\n                this._diagram = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newDiagram = function () {\n        var controller = this._options.controller;\n        return new DDiagram({\n            x: 0,\n            y: 0,\n            width: \"100%\",\n            height: \"100%\",\n            outline: {\n                color: null\n            },\n            controller: controller.graphic,\n            data: {\n                mapper: this.newDataMapper(),\n                remote: {\n                    controller: controller.remote\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"header\", {\n        get: function () {\n            var result = this._header;\n            if (result === undefined) {\n                result = this.newHeader();\n                this._header = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newHeader = function () {\n        var header = this._options.header;\n        if (header != null) {\n            var result = header(this.newToolFileButtons());\n            if (result != null) {\n                var margin_1 = this._margin;\n                result.x = margin_1;\n                result.y = margin_1;\n                result.setWidth(function (p) { return p - 2 * margin_1; });\n                return result;\n            }\n        }\n        return null;\n    };\n    FGraphicViewer.prototype.newToolFileButtons = function () {\n        var result = [];\n        var button = this._options.button;\n        if (button == null || button.open !== false) {\n            result.push(this.toolFileButtonGraphicOpen);\n        }\n        return result;\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"toolFileButtonGraphicOpen\", {\n        get: function () {\n            var result = this._toolFileButtonGraphicOpen;\n            if (result == null) {\n                result = this.newToolFileButtonGraphicOpen();\n                this._toolFileButtonGraphicOpen = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newToolFileButtonGraphicOpen = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonGraphicOpenTitle(),\n            shortcut: theme.getToolFileButtonGraphicOpenShortcut(),\n            theme: theme.getToolFileButtonGraphicTheme(),\n            on: {\n                active: function (emitter) {\n                    _this.onToolFileButtonGraphicOpenActive(emitter);\n                }\n            }\n        });\n    };\n    FGraphicViewer.prototype.onToolFileButtonGraphicOpenActive = function (opener) {\n        this.dialogSelect.then(function (dialogSelect) {\n            dialogSelect.open(opener);\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"layoutViewButton\", {\n        get: function () {\n            var result = this._layoutViewButton;\n            if (result == null) {\n                result = this.newLayoutViewButton();\n                this._layoutViewButton = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newLayoutViewButton = function () {\n        var margin = this._margin;\n        var position = function (p, s) { return p - s - margin; };\n        return new DLayoutHorizontal({\n            x: position,\n            y: position,\n            width: \"auto\",\n            height: \"auto\",\n            margin: 0,\n            children: this.newViewButtons()\n        });\n    };\n    FGraphicViewer.prototype.newViewButtons = function () {\n        return [\n            this.viewButtonZoomOut,\n            this.viewButtonZoomIn,\n            this.viewButtonReset,\n            this.viewButtonFit\n        ];\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonZoomOut\", {\n        get: function () {\n            var result = this._viewButtonZoomOut;\n            if (result == null) {\n                result = this.newViewButtonZoomOut();\n                this._viewButtonZoomOut = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonZoomOut = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomOut();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonZoomIn\", {\n        get: function () {\n            var result = this._viewButtonZoomIn;\n            if (result == null) {\n                result = this.newViewButtonZoomIn();\n                this._viewButtonZoomIn = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonZoomIn = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.zoomIn();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonReset\", {\n        get: function () {\n            var result = this._viewButtonReset;\n            if (result == null) {\n                result = this.newViewButtonReset();\n                this._viewButtonReset = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonReset = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.reset();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"viewButtonFit\", {\n        get: function () {\n            var result = this._viewButtonFit;\n            if (result == null) {\n                result = this.newViewButtonFit();\n                this._viewButtonFit = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newViewButtonFit = function () {\n        var _this = this;\n        var theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: function () {\n                    _this.diagram.view.fit();\n                }\n            }\n        });\n    };\n    Object.defineProperty(FGraphicViewer.prototype, \"dialogSelect\", {\n        get: function () {\n            var result = this._dialogSelect;\n            if (result == null) {\n                result = this.newDialogSelect();\n                this._dialogSelect = result;\n            }\n            return result;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FGraphicViewer.prototype.newDialogSelect = function () {\n        var _this = this;\n        return this._category.get().then(function (category) {\n            if (_this._options.controller.toThumbnail != null) {\n                var result = _this.newDialogSelectImage();\n                result.categories = category.items;\n                return result;\n            }\n            else {\n                var result = _this.newDialogSelectNoImage();\n                result.categories = category.items;\n                return result;\n            }\n        });\n    };\n    FGraphicViewer.prototype.newDialogSelectNoImage = function () {\n        var _this = this;\n        return new DDialogSelect({\n            controller: this._options.controller.graphic,\n            on: {\n                select: function (value) {\n                    _this.onDialogSelectSelect(value);\n                }\n            }\n        });\n    };\n    FGraphicViewer.prototype.newDialogSelectImage = function () {\n        var _this = this;\n        var controller = this._options.controller;\n        return newDialogSelectWithThumbnails(controller.graphic, controller.toThumbnail, function (value) {\n            _this.onDialogSelectSelect(value);\n        });\n    };\n    FGraphicViewer.prototype.onDialogSelectSelect = function (value) {\n        var _this = this;\n        this._options.controller.graphic.get(value.id).then(function (serialized) {\n            _this.diagram.set(DDiagrams.toSerialized(serialized));\n        });\n    };\n    FGraphicViewer.prototype.newDataMapper = function () {\n        return undefined;\n    };\n    FGraphicViewer.prototype.toTheme = function (options) {\n        var theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    };\n    FGraphicViewer.prototype.getThemeDefault = function () {\n        return DThemes.getInstance().get(this.getType());\n    };\n    FGraphicViewer.prototype.getType = function () {\n        return \"FGraphicViewer\";\n    };\n    return FGraphicViewer;\n}());\nexport { FGraphicViewer };\n//# sourceMappingURL=f-graphic-viewer.js.map","import { EShapeButtons } from \"./e-shape-buttons\";\nexport var loadShapeExtensionButton = function () {\n    EShapeButtons.load();\n};\n//# sourceMappingURL=load-shape-extension-button.js.map","import { EShapeButtonLayers } from \"./e-shape-button-layers\";\nexport var loadShapeExtensionButtonLayer = function () {\n    EShapeButtonLayers.load();\n};\n//# sourceMappingURL=load-shape-extension-button-layer.js.map","import { EShapeChartLines } from \"./e-shape-chart-lines\";\nexport var loadShapeExtensionChartLine = function () {\n    EShapeChartLines.load();\n};\n//# sourceMappingURL=load-shape-extension-chart-line.js.map","import { EShapeEmbeddedAcceptorEdges } from \"./e-shape-embedded-acceptor-edges\";\nexport var loadShapeExtensionEmbeddedAcceptorEdge = function () {\n    EShapeEmbeddedAcceptorEdges.load();\n};\n//# sourceMappingURL=load-shape-extension-embedded-acceptor-edge.js.map","import { EShapeInputs } from \"./e-shape-inputs\";\nexport var loadShapeExtensionInput = function () {\n    EShapeInputs.load();\n};\n//# sourceMappingURL=load-shape-extension-input.js.map","import { EShapeTables } from \"./e-shape-tables\";\nexport var loadShapeExtensionTable = function () {\n    EShapeTables.load();\n};\n//# sourceMappingURL=load-shape-extension-table.js.map","import * as geditor from \"./wcardinal/geditor/index.browser\";\nvar global = window;\nglobal.wcardinal = global.wcardinal || {};\nglobal.wcardinal.geditor = geditor;\n//# sourceMappingURL=wcardinal-geditor.browser.js.map"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","SuppressedError","ECommandComposition","_super","commands","selection","_this","_commands","_selection","defineProperty","get","enumerable","configurable","execute","redo","lock","i","imax","length","unlock","undo","destroy","DCommandBase","ECommandDocumentAll","diagram","canvas","name","label","width","height","category","summary","description","backgroundColor","backgroundAlpha","_diagram","_canvas","_name","_label","_width","_height","_category","_summary","_description","_backgroundColor","_backgroundAlpha","state","DBaseStateSetImpl","background","getColor","getAlpha","color","alpha","emit","ECommandDocumentBackground","_color","_alpha","ECommandDocumentCategory","ECommandDocumentCreate","DCommandCreate","ECommandDocumentDescription","ECommandDocumentHeight","y","ECommandDocumentLabel","ECommandDocumentName","ECommandDocumentOpen","ECommandDocumentSnapBringForward","snapper","index","_snapper","_index","target","swap","ECommandDocumentSnapCreate","_target","add","remove","size","ECommandDocumentSnapDelete","ECommandDocumentSnapGridSize","_size","grid","ECommandDocumentSnapGridToggleVisibility","visible","ECommandDocumentSnapGridToggle","enable","ECommandDocumentSnapReplace","oldValue","newValue","list","_oldValue","_newValue","values","indexOf","_list","data","contains","replace","clearAndAdd","ECommandDocumentSnapSendBackward","ECommandDocumentSnapTargetToggleVisibility","ECommandDocumentSnapTargetToggle","ECommandDocumentSnapToggle","ECommandDocumentSummary","ECommandDocumentWidth","x","ECommandLayerBringForward","layerContainer","_layerContainer","children","tmp","onChildrenChange","DApplications","update","EDialogLayerValueBackground","isEqual","from","layer","EDialogLayerValue","interactive","gesture","copyTo","position","set","copy","EShapeLayerState","INVISIBLE","INTERACTIVE","DRAGGABLE","EShapeActionValueGestureOperationType","DRAG","PINCHABLE","PINCH","is","NONE","ECommandLayerChange","value","_layer","ECommandLayerCreate","_value","_layerActive","active","_layerCreated","_selectionStored","newLayer","result","isEmpty","store","clear","reference","layerCreated","attach","detach","selectionStored","restore","parent","ECommandLayerDelete","_layerIndex","delete","attachAt","ECommandLayerSendBackward","ECommandShapeActionValueAdd","shapes","action","shape","ECommandShapeActionValueBringForward","_indices","indices","push","ECommandShapeActionValueRemove","ECommandShapeActionValueReplace","_oldValues","oldValues","ECommandShapeActionValueSendBackward","ECommandShapeCreate","select","_shapes","_parent","_select","clearAndAddAll","ECommandShapeDataMappingValueAdd","EShapeCapabilities","EShapeCapability","DATA_MAPPING","mapping","getMapping","ECommandShapeDataMappingValueBringForward","ECommandShapeDataMappingValueRemove","ECommandShapeDataMappingValueReplace","ECommandShapeDataMappingValueSendBackward","ECommandShapeDataValueAdd","ECommandShapeDataValueBringForward","ECommandShapeDataValueRemove","ECommandShapeDataValueReplace","ECommandShapeDataValueSendBackward","UtilShapeSearch","toIndices","toDepth","EShapeBase","toSharedParent","shapeA","shapeB","parent_1","isParent","parent_2","toOfParent","shapeParent","toSelected","selected","findChildById","id","recursively","child","findChildByType","type","findChild","matcher","findChildrenByType","findChildren","COMPARATOR_INDEX","a","UtilShapeDeleter","addAll","generateDeletedShapeList","deletedShapeSet","_a","EXCEPTIONS","Set","sort","splice","onChildTransformChange","toDirty","uploaded","undefined","onDetach","ECommandShapeDelete","ECommandShapeGroup","_before","_deleteds","_createds","GROUPING","deletedSet","deleteds","modifier","w","h","group","EShapeGroup","EShapeResourceManagerDeserializationMode","EDITOR","transform","groupChildren","clone","EShapeLockPart","ALL","clonePosition","EShapeConnectorLine","edge","tail","tailAcceptor","acceptor","tailAcceptorShape","tailLocal","local","has","head","headAcceptor","headAcceptorShape","headLocal","EShapeConnectors","moveAll","onAttach","createds","deleted","created","EToolSelectSelectionUpdatedPart","PROPERTY","PROPERTY_ID","SELECTION","TREE","ECommandShapeProperty","property","targets","_capabilities","_data","_property","_targets","_isMerged","toCapability","isRecursive","isMergeable","isClassMergeable","capabilities","initProperty","getParts","init","recursive","CHILDREN","capability","getProperty","merge","isMerged","datum","setProperty","ECommandShapePropertyAll","POSITION","WIDTH","HEIGHT","ROTATION","SKEW","skew","rotation","ECommandShapePropertyCapability","apply","arguments","shapeCapability","getCapability","locked","ECommandShapePropertyCapabilityLock","ECommandShapePropertyCapabilityUnlock","ECommandShapePropertyCornerOff","corner","ECommandShapePropertyCornerOn","ECommandShapePropertySimple","ECommandShapePropertyCursor","cursor","ECommandShapePropertyRecursive","ECommandShapePropertyRecursiveSimple","ECommandShapePropertyFillColor","fill","ECommandShapePropertyFillEnable","ECommandShapePropertyFocusable","isFocusable","ECommandShapePropertyId","ECommandShapePropertyImageClear","image","gradient","ECommandShapePropertyImageFitTo","ECommandShapePropertyImage","ECommandShapePropertyInteractive","ECommandShapePropertyLineHeadColor","LINE_HEAD","points","marker","ECommandShapePropertyLineHeadMargin","margin","ECommandShapePropertyLineHeadSizeX","ECommandShapePropertyLineHeadSizeY","ECommandShapePropertyLineHeadType","EShapePointsMarkerType","ECommandShapePropertyLineTailColor","LINE_TAIL","ECommandShapePropertyLineTailMargin","ECommandShapePropertyLineTailSizeX","ECommandShapePropertyLineTailSizeY","ECommandShapePropertyLineTailType","ECommandShapePropertyPointsStyle","added","removed","LINE","style","EShapePointsStyle","ECommandShapePropertyPositionAndRotate","ECommandShapePropertyPositionLeft","rectangle","WORK","Rectangle","getBoundsLocal","ECommandShapePropertyPositionTop","ECommandShapePropertyPositionX","ECommandShapePropertyPositionY","ECommandShapePropertyPosition","ECommandShapePropertyRadius","radius","ECommandShapePropertyRotation","ECommandShapePropertyShortcut","shortcut","ECommandShapePropertySizeX","ECommandShapePropertySizeY","ECommandShapePropertySkew","ECommandShapePropertyStrokeAlign","stroke","align","ECommandShapePropertyStrokeColor","ECommandShapePropertyStrokeEnable","ECommandShapePropertyStrokeSideOff","side","ECommandShapePropertyStrokeSideOn","ECommandShapePropertyStrokeStyle","ECommandShapePropertyStrokeWidth","ECommandShapePropertyTextAlignHorizontal","text","horizontal","ECommandShapePropertyTextAlignVertical","vertical","ECommandShapePropertyTextClipping","clipping","ECommandShapePropertyTextColor","ECommandShapePropertyTextDirection","direction","ECommandShapePropertyTextFamily","family","ECommandShapePropertyTextFitting","fitting","ECommandShapePropertyTextOffsetHorizontal","offset","ECommandShapePropertyTextOffsetVertical","ECommandShapePropertyTextOutlineColor","outline","ECommandShapePropertyTextOutlineEnable","ECommandShapePropertyTextOutlineWidth","ECommandShapePropertyTextPaddingHorizontal","padding","ECommandShapePropertyTextPaddingVertical","ECommandShapePropertyTextSizeDelta","Math","max","ECommandShapePropertyTextSize","ECommandShapePropertyTextSpacingHorizontal","spacing","ECommandShapePropertyTextSpacingVertical","ECommandShapePropertyTextStyle","ECommandShapePropertyTextValue","ECommandShapePropertyTextWeight","weight","ECommandShapePropertyTitle","title","ECommandShapeReplaceOne","newShape","oldShape","_newShape","_oldShape","swapLast","ECommandShapeReplace","factory","_factory","_newShapes","_oldShapes","newShapes","oldShapes","REPLACING","pivot","pivotX","pivotY","TRANSFORM","ECommandShapeSelect","before","after","_after","isClean","ECommandShapeTreeBringForward","SHAPE_COMPARATOR","ECommandShapeTreeBringToFront","indexSize","indexIndex","indexCurrent","indexOffset","Number","MAX_SAFE_INTEGER","ECommandShapeTreeSendBackward","ECommandShapeTreeSendToBack","UtilShapeTransforms","prepare","editor","EShapeEditor","updateTransform","internalTransform","internalTransformParentInverse","invert","identity","copyFrom","TRANSFORM_CHILD","finalize","newLocalTransform","localTransform","append","applyLocal","c","tx","ty","UPLOADED","cposition","crotation","cskew","cwidth","cheight","rx","atan2","ry","px","py","toSizeNormalized","sqrt","s","ECommandShapeUngroup","isUngroupable","targetLocalTransform","targetChildren","clones","j","jmax","prepend","tailLocalX","tailLocalY","tailNormal","normal","tailNormalX","tailNormalY","nd","ndx","ndy","f","headLocalX","headLocalY","headNormal","headNormalX","headNormalY","UNGROUPING","newGraphicTester","graphic","graphicId","mappings","Map","UtilCsvState","lines","linesLength","line","lineLength","next","newCursor","nextLine","UtilCsv","parseLine","icomma","charAt","k","unescape","substring","parse","str","split","row","stringifyLine","delimiter","escape","stringify","concat","toGraphicTesterObject","rows","uuid","parseInt","original","object","toGraphicTesterSerialized","simple","parsed","JSON","uuids","objects","min","toGraphicTesterSimple","serialized","forEach","key","dialogSelectTHumbnailNotFound","shapeTypeTheme","EToolSelectMode","EShapeActionExtensions","extension","_b","_typeToExtension","_extensions","EShapeActionValueDeserializers","deserializer","typeToExtension","each","iteratee","extensions","EShapeActionExtensionInputType","TEXT","EDialogActionExtension","dialog","condition","layout","_extension","_dialog","_condition","_layout","newSelect","extensionItems","items","DSelect","menu","newSelectMenuItems","item","_selectLayout","newSelectLayout","conditionIndex","getChildIndex","addChildAt","addChild","newLabeled","_inputs","newInputs","extensionInputs","inputs","inputText","newInputText","DInputText","on","enter","ok","newLabel","DInputLabel","newSpace","DLayoutSpace","input","DLayoutHorizontal","_inputLayouts","newInputLayouts","labeled","toValue","fromValue","show","selectLayout","inputLayouts","onShow","hide","reset","initial","EDialogActionExtensionContainer","_selected","e","onChange","toIconName","EShapeExtensions","EShapeDeserializers","onDeserialized","EShapeOnDeserializeds","runtime","EShapeRuntimes","EShapeUploadeds","createGroupUploaded","iconBuilder","icon","svg","build","icons","texture","ECommandShapeEmbeddedAcceptorEdgePropertySide","EShapeEmbeddedAcceptorEdge","EShapeAcceptorEdgeSide","ECommandShapeEmbeddedAcceptorEdgePropertySubtype","subtype","EShapeAcceptorEdgeType","HEAD","ECommandShapeEmbeddedAcceptorEdgePropertyVvisible","vvisible","EEditorShapeEmbeddedAcceptorEdge","options","_icons","initLayout","content","setHeight","DLayoutVertical","newTextLabel","selectSubtype","selectSide","checkVvisible","isDisabled","onSelectionChange","DText","subtheme","getLabel","_selectSubtype","newSelectSubtype","toSelectSubtypeLabel","TAIL","change","onSelectSubtypeChanged","DControllers","getCommandController","_selectSide","newSelectSide","DSelectMultiple","LEFT","toSelectSideLabel","check","TOP","RIGHT","BOTTOM","onSelectSideChange","fromSelectSideValues","toSelectSideValues","_checkVvisible","newCheckIsVvisible","DButtonCheckRight","getCheckIsVvisibleLabel","onCheckVvisibleChanged","inactive","isVvisible","last","isEnabled","isActive","_subtheme","newSubtheme","DThemes","DPane","EShapeEmbeddedAcceptorEdges","getTheme","existing","load","getName","EShapeType","EMBEDDED_ACCEPTOR_EDGE","creator","ECommandShapeButtonPropertyIsActive","EShapeButton","ECommandShapeButtonPropertyIsGrouped","isGrouped","ECommandShapeButtonPropertyIsToggle","isToggle","EEditorShapeButton","checkIsToggle","checkIsGrouped","checkIsActive","_checkIsToggle","newCheckIsToggle","getCheckIsToggleLabel","onCheckIsToggleChanged","onSelectionChangeCheckIsToggle","_checkIsGrouped","newCheckIsGrouped","getCheckIsGroupedLabel","onCheckIsGroupedChanged","onSelectionChangeCheckIsGrouped","_checkIsActive","newCheckIsActive","getCheckIsActiveLabel","onCheckIsActiveChanged","onSelectionChangeCheckIsActive","EShapeButtons","BUTTON","EShapeButtonLayerButtonValue","layers","bringToFront","EShapeActionValueShowHideLayer","isEquals","layersLength","targetLayers","serizlize","manager","layersId","serializedLayers","addResource","deserialize","resources","getExtension","setExtension","deserializeLayers","resourcesLength","EShapeButtonLayerButtonValueContainer","_values","_sizeX","_margin","_onChange","at","indexA","indexB","source","sourceValues","sourceValuesLength","serialize","isChanged","EShapeButtonLayerIds","ID","EXTENSION","EShapeButtonLayer","mode","_button","onButtonValueChange","_corner","EShapeCorner","updateUploaded","newButtons","layoutButtons","onSizeChange","shapeButton","button","buttonCount","childrenLength","master","toCorner","buttonValues","buttonValuesLength","buttonMargin","sizeX","sizeY","totalWeight","buttonSpaceFactor","part","EShapeCopyPart","resource","EShapeGroupShadowed","ECommandShapeButtonLayerValueAdd","ECommandShapeButtonLayerValueBringForward","ECommandShapeButtonLayerValueMargin","ECommandShapeButtonLayerValueRemove","ECommandShapeButtonLayerValueReplace","ECommandShapeButtonLayerValueSendBackward","EDialogShapeButtonLayerValue","newContentChildren","theme","inputLabel","inputWidth","newLayoutOf","getSelectLayerLabel","selectLayer","checkBringToFront","newLayoutLabel","newLayoutSpace","_inputLabel","newInputLabel","DInputTextAndLabel","getInputLabelLabel","space","_inputWidth","newInputWidth","DInputRealAndLabel","getInputWidthLabel","_selectLayer","newSelectLayer","newSelectLayerMenuItemOptions","_checkBringToFront","newCheckBringToFront","DButtonCheck","getCheckBringToFromLabel","DMenu","fit","slice","getResolvedValue","getType","DDialogLayered","EEditorShapeButtonLayer","buttonNew","buttonDelete","buttonBringForward","buttonSendBackward","columnList","inputMargin","onListSelectionChange","_buttonNew","newButtonNew","DButtonAmbient","new","getButtonNewTitle","emitter","onButtonNewActive","opener","dialogButton","open","then","onSelectionChangeButtonNew","_buttonDelete","newButtonDelete","getButtonDeleteTitle","first","onListSelectionChangeButtonDelete","_buttonBringForward","newButtonBringForward","arrow_up","getButtonBringForwardTitle","onListSelectionChangeButtonBringForward","_buttonSendBackward","newButtonSendBackward","arrow_down","getButtonSendBackwardTitle","onListSelectionChangeButtonSendBackward","_dialogButton","newDialogButton","_columnList","newColumnList","DList","toLabel","updater","newItem","DListItem","dblclick","_","onColumnListDblClick","columnDialog","onSelectionChangeColumnList","_inputMargin","newInputMargin","getInputMarginLabel","onSelectionChangeInputRowHeight","EShapeButtonLayers","PRIMITIVE","STROKE_SIDE","BORDER_RADIUS","deserializeBase","EShapeChartTick","major","minor","EShapeChartTickMajor","count","EShapeChartTickMinor","EShapeChartAxisX","tick","EShapeChartAxisY","EShapeChartAxis","EShapeChartLineIds","PLOT_AREA_ID","LINE_ID","X_AXIS_ID","X_AXIS_TICK_MAJOR_ID","X_AXIS_TICK_MINOR_ID","Y_AXIS_ID","Y_AXIS_TICK_MAJOR_ID","Y_AXIS_TICK_MINOR_ID","EShapeChartLine","axis","ECommandChartAxisXPadding","ECommandChartAxisYPadding","ECommandChartTickXMajorCount","ECommandChartTickXMinorCount","ECommandChartTickYMajorCount","ECommandChartTickYMinorCount","EShapeChartAxes","getPlotArea","newPlotArea","EShapeRectangle","EShapeDefaults","FILL_ALPHA","newPlotAreaLabel","EShapeTextAlignVertical","OUTSIDE_TOP","getLine","newLine","sxh","syh","createLine","STROKE_WIDTH","getXAxis","getXAxisTickMajor","getXAxisTickMinor","newXAxis","EShapeBar","EShapeBarPosition","newXAxisLabel","OUTSIDE_BOTTOM","createXAxis","createChildren","deleteXAxis","deleteChildren","setXAxisPadding","newXAxisTickMajor","newXAxisTickMinor","createXAxisTickMajor","deleteXAxisTickMajor","setXAxisTickMajorCount","createXAxisTickMinor","deleteXAxisTickMinor","setXAxisTickMinorCount","getYAxis","getYAxisTickMajor","getYAxisTickMinor","newYAxis","newYAxisLabel","EShapeTextAlignHorizontal","OUTSIDE_LEFT","EShapeTextDirection","BOTTOM_TO_TOP","createYAxis","deleteYAxis","setYAxisPadding","newYAxisTickMajor","newYAxisTickMinor","createYAxisTickMajor","deleteYAxisTickMajor","setYAxisTickMajorCount","createYAxisTickMinor","deleteYAxisTickMinor","setYAxisTickMinorCount","EEditorShapeChartLine","getCheckXAxisLabel","self","getCheckXAxisMajorTickLabel","top","right","left","bottom","getCheckXAxisMinorTickLabel","getCheckYAxisLabel","getCheckYAxisMajorTickLabel","getCheckYAxisMinorTickLabel","getTextMajorTickCountLabel","DInputInteger","getTextMinorTickCountLabel","getTextPaddingLabel","EShapeChartLineActionRuntime","cloned","xmajorCount","ymajorCount","xminorCount","yminorCount","xmajors","initTicks","ymajors","xminors","yminors","workMajorPositions","Float64Array","xtick","xformatter","NumberFormatters","ytick","yformatter","plotArea","xpadding","ypadding","ticks","toStepScale","scale","getStep","span","power","floor","log","LN10","base","pow","getTickPositions","step","ratio","NaN","start","istart","ceil","stop","istop","nticks","updateTicksXMinor","mstep","lmin","lmax","mticks","minorCount","mtick","toStepMinor","updateTicksX","positions","format","updateTicksYMinor","updateTicksY","updateLines","xmin","xratio","lxmin","ymin","yratio","lymax","pointsValues","valueValues","valueValuesLength","valueTimes","times","time","xmax","ymax","valuesLength","timesLength","t","v","xspan","yspan","sx","sy","lxmax","lymin","EShapeActionRuntimeBase","EShapeChartLineRuntime","actions","EShapeRuntimeImpl","EShapeChartLines","EShapeInputs","EShapeRectangleRounded","STROKE_COLOR","EShapeActionValueMiscInput","EShapeActionValueMiscType","INPUT_TEXT","EShapeActionValueOnInputAction","EMIT_EVENT","EShapeActionValueChangeColor","EShapeActionValueChangeColorType","STROKE","EShapeActionValueChangeColorTarget","COLOR","HIGHLIGHT_COLOR","ALPHA","EShapeTableCell","columnValues","column","columnValueRuntime","EShapeTableColumnValueBody","EShapeTableColumnValueHeader","labelId","EShapeTableColumnValueType","NUMBER","EShapeTableColumnValue","getter","setter","header","body","getterId","setterId","formatterId","headerId","bodyId","EShapeTableColumn","EShapeTableIds","HEADER_ID","BODY_ID","EShapeTableRowSelectionType","SINGLE","MULTIPLE","EShapeTableRowSelection","toggle","getBody","setRowActive","addTo","lastIndex","getRow","cells","EShapeTableRow","_isCellUpdateAllowed","_isCellUpdateCalled","updateCells","disallowCellUpdate","allowCellUpdate","invoke","isCellUpdatedCalled","selectionId","EShapeTable","_columnWidths","_columnXs","onColumnChange","onRowChange","cell","newCellsHeader","newCellsBody","layoutCells","columnCount","toRowCountRequired","abs","isColumnDirty","rowsLength","rowCountRequired","rowCount","masterEven","masterOdd","irow","ACTION","masterCellEven","masterCellOdd","columnCountRequired","cellsLength","icolumn","rowHeight","rowHeightHalf","columnValuesLength","columnWidths","columnXs","columnWidthFactor","columnX","columnWidth","hcells","hcellsLength","hcell","ECommandShapeTableColumnValueAdd","ECommandShapeTableColumnValueBringForward","ECommandShapeTableColumnValueRemove","ECommandShapeTableColumnValueReplace","ECommandShapeTableColumnValueSendBackward","ECommandShapeTableRowHeight","ECommandShapeTableRowSelectionType","EDialogTableColumn","getSelectColumnValueTypeLabel","toSelectColumnValueTypeLabel","_selectType","DInputReal","getInputGetterLabel","_inputGetter","getInputSetterLabel","_inputSetter","getInputFormatLabel","_inputFormat","getSelectTextAlignLabel","CENTER","toTextAlignLabel","_selectAlign","EEditorShapeTable","getInputRowHeightLabel","inputRowHeight","getSelectRowSelectionTypeLabel","selectRowSelectionType","_columnDialog","newColumnDialog","columnDialog_1","_inputRowHeight","newInputRowHeight","_selectRowSelectionType","newSelectRowSelectionType","toSelectRowSelectionTypeLabel","onSelectionChangeSelectRowSelectionType","EShapeTableActionRuntime","table","imin","jmin","columnRuntime","formatter","EShapeTableCellActionValueChangeColor","FILL","getColorCode","activeHoverColor","UtilRgb","brighten","activeColor","hoverColor","disabledColor","darken","FILL_COLOR","EShapeActionValueChangeColorCode","EShapeTableBodyRuntime","lastRowIndex","lastColumnIndex","onClick","isSingle","isNotSingle","originalEvent","ctrlKey","shiftKey","onDblClick","interactionManager","getCell","focus","onOut","setRowHovered","onCellTouched","rowIndex","columnIndex","lastRowTouched","getLayer","view","isHovered","WORK_POINT","Point","EShapeTableBody","containsAbs","ax","ay","containsAbsBBox","containsText","containsChildren","toValueDefault","fromValueDefault","formatterDefault","EShapeTableColumnValueRuntime","parseToValue","parseFromValue","parseFormat","trim","formatter_1","expression","def","defLiteral","Function","EShapeTableHeaderRuntime","EShapeTableHeader","EShapeTableRuntime","EShapeTables","headerCell","EShapeStrokeSide","even","odd","cellEven","cellOdd","newHeaderLabel","getHeaderName","deserializeHeader","getBodyName","deserializeBody","EShapeExtensionFactories","_factories","factories","EDialogActionKeywordInput","getClipperRect","resolution","point","UtilHtmlElement","DInputSearch","EDialogActionKeywordBoard","onInputChange","_input","newInput","word","newKeywords","keywords","_keywords","filtered","keyword","newList","toId","_text","newText","wordWrap","DBoard","EDialogAction","showHideTypeLayout","blinkTypeLayout","transformTypeLayout","changeColorTypeLayout","changeColorTargetLayout","rotateTypeLayout","resizeTypeLayout","originXLayout","originYLayout","moveTypeLayout","openTypeLayout","openDialogTypeLayout","changeTextTypeLayout","miscTypeLayout","onInputActionLayout","whenTypeLayout","gestureTypeLayout","gestureOperationTypeLayout","selectLayerLayout","intervalLayout","amount","targetName","colorLayout","argument","contents","initialization","pointerEventsLayout","colorCode","alphaCode","brightness","blend","scaleLayout","checkBringToFrontLayout","inNewWindowLayout","onChangeBound","showHideType","blinkType","transformType","resizeType","changeColorTarget","openType","openDialogType","miscType","_themeShape","newThemeShape","EShapeActionValueType","SHOW_HIDE","themeShape","toTypeLabel","BLINK","CHANGE_COLOR","CHANGE_TEXT","CHANGE_CURSOR","OPEN","GESTURE","MISC","getSelectActionLabel","buttonKeyword","_buttonKeyword","newButtonKeyword","action_keyword","getButtonKeywordTitle","onButtonKeywordActive","onButtonKeywordInactive","boardKeyword","getBoardKeywordOffset","boardKeywordWidth","_boardKeyword","newBoardKeyword","_showHideType","newShowHideType","EShapeActionValueShowHideType","SHAPE","toShowHideTypeLabel","LAYER","_showHideTypeLayout","onChangeShowHideTypeLayout","_blinkType","newBlinkType","EShapeActionValueBlinkType","VISIBILITY","toBlinkTypeLabel","BRIGHTEN","DARKEN","OPACITY","COLOR_FILL","COLOR_STROKE","_blinkTypeLayout","onChangeBlinkTypeLayout","_transformType","newTransformType","EShapeActionValueTransformType","MOVE","toTransformTypeLabel","ROTATE","RESIZE","_transformTypeLayout","onChangeTransformTypeLayout","_changeColorType","newChangeColorType","toChangeColorTypeLabel","TEXT_OUTLINE","_changeColorTypeLayout","changeColorType","onChangeChangeColorTypeLayout","_changeColorTarget","newChangeColorTarget","COLOR_AND_ALPHA","toChangeColorTargetLabel","CODE","BRIGHTNESS","_changeColorTargetLayout","onChangeChangeColorTargetLayout","_rotateType","newRotateType","EShapeActionValueTransformRotateType","RELATIVE","toTransformRotateTypeLabel","ABSOLUTE","_rotateTypeLayout","rotateType","onChangeRotateTypeLayout","_resizeType","newResizeType","EShapeActionValueTransformResizeType","RELATIVE_SIZE","ABSOLUTE_SIZE","toTransformResizeTypeLabel","ABSOLUTE_HEIGHT","RELATIVE_HEIGHT","ABSOLUTE_WIDTH","RELATIVE_WIDTH","_resizeTypeLayout","onChangeResizeTypeLayout","_originX","newOriginX","_originXLayout","getInputOriginXLabel","originX","onChangeOriginXLayout","_originY","newOriginY","_originYLayout","getInputOriginYLabel","originY","onChangeOriginYLayout","_moveType","newMoveType","EShapeActionValueTransformMoveType","RELATIVE_X","toTransformMoveTypeLabel","RELATIVE_Y","ABSOLUTE_X","ABSOLUTE_Y","FORWARD_OR_BACKWARD","LEFT_OR_RIGHT","_moveTypeLayout","moveType","onChangeMoveTypeLayout","_openType","newOpenType","EShapeActionValueOpenType","DIAGRAM","newOpenTypeMenuItems","toOpenTypeLabel","PAGE","DIALOG","EShapeActionOpenExtensions","_openTypeLayout","onChangeOpenTypeLayout","_openDialogType","newOpenDialogType","EShapeActionValueOpenDialogType","newOpenDialogTypeMenuItems","toOpenDialogTypeLabel","INTEGER","REAL","BOOLEAN","DATE","TIME","DATETIME","EShapeActionOpenDialogExtensions","_openDialogTypeLayout","onChangeOpenDialogTypeLayout","_changeTextType","newChangeTextType","EShapeActionValueChangeTextType","toChangeTextTypeLabel","_changeTextTypeLayout","changeTextType","onChangeChangeTextTypeLayout","_miscType","newMiscType","newMiscTypeMenuItems","toMiscTypeLabel","INPUT_INTEGER","INPUT_REAL","WRITE_BOTH","WRITE_LOCAL","WRITE_REMOTE","HTML_ELEMENT","EXECUTE","EShapeActionMiscExtensions","_miscTypeLayout","onChangeMiscTypeLayout","_onInputAction","newOnInputAction","toOnInputActionLabel","_onInputActionLayout","onInputAction","onChangeOnInputActionLayout","DIALOG_TEXT","DIALOG_INTEGER","DIALOG_REAL","DIALOG_BOOLEAN","_whenType","newWhenType","UtilHtmlElementWhen","FOCUSED","CLICKED","toHtmlElementWhenLabel","DOUBLE_CLICKED","ALWAYS","_whenTypeLayout","getSelectWhenLabel","whenType","toWhenTypeValue","toWhenType","whenTypeValue","onChangeWhenTypeLayout","HTML_ELEMENT_WITHOUT_POINTER_EVENTS","_gestureType","newGestureType","EShapeActionValueGestureType","toGestureTypeLabel","_gestureTypeLayout","gestureType","onChangeGestureTypeLayout","_gestureOperationType","newGestureOperationType","fromGestureOperationType","toGestureOperationTypeLabel","toGestureOperationType","types","_gestureOperationTypeLayout","gestureOperationType","onChangeGestureOperationTypeLayout","_selectLayerLayout","onChangeSelectLayerLayout","newCondition","getInputConditionLabel","onChangeCondition","_interval","newInterval","_intervalLayout","newIntervalLayout","getInputIntervalLabel","interval","getInputIntervalUnitLabel","DAlignHorizontal","onChangeIntervalLayout","newSize","getInputSizeLabel","onChangeSize","_amount","newAmount","getInputAmountLabel","onChangeAmount","_contents","newContents","getInputValueLabel","onChangeContents","_initialization","newInitialization","getInputInitializationLabel","onChangeInitialization","_pointerEventsLayout","pointerEvents","onChangePointerEventsLayout","_pointerEvents","newPointerEvents","getCheckPointEventsLabel","_targetName","newTargetName","getInputTargetNameLabel","onChangeTargetName","newColor","DButtonColor","dialogNew","dialogCurrent","current","_colorLayout","newColorLayout","getButtonColorLabel","onChangeColorLayout","newTarget","getInputTargetLabel","onChangeTarget","_argument","newArgument","getInputArgumentLabel","onChangeArgument","_colorCode","newColorCode","getInputColorCodeLabel","onChangeColorCode","_alphaCode","newAlphaCode","getInputAlphaCodeLabel","onChangeAlphaCode","_brightness","newBrightness","getInputBrightnessLabel","onChangeBrightness","_blend","newBlend","getInputBlendLabel","onChangeBlend","_initial","newInitial","getInputInitialLabel","onChangeInitial","_step","newStep","getInputStepLabel","onChangeStep","_min","newMin","getInputMinLabel","onChangeMin","_max","newMax","getInputMaxLabel","onChangeMax","_scaleLayout","newScaleLayout","getInputScaleLabel","scaleMin","scaleMax","onChangeScaleLayout","_scaleMin","newScaleMin","_scaleMax","newScaleMax","getCheckBringToFrontLabel","_checkBringToFrontLayout","onChangeCheckBringToFrontLayout","_inNewWindow","newInNewWindow","getCheckInNewWindowLabel","_inNewWindowLayout","inNewWindow","onChangeInNewWindowLayout","_c","_d","EShapeActionValueShowHideShape","blinkColor","EShapeActionValueBlink","EShapeActionValueChangeColorTypes","pack","changeColor","EShapeActionValueChangeColorBrightness","EShapeActionValueTransformResize","EShapeActionValueTransformMove","EShapeActionValueTransformRotate","EShapeActionValueChangeText","EShapeActionValueOpenDialog","EShapeActionValueOpenDialogExtension","EShapeActionValueOpen","EShapeActionValueOpenExtension","EShapeActionValueEmitEvent","EShapeActionValueChangeCursor","EShapeActionValueGesture","EShapeActionValueMiscEmitEvent","EShapeActionValueMiscWrite","EShapeActionValueMiscHtmlElement","EShapeActionValueMiscExecute","EShapeActionValueMiscExtension","EShapeActionValueShowHide","unpack","opetype","dialogType","operationType","EShapeActionValueMisc","EDialogDataMappingValue","inputSource","inputDestination","inputInitial","_inputSource","newInputSource","onInputSourceChanged","getInputSourceLabel","_newSource","updateRows","_inputDestination","newInputDestination","onInputDestinationChanged","getInputDestinationLabel","_newDestination","_inputInitial","newInputInitial","_table","newTable","DTable","columns","newColumnOptions","getTableColumnDataIdLabel","editable","sortable","getTableColumnMappedToLabel","mappedId","_ids","toIds","ids","newIds","scope","EShapeDataValueScope","PRIVATE","_onUpdateRowsBound","newOnUpdateRowsBound","onUpdateRows","_onUpdateRowsTimeout","_isRowsDirty","newRows","window","setTimeout","onUpdateRowsBound","mapper","_mapper","newSource","_lastSource","EShapeDataMapperImpl","destinations","_destinations","newDestination","_lastDestination","EShapeDataValueImpl","map","EDialogDataValue","layoutType","layoutScope","inputId","inputAs","layoutInterval","inputFormat","layoutRangeType","inputRangeFrom","inputRangeTo","inputCapacity","layoutOrder","_inputId","newInputId","getInputIdLabel","_inputAs","newInputAs","getInputAsLabel","_layoutType","newLayoutType","getSelectTypeLabel","selectType","newSelectType","EShapeDataValueType","newSelectTypeItems","getSelectTypeValueLabel","BOOLEAN_ARRAY","NUMBER_ARRAY","STRING","STRING_ARRAY","OBJECT","OBJECT_ARRAY","TICKER","EShapeDataValueExtensions","_layoutScope","newLayoutScope","getSelectScopeLabel","selectScope","_selectScope","newSelectScope","PUBLIC","getSelectScopeValueLabel","PROTECTED","_layoutInterval","newLayoutInterval","inputInterval","_inputInterval","newInputInterval","newInputFormat","_layoutRangeType","newLayoutRangeType","getSelectRangeTypeLabel","selectRangeType","_selectRangeType","newSelectRangeType","EShapeDataValueRangeType","getSelectRangeTypeValueLabel","FROM","TO","FROM_TO","_inputRangeFrom","newInputRangeFrom","getInputRangeFromLabel","_inputRangeTo","newInputRangeTo","getInputRangeToLabel","_inputCapacity","newInputCapacity","DInputIntegerAndLabel","getInputCapacityLabel","_layoutOrder","newLayoutOrder","getSelectOrderLabel","selectOrder","_selectOrder","newSelectOrder","EShapeDataValueOrder","ASCENDING","getSelectOrderValueLabel","DESCENDING","rangeType","order","as","range","to","toInterval","capacity","EDialogLayer","inputName","inputPositionLayout","inputSizeLayout","checkBackgroundLayout","colorBackgroundLayout","selectGestureLayout","checkVisibleLayout","checkInteractiveLayout","inputA","inputB","_inputName","newInputName","getInputNameLabel","_inputX","newInputX","_inputY","newInputY","_inputPositionLayout","getInputPositionLabel","inputX","inputY","_inputHeight","newInputHeight","_inputSizeLayout","inputHeight","_checkBackground","newCheckBackground","getCheckBackgroundLabel","onCheckBackgroundChange","colorBackground","_checkBackgroundLayout","getTextBackgroundLabel","checkBackground","_colorBackground","newColorBackground","_colorBackgroundLayout","_checkVisible","newCheckVisible","getCheckVisibleLabel","_checkVisibleLayout","checkVisible","_checkInteractive","newCheckInteractive","getCheckInteractiveLabel","_checkInteractiveLayout","checkInteractive","_selectGesture","newSelectGesture","getSelectGestureValueLabel","_selectGestureLayout","getSelectGestureLabel","selectGesture","EDialogProcessing","toReasonMalformedLabel","toReasonMalformedRange","lower","upper","toReasonMalformed","reason","toReasonTarget","targetLabel","toReasonTargetAt","atLabel","toReason","toButtonText","reject","footer","buttonOk","DDialogProcessing","dialogSelectThumbnailSize","getDialogSelectThumbnailSize","getDialogSelectThumbnailNotFound","newDialogTHumbnailNotFound","thumbnailSize","devicePixelRatio","svgSize","toSvgTexture","newDialogSelectWithThumbnailsOptions","controller","toThumbnail","onSelect","thumbnailNotFound","itemSize","textures","toImage","image_1","isString","newTexture_1","Texture","baseTexture","checkTextures","clearTimeoutId","clearTextures","url","off","valid","itemPadding","DDialogSelectListItem","with","tint","clearTimeout","close","newDialogSelectWithThumbnails","DDialogSelect","EDialogSnap","getSelectDirectionLabel","inputPosition","ESnapperTargetValueType","VERTICAL","getSelectDirectionValueLabel","HORIZONTAL","_inputPosition","newInputPosition","ESnapperTargetValue","EEditorAction","actionList","checkFocusable","labelTitle","inputTitle","labelShortcut","inputShortcut","labelCursor","dropdownCursor","actionDialog","addActionValue","DBaseState","DISABLED","removeActionValue","bringActionValueForward","sendActionValueBackward","_actionDialog","newActionDialog","_actionList","newActionList","onActionListDblClick","onActionListSet","unset","onActionListUnset","oldActionValue","actionDialog_1","newActionValue","replaceActionValue","getImageSource","onSelectionChangeActionList","setInteractive","onSelectionChangeCheckInteractive","_checkFocusable","newCheckFocusable","getCheckFocusableLabel","setFocusable","onSelectionChangeCheckFocusable","_labelShortcut","newLabelShortcut","getInputShortcutLabel","_inputShortcut","newInputShortcut","setShortcut","toNormalizedShortcut","trimmed","onSelectionChangeInputShortcut","_labelTitle","newLabelTitle","getInputTitleLabel","_inputTitle","newInputTitle","setTitle","toNormalizedTitle","onSelectionChangeInputTitle","_labelCursor","newLabelCursor","getDropdownCursorLabel","_dropdownCursor","newDropdownCursor","DDropdown","newDropdownCursorMenuItems","cursors","setCursor","_cursors","getCursors","onSelectionChangeDropdownCursor","EDialogCanvas","onDefaultChange","categoryDefault","default","categoryItems","layoutCategory","categoryItem","selectCategory","writable","layoutName","layoutLabel","layoutWidth","layoutHeight","layoutSummary","layoutDescription","layoutBackground","_layoutName","newLayoutName","_layoutLabel","_layoutWidth","newLayoutWidth","_layoutHeight","newLayoutHeight","getInputHeightLabel","_layoutCategory","newLayoutCategory","getSelectCategoryLabel","_selectCategory","newSelectCategory","_layoutSummary","newLayoutSummary","newLabelSummary","inputSummary","getInputSummaryLabel","_inputSummary","newInputSummary","DInputTextArea","_layoutDescription","newLayoutDescription","newLabelDescription","inputDescription","getInputDescriptionLabel","_inputDescription","newInputDescription","_layoutBackground","newLayoutBackground","newLabelBackground","inputBackground","getInputBackgroundLabel","_inputBackground","newInputBackground","diagramCanvas","isNumber","EEditorCanvas","_e","mask","shadow","toOptions","buttonEditor","border","DCornerMask","TOP_LEFT","onInputNameChange","_buttonEditor","newButtonEditor","editor_canvas","onButtonEditorActive","dialogEditor","_dialogEditor","newDialogEditor","render","renderer","textFormat","toFixed","textFormatDegree","PI","textUnformatDegree","parseFloat","EEditorCoordinate","_workRectangle","_updateInputShape","_updateInputId","_isUpdateInputShapeChanged","_renderInputsBound","renderInputs","inputPositionX","inputPositionY","inputPositionLeft","inputPositionTop","inputSizeX","inputSizeY","inputRotation","inputSkew","layoutAlignHorizontally","layoutAlignVertically","setId","_inputPositionX","newInputPositionX","getInputPositionXLabel","setPositionX","_inputPositionY","newInputPositionY","getInputPositionYLabel","setPositionY","_inputPositionLeft","newInputPositionLeft","getInputPositionLeftLabel","setPositionLeft","_inputPositionTop","newInputPositionTop","getInputPositionTopLabel","setPositionTop","_inputSizeX","newInputSizeX","getInputSizeXLabel","setSizeX","_inputSizeY","newInputSizeY","getInputSizeYLabel","setSizeY","_inputRotation","newInputRotation","getInputRotationLabel","editing","unformatter","setRotation","_inputSkew","newInputSkew","getInputSkewLabel","setSkew","_layoutAlignHorizontally","newLayoutAlignHorizontally","buttonAlignLeft","buttonAlignCenter","buttonAlignRight","buttonDistributeHorizontally","buttonDistributeVertically","buttonLock","_layoutAlignVertically","newLayoutAlignVertically","buttonAlignTop","buttonAlignMiddle","buttonAlignBottom","buttonRotateLeft","buttonRotateRight","_buttonAlignLeft","newButtonAlignLeft","editor_coordinate_align_left","getButtonAlignLeftTitle","saveForTranslate","alignLeft","_buttonAlignCenter","newButtonAlignCenter","editor_coordinate_align_center","getButtonAlignCenterTitle","alignCenter","_buttonAlignRight","newButtonAlignRight","editor_coordinate_align_right","getButtonAlignRightTitle","alignRight","_buttonAlignTop","newButtonAlignTop","editor_coordinate_align_top","getButtonAlignTopTitle","alignTop","_buttonAlignMiddle","newButtonAlignMiddle","editor_coordinate_align_middle","getButtonAlignMiddleTitle","alignMiddle","_buttonAlignBottom","newButtonAlignBottom","editor_coordinate_align_bottom","getButtonAlignBottomTitle","alignBottom","_buttonDistributeHorizontally","newButtonDistributeHorizontally","editor_coordinate_distribute_horizontally","getButtonDistributeHorizontallyTitle","distributeHorizontally","_buttonDistributeVertically","newButtonDistributeVertically","editor_coordinate_distribute_vertically","getButtonDistributeVerticallyTitle","distributeVertically","_buttonRotateLeft","newButtonRotateLeft","editor_coordinate_rotate_left","getButtonRotateLeftTitle","prepareRotate","saveForRotate","rotate","_buttonRotateRight","newButtonRotateRight","editor_coordinate_rotate_right","getButtonRotateRightTitle","_buttonLock","newButtonLock","lockCapability","COORDINATE","unlockCapability","hasPositionCapability","isLocked","updateInputs","EEditorDataMapping","listDataMappingValue","onListDataMappingValueSelectionChange","dialogDataMappingValue","addDataMappingValue","removeDataMappingValue","onListDataMappingValueSelectionChangeButtonDelete","bringDataMappingValueForward","onListDataMappingValueSelectionChangeButtonBringForward","sendDataMappingValueBackward","onListDataMappingValueSelectionChangeButtonSendBackward","_dialogDataMappingValue","newDialogDataMappingValue","_listDataMappingValue","newListDataMappingValue","destination","onListDataMappingValueDblClick","replaceDataMappingValue","onSelectionChangeListDataMappingValue","EEditorData","listDataValue","onListDataValueSelectionChange","dialogDataValue","addDataValue","removeDataValue","onListDataValueSelectionChangeButtonDelete","bringDataValueForward","onListDataValueSelectionChangeButtonBringForward","sendDataValueBackward","onListDataValueSelectionChangeButtonSendBackward","_dialogDataValue","newDialogDataValue","_listDataValue","newListDataValue","prefix","onListDataValueDblClick","replaceDataValue","onSelectionChangeListDataValue","EEditorLayerItem","iconsEye","iconsEyeSlash","work","_iconsEye","_iconsEyeSlash","_iconsWork","toLocal","global","getLeft","UtilPointerEvent","toGlobal","EEditorLayer","_isInitialized","onCanvasChange","newCanvas","isShown","onLayerChange","_onLayerChangeBound","newDialog","eye","eye_slash","eyeclick","onListDblClick","keydown","UtilKeyboardEvent","isDeleteKey","layerActive_1","oldValue_1","dialogLayer","onListLayerChange","listLayer","layerActive","forcibly","oldCanvas","onLayerChangeBound","isActiveDeletable","isActiveNotLast","isActiveNotFirst","updateModifier","getShapeTypeTheme","toShapeLabel","shapeType","name_1","EMBEDDED","EShapeEmbedded","toShapeTypeLabel","EEditorSearch","_finder","finder","inputSearch","getSelectStateLabel","selectState","buttonExecute","_inputSearch","newInputSearch","search","activate","newSelectTypeMenuItems","newSelectTypeMenuItem","newSelectTypeMenuItemShape","CIRCLE","SEMICIRCLE","RECTANGLE","RECTANGLE_ROUNDED","TRIANGLE","TRIANGLE_ROUNDED","CONNECTOR_LINE","CONNECTOR_ELBOW","IMAGE","GROUP","BAR","EMBEDDED_LAYER","getSelectTypeValue","_selectState","newSelectState","newSelectStateMenuItem","toStateLabel","getSelectStateValue","_buttonExecute","newButtonExecute","DButtonPrimary","getButtonExecuteTitle","editor_search","onButtonExecuteActive","indicator","indicatorExecute","id_1","type_1","state_1","connector","resolve","_indicatorExecute","newIndicatorExecute","DIndicatorProcessing","searching","_searching","searched","_searched","searchedAt","_searchedAt","Date","now","_requested","_timeoutId","newWord","timeoutId","doSearch","Promise","found","isArray","toTitle","onListItemDown","root","dialogError","_dialogError","newDialogError","DDialogMessage","message","getDialogErrorLabel","_dialogProcessing","newDialogProcessing","EEditorShape","piece","_isPieceEnabled","_pieceExcluder","exclude","_controller","_isChangeable","changeable","layoutChangeTo","buttonFill","buttonFillColor","layoutTexture","buttonStroke","buttonStrokeColor","inputStrokeWidth","inputStrokeAlign","layoutStrokeSide","textCorner","inputCornerRadius","layoutCorner","layoutLine","selectLineStyle","selectLineType","layoutLineTail","selectLineTailType","layoutLineTailSize","buttonLineTailColor","inputLineTailMargin","layoutLineHead","selectLineHeadType","layoutLineHeadSize","buttonLineHeadColor","inputLineHeadMargin","_layoutChangeTo","newLayoutChangeTo","newTextChangeToLabel","buttonCircle","buttonSemicircle","buttonRectangle","buttonRectangleRounded","buttonTriangle","buttonTriangleRounded","buttonLine","buttonLineConnector","buttonElbowConnector","buttonImage","buttonGraphicPiece","newButtonExtensionFactory","isExtensionReplacable","isFunction","newButtonExtension","buttonGroup","buttonUngroup","getTextChangeToLabel","selectDialog","toExtensionTitle","newDialogSelectExtensionFactory","toCreator","_buttonCircle","newButtonCircle","shape_circle","getButtonCircleTitle","EShapeCircle","_buttonSemicircle","newButtonSemicircle","shape_semicircle","getButtonSemicircleTitle","EShapeSemicircle","_buttonRectangle","newButtonRectangle","shape_rectangle","getButtonRectangleTitle","_buttonRectangleRounded","newButtonRectangleRounded","shape_rectangle_rounded","getButtonRectangleRoundedTitle","_buttonTriangle","newButtonTriangle","shape_triangle","getButtonTriangleTitle","EShapeTriangle","_buttonTriangleRounded","newButtonTriangleRounded","shape_triangle_rounded","getButtonTriangleRoundedTitle","EShapeTriangleRounded","_buttonLine","newButtonLine","shape_line","getButtonLineTitle","replaceLine","EShapeLine","SIZE","POINTS","isDanglingConnectorAllowed","dangling","_buttonLineConnector","newButtonLineConnector","shape_line_connector","getButtonLineConnectorTitle","replaceLineConnector","replaceConnector","_buttonElbowConnector","newButtonElbowConnector","shape_elbow_connector","getButtonElbowConnectorTitle","replaceElbowConnector","EShapeConnectorElbow","_buttonImage","newButtonImage","DButtonFile","editor_image","DButtonFileAs","DATA_URL","getButtonImageTitle","dataUrl","toImageElement","EShapeImage","_buttonGraphicPiece","newButtonGraphicPiece","graphic_piece","getButtonGraphicPieceTitle","onButtonGraphicPieceActive","dialogSelectGraphicPiece","_dialogSelectGraphicPiece","newDialogSelectGraphicPiece","toPieceThumbnail","newDialogSelectGraphicPieceImage","categories","newDialogSelectGraphicPieceNoImage","newDialogSelectGraphicPieceNoController","newDialogSelectGraphicPieceController","onDialogSelectGraphicPieceSelect","graphicPiece","categoryId","pieces","toDialogSelectGraphicPieceResult","pieceId","EShapeEmbeddeds","_buttonGroup","newButtonGroup","shape_group","getButtonGroupTitle","_buttonUngroup","newButtonUngroup","shape_ungroup","getButtonUngroupTitle","ungroup","_buttonFill","newButtonFill","getButtonFillLabel","setFillEnabled","_buttonFillColor","newButtonFillColor","setFill","_buttonStroke","newButtonStroke","getButtonStrokeLabel","setStrokeEnabled","_buttonStrokeColor","newButtonStrokeColor","setStroke","_inputStrokeWidth","newInputStrokeWidth","getInputStrokeWidthLabel","setStrokeWidth","_inputStrokeAlign","newInputStrokeAlign","getInputStrokeAlignLabel","setStrokeAlign","_layoutStrokeSide","newLayoutStrokeSide","buttonStrokeSideTop","buttonStrokeSideRight","buttonStrokeSideBottom","buttonStrokeSideLeft","buttonStrokeExpandable","buttonStrokeShrinkable","buttonStrokeScalableDotDash","_buttonStrokeSideTop","newButtonStrokeSideTop","stroke_side_top","getButtonStrokeSideTopTitle","setStrokeSide","_buttonStrokeSideRight","newButtonStrokeSideRight","stroke_side_right","getButtonStrokeSideRightTitle","_buttonStrokeSideBottom","newButtonStrokeSideBottom","stroke_side_bottom","getButtonStrokeSideBottomTitle","_buttonStrokeSideLeft","newButtonStrokeSideLeft","stroke_side_left","getButtonStrokeSideLeftTitle","_textCorner","newTextCorner","getTextCornerLabel","_inputCornerRadius","newInputCornerRadius","setRadius","_layoutCorner","newLayoutCorner","buttonCornerTopLeft","buttonCornerTopRight","buttonCornerBottomRight","buttonCornerBottomLeft","_buttonCornerTopLeft","newButtonCornerTopLeft","corner_top_left","getButtonCornerTopLeftTitle","setCorner","_buttonCornerTopRight","newButtonCornerTopRight","corner_top_right","getButtonCornerTopRightTitle","TOP_RIGHT","_buttonCornerBottomRight","newButtonCornerBottomRight","corner_bottom_right","getButtonCornerBottomRightTitle","BOTTOM_RIGHT","_buttonCornerBottomLeft","newButtonCornerBottomLeft","corner_bottom_left","getButtonCornerBottomLeftTitle","BOTTOM_LEFT","_layoutLine","newLayoutLine","textLine","buttonLineClosed","buttonLineLock","_textLine","newTextLine","getTextLineLabel","_buttonLineLock","newButtonLineLock","_selectLineStyle","newSelectLineStyle","EShapeStrokeStyle","getSelectLineStyleLabel","DOTTED","DOTTED_DENSELY","DOTTED_LOOSELY","DASHED","DASHED_DENSELY","DASHED_LOOSELY","setLineStyle","DOTTED_MASK","DASHED_MASK","_selectLineType","newSelectLineType","newSelectLineTypeMenuItems","setPointsStyle","FORMATTER_MASK","getSelectLineTypeLabel","EShapePointsFormatters","FORMATTER_SHIFT","_buttonLineClosed","newButtonLineClosed","line_closed","getButtonLineClosedTitle","CLOSED","_buttonStrokeExpandable","newButtonStrokeExpandable","stroke_expandable","getButtonStrokeExpandableTitle","setStrokeStyle","NON_EXPANDING_WIDTH","_buttonStrokeShrinkable","newButtonStrokeShrinkable","stroke_shrinkable","getButtonStrokeShrinkableTitle","NON_SHRINKING_WIDTH","_buttonStrokeScalableDotDash","newButtonStrokeScalableDotDash","stroke_scalable_dot_dash","getButtonStrokeScalableDotDashTitle","NON_SCALING_DOT_AND_DASH","_layoutLineTail","newLayoutLineTail","textLineTail","buttonLineTailLock","_textLineTail","newTextLineTail","getTextLineTailLabel","_buttonLineTailLock","newButtonLineTailLock","_selectLineTailType","newSelectLineTailType","getSelectLineTailTypeLabel","setLineTailType","_layoutLineTailSize","newLayoutLineTailSize","inputLineTailSizeX","inputLineTailSizeY","_inputLineTailSizeX","newInputLineTailSizeX","setLineTailSizeX","_inputLineTailSizeY","newInputLineTailSizeY","setLineTailSizeY","_buttonLineTailColor","newButtonLineTailColor","setLineTailColor","_inputLineTailMargin","newInputLineTailMargin","getInputLineTailMarginLabel","setLineTailMargin","_layoutLineHead","newLayoutLineHead","textLineHead","buttonLineHeadLock","_textLineHead","newTextLineHead","getTextLineHeadLabel","_buttonLineHeadLock","newButtonLineHeadLock","_selectLineHeadType","newSelectLineHeadType","getSelectLineHeadTypeLabel","setLineHeadType","_layoutLineHeadSize","newLayoutLineHeadSize","inputLineHeadSizeX","inputLineHeadSizeY","_inputLineHeadSizeX","newInputLineHeadSizeX","setLineHeadSizeX","_inputLineHeadSizeY","newInputLineHeadSizeY","setLineHeadSizeY","_buttonLineHeadColor","newButtonLineHeadColor","setLineHeadColor","_inputLineHeadMargin","newInputLineHeadMargin","getInputLineHeadMarginLabel","setLineHeadMargin","_layoutTexture","newLayoutTexture","buttonTextureImage","buttonTextureGradient","buttonTextureFitTo","buttonTextureClear","_buttonTextureImage","newButtonTextureImage","getButtonTextureImageTitle","imageElement","setImage","_buttonTextureGradient","newButtonTextureGradient","DButtonColorGradient","texture_gradient","getButtonTextureGradientTitle","toGradientImageUrl","setGradient","toObject","fromObject","_buttonTextureFitTo","newButtonTextureFitTo","DButton","texture_fit_to","getButtonTextureFitToTitle","fitToImage","_buttonTextureClear","newButtonTextureClear","texture_clear","getButtonTextureClearTitle","clearImage","ngroupable","strokeEnable","hasStrokeSide","hasLine","lineStrokeMask","hasLineTail","markerTail","markerTailFill","buttonLineTailColorValue","hasLineHead","markerHead","markerHeadFill","buttonLineHeadColorValue","hasBorderRadius","EEditorSnap","onSnapperChange","snapperTarget","onSnapperTargetChange","snapperGrid","onSnapperGridChange","buttonLabel","buttonGrid","buttonGridEye","inputGridSize","buttonTarget","buttonTargetNew","buttonTargetDelete","buttonTargetBringForward","buttonTargetSendBackward","buttonTargetEye","listTarget","listSnapTarget","_buttonLabel","newButtonLabel","_buttonTarget","newButtonTarget","getButtonTargetLabel","_buttonTargetNew","newButtonTargetNew","getButtonTargetNewTitle","onButtonTargetNewActive","dialogTarget","_buttonTargetDelete","newButtonTargetDelete","getButtonTargetDeleteTitle","_buttonTargetBringForward","newButtonTargetBringForward","getButtonTargetBringForwardTitle","_buttonTargetSendBackward","newButtonTargetSendBackward","getButtonTargetSendBackwardTitle","_buttonTargetEye","newButtonTargetEye","getButtonTargetEyeTitle","_dialogTarget","newDialogTarget","_listTarget","newListTarget","getListTargetItemLabel","onListTargetDblClick","_buttonGrid","newButtonGrid","getButtonGridLabel","_buttonGridEye","newButtonGridEye","getButtonGridEyeTitle","_inputGridSize","newInputGridSize","getInputGridSizeLabel","EEditorText","_fromShapeTextRegEx","_toShapeTextRegEx","getTextFontLabel","dropdownFontFamily","buttonFontColor","inputFontSize","buttonFontSizeDecrease","buttonFontSizeIncrease","buttonFontItalic","buttonFontBold","buttonOutline","buttonOutlineColor","inputOutlineWidth","getTextAlignLabel","buttonAlignOutsideLeft","buttonAlignOutsideRight","buttonAlignOutsideTop","buttonAlignOutsideBottom","buttonDirectionLeftToRight","buttonDirectionTopToBottom","buttonDirectionBottomToTop","buttonDirectionRightToLeft","buttonClipping","buttonFitting","getTextSpacingLabel","inputSpacingHorizontal","inputSpacingVertical","inputPaddingHorizontal","inputPaddingVertical","getTextOffsetLabel","inputOffsetHorizontal","inputOffsetVertical","_inputText","getInputTextHeight","setText","_dropdownFontFamily","newDropdownFontFamily","fontFamilies","newDropdownFontFamilyMenuItems","setTextFamily","fontFamily","_fontFamilies","getFontFamilies","_buttonFontColor","newButtonFontColor","setTextColor","_inputFontSize","newInputFontSize","setTextSize","_buttonFontSizeDecrease","newButtonFontSizeDecrease","editor_font_size_decrease","getButtonFontSizeDecreaseTitle","setTextSizeDelta","_buttonFontSizeIncrease","newButtonFontSizeIncrease","editor_font_size_increase","getButtonFontSizeIncreaseTitle","_buttonFontItalic","newButtonFontItalic","italic","getButtonFontItalicTitle","setTextStyle","EShapeTextStyle","ITALIC","NORMAL","_buttonFontBold","newButtonFontBold","bold","getButtonFontBoldTitle","setTextWeight","EShapeTextWeight","BOLD","_buttonOutline","newButtonOutline","getButtonOutlineLabel","setTextOutlineEnabled","_buttonOutlineColor","newButtonOutlineColor","setTextOutlineColor","_inputOutlineWidth","newInputOutlineWidth","getInputOutlineWidthLabel","setTextOutlineWidth","_buttonAlignOutsideLeft","newButtonAlignOutsideLeft","text_align_outside_left","getButtonAlignOutsideLeftTitle","setTextAlignHorizontal","text_align_left","text_align_center","text_align_right","_buttonAlignOutsideRight","newButtonAlignOutsideRight","text_align_outside_right","getButtonAlignOutsideRightTitle","OUTSIDE_RIGHT","_buttonAlignOutsideTop","newButtonAlignOutsideTop","text_align_outside_top","getButtonAlignOutsideTopTitle","setTextAlignVertical","text_align_top","text_align_middle","MIDDLE","text_align_bottom","_buttonAlignOutsideBottom","newButtonAlignOutsideBottom","text_align_outside_bottom","getButtonAlignOutsideBottomTitle","_buttonDirectionLeftToRight","newButtonDirectionLeftToRight","text_direction_left_to_right","getButtonDirectionLeftToRightTitle","setTextDirection","LEFT_TO_RIGHT","_buttonDirectionTopToBottom","newButtonDirectionTopToBottom","text_direction_top_to_bottom","getButtonDirectionTopToBottomTitle","TOP_TO_BOTTOM","_buttonDirectionBottomToTop","newButtonDirectionBottomToTop","text_direction_bottom_to_top","getButtonDirectionBottomToTopTitle","_buttonDirectionRightToLeft","newButtonDirectionRightToLeft","text_direction_right_to_left","getButtonDirectionRightToLeftTitle","RIGHT_TO_LEFT","_buttonClipping","newButtonClipping","getButtonClippingLabel","setTextClipping","_buttonFitting","newButtonFitting","getButtonFittingLabel","setTextFitting","_inputSpacingHorizontal","newInputSpacingHorizontal","setTextSpacingHorizontal","_inputSpacingVertical","newInputSpacingVertical","setTextSpacingVertical","_inputPaddingHorizontal","newInputPaddingHorizontal","setTextPaddingHorizontal","_inputTextPaddingVertical","newInputPaddingVertical","setTextPaddingVertical","_inputOffsetHorizontal","newInputOffsetHorizontal","setTextOffsetHorizontal","_inputOffsetVertical","newInputOffsetVertical","setTextOffsetVertical","textFamily","buttonOutlineColorValue","COMPARATOR","EEditorTreeSelection","DTableDataSelectionType","toIndex","onNodeChange","nodes","addRange","includeFrom","includeTo","rowIndices","shift","toArray","toSortedArray","toMap","utils","EventEmitter","EEditorTree","_updatedParts","parts","_layerOrder","buttonBringToFront","buttonSendToBack","_buttonBringToFront","newButtonBringToFront","arrow_to_top","getButtonBringToFrontTitle","bringForward","sendBackward","_buttonSendToBack","newButtonSendToBack","arrow_to_bottom","getButtonSendToBackTitle","sendToBack","ORDER_IN_LAYER","DTableDataTree","reverse","toChildren","preventDefault","EEditorValidation","_validator","validator","buttonRevalidate","_buttonRevalidate","newButtonRevalidate","refresh","getButtonRevalidateTitle","onButtonValidateActive","dialogProcessing_1","dialogProcessing","data_1","results","cancel","EToolGroupImpl","_isSuspended","_active","_activeParameter","parameter","oldActive","oldActiveParameter","deactivate","suspend","resume","isSuspended","EToolImpl","_isActive","onActivate","onDeactivate","EToolSelectArea","beginFill","drawRect","endFill","Graphics","EToolSelectModifierContainer","Container","EToolSelectModifierHitArea","_modifier","getAnchorSize","q","getAnchorRotationDistance","r","getAnchorRotationSize","setLastHitAnchor","ESnapperModifierAnchor","TOP_CENTER","MIDDLE_RIGHT","BOTTOM_CENTER","MIDDLE_LEFT","EToolSelectModifier","_scaleBound","_scaleBoundInverse","_isAllowed","_lastHitAnchor","hitArea","_anchorBase","_anchorsScale","_anchorRotate","onPrerender","scale0","getParentScale","scale1","worldAlpha","renderable","parentParent","getLastHitAnchor","anchor","scaleInverse","l","o","anchorBase","anchorRotate","anchorsScale","anchorScale","allow","isAllowed","disallow","removeChild","EShapeContainer","UtilShapeConnectorTransformData","tailVector","headVector","UtilShapeConnectorTransforms","applyInverse","editorTailVector","editorTailVectorX","editorTailVectorY","newTailLocalX","newTailLocalY","editorHeadVector","editorHeadVectorX","editorHeadVectorY","newHeadLocalX","newHeadLocalY","ECommandShapePropertyLineStyle","initLeft","rect","initCenter","initRight","initTop","initMiddle","initBottom","initWidth","initHeight","initZero","updateMin","valueA","valueB","updateMax","updateSum","finishupIdentity","finishupAverage","assingX","assingY","applyLeft","diff","applyCenter","applyRight","applyTop","applyMiddle","applyBottom","EToolSelectSelection","modifierContainer","_modifierContainer","_originGlobal","_originLocal","_rotationAxisGlobal","_scale","_scaleAxis0","_scaleAxis1","_scaleDet","_scaleDetInverse","_scaleTransform","Matrix","_scaleTransformInverse","_scaleAnchor","_shapeBound","_shapeBoundRect","_alignPoint","_alignRectangle","_shiftPoint1","_shiftPoint2","_transform","_translateDelta","_isUpdated","_lockCount","toParts","bound","tempRect","getBoundsInternal","enlarge","shapeOfParent","sharedParent","newLength","oldShapeRoot","expectedLast","newLast","cparent","DBase","cw","ch","pl","pt","getTop","pr","getRight","pb","getBottom","cx","cy","ox","oy","moveTo","prepareTranslateSnap","DDiagramEditor","prepareForTranslate","prepareRotateSnap","prepareForRotate","prepareScaleSnap","prepareForScale","prepareTranslate","originGlobal","originLocal","worldTransform","rotationAxisGlobal","vx","vy","vi","prepareScale","prepareScaleOriginAndAxes","scaleTransform","setTransform","translate","prepareScaleAxes","prepareScaleAxis","origin","x0","y0","x1","y1","axis0","axis1","det","saveForScale","initSpace","finishup","assing","shapesLength","isFirst","getBounds","dataLength","distribute","spaceTotal","shapeFactory","parent_3","parent_4","hasUngroupable","parent_5","isOn","delta","parent_6","parent_7","previous","parent_8","parent_9","EShapeResourceManagerSerialization","DDiagramLayer","addUuid","updateUuid","shapeSet","item29","version","DDiagramSerializedVersion","getBaseLayerLabel","parsed_1","DDiagrams","toPieceData","pieceData","deserialize_","EShapeResourceManagerDeserialization","shapePromise","deserializeAll","calcShift","layerChildren","work1","work2","firstTransform","gx","gy","hitTestBBox","targetTransform","dx","dy","toInternalVector","vector","detInverse","snap","toTranslationSnapped","rotateTo","nx","ny","dot","acos","baseRotation","toRotationSnapped","getScale","keepRatio","getScaleXY","getScaleY","getScaleX","scaleX","scaleY","calcScale","vx0","vy0","vx1","vy1","vx2","vy2","setScale","makeScaleTransform","scaleAnchor","toScaleSnapped","save","parent_10","deletor","stored","UtilShapeAreaSelect","isShapeIn","_work","findShapes","container","UtilHitTest","offsets","OFFSETS","newOffsets","hitTest","EToolSelect","toSelectionOptions","_area","_applicationLayer","_onDownPoint","_onMovePoint","_onUpPoint","_areaRect","_mode","_isFirstMove","_childSelectTime","_childSelectChild","_isTransformationAllowed","transformation","_isDeletionAllowed","deletion","_onDownBound","onDown","_onMoveBound","onMove","_onUpBound","onUp","_onKeydownBound","onKeydown","_onKeyupBound","onKeyup","_onDblClickBound","down","altKey","diagramLayer","isAddMode","onSelectEnd","global_1","onDownPoint","hitObject","commandController","area","oldApplicationLayer","oldInteractionManager","plugins","interaction","move","onUpBound","up","upoutside","newApplicationLayer","newInteractionManager","applicationLayer","global_2","onMovePoint","isFirstMove","modifierHit","areaRect","foundShapes","childSelectChild","getRotateAmount","getScaleAmount","getTranslateAmount","isArrowUpKey","isArrowRightKey","isArrowDownKey","isArrowLeftKey","isSelectAllKey","EToolShapeAcceptorEdgeRenderer","_edge","_circles","newCircles","_foundEdges","_radius","SIZE_X","_type","_x","_y","_ox","_oy","_isDirty","_isBegan","_doUpdateBound","_timeout","doUpdate","STROKE_ALPHA","begin","end","getCircleSize","circles","circlesLength","edges","findAll","edgesLength","isize","distance","edgeCenter","center","circle","EToolShapeAcceptorEdge","canvasMode","_canvasMode","_renderer","_shape","_edges","newEdges","layerPositionX","layerPositionY","layerPosition","lx","ly","_loop_1","internal","matrix_1","EShapeAcceptors","this_1","matrix","acceptorEdge","coordinateToEdges","aes","aesx","aesy","aex","aey","toGridIndex","coordinate","toCoordinate","aesxh","aesyh","aex0","aey0","aex1","aey1","aex2","aey2","aex3","aey3","x2","y2","x3","y3","x4","y4","x5","y5","ix0","iy0","ix1","iy1","ix","iy","round","find","gix","giy","foundEdges","foundEdge","dd","di","xtx","yty","lx0","ly0","lx1","ly1","lx2","ly2","limit","threshold","findAllS1","ir","findAllS2","iresult","compare","iymax","foundEdgeLocal","sd","ad","bd","EToolShapeCreateLineConnectorPhase","OFF","DONE","EToolShapeCreateLineConnector","_options","_phase","_onKeyDownBound","onKeyDown","_onSetBound","onSet","_onUnsetBound","onUnset","_connector","onTail","onHead","onDone","isTailAccepted","onTailAccepted","onTailUnaccepted","isDanglingEdgeAllowed","getTailType","isHeadAccepted","onHeadAccepted","onHeadUnaccepted","isSameAcceptor","getHeadType","onCancel","isCancelKey","EToolShapeCreateElbowConnector","EToolShapeCreateLine","_isNewPoint","_line","toSnapped","length_1","dangle","angle","cos","sin","toValues","prevx","prevy","EToolShapeCreate","_creator","toResized","EToolShapeEditLineHitArea","_capability","hitPoint","isEditing","pointsClosed","closed","hasTail","hasHead","thresholdLine","thresholdAnchor","p0","p1","calcHitPoint","setLastHitSegment","p0x","p0y","p1x","p1y","d0x","d0y","d1x","d1y","EToolShapeEditLineBase","_points","_pointsStyle","_isEditing","_isEdited","_lastHitSegment","_lastHitSegmentPosition","_targetCopy","_targetIndex","_unformatted","plength","segments","_formatted","reshape","_formatter","toPoints","toTransform","pointsStyle","_workTransform","graphics","pointsLength","hs","colorHit","segment","unformatted","uvalues","usegments","formatted","fvalues","lineStyle","lineTo","targetIndex","pprevx","pprevy","lastHitAnchor","onTargetChange","lastHitSegment","ti","targetCopy","previousIndex","onTargetMove","onTargetNotMove","EToolShapeEditLineConnector","_edgeTail","_edgeHead","transformPosition","tailPoint","bodyValues","bodyValuesLength","middlePoint","headPoint","boundary","toPointsBoundary","toFitted","EShapeConnectorBodies","edgeTail","edgeHead","EToolShapeEditLine","newValues","UtilAjax","send","method","settings","isCompleted","makeOnError","error","xhr","XMLHttpRequest","onload","status_1","status","success","responseText","statusText","onError","onerror","onabort","headers","setRequestHeader","timeout","ontimeout","abort","UtilCanvasCategory","_promise","fetch","all","doFetch","resolveds","resolved","toFetched","toItems","toDefault","toWritable","getDefaultCategory","isCategoryWritable","toCategoryId","toCategoryLabel","UtilCanvas","_f","_g","_h","_j","_k","getDefaultName","getDefaultLabel","getDefaultWidth","getDefaultHeight","getDefaultSummary","getDefaultDescription","getDefaultBackgroundColor","getDefaultBackgroundAlpha","UtilDataValues","parentData","retain","retained","UtilDate","getFormatter","DATE_FORMATTER","EEditorCanvasLegacy","newLayout","newLayoutItems","newLabelCategory","onCanvasValueFetched","diagram_1","FGraphicEditor","toTheme","_theme","getMargin","_toPieceId","_isEditable","toIcons","_validation","toValidation","_search","toSearch","_application","DApplication","application","_editorButtonGroup","getIconBuilder","validation","force","initDiagram","initHeader","initTools","initEditors","initCopyAndPaste","initShortcut","getDiagramContainer","setDocumentController","newHeader","getHeaderContainer","_header","getToolButtonLayoutContainer","newToolButtonLayout","toolShapeButtonSelect","toolShapeButtonGroup","disable","getEditorLayoutContainer","newEditorLayout","isEditorCanvasCompatible","editorCanvas","editorButtonCoordinate","UtilClipboard","clipboardData","toolShapeSelect","setData","getData","initShortcutShape","initShortcutTree","groupShortcut","getButtonGroupShortcut","ungroupShortcut","getButtonUngroupShortcut","bringToFrontShortcut","getButtonBringToFrontShortcut","bringToForwardShortcut","getButtonBringForwardShortcut","sendBackwardShortcut","getButtonSendBackwardShortcut","sendToBackShortcut","getButtonSendToBackShortcut","newToolFileButtons","margin_1","setWidth","stage","_toolFileButtonCreate","newToolFileButtonCreate","getToolFileButtonCreateTitle","getToolFileButtonCreateShortcut","getToolFileButtonTheme","onToolFileButtonCreateActive","dialogDiscard","dialogCreate","_toolFileButtonOpen","newToolFileButtonOpen","getToolFileButtonOpenTitle","getToolFileButtonOpenShortcut","onToolFileButtonOpenActive","dialogSelect","_toolFileButtonSave","newToolFileButtonSave","getToolFileButtonSaveTitle","getToolFileButtonSaveShortcut","onToolFileButtonSaveActive","validate","DCommandSave","dialogSaveProcessing_1","dialogSaveProcessing","toolFileButtonSave","editorValidation","editorButtonValidation","_toolFileButtonSaveAs","newToolFileButtonSaveAs","save_as","getToolFileButtonSaveAsTitle","getToolFileButtonSaveAsShortcut","onToolFileButtonSaveAsActive","dialogSaveAs","toolFileButtonSaveAs","_toolFileButtonUpload","newToolFileButtonUpload","upload","getToolFileButtonUploadTitle","getToolFileButtonUploadShortcut","checker","onToolFileButtonUploadOpen","_toolFileButtonDownload","newToolFileButtonDownload","download","getToolFileButtonDownloadTitle","getToolFileButtonDownloadShortcut","onToolFileButtonDownloadActive","UtilFileDownloader","_toolFileButtonUndo","newToolFileButtonUndo","DButtonUndo","getToolFileButtonUndoTitle","getToolFileButtonUndoShortcut","_toolFileButtonRedo","newToolFileButtonRedo","DButtonRedo","getToolFileButtonRedoTitle","getToolFileButtonRedoShortcut","_toolFileButtonDelete","newToolFileButtonDelete","getToolFileButtonDeleteTitle","getToolFileButtonDeleteShortcut","onToolFileButtonDelete","dialogDelete","_toolShapeButtonGroup","newToolShapeButtonGroup","DButtonGroup","_toolShapeButtonSelect","newToolShapeButtonSelect","getToolShapeButtonSelectTitle","getToolShapeButtonTheme","onToolShapeButtonSelectActive","onToolShapeButtonSelectInactive","toolGroup","newToolShapeButtonCreate","onToolShapeButtonCreateActive","onToolShapeButtonCreateInactive","toolShapeCreate","_toolShapeButtonCircle","newToolShapeButtonCircle","getToolShapeButtonCircleTitle","_toolShapeButtonSemicircle","newToolShapeButtonSemicircle","getToolShapeButtonSemicircleTitle","_toolShapeButtonRectangle","newToolShapeButtonRectangle","getToolShapeButtonRectangleTitle","_toolShapeButtonRectangleRounded","newToolShapeButtonRectangleRounded","getToolShapeButtonRectangleRoundedTitle","_toolShapeButtonTriangle","newToolShapeButtonTriangle","getToolShapeButtonTriangleTitle","_toolShapeButtonTriangleRounded","newToolShapeButtonTriangleRounded","getToolShapeButtonTriangleRoundedTitle","_toolShapeButtonLine","newToolShapeButtonLine","getToolShapeButtonLineTitle","onToolShapeButtonLineActive","onToolShapeButtonLineInactive","toolShapeEditLine","toolShapeCreateLine","_toolShapeButtonLineConnector","newToolShapeButtonLineConnector","getToolShapeButtonLineConnectorTitle","onToolShapeButtonLineConnectorActive","onToolShapeButtonLineConnectorInactive","toolShapeEditLineConnector","toolShapeCreateLineConnector","_toolShapeButtonElbowConnector","newToolShapeButtonElbowConnector","getToolShapeButtonElbowConnectorTitle","onToolShapeButtonElbowConnectorActive","onToolShapeButtonElbowConnectorInactive","toolShapeCreateElbowConnector","_toolShapeButtonImage","newToolShapeButtonImage","getToolShapeButtonImageTitle","onToolShapeButtonImageOpen","createImage","_toolShapeButtonGraphicPiece","newToolShapeButtonGraphicPiece","getToolShapeButtonGraphicPieceTitle","onToolShapeButtonGraphicPieceActive","dialogSelectPiece","newToolShapeButtonExtensionFactory","newToolShapeButtonExtension","creatorOrTool","toExtensionCreatorOrTool","onToolShapeButtonExtensionActive","onToolShapeButtonExtensionInactive","updaterCreatorOrOptions_1","updater_1","toExtensionUpdater","updaterCreatorOrOptions","tool","onDialogSelectExtensionFactorySelect","toolFileButtonCreate","toolFileButtonOpen","toolFileButtonUpload","toolFileButtonDownload","toolFileButtonUndo","toolFileButtonRedo","toolFileButtonDelete","newToolShapeButtons","toolShapeButtonLine","toolShapeButtonCircle","toolShapeButtonSemicircle","toolShapeButtonRectangle","toolShapeButtonRectangleRounded","toolShapeButtonTriangle","toolShapeButtonTriangleRounded","toolShapeButtonLineConnector","toolShapeButtonElbowConnector","toolShapeButtonImage","toolShapeButtonGraphicPiece","newToolShapeButtonsExtension","getToolButtonLayoutY","newToolButtons","newEditorButtonGroup","_editorButtonCoordinate","newEditorButtonCoordinate","editorButtonGroup","editor_coordinate","getEditorButtonCoordinateTitle","getEditorButtonTheme","editorCoordinate","_editorCoordinate","newEditorCoordinate","initEditor","editorContainer","zIndex","sortChildren","_editorButtonShape","newEditorButtonShape","editor_shape","getEditorButtonShapeTitle","editorShape","_editorShape","newEditorShape","_editorButtonText","newEditorButtonText","editor_text","getEditorButtonTextTitle","editorText","_editorText","newEditorText","_editorButtonData","newEditorButtonData","editor_data","getEditorButtonDataTitle","editorData","_editorData","newEditorData","_editorButtonDataMapping","newEditorButtonDataMapping","editor_data_mapping","getEditorButtonDataMappingTitle","editorDataMapping","_editorDataMapping","newEditorDataMapping","_editorButtonAction","newEditorButtonAction","editor_action","getEditorButtonActionTitle","editorAction","_editorAction","newEditorAction","_editorButtonTree","newEditorButtonTree","editor_tree","getEditorButtonTreeTitle","editorTree","_editorTree","newEditorTree","_editorButtonLayer","newEditorButtonLayer","editor_layer","getEditorButtonLayerTitle","editorLayer","_editorLayer","newEditorLayer","_editorButtonSnap","newEditorButtonSnap","editor_snap","getEditorButtonSnapTitle","editorSnap","_editorSnap","newEditorSnap","_editorButtonValidation","newEditorButtonValidation","editor_validation","getEditorButtonValidationTitle","_editorValidation","newEditorValidation","_editorButtonSearch","newEditorButtonSearch","getEditorButtonSearchTitle","editorSearch","_editorSearch","newEditorSearch","_editorCanvas","newEditorCanvas","compatibility","_editorButtonCanvasLegacy","newEditorButtonCanvasLegacy","editor_canvas_legacy","getEditorButtonCanvasLegacyTitle","editorCanvasLegacy","_editorCanvasLegacy","newEditorCanvasLegacy","newEditorButtonExtension","editorInstance","newEditorExtension","onEditorButtonExtensionSelectionChange","extensionType","buttonLast","_editorButtonExtensionLast","wasActive","_viewButtonZoomOut","newViewButtonZoomOut","view_zoom_out","getViewButtonZoomOutTitle","getViewButtonZoomOutShortcut","getViewButtonTheme","zoomOut","_viewButtonZoomIn","newViewButtonZoomIn","view_zoom_in","getViewButtonZoomInTitle","getViewButtonZoomInShortcut","shortcuts","getViewButtonZoomInShortcuts","zoomIn","_viewButtonDragAndPinch","newViewButtonDragAndPinch","camera","getViewButtonDragAndPinchTitle","getViewButtonDragAndPinchShortcut","_viewButtonReset","newViewButtonReset","view_reset","getViewButtonResetTitle","getViewButtonResetShortcut","_viewButtonFit","newViewButtonFit","view_fit","getViewButtonFitTitle","getViewButtonFitShortcut","newEditorButtons","editorButtonShape","editorButtonText","editorButtonData","editorButtonDataMapping","editorButtonAction","editorButtonTree","editorButtonLayer","editorButtonSnap","editorButtonSearch","editorButtonCanvasLegacy","toEditorExtentionConstructorOptions","viewButtonZoomOut","viewButtonZoomIn","viewButtonDragAndPinch","viewButtonReset","viewButtonFit","_editorContainer","newEditorContainer","newEditorButtonLayout","resize","onEditorLayoutResized","os","getPaddingLeft","getPaddingRight","ns","_toolShapeSelect","newToolShapeSelect","_toolShapeCreate","newToolShapeCreate","_toolShapeCreateLine","newToolShapeCreateLine","_toolShapeCreateLineConnector","newToolShapeCreateLineConnector","_toolShapeCreateElbowConnector","newToolShapeCreateElbowConnector","_toolShapeEditLine","newToolShapeEditLine","_toolShapeEditLineConnector","newToolShapeEditLineConnector","_toolGroup","newToolGroup","newDiagram","toDiagramOptions","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_z","_0","_1","_2","_3","_4","_5","_6","UtilGestureModifier","ALT","UtilGestureModifiers","match","isGesturing","zoom","viewOn","gesturestart","onDiagramViewOnStart","transformstart","wheeltranslationstart","constraint","onDiagramViewConstraint","thumbnail","saving","onDiagramSaving","saved","onDiagramSaved","deleting","onDiagramDeleting","onDiagramDeleted","snapshot","snapshotOn","taking","onDiagramSnapshotTaking","took","onDiagramSnapshotTook","_localBoundsDiagram","_localBoundsCanvas","getLocalBounds","once","dialogDeleteProcessing","_dialogSaveProcessing","newDialogSaveProcessing","_dialogDeleteProcessing","newDialogDeleteProcessing","_dialogSaveAs","newDialogSaveAs","DDialogSaveAs","_dialogCreate","newDialogCreate","onDialogCreateOk","_dialogDiscard","newDialogDiscard","DDialogConfirmDiscard","_dialogSelect","newDialogSelect","newDialogSelectImage","newDialogSelectNoImage","onDialogSelectSelect","_dialogSelectPiece","newDialogSelectPiece","newDialogSelectPieceImage","newDialogSelectPieceNoImage","newDialogSelectPieceController","onDialogSelectPieceSelect","toDialogSelectPieceResult","graphic_1","_dialogDelete","newDialogDelete","DDialogConfirmDelete","onDialogDeleteOk","getInstance","getThemeDefault","FGraphicTester","_isChanged","_onDiagramMoveBound","onDiagramMove","_onDiagramUpBound","onDiagramUp","_onDiagramDownPoint","_onDiagramMovePoint","_selectAreaRect","_selectMode","_isSelectSuspended","_expressionMap","_appliedValues","_isMappingsDirty","newPanes","onMappingsChangeBound","onMappingsChange","leftPane","rightPane","_paneLeft","newLeftPane","toolFileButtonGraphicOpen","layoutViewButton","_toolFileButtonGraphicOpen","newToolFileButtonGraphicOpen","getToolFileButtonGraphicOpenTitle","getToolFileButtonGraphicOpenShortcut","getToolFileButtonGraphicTheme","onToolFileButtonGraphicOpenActive","dialogSelectGraphic","_layoutViewButton","newLayoutViewButton","newViewButtons","_paneRight","newRightPane","tableFilterInput","_dialogConfirmDelete","tester","_tester","graphicTester","_tableFilterInput","newTableFilterInput","tableFilter","filter","unapply","dialogSelectMapping","file","onDiagramSelectionChange","toMappingsDirty","_graphic","uuidToDataValueIds","toCsvRows","getFilename","dataShape","dataValueIds","dataValue","dataValueId","toDataShape","simple_1","onToolFileButtonDeleteActive","DDiagram","onDiagramDown","onDiagramKeydown","ambient","toDataMappingRows","dataValueIdToRow","onDiagramSelectEnd","selectArea","_interactionManager","onDiagramUpBound","_selectArea","_tableFilter","newTableFilter","test","_dialogSelectGraphic","newDialogSelectGraphic","newDialogSelectGraphicImage","newDialogSelectGraphicNoImage","onDialogSelectGraphicSelect","toSerialized","_dialogSelectTester","newDialogSelectMapping","DDialogInputText","newDialogCreateTextValue","isNew","hasNoGraphc","hasNoMapping","hasNoChanges","isNotEditable","evaluate","applyMappings","applyMapping","expressionMap","applyMappingIfChanged","evaluated","appliedValues","toLowerCase","date","isEditable","getTableColumnDataLabel","getTableColumnValueLabel","FGraphicViewer","newDataMapper","remote","wcardinal","geditor"],"mappings":"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","x_google_ignoreList":[0]}