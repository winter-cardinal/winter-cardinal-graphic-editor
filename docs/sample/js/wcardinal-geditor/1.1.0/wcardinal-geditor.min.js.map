{"version":3,"file":"wcardinal-geditor.min.js","sources":["../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-composition.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-all.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-background.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-category.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-description.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-height.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-name.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-open.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-size.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-toggle-visibility.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-grid-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-target-toggle-visibility.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-target-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-snap-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-summary.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-document-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer-value-background.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-change.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-layer-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-action-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-mapping-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-data-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-search.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-deleter.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-delete.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-group.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-selection-updated-part.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-all.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability-lock.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-capability-unlock.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-corner-off.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-corner-on.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-cursor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-recursive.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-recursive-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-fill-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-focusable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-id.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image-clear.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image-fit-to.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-image.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-interactive.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-head-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-tail-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-points-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-and-rotation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-left.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-top.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-position.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-radius.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-rotation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-shortcut.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-size-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-size-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-skew.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-align.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-side-off.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-side-on.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-stroke-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-align-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-align-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-clipping.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-direction.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-family.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-fitting.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-offset-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-offset-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-enable.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-outline-width.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-padding-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-padding-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-size-delta.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-size.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-spacing-horizontal.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-spacing-vertical.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-text-weight.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-title.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-replace-one.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-bring-to-front.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-tree-send-to-back.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-transforms.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-ungroup.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/new-graphic-tester.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-csv.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-object.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-serialized.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/data/to-graphic-tester-simple.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-action-extensions.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-action-extension-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-extension.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-extension-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-extensions.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-side.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-subtype.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-command-shape-embedded-acceptor-edge-property-vvisible.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-editor-shape-embedded-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/e-shape-embedded-acceptor-edges.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-active.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-grouped.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-command-shape-button-property-is-toggle.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-editor-shape-button.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/e-shape-buttons.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-button-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-button-value-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-margin.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-command-shape-button-layer-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-dialog-shape-button-layer-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-editor-shape-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/e-shape-button-layers.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick-major.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-tick-minor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis-x.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis-y.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axis.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-axis-x-padding.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-axis-y-padding.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-x-major-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-x-minor-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-y-major-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-command-chart-tick-y-minor-count.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-axes.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-editor-shape-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-action-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-line-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/e-shape-chart-lines.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/input/e-shape-inputs.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-cell.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-body.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-header.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-ids.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-row-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-row.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-add.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-bring-forward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-remove.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-replace.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-column-value-send-backward.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-row-height.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-command-shape-table-row-selection-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-dialog-shape-table-column.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-editor-shape-table.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-action-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-cell-action-value-change-color.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-body-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-body.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-column-value-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-header-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-header.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-table-runtime.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/e-shape-tables.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/table/load-shape-extension-table.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/e-shape-extension-factories.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-keyword-input.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action-keyword-board.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-action.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-data-mapping-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-data-value.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-processing.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-select-with-thumbnails.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-snap.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-action.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-dialog-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-coordinate.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-data-mapping.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-data.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-layer-item.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/get-shape-type-theme.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/to-shape-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/to-shape-type-label.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search-condition-type.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-search-condition-state.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-shape.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editors.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-snap.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-text.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-tree-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-tree.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-validation.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-group-impl.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-impl.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-mode.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier-container.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier-hit-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-modifier.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-connector-transforms.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/command/e-command-shape-property-line-style.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select-selection.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-shape-area-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-hit-test.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-select.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-acceptor-edge-renderer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-line-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-elbow-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-create.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-base-hit-area.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-base.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line-connector.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/tool/e-tool-shape-edit-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-ajax.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-canvas-category.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-canvas.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-date.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/editor/e-editor-canvas-legacy.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-editor.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-tester.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/f-graphic-viewer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/util/util-data-values.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button/load-shape-extension-button.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/button-layer/load-shape-extension-button-layer.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/chart-line/load-shape-extension-chart-line.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/embedded-acceptor-edge/load-shape-extension-embedded-acceptor-edge.js","../../../winter-cardinal-graphic-editor/wcardinal/geditor/extension/input/load-shape-extension-input.js","../../../winter-cardinal-graphic-editor/wcardinal-geditor.browser.js"],"sourcesContent":["import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandComposition extends DCommandBase {\n    constructor(commands, selection) {\n        super();\n        this._commands = commands;\n        this._selection = selection;\n    }\n    get commands() {\n        return this._commands;\n    }\n    get selection() {\n        return this._selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const selection = this._selection;\n        const commands = this._commands;\n        selection.lock();\n        for (let i = 0, imax = commands.length; i < imax; ++i) {\n            commands[i].redo();\n        }\n        selection.unlock();\n        return true;\n    }\n    undo() {\n        const selection = this._selection;\n        selection.lock();\n        const commands = this._commands;\n        for (let i = commands.length - 1; 0 <= i; --i) {\n            commands[i].undo();\n        }\n        selection.unlock();\n        return true;\n    }\n    destroy() {\n        const commands = this._commands;\n        for (let i = 0, imax = commands.length; i < imax; ++i) {\n            commands[i].destroy();\n        }\n    }\n}\n//# sourceMappingURL=e-command-composition.js.map","import { DBaseStateSetImpl, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentAll extends DCommandBase {\n    constructor(diagram, canvas, name, label, width, height, category, summary, description, backgroundColor, backgroundAlpha) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._name = name;\n        this._label = label;\n        this._width = width;\n        this._height = height;\n        this._category = category;\n        this._summary = summary;\n        this._description = description;\n        this._backgroundColor = backgroundColor;\n        this._backgroundAlpha = backgroundAlpha;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get name() {\n        return this._name;\n    }\n    get label() {\n        return this._label;\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get category() {\n        return this._category;\n    }\n    get summary() {\n        return this._summary;\n    }\n    get description() {\n        return this._description;\n    }\n    get backgroundColor() {\n        return this._backgroundColor;\n    }\n    get backgroundAlpha() {\n        return this._backgroundAlpha;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const name = this._name;\n        this._name = canvas.name;\n        canvas.name = name;\n        const label = this._label;\n        this._label = canvas.label;\n        canvas.label = label;\n        const width = this._width;\n        this._width = canvas.width;\n        canvas.width = width;\n        const height = this._height;\n        this._height = canvas.height;\n        canvas.height = height;\n        const category = this._category;\n        this._category = canvas.category;\n        canvas.category = category;\n        const summary = this._summary;\n        this._summary = canvas.summary;\n        canvas.summary = summary;\n        const description = this._description;\n        this._description = canvas.description;\n        canvas.description = description;\n        const backgroundColor = this._backgroundColor;\n        const backgroundAlpha = this._backgroundAlpha;\n        const state = new DBaseStateSetImpl();\n        const background = canvas.background;\n        this._backgroundColor = background.getColor(state);\n        this._backgroundAlpha = background.getAlpha(state);\n        background.color = backgroundColor;\n        background.alpha = backgroundAlpha;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-all.js.map","import { DBaseStateSetImpl, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentBackground extends DCommandBase {\n    constructor(diagram, color, alpha) {\n        super();\n        this._diagram = diagram;\n        this._color = color;\n        this._alpha = alpha;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get color() {\n        return this._color;\n    }\n    get alpha() {\n        return this._alpha;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._diagram.canvas;\n        if (canvas != null) {\n            const background = canvas.background;\n            const color = this._color;\n            const alpha = this._alpha;\n            const state = new DBaseStateSetImpl();\n            this._color = background.getColor(state);\n            this._alpha = background.getAlpha(state);\n            background.color = color;\n            background.alpha = alpha;\n            this._diagram.emit(\"change\", this._diagram);\n        }\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-background.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentCategory extends DCommandBase {\n    constructor(diagram, canvas, category) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._category = category;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get category() {\n        return this._category;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const category = this._category;\n        this._category = canvas.category;\n        canvas.category = category;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-category.js.map","import { DCommandCreate } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentCreate extends DCommandCreate {\n    constructor(diagram, canvas) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    execute() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-document-create.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentDescription extends DCommandBase {\n    constructor(diagram, canvas, description) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._description = description;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get description() {\n        return this._description;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const description = this._description;\n        this._description = canvas.description;\n        canvas.description = description;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-description.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentHeight extends DCommandBase {\n    constructor(diagram, canvas, height) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._height = height;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get height() {\n        return this._height;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const height = this._height;\n        this._height = canvas.height;\n        canvas.y = canvas.y + (canvas.height - height) * 0.5;\n        canvas.height = height;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-height.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentLabel extends DCommandBase {\n    constructor(diagram, canvas, label) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._label = label;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get label() {\n        return this._label;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const label = this._label;\n        this._label = canvas.label;\n        canvas.label = label;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-label.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentName extends DCommandBase {\n    constructor(diagram, canvas, name) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._name = name;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get name() {\n        return this._name;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const name = this._name;\n        this._name = canvas.name;\n        canvas.name = name;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-name.js.map","import { DCommandCreate } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentOpen extends DCommandCreate {\n    constructor(diagram, canvas) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    execute() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-document-open.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapBringForward extends DCommandBase {\n    constructor(snapper, index) {\n        super();\n        this._snapper = snapper;\n        this._index = index;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    get index() {\n        return this._index;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const index = this._index;\n        this._snapper.target.swap(index - 1, index);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-bring-forward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapCreate extends DCommandBase {\n    constructor(snapper, target) {\n        super();\n        this._snapper = snapper;\n        this._target = target;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    get target() {\n        return this._target;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        this._snapper.target.add(this._target);\n        return true;\n    }\n    undo() {\n        const target = this._snapper.target;\n        target.remove(target.size - 1);\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-document-snap-create.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapDelete extends DCommandBase {\n    constructor(snapper, index, target) {\n        super();\n        this._snapper = snapper;\n        this._index = index;\n        this._target = target;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    get index() {\n        return this._index;\n    }\n    get target() {\n        return this._target;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        this._snapper.target.remove(this._index);\n        return true;\n    }\n    undo() {\n        this._snapper.target.add(this._target, this._index);\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-document-snap-delete.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapGridSize extends DCommandBase {\n    constructor(snapper, size) {\n        super();\n        this._snapper = snapper;\n        this._size = size;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    get size() {\n        return this._size;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const snapper = this._snapper;\n        const size = this._size;\n        this._size = snapper.grid.size;\n        snapper.grid.size = size;\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-grid-size.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapGridToggleVisibility extends DCommandBase {\n    constructor(snapper) {\n        super();\n        this._snapper = snapper;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const grid = this._snapper.grid;\n        grid.visible = !grid.visible;\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-grid-toggle-visibility.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapGridToggle extends DCommandBase {\n    constructor(snapper) {\n        super();\n        this._snapper = snapper;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const grid = this._snapper.grid;\n        grid.enable = !grid.enable;\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-grid-toggle.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapReplace extends DCommandBase {\n    constructor(snapper, oldValue, newValue, list) {\n        super();\n        this._snapper = snapper;\n        this._oldValue = oldValue;\n        this._newValue = newValue;\n        this._index = snapper.target.values.indexOf(this._oldValue);\n        this._list = list;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    get index() {\n        return this._index;\n    }\n    get oldValue() {\n        return this._oldValue;\n    }\n    get newValue() {\n        return this._newValue;\n    }\n    get list() {\n        return this._list;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const index = this._index;\n        if (0 <= index) {\n            const list = this._list;\n            const newValue = this._newValue;\n            const snapper = this._snapper;\n            if (list.data.selection.contains(this._oldValue)) {\n                snapper.target.replace(index, newValue);\n                list.data.selection.clearAndAdd(newValue);\n            }\n            else {\n                snapper.target.replace(index, newValue);\n            }\n        }\n        return true;\n    }\n    undo() {\n        const index = this._index;\n        if (0 <= index) {\n            const list = this._list;\n            const oldValue = this._oldValue;\n            const snapper = this._snapper;\n            if (list.data.selection.contains(this._newValue)) {\n                snapper.target.replace(index, oldValue);\n                list.data.selection.clearAndAdd(oldValue);\n            }\n            else {\n                snapper.target.replace(index, oldValue);\n            }\n        }\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-document-snap-replace.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapSendBackward extends DCommandBase {\n    constructor(snapper, index) {\n        super();\n        this._snapper = snapper;\n        this._index = index;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    get index() {\n        return this._index;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const index = this._index;\n        this._snapper.target.swap(index, index + 1);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-send-backward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapTargetToggleVisibility extends DCommandBase {\n    constructor(snapper) {\n        super();\n        this._snapper = snapper;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const target = this._snapper.target;\n        target.visible = !target.visible;\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-target-toggle-visibility.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapTargetToggle extends DCommandBase {\n    constructor(snapper) {\n        super();\n        this._snapper = snapper;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const target = this._snapper.target;\n        target.enable = !target.enable;\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-target-toggle.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSnapToggle extends DCommandBase {\n    constructor(snapper) {\n        super();\n        this._snapper = snapper;\n    }\n    get snapper() {\n        return this._snapper;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const snapper = this._snapper;\n        snapper.enable = !snapper.enable;\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-snap-toggle.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentSummary extends DCommandBase {\n    constructor(diagram, canvas, summary) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._summary = summary;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get summary() {\n        return this._summary;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const summary = this._summary;\n        this._summary = canvas.summary;\n        canvas.summary = summary;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-summary.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandDocumentWidth extends DCommandBase {\n    constructor(diagram, canvas, width) {\n        super();\n        this._diagram = diagram;\n        this._canvas = canvas;\n        this._width = width;\n    }\n    get diagram() {\n        return this._diagram;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get width() {\n        return this._width;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const canvas = this._canvas;\n        const width = this._width;\n        this._width = canvas.width;\n        canvas.x = canvas.x + (canvas.width - width) * 0.5;\n        canvas.width = width;\n        this._diagram.emit(\"change\", this._diagram);\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-document-width.js.map","import { DApplications, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandLayerBringForward extends DCommandBase {\n    constructor(index, layerContainer) {\n        super();\n        this._index = index;\n        this._layerContainer = layerContainer;\n    }\n    get index() {\n        return this._index;\n    }\n    get layerContainer() {\n        return this._layerContainer;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const index = this._index;\n        const layerContainer = this._layerContainer;\n        const children = layerContainer.children;\n        const tmp = children[index];\n        children[index] = children[index + 1];\n        children[index + 1] = tmp;\n        layerContainer.onChildrenChange(index);\n        layerContainer.emit(\"change\", layerContainer);\n        DApplications.update(layerContainer);\n        return true;\n    }\n    undo() {\n        this.redo();\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-layer-bring-forward.js.map","export class EDialogLayerValueBackground {\n    constructor(enable, color, alpha) {\n        this.enable = enable;\n        this.color = color;\n        this.alpha = alpha;\n    }\n    isEqual(target) {\n        return (this.enable === target.enable &&\n            this.color === target.color &&\n            this.alpha === target.alpha);\n    }\n    static from(layer) {\n        return new EDialogLayerValueBackground(layer.background.enable, layer.background.color, layer.background.alpha);\n    }\n}\n//# sourceMappingURL=e-dialog-layer-value-background.js.map","import { EShapeActionValueGestureOperationType, EShapeLayerState } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValueBackground } from \"./e-dialog-layer-value-background\";\nexport class EDialogLayerValue {\n    constructor(name, x, y, width, height, background, visible, interactive, gesture) {\n        this.name = name;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.background = background;\n        this.visible = visible;\n        this.interactive = interactive;\n        this.gesture = gesture;\n    }\n    isEqual(target) {\n        return (this.name === target.name &&\n            this.x === target.x &&\n            this.y === target.y &&\n            this.width === target.width &&\n            this.height === target.height &&\n            this.background.isEqual(target.background) &&\n            this.visible === target.visible &&\n            this.interactive === target.interactive &&\n            this.gesture === target.gesture);\n    }\n    copyTo(layer) {\n        layer.name = this.name;\n        layer.position.set(this.x, this.y);\n        layer.width = this.width;\n        layer.height = this.height;\n        layer.background.copy(this.background);\n        const state = layer.state;\n        state.lock();\n        state.set(EShapeLayerState.INVISIBLE, !this.visible);\n        state.set(EShapeLayerState.INTERACTIVE, this.interactive);\n        const gesture = this.gesture;\n        state.set(EShapeLayerState.DRAGGABLE, !!(gesture & EShapeActionValueGestureOperationType.DRAG));\n        state.set(EShapeLayerState.PINCHABLE, !!(gesture & EShapeActionValueGestureOperationType.PINCH));\n        state.unlock();\n        return this;\n    }\n    static from(layer) {\n        const drag = layer.state.is(EShapeLayerState.DRAGGABLE)\n            ? EShapeActionValueGestureOperationType.DRAG\n            : EShapeActionValueGestureOperationType.NONE;\n        const pinch = layer.state.is(EShapeLayerState.PINCHABLE)\n            ? EShapeActionValueGestureOperationType.PINCH\n            : EShapeActionValueGestureOperationType.NONE;\n        const gesture = drag | pinch;\n        return new EDialogLayerValue(layer.name, layer.position.x, layer.position.y, layer.width, layer.height, EDialogLayerValueBackground.from(layer), !layer.state.is(EShapeLayerState.INVISIBLE), layer.state.is(EShapeLayerState.INTERACTIVE), gesture);\n    }\n}\n//# sourceMappingURL=e-dialog-layer-value.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValue } from \"../editor/e-dialog-layer-value\";\nexport class ECommandLayerChange extends DCommandBase {\n    constructor(layer, value, layerContainer) {\n        super();\n        this._layer = layer;\n        this._layerContainer = layerContainer;\n        this._oldValue = EDialogLayerValue.from(layer);\n        this._newValue = value;\n    }\n    get layer() {\n        return this._layer;\n    }\n    get newValue() {\n        return this._newValue;\n    }\n    get oldValue() {\n        return this._oldValue;\n    }\n    get layerContainer() {\n        return this._layerContainer;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        this._newValue.copyTo(this._layer);\n        const layerContainer = this._layerContainer;\n        layerContainer.emit(\"change\", layerContainer);\n        return true;\n    }\n    undo() {\n        this._oldValue.copyTo(this._layer);\n        const layerContainer = this._layerContainer;\n        layerContainer.emit(\"change\", layerContainer);\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-layer-change.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandLayerCreate extends DCommandBase {\n    constructor(value, layerContainer, selection) {\n        super();\n        this._value = value;\n        this._layerContainer = layerContainer;\n        this._layerActive = layerContainer.active;\n        this._layerCreated = null;\n        this._selection = selection;\n        this._selectionStored = null;\n    }\n    newLayer(value, layerContainer) {\n        const result = layerContainer.create(value.name, true);\n        value.copyTo(result);\n        return result;\n    }\n    get value() {\n        return this._value;\n    }\n    get layerContainer() {\n        return this._layerContainer;\n    }\n    get layerActive() {\n        return this._layerActive;\n    }\n    get layerCreated() {\n        return this._layerCreated;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get selectionStored() {\n        return this._selectionStored;\n    }\n    execute() {\n        const selection = this._selection;\n        if (!selection.isEmpty()) {\n            this._selectionStored = selection.store();\n            selection.clear();\n        }\n        else {\n            this._selectionStored = null;\n        }\n        this._layerCreated = this.newLayer(this._value, this._layerContainer);\n        this._layerCreated.reference += 1;\n        return true;\n    }\n    redo() {\n        const selectionStored = this._selectionStored;\n        if (selectionStored != null) {\n            this._selection.clear();\n        }\n        const layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            this._layerContainer.attach(layerCreated, true);\n        }\n        return true;\n    }\n    undo() {\n        const layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            this._layerContainer.detach(layerCreated, this._layerActive);\n        }\n        const selectionStored = this._selectionStored;\n        if (selectionStored != null) {\n            this._selection.restore(selectionStored);\n        }\n        return true;\n    }\n    destroy() {\n        const layerCreated = this._layerCreated;\n        if (layerCreated != null) {\n            layerCreated.reference -= 1;\n            if (layerCreated.parent == null && layerCreated.reference <= 0) {\n                layerCreated.destroy();\n            }\n        }\n        this._layerActive = null;\n    }\n}\n//# sourceMappingURL=e-command-layer-create.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandLayerDelete extends DCommandBase {\n    constructor(layer, layerContainer, selection) {\n        super();\n        this._layerContainer = layerContainer;\n        this._layerActive = layerContainer.active;\n        this._layer = layer;\n        layer.reference += 1;\n        this._layerIndex = -1;\n        this._selection = selection;\n        this._selectionStored = null;\n    }\n    get layerContainer() {\n        return this._layerContainer;\n    }\n    get layerActive() {\n        return this._layerActive;\n    }\n    get layer() {\n        return this._layer;\n    }\n    get layerIndex() {\n        return this._layerIndex;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get selectionStored() {\n        return this._selectionStored;\n    }\n    execute() {\n        const layer = this._layer;\n        const layerContainer = this._layerContainer;\n        const selection = this._selection;\n        if (layer === layerContainer.active && !selection.isEmpty()) {\n            this._selectionStored = selection.store();\n            selection.clear();\n        }\n        else {\n            this._selectionStored = null;\n        }\n        this._layerIndex = layerContainer.delete(layer, true);\n        return true;\n    }\n    redo() {\n        if (this._selectionStored != null) {\n            this._selection.clear();\n        }\n        this._layerContainer.delete(this._layer, true);\n        return true;\n    }\n    undo() {\n        this._layerContainer.attachAt(this._layer, this._layerIndex, this._layer === this._layerActive);\n        if (this._selectionStored != null) {\n            this._selection.restore(this._selectionStored);\n        }\n        return true;\n    }\n    destroy() {\n        const layer = this._layer;\n        layer.reference -= 1;\n        if (layer.parent == null && layer.reference <= 0) {\n            layer.destroy();\n        }\n        this._layerActive = null;\n        this._selectionStored = null;\n    }\n}\n//# sourceMappingURL=e-command-layer-delete.js.map","import { DApplications, DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandLayerSendBackward extends DCommandBase {\n    constructor(index, layerContainer) {\n        super();\n        this._index = index;\n        this._layerContainer = layerContainer;\n    }\n    get index() {\n        return this._index;\n    }\n    get layerContainer() {\n        return this._layerContainer;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const index = this._index;\n        const layerContainer = this._layerContainer;\n        const children = layerContainer.children;\n        const tmp = children[index];\n        children[index] = children[index - 1];\n        children[index - 1] = tmp;\n        layerContainer.onChildrenChange(index);\n        layerContainer.emit(\"change\", layerContainer);\n        DApplications.update(layerContainer);\n        return true;\n    }\n    undo() {\n        this.redo();\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-layer-send-backward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeActionValueAdd extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        this._selection = selection;\n        this._value = value;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get value() {\n        return this._value;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const value = this._value;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].action.add(value);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            shape.action.remove(shape.action.size() - 1);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-action-value-add.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeActionValueBringForward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        this._indices = [];\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        const target = this._target;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = shape.action.indexOf(target);\n            indices.push(index);\n            if (0 < index) {\n                shape.action.swap(index - 1, index);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 < index) {\n                shape.action.swap(index - 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-action-value-bring-forward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeActionValueRemove extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        this._indices = [];\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        const target = this._target;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = shape.action.indexOf(target);\n            indices.push(index);\n            if (0 <= index) {\n                shape.action.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                shape.action.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const target = this._target;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                shape.action.add(target, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-action-value-remove.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeActionValueReplace extends DCommandBase {\n    constructor(oldValue, newValue, selection, list) {\n        super();\n        this._selection = selection;\n        this._oldValue = oldValue;\n        this._newValue = newValue;\n        this._list = list;\n        this._indices = [];\n        this._oldValues = [];\n    }\n    get selection() {\n        return this._selection;\n    }\n    get oldValue() {\n        return this._oldValue;\n    }\n    get newValue() {\n        return this._newValue;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get oldValues() {\n        return this._oldValues;\n    }\n    get list() {\n        return this._list;\n    }\n    execute() {\n        const oldValue = this._oldValue;\n        const newValue = this._newValue;\n        const indices = this._indices;\n        const oldValues = this._oldValues;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = shape.action.indexOf(oldValue);\n            indices.push(index);\n            if (0 <= index) {\n                oldValues.push(shape.action.get(index));\n                shape.action.set(index, newValue);\n            }\n            else {\n                oldValues.push(newValue);\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    redo() {\n        const newValue = this._newValue;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const index = indices[i];\n            if (0 <= index) {\n                shapes[i].action.set(index, newValue);\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const oldValues = this._oldValues;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const index = indices[i];\n            if (0 <= index) {\n                shapes[i].action.set(index, oldValues[i]);\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-action-value-replace.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeActionValueSendBackward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const action = shape.action;\n            const index = action.indexOf(target);\n            indices.push(index);\n            if (0 <= index && index < action.size() - 1) {\n                action.swap(index + 1, index);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const action = shape.action;\n            const index = indices[i];\n            if (0 <= index && index < action.size() - 1) {\n                action.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-action-value-send-backward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeCreate extends DCommandBase {\n    constructor(shapes, parent, selection, select) {\n        super();\n        this._shapes = shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].reference += 1;\n        }\n        this._parent = parent;\n        this._selection = selection;\n        this._select = select;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get shapes() {\n        return this._shapes;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get selectionStored() {\n        return this._selectionStored;\n    }\n    get select() {\n        return this._select;\n    }\n    execute() {\n        const selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            this._selectionStored = selection.store();\n            selection.clearAndAddAll(this._shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    redo() {\n        const shapes = this._shapes;\n        const parent = this._parent;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].attach(parent);\n        }\n        const selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            selection.clearAndAddAll(shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    undo() {\n        const shapes = this._shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].detach();\n        }\n        const selection = this._selection;\n        const selectionStored = this._selectionStored;\n        selection.lock();\n        if (this._select && selectionStored != null) {\n            selection.restore(selectionStored);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    destroy() {\n        const shapes = this._shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            shape.reference -= 1;\n            if (shape.parent == null && shape.reference <= 0) {\n                shape.destroy();\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-create.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataMappingValueAdd extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        this._selection = selection;\n        this._value = value;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get value() {\n        return this._value;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const value = this._value;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                shape.data.mapping.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.remove(mapping.size() - 1);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-data-mapping-value-add.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataMappingValueBringForward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    const index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 < index) {\n                        mapping.swap(index - 1, index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 < index) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-data-mapping-value-bring-forward.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataMappingValueRemove extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    const index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 <= index) {\n                        mapping.remove(index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const target = this._target;\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-data-mapping-value-remove.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataMappingValueReplace extends DCommandBase {\n    constructor(oldValue, newValue, selection, list) {\n        super();\n        this._selection = selection;\n        this._oldValue = oldValue;\n        this._newValue = newValue;\n        this._list = list;\n        const indices = [];\n        const oldValues = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    const index = mapping.indexOf(oldValue);\n                    indices.push(index);\n                    if (0 <= index) {\n                        oldValues.push(mapping.get(index));\n                        mapping.set(index, newValue);\n                    }\n                    else {\n                        oldValues.push(newValue);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        this._indices = indices;\n        this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get oldValue() {\n        return this._oldValue;\n    }\n    get newValue() {\n        return this._newValue;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get oldValues() {\n        return this._oldValues;\n    }\n    get list() {\n        return this._list;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const newValue = this._newValue;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.set(index, newValue);\n                }\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const oldValues = this._oldValues;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    mapping.set(index, oldValues[i]);\n                }\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-data-mapping-value-replace.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataMappingValueSendBackward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.DATA_MAPPING)) {\n                const mapping = shape.data.getMapping();\n                if (mapping) {\n                    const index = mapping.indexOf(target);\n                    indices.push(index);\n                    if (0 <= index && index < mapping.size() - 1) {\n                        mapping.swap(index + 1, index);\n                    }\n                }\n                else {\n                    indices.push(-1);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            const mapping = shape.data.getMapping();\n            if (mapping && 0 <= index && index < mapping.size() - 1) {\n                mapping.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-data-mapping-value-send-backward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataValueAdd extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        this._selection = selection;\n        this._value = value;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get value() {\n        return this._value;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const value = this._value;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].data.add(value);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            shape.data.remove(shape.data.size() - 1);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-data-value-add.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataValueBringForward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = shape.data.indexOf(target);\n            indices.push(index);\n            if (0 < index) {\n                shape.data.swap(index - 1, index);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 < index) {\n                shape.data.swap(index - 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-data-value-bring-forward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataValueRemove extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = shape.data.indexOf(target);\n            indices.push(index);\n            if (0 <= index) {\n                shape.data.remove(index);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                shape.data.remove(index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const target = this._target;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = indices[i];\n            if (0 <= index) {\n                shape.data.add(target, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-data-value-remove.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataValueReplace extends DCommandBase {\n    constructor(oldValue, newValue, selection, list) {\n        super();\n        this._selection = selection;\n        this._oldValue = oldValue;\n        this._newValue = newValue;\n        this._list = list;\n        const indices = [];\n        const oldValues = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const index = shape.data.indexOf(oldValue);\n            indices.push(index);\n            if (0 <= index) {\n                oldValues.push(shape.data.get(index));\n                shape.data.set(index, newValue);\n            }\n            else {\n                oldValues.push(newValue);\n            }\n        }\n        this._indices = indices;\n        this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get oldValue() {\n        return this._oldValue;\n    }\n    get newValue() {\n        return this._newValue;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get oldValues() {\n        return this._oldValues;\n    }\n    get list() {\n        return this._list;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const newValue = this._newValue;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const index = indices[i];\n            if (0 <= index) {\n                shapes[i].data.set(index, newValue);\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const oldValues = this._oldValues;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const index = indices[i];\n            if (0 <= index) {\n                shapes[i].data.set(index, oldValues[i]);\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-data-value-replace.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeDataValueSendBackward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const data = shape.data;\n            const index = data.indexOf(target);\n            indices.push(index);\n            if (0 <= index && index < data.size() - 1) {\n                data.swap(index + 1, index);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    get selection() {\n        return this._selection;\n    }\n    get target() {\n        return this._target;\n    }\n    get indices() {\n        return this._indices;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const data = shape.data;\n            const index = indices[i];\n            if (0 <= index && index < data.size() - 1) {\n                data.swap(index + 1, index);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-data-value-send-backward.js.map","import { EShapeBase } from \"@wcardinal/wcardinal-ui\";\n/**\n * {@link EShape} search utility.\n */\nexport class UtilShapeSearch {\n    /**\n     * Returns indices of the given shapes.\n     *\n     * @param shapes shapes\n     * @return indices\n     */\n    static toIndices(shapes) {\n        const result = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            result.push(shapes[i].index);\n        }\n        return result;\n    }\n    /**\n     * Returns a depth of the given shape.\n     *\n     * @param shape a shape\n     * @return a depth\n     */\n    static toDepth(shape) {\n        let result = 0;\n        let parent = shape.parent;\n        while (parent instanceof EShapeBase) {\n            result += 1;\n            parent = parent.parent;\n        }\n        return result;\n    }\n    /**\n     * Returns a deepest shape on the path to the given shapes.\n     *\n     * @param shapeA a shape\n     * @param shapeB a shape\n     * @return a found shape\n     */\n    static toSharedParent(shapeA, shapeB) {\n        const depthA = this.toDepth(shapeA);\n        const depthB = this.toDepth(shapeB);\n        if (depthA < depthB) {\n            let parent = shapeA.parent;\n            while (parent instanceof EShapeBase) {\n                if (this.isParent(shapeB, parent)) {\n                    return parent;\n                }\n                parent = parent.parent;\n            }\n            return parent;\n        }\n        else {\n            let parent = shapeB.parent;\n            while (parent instanceof EShapeBase) {\n                if (this.isParent(shapeA, parent)) {\n                    return parent;\n                }\n                parent = parent.parent;\n            }\n            return parent;\n        }\n    }\n    /**\n     * Returns a shape on the path to the given shape whose parent is equals to the given parent.\n     * If there is no such shape, returns a root shape on the path.\n     *\n     * @param shape a shape\n     * @param parent a parent\n     * @returns a found shape\n     */\n    static toOfParent(shape, parent) {\n        let shapeParent = shape.parent;\n        while (shapeParent !== parent && shapeParent instanceof EShapeBase) {\n            shape = shapeParent;\n            shapeParent = shapeParent.parent;\n        }\n        return shape;\n    }\n    /**\n     * Returns true if the given target is on the path to the given shape.\n     *\n     * @param shape a shape\n     * @param target a check target\n     * @return true if the given target is on the path to the given shape\n     */\n    static isParent(shape, target) {\n        let parent = shape.parent;\n        while (parent instanceof EShapeBase) {\n            if (parent === target) {\n                return true;\n            }\n            parent = parent.parent;\n        }\n        return false;\n    }\n    /**\n     * Returns a selected shape on the path to the given shape.\n     * If there are more than one selected shapes, returns a deepest selected shape.\n     *\n     * @param shape a shape\n     * @return a found selected shape or null\n     */\n    static toSelected(shape) {\n        let target = shape;\n        while (target instanceof EShapeBase) {\n            if (target.selected) {\n                return target;\n            }\n            target = target.parent;\n        }\n        return null;\n    }\n    static findChildById(shape, id, recursively) {\n        const children = shape.children;\n        for (let i = 0, imax = children.length; i < imax; ++i) {\n            const child = children[i];\n            if (child.id === id) {\n                return child;\n            }\n            if (recursively === true) {\n                const result = UtilShapeSearch.findChildById(child, id, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }\n    static findChildByType(shape, type, recursively) {\n        const children = shape.children;\n        for (let i = 0, imax = children.length; i < imax; ++i) {\n            const child = children[i];\n            if (child.type === type) {\n                return child;\n            }\n            if (recursively === true) {\n                const result = UtilShapeSearch.findChildByType(child, type, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }\n    static findChild(shape, matcher, recursively) {\n        const children = shape.children;\n        for (let i = 0, imax = children.length; i < imax; ++i) {\n            const child = children[i];\n            if (matcher(child)) {\n                return child;\n            }\n            if (recursively === true) {\n                const result = UtilShapeSearch.findChild(child, matcher, recursively);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }\n    static findChildrenByType(shape, type, recursively, result) {\n        result = result || [];\n        const children = shape.children;\n        for (let i = 0, imax = children.length; i < imax; ++i) {\n            const child = children[i];\n            if (child.type === type) {\n                result.push(child);\n            }\n            if (recursively === true) {\n                UtilShapeSearch.findChildrenByType(child, type, recursively, result);\n            }\n        }\n        return result;\n    }\n    static findChildren(shape, matcher, recursively, result) {\n        result = result || [];\n        const children = shape.children;\n        for (let i = 0, imax = children.length; i < imax; ++i) {\n            const child = children[i];\n            if (matcher(child)) {\n                result.push(child);\n            }\n            if (recursively === true) {\n                UtilShapeSearch.findChildren(child, matcher, recursively, result);\n            }\n        }\n        return result;\n    }\n}\nUtilShapeSearch.COMPARATOR_INDEX = (a, b) => {\n    return a.index - b.index;\n};\n//# sourceMappingURL=util-shape-search.js.map","import { UtilShapeSearch } from \"./util-shape-search\";\nexport class UtilShapeDeleter {\n    static addAll(shapes, result) {\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            result.add(shape);\n            this.addAll(shape.children, result);\n        }\n        return result;\n    }\n    static delete(parent, shapes, generateDeletedShapeList, deletedShapeSet) {\n        var _a;\n        const children = parent.children;\n        const length = children.length;\n        // Update indices\n        deletedShapeSet !== null && deletedShapeSet !== void 0 ? deletedShapeSet : (deletedShapeSet = (_a = UtilShapeDeleter.EXCEPTIONS) !== null && _a !== void 0 ? _a : (UtilShapeDeleter.EXCEPTIONS = new Set()));\n        for (let i = 0; i < length; ++i) {\n            const child = children[i];\n            if (child.selected) {\n                child.index = length + i;\n                deletedShapeSet.add(child);\n                this.addAll(child.children, deletedShapeSet);\n            }\n            else {\n                child.index = i;\n            }\n        }\n        // Sort\n        children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n        // Detach\n        if (generateDeletedShapeList === true) {\n            for (let i = length - 1; 0 <= i; --i) {\n                const child = children[i];\n                if (child.selected) {\n                    child.index -= length;\n                    child.parent = null;\n                    child.selected = false;\n                    child.uploaded = undefined;\n                    child.onDetach(deletedShapeSet);\n                }\n                else {\n                    if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                        deletedShapeSet.clear();\n                    }\n                    const size = children.length - (i + 1);\n                    if (0 < size) {\n                        const result = children.splice(i + 1, size);\n                        if (shapes != null) {\n                            shapes.length = 0;\n                        }\n                        parent.onChildTransformChange();\n                        parent.toDirty();\n                        return result;\n                    }\n                    else {\n                        if (shapes != null) {\n                            shapes.length = 0;\n                        }\n                        return null;\n                    }\n                }\n            }\n            if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                deletedShapeSet.clear();\n            }\n            if (0 < children.length) {\n                const result = children.splice(0, children.length);\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                parent.onChildTransformChange();\n                parent.toDirty();\n                return result;\n            }\n            else {\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                return null;\n            }\n        }\n        else {\n            for (let i = length - 1; 0 <= i; --i) {\n                const child = children[i];\n                if (child.selected) {\n                    child.parent = null;\n                    child.selected = false;\n                    child.uploaded = undefined;\n                    child.onDetach(deletedShapeSet);\n                }\n                else {\n                    if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                        deletedShapeSet.clear();\n                    }\n                    children.length = i + 1;\n                    if (shapes != null) {\n                        shapes.length = 0;\n                    }\n                    parent.onChildTransformChange();\n                    parent.toDirty();\n                    return null;\n                }\n            }\n            if (UtilShapeDeleter.EXCEPTIONS === deletedShapeSet) {\n                deletedShapeSet.clear();\n            }\n            if (0 < children.length) {\n                children.length = 0;\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n                parent.onChildTransformChange();\n                parent.toDirty();\n            }\n            else {\n                if (shapes != null) {\n                    shapes.length = 0;\n                }\n            }\n            return null;\n        }\n    }\n}\n//# sourceMappingURL=util-shape-deleter.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nexport class ECommandShapeDelete extends DCommandBase {\n    constructor(shapes, indices, parent, selection, select) {\n        super();\n        this._shapes = shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].reference += 1;\n        }\n        this._indices = indices;\n        this._parent = parent;\n        this._selection = selection;\n        this._select = select;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get shapes() {\n        return this._shapes;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get select() {\n        return this._select;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const selection = this._selection;\n        if (this._select) {\n            selection.delete(false);\n        }\n        else {\n            const shapes = this._shapes;\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = true;\n            }\n            UtilShapeDeleter.delete(this._parent, undefined, false);\n            selection.update(\"TREE\");\n        }\n        return true;\n    }\n    undo() {\n        const shapes = this._shapes;\n        const indices = this._indices;\n        const parent = this._parent;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].attach(parent, indices[i]);\n        }\n        const selection = this._selection;\n        selection.lock();\n        if (this._select) {\n            selection.clearAndAddAll(shapes);\n        }\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    destroy() {\n        const shapes = this._shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            shape.reference -= 1;\n            if (shape.parent == null && shape.reference <= 0) {\n                shape.destroy();\n            }\n        }\n        shapes.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-delete.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeConnectors, EShapeGroup, EShapeLockPart, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nexport class ECommandShapeGroup extends DCommandBase {\n    constructor(parent, selection) {\n        super();\n        this._parent = parent;\n        this._selection = selection;\n        this._before = [];\n        this._deleteds = [];\n        this._indices = [];\n        this._createds = [];\n    }\n    get parent() {\n        return this._parent;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get before() {\n        return this._before;\n    }\n    get deleteds() {\n        return this._deleteds;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get createds() {\n        return this._createds;\n    }\n    execute() {\n        // Save the current selection\n        const selection = this._selection;\n        this._before = selection.store();\n        selection.lock();\n        // Unselect shapes that do not have the grouping capability\n        const shapes = selection.get();\n        for (let i = shapes.length - 1; 0 <= i; --i) {\n            const shape = shapes[i];\n            if (!EShapeCapabilities.contains(shape, EShapeCapability.GROUPING)) {\n                shape.selected = false;\n                shapes.splice(i, 1);\n            }\n        }\n        // Delete selected shapes\n        const parent = this._parent;\n        const deletedSet = new Set();\n        const deleteds = UtilShapeDeleter.delete(parent, shapes, true, deletedSet) || [];\n        this._deleteds = deleteds;\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].reference += 1;\n        }\n        // Create a new group\n        const modifier = selection.modifier;\n        const x = modifier.position.x + modifier.width * 0.5;\n        const y = modifier.position.y + modifier.height * 0.5;\n        const w = modifier.width;\n        const h = modifier.height;\n        const group = new EShapeGroup(EShapeResourceManagerDeserializationMode.EDITOR);\n        group.transform.position.set(x, y);\n        group.size.set(w, h);\n        group.attach(parent);\n        const groupChildren = group.children;\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            const clone = deleteds[i].clone();\n            clone.lock(EShapeLockPart.ALL);\n            const clonePosition = clone.transform.position;\n            clonePosition.set(clonePosition.x - x, clonePosition.y - y);\n            if (clone instanceof EShapeConnectorLine) {\n                const edge = clone.edge;\n                const tail = edge.tail;\n                const tailAcceptor = tail.acceptor;\n                const tailAcceptorShape = tailAcceptor.shape;\n                const tailLocal = tail.local;\n                if (tailAcceptorShape == null) {\n                    tailLocal.set(tailLocal.x - x, tailLocal.y - y);\n                }\n                else if (!deletedSet.has(tailAcceptorShape)) {\n                    tailAcceptor.shape = null;\n                    tailLocal.set(tailLocal.x - x, tailLocal.y - y);\n                }\n                const head = edge.head;\n                const headAcceptor = head.acceptor;\n                const headAcceptorShape = headAcceptor.shape;\n                const headLocal = head.local;\n                if (headAcceptorShape == null) {\n                    headLocal.set(headLocal.x - x, headLocal.y - y);\n                }\n                else if (!deletedSet.has(headAcceptorShape)) {\n                    headAcceptor.shape = null;\n                    headLocal.set(headLocal.x - x, headLocal.y - y);\n                }\n            }\n            clone.parent = group;\n            groupChildren.push(clone);\n        }\n        EShapeConnectors.moveAll(deleteds, groupChildren, deleteds, groupChildren);\n        for (let i = 0, imax = groupChildren.length; i < imax; ++i) {\n            groupChildren[i].unlock(EShapeLockPart.ALL, true);\n        }\n        group.onChildTransformChange();\n        group.toDirty();\n        group.onAttach();\n        group.reference += 1;\n        this._createds = [group];\n        deletedSet.clear();\n        // Indices\n        this._indices = UtilShapeSearch.toIndices(deleteds);\n        // Select a group\n        selection.clearAndAddAll(this._createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    redo() {\n        // Delete shapes\n        const selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(this._deleteds);\n        selection.delete(false);\n        // Add a group and select it\n        const parent = this._parent;\n        const createds = this._createds;\n        for (let i = 0, imax = createds.length; i < imax; ++i) {\n            createds[i].attach(parent);\n        }\n        // Select created shapes\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    undo() {\n        // Delete a group\n        const parent = this._parent;\n        const selection = this._selection;\n        selection.lock();\n        const createds = this._createds;\n        for (let i = createds.length - 1; 0 <= i; --i) {\n            createds[i].detach();\n        }\n        // Restore deleted shapes\n        const deleteds = this._deleteds;\n        const indices = this._indices;\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].attach(parent, indices[i]);\n        }\n        // Restore the selection\n        this._selection.restore(this._before);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    destroy() {\n        // Stored selection\n        this._before.length = 0;\n        // Deleted shapes\n        const deleteds = this._deleteds;\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            const deleted = deleteds[i];\n            deleted.reference -= 1;\n            if (deleted.parent == null && deleted.reference <= 0) {\n                deleted.destroy();\n            }\n        }\n        deleteds.length = 0;\n        // Created shapes\n        const createds = this._createds;\n        for (let i = 0, imax = createds.length; i < imax; ++i) {\n            const created = createds[i];\n            created.reference -= 1;\n            if (created.parent == null && created.reference <= 0) {\n                created.destroy();\n            }\n        }\n        createds.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-group.js.map","const NONE = 0;\nconst PROPERTY = 1;\nconst PROPERTY_ID = 2;\nconst SELECTION = 4;\nconst TREE = 8;\nexport const EToolSelectSelectionUpdatedPart = {\n    NONE,\n    PROPERTY,\n    PROPERTY_ID,\n    SELECTION,\n    TREE,\n    ALL: PROPERTY | PROPERTY_ID | SELECTION | TREE\n};\n//# sourceMappingURL=e-tool-select-selection-updated-part.js.map","import { EShapeGroup } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeCapabilities } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nexport class ECommandShapeProperty extends DCommandBase {\n    constructor(selection, property, targets = selection.get()) {\n        super();\n        this._selection = selection;\n        this._shapes = [];\n        this._capabilities = [];\n        this._data = [];\n        this._property = property;\n        this._targets = targets;\n        this._isMerged = false;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get shapes() {\n        return this._shapes;\n    }\n    get capabilities() {\n        return this._capabilities;\n    }\n    get data() {\n        return this._data;\n    }\n    toCapability(shape) {\n        return EShapeCapability.ALL;\n    }\n    isRecursive() {\n        return false;\n    }\n    isMergeable() {\n        return false;\n    }\n    isClassMergeable(target) {\n        return target.constructor === this.constructor;\n    }\n    execute() {\n        const shapes = this._shapes;\n        const capabilities = this._capabilities;\n        const property = this._property;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            this.initProperty(shapes[i], capabilities[i], property);\n        }\n        this._selection.update(this.getParts());\n        return true;\n    }\n    init(targets, shapes, capabilities, data, recursive) {\n        for (let i = 0, imax = targets.length; i < imax; ++i) {\n            const target = targets[i];\n            if (recursive && target instanceof EShapeGroup) {\n                if (EShapeCapabilities.contains(target, EShapeCapability.CHILDREN)) {\n                    this.init(target.children, shapes, capabilities, data, recursive);\n                }\n            }\n            else {\n                const capability = this.toCapability(target);\n                if (capability !== EShapeCapability.NONE) {\n                    shapes.push(target);\n                    data.push(this.getProperty(target, capability));\n                    capabilities.push(capability);\n                }\n            }\n        }\n    }\n    merge(target) {\n        if (this.isMergeable() && this.isClassMergeable(target)) {\n            this._isMerged = true;\n            this._shapes = target.shapes;\n            this._capabilities = target.capabilities;\n            this._data = target.data;\n            return true;\n        }\n        this.init(this._targets, this._shapes, this._capabilities, this._data, this.isRecursive());\n        return false;\n    }\n    isMerged() {\n        return this._isMerged;\n    }\n    redo() {\n        const shapes = this._shapes;\n        const data = this._data;\n        const capabilities = this._capabilities;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const datum = data[i];\n            const capability = capabilities[i];\n            data[i] = this.getProperty(shape, capability);\n            this.setProperty(shape, capability, datum);\n        }\n        this._selection.update(this.getParts());\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n    destroy() {\n        this._shapes.length = 0;\n        this._data.length = 0;\n    }\n    getParts() {\n        return EToolSelectSelectionUpdatedPart.PROPERTY;\n    }\n}\n//# sourceMappingURL=e-command-shape-property.js.map","import { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyAll extends ECommandShapeProperty {\n    constructor(selection) {\n        super(selection, undefined);\n    }\n    toCapability(shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.ALL;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            let result = EShapeCapability.NONE;\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                result |= EShapeCapability.POSITION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n                result |= EShapeCapability.WIDTH;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n                result |= EShapeCapability.HEIGHT;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                result |= EShapeCapability.ROTATION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n                result |= EShapeCapability.SKEW;\n            }\n            return result;\n        }\n    }\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            const tailLocal = edge.tail.local;\n            const headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y, 0, 0];\n        }\n        else {\n            const transform = shape.transform;\n            const position = transform.position;\n            const size = shape.size;\n            const skew = transform.skew;\n            return [position.x, position.y, size.x, size.y, transform.rotation, skew.x];\n        }\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            const transform = shape.transform;\n            if (capability & EShapeCapability.POSITION) {\n                transform.position.set(property[0], property[1]);\n            }\n            if (capability & EShapeCapability.HEIGHT) {\n                if (capability & EShapeCapability.WIDTH) {\n                    shape.size.set(property[2], property[3]);\n                }\n                else {\n                    shape.size.y = property[3];\n                }\n            }\n            else if (capability & EShapeCapability.WIDTH) {\n                shape.size.x = property[2];\n            }\n            if (capability & EShapeCapability.ROTATION) {\n                transform.rotation = property[4];\n            }\n            if (capability & EShapeCapability.SKEW) {\n                transform.skew.set(property[5], property[5]);\n            }\n        }\n    }\n    initProperty(shape, capability, property) {\n        // DO NOTHING\n    }\n}\n//# sourceMappingURL=e-command-shape-property-all.js.map","import { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyCapability extends ECommandShapeProperty {\n    getProperty(shape, capability) {\n        const shapeCapability = shape.getCapability();\n        if (shapeCapability != null) {\n            return shapeCapability.locked;\n        }\n        return EShapeCapability.NONE;\n    }\n    setProperty(shape, capability, property) {\n        if (property !== EShapeCapability.NONE) {\n            shape.capability.locked = property;\n        }\n        else {\n            const shapeCapability = shape.getCapability();\n            if (shapeCapability != null) {\n                shapeCapability.locked = property;\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-capability.js.map","import { ECommandShapePropertyCapability } from \"./e-command-shape-property-capability\";\nexport class ECommandShapePropertyCapabilityLock extends ECommandShapePropertyCapability {\n    initProperty(shape, capability, property) {\n        shape.capability.locked |= property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-capability-lock.js.map","import { ECommandShapePropertyCapability } from \"./e-command-shape-property-capability\";\nexport class ECommandShapePropertyCapabilityUnlock extends ECommandShapePropertyCapability {\n    initProperty(shape, capability, property) {\n        shape.capability.locked &= ~property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-capability-unlock.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyCornerOff extends ECommandShapeProperty {\n    getProperty(shape, capability) {\n        return shape.corner;\n    }\n    setProperty(shape, capability, property) {\n        shape.corner = property;\n    }\n    initProperty(shape, capability, property) {\n        shape.corner &= ~property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-corner-off.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyCornerOn extends ECommandShapeProperty {\n    getProperty(shape, capability) {\n        return shape.corner;\n    }\n    setProperty(shape, capability, property) {\n        shape.corner = property;\n    }\n    initProperty(shape, capability, property) {\n        shape.corner |= property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-corner-on.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertySimple extends ECommandShapeProperty {\n    initProperty(shape, capability, property) {\n        this.setProperty(shape, capability, property);\n    }\n}\n//# sourceMappingURL=e-command-shape-property-simple.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyCursor extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.cursor;\n    }\n    setProperty(shape, capability, property) {\n        shape.cursor = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-cursor.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyRecursive extends ECommandShapeProperty {\n    constructor(selection, property) {\n        super(selection, property);\n    }\n    isRecursive() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-recursive.js.map","import { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nexport class ECommandShapePropertyRecursiveSimple extends ECommandShapePropertyRecursive {\n    initProperty(shape, capability, property) {\n        this.setProperty(shape, capability, property);\n    }\n}\n//# sourceMappingURL=e-command-shape-property-recursive-simple.js.map","import { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyFillColor extends ECommandShapePropertyRecursiveSimple {\n    getProperty(shape, capability) {\n        return [shape.fill.color, shape.fill.alpha];\n    }\n    setProperty(shape, capability, property) {\n        shape.fill.set(undefined, property[0], property[1]);\n    }\n}\n//# sourceMappingURL=e-command-shape-property-fill-color.js.map","import { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyFillEnable extends ECommandShapePropertyRecursiveSimple {\n    getProperty(shape, capability) {\n        return shape.fill.enable;\n    }\n    setProperty(shape, capability, property) {\n        shape.fill.enable = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-fill-enable.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyFocusable extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.state.isFocusable;\n    }\n    setProperty(shape, capability, property) {\n        shape.state.isFocusable = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-focusable.js.map","import { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyId extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.id;\n    }\n    setProperty(shape, capability, property) {\n        shape.id = property;\n    }\n    getParts() {\n        return EToolSelectSelectionUpdatedPart.PROPERTY_ID;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-id.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyImageClear extends ECommandShapeProperty {\n    constructor(selection) {\n        super(selection, undefined);\n    }\n    getProperty(shape, capability) {\n        return shape.image;\n    }\n    setProperty(shape, capability, property) {\n        shape.image = property;\n    }\n    initProperty(shape, capability, property) {\n        shape.image = undefined;\n        shape.gradient = undefined;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-image-clear.js.map","import { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nexport class ECommandShapePropertyImageFitTo extends ECommandShapePropertyRecursive {\n    constructor(selection) {\n        super(selection, undefined);\n    }\n    getProperty(shape, capability) {\n        const size = shape.size;\n        return [size.x, size.y];\n    }\n    setProperty(shape, capability, property) {\n        shape.size.set(property[0], property[1]);\n    }\n    initProperty(shape, capability, property) {\n        const image = shape.image;\n        if (image) {\n            shape.size.set(image.width, image.height);\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-image-fit-to.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyImage extends ECommandShapeProperty {\n    constructor(selection, image, gradient) {\n        super(selection, [image, gradient]);\n    }\n    getProperty(shape, capability) {\n        return shape.image;\n    }\n    setProperty(shape, capability, property) {\n        shape.image = property;\n    }\n    initProperty(shape, capability, property) {\n        shape.image = property[0];\n        shape.gradient = property[1];\n    }\n}\n//# sourceMappingURL=e-command-shape-property-image.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyInteractive extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.interactive;\n    }\n    setProperty(shape, capability, property) {\n        shape.interactive = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-interactive.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineHeadColor extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            const fill = points.marker.head.fill;\n            return [fill.color, fill.alpha];\n        }\n        return [0, 0];\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.head.fill.set(undefined, property[0], property[1]);\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-head-color.js.map","import { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineHeadMargin extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            return shape.edge.head.margin;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            shape.edge.head.margin = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-head-margin.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineHeadSizeX extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            return points.marker.head.size.x;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.head.size.x = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-head-size-x.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineHeadSizeY extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            return points.marker.head.size.y;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.head.size.y = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-head-size-y.js.map","import { EShapeCapabilities, EShapeCapability, EShapePointsMarkerType } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineHeadType extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            return EShapeCapability.LINE_HEAD;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            return points.marker.head.type;\n        }\n        return EShapePointsMarkerType.NONE;\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.head.type = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-head-type.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineTailColor extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            const fill = points.marker.tail.fill;\n            return [fill.color, fill.alpha];\n        }\n        return [0, 0];\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.tail.fill.set(undefined, property[0], property[1]);\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-tail-color.js.map","import { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineTailMargin extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            return shape.edge.tail.margin;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            shape.edge.tail.margin = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-tail-margin.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineTailSizeX extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            return points.marker.tail.size.x;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.tail.size.x = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-tail-size-x.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineTailSizeY extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            return points.marker.tail.size.y;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.tail.size.y = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-tail-size-y.js.map","import { EShapeCapabilities, EShapeCapability, EShapePointsMarkerType } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyLineTailType extends ECommandShapePropertyRecursiveSimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            return EShapeCapability.LINE_TAIL;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points) {\n            return points.marker.tail.type;\n        }\n        return EShapePointsMarkerType.NONE;\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points) {\n            points.marker.tail.type = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-tail-type.js.map","import { EShapeCapabilities, EShapeCapability, EShapePointsStyle } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyPointsStyle extends ECommandShapeProperty {\n    constructor(selection, added, removed) {\n        super(selection, [added, removed]);\n    }\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE)) {\n            return EShapeCapability.LINE;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        const points = shape.points;\n        if (points != null) {\n            return points.style;\n        }\n        return EShapePointsStyle.NONE;\n    }\n    setProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points != null) {\n            points.style = property;\n        }\n    }\n    initProperty(shape, capability, property) {\n        const points = shape.points;\n        if (points != null) {\n            points.style = (points.style & ~property[1]) | property[0];\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-property-points-style.js.map","import { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyPositionAndRotate extends ECommandShapeProperty {\n    constructor(selection) {\n        super(selection, undefined);\n    }\n    toCapability(shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.ALL;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            let result = EShapeCapability.NONE;\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                result |= EShapeCapability.POSITION;\n            }\n            if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                result |= EShapeCapability.ROTATION;\n            }\n            return result;\n        }\n    }\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            const tailLocal = edge.tail.local;\n            const headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y];\n        }\n        else {\n            const transform = shape.transform;\n            const position = transform.position;\n            return [position.x, position.y, transform.rotation, 0];\n        }\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            const transform = shape.transform;\n            if (capability & EShapeCapability.POSITION) {\n                transform.position.set(property[0], property[1]);\n            }\n            if (capability & EShapeCapability.ROTATION) {\n                transform.rotation = property[2];\n            }\n        }\n    }\n    initProperty(shape, capability, property) {\n        // DO NOTHING\n    }\n}\n//# sourceMappingURL=e-command-shape-property-position-and-rotation.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyPositionLeft extends ECommandShapeProperty {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.transform.position.x;\n    }\n    setProperty(shape, capability, property) {\n        shape.transform.position.x = property;\n    }\n    initProperty(shape, capability, property) {\n        var _a;\n        const rectangle = ((_a = ECommandShapePropertyPositionLeft.WORK) !== null && _a !== void 0 ? _a : (ECommandShapePropertyPositionLeft.WORK = new Rectangle()));\n        shape.getBoundsLocal(false, rectangle);\n        shape.transform.position.x += property - rectangle.x;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-position-left.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyPositionTop extends ECommandShapeProperty {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.transform.position.y;\n    }\n    setProperty(shape, capability, property) {\n        shape.transform.position.y = property;\n    }\n    initProperty(shape, capability, property) {\n        var _a;\n        const rectangle = ((_a = ECommandShapePropertyPositionTop.WORK) !== null && _a !== void 0 ? _a : (ECommandShapePropertyPositionTop.WORK = new Rectangle()));\n        shape.getBoundsLocal(false, rectangle);\n        shape.transform.position.y += property - rectangle.y;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-position-top.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyPositionX extends ECommandShapePropertySimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.transform.position.x;\n    }\n    setProperty(shape, capability, property) {\n        shape.transform.position.x = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-position-x.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyPositionY extends ECommandShapePropertySimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n            return EShapeCapability.POSITION;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.transform.position.y;\n    }\n    setProperty(shape, capability, property) {\n        shape.transform.position.y = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-position-y.js.map","import { EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyPosition extends ECommandShapeProperty {\n    constructor(selection) {\n        super(selection, undefined);\n    }\n    toCapability(shape) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                return EShapeCapability.POSITION;\n            }\n            return EShapeCapability.NONE;\n        }\n        else {\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                return EShapeCapability.POSITION;\n            }\n            return EShapeCapability.NONE;\n        }\n    }\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            const tailLocal = edge.tail.local;\n            const headLocal = edge.head.local;\n            return [tailLocal.x, tailLocal.y, headLocal.x, headLocal.y];\n        }\n        else {\n            const position = shape.transform.position;\n            return [position.x, position.y, 0, 0];\n        }\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            edge.tail.local.set(property[0], property[1]);\n            edge.head.local.set(property[2], property[3]);\n        }\n        else {\n            shape.transform.position.set(property[0], property[1]);\n        }\n    }\n    initProperty(shape, capability, property) {\n        // DO NOTHING\n    }\n}\n//# sourceMappingURL=e-command-shape-property-position.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyRadius extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.radius;\n    }\n    setProperty(shape, capability, property) {\n        shape.radius = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-radius.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyRotation extends ECommandShapePropertySimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n            return EShapeCapability.ROTATION;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.transform.rotation;\n    }\n    setProperty(shape, capability, property) {\n        shape.transform.rotation = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-rotation.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyShortcut extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.shortcut;\n    }\n    setProperty(shape, capability, property) {\n        shape.shortcut = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-shortcut.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertySizeX extends ECommandShapePropertySimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n            return EShapeCapability.WIDTH;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.size.x;\n    }\n    setProperty(shape, capability, property) {\n        shape.size.x = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-size-x.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertySizeY extends ECommandShapePropertySimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n            return EShapeCapability.HEIGHT;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.size.y;\n    }\n    setProperty(shape, capability, property) {\n        shape.size.y = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-size-y.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertySkew extends ECommandShapePropertySimple {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n            return EShapeCapability.SKEW;\n        }\n        return EShapeCapability.NONE;\n    }\n    getProperty(shape, capability) {\n        return shape.transform.skew.x;\n    }\n    setProperty(shape, capability, property) {\n        shape.transform.skew.set(property, property);\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-skew.js.map","import { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyStrokeAlign extends ECommandShapePropertyRecursiveSimple {\n    getProperty(shape, capability) {\n        return shape.stroke.align;\n    }\n    setProperty(shape, capability, property) {\n        shape.stroke.align = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-stroke-align.js.map","import { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyStrokeColor extends ECommandShapePropertyRecursiveSimple {\n    getProperty(shape, capability) {\n        return [shape.stroke.color, shape.stroke.alpha];\n    }\n    setProperty(shape, capability, property) {\n        shape.stroke.set(undefined, property[0], property[1]);\n    }\n}\n//# sourceMappingURL=e-command-shape-property-stroke-color.js.map","import { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyStrokeEnable extends ECommandShapePropertyRecursiveSimple {\n    getProperty(shape, capability) {\n        return shape.stroke.enable;\n    }\n    setProperty(shape, capability, property) {\n        shape.stroke.enable = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-stroke-enable.js.map","import { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nexport class ECommandShapePropertyStrokeSideOff extends ECommandShapePropertyRecursive {\n    getProperty(shape, capability) {\n        return shape.stroke.side;\n    }\n    setProperty(shape, capability, property) {\n        shape.stroke.side = property;\n    }\n    initProperty(shape, capability, property) {\n        shape.stroke.side &= ~property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-stroke-side-off.js.map","import { ECommandShapePropertyRecursive } from \"./e-command-shape-property-recursive\";\nexport class ECommandShapePropertyStrokeSideOn extends ECommandShapePropertyRecursive {\n    getProperty(shape, capability) {\n        return shape.stroke.side;\n    }\n    setProperty(shape, capability, property) {\n        shape.stroke.side = property;\n    }\n    initProperty(shape, capability, property) {\n        shape.stroke.side |= property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-stroke-side-on.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyStrokeStyle extends ECommandShapeProperty {\n    constructor(selection, added, removed) {\n        super(selection, [added, removed]);\n    }\n    getProperty(shape, capability) {\n        return shape.stroke.style;\n    }\n    setProperty(shape, capability, property) {\n        shape.stroke.style = property;\n    }\n    initProperty(shape, capability, property) {\n        const stroke = shape.stroke;\n        stroke.style = (stroke.style & ~property[1]) | property[0];\n    }\n}\n//# sourceMappingURL=e-command-shape-property-stroke-style.js.map","import { ECommandShapePropertyRecursiveSimple } from \"./e-command-shape-property-recursive-simple\";\nexport class ECommandShapePropertyStrokeWidth extends ECommandShapePropertyRecursiveSimple {\n    getProperty(shape, capability) {\n        return shape.stroke.width;\n    }\n    setProperty(shape, capability, property) {\n        shape.stroke.width = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-stroke-width.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextAlignHorizontal extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.align.horizontal;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.align.horizontal = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-align-horizontal.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextAlignVertical extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.align.vertical;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.align.vertical = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-align-vertical.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextClipping extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.clipping;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.clipping = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-clipping.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextColor extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        const text = shape.text;\n        return [text.color, text.alpha];\n    }\n    setProperty(shape, capability, property) {\n        const text = shape.text;\n        text.color = property[0];\n        text.alpha = property[1];\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-color.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextDirection extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.direction;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.direction = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-direction.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextFamily extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.family;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.family = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-family.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextFitting extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.fitting;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.fitting = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-fitting.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextOffsetHorizontal extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.offset.horizontal;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.offset.horizontal = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-offset-horizontal.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextOffsetVertical extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.offset.vertical;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.offset.vertical = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-offset-vertical.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextOutlineColor extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        const outline = shape.text.outline;\n        return [outline.color, outline.alpha];\n    }\n    setProperty(shape, capability, property) {\n        const outline = shape.text.outline;\n        outline.color = property[0];\n        outline.alpha = property[1];\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-outline-color.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextOutlineEnable extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.outline.enable;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.outline.enable = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-outline-enable.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextOutlineWidth extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.outline.width;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.outline.width = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-outline-width.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextPaddingHorizontal extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.padding.horizontal;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.padding.horizontal = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-padding-horizontal.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextPaddingVertical extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.padding.vertical;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.padding.vertical = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-padding-vertical.js.map","import { ECommandShapeProperty } from \"./e-command-shape-property\";\nexport class ECommandShapePropertyTextSizeDelta extends ECommandShapeProperty {\n    getProperty(shape, capability) {\n        return shape.text.size;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.size = property;\n    }\n    initProperty(shape, capability, property) {\n        const text = shape.text;\n        text.size = Math.max(0, text.size + property);\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-size-delta.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextSize extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.size;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.size = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-size.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextSpacingHorizontal extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.spacing.horizontal;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.spacing.horizontal = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-spacing-horizontal.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextSpacingVertical extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.spacing.vertical;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.spacing.vertical = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-spacing-vertical.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextStyle extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.style;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.style = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-style.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextValue extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.value;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.value = property;\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-value.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTextWeight extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.text.weight;\n    }\n    setProperty(shape, capability, property) {\n        shape.text.weight = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-text-weight.js.map","import { ECommandShapePropertySimple } from \"./e-command-shape-property-simple\";\nexport class ECommandShapePropertyTitle extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        return shape.title;\n    }\n    setProperty(shape, capability, property) {\n        shape.title = property;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-title.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeReplaceOne extends DCommandBase {\n    constructor(newShape, oldShape, parent, selection) {\n        super();\n        this._parent = parent;\n        this._newShape = newShape;\n        this._oldShape = oldShape;\n        this._selection = selection;\n        this._index = parent.children.indexOf(oldShape);\n        newShape.reference += 1;\n        oldShape.reference += 1;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get oldShape() {\n        return this._oldShape;\n    }\n    get newShape() {\n        return this._newShape;\n    }\n    get index() {\n        return this._index;\n    }\n    get selection() {\n        return this._selection;\n    }\n    execute() {\n        this._oldShape.detach();\n        this._newShape.attach(this._parent, this._index);\n        this._selection.swapLast(this._oldShape, this._newShape);\n        return true;\n    }\n    redo() {\n        this._newShape.attach(this._parent, this._index);\n        this._oldShape.detach();\n        this._selection.swapLast(this._oldShape, this._newShape);\n        return true;\n    }\n    undo() {\n        this._newShape.detach();\n        this._oldShape.attach(this._parent, this._index);\n        this._selection.swapLast(this._newShape, this._oldShape);\n        return true;\n    }\n    destroy() {\n        // Destroy new shapes\n        const newShape = this._newShape;\n        newShape.reference -= 1;\n        if (newShape.parent == null && newShape.reference <= 0) {\n            newShape.destroy();\n        }\n        // Destroy old shapes\n        const oldShape = this._oldShape;\n        oldShape.reference -= 1;\n        if (oldShape.parent == null && oldShape.reference <= 0) {\n            oldShape.destroy();\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-replace-one.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeGroup, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nexport class ECommandShapeReplace extends DCommandBase {\n    constructor(parent, factory, selection) {\n        super();\n        this._parent = parent;\n        this._factory = factory;\n        this._selection = selection;\n        this._newShapes = [];\n        this._oldShapes = [];\n        this._indices = [];\n    }\n    get parent() {\n        return this._parent;\n    }\n    get oldShapes() {\n        return this._oldShapes;\n    }\n    get newShapes() {\n        return this._newShapes;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get selection() {\n        return this._selection;\n    }\n    execute() {\n        const parent = this._parent;\n        const indices = this._indices;\n        const newShapes = this._newShapes;\n        const oldShapes = this._oldShapes;\n        const children = parent.children;\n        const factory = this._factory;\n        for (let i = 0, imax = children.length; i < imax; ++i) {\n            const child = children[i];\n            if (child.selected) {\n                let newShape;\n                if (EShapeCapabilities.contains(child, EShapeCapability.REPLACING)) {\n                    if (child instanceof EShapeGroup) {\n                        const pivot = child.transform.pivot;\n                        const pivotX = pivot.x;\n                        const pivotY = pivot.y;\n                        if (pivotX !== 0 || pivotY !== 0) {\n                            child.lock(EShapeLockPart.TRANSFORM);\n                            pivot.set(0, 0);\n                            newShape = factory(child) || child;\n                            pivot.set(pivotX, pivotY);\n                            child.unlock(EShapeLockPart.TRANSFORM, false);\n                        }\n                        else {\n                            newShape = factory(child) || child;\n                        }\n                    }\n                    else {\n                        newShape = factory(child) || child;\n                    }\n                    if (newShape !== child) {\n                        child.reference += 1;\n                        newShape.reference += 1;\n                        child.detach();\n                        newShape.attach(parent, i);\n                    }\n                }\n                else {\n                    newShape = child;\n                }\n                indices.push(i);\n                newShapes.push(newShape);\n                oldShapes.push(child);\n            }\n        }\n        const selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(newShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    }\n    redo() {\n        const parent = this._parent;\n        const indices = this._indices;\n        const oldShapes = this._oldShapes;\n        const newShapes = this._newShapes;\n        for (let i = 0, imax = newShapes.length; i < imax; ++i) {\n            const oldShape = oldShapes[i];\n            const newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                oldShape.detach();\n                newShape.attach(parent, indices[i]);\n            }\n        }\n        const selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(newShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    }\n    undo() {\n        const parent = this._parent;\n        const indices = this._indices;\n        const oldShapes = this._oldShapes;\n        const newShapes = this._newShapes;\n        for (let i = 0, imax = newShapes.length; i < imax; ++i) {\n            const oldShape = oldShapes[i];\n            const newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                newShape.detach();\n                oldShape.attach(parent, indices[i]);\n            }\n        }\n        const selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(oldShapes);\n        selection.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        selection.unlock();\n        return true;\n    }\n    destroy() {\n        // Destroy Shapes\n        const oldShapes = this._oldShapes;\n        const newShapes = this._newShapes;\n        for (let i = 0, imax = newShapes.length; i < imax; ++i) {\n            const oldShape = oldShapes[i];\n            const newShape = newShapes[i];\n            if (oldShape !== newShape) {\n                newShape.reference -= 1;\n                if (newShape.parent == null && newShape.reference <= 0) {\n                    newShape.destroy();\n                }\n                oldShape.reference -= 1;\n                if (oldShape.parent == null && oldShape.reference <= 0) {\n                    oldShape.destroy();\n                }\n            }\n        }\n        oldShapes.length = 0;\n        newShapes.length = 0;\n        this.indices.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-replace.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nexport class ECommandShapeSelect extends DCommandBase {\n    constructor(before, after, selection) {\n        super();\n        this._before = before;\n        this._after = after;\n        this._selection = selection;\n    }\n    get before() {\n        return this._before;\n    }\n    get after() {\n        return this._after;\n    }\n    get selection() {\n        return this._selection;\n    }\n    isClean() {\n        return true;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        this._selection.restore(this._after);\n        return true;\n    }\n    undo() {\n        this._selection.restore(this._before);\n        return true;\n    }\n    destroy() {\n        this._before.length = 0;\n        this._after.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-select.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nexport class ECommandShapeTreeBringForward extends DCommandBase {\n    /**\n     *\n     * @param indices indices of moved children sorted in the \"descending\" order\n     * @param parent\n     * @param selection\n     */\n    constructor(indices, parent, selection) {\n        super();\n        this._indices = indices;\n        this._parent = parent;\n        this._selection = selection;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get selection() {\n        return this._selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        for (let i = 0, imax = indices.length; i < imax; ++i) {\n            const index = indices[i];\n            const child = children[index];\n            children[index] = children[index + 1];\n            children[index + 1] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        for (let i = indices.length - 1; 0 <= i; --i) {\n            const index = indices[i];\n            const child = children[index + 1];\n            children[index + 1] = children[index];\n            children[index] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    destroy() {\n        this._indices.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-tree-bring-forward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nconst SHAPE_COMPARATOR = (a, b) => {\n    return a.index - b.index;\n};\nexport class ECommandShapeTreeBringToFront extends DCommandBase {\n    /**\n     *\n     * @param indices indices of moved children sorted in the \"descending\" order\n     * @param parent\n     * @param selection\n     */\n    constructor(indices, parent, selection) {\n        super();\n        this._indices = indices;\n        this._parent = parent;\n        this._selection = selection;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get selection() {\n        return this._selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        const offset = children.length;\n        for (let i = 0; i < offset; ++i) {\n            children[i].index = i;\n        }\n        for (let i = 0, imax = indices.length; i < imax; ++i) {\n            const index = indices[i];\n            const child = children[index];\n            child.index = offset + index;\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        const offset = children.length;\n        const indexSize = indices.length;\n        for (let i = 0, imax = indexSize; i < imax; ++i) {\n            const index = indices[i];\n            const child = children[offset - 1 - i];\n            child.index = index;\n        }\n        let indexIndex = indexSize - 1;\n        let indexCurrent = indices[indexIndex];\n        let indexOffset = 0;\n        for (let i = 0, imax = offset - indexSize; i < imax; ++i) {\n            const child = children[i];\n            const index = i + indexOffset;\n            if (index < indexCurrent) {\n                child.index = index;\n            }\n            else {\n                indexOffset += 1;\n                indexIndex -= 1;\n                if (0 <= indexIndex) {\n                    indexCurrent = indices[indexIndex];\n                }\n                else {\n                    indexCurrent = Number.MAX_SAFE_INTEGER;\n                }\n                i -= 1;\n            }\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    destroy() {\n        this._indices.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-tree-bring-to-front.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nexport class ECommandShapeTreeSendBackward extends DCommandBase {\n    /**\n     * @param indices indices of moved children sorted in the \"ascending\" order\n     * @param parent\n     * @param selection\n     */\n    constructor(indices, parent, selection) {\n        super();\n        this._indices = indices;\n        this._parent = parent;\n        this._selection = selection;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get selection() {\n        return this._selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        for (let i = 0, imax = indices.length; i < imax; ++i) {\n            const index = indices[i];\n            const child = children[index];\n            children[index] = children[index - 1];\n            children[index - 1] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        for (let i = indices.length - 1; 0 <= i; --i) {\n            const index = indices[i];\n            const child = children[index - 1];\n            children[index - 1] = children[index];\n            children[index] = child;\n        }\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    destroy() {\n        this._indices.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-tree-send-backward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nconst SHAPE_COMPARATOR = (a, b) => {\n    return a.index - b.index;\n};\nexport class ECommandShapeTreeSendToBack extends DCommandBase {\n    /**\n     * @param indices indices of moved children sorted in the \"ascending\" order\n     * @param parent\n     * @param selection\n     */\n    constructor(indices, parent, selection) {\n        super();\n        this._indices = indices;\n        this._parent = parent;\n        this._selection = selection;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get selection() {\n        return this._selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        const offset = children.length;\n        for (let i = 0; i < offset; ++i) {\n            children[i].index = i;\n        }\n        for (let i = 0, imax = indices.length; i < imax; ++i) {\n            const index = indices[i];\n            const child = children[index];\n            child.index = index - offset;\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const parent = this._parent;\n        const children = parent.children;\n        const indexSize = indices.length;\n        for (let i = 0, imax = indexSize; i < imax; ++i) {\n            const index = indices[i];\n            const child = children[i];\n            child.index = index;\n        }\n        let indexIndex = 0;\n        let indexCurrent = indices[indexIndex];\n        let indexOffset = -indexSize;\n        const offset = children.length;\n        for (let i = indexSize; i < offset; ++i) {\n            const child = children[i];\n            const index = i + indexOffset;\n            if (index < indexCurrent) {\n                child.index = index;\n            }\n            else {\n                indexOffset += 1;\n                indexIndex += 1;\n                if (indexIndex < indexSize) {\n                    indexCurrent = indices[indexIndex];\n                }\n                else {\n                    indexCurrent = Number.MAX_SAFE_INTEGER;\n                }\n                i -= 1;\n            }\n        }\n        children.sort(SHAPE_COMPARATOR);\n        parent.toDirty();\n        this._selection.update(EToolSelectSelectionUpdatedPart.TREE);\n        return true;\n    }\n    destroy() {\n        this._indices.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-tree-send-to-back.js.map","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { EShapeBase, EShapeCapability, EShapeEditor, EShapeLockPart, toSizeNormalized } from \"@wcardinal/wcardinal-ui\";\nexport class UtilShapeTransforms {\n    static prepare(shape) {\n        let editor = shape.editor;\n        if (editor == null) {\n            editor = new EShapeEditor();\n            shape.editor = editor;\n        }\n        // Transform\n        shape.updateTransform();\n        const parent = shape.parent;\n        if (parent instanceof EShapeBase) {\n            parent.transform.internalTransform\n                .copyTo(editor.internalTransformParentInverse)\n                .invert();\n        }\n        else {\n            editor.internalTransformParentInverse.identity();\n        }\n        shape.transform.internalTransform.copyTo(editor.internalTransform);\n        // Rotation\n        editor.rotation = shape.transform.rotation;\n        // Size\n        editor.size.copyFrom(shape.size);\n        //\n        shape.lock(EShapeLockPart.TRANSFORM_CHILD);\n    }\n    static finalize(shape) {\n        shape.unlock(EShapeLockPart.TRANSFORM_CHILD, true);\n    }\n    static apply(shape, transform, capability) {\n        const editor = shape.editor;\n        if (editor != null) {\n            const newLocalTransform = editor.localTransform;\n            editor.internalTransformParentInverse\n                .copyTo(newLocalTransform)\n                .append(transform)\n                .append(editor.internalTransform);\n            this.applyLocal(shape, newLocalTransform, capability, editor.size);\n        }\n    }\n    static applyLocal(shape, localTransform, capability, size) {\n        // Reconstruct the position, the rotation and the size\n        const a = localTransform.a;\n        const b = localTransform.b;\n        const c = localTransform.c;\n        const d = localTransform.d;\n        const tx = localTransform.tx;\n        const ty = localTransform.ty;\n        shape.lock(EShapeLockPart.UPLOADED);\n        // Transform\n        const transform = shape.transform;\n        // Capability\n        const cposition = !!(capability & EShapeCapability.POSITION);\n        const crotation = !!(capability & EShapeCapability.ROTATION);\n        const cskew = !!(capability & EShapeCapability.SKEW);\n        const cwidth = !!(capability & EShapeCapability.WIDTH);\n        const cheight = !!(capability & EShapeCapability.HEIGHT);\n        // Rotation and skew\n        if (crotation || cskew) {\n            // Rotation\n            const rx = Math.atan2(-c, d); // rotation - skewX\n            const ry = Math.atan2(+b, a); // rotation + skewY\n            if (crotation) {\n                transform.rotation = (rx + ry) * 0.5; // Here, assumes `skewX` === `skewY`\n            }\n            // Skew\n            if (cskew) {\n                const skew = (ry - rx) * 0.5;\n                transform.skew.set(skew, skew);\n            }\n        }\n        // Position\n        if (cposition) {\n            // Assumes the pivot is invariant.\n            // tx = position.x - (a * px + c * py)\n            // ty = position.y - (b * px + d * py)\n            //\n            // Thus,\n            // position.x = tx + (a * px + c * py)\n            // position.y = ty + (b * px + d * py)\n            const pivot = transform.pivot;\n            const px = pivot.x;\n            const py = pivot.y;\n            transform.position.set(tx + (a * px + c * py), ty + (b * px + d * py));\n        }\n        // Scale\n        if (size != null && (cwidth || cheight)) {\n            const w = toSizeNormalized(size.x * Math.sqrt(a * a + b * b));\n            const h = toSizeNormalized(size.y * Math.sqrt(c * c + d * d));\n            const s = shape.size;\n            if (cwidth && cheight) {\n                s.set(w, h);\n            }\n            else if (cwidth) {\n                s.x = w;\n            }\n            else {\n                s.y = h;\n            }\n        }\n        //\n        shape.unlock(EShapeLockPart.UPLOADED, true);\n    }\n}\n//# sourceMappingURL=util-shape-transforms.js.map","import { DCommandBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeConnectors, EShapeGroup, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { UtilShapeTransforms } from \"../util/util-shape-transforms\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nexport class ECommandShapeUngroup extends DCommandBase {\n    constructor(parent, selection) {\n        super();\n        this._parent = parent;\n        this._selection = selection;\n        this._before = [];\n        this._deleteds = [];\n        this._indices = [];\n        this._createds = [];\n    }\n    get parent() {\n        return this._parent;\n    }\n    get selection() {\n        return this._selection;\n    }\n    get before() {\n        return this._before;\n    }\n    get deleteds() {\n        return this._deleteds;\n    }\n    get indices() {\n        return this._indices;\n    }\n    get createds() {\n        return this._createds;\n    }\n    execute() {\n        // Save the current selection\n        const selection = this._selection;\n        selection.lock();\n        this._before = selection.store();\n        // Unselect non-group shapes\n        const shapes = selection.get();\n        for (let i = shapes.length - 1; 0 <= i; --i) {\n            const shape = shapes[i];\n            if (!this.isUngroupable(shape)) {\n                shape.selected = false;\n                shapes.splice(i, 1);\n            }\n        }\n        // Delete groups\n        const parent = this._parent;\n        const deleteds = UtilShapeDeleter.delete(parent, shapes, true) || [];\n        this._deleteds = deleteds;\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].reference += 1;\n        }\n        // Create shapes\n        const createds = [];\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            const target = deleteds[i];\n            const targetLocalTransform = target.transform.localTransform;\n            const a = targetLocalTransform.a;\n            const b = targetLocalTransform.b;\n            const c = targetLocalTransform.c;\n            const d = targetLocalTransform.d;\n            const tx = targetLocalTransform.tx;\n            const ty = targetLocalTransform.ty;\n            const targetChildren = target.children;\n            const clones = [];\n            for (let j = 0, jmax = targetChildren.length; j < jmax; ++j) {\n                const clone = targetChildren[j].clone();\n                clone.lock(EShapeLockPart.ALL);\n                clone.parent = null;\n                clone.updateTransform();\n                const localTransform = clone.transform.localTransform;\n                localTransform.prepend(targetLocalTransform);\n                let capability = EShapeCapability.NONE;\n                if (EShapeCapabilities.contains(clone, EShapeCapability.POSITION)) {\n                    capability |= EShapeCapability.POSITION;\n                }\n                if (EShapeCapabilities.contains(clone, EShapeCapability.ROTATION)) {\n                    capability |= EShapeCapability.ROTATION;\n                }\n                if (EShapeCapabilities.contains(clone, EShapeCapability.SKEW)) {\n                    capability |= EShapeCapability.SKEW;\n                }\n                if (capability !== EShapeCapability.NONE) {\n                    UtilShapeTransforms.applyLocal(clone, localTransform, capability);\n                }\n                if (clone instanceof EShapeConnectorLine) {\n                    const edge = clone.edge;\n                    const tail = edge.tail;\n                    if (tail.acceptor.shape == null) {\n                        // Local\n                        const tailLocal = tail.local;\n                        const tailLocalX = tailLocal.x;\n                        const tailLocalY = tailLocal.y;\n                        tailLocal.set(a * tailLocalX + c * tailLocalY + tx, b * tailLocalX + d * tailLocalY + ty);\n                        // Normal\n                        const tailNormal = tail.normal;\n                        const tailNormalX = tailNormal.x;\n                        const tailNormalY = tailNormal.y;\n                        const ndx = a * tailNormalX + c * tailNormalY;\n                        const ndy = b * tailNormalX + d * tailNormalY;\n                        const nd = ndx * ndx + ndy * ndy;\n                        if (0.000001 < nd) {\n                            const f = Math.sqrt(1 / nd);\n                            tailNormal.set(ndx * f, ndy * f);\n                        }\n                    }\n                    const head = edge.head;\n                    if (head.acceptor.shape == null) {\n                        // Local\n                        const headLocal = head.local;\n                        const headLocalX = headLocal.x;\n                        const headLocalY = headLocal.y;\n                        headLocal.set(a * headLocalX + c * headLocalY + tx, b * headLocalX + d * headLocalY + ty);\n                        // Normal\n                        const headNormal = head.normal;\n                        const headNormalX = headNormal.x;\n                        const headNormalY = headNormal.y;\n                        const ndx = a * headNormalX + c * headNormalY;\n                        const ndy = b * headNormalX + d * headNormalY;\n                        const nd = ndx * ndx + ndy * ndy;\n                        if (0.000001 < nd) {\n                            const f = Math.sqrt(1 / nd);\n                            headNormal.set(ndx * f, ndy * f);\n                        }\n                    }\n                }\n                clones.push(clone);\n            }\n            EShapeConnectors.moveAll(targetChildren, clones, targetChildren, clones);\n            for (let j = 0, jmax = clones.length; j < jmax; ++j) {\n                const clone = clones[j];\n                clone.unlock(EShapeLockPart.ALL, true);\n                clone.attach(parent);\n                clone.reference += 1;\n                createds.push(clone);\n            }\n        }\n        this._createds = createds;\n        // Indices\n        this._indices = UtilShapeSearch.toIndices(deleteds);\n        // Select created shapes\n        selection.clearAndAddAll(createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    isUngroupable(shape) {\n        return (shape instanceof EShapeGroup &&\n            EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n            EShapeCapabilities.contains(shape, EShapeCapability.UNGROUPING));\n    }\n    redo() {\n        // Delete shapes\n        const selection = this._selection;\n        selection.lock();\n        selection.clearAndAddAll(this._deleteds);\n        selection.delete(false);\n        // Add created shapes\n        const parent = this._parent;\n        const createds = this._createds;\n        for (let i = 0, imax = createds.length; i < imax; ++i) {\n            createds[i].attach(parent);\n        }\n        // Select created shapes\n        selection.clearAndAddAll(createds);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    undo() {\n        // Delete created shapes\n        const parent = this._parent;\n        const selection = this._selection;\n        selection.lock();\n        const createds = this._createds;\n        for (let i = createds.length - 1; 0 <= i; --i) {\n            createds[i].detach();\n        }\n        // Restore deleted shapes\n        const deleteds = this._deleteds;\n        const indices = this._indices;\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            deleteds[i].attach(parent, indices[i]);\n        }\n        // Restore the selection\n        this._selection.restore(this._before);\n        selection.update(\"TREE\");\n        selection.unlock();\n        return true;\n    }\n    destroy() {\n        // Stored selection\n        this._before.length = 0;\n        // Deleted shapes\n        const deleteds = this._deleteds;\n        for (let i = 0, imax = deleteds.length; i < imax; ++i) {\n            const deleted = deleteds[i];\n            deleted.reference -= 1;\n            if (deleted.parent == null && deleted.reference <= 0) {\n                deleted.destroy();\n            }\n        }\n        deleteds.length = 0;\n        // Created shapes\n        const createds = this._createds;\n        for (let i = 0, imax = createds.length; i < imax; ++i) {\n            const created = createds[i];\n            created.reference -= 1;\n            if (created.parent == null && created.reference <= 0) {\n                created.destroy();\n            }\n        }\n        createds.length = 0;\n    }\n}\n//# sourceMappingURL=e-command-shape-ungroup.js.map","export function newGraphicTester(name, graphic) {\n    return {\n        id: undefined,\n        graphicId: graphic.id,\n        name,\n        mappings: new Map()\n    };\n}\n//# sourceMappingURL=new-graphic-tester.js.map","export class UtilCsvState {\n    constructor(lines) {\n        this.lines = lines;\n        this.linesLength = lines.length;\n        this.cursor = -1;\n        this.line = \"\";\n        this.lineLength = 0;\n    }\n    next() {\n        const newCursor = this.cursor + 1;\n        if (newCursor < this.linesLength) {\n            this.cursor = newCursor;\n            const nextLine = this.lines[newCursor];\n            this.line = nextLine;\n            this.lineLength = nextLine.length;\n            return true;\n        }\n        return false;\n    }\n}\nexport class UtilCsv {\n    static parseLine(state) {\n        const result = [];\n        let icomma = -1;\n        let line = state.line;\n        let length = state.lineLength;\n        for (let i = 0; i < length; ++i) {\n            if (line.charAt(i) === '\"') {\n                // Find the corresponding double quote\n                for (let j = i + 1; j < length; ++j) {\n                    const k = line.indexOf('\"', j);\n                    if (k < 0) {\n                        // Not found.\n                        if (state.next()) {\n                            // Consumes the next line\n                            line += \"\\n\" + state.line;\n                            length += 1 + state.lineLength;\n                            // And try again\n                            j -= 1;\n                            continue;\n                        }\n                        else {\n                            // Skip to the end.\n                            j = length + 1;\n                            result.push(this.unescape(line.substring(i + 1, j - 1)));\n                            i = j;\n                        }\n                    }\n                    else {\n                        j = k + 1;\n                        // If the next character is a double quote, then continues.\n                        if (j < length && line.charAt(j) === '\"') {\n                            continue;\n                        }\n                        // The next character isn't a double quote\n                        result.push(this.unescape(line.substring(i + 1, j - 1)));\n                        i = j;\n                    }\n                    break;\n                }\n            }\n            else {\n                if (icomma < i) {\n                    icomma = line.indexOf(\",\", i);\n                    if (icomma < 0) {\n                        icomma = length;\n                    }\n                }\n                result.push(line.substring(i, icomma));\n                i = icomma;\n            }\n        }\n        return result;\n    }\n    static parse(str) {\n        const lines = str.split(/(?:\\r\\n?|\\n)/g);\n        const result = [];\n        const state = new UtilCsvState(lines);\n        while (state.next()) {\n            const row = this.parseLine(state);\n            if (0 < row.length) {\n                result.push(row);\n            }\n        }\n        return result;\n    }\n    static stringifyLine(line) {\n        let result = \"\";\n        let delimiter = \"\";\n        for (let i = 0, imax = line.length; i < imax; ++i) {\n            result += delimiter + this.escape(String(line[i]));\n            delimiter = \",\";\n        }\n        return result;\n    }\n    static stringify(lines) {\n        let result = \"\";\n        let delimiter = \"\";\n        for (let i = 0, imax = lines.length; i < imax; ++i) {\n            result += delimiter + this.stringifyLine(lines[i]);\n            delimiter = \"\\n\";\n        }\n        return result;\n    }\n    static escape(target) {\n        const result = target.replace(/\"/g, '\"\"');\n        if (result.length !== target.length ||\n            0 <= target.indexOf(\",\") ||\n            0 <= target.indexOf(\"\\n\") ||\n            0 <= target.indexOf(\"\\r\")) {\n            return `\"${result}\"`;\n        }\n        return target;\n    }\n    static unescape(target) {\n        return target.replace(/\"\"/g, '\"');\n    }\n}\n//# sourceMappingURL=util-csv.js.map","import { UtilCsv } from \"../util/util-csv\";\nexport function toGraphicTesterObject(data) {\n    const rows = UtilCsv.parse(data);\n    const result = new Map();\n    for (let i = 0, imax = rows.length; i < imax; ++i) {\n        const row = rows[i];\n        const uuid = parseInt(row[0], 10);\n        if (uuid === uuid) {\n            const original = row[1] || \"\";\n            const value = row[2] || \"\";\n            if (0 < original.length && 0 < value.length) {\n                let object = result.get(uuid);\n                if (object == null) {\n                    object = {};\n                    result.set(uuid, object);\n                }\n                object[original] = value;\n            }\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=to-graphic-tester-object.js.map","export function toGraphicTesterSerialized(simple) {\n    const parsed = JSON.parse(simple.mappings);\n    const uuids = parsed[0];\n    const objects = parsed[1];\n    const mappings = new Map();\n    for (let i = 0, imax = Math.min(uuids.length, objects.length); i < imax; ++i) {\n        mappings.set(uuids[i], objects[i]);\n    }\n    return {\n        id: simple.id,\n        graphicId: simple.graphicId,\n        name: simple.name,\n        mappings\n    };\n}\n//# sourceMappingURL=to-graphic-tester-serialized.js.map","export function toGraphicTesterSimple(serialized) {\n    const mappings = serialized.mappings;\n    const uuids = [];\n    const objects = [];\n    mappings.forEach((object, key) => {\n        uuids.push(key);\n        objects.push(object);\n    });\n    return {\n        id: serialized.id,\n        graphicId: serialized.graphicId,\n        name: serialized.name,\n        mappings: JSON.stringify([uuids, objects])\n    };\n}\n//# sourceMappingURL=to-graphic-tester-simple.js.map","import { EShapeActionValueDeserializers } from \"@wcardinal/wcardinal-ui\";\nexport class EShapeActionExtensions {\n    static add(extension) {\n        var _a, _b;\n        ((_a = this._typeToExtension) !== null && _a !== void 0 ? _a : (this._typeToExtension = new Map())).set(extension.type, extension);\n        ((_b = this._extensions) !== null && _b !== void 0 ? _b : (this._extensions = [])).push(extension);\n        EShapeActionValueDeserializers[extension.type] = extension.deserializer;\n    }\n    static get(type) {\n        const typeToExtension = this._typeToExtension;\n        if (typeToExtension != null) {\n            return typeToExtension.get(type);\n        }\n    }\n    static each(iteratee) {\n        const extensions = this._extensions;\n        if (extensions != null) {\n            for (let i = 0, imax = extensions.length; i < imax; ++i) {\n                const extension = extensions[i];\n                iteratee(extension);\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-shape-action-extensions.js.map","export const EShapeActionExtensionInputType = {\n    TEXT: 0\n};\n//# sourceMappingURL=e-shape-action-extension-input.js.map","import { DInputLabel, DInputText, DLayoutHorizontal, DLayoutSpace, DSelect } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeActionExtensionInputType } from \"../extension/e-shape-action-extension-input\";\nexport class EDialogActionExtension {\n    constructor(extension, dialog, condition, layout) {\n        this._extension = extension;\n        this._dialog = dialog;\n        this._condition = condition;\n        this._layout = layout;\n    }\n    get select() {\n        let result = this._select;\n        if (result === undefined) {\n            result = this.newSelect();\n            this._select = result;\n        }\n        return result;\n    }\n    newSelect() {\n        const extensionItems = this._extension.items;\n        if (extensionItems != null && 0 < extensionItems.length) {\n            const result = new DSelect({\n                weight: 1,\n                value: extensionItems[0].type,\n                menu: {\n                    items: this.newSelectMenuItems(extensionItems)\n                }\n            });\n            return result;\n        }\n        return null;\n    }\n    newSelectMenuItems(items) {\n        const result = [];\n        for (let i = 0, imax = items.length; i < imax; ++i) {\n            const item = items[i];\n            result.push({\n                value: item.type,\n                text: {\n                    value: item.label\n                }\n            });\n        }\n        return result;\n    }\n    get selectLayout() {\n        let result = this._selectLayout;\n        if (result === undefined) {\n            result = this.newSelectLayout();\n            if (result != null) {\n                const layout = this._layout;\n                const conditionIndex = layout.getChildIndex(this._condition);\n                if (0 <= conditionIndex) {\n                    layout.addChildAt(result, conditionIndex);\n                }\n                else {\n                    layout.addChild(result);\n                }\n            }\n            this._selectLayout = result;\n        }\n        return result;\n    }\n    newSelectLayout() {\n        const select = this.select;\n        if (select != null) {\n            return this.newLabeled(\"\", select);\n        }\n        return null;\n    }\n    get inputs() {\n        let result = this._inputs;\n        if (result === undefined) {\n            result = this.newInputs();\n            this._inputs = result;\n        }\n        return result;\n    }\n    newInputs() {\n        const result = [];\n        const extensionInputs = this._extension.inputs;\n        if (extensionInputs != null) {\n            for (let i = 0, imax = extensionInputs.length; i < imax; ++i) {\n                const input = extensionInputs[i];\n                switch (input.type) {\n                    case EShapeActionExtensionInputType.TEXT:\n                        const inputText = this.newInputText();\n                        result.push(inputText);\n                        break;\n                }\n            }\n        }\n        return result;\n    }\n    newInputText() {\n        return new DInputText({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    newLabel(label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    }\n    newSpace() {\n        return new DLayoutSpace({\n            width: 60\n        });\n    }\n    newLabeled(label, input) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                input,\n                this.newSpace()\n            ]\n        });\n    }\n    get inputLayouts() {\n        let result = this._inputLayouts;\n        if (result === undefined) {\n            result = this.newInputLayouts();\n            this._inputLayouts = result;\n        }\n        return result;\n    }\n    newInputLayouts() {\n        const result = [];\n        const inputs = this.inputs;\n        const layout = this._layout;\n        const extensionInputs = this._extension.inputs;\n        if (extensionInputs != null) {\n            const conditionIndex = layout.getChildIndex(this._condition);\n            for (let i = 0, imax = inputs.length; i < imax; ++i) {\n                const labeled = this.newLabeled(extensionInputs[i].label, inputs[i]);\n                result.push(labeled);\n                if (0 <= conditionIndex) {\n                    layout.addChildAt(labeled, conditionIndex + 1 + i);\n                }\n                else {\n                    layout.addChild(labeled);\n                }\n            }\n        }\n        return result;\n    }\n    get value() {\n        return this._extension.toValue(this.select, this._condition.input, this.inputs);\n    }\n    set value(value) {\n        if (value != null) {\n            this._extension.fromValue(value, this.select, this._condition.input, this.inputs);\n        }\n    }\n    show() {\n        // Select\n        const selectLayout = this.selectLayout;\n        if (selectLayout != null) {\n            selectLayout.show();\n        }\n        // Inputs\n        const inputLayouts = this.inputLayouts;\n        if (0 < inputLayouts.length) {\n            const extension = this._extension;\n            if (extension.onShow != null) {\n                extension.onShow(inputLayouts);\n            }\n            else {\n                for (let i = 0, imax = inputLayouts.length; i < imax; ++i) {\n                    inputLayouts[i].show();\n                }\n            }\n        }\n    }\n    hide() {\n        // Select\n        const selectLayout = this._selectLayout;\n        if (selectLayout != null) {\n            selectLayout.hide();\n        }\n        // Inputs\n        const inputLayouts = this._inputLayouts;\n        if (inputLayouts != null) {\n            for (let i = 0, imax = inputLayouts.length; i < imax; ++i) {\n                inputLayouts[i].hide();\n            }\n        }\n    }\n    reset() {\n        // Select\n        const select = this._select;\n        if (select) {\n            const items = this._extension.items;\n            if (items != null && 0 < items.length) {\n                select.value = items[0].type;\n            }\n            else {\n                select.value = null;\n            }\n        }\n        // Inputs\n        const inputs = this._inputs;\n        if (inputs) {\n            const extensionInputs = this._extension.inputs;\n            if (extensionInputs != null) {\n                for (let i = 0, imax = inputs.length; i < imax; ++i) {\n                    inputs[i].value = extensionInputs[i].initial || \"\";\n                }\n            }\n        }\n    }\n    ok() {\n        this._dialog.ok();\n    }\n}\n//# sourceMappingURL=e-dialog-action-extension.js.map","import { EShapeActionExtensions } from \"../extension/e-shape-action-extensions\";\nimport { EDialogActionExtension } from \"./e-dialog-action-extension\";\nexport class EDialogActionExtensionContainer {\n    constructor(dialog, condition, layout) {\n        this._data = new Map();\n        this._dialog = dialog;\n        this._condition = condition;\n        this._layout = layout;\n    }\n    get value() {\n        const selected = this._selected;\n        if (selected) {\n            return selected.value;\n        }\n        return null;\n    }\n    set value(value) {\n        if (value != null) {\n            const datum = this._data.get(value.type);\n            if (datum != null) {\n                datum.value = value;\n            }\n        }\n    }\n    get(type) {\n        const data = this._data;\n        let result = data.get(type);\n        if (result != null) {\n            return result;\n        }\n        const e = EShapeActionExtensions.get(type);\n        if (e == null) {\n            return null;\n        }\n        result = new EDialogActionExtension(e, this._dialog, this._condition, this._layout);\n        data.set(type, result);\n        return result;\n    }\n    show(type) {\n        if (type != null) {\n            const datum = this.get(type);\n            if (datum != null) {\n                const selected = this._selected;\n                if (selected !== datum) {\n                    if (selected != null) {\n                        selected.hide();\n                    }\n                    this._selected = datum;\n                    datum.show();\n                }\n            }\n            else {\n                this.hide();\n            }\n        }\n        else {\n            this.hide();\n        }\n    }\n    hide() {\n        const selected = this._selected;\n        if (selected != null) {\n            selected.hide();\n            this._selected = null;\n        }\n    }\n    reset() {\n        this._data.forEach((datum) => {\n            datum.reset();\n        });\n    }\n    onChange(type) {\n        this.show(type);\n    }\n}\n//# sourceMappingURL=e-dialog-action-extension-container.js.map","import { createGroupUploaded, EShapeCapabilities, EShapeDeserializers, EShapeOnDeserializeds, EShapeRuntimes, EShapeUploadeds } from \"@wcardinal/wcardinal-ui\";\nconst toIconName = (index) => {\n    return `extension_icon_${index}`;\n};\nexport class EShapeExtensions {\n    static add(extension) {\n        var _a, _b;\n        if (\"type\" in extension) {\n            const type = extension.type;\n            // Name\n            ((_a = this._typeToExtension) !== null && _a !== void 0 ? _a : (this._typeToExtension = new Map())).set(type, extension);\n            // Deserializer\n            const deserializer = extension.deserializer;\n            if (deserializer != null) {\n                EShapeDeserializers[type] = deserializer;\n            }\n            // OnDeserialized\n            const onDeserialized = extension.onDeserialized;\n            if (onDeserialized != null) {\n                EShapeOnDeserializeds[type] = onDeserialized;\n            }\n            // Runtime\n            const runtime = extension.runtime;\n            if (runtime) {\n                EShapeRuntimes[type] = runtime;\n            }\n            // Capability\n            const capability = extension.capability;\n            if (capability != null) {\n                EShapeCapabilities.set(type, capability);\n            }\n            // Uploaded\n            const uploaded = extension.uploaded;\n            if (uploaded != null) {\n                EShapeUploadeds[type] = uploaded;\n            }\n            else {\n                if (EShapeUploadeds[type] == null) {\n                    EShapeUploadeds[type] = createGroupUploaded;\n                }\n            }\n        }\n        ((_b = this._extensions) !== null && _b !== void 0 ? _b : (this._extensions = [])).push(extension);\n    }\n    static get(type) {\n        const typeToExtension = this._typeToExtension;\n        if (typeToExtension != null) {\n            return typeToExtension.get(type);\n        }\n    }\n    static each(iteratee) {\n        const extensions = this._extensions;\n        if (extensions != null) {\n            for (let i = 0, imax = extensions.length; i < imax; ++i) {\n                const extension = extensions[i];\n                iteratee(extension);\n            }\n        }\n    }\n    static merge(iconBuilder) {\n        const extensions = this._extensions;\n        if (extensions != null) {\n            for (let i = 0, imax = extensions.length; i < imax; ++i) {\n                const extension = extensions[i];\n                if (\"icon\" in extension) {\n                    const icon = extension.icon;\n                    iconBuilder.add(toIconName(i), icon.width, icon.height, icon.svg);\n                }\n            }\n        }\n    }\n    static build(icons) {\n        const extensions = this._extensions;\n        if (extensions != null) {\n            for (let i = 0, imax = extensions.length; i < imax; ++i) {\n                const extension = extensions[i];\n                if (\"icon\" in extension) {\n                    extension.icon.texture = icons[toIconName(i)];\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-shape-extensions.js.map","import { EShapeAcceptorEdgeSide, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nexport class ECommandShapeEmbeddedAcceptorEdgePropertySide extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.side;\n        }\n        return EShapeAcceptorEdgeSide.NONE;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.side = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-side.js.map","import { EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nexport class ECommandShapeEmbeddedAcceptorEdgePropertySubtype extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.subtype;\n        }\n        return EShapeAcceptorEdgeType.HEAD;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.subtype = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-subtype.js.map","import { EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nexport class ECommandShapeEmbeddedAcceptorEdgePropertyVvisible extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            return shape.vvisible;\n        }\n        return false;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeEmbeddedAcceptorEdge) {\n            shape.vvisible = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-embedded-acceptor-edge-property-vvisible.js.map","import { DButtonCheckRight, DControllers, DLayoutVertical, DPane, DSelect, DSelectMultiple, DText, DThemes, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertySide } from \"./e-command-shape-embedded-acceptor-edge-property-side\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertySubtype } from \"./e-command-shape-embedded-acceptor-edge-property-subtype\";\nimport { ECommandShapeEmbeddedAcceptorEdgePropertyVvisible } from \"./e-command-shape-embedded-acceptor-edge-property-vvisible\";\nexport class EEditorShapeEmbeddedAcceptorEdge extends DPane {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        const selection = options.selection;\n        this._selection = selection;\n        this._diagram = options.diagram;\n        // Layout\n        this.initLayout();\n    }\n    initLayout() {\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [this.newTextLabel(), this.selectSubtype, this.selectSide, this.checkVvisible]\n        });\n        // Selection\n        const selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", () => {\n            this.state.isDisabled = selection.isEmpty();\n            this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    }\n    get selectSubtype() {\n        var _a;\n        return ((_a = this._selectSubtype) !== null && _a !== void 0 ? _a : (this._selectSubtype = this.newSelectSubtype()));\n    }\n    newSelectSubtype() {\n        const subtheme = this.subtheme;\n        return new DSelect({\n            width: \"padding\",\n            value: EShapeAcceptorEdgeType.HEAD,\n            menu: {\n                items: [\n                    {\n                        value: EShapeAcceptorEdgeType.HEAD,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.HEAD)\n                        }\n                    },\n                    {\n                        value: EShapeAcceptorEdgeType.TAIL,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.TAIL)\n                        }\n                    },\n                    {\n                        value: EShapeAcceptorEdgeType.ALL,\n                        text: {\n                            value: subtheme.toSelectSubtypeLabel(EShapeAcceptorEdgeType.ALL)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: (value) => {\n                    this.onSelectSubtypeChanged(value);\n                }\n            }\n        });\n    }\n    onSelectSubtypeChanged(value) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertySubtype(this._selection, value));\n    }\n    get selectSide() {\n        var _a;\n        return ((_a = this._selectSide) !== null && _a !== void 0 ? _a : (this._selectSide = this.newSelectSide()));\n    }\n    newSelectSide() {\n        const subtheme = this.subtheme;\n        return new DSelectMultiple({\n            width: \"padding\",\n            values: [EShapeAcceptorEdgeSide.LEFT],\n            menu: {\n                items: [\n                    {\n                        value: EShapeAcceptorEdgeSide.LEFT,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.LEFT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.TOP,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.TOP)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.RIGHT,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.RIGHT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeAcceptorEdgeSide.BOTTOM,\n                        text: {\n                            value: subtheme.toSelectSideLabel(EShapeAcceptorEdgeSide.BOTTOM)\n                        },\n                        check: true\n                    }\n                ]\n            },\n            on: {\n                change: (values) => {\n                    this.onSelectSideChange(values);\n                }\n            }\n        });\n    }\n    onSelectSideChange(values) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertySide(this._selection, this.fromSelectSideValues(values)));\n    }\n    toSelectSideValues(value) {\n        const result = [];\n        if (value & EShapeAcceptorEdgeSide.LEFT) {\n            result.push(EShapeAcceptorEdgeSide.LEFT);\n        }\n        if (value & EShapeAcceptorEdgeSide.TOP) {\n            result.push(EShapeAcceptorEdgeSide.TOP);\n        }\n        if (value & EShapeAcceptorEdgeSide.RIGHT) {\n            result.push(EShapeAcceptorEdgeSide.RIGHT);\n        }\n        if (value & EShapeAcceptorEdgeSide.BOTTOM) {\n            result.push(EShapeAcceptorEdgeSide.BOTTOM);\n        }\n        return result;\n    }\n    fromSelectSideValues(values) {\n        let result = EShapeAcceptorEdgeSide.NONE;\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            result |= values[i];\n        }\n        return result;\n    }\n    get checkVvisible() {\n        var _a;\n        return ((_a = this._checkVvisible) !== null && _a !== void 0 ? _a : (this._checkVvisible = this.newCheckIsVvisible()));\n    }\n    newCheckIsVvisible() {\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsVvisibleLabel()\n            },\n            on: {\n                active: () => {\n                    this.onCheckVvisibleChanged(true);\n                },\n                inactive: () => {\n                    this.onCheckVvisibleChanged(false);\n                }\n            }\n        });\n    }\n    onCheckVvisibleChanged(isVvisible) {\n        DControllers.getCommandController().push(new ECommandShapeEmbeddedAcceptorEdgePropertyVvisible(this._selection, isVvisible));\n    }\n    onSelectionChange(selection) {\n        const selectSubtype = this.selectSubtype;\n        const selectSide = this.selectSide;\n        const checkVvisible = this.checkVvisible;\n        const last = selection.last();\n        if (last instanceof EShapeEmbeddedAcceptorEdge) {\n            selectSubtype.value = last.subtype;\n            selectSubtype.state.isEnabled = true;\n            selectSide.values = this.toSelectSideValues(last.side);\n            selectSide.state.isEnabled = true;\n            checkVvisible.state.isActive = last.vvisible;\n            checkVvisible.state.isEnabled = true;\n        }\n        else {\n            selectSubtype.state.isEnabled = false;\n            selectSide.state.isEnabled = false;\n            checkVvisible.state.isEnabled = false;\n        }\n    }\n    get subtheme() {\n        var _a;\n        return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n    }\n    newSubtheme() {\n        return DThemes.get(\"EEditorShapeEmbeddedAcceptorEdge\");\n    }\n}\n//# sourceMappingURL=e-editor-shape-embedded-acceptor-edge.js.map","import { DThemes, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeEmbeddedAcceptorEdge, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeEmbeddedAcceptorEdge } from \"./e-editor-shape-embedded-acceptor-edge\";\nexport class EShapeEmbeddedAcceptorEdges {\n    static getTheme() {\n        return DThemes.get(\"EShapeEmbeddedAcceptorEdge\");\n    }\n    static create(existing) {\n        const result = new EShapeEmbeddedAcceptorEdge();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            result.subtype = EShapeAcceptorEdgeType.HEAD; // Connectable to heads only\n            result.side = EShapeAcceptorEdgeSide.LEFT; // Connectable from the left side\n            result.vvisible = true; // True if visible in the viewer mode\n            result.stroke.set(false, 0x3399ff, 1);\n            result.fill.set(true, 0x3399ff, 1);\n        }\n        return result;\n    }\n    static load() {\n        const theme = this.getTheme();\n        const name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeType.EMBEDDED_ACCEPTOR_EDGE,\n            name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: `<g transform=\"scale(0.667,0.667) translate(480, 480) rotate(+90) translate(-480, 480)\" fill=\"#fff\" stroke=\"none\">` +\n                    `<path d=\"M480-640 280-440l56 56 104-103v407h80v-407l104 103 56-56-200-200ZM146-260q-32-49-49-105T80-480q0-83 31.5` +\n                    `-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 59-17 115t-49 105l-58-58q22-37` +\n                    ` 33-78t11-84q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 43 11 84t33 78l-58 58Z\"/>` +\n                    `</g>`\n            },\n            title: name,\n            creator: (existing) => EShapeEmbeddedAcceptorEdges.create(existing),\n            editor: EEditorShapeEmbeddedAcceptorEdge\n        });\n    }\n}\n//# sourceMappingURL=e-shape-embedded-acceptor-edges.js.map","import { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nexport class ECommandShapeButtonPropertyIsActive extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.state.isActive;\n        }\n        return false;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.state.isActive = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-button-property-is-active.js.map","import { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nexport class ECommandShapeButtonPropertyIsGrouped extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.isGrouped;\n        }\n        return false;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.isGrouped = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-button-property-is-grouped.js.map","import { EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nexport class ECommandShapeButtonPropertyIsToggle extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeButton) {\n            return shape.isToggle;\n        }\n        return false;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeButton) {\n            shape.isToggle = property;\n        }\n    }\n}\n//# sourceMappingURL=e-command-shape-button-property-is-toggle.js.map","import { DButtonCheckRight, DControllers, DLayoutVertical, DPane, DText, DThemes, EShapeButton } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeButtonPropertyIsActive } from \"./e-command-shape-button-property-is-active\";\nimport { ECommandShapeButtonPropertyIsGrouped } from \"./e-command-shape-button-property-is-grouped\";\nimport { ECommandShapeButtonPropertyIsToggle } from \"./e-command-shape-button-property-is-toggle\";\nexport class EEditorShapeButton extends DPane {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        const selection = options.selection;\n        this._selection = selection;\n        this._diagram = options.diagram;\n        // Layout\n        this.initLayout();\n    }\n    initLayout() {\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                this.newTextLabel(),\n                this.checkIsToggle,\n                this.checkIsGrouped,\n                this.checkIsActive\n            ]\n        });\n        // Selection\n        const selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", () => {\n            this.state.isDisabled = selection.isEmpty();\n            this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    }\n    get checkIsToggle() {\n        var _a;\n        return ((_a = this._checkIsToggle) !== null && _a !== void 0 ? _a : (this._checkIsToggle = this.newCheckIsToggle()));\n    }\n    newCheckIsToggle() {\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsToggleLabel()\n            },\n            on: {\n                active: () => {\n                    this.onCheckIsToggleChanged(true);\n                },\n                inactive: () => {\n                    this.onCheckIsToggleChanged(false);\n                }\n            }\n        });\n    }\n    onCheckIsToggleChanged(isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsToggle(this._selection, isActive));\n    }\n    onSelectionChangeCheckIsToggle(selection) {\n        const state = this.checkIsToggle.state;\n        const last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.isToggle;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    }\n    get checkIsGrouped() {\n        var _a;\n        return ((_a = this._checkIsGrouped) !== null && _a !== void 0 ? _a : (this._checkIsGrouped = this.newCheckIsGrouped()));\n    }\n    newCheckIsGrouped() {\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsGroupedLabel()\n            },\n            on: {\n                active: () => {\n                    this.onCheckIsGroupedChanged(true);\n                },\n                inactive: () => {\n                    this.onCheckIsGroupedChanged(false);\n                }\n            }\n        });\n    }\n    onCheckIsGroupedChanged(isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsGrouped(this._selection, isActive));\n    }\n    onSelectionChangeCheckIsGrouped(selection) {\n        const state = this.checkIsGrouped.state;\n        const last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.isGrouped;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    }\n    get checkIsActive() {\n        var _a;\n        return ((_a = this._checkIsActive) !== null && _a !== void 0 ? _a : (this._checkIsActive = this.newCheckIsActive()));\n    }\n    newCheckIsActive() {\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.subtheme.getCheckIsActiveLabel()\n            },\n            on: {\n                active: () => {\n                    this.onCheckIsActiveChanged(true);\n                },\n                inactive: () => {\n                    this.onCheckIsActiveChanged(false);\n                }\n            }\n        });\n    }\n    onCheckIsActiveChanged(isActive) {\n        DControllers.getCommandController().push(new ECommandShapeButtonPropertyIsActive(this._selection, isActive));\n    }\n    onSelectionChangeCheckIsActive(selection) {\n        const state = this.checkIsActive.state;\n        const last = selection.last();\n        if (last instanceof EShapeButton) {\n            state.lock();\n            state.isActive = last.state.isActive;\n            state.isDisabled = false;\n            state.unlock();\n        }\n        else {\n            state.isDisabled = true;\n        }\n    }\n    onSelectionChange(selection) {\n        this.onSelectionChangeCheckIsToggle(selection);\n        this.onSelectionChangeCheckIsGrouped(selection);\n        this.onSelectionChangeCheckIsActive(selection);\n    }\n    get subtheme() {\n        var _a;\n        return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n    }\n    newSubtheme() {\n        return DThemes.get(\"EEditorShapeButton\");\n    }\n}\n//# sourceMappingURL=e-editor-shape-button.js.map","import { DThemes, EShapeButton, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeButton } from \"./e-editor-shape-button\";\nexport class EShapeButtons {\n    static getTheme() {\n        return DThemes.get(\"EShapeButton\");\n    }\n    static create(existing) {\n        const result = new EShapeButton();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            const label = this.getTheme().getLabel();\n            result.stroke.set(false, 0x3399ff, 1);\n            result.fill.set(true, 0x3399ff, 1);\n            result.text.set(label, 0xffffff, 1);\n            result.cursor = \"pointer\";\n            result.state.isFocusable = true;\n            result.interactive = true;\n        }\n        return result;\n    }\n    static load() {\n        const theme = this.getTheme();\n        const name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeType.BUTTON,\n            name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: `<g transform=\"scale(26.6666)\" fill=\"#fff\" stroke=\"none\">` +\n                    `<path d=\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2` +\n                    `-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z M14.5,19 l1.` +\n                    `09-2.41L18,15.5l-2.41-1.09L14.5,12l-1.09,2.41L11,15.5l2.41,1.0` +\n                    `9L14.5,19z M17,14l0.62-1.38L19,12l-1.38-0.62L17,10l-0.62,1.38 ` +\n                    `L15,12l1.38,0.62L17,14z M14.5,19l1.09-2.41L18,15.5l-2.41-1.09L` +\n                    `14.5,12l-1.09,2.41L11,15.5l2.41,1.09L14.5,19z M17,14l0.62-1.38` +\n                    ` L19,12l-1.38-0.62L17,10l-0.62,1.38L15,12l1.38,0.62L17,14z\"/>` +\n                    `</g>`\n            },\n            title: name,\n            creator: (existing) => EShapeButtons.create(existing),\n            editor: EEditorShapeButton\n        });\n    }\n}\n//# sourceMappingURL=e-shape-buttons.js.map","import { EShapeActionValueShowHideLayer } from \"@wcardinal/wcardinal-ui\";\nexport class EShapeButtonLayerButtonValue {\n    constructor(label, weight, layers, bringToFront, isGrouped, isActive) {\n        this.label = label;\n        this.weight = weight;\n        this.layers = layers;\n        this.bringToFront = bringToFront;\n        this.isGrouped = isGrouped;\n        this.isActive = isActive;\n        this.action = new EShapeActionValueShowHideLayer(\"isActive\", layers, bringToFront);\n    }\n    isEquals(target) {\n        if (this.label !== target.label) {\n            return false;\n        }\n        if (this.weight !== target.weight) {\n            return false;\n        }\n        if (this.bringToFront !== target.bringToFront) {\n            return false;\n        }\n        if (this.isGrouped !== target.isGrouped) {\n            return false;\n        }\n        if (this.isActive !== target.isActive) {\n            return false;\n        }\n        const layers = this.layers;\n        const layersLength = layers.length;\n        const targetLayers = target.layers;\n        if (layersLength !== targetLayers.length) {\n            return false;\n        }\n        for (let i = 0; i < layersLength; ++i) {\n            if (layers[i] !== targetLayers[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    serizlize(manager) {\n        const layersId = this.serializedLayers(manager);\n        const bringToFront = this.bringToFront ? 1 : 0;\n        const isGrouped = this.isGrouped ? 2 : 0;\n        const isActive = this.isActive ? 4 : 0;\n        const type = bringToFront | isGrouped | isActive;\n        return manager.addResource(`[${manager.addResource(this.label)},${this.weight},${layersId},${type}]`);\n    }\n    serializedLayers(manager) {\n        const layers = this.layers;\n        let serialized = \"[\";\n        let delimiter = \"\";\n        for (let i = 0, imax = layers.length; i < imax; ++i) {\n            serialized += delimiter + layers[i];\n            delimiter = \",\";\n        }\n        serialized += \"]\";\n        return manager.addResource(serialized);\n    }\n    static deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeButtonLayerButtonValue(resources[parsed[0]], parsed[1], this.deserializeLayers(parsed[2], manager), !!(parsed[3] & 0x1), !!(parsed[3] & 0x2), !!(parsed[3] & 0x4));\n        }\n        return null;\n    }\n    static deserializeLayers(target, manager) {\n        const result = [];\n        const resources = manager.resources;\n        const resourcesLength = resources.length;\n        if (0 <= target && target < resourcesLength) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            for (let i = 0, imax = parsed.length; i < imax; ++i) {\n                result.push(parsed[i]);\n            }\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=e-shape-button-layer-button-value.js.map","import { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nexport class EShapeButtonLayerButtonValueContainer {\n    constructor(onChange) {\n        this._values = [];\n        this._sizeX = 1;\n        this._margin = 2;\n        this._onChange = onChange;\n    }\n    get values() {\n        return this._values;\n    }\n    get margin() {\n        return this._margin;\n    }\n    set margin(margin) {\n        if (this._margin !== margin) {\n            this._margin = margin;\n            this._onChange();\n        }\n    }\n    add(value, at) {\n        if (at != null) {\n            this._values.splice(at, 0, value);\n        }\n        else {\n            this._values.push(value);\n        }\n        this._onChange();\n    }\n    remove(index) {\n        const values = this._values;\n        if (0 <= index && index < values.length) {\n            const result = values.splice(index, 1)[0];\n            this._onChange();\n            return result;\n        }\n        return null;\n    }\n    indexOf(target) {\n        const values = this._values;\n        // Instance-based matching\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            const value = values[i];\n            if (value === target) {\n                return i;\n            }\n        }\n        // Data-based matching\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            const value = values[i];\n            if (value.isEquals(target)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    get(index) {\n        const result = this._values[index];\n        if (result != null) {\n            return result;\n        }\n        return null;\n    }\n    set(index, value) {\n        this._values[index] = value;\n        this._onChange();\n    }\n    swap(indexA, indexB) {\n        const values = this._values;\n        const tmp = values[indexB];\n        values[indexB] = values[indexA];\n        values[indexA] = tmp;\n        this._onChange();\n    }\n    size() {\n        return this._values.length;\n    }\n    copy(source) {\n        // Values\n        const values = this._values;\n        const sourceValues = source._values;\n        const sourceValuesLength = sourceValues.length;\n        for (let i = 0; i < sourceValuesLength; ++i) {\n            values[i] = sourceValues[i];\n        }\n        if (values.length !== sourceValuesLength) {\n            values.length = sourceValuesLength;\n        }\n        //\n        this._sizeX = source._sizeX;\n        this._onChange();\n        return this;\n    }\n    serialize(manager) {\n        let serialized = \"\";\n        let delimiter = \"[\";\n        const values = this._values;\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            serialized += delimiter + values[i].serizlize(manager);\n            delimiter = \",\";\n        }\n        serialized += delimiter + this._margin + \"]\";\n        return manager.addResource(serialized);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            let isChanged = false;\n            const values = this._values;\n            if (0 < values.length) {\n                values.length = 0;\n                isChanged = true;\n            }\n            for (let i = 0, imax = parsed.length - 1; i < imax; ++i) {\n                const value = EShapeButtonLayerButtonValue.deserialize(parsed[i], manager);\n                if (value != null) {\n                    values.push(value);\n                }\n            }\n            const margin = parsed[parsed.length - 1];\n            if (this._margin !== margin) {\n                this._margin = margin;\n                isChanged = true;\n            }\n            if (0 < values.length) {\n                isChanged = true;\n            }\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-shape-button-layer-button-value-container.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nexport class EShapeButtonLayerIds {\n}\nEShapeButtonLayerIds.ID = EShapeType.EXTENSION + 200;\n//# sourceMappingURL=e-shape-button-layer-ids.js.map","import { EShapeButton, EShapeCopyPart, EShapeCorner, EShapeGroupShadowed, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayerButtonValueContainer } from \"./e-shape-button-layer-button-value-container\";\nimport { EShapeButtonLayerIds } from \"./e-shape-button-layer-ids\";\nexport class EShapeButtonLayer extends EShapeGroupShadowed {\n    constructor(mode, type = EShapeButtonLayerIds.ID) {\n        super(mode, type);\n        this._button = new EShapeButtonLayerButtonValueContainer(() => {\n            this.onButtonValueChange();\n        });\n        this._corner = EShapeCorner.ALL;\n    }\n    get button() {\n        return this._button;\n    }\n    get corner() {\n        return this._corner;\n    }\n    set corner(corner) {\n        if (this._corner !== corner) {\n            this._corner = corner;\n            this.updateUploaded();\n        }\n    }\n    onButtonValueChange() {\n        this.newButtons();\n        this.layoutButtons();\n    }\n    onSizeChange() {\n        super.onSizeChange();\n        this.layoutButtons();\n    }\n    newButtons() {\n        const shapeButton = this.button;\n        const buttonCount = shapeButton.size();\n        const values = shapeButton.values;\n        const children = this.children;\n        const childrenLength = children.length;\n        // Create / delete children\n        if (childrenLength < buttonCount) {\n            const master = 0 < childrenLength ? children[childrenLength - 1] : null;\n            for (let i = childrenLength; i < buttonCount; ++i) {\n                const button = new EShapeButton();\n                const value = values[i];\n                if (master != null) {\n                    button.copy(master);\n                    button.text.value = value.label;\n                }\n                else {\n                    button.stroke.set(false, 0x3399ff, 1);\n                    button.fill.set(true, 0x3399ff, 1);\n                    button.text.set(value.label, 0xffffff, 1);\n                    button.state.isFocusable = true;\n                    button.interactive = true;\n                }\n                if (0 < button.action.size()) {\n                    button.action.set(0, value.action);\n                }\n                else {\n                    button.action.add(value.action);\n                }\n                button.isToggle = true;\n                button.isGrouped = true;\n                button.attach(this);\n            }\n        }\n        else if (buttonCount < childrenLength) {\n            for (let i = childrenLength - 1; buttonCount <= i; --i) {\n                children[i].detach();\n            }\n        }\n        // Update corner, action and state\n        const corner = this.corner;\n        for (let i = 0; i < buttonCount; ++i) {\n            const child = children[i];\n            const value = values[i];\n            child.corner = this.toCorner(i, buttonCount, corner);\n            child.text.value = value.label;\n            if (0 < child.action.size()) {\n                child.action.set(0, value.action);\n            }\n            else {\n                child.action.add(value.action);\n            }\n            child.state.isActive = value.isActive;\n        }\n    }\n    layoutButtons() {\n        const button = this.button;\n        const buttonValues = button.values;\n        const buttonValuesLength = buttonValues.length;\n        const buttonMargin = button.margin;\n        const size = this.size;\n        const sizeX = size.x;\n        const sizeY = size.y;\n        const children = this.children;\n        const childrenLength = children.length;\n        // Total weight\n        let totalWeight = 0;\n        for (let i = 0; i < buttonValuesLength; ++i) {\n            totalWeight += buttonValues[i].weight;\n        }\n        totalWeight = Math.max(0.0001, totalWeight);\n        const buttonSpace = Math.max(0, sizeX - (buttonValuesLength - 1) * buttonMargin);\n        const buttonSpaceFactor = buttonSpace / totalWeight;\n        // Update\n        let x = -sizeX * 0.5;\n        for (let i = 0; i < childrenLength; ++i) {\n            const buttonValue = buttonValues[i];\n            const width = buttonValue.weight * buttonSpaceFactor;\n            const child = children[i];\n            child.lock(EShapeLockPart.ALL);\n            child.size.set(width, sizeY);\n            child.transform.position.set(x + width * 0.5, 0);\n            child.unlock(EShapeLockPart.ALL, true);\n            x += width + buttonMargin;\n        }\n    }\n    toCorner(index, size, corner) {\n        let result = EShapeCorner.NONE;\n        if (index === 0) {\n            result |= EShapeCorner.LEFT & corner;\n        }\n        if (index === size - 1) {\n            result |= EShapeCorner.RIGHT & corner;\n        }\n        return result;\n    }\n    copy(source, part = EShapeCopyPart.ALL) {\n        const result = super.copy(source, part);\n        if (source instanceof EShapeButtonLayer) {\n            this._button.copy(source.button);\n        }\n        return result;\n    }\n    serialize(manager) {\n        const result = super.serialize(manager);\n        const resource = result[15];\n        result[15] = manager.addResource(`[${this._button.serialize(manager)},${resource}]`);\n        return result;\n    }\n}\n//# sourceMappingURL=e-shape-button-layer.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nexport class ECommandShapeButtonLayerValueAdd extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        this._selection = selection;\n        this._value = value;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const value = this._value;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                shape.button.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                shape.button.remove(shape.button.size() - 1);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-button-layer-value-add.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nexport class ECommandShapeButtonLayerValueBringForward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = shape.button.indexOf(target);\n                indices.push(index);\n                if (0 < index) {\n                    shape.button.swap(index - 1, index);\n                }\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = indices[i];\n                if (0 < index) {\n                    shape.button.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-button-layer-value-bring-forward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nexport class ECommandShapeButtonLayerValueMargin extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        const shapes = selection.get();\n        const values = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                values.push(shape.button.margin);\n                shape.button.margin = value;\n            }\n            else {\n                values.push(0);\n            }\n        }\n        this._values = values;\n        this._selection = selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const selection = this._selection;\n        const shapes = selection.get();\n        const values = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const value = values[i];\n                values[i] = shape.button.margin;\n                shape.button.margin = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-button-layer-value-margin.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nexport class ECommandShapeButtonLayerValueRemove extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = shape.button.indexOf(target);\n                indices.push(index);\n                if (0 <= index) {\n                    shape.button.remove(index);\n                }\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.button.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const target = this._target;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.button.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-button-layer-value-remove.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nexport class ECommandShapeButtonLayerValueReplace extends DCommandBase {\n    constructor(oldValue, newValue, selection, list) {\n        super();\n        this._selection = selection;\n        this._oldValue = oldValue;\n        this._newValue = newValue;\n        this._list = list;\n        const indices = [];\n        const oldValues = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = shape.button.indexOf(oldValue);\n                indices.push(index);\n                if (0 <= index) {\n                    oldValues.push(shape.button.get(index));\n                    shape.button.set(index, newValue);\n                }\n                else {\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        this._indices = indices;\n        this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const newValue = this._newValue;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.button.set(index, newValue);\n                }\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const oldValues = this._oldValues;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.button.set(index, oldValues[i]);\n                }\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-button-layer-value-replace.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nexport class ECommandShapeButtonLayerValueSendBackward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const button = shape.button;\n                const index = button.indexOf(target);\n                indices.push(index);\n                if (0 <= index && index < button.size() - 1) {\n                    button.swap(index + 1, index);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeButtonLayer) {\n                const button = shape.button;\n                const index = indices[i];\n                if (0 <= index && index < button.size() - 1) {\n                    button.swap(index + 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-button-layer-value-send-backward.js.map","import { DButtonCheck, DDialogLayered, DInputLabel, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DMenu, DSelectMultiple } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nexport class EDialogShapeButtonLayerValue extends DDialogLayered {\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        result.push(this.inputLabel, this.inputWidth, this.newLayoutOf(theme.getSelectLayerLabel(), this.selectLayer), this.newLayoutOf(null, this.checkBringToFront), this.newLayoutOf(null, this.checkIsGrouped), this.newLayoutOf(null, this.checkIsActive));\n        return result;\n    }\n    newLayoutOf(label, target) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLayoutLabel(label), target, this.newLayoutSpace()]\n        });\n    }\n    newLayoutLabel(label) {\n        if (label != null) {\n            return new DInputLabel({\n                width: 60,\n                text: {\n                    value: label\n                }\n            });\n        }\n        else {\n            return this.newLayoutSpace();\n        }\n    }\n    newLayoutSpace() {\n        return new DLayoutSpace({\n            width: 60\n        });\n    }\n    get inputLabel() {\n        var _a;\n        return ((_a = this._inputLabel) !== null && _a !== void 0 ? _a : (this._inputLabel = this.newInputLabel()));\n    }\n    newInputLabel() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get inputWidth() {\n        var _a;\n        return ((_a = this._inputWidth) !== null && _a !== void 0 ? _a : (this._inputWidth = this.newInputWidth()));\n    }\n    newInputWidth() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                min: 0,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get selectLayer() {\n        var _a;\n        return ((_a = this._selectLayer) !== null && _a !== void 0 ? _a : (this._selectLayer = this.newSelectLayer()));\n    }\n    newSelectLayer() {\n        return new DSelectMultiple({\n            weight: 1\n        });\n    }\n    newSelectLayerMenuItemOptions() {\n        var _a;\n        const diagram = (_a = this.options) === null || _a === void 0 ? void 0 : _a.diagram;\n        if (diagram != null) {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                const result = [];\n                const layers = canvas.layer.children;\n                for (let i = layers.length - 1; 0 <= i; --i) {\n                    const layer = layers[i];\n                    result.push({\n                        value: i,\n                        text: {\n                            value: layer.name\n                        },\n                        check: true\n                    });\n                }\n                return result;\n            }\n        }\n        return [];\n    }\n    get checkBringToFront() {\n        var _a;\n        return ((_a = this._checkBringToFront) !== null && _a !== void 0 ? _a : (this._checkBringToFront = this.newCheckBringToFront()));\n    }\n    newCheckBringToFront() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBringToFromLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    get checkIsGrouped() {\n        var _a;\n        return ((_a = this._checkIsGrouped) !== null && _a !== void 0 ? _a : (this._checkIsGrouped = this.newCheckIsGrouped()));\n    }\n    newCheckIsGrouped() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckIsGroupedLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    get checkIsActive() {\n        var _a;\n        return ((_a = this._checkIsActive) !== null && _a !== void 0 ? _a : (this._checkIsActive = this.newCheckIsActive()));\n    }\n    newCheckIsActive() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckIsActiveLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    reset() {\n        this.inputLabel.input.value = this.theme.newInputLabel();\n        this.inputWidth.input.value = 1;\n        this.selectLayer.values = [];\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        this.checkBringToFront.state.isActive = false;\n        this.checkIsGrouped.state.isActive = true;\n        return this;\n    }\n    get value() {\n        return new EShapeButtonLayerButtonValue(this.inputLabel.input.value, this.inputWidth.input.value, this.selectLayer.values.slice(0), this.checkBringToFront.state.isActive, this.checkIsGrouped.state.isActive, this.checkIsActive.state.isActive);\n    }\n    set value(value) {\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        if (value != null) {\n            this.inputLabel.input.value = value.label;\n            this.inputWidth.input.value = value.weight;\n            this.selectLayer.values = value.layers;\n            this.checkBringToFront.state.isActive = value.bringToFront;\n            this.checkIsGrouped.state.isActive = value.isGrouped;\n            this.checkIsActive.state.isActive = value.isActive;\n        }\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    getType() {\n        return \"EDialogShapeButtonLayerValue\";\n    }\n}\n//# sourceMappingURL=e-dialog-shape-button-layer-value.js.map","import { DButtonAmbient, DControllers, DInputRealAndLabel, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DPane, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeButtonLayerValueAdd } from \"./e-command-shape-button-layer-value-add\";\nimport { ECommandShapeButtonLayerValueBringForward } from \"./e-command-shape-button-layer-value-bring-forward\";\nimport { ECommandShapeButtonLayerValueMargin } from \"./e-command-shape-button-layer-value-margin\";\nimport { ECommandShapeButtonLayerValueRemove } from \"./e-command-shape-button-layer-value-remove\";\nimport { ECommandShapeButtonLayerValueReplace } from \"./e-command-shape-button-layer-value-replace\";\nimport { ECommandShapeButtonLayerValueSendBackward } from \"./e-command-shape-button-layer-value-send-backward\";\nimport { EDialogShapeButtonLayerValue } from \"./e-dialog-shape-button-layer-value\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nexport class EEditorShapeButtonLayer extends DPane {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        const selection = options.selection;\n        this._selection = selection;\n        this._diagram = options.diagram;\n        // Layout\n        this.initLayout();\n    }\n    initLayout() {\n        // Content height\n        this.content.setHeight(\"padding\");\n        // Layout\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        this.newTextLabel(),\n                        this.buttonNew,\n                        this.buttonDelete,\n                        this.buttonBringForward,\n                        this.buttonSendBackward\n                    ]\n                }),\n                this.columnList,\n                this.inputMargin\n            ]\n        });\n        // Selection\n        const selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", () => {\n            this.state.isDisabled = selection.isEmpty();\n            this.onSelectionChange(selection);\n        });\n        const columnList = this.columnList;\n        columnList.data.selection.on(\"change\", () => {\n            this.onListSelectionChange(columnList);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    }\n    get buttonNew() {\n        var _a;\n        return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n    }\n    newButtonNew() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.subtheme.getButtonNewTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonNewActive(opener) {\n        this.dialogButton\n            .reset()\n            .open(opener)\n            .then((value) => {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandShapeButtonLayerValueAdd(value, this._selection));\n            }\n        });\n    }\n    onSelectionChangeButtonNew(selection) {\n        const buttonNew = this.buttonNew;\n        if (selection.last() instanceof EShapeButtonLayer) {\n            buttonNew.state.isDisabled = false;\n        }\n        else {\n            buttonNew.state.isDisabled = true;\n        }\n    }\n    get buttonDelete() {\n        var _a;\n        return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n    }\n    newButtonDelete() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.subtheme.getButtonDeleteTitle(),\n            on: {\n                active: () => {\n                    const columnList = this.columnList;\n                    const first = columnList.data.selection.first;\n                    if (first != null && 1 < columnList.data.size()) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueRemove(first, this._selection));\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonDelete(columnList) {\n        this.buttonDelete.state.isDisabled =\n            columnList.data.size() <= 1 || columnList.data.selection.isEmpty();\n    }\n    get buttonBringForward() {\n        var _a;\n        return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n    }\n    newButtonBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.subtheme.getButtonBringForwardTitle(),\n            on: {\n                active: () => {\n                    const columnList = this.columnList;\n                    const first = columnList.selection.first;\n                    if (first != null && columnList.data.items[0] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueBringForward(first, this._selection));\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonBringForward(columnList) {\n        const first = columnList.data.selection.first;\n        const items = columnList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    }\n    get buttonSendBackward() {\n        var _a;\n        return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n    }\n    newButtonSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.subtheme.getButtonSendBackwardTitle(),\n            on: {\n                active: () => {\n                    const columnList = this.columnList;\n                    const first = columnList.selection.first;\n                    const items = columnList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueSendBackward(first, this._selection));\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonSendBackward(columnList) {\n        const first = columnList.selection.first;\n        const items = columnList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    }\n    get dialogButton() {\n        var _a;\n        return ((_a = this._dialogButton) !== null && _a !== void 0 ? _a : (this._dialogButton = this.newDialogButton()));\n    }\n    newDialogButton() {\n        return new EDialogShapeButtonLayerValue({\n            diagram: this._diagram\n        });\n    }\n    get columnList() {\n        var _a;\n        return ((_a = this._columnList) !== null && _a !== void 0 ? _a : (this._columnList = this.newColumnList()));\n    }\n    newColumnList() {\n        const result = new DList({\n            width: \"100%\",\n            weight: 1,\n            data: {\n                toLabel: (value) => {\n                    return value.label;\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: (e, _, item) => {\n                                this.onColumnListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    }\n    onColumnListDblClick(e, _, item, list) {\n        const oldValue = item.value;\n        if (oldValue != null) {\n            const columnDialog = this.dialogButton;\n            columnDialog.value = oldValue;\n            columnDialog.open(item).then((newValue) => {\n                if (newValue != null) {\n                    DControllers.getCommandController().push(new ECommandShapeButtonLayerValueReplace(oldValue, newValue, this._selection, list));\n                }\n            });\n        }\n    }\n    onSelectionChangeColumnList(selection) {\n        const last = selection.last();\n        const columnList = this.columnList;\n        columnList.data.items = last instanceof EShapeButtonLayer ? last.button.values : [];\n        this.onListSelectionChange(columnList);\n    }\n    get inputMargin() {\n        var _a;\n        return ((_a = this._inputMargin) !== null && _a !== void 0 ? _a : (this._inputMargin = this.newInputMargin()));\n    }\n    newInputMargin() {\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.subtheme.getInputMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: (value) => {\n                        DControllers.getCommandController().push(new ECommandShapeButtonLayerValueMargin(value, this._selection));\n                    }\n                }\n            }\n        });\n    }\n    onSelectionChangeInputRowHeight(selection) {\n        const last = selection.last();\n        const input = this.inputMargin;\n        if (last instanceof EShapeButtonLayer) {\n            input.input.value = last.button.margin;\n            input.state.isDisabled = false;\n        }\n        else {\n            input.state.isDisabled = true;\n        }\n    }\n    onSelectionChange(selection) {\n        this.onSelectionChangeButtonNew(selection);\n        this.onSelectionChangeColumnList(selection);\n    }\n    onListSelectionChange(columnList) {\n        this.onListSelectionChangeButtonDelete(columnList);\n        this.onListSelectionChangeButtonBringForward(columnList);\n        this.onListSelectionChangeButtonSendBackward(columnList);\n    }\n    get subtheme() {\n        var _a;\n        return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n    }\n    newSubtheme() {\n        return DThemes.get(\"EEditorShapeButtonLayer\");\n    }\n}\n//# sourceMappingURL=e-editor-shape-button-layer.js.map","import { createGroupUploaded, deserializeBase, DThemes, EShapeCapability, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeButtonLayer } from \"./e-shape-button-layer\";\nimport { EShapeButtonLayerButtonValue } from \"./e-shape-button-layer-button-value\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EShapeButtonLayerIds } from \"./e-shape-button-layer-ids\";\nimport { EEditorShapeButtonLayer } from \"./e-editor-shape-button-layer\";\nexport class EShapeButtonLayers {\n    static getTheme() {\n        return DThemes.get(\"EShapeButtonLayer\");\n    }\n    static create(existing) {\n        const result = new EShapeButtonLayer(EShapeResourceManagerDeserializationMode.EDITOR);\n        if (existing) {\n            result.copy(existing);\n            if (!(existing instanceof EShapeButtonLayer)) {\n                const label = this.getTheme().getLabel();\n                result.button.add(new EShapeButtonLayerButtonValue(label, 1, [], false, true, false));\n            }\n        }\n        else {\n            const label = this.getTheme().getLabel();\n            result.button.add(new EShapeButtonLayerButtonValue(label, 1, [], false, true, false));\n        }\n        result.onSizeChange();\n        return result;\n    }\n    static load() {\n        const theme = this.getTheme();\n        const name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeButtonLayerIds.ID,\n            name: name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: `<g transform=\"scale(26.6666)\" fill=\"#fff\" stroke=\"none\">` +\n                    `<path d=\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2` +\n                    `-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z\"/>` +\n                    `<path d=\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7` +\n                    `.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16zm0-11.47L17.74 9 12 13.47 6.` +\n                    `26 9 12 4.53z\" transform=\"translate(7.25,8) scale(0.6)\"/>` +\n                    `</g>`\n            },\n            title: name,\n            creator: (existing) => EShapeButtonLayers.create(existing),\n            deserializer: (item, manager) => EShapeButtonLayers.deserialize(item, manager),\n            editor: EEditorShapeButtonLayer,\n            uploaded: createGroupUploaded,\n            capability: (EShapeCapability.PRIMITIVE |\n                EShapeCapability.STROKE_SIDE |\n                EShapeCapability.BORDER_RADIUS) &\n                ~EShapeCapability.CHILDREN\n        });\n    }\n    static deserialize(item, manager) {\n        const shape = new EShapeButtonLayer(manager.mode);\n        const index = item[15];\n        const resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            let parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.button.deserialize(parsed[0], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        const result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    }\n}\n//# sourceMappingURL=e-shape-button-layers.js.map","export class EShapeChartTick {\n    constructor(major, minor) {\n        this.major = major;\n        this.minor = minor;\n    }\n    copy(source) {\n        this.major.copy(source.major);\n        this.minor.copy(source.minor);\n        return this;\n    }\n    serialize(manager) {\n        return manager.addResource(`[${this.major.serialize(manager)},${this.minor.serialize(manager)}]`);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.major.deserialize(parsed[0], manager);\n            this.minor.deserialize(parsed[1], manager);\n        }\n    }\n}\n//# sourceMappingURL=e-shape-chart-tick.js.map","export class EShapeChartTickMajor {\n    constructor(count) {\n        this.count = count;\n    }\n    copy(source) {\n        this.count = source.count;\n        return this;\n    }\n    serialize(manager) {\n        return manager.addResource(`${this.count}`);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.count = parsed;\n        }\n    }\n}\n//# sourceMappingURL=e-shape-chart-tick-major.js.map","export class EShapeChartTickMinor {\n    constructor(count) {\n        this.count = count;\n    }\n    copy(source) {\n        this.count = source.count;\n        return this;\n    }\n    serialize(manager) {\n        return manager.addResource(`${this.count}`);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.count = parsed;\n        }\n    }\n}\n//# sourceMappingURL=e-shape-chart-tick-minor.js.map","import { EShapeChartTick } from \"./e-shape-chart-tick\";\nimport { EShapeChartTickMajor } from \"./e-shape-chart-tick-major\";\nimport { EShapeChartTickMinor } from \"./e-shape-chart-tick-minor\";\nexport class EShapeChartAxisX {\n    constructor() {\n        this.padding = 10;\n        this.tick = new EShapeChartTick(new EShapeChartTickMajor(3), new EShapeChartTickMinor(3));\n    }\n    copy(source) {\n        this.padding = source.padding;\n        this.tick.copy(source.tick);\n        return this;\n    }\n    serialize(manager) {\n        return manager.addResource(`[${this.padding},${this.tick.serialize(manager)}]`);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.padding = parsed[0];\n            this.tick.deserialize(parsed[1], manager);\n        }\n    }\n}\n//# sourceMappingURL=e-shape-chart-axis-x.js.map","import { EShapeChartAxisX } from \"./e-shape-chart-axis-x\";\nexport class EShapeChartAxisY extends EShapeChartAxisX {\n}\n//# sourceMappingURL=e-shape-chart-axis-y.js.map","import { EShapeChartAxisX } from \"./e-shape-chart-axis-x\";\nimport { EShapeChartAxisY } from \"./e-shape-chart-axis-y\";\nexport class EShapeChartAxis {\n    constructor() {\n        this.x = new EShapeChartAxisX();\n        this.y = new EShapeChartAxisY();\n    }\n    copy(source) {\n        this.x.copy(source.x);\n        this.y.copy(source.y);\n        return this;\n    }\n    serialize(manager) {\n        return manager.addResource(`[${this.x.serialize(manager)},${this.y.serialize(manager)}]`);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            this.x.deserialize(parsed[0], manager);\n            this.y.deserialize(parsed[1], manager);\n        }\n    }\n}\n//# sourceMappingURL=e-shape-chart-axis.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nexport class EShapeChartLineIds {\n}\nEShapeChartLineIds.ID = EShapeType.EXTENSION + 0;\nEShapeChartLineIds.PLOT_AREA_ID = \"plot-area\";\nEShapeChartLineIds.LINE_ID = \"line\";\nEShapeChartLineIds.X_AXIS_ID = \"x-axis\";\nEShapeChartLineIds.X_AXIS_TICK_MAJOR_ID = \"x-axis-tick-major\";\nEShapeChartLineIds.X_AXIS_TICK_MINOR_ID = \"x-axis-tick-minor\";\nEShapeChartLineIds.Y_AXIS_ID = \"y-axis\";\nEShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID = \"y-axis-tick-major\";\nEShapeChartLineIds.Y_AXIS_TICK_MINOR_ID = \"y-axis-tick-minor\";\n//# sourceMappingURL=e-shape-chart-line-ids.js.map","import { EShapeCopyPart, EShapeGroup } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartAxis } from \"./e-shape-chart-axis\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nexport class EShapeChartLine extends EShapeGroup {\n    constructor(mode, type = EShapeChartLineIds.ID) {\n        super(mode, type);\n        this.axis = new EShapeChartAxis();\n    }\n    copy(source, part = EShapeCopyPart.ALL) {\n        const result = super.copy(source, part);\n        if (source instanceof EShapeChartLine) {\n            this.axis.copy(source.axis);\n        }\n        return result;\n    }\n    serialize(manager) {\n        const result = super.serialize(manager);\n        const resource = result[15];\n        result[15] = manager.addResource(`[${this.axis.serialize(manager)},${resource}]`);\n        return result;\n    }\n}\n//# sourceMappingURL=e-shape-chart-line.js.map","import { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nexport class ECommandChartAxisXPadding extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.padding;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.padding = property;\n        }\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-chart-axis-x-padding.js.map","import { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nexport class ECommandChartAxisYPadding extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.padding;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.padding = property;\n        }\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-chart-axis-y-padding.js.map","import { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nexport class ECommandChartTickXMajorCount extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.tick.major.count;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.tick.major.count = property;\n        }\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-chart-tick-x-major-count.js.map","import { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nexport class ECommandChartTickXMinorCount extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.x.tick.minor.count;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.x.tick.minor.count = property;\n        }\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-chart-tick-x-minor-count.js.map","import { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nexport class ECommandChartTickYMajorCount extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.tick.major.count;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.tick.major.count = property;\n        }\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-chart-tick-y-major-count.js.map","import { ECommandShapePropertySimple } from \"../../command/e-command-shape-property-simple\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nexport class ECommandChartTickYMinorCount extends ECommandShapePropertySimple {\n    getProperty(shape, capability) {\n        if (shape instanceof EShapeChartLine) {\n            return shape.axis.y.tick.minor.count;\n        }\n        return 0;\n    }\n    setProperty(shape, capability, property) {\n        if (shape instanceof EShapeChartLine) {\n            shape.axis.y.tick.minor.count = property;\n        }\n    }\n    isMergeable() {\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-chart-tick-y-minor-count.js.map","import { createLine, DControllers, DThemes, EShapeBar, EShapeBarPosition, EShapeDefaults, EShapePointsStyle, EShapeRectangle, EShapeTextAlignHorizontal, EShapeTextAlignVertical, EShapeTextDirection } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandChartAxisXPadding } from \"./e-command-chart-axis-x-padding\";\nimport { ECommandChartAxisYPadding } from \"./e-command-chart-axis-y-padding\";\nimport { ECommandChartTickXMajorCount } from \"./e-command-chart-tick-x-major-count\";\nimport { ECommandChartTickXMinorCount } from \"./e-command-chart-tick-x-minor-count\";\nimport { ECommandChartTickYMajorCount } from \"./e-command-chart-tick-y-major-count\";\nimport { ECommandChartTickYMinorCount } from \"./e-command-chart-tick-y-minor-count\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nexport class EShapeChartAxes {\n    static getTheme() {\n        return DThemes.get(\"EShapeChartLine\");\n    }\n    static getPlotArea(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.PLOT_AREA_ID);\n    }\n    static newPlotArea(shape) {\n        const result = new EShapeRectangle();\n        result.id = EShapeChartLineIds.PLOT_AREA_ID;\n        result.size.set(shape.size.x, shape.size.y);\n        result.stroke.enable = false;\n        result.fill.alpha = EShapeDefaults.FILL_ALPHA * 0.5;\n        result.text.value = this.getTheme().newPlotAreaLabel();\n        result.text.align.vertical = EShapeTextAlignVertical.OUTSIDE_TOP;\n        result.attach(shape);\n        return result;\n    }\n    static getLine(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.LINE_ID);\n    }\n    static newLine(shape) {\n        const sx = 0.8 * shape.size.x;\n        const sy = 0.8 * shape.size.y;\n        const sxh = sx * 0.5;\n        const syh = sy * 0.5;\n        const result = createLine([-sxh, +syh, +sxh, -syh], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n        result.id = EShapeChartLineIds.LINE_ID;\n        result.attach(shape);\n        return result;\n    }\n    static getXAxis(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_ID);\n    }\n    static getXAxisTickMajor(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID);\n    }\n    static getXAxisTickMinor(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MINOR_ID);\n    }\n    static newXAxis(shape) {\n        const result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_ID;\n        result.size.set(shape.size.x, 0);\n        result.transform.position.set(0, shape.size.y * 0.5);\n        result.points.position = EShapeBarPosition.LEFT;\n        result.points.size = -1;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = this.getTheme().newXAxisLabel();\n        result.text.align.vertical = EShapeTextAlignVertical.OUTSIDE_BOTTOM;\n        result.text.padding.set(50, 50);\n        result.attach(shape);\n        return result;\n    }\n    static createXAxis(selection) {\n        selection.createChildren((shape) => {\n            return [EShapeChartAxes.newXAxis(shape)];\n        });\n    }\n    static deleteXAxis(selection) {\n        selection.deleteChildren((shape) => {\n            let result = null;\n            const axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                result = [axis];\n            }\n            const major = EShapeChartAxes.getXAxisTickMajor(shape);\n            if (major != null) {\n                if (result == null) {\n                    result = [major];\n                }\n                else {\n                    result.push(major);\n                }\n            }\n            const minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    }\n    static setXAxisPadding(padding, selection) {\n        DControllers.getCommandController().push(new ECommandChartAxisXPadding(selection, padding));\n    }\n    static newXAxisTickMajor(shape) {\n        const result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(0, shape.size.y * 0.5);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = 10;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = \"%YMD\\n%Hms.%mi\";\n        result.text.align.vertical = EShapeTextAlignVertical.TOP;\n        result.text.padding.set(12.5, 12.5);\n        result.attach(shape);\n        return result;\n    }\n    static newXAxisTickMinor(shape, x, y) {\n        const result = new EShapeBar();\n        result.id = EShapeChartLineIds.X_AXIS_TICK_MINOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(x, y);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = 5;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH * 0.5;\n        result.attach(shape);\n        return result;\n    }\n    static createXAxisTickMajor(selection) {\n        selection.createChildren((shape) => {\n            const axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                return [this.newXAxisTickMajor(shape)];\n            }\n            return null;\n        });\n    }\n    static deleteXAxisTickMajor(selection) {\n        selection.deleteChildren((shape) => {\n            let result = null;\n            const major = EShapeChartAxes.getXAxisTickMajor(shape);\n            if (major != null) {\n                result = [major];\n            }\n            const minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    }\n    static setXAxisTickMajorCount(count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickXMajorCount(selection, count));\n    }\n    static createXAxisTickMinor(selection) {\n        selection.createChildren((shape) => {\n            const axis = EShapeChartAxes.getXAxis(shape);\n            if (axis != null) {\n                const sizeX = axis.size.x;\n                const position = axis.transform.position;\n                return [this.newXAxisTickMinor(shape, position.x - sizeX * 0.25, position.y)];\n            }\n            return null;\n        });\n    }\n    static deleteXAxisTickMinor(selection) {\n        selection.deleteChildren((shape) => {\n            const minor = EShapeChartAxes.getXAxisTickMinor(shape);\n            if (minor != null) {\n                return [minor];\n            }\n            return null;\n        });\n    }\n    static setXAxisTickMinorCount(count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickXMinorCount(selection, count));\n    }\n    static getYAxis(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_ID);\n    }\n    static getYAxisTickMajor(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID);\n    }\n    static getYAxisTickMinor(shape) {\n        return UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID);\n    }\n    static newYAxis(shape) {\n        const result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_ID;\n        result.size.set(0, shape.size.y);\n        result.transform.position.set(-shape.size.x * 0.5, 0);\n        result.points.position = EShapeBarPosition.TOP;\n        result.points.size = -1;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = this.getTheme().newYAxisLabel();\n        result.text.align.horizontal = EShapeTextAlignHorizontal.OUTSIDE_LEFT;\n        result.text.direction = EShapeTextDirection.BOTTOM_TO_TOP;\n        result.text.padding.set(50, 50);\n        result.attach(shape);\n        return result;\n    }\n    static createYAxis(selection) {\n        selection.createChildren((shape) => {\n            return [EShapeChartAxes.newYAxis(shape)];\n        });\n    }\n    static deleteYAxis(selection) {\n        selection.deleteChildren((shape) => {\n            let result = null;\n            const axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                result = [axis];\n            }\n            const major = EShapeChartAxes.getYAxisTickMajor(shape);\n            if (major != null) {\n                if (result == null) {\n                    result = [major];\n                }\n                else {\n                    result.push(major);\n                }\n            }\n            const minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    }\n    static setYAxisPadding(padding, selection) {\n        DControllers.getCommandController().push(new ECommandChartAxisYPadding(selection, padding));\n    }\n    static newYAxisTickMajor(shape) {\n        const result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(-shape.size.x * 0.5, 0);\n        result.points.position = EShapeBarPosition.RIGHT;\n        result.points.size = 10;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH;\n        result.text.value = \"%ssi\";\n        result.text.align.horizontal = EShapeTextAlignHorizontal.RIGHT;\n        result.text.padding.set(12.5, 12.5);\n        result.attach(shape);\n        return result;\n    }\n    static newYAxisTickMinor(shape, x, y) {\n        const result = new EShapeBar();\n        result.id = EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID;\n        result.size.set(0, 0);\n        result.transform.position.set(x, y);\n        result.points.position = EShapeBarPosition.RIGHT;\n        result.points.size = 5;\n        result.stroke.width = EShapeDefaults.STROKE_WIDTH * 0.5;\n        result.attach(shape);\n        return result;\n    }\n    static createYAxisTickMajor(selection) {\n        selection.createChildren((shape) => {\n            const axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                return [this.newYAxisTickMajor(shape)];\n            }\n            return null;\n        });\n    }\n    static deleteYAxisTickMajor(selection) {\n        selection.deleteChildren((shape) => {\n            let result = null;\n            const major = EShapeChartAxes.getYAxisTickMajor(shape);\n            if (major != null) {\n                result = [major];\n            }\n            const minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                if (result == null) {\n                    result = [minor];\n                }\n                else {\n                    result.push(minor);\n                }\n            }\n            return result;\n        });\n    }\n    static setYAxisTickMajorCount(count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickYMajorCount(selection, count));\n    }\n    static createYAxisTickMinor(selection) {\n        selection.createChildren((shape) => {\n            const axis = EShapeChartAxes.getYAxis(shape);\n            if (axis != null) {\n                const sizeY = axis.size.y;\n                const position = axis.transform.position;\n                return [this.newYAxisTickMinor(shape, position.x, position.y + sizeY * 0.25)];\n            }\n            return null;\n        });\n    }\n    static deleteYAxisTickMinor(selection) {\n        selection.deleteChildren((shape) => {\n            const minor = EShapeChartAxes.getYAxisTickMinor(shape);\n            if (minor != null) {\n                return [minor];\n            }\n            return null;\n        });\n    }\n    static setYAxisTickMinorCount(count, selection) {\n        DControllers.getCommandController().push(new ECommandChartTickYMinorCount(selection, count));\n    }\n}\n//# sourceMappingURL=e-shape-chart-axes.js.map","import { DButtonCheckRight, DInputInteger, DLayoutHorizontal, DLayoutVertical, DPane, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartAxes } from \"./e-shape-chart-axes\";\nexport class EEditorShapeChartLine extends DPane {\n    constructor(options) {\n        super(options);\n        const selection = options.selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", () => {\n            this.state.isDisabled = selection.isEmpty();\n        });\n        const subtheme = this.subtheme;\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisLabel()\n                    },\n                    padding: 0,\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: (self) => {\n                            const update = () => {\n                                const last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    self.state.isActive = EShapeChartAxes.getXAxis(last) != null;\n                                    self.state.isDisabled = false;\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: () => {\n                            EShapeChartAxes.createXAxis(selection);\n                        },\n                        inactive: () => {\n                            EShapeChartAxes.deleteXAxis(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisMajorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: (self) => {\n                            const update = () => {\n                                const last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getXAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getXAxisTickMajor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: () => {\n                            EShapeChartAxes.createXAxisTickMajor(selection);\n                        },\n                        inactive: () => {\n                            EShapeChartAxes.deleteXAxisTickMajor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckXAxisMinorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: (self) => {\n                            const update = () => {\n                                const last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getXAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getXAxisTickMinor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: () => {\n                            EShapeChartAxes.createXAxisTickMinor(selection);\n                        },\n                        inactive: () => {\n                            EShapeChartAxes.deleteXAxisTickMinor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisLabel()\n                    },\n                    padding: 0,\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: (self) => {\n                            const update = () => {\n                                const last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    self.state.isActive = EShapeChartAxes.getYAxis(last) != null;\n                                    self.state.isDisabled = false;\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: () => {\n                            EShapeChartAxes.createYAxis(selection);\n                        },\n                        inactive: () => {\n                            EShapeChartAxes.deleteYAxis(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisMajorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: (self) => {\n                            const update = () => {\n                                const last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getYAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getYAxisTickMajor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: () => {\n                            EShapeChartAxes.createYAxisTickMajor(selection);\n                        },\n                        inactive: () => {\n                            EShapeChartAxes.deleteYAxisTickMajor(selection);\n                        }\n                    }\n                }),\n                new DButtonCheckRight({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getCheckYAxisMinorTickLabel()\n                    },\n                    padding: {\n                        top: 0,\n                        right: 0,\n                        left: 10,\n                        bottom: 0\n                    },\n                    background: {\n                        color: null\n                    },\n                    on: {\n                        init: (self) => {\n                            const update = () => {\n                                const last = selection.last();\n                                if (last instanceof EShapeChartLine) {\n                                    if (EShapeChartAxes.getYAxis(last) != null) {\n                                        self.state.isActive =\n                                            EShapeChartAxes.getYAxisTickMinor(last) != null;\n                                        self.state.isDisabled = false;\n                                    }\n                                    else {\n                                        self.state.isDisabled = true;\n                                    }\n                                }\n                                else {\n                                    self.state.isDisabled = true;\n                                }\n                            };\n                            update();\n                            selection.on(\"change\", update);\n                        },\n                        active: () => {\n                            EShapeChartAxes.createYAxisTickMinor(selection);\n                        },\n                        inactive: () => {\n                            EShapeChartAxes.deleteYAxisTickMinor(selection);\n                        }\n                    }\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextMajorTickCountLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: (self) => {\n                                    const update = () => {\n                                        const last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.tick.major.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: (count) => {\n                                    EShapeChartAxes.setXAxisTickMajorCount(count, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: (self) => {\n                                    const update = () => {\n                                        const last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.tick.major.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: (count) => {\n                                    EShapeChartAxes.setYAxisTickMajorCount(count, selection);\n                                }\n                            }\n                        })\n                    ]\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextMinorTickCountLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: (self) => {\n                                    const update = () => {\n                                        const last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.tick.minor.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: (count) => {\n                                    EShapeChartAxes.setXAxisTickMinorCount(count, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: (self) => {\n                                    const update = () => {\n                                        const last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.tick.minor.count;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: (count) => {\n                                    EShapeChartAxes.setYAxisTickMinorCount(count, selection);\n                                }\n                            }\n                        })\n                    ]\n                }),\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: subtheme.getTextPaddingLabel()\n                    }\n                }),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: (self) => {\n                                    const update = () => {\n                                        const last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.x.padding;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: (padding) => {\n                                    EShapeChartAxes.setXAxisPadding(padding, selection);\n                                }\n                            }\n                        }),\n                        new DInputInteger({\n                            weight: 1,\n                            min: 0,\n                            on: {\n                                init: (self) => {\n                                    const update = () => {\n                                        const last = selection.last();\n                                        if (last instanceof EShapeChartLine) {\n                                            self.value = last.axis.y.padding;\n                                        }\n                                    };\n                                    update();\n                                    selection.on(\"change\", update);\n                                },\n                                change: (padding) => {\n                                    EShapeChartAxes.setYAxisPadding(padding, selection);\n                                }\n                            }\n                        })\n                    ]\n                })\n            ],\n            on: {\n                init: (self) => {\n                    const update = () => {\n                        self.state.isDisabled = !(selection.last() instanceof EShapeChartLine);\n                    };\n                    update();\n                    selection.on(\"change\", update);\n                }\n            }\n        });\n    }\n    newTextLabel() {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    }\n    get subtheme() {\n        var _a;\n        return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n    }\n    newSubtheme() {\n        return DThemes.get(\"EEditorShapeChartLine\");\n    }\n}\n//# sourceMappingURL=e-editor-shape-chart-line.js.map","import { NumberFormatters, EShapeActionRuntimeBase, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nexport class EShapeChartLineActionRuntime extends EShapeActionRuntimeBase {\n    constructor(shape) {\n        super();\n        // Lines\n        const line = UtilShapeSearch.findChildById(shape, \"line\");\n        if (line != null) {\n            const data = shape.data;\n            if (data.size() <= 0) {\n                line.detach();\n                this.lines = [];\n            }\n            else {\n                const lines = [line];\n                for (let i = 1, imax = data.size(); i < imax; ++i) {\n                    const cloned = line.clone();\n                    cloned.attach(shape);\n                    lines.push(cloned);\n                }\n                this.lines = lines;\n            }\n        }\n        else {\n            this.lines = [];\n        }\n        // Ticks\n        let xmajorCount = 3;\n        let ymajorCount = 3;\n        let xminorCount = 3;\n        let yminorCount = 3;\n        if (shape instanceof EShapeChartLine) {\n            xmajorCount = shape.axis.x.tick.major.count;\n            ymajorCount = shape.axis.y.tick.major.count;\n            xminorCount = shape.axis.x.tick.minor.count;\n            yminorCount = shape.axis.y.tick.minor.count;\n        }\n        this.xmajorCount = xmajorCount;\n        this.ymajorCount = ymajorCount;\n        this.xminorCount = xminorCount;\n        this.yminorCount = yminorCount;\n        this.xmajors = this.initTicks(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID, xmajorCount);\n        this.ymajors = this.initTicks(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID, ymajorCount);\n        this.xminors = this.initTicks(shape, EShapeChartLineIds.X_AXIS_TICK_MINOR_ID, (xmajorCount + 1) * xminorCount);\n        this.yminors = this.initTicks(shape, EShapeChartLineIds.Y_AXIS_TICK_MINOR_ID, (ymajorCount + 1) * yminorCount);\n        this.workMajorPositions = new Float64Array(Math.max(xmajorCount, ymajorCount));\n        // Tick format\n        const xtick = UtilShapeSearch.findChildById(shape, EShapeChartLineIds.X_AXIS_TICK_MAJOR_ID);\n        this.xformatter = NumberFormatters.create(xtick != null ? xtick.text.value : \"\");\n        const ytick = UtilShapeSearch.findChildById(shape, EShapeChartLineIds.Y_AXIS_TICK_MAJOR_ID);\n        this.yformatter = NumberFormatters.create(ytick != null ? ytick.text.value : \"\");\n        // Plot area\n        this.plotArea = UtilShapeSearch.findChildById(shape, \"plot-area\");\n        // Padding\n        let xpadding = 10;\n        let ypadding = 10;\n        if (shape instanceof EShapeChartLine) {\n            xpadding = shape.axis.x.padding;\n            ypadding = shape.axis.y.padding;\n        }\n        this.xpadding = xpadding;\n        this.ypadding = ypadding;\n    }\n    initTicks(shape, id, count) {\n        const tick = UtilShapeSearch.findChildById(shape, id);\n        if (tick != null) {\n            if (count <= 0) {\n                tick.detach();\n                return [];\n            }\n            else {\n                const ticks = [tick];\n                for (let i = 1; i < count; ++i) {\n                    const cloned = tick.clone();\n                    cloned.attach(shape);\n                    ticks.push(cloned);\n                }\n                return ticks;\n            }\n        }\n        else {\n            return [];\n        }\n    }\n    toStepScale(scale) {\n        if (5.5 <= scale) {\n            return 10;\n        }\n        else if (2.2 <= scale) {\n            return 5;\n        }\n        else if (1.1 <= scale) {\n            return 2;\n        }\n        return 1;\n    }\n    getStep(min, max, count) {\n        if (count <= 0 || max <= min) {\n            return -1;\n        }\n        // Calculate the step\n        const span = (max - min) / count;\n        const power = Math.floor(Math.log(span) / Math.LN10);\n        const base = Math.pow(10, power);\n        return this.toStepScale(span / base) * base;\n    }\n    getTickPositions(min, max, count, step, padding, ratio, result) {\n        if (count <= 0) {\n            return result;\n        }\n        if (max <= min || step <= 0) {\n            result[0] = min;\n            for (let i = 1; i < count; ++i) {\n                result[i] = NaN;\n            }\n            return result;\n        }\n        // Set positions\n        const start = min / step;\n        let istart = Math.floor(start);\n        const dstart = start - istart;\n        if (padding < dstart * step * ratio) {\n            istart = Math.ceil(start);\n        }\n        const stop = max / step;\n        let istop = Math.ceil(stop);\n        const dstop = istop - stop;\n        if (padding < dstop * step * ratio) {\n            istop = Math.floor(stop);\n        }\n        const nticks = Math.min(count, Math.ceil(istop - istart + 1));\n        for (let i = 0; i < nticks; ++i) {\n            result[i] = (istart + i) * step;\n        }\n        for (let i = nticks; i < count; ++i) {\n            result[i] = NaN;\n        }\n        //\n        return result;\n    }\n    updateTicksXMinor(mstep, index, position, min, ratio, lmin, lmax) {\n        const mticks = this.xminors;\n        if (0 < mticks.length) {\n            const minorCount = this.xminorCount;\n            if (0 < mstep) {\n                const padding = this.xpadding;\n                if (index < 0) {\n                    for (let i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        const mtick = mticks[j];\n                        const x = (position - (minorCount - i) * mstep - min) * ratio + lmin;\n                        if (lmin - padding <= x) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.x = x;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n                else {\n                    for (let i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        const mtick = mticks[j];\n                        const x = (position + (i + 1) * mstep - min) * ratio + lmin;\n                        if (x <= lmax + padding) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.x = x;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n            }\n            else {\n                for (let i = (index + 1) * minorCount, imax = i + minorCount; i < imax; ++i) {\n                    mticks[i].visible = false;\n                }\n            }\n        }\n    }\n    toStepMinor(step, minorCount) {\n        if (0 <= step) {\n            return step / (minorCount + 1);\n        }\n        else {\n            return -1;\n        }\n    }\n    updateTicksX(min, max, ratio, lmin, lmax) {\n        const ticks = this.xmajors;\n        const mticks = this.xminors;\n        const minorCount = this.xminorCount;\n        const padding = this.xpadding;\n        // Major tick positions\n        const step = this.getStep(min, max, ticks.length);\n        const positions = this.getTickPositions(min, max, ticks.length, step, padding, ratio, this.workMajorPositions);\n        // First minors\n        const mstep = this.toStepMinor(step, minorCount);\n        this.updateTicksXMinor(mstep, -1, positions[0], min, ratio, lmin, lmax);\n        // Major and minor ticks\n        for (let i = 0, imax = ticks.length; i < imax; ++i) {\n            const tick = ticks[i];\n            const position = positions[i];\n            if (position === position) {\n                // Major tick\n                tick.lock(EShapeLockPart.UPLOADED);\n                tick.visible = true;\n                tick.transform.position.x = (position - min) * ratio + lmin;\n                tick.text.value = this.xformatter.format(position, step);\n                tick.unlock(EShapeLockPart.UPLOADED, true);\n                // Minor ticks\n                this.updateTicksXMinor(mstep, i, positions[i], min, ratio, lmin, lmax);\n            }\n            else {\n                // Major tick\n                tick.visible = false;\n                // Minor ticks\n                if (0 < mticks.length) {\n                    for (let j = (i + 1) * minorCount, jmax = j + minorCount; j < jmax; ++j) {\n                        mticks[j].visible = false;\n                    }\n                }\n            }\n        }\n    }\n    updateTicksYMinor(mstep, index, position, min, ratio, lmin, lmax) {\n        const mticks = this.yminors;\n        if (0 < mticks.length) {\n            const minorCount = this.yminorCount;\n            if (0 < mstep) {\n                const padding = this.ypadding;\n                if (index < 0) {\n                    for (let i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        const mtick = mticks[j];\n                        const y = lmax - (position - (minorCount - i) * mstep - min) * ratio;\n                        if (y <= lmax + padding) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.y = y;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n                else {\n                    for (let i = 0, j = (index + 1) * minorCount; i < minorCount; i += 1, j += 1) {\n                        const mtick = mticks[j];\n                        const y = lmax - (position + (i + 1) * mstep - min) * ratio;\n                        if (lmin - padding <= y) {\n                            mtick.lock(EShapeLockPart.UPLOADED);\n                            mtick.visible = true;\n                            mtick.transform.position.y = y;\n                            mtick.unlock(EShapeLockPart.UPLOADED, true);\n                        }\n                        else {\n                            mtick.visible = false;\n                        }\n                    }\n                }\n            }\n            else {\n                for (let i = (index + 1) * minorCount, imax = i + minorCount; i < imax; ++i) {\n                    mticks[i].visible = false;\n                }\n            }\n        }\n    }\n    updateTicksY(min, max, ratio, lmin, lmax) {\n        const ticks = this.ymajors;\n        const mticks = this.yminors;\n        const minorCount = this.yminorCount;\n        const padding = this.ypadding;\n        // Major tick positions\n        const step = this.getStep(min, max, ticks.length);\n        const positions = this.getTickPositions(min, max, ticks.length, step, padding, ratio, this.workMajorPositions);\n        // First minors\n        const mstep = this.toStepMinor(step, minorCount);\n        this.updateTicksYMinor(mstep, -1, positions[0], min, ratio, lmin, lmax);\n        // Major and minor ticks\n        for (let i = 0, imax = ticks.length; i < imax; ++i) {\n            const tick = ticks[i];\n            const position = positions[i];\n            if (position === position) {\n                // Major tick\n                tick.lock(EShapeLockPart.UPLOADED);\n                tick.visible = true;\n                tick.transform.position.y = lmax - (position - min) * ratio;\n                tick.text.value = this.yformatter.format(position, step);\n                tick.unlock(EShapeLockPart.UPLOADED, true);\n                // Minor ticks\n                this.updateTicksYMinor(mstep, i, positions[i], min, ratio, lmin, lmax);\n            }\n            else {\n                // Major tick\n                tick.visible = false;\n                // Minor ticks\n                if (0 < mticks.length) {\n                    for (let j = (i + 1) * minorCount, jmax = j + minorCount; j < jmax; ++j) {\n                        mticks[j].visible = false;\n                    }\n                }\n            }\n        }\n    }\n    updateLines(data, xmin, xratio, lxmin, ymin, yratio, lymax) {\n        const lines = this.lines;\n        for (let i = 0, imax = Math.min(lines.length, data.size()); i < imax; ++i) {\n            const value = data.get(i);\n            if (value != null) {\n                const line = lines[i];\n                const points = line.points;\n                if (points != null) {\n                    const pointsValues = points.values;\n                    const valueValues = value.values;\n                    const valueValuesLength = valueValues.length;\n                    if (2 <= valueValuesLength) {\n                        const valueTimes = value.times;\n                        const valueTimesLength = valueTimes.length;\n                        if (valueTimesLength < valueValuesLength) {\n                            // Index mode\n                            for (let j = 0; j < valueValuesLength; ++j) {\n                                const index = j << 1;\n                                pointsValues[index + 0] = (j + 1 - xmin) * xratio + lxmin;\n                                pointsValues[index + 1] = lymax - (valueValues[j] - ymin) * yratio;\n                            }\n                        }\n                        else {\n                            // Time mode\n                            for (let j = 0; j < valueValuesLength; ++j) {\n                                const index = j << 1;\n                                pointsValues[index + 0] = (valueTimes[j] - xmin) * xratio + lxmin;\n                                pointsValues[index + 1] = lymax - (valueValues[j] - ymin) * yratio;\n                            }\n                        }\n                        line.lock(EShapeLockPart.UPLOADED);\n                        line.visible = true;\n                        points.values = pointsValues;\n                        line.unlock(EShapeLockPart.UPLOADED, true);\n                    }\n                    else {\n                        line.visible = false;\n                    }\n                }\n            }\n        }\n    }\n    execute(shape, runtime, time) {\n        const data = shape.data;\n        if (data.isChanged) {\n            // Calculate the plot range in the time-value coordinate\n            let xmin = +Infinity;\n            let xmax = -Infinity;\n            let ymin = +Infinity;\n            let ymax = -Infinity;\n            for (let i = 0, imax = data.size(); i < imax; ++i) {\n                const value = data.get(i);\n                if (value != null) {\n                    const values = value.values;\n                    const valuesLength = values.length;\n                    const times = value.times;\n                    const timesLength = times.length;\n                    // X\n                    if (timesLength < valuesLength) {\n                        // Index mode\n                        if (1 < xmin) {\n                            xmin = 1;\n                        }\n                        if (xmax < valuesLength) {\n                            xmax = valuesLength;\n                        }\n                    }\n                    else {\n                        // Time mode\n                        for (let j = 0; j < timesLength; ++j) {\n                            const t = times[j];\n                            if (t < xmin) {\n                                xmin = t;\n                            }\n                            if (xmax < t) {\n                                xmax = t;\n                            }\n                        }\n                    }\n                    // Y\n                    for (let j = 0; j < valuesLength; ++j) {\n                        const v = values[j];\n                        if (v < ymin) {\n                            ymin = v;\n                        }\n                        if (ymax < v) {\n                            ymax = v;\n                        }\n                    }\n                }\n            }\n            if (xmax < xmin) {\n                xmin = 0;\n                xmax = 1;\n            }\n            else if (xmax <= xmin) {\n                xmax = xmin + 1;\n            }\n            if (ymax < ymin) {\n                ymax = 1;\n                ymin = 0;\n            }\n            else if (ymax <= ymin) {\n                ymax = ymin + 1;\n            }\n            const xspan = xmax - xmin;\n            const yspan = ymax - ymin;\n            // Calculate plot range in the local coordinate\n            const plotArea = this.plotArea;\n            const size = plotArea != null ? plotArea.size : shape.size;\n            const sx = size.x * 0.5;\n            const sy = size.y * 0.5;\n            const xpadding = this.xpadding;\n            const ypadding = this.ypadding;\n            const lxmin = -sx + xpadding;\n            let lxmax = +sx - xpadding;\n            const lymin = -sy + ypadding;\n            let lymax = +sy - ypadding;\n            if (lxmax <= lxmin) {\n                lxmax = lxmin + 1;\n            }\n            if (lymax <= lymin) {\n                lymax = lymin + 1;\n            }\n            const lxspan = lxmax - lxmin;\n            const lyspan = lymax - lymin;\n            // x (in the time-value coordinate)\n            // lx (in the local coordinate)\n            // lx = (x - xmin) / (xmax - xmin) * (lxmax - lxmin) + lxmin\n            //    = (x - xmin) * xratio + lxmin\n            // where xratio := (lxmax - lxmin) / (xmax - xmin)\n            //\n            // Please note thay the y coordinate in the local coordinate is upside down.\n            // Namely, ly = lymax - (y - ymin) * yratio.\n            const xratio = lxspan / xspan;\n            const yratio = lyspan / yspan;\n            // X ticks\n            this.updateTicksX(xmin, xmax, xratio, lxmin, lxmax);\n            // Y ticks\n            this.updateTicksY(ymin, ymax, yratio, lymin, lymax);\n            // Lines\n            this.updateLines(data, xmin, xratio, lxmin, ymin, yratio, lymax);\n        }\n    }\n}\n//# sourceMappingURL=e-shape-chart-line-action-runtime.js.map","import { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLineActionRuntime } from \"./e-shape-chart-line-action-runtime\";\nexport class EShapeChartLineRuntime extends EShapeRuntimeImpl {\n    constructor(shape) {\n        super(shape);\n        this.actions.push(new EShapeChartLineActionRuntime(shape));\n    }\n}\n//# sourceMappingURL=e-shape-chart-line-runtime.js.map","import { deserializeBase, DThemes, EShapeResourceManagerDeserializationMode } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeChartLine } from \"./e-shape-chart-line\";\nimport { EShapeChartLineIds } from \"./e-shape-chart-line-ids\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EEditorShapeChartLine } from \"./e-editor-shape-chart-line\";\nimport { EShapeChartLineRuntime } from \"./e-shape-chart-line-runtime\";\nimport { EShapeChartAxes } from \"./e-shape-chart-axes\";\nexport class EShapeChartLines {\n    static getTheme() {\n        return DThemes.get(\"EShapeChartLine\");\n    }\n    static deserialize(item, manager) {\n        const shape = new EShapeChartLine(manager.mode);\n        const index = item[15];\n        const resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            let parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.axis.deserialize(parsed[0], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        const result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    }\n    static create(existing) {\n        const result = new EShapeChartLine(EShapeResourceManagerDeserializationMode.EDITOR);\n        if (existing) {\n            result.copy(existing);\n        }\n        // Plot area\n        EShapeChartAxes.newPlotArea(result);\n        // Line\n        EShapeChartAxes.newLine(result);\n        // Axis\n        EShapeChartAxes.newXAxis(result);\n        EShapeChartAxes.newXAxisTickMajor(result);\n        EShapeChartAxes.newYAxis(result);\n        EShapeChartAxes.newYAxisTickMajor(result);\n        if (existing instanceof EShapeChartLine) {\n            result.axis.copy(existing.axis);\n        }\n        return result;\n    }\n    static load() {\n        const theme = this.getTheme();\n        const name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeChartLineIds.ID,\n            name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: `<g transform=\"scale(26.6666)\" fill=\"#fff\" stroke=\"none\">` +\n                    `<path d=\"M23,8c0,1.1-0.9,2-2,2c-0.18,0-0.35-0.02-0.51-0.07l-3.56,` +\n                    `3.55C16.98,13.64,17,13.82,17,14c0,1.1-0.9,2-2,2s-2-0.9-2-2 c0-0.1` +\n                    `8,0.02-0.36,0.07-0.52l-2.55-2.55C10.36,10.98,10.18,11,10,11c-0.18` +\n                    `,0-0.36-0.02-0.52-0.07l-4.55,4.56 C4.98,15.65,5,15.82,5,16c0,1.1-` +\n                    `0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2c0.18,0,0.35,0.02,0.51,0.07l4.56-4.` +\n                    `55C8.02,9.36,8,9.18,8,9 c0-1.1,0.9-2,2-2s2,0.9,2,2c0,0.18-0.02,0.` +\n                    `36-0.07,0.52l2.55,2.55C14.64,12.02,14.82,12,15,12c0.18,0,0.36,0.0` +\n                    `2,0.52,0.07 l3.55-3.56C19.02,8.35,19,8.18,19,8c0-1.1,0.9-2,2-2S23` +\n                    `,6.9,23,8z\"/>` +\n                    `</g>`\n            },\n            title: name,\n            creator: (existing) => EShapeChartLines.create(existing),\n            editor: EEditorShapeChartLine,\n            deserializer: (item, manager) => EShapeChartLines.deserialize(item, manager),\n            runtime: EShapeChartLineRuntime\n        });\n    }\n}\n//# sourceMappingURL=e-shape-chart-lines.js.map","import { DThemes, EShapeActionValueChangeColor, EShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType, EShapeActionValueMiscInput, EShapeActionValueMiscType, EShapeActionValueOnInputAction, EShapeDefaults, EShapeRectangleRounded } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nexport class EShapeInputs {\n    static getTheme() {\n        return DThemes.get(\"EShapeInput\");\n    }\n    static create(existing) {\n        const result = new EShapeRectangleRounded();\n        if (existing) {\n            result.copy(existing);\n        }\n        else {\n            result.stroke.set(true, EShapeDefaults.STROKE_COLOR, 1, 1);\n            result.fill.set(true, 0xffffff, 1);\n            result.text.set(this.getTheme().getLabel());\n            result.cursor = \"text\";\n            result.state.isFocusable = true;\n            result.interactive = true;\n        }\n        result.action.add(new EShapeActionValueMiscInput(EShapeActionValueMiscType.INPUT_TEXT, '\"ALWAYS\"', \"\", EShapeActionValueOnInputAction.EMIT_EVENT));\n        result.action.add(new EShapeActionValueChangeColor(EShapeActionValueChangeColorType.STROKE, \"inFocused\", EShapeActionValueChangeColorTarget.COLOR, EShapeDefaults.HIGHLIGHT_COLOR, 0, \"\"));\n        result.action.add(new EShapeActionValueChangeColor(EShapeActionValueChangeColorType.TEXT, \"inDisabled\", EShapeActionValueChangeColorTarget.ALPHA, 0, 0.5, \"\"));\n        return result;\n    }\n    static load() {\n        const theme = this.getTheme();\n        const name = theme.getName();\n        EShapeExtensions.add({\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: `<g transform=\"scale(26.6666)\" fill=\"#fff\" stroke=\"none\">` +\n                    `<path d=\"M22,9v6c0,1.1-0.9,2-2,2h-1l0-2h1V9H4v6h6v2H4c-1.1,0-2` +\n                    `-0.9-2-2V9c0-1.1,0.9-2,2-2h16C21.1,7,22,7.9,22,9z\"/>` +\n                    `<path d=\"M5 4v3h5.5v12h3V7H19V4H5z\" transform=\"translate(7.25,8.5) scale(0.6)\" />` +\n                    `</g>`\n            },\n            title: name,\n            creator: (existing) => EShapeInputs.create(existing)\n        });\n    }\n}\n//# sourceMappingURL=e-shape-inputs.js.map","export class EShapeTableCell {\n    constructor(parent) {\n        this._parent = parent;\n    }\n    get values() {\n        const parent = this._parent;\n        const values = parent.data.values;\n        const columnValues = parent.column.values;\n        const result = [];\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            const value = values[i];\n            const row = [];\n            for (let j = 0, jmax = columnValues.length; j < jmax; ++j) {\n                const columnValue = columnValues[j];\n                const columnValueRuntime = columnValue.runtime;\n                if (columnValueRuntime != null) {\n                    row.push(columnValueRuntime.toValue(value, j, values));\n                }\n            }\n            result.push(row);\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=e-shape-table-cell.js.map","export class EShapeTableColumnValueBody {\n    isEquals(target) {\n        return true;\n    }\n    serialize(manager) {\n        return -1;\n    }\n    static deserialize(target, manager) {\n        return new EShapeTableColumnValueBody();\n    }\n}\n//# sourceMappingURL=e-shape-table-column-value-body.js.map","export class EShapeTableColumnValueHeader {\n    constructor(label) {\n        this.label = label;\n    }\n    isEquals(target) {\n        return this.label === target.label;\n    }\n    serialize(manager) {\n        const labelId = manager.addResource(this.label);\n        return manager.addResource(`[${labelId}]`);\n    }\n    static deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeTableColumnValueHeader(resources[parsed[0]]);\n        }\n        return new EShapeTableColumnValueHeader(\"\");\n    }\n}\n//# sourceMappingURL=e-shape-table-column-value-header.js.map","import { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nexport const EShapeTableColumnValueType = {\n    TEXT: 0,\n    NUMBER: 1\n};\nexport class EShapeTableColumnValue {\n    constructor(weight, type, getter, setter, format, align, header, body) {\n        this.weight = weight;\n        this.type = type;\n        this.getter = getter;\n        this.setter = setter;\n        this.format = format;\n        this.align = align;\n        this.header = header;\n        this.body = body;\n    }\n    isEquals(target) {\n        return (this.weight === target.weight &&\n            this.type === target.type &&\n            this.getter === target.getter &&\n            this.setter === target.setter &&\n            this.format === target.format &&\n            this.align === target.align &&\n            this.header.isEquals(target.header) &&\n            this.body.isEquals(target.body));\n    }\n    toLabel() {\n        return this.header.label;\n    }\n    serialize(manager) {\n        const getterId = manager.addResource(this.getter);\n        const setterId = manager.addResource(this.setter);\n        const formatterId = manager.addResource(this.format);\n        const headerId = this.header.serialize(manager);\n        const bodyId = this.body.serialize(manager);\n        return manager.addResource(`[${this.weight},${this.type},${getterId},${setterId},` +\n            `${formatterId},${this.align},-1,${headerId},${bodyId}]`);\n    }\n    static deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            return new EShapeTableColumnValue(parsed[0], parsed[1], resources[parsed[2]], resources[parsed[3]], resources[parsed[4]], parsed[5], EShapeTableColumnValueHeader.deserialize(parsed[7], manager), EShapeTableColumnValueBody.deserialize(parsed[8], manager));\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=e-shape-table-column-value.js.map","import { EShapeTableColumnValue } from \"./e-shape-table-column-value\";\nexport class EShapeTableColumn {\n    constructor(onChange) {\n        this.values = [];\n        this._sizeX = 1;\n        this._onChange = onChange;\n    }\n    add(value, at) {\n        if (at != null) {\n            this.values.splice(at, 0, value);\n        }\n        else {\n            this.values.push(value);\n        }\n        this._onChange();\n    }\n    remove(index) {\n        const values = this.values;\n        if (0 <= index && index < values.length) {\n            const result = values.splice(index, 1)[0];\n            this._onChange();\n            return result;\n        }\n        return null;\n    }\n    indexOf(target) {\n        const values = this.values;\n        // Instance-based matching\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            const value = values[i];\n            if (value === target) {\n                return i;\n            }\n        }\n        // Data-based matching\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            const value = values[i];\n            if (value.isEquals(target)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    get(index) {\n        const result = this.values[index];\n        if (result != null) {\n            return result;\n        }\n        return null;\n    }\n    set(index, value) {\n        this.values[index] = value;\n        this._onChange();\n    }\n    swap(indexA, indexB) {\n        const values = this.values;\n        const tmp = values[indexB];\n        values[indexB] = values[indexA];\n        values[indexA] = tmp;\n        this._onChange();\n    }\n    size() {\n        return this.values.length;\n    }\n    copy(source) {\n        // Values\n        const values = this.values;\n        const sourceValues = source.values;\n        const sourceValuesLength = sourceValues.length;\n        for (let i = 0; i < sourceValuesLength; ++i) {\n            values.push(sourceValues[i]);\n        }\n        if (values.length !== sourceValuesLength) {\n            values.length = sourceValuesLength;\n        }\n        //\n        this._sizeX = source._sizeX;\n        this._onChange();\n        return this;\n    }\n    serialize(manager) {\n        let serialized = \"\";\n        let delimiter = \"[\";\n        const values = this.values;\n        for (let i = 0, imax = values.length; i < imax; ++i) {\n            const value = values[i];\n            serialized += delimiter + value.serialize(manager);\n            delimiter = \",\";\n        }\n        serialized += \"]\";\n        return manager.addResource(serialized);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            let isChanged = false;\n            const values = this.values;\n            if (0 < values.length) {\n                values.length = 0;\n                isChanged = true;\n            }\n            for (let i = 0, imax = parsed.length; i < imax; ++i) {\n                const value = EShapeTableColumnValue.deserialize(parsed[i], manager);\n                if (value != null) {\n                    values.push(value);\n                }\n            }\n            if (0 < values.length) {\n                isChanged = true;\n            }\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-shape-table-column.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nexport class EShapeTableIds {\n}\nEShapeTableIds.ID = EShapeType.EXTENSION + 100;\nEShapeTableIds.HEADER_ID = EShapeType.EXTENSION + 101;\nEShapeTableIds.BODY_ID = EShapeType.EXTENSION + 102;\n//# sourceMappingURL=e-shape-table-ids.js.map","import { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nexport const EShapeTableRowSelectionType = {\n    NONE: 0,\n    SINGLE: 1,\n    MULTIPLE: 2\n};\nexport class EShapeTableRowSelection {\n    constructor(parent) {\n        this.parent = parent;\n        this.type = EShapeTableRowSelectionType.NONE;\n        this.indices = [];\n        this.body = null;\n    }\n    get values() {\n        const indices = this.indices;\n        const values = this.parent.data.values;\n        const result = (this._values = this._values || []);\n        if (values != null) {\n            result.length = 0;\n            for (let i = 0, imax = indices.length; i < imax; ++i) {\n                const index = indices[i];\n                if (0 <= index && index < values.length) {\n                    result.push(values[index]);\n                }\n            }\n        }\n        return result;\n    }\n    size() {\n        return this.indices.length;\n    }\n    isEmpty() {\n        return this.indices.length <= 0;\n    }\n    toggle(index) {\n        const indices = this.indices;\n        const indexIndex = indices.indexOf(index);\n        if (indexIndex < 0) {\n            indices.push(index);\n            const body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, true);\n            }\n        }\n        else {\n            indices.splice(indexIndex, 1);\n            const body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, false);\n            }\n        }\n    }\n    add(index) {\n        const indices = this.indices;\n        const indexIndex = indices.indexOf(index);\n        if (indexIndex < 0) {\n            indices.push(index);\n            const body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, true);\n            }\n        }\n    }\n    addTo(index) {\n        const indices = this.indices;\n        const lastIndex = indices[indices.length - 1];\n        if (lastIndex < index) {\n            const body = this.getBody();\n            for (let i = lastIndex + 1; i <= index; ++i) {\n                if (indices.indexOf(i) < 0) {\n                    indices.push(i);\n                    if (body != null) {\n                        this.setRowActive(body, i, true);\n                    }\n                }\n            }\n        }\n        else if (index < lastIndex) {\n            const body = this.getBody();\n            for (let i = lastIndex - 1; index <= i; --i) {\n                if (indices.indexOf(i) < 0) {\n                    indices.push(i);\n                    if (body != null) {\n                        this.setRowActive(body, i, true);\n                    }\n                }\n            }\n        }\n    }\n    remove(index) {\n        const indices = this.indices;\n        const indexIndex = indices.indexOf(index);\n        if (0 <= indexIndex) {\n            indices.splice(indexIndex, 1);\n            const body = this.getBody();\n            if (body != null) {\n                this.setRowActive(body, index, false);\n            }\n        }\n    }\n    clear() {\n        const indices = this.indices;\n        const body = this.getBody();\n        if (body != null) {\n            for (let i = 0, imax = indices.length; i < imax; ++i) {\n                this.setRowActive(body, indices[i], false);\n            }\n        }\n        indices.length = 0;\n    }\n    clearAndAdd(index) {\n        const indices = this.indices;\n        const body = this.getBody();\n        if (body != null) {\n            for (let i = 0, imax = indices.length; i < imax; ++i) {\n                const target = indices[i];\n                if (target !== index) {\n                    this.setRowActive(body, target, false);\n                }\n            }\n            this.setRowActive(body, index, true);\n        }\n        indices.length = 0;\n        indices.push(index);\n    }\n    getBody() {\n        const body = this.body;\n        if (body != null) {\n            return body;\n        }\n        return (this.body = UtilShapeSearch.findChildByType(this.parent, EShapeTableIds.BODY_ID));\n    }\n    getRow(body, index) {\n        const rows = body.children;\n        if (0 <= index && index < rows.length) {\n            return rows[index];\n        }\n        return null;\n    }\n    setRowActive(body, index, isActive) {\n        const row = this.getRow(body, index);\n        if (row != null) {\n            const cells = row.children;\n            for (let i = 0, imax = cells.length; i < imax; ++i) {\n                cells[i].state.isActive = isActive;\n            }\n        }\n    }\n    serialize(manager) {\n        return manager.addResource(`[${this.type}]`);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            const type = parsed[0];\n            if (this.type !== type) {\n                this.type = type;\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-shape-table-row-selection.js.map","import { EShapeTableRowSelection } from \"./e-shape-table-row-selection\";\nexport class EShapeTableRow {\n    constructor(parent, onChange) {\n        this._height = 40;\n        this._onChange = onChange;\n        this._isCellUpdateAllowed = true;\n        this._isCellUpdateCalled = false;\n        this.selection = new EShapeTableRowSelection(parent);\n    }\n    toDirty() {\n        this.updateCells();\n    }\n    disallowCellUpdate() {\n        this._isCellUpdateAllowed = false;\n        this._isCellUpdateCalled = false;\n    }\n    allowCellUpdate(invoke) {\n        this._isCellUpdateAllowed = true;\n        const isCellUpdatedCalled = this._isCellUpdateCalled;\n        if (invoke && isCellUpdatedCalled) {\n            this.updateCells();\n        }\n    }\n    updateCells() {\n        if (this._isCellUpdateAllowed) {\n            this._onChange();\n        }\n        else {\n            this._isCellUpdateCalled = true;\n        }\n    }\n    get height() {\n        return this._height;\n    }\n    set height(height) {\n        height = Math.max(5, height);\n        if (this._height !== height) {\n            this._height = height;\n            this.updateCells();\n        }\n    }\n    copy(source) {\n        this.disallowCellUpdate();\n        this._height = source._height;\n        this.allowCellUpdate(false);\n        this.updateCells();\n        return this;\n    }\n    serialize(manager) {\n        const selectionId = this.selection.serialize(manager);\n        return manager.addResource(`[${this._height},${selectionId}]`);\n    }\n    deserialize(target, manager) {\n        const resources = manager.resources;\n        if (0 <= target && target < resources.length) {\n            let parsed = manager.getExtension(target);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[target]);\n                manager.setExtension(target, parsed);\n            }\n            let isChanged = false;\n            const height = parsed[0];\n            if (this._height !== height) {\n                this._height = height;\n                isChanged = true;\n            }\n            this.selection.deserialize(parsed[1], manager);\n            if (isChanged) {\n                this._onChange();\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-shape-table-row.js.map","import { EShapeCopyPart, EShapeGroupShadowed, EShapeLockPart, EShapeRectangle } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableCell } from \"./e-shape-table-cell\";\nimport { EShapeTableColumn } from \"./e-shape-table-column\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { EShapeTableRow } from \"./e-shape-table-row\";\nexport class EShapeTable extends EShapeGroupShadowed {\n    constructor(mode, type = EShapeTableIds.ID) {\n        super(mode, type);\n        this._columnWidths = [];\n        this._columnXs = [];\n        this.column = new EShapeTableColumn(() => {\n            this.onColumnChange();\n        });\n        this.row = new EShapeTableRow(this, () => {\n            this.onRowChange();\n        });\n        this.cell = new EShapeTableCell(this);\n    }\n    onColumnChange() {\n        this.newCellsHeader();\n        this.newCellsBody(true);\n        this.layoutCells();\n    }\n    onRowChange() {\n        this.newCellsBody(false);\n        this.layoutCells();\n    }\n    onSizeChange() {\n        super.onSizeChange();\n        this.newCellsBody(false);\n        this.layoutCells();\n    }\n    newCellsHeader() {\n        if (this.children.length <= 0) {\n            return;\n        }\n        const header = this.children[0];\n        const column = this.column;\n        const columnCount = column.size();\n        const values = column.values;\n        // Create / delete children\n        const children = header.children;\n        const childrenLength = children.length;\n        if (childrenLength < columnCount) {\n            const master = children[childrenLength - 1] || this;\n            for (let i = childrenLength; i < columnCount; ++i) {\n                const cell = new EShapeRectangle().copy(master);\n                cell.text.value = values[i].header.label;\n                cell.attach(header);\n            }\n        }\n        else if (columnCount < childrenLength) {\n            for (let i = childrenLength - 1; columnCount <= i; --i) {\n                children[i].detach();\n            }\n        }\n        // Update text\n        for (let i = 0; i < columnCount; ++i) {\n            children[i].text.value = values[i].header.label;\n        }\n    }\n    toRowCountRequired() {\n        return Math.min(1000, Math.max(1, Math.floor(Math.abs(this.size.y) / this.row.height))) - 1;\n    }\n    newCellsBody(isColumnDirty) {\n        // Rows\n        if (this.children.length <= 1) {\n            return;\n        }\n        const body = this.children[1];\n        const rows = body.children;\n        const rowsLength = rows.length;\n        const rowCountRequired = this.toRowCountRequired();\n        const rowCount = Math.max(2, rowCountRequired);\n        if (rowsLength < rowCount) {\n            const masterEven = (0 < rowsLength ? rows[0] : null) || this;\n            const masterOdd = (1 < rowsLength ? rows[1] : null) || this;\n            const mode = this.mode;\n            for (let irow = rowsLength; irow < rowCount; ++irow) {\n                const master = irow % 2 === 0 ? masterEven : masterOdd;\n                new EShapeGroupShadowed(mode).copy(master, EShapeCopyPart.ACTION).attach(body);\n            }\n        }\n        else if (rowCount < rowsLength) {\n            for (let i = rowsLength - 1; rowCount <= i; --i) {\n                rows[i].detach();\n            }\n        }\n        if (0 < rows.length) {\n            rows[0].visible = 0 < rowCountRequired;\n        }\n        if (1 < rows.length) {\n            rows[1].visible = 1 < rowCountRequired;\n        }\n        // Cells\n        const masterCellEven = (0 < rows.length ? rows[0].children[0] : null) || this;\n        const masterCellOdd = (1 < rows.length ? rows[1].children[0] : null) || this;\n        const column = this.column;\n        const columnValues = column.values;\n        const columnCount = column.size();\n        for (let irow = 0; irow < rowCount; ++irow) {\n            const columnCountRequired = irow <= 1 ? Math.max(1, columnCount) : columnCount;\n            const row = rows[irow];\n            const cells = row.children;\n            const cellsLength = cells.length;\n            const master = irow % 2 === 0 ? masterCellEven : masterCellOdd;\n            if (cellsLength < columnCountRequired) {\n                for (let icolumn = cellsLength; icolumn < columnCountRequired; ++icolumn) {\n                    new EShapeRectangle().copy(master).attach(row);\n                }\n            }\n            else if (columnCountRequired < cellsLength) {\n                for (let i = cellsLength - 1; columnCountRequired <= i; --i) {\n                    cells[i].detach();\n                }\n            }\n            if (0 < cells.length) {\n                cells[0].visible = 0 < columnCount;\n            }\n            if (1 < cells.length) {\n                cells[1].visible = 1 < columnCount;\n            }\n            if (isColumnDirty) {\n                for (let i = 0; i < columnCount; ++i) {\n                    cells[i].text.align.horizontal = columnValues[i].align;\n                }\n            }\n        }\n    }\n    layoutCells() {\n        if (this.children.length <= 1) {\n            return;\n        }\n        const rowHeight = this.row.height;\n        const rowHeightHalf = rowHeight * 0.5;\n        const column = this.column;\n        const size = this.size;\n        const sizeX = size.x;\n        const sizeY = size.y;\n        const sxh = -sizeX * 0.5;\n        const syh = -sizeY * 0.5;\n        const columnValues = column.values;\n        const columnValuesLength = columnValues.length;\n        // Total weight\n        let totalWeight = 0;\n        for (let i = 0; i < columnValuesLength; ++i) {\n            totalWeight += columnValues[i].weight;\n        }\n        totalWeight = Math.max(0.00001, totalWeight);\n        // Column width and x position\n        const columnWidths = this._columnWidths;\n        const columnXs = this._columnXs;\n        const columnWidthFactor = sizeX / totalWeight;\n        let columnX = 0;\n        for (let i = 0; i < columnValuesLength; ++i) {\n            const columnWidth = columnValues[i].weight * columnWidthFactor;\n            columnWidths[i] = columnWidth;\n            columnXs[i] = columnX + columnWidth * 0.5;\n            columnX += columnWidth;\n        }\n        // Header\n        const header = this.children[0];\n        header.lock(EShapeLockPart.ALL);\n        header.size.set(sizeX, rowHeight);\n        header.transform.position.set(0, syh + rowHeightHalf);\n        header.unlock(EShapeLockPart.ALL, true);\n        const hcells = header.children;\n        const hcellsLength = hcells.length;\n        for (let icolumn = 0; icolumn < hcellsLength; ++icolumn) {\n            const hcell = hcells[icolumn];\n            hcell.lock(EShapeLockPart.ALL);\n            hcell.size.set(columnWidths[icolumn], rowHeight);\n            hcell.transform.position.set(sxh + columnXs[icolumn], 0);\n            hcell.unlock(EShapeLockPart.ALL, true);\n        }\n        // Body\n        const body = this.children[1];\n        body.lock(EShapeLockPart.ALL);\n        body.size.set(sizeX, sizeY - rowHeight);\n        body.transform.position.set(0, rowHeightHalf);\n        body.unlock(EShapeLockPart.ALL, true);\n        const rows = body.children;\n        const rowsLength = rows.length;\n        for (let irow = 0, y = syh + rowHeight; irow < rowsLength; ++irow, y += rowHeight) {\n            const row = rows[irow];\n            row.lock(EShapeLockPart.ALL);\n            row.size.set(sizeX, rowHeight);\n            row.transform.position.set(0, y);\n            row.unlock(EShapeLockPart.ALL, true);\n            const cells = row.children;\n            const cellsLength = cells.length;\n            for (let icolumn = 0; icolumn < cellsLength; ++icolumn) {\n                const cell = cells[icolumn];\n                cell.lock(EShapeLockPart.ALL);\n                cell.size.set(columnWidths[icolumn], rowHeight);\n                cell.transform.position.set(sxh + columnXs[icolumn], 0);\n                cell.unlock(EShapeLockPart.ALL, true);\n            }\n        }\n    }\n    copy(source, part = EShapeCopyPart.ALL) {\n        const result = super.copy(source, part);\n        if (source instanceof EShapeTable) {\n            this.column.copy(source.column);\n            this.row.copy(source.row);\n        }\n        return result;\n    }\n    serialize(manager) {\n        const result = super.serialize(manager);\n        const resource = result[15];\n        result[15] = manager.addResource(`[${this.column.serialize(manager)},${this.row.serialize(manager)},${resource}]`);\n        return result;\n    }\n}\n//# sourceMappingURL=e-shape-table.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nexport class ECommandShapeTableColumnValueAdd extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        this._selection = selection;\n        this._value = value;\n    }\n    execute() {\n        return this.redo();\n    }\n    redo() {\n        const value = this._value;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                shape.column.add(value);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                shape.column.remove(shape.column.size() - 1);\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-table-column-value-add.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nexport class ECommandShapeTableColumnValueBringForward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = shape.column.indexOf(target);\n                indices.push(index);\n                if (0 < index) {\n                    shape.column.swap(index - 1, index);\n                }\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = indices[i];\n                if (0 < index) {\n                    shape.column.swap(index - 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-table-column-value-bring-forward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nexport class ECommandShapeTableColumnValueRemove extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = shape.column.indexOf(target);\n                indices.push(index);\n                if (0 <= index) {\n                    shape.column.remove(index);\n                }\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.column.remove(index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const target = this._target;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.column.add(target, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-table-column-value-remove.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nexport class ECommandShapeTableColumnValueReplace extends DCommandBase {\n    constructor(oldValue, newValue, selection, list) {\n        super();\n        this._selection = selection;\n        this._oldValue = oldValue;\n        this._newValue = newValue;\n        this._list = list;\n        const indices = [];\n        const oldValues = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = shape.column.indexOf(oldValue);\n                indices.push(index);\n                if (0 <= index) {\n                    oldValues.push(shape.column.get(index));\n                    shape.column.set(index, newValue);\n                }\n                else {\n                    oldValues.push(newValue);\n                }\n            }\n            else {\n                indices.push(-1);\n                oldValues.push(newValue);\n            }\n        }\n        this._indices = indices;\n        this._oldValues = oldValues;\n        if (list.data.selection.contains(oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const newValue = this._newValue;\n        const indices = this._indices;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.column.set(index, newValue);\n                }\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._oldValue)) {\n            list.data.selection.clearAndAdd(newValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        const indices = this._indices;\n        const oldValues = this._oldValues;\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const index = indices[i];\n                if (0 <= index) {\n                    shape.column.set(index, oldValues[i]);\n                }\n            }\n        }\n        const list = this._list;\n        if (list.data.selection.contains(this._newValue)) {\n            list.data.selection.clearAndAdd(this._oldValue);\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n}\n//# sourceMappingURL=e-command-shape-table-column-value-replace.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nexport class ECommandShapeTableColumnValueSendBackward extends DCommandBase {\n    constructor(target, selection) {\n        super();\n        this._selection = selection;\n        this._target = target;\n        const indices = [];\n        const shapes = this._selection.get();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const column = shape.column;\n                const index = column.indexOf(target);\n                indices.push(index);\n                if (0 <= index && index < column.size() - 1) {\n                    column.swap(index + 1, index);\n                }\n            }\n            else {\n                indices.push(-1);\n            }\n        }\n        this._indices = indices;\n        this._selection.update(\"PROPERTY\");\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const shapes = this._selection.get();\n        const indices = this._indices;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const column = shape.column;\n                const index = indices[i];\n                if (0 <= index && index < column.size() - 1) {\n                    column.swap(index + 1, index);\n                }\n            }\n        }\n        this._selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-table-column-value-send-backward.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nexport class ECommandShapeTableRowHeight extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        const shapes = selection.get();\n        const values = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                values.push(shape.row.height);\n                shape.row.height = value;\n            }\n            else {\n                values.push(35);\n            }\n        }\n        this._values = values;\n        this._selection = selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const selection = this._selection;\n        const shapes = selection.get();\n        const values = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const value = values[i];\n                values[i] = shape.row.height;\n                shape.row.height = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-table-row-height.js.map","import { DCommandBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nexport class ECommandShapeTableRowSelectionType extends DCommandBase {\n    constructor(value, selection) {\n        super();\n        const shapes = selection.get();\n        const values = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                values.push(shape.row.selection.type);\n                shape.row.selection.type = value;\n            }\n            else {\n                values.push(EShapeTableRowSelectionType.NONE);\n            }\n        }\n        this._values = values;\n        this._selection = selection;\n    }\n    execute() {\n        return true;\n    }\n    redo() {\n        const selection = this._selection;\n        const shapes = selection.get();\n        const values = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (shape instanceof EShapeTable) {\n                const value = values[i];\n                values[i] = shape.row.selection.type;\n                shape.row.selection.type = value;\n            }\n        }\n        selection.update(\"PROPERTY\");\n        return true;\n    }\n    undo() {\n        return this.redo();\n    }\n}\n//# sourceMappingURL=e-command-shape-table-row-selection-type.js.map","import { DDialogLayered, DInputLabel, DInputReal, DInputText, DLayoutHorizontal, DLayoutSpace, DSelect, EShapeTextAlignHorizontal } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableColumnValue, EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nimport { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nexport class EDialogTableColumn extends DDialogLayered {\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        // Type\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectColumnValueTypeLabel()\n                    }\n                }),\n                new DSelect({\n                    weight: 1,\n                    value: EShapeTableColumnValueType.TEXT,\n                    menu: {\n                        items: [\n                            {\n                                value: EShapeTableColumnValueType.TEXT,\n                                text: {\n                                    value: theme.toSelectColumnValueTypeLabel(EShapeTableColumnValueType.TEXT)\n                                }\n                            },\n                            {\n                                value: EShapeTableColumnValueType.NUMBER,\n                                text: {\n                                    value: theme.toSelectColumnValueTypeLabel(EShapeTableColumnValueType.NUMBER)\n                                }\n                            }\n                        ]\n                    },\n                    on: {\n                        init: (self) => {\n                            this._selectType = self;\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Label\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputLabelLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: (self) => {\n                            this._inputLabel = self;\n                        },\n                        enter: () => {\n                            this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Width Weight\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputWidthLabel()\n                    }\n                }),\n                new DInputReal({\n                    weight: 1,\n                    text: {\n                        value: 0\n                    },\n                    min: 0,\n                    on: {\n                        init: (self) => {\n                            this._inputWidth = self;\n                        },\n                        enter: () => {\n                            this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Getter / setter\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputGetterLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: (self) => {\n                            this._inputGetter = self;\n                        },\n                        enter: () => {\n                            this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputSetterLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: (self) => {\n                            this._inputSetter = self;\n                        },\n                        enter: () => {\n                            this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Format\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputFormatLabel()\n                    }\n                }),\n                new DInputText({\n                    weight: 1,\n                    text: {\n                        value: \"\"\n                    },\n                    on: {\n                        init: (self) => {\n                            this._inputFormat = self;\n                        },\n                        enter: () => {\n                            this.ok();\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        // Align\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectTextAlignLabel()\n                    }\n                }),\n                new DSelect({\n                    weight: 1,\n                    value: EShapeTextAlignHorizontal.CENTER,\n                    menu: {\n                        items: [\n                            {\n                                value: EShapeTextAlignHorizontal.LEFT,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.LEFT)\n                                }\n                            },\n                            {\n                                value: EShapeTextAlignHorizontal.CENTER,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.CENTER)\n                                }\n                            },\n                            {\n                                value: EShapeTextAlignHorizontal.RIGHT,\n                                text: {\n                                    value: theme.toTextAlignLabel(EShapeTextAlignHorizontal.RIGHT)\n                                }\n                            }\n                        ]\n                    },\n                    on: {\n                        init: (self) => {\n                            this._selectAlign = self;\n                        }\n                    }\n                }),\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        return result;\n    }\n    reset() {\n        this._selectType.value = EShapeTableColumnValueType.TEXT;\n        this._inputLabel.value = this.theme.newInputLabel();\n        this._inputWidth.value = 1;\n        this._inputGetter.value = \"\";\n        this._inputSetter.value = \"\";\n        this._inputFormat.value = \"\";\n        this._selectAlign.value = EShapeTextAlignHorizontal.CENTER;\n        return this;\n    }\n    get value() {\n        return new EShapeTableColumnValue(this._inputWidth.value, this._selectType.value || EShapeTableColumnValueType.TEXT, this._inputGetter.value, this._inputSetter.value, this._inputFormat.value, this._selectAlign.value || EShapeTextAlignHorizontal.LEFT, new EShapeTableColumnValueHeader(this._inputLabel.value), new EShapeTableColumnValueBody());\n    }\n    set value(value) {\n        if (value != null) {\n            this._selectType.value = value.type;\n            this._inputLabel.value = value.header.label;\n            this._inputWidth.value = value.weight;\n            this._inputGetter.value = value.getter;\n            this._inputSetter.value = value.setter;\n            this._inputFormat.value = value.format;\n            this._selectAlign.value = value.align;\n        }\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    getType() {\n        return \"EDialogShapeTableColumn\";\n    }\n}\n//# sourceMappingURL=e-dialog-shape-table-column.js.map","import { DButtonAmbient, DControllers, DInputReal, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DPane, DSelect, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeTableColumnValueAdd } from \"./e-command-shape-table-column-value-add\";\nimport { ECommandShapeTableColumnValueBringForward } from \"./e-command-shape-table-column-value-bring-forward\";\nimport { ECommandShapeTableColumnValueRemove } from \"./e-command-shape-table-column-value-remove\";\nimport { ECommandShapeTableColumnValueReplace } from \"./e-command-shape-table-column-value-replace\";\nimport { ECommandShapeTableColumnValueSendBackward } from \"./e-command-shape-table-column-value-send-backward\";\nimport { ECommandShapeTableRowHeight } from \"./e-command-shape-table-row-height\";\nimport { ECommandShapeTableRowSelectionType } from \"./e-command-shape-table-row-selection-type\";\nimport { EDialogTableColumn } from \"./e-dialog-shape-table-column\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nexport class EEditorShapeTable extends DPane {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        const selection = options.selection;\n        this._selection = selection;\n        this.state.isDisabled = selection.isEmpty();\n        selection.on(\"change\", () => {\n            this.state.isDisabled = selection.isEmpty();\n        });\n        this.content.setHeight(\"padding\");\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        this.newTextLabel(),\n                        this.buttonNew,\n                        this.buttonDelete,\n                        this.buttonBringForward,\n                        this.buttonSendBackward\n                    ]\n                }),\n                this.columnList,\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: this.subtheme.getInputRowHeightLabel()\n                    }\n                }),\n                this.inputRowHeight,\n                new DText({\n                    width: \"100%\",\n                    text: {\n                        value: this.subtheme.getSelectRowSelectionTypeLabel()\n                    }\n                }),\n                this.selectRowSelectionType\n            ]\n        });\n        selection.on(\"change\", () => {\n            this.onSelectionChange(selection);\n        });\n        const columnList = this.columnList;\n        columnList.data.selection.on(\"change\", () => {\n            this.onListSelectionChange(columnList);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.subtheme.getLabel()\n            }\n        });\n    }\n    get buttonNew() {\n        var _a;\n        return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n    }\n    newButtonNew() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.subtheme.getButtonNewTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonNewActive(opener) {\n        this.columnDialog\n            .reset()\n            .open(opener)\n            .then((value) => {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandShapeTableColumnValueAdd(value, this._selection));\n            }\n        });\n    }\n    onSelectionChangeButtonNew(selection) {\n        const buttonNew = this.buttonNew;\n        if (selection.last() instanceof EShapeTable) {\n            buttonNew.state.isDisabled = false;\n        }\n        else {\n            buttonNew.state.isDisabled = true;\n        }\n    }\n    get buttonDelete() {\n        var _a;\n        return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n    }\n    newButtonDelete() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.subtheme.getButtonDeleteTitle(),\n            on: {\n                active: () => {\n                    const columnList = this.columnList;\n                    const first = columnList.data.selection.first;\n                    if (first != null && 1 < columnList.data.size()) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueRemove(first, this._selection));\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonDelete(columnList) {\n        this.buttonDelete.state.isDisabled =\n            columnList.data.size() <= 1 || columnList.data.selection.isEmpty();\n    }\n    get buttonBringForward() {\n        var _a;\n        return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n    }\n    newButtonBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.subtheme.getButtonBringForwardTitle(),\n            on: {\n                active: () => {\n                    const columnList = this.columnList;\n                    const first = columnList.selection.first;\n                    if (first != null && columnList.data.items[0] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueBringForward(first, this._selection));\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonBringForward(columnList) {\n        const first = columnList.data.selection.first;\n        const items = columnList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    }\n    get buttonSendBackward() {\n        var _a;\n        return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n    }\n    newButtonSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.subtheme.getButtonSendBackwardTitle(),\n            on: {\n                active: () => {\n                    const columnList = this.columnList;\n                    const first = columnList.selection.first;\n                    const items = columnList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        DControllers.getCommandController().push(new ECommandShapeTableColumnValueSendBackward(first, this._selection));\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonSendBackward(columnList) {\n        const first = columnList.selection.first;\n        const items = columnList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    }\n    get columnDialog() {\n        var _a;\n        return ((_a = this._columnDialog) !== null && _a !== void 0 ? _a : (this._columnDialog = this.newColumnDialog()));\n    }\n    newColumnDialog() {\n        return new EDialogTableColumn();\n    }\n    get columnList() {\n        var _a;\n        return ((_a = this._columnList) !== null && _a !== void 0 ? _a : (this._columnList = this.newColumnList()));\n    }\n    newColumnList() {\n        const result = new DList({\n            width: \"100%\",\n            weight: 1,\n            data: {\n                toLabel: (value) => {\n                    return value.toLabel();\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: (e, _, item) => {\n                                this.onColumnListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    }\n    onColumnListDblClick(e, _, item, list) {\n        const oldValue = item.value;\n        if (oldValue != null) {\n            const columnDialog = this.columnDialog;\n            columnDialog.value = oldValue;\n            columnDialog.open(item).then(() => {\n                const newValue = columnDialog.value;\n                if (newValue != null) {\n                    DControllers.getCommandController().push(new ECommandShapeTableColumnValueReplace(oldValue, newValue, this._selection, list));\n                }\n            });\n        }\n    }\n    onSelectionChangeColumnList(selection) {\n        const last = selection.last();\n        const columnList = this.columnList;\n        columnList.data.items = last instanceof EShapeTable ? last.column.values : [];\n        this.onListSelectionChange(columnList);\n    }\n    get inputRowHeight() {\n        var _a;\n        return ((_a = this._inputRowHeight) !== null && _a !== void 0 ? _a : (this._inputRowHeight = this.newInputRowHeight()));\n    }\n    newInputRowHeight() {\n        return new DInputReal({\n            width: \"100%\",\n            min: 5,\n            step: 1,\n            on: {\n                change: (value) => {\n                    DControllers.getCommandController().push(new ECommandShapeTableRowHeight(value, this._selection));\n                }\n            }\n        });\n    }\n    onSelectionChangeInputRowHeight(selection) {\n        const last = selection.last();\n        const input = this.inputRowHeight;\n        if (last instanceof EShapeTable) {\n            input.value = last.row.height;\n            input.state.isDisabled = false;\n        }\n        else {\n            input.state.isDisabled = true;\n        }\n    }\n    get selectRowSelectionType() {\n        var _a;\n        return ((_a = this._selectRowSelectionType) !== null && _a !== void 0 ? _a : (this._selectRowSelectionType = this.newSelectRowSelectionType()));\n    }\n    newSelectRowSelectionType() {\n        const subtheme = this.subtheme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapeTableRowSelectionType.SINGLE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeTableRowSelectionType.NONE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeTableRowSelectionType.SINGLE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.SINGLE)\n                        }\n                    },\n                    {\n                        value: EShapeTableRowSelectionType.MULTIPLE,\n                        text: {\n                            value: subtheme.toSelectRowSelectionTypeLabel(EShapeTableRowSelectionType.MULTIPLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: (value) => {\n                    if (value == null) {\n                        value = EShapeTableRowSelectionType.SINGLE;\n                    }\n                    DControllers.getCommandController().push(new ECommandShapeTableRowSelectionType(value, this._selection));\n                }\n            }\n        });\n    }\n    onSelectionChangeSelectRowSelectionType(selection) {\n        const last = selection.last();\n        const select = this.selectRowSelectionType;\n        if (last instanceof EShapeTable) {\n            select.value = last.row.selection.type;\n            select.state.isDisabled = false;\n        }\n        else {\n            select.state.isDisabled = true;\n        }\n    }\n    onSelectionChange(selection) {\n        this.onSelectionChangeButtonNew(selection);\n        this.onSelectionChangeColumnList(selection);\n        this.onSelectionChangeInputRowHeight(selection);\n        this.onSelectionChangeSelectRowSelectionType(selection);\n    }\n    onListSelectionChange(columnList) {\n        this.onListSelectionChangeButtonDelete(columnList);\n        this.onListSelectionChangeButtonBringForward(columnList);\n        this.onListSelectionChangeButtonSendBackward(columnList);\n    }\n    get subtheme() {\n        var _a;\n        return ((_a = this._subtheme) !== null && _a !== void 0 ? _a : (this._subtheme = this.newSubtheme()));\n    }\n    newSubtheme() {\n        return DThemes.get(\"EEditorShapeTable\");\n    }\n}\n//# sourceMappingURL=e-editor-shape-table.js.map","import { EShapeActionRuntimeBase } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { UtilShapeSearch } from \"../../util/util-shape-search\";\nexport class EShapeTableActionRuntime extends EShapeActionRuntimeBase {\n    constructor(table) {\n        super();\n        this.body = UtilShapeSearch.findChildByType(table, EShapeTableIds.BODY_ID);\n        this.column = table.column;\n    }\n    execute(shape, runtime, time) {\n        const body = this.body;\n        const column = this.column;\n        if (body != null && column != null) {\n            const data = shape.data;\n            if (data.isChanged) {\n                const rows = body.children;\n                const rowsLength = rows.length;\n                const first = data.get(0);\n                if (first != null) {\n                    const columnValues = column.values;\n                    const values = first.values;\n                    const valuesLength = values.length;\n                    const imin = Math.min(rowsLength, valuesLength);\n                    for (let i = 0; i < imin; ++i) {\n                        const value = values[i];\n                        const row = rows[i];\n                        const cells = row.children;\n                        const cellsLength = cells.length;\n                        const jmin = Math.min(cellsLength, columnValues.length);\n                        for (let j = 0; j < jmin; ++j) {\n                            const cell = cells[j];\n                            const columnValue = columnValues[j];\n                            const columnRuntime = columnValue.runtime;\n                            if (columnRuntime != null) {\n                                cell.state.isFocusable = true;\n                                cell.text.value = columnRuntime.formatter(columnRuntime.toValue(value, j, values), j);\n                            }\n                        }\n                        for (let j = jmin; j < cellsLength; ++j) {\n                            const cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                    for (let i = imin; i < rowsLength; ++i) {\n                        const row = rows[i];\n                        const cells = row.children;\n                        const cellsLength = cells.length;\n                        for (let j = 0; j < cellsLength; ++j) {\n                            const cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                }\n                else {\n                    for (let i = 0; i < rowsLength; ++i) {\n                        const row = rows[i];\n                        const cells = row.children;\n                        const cellsLength = cells.length;\n                        for (let j = 0; j < cellsLength; ++j) {\n                            const cell = cells[j];\n                            cell.state.isFocusable = false;\n                            cell.text.value = \"\";\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-shape-table-action-runtime.js.map","import { EShapeActionValueChangeColorCode, EShapeActionValueChangeColorType, EShapeDefaults, UtilRgb } from \"@wcardinal/wcardinal-ui\";\nexport class EShapeTableCellActionValueChangeColor extends EShapeActionValueChangeColorCode {\n    constructor() {\n        super(EShapeActionValueChangeColorType.FILL, \"\", EShapeTableCellActionValueChangeColor.getColorCode(), \"\", \"\");\n    }\n    static getColorCode() {\n        const activeHoverColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.8);\n        const activeColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.75);\n        const hoverColor = UtilRgb.brighten(EShapeDefaults.HIGHLIGHT_COLOR, 0.85);\n        const disabledColor = UtilRgb.darken(EShapeDefaults.FILL_COLOR, 0.25);\n        return (`inDisabled ? ${disabledColor} : ( isActive ?` +\n            `\t( isHovered ? ${activeHoverColor} : ${activeColor} ) :` +\n            `\t( isHovered ? ${hoverColor} : null )` +\n            `)`);\n    }\n}\n//# sourceMappingURL=e-shape-table-cell-action-value-change-color.js.map","import { DApplications, EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableCellActionValueChangeColor } from \"./e-shape-table-cell-action-value-change-color\";\nimport { EShapeTableRowSelectionType } from \"./e-shape-table-row-selection\";\nexport class EShapeTableBodyRuntime extends EShapeRuntimeImpl {\n    constructor(shape) {\n        super(shape);\n        this.lastRowIndex = -1;\n        this.lastColumnIndex = -1;\n        this.init(shape);\n    }\n    init(shape) {\n        const parent = shape.parent;\n        if (parent instanceof EShapeTable) {\n            this.selection = parent.row.selection;\n            const rows = shape.children;\n            for (let i = 0, imax = rows.length; i < imax; ++i) {\n                const row = rows[i];\n                const cells = row.children;\n                for (let j = 0, jmax = cells.length; j < jmax; ++j) {\n                    cells[j].action.add(new EShapeTableCellActionValueChangeColor());\n                }\n            }\n        }\n    }\n    onClick(shape, e) {\n        super.onClick(shape, e);\n        // Update the selection\n        const selection = this.selection;\n        if (e != null && selection != null && selection.type !== EShapeTableRowSelectionType.NONE) {\n            const lastRowIndex = this.lastRowIndex;\n            if (0 <= lastRowIndex) {\n                const indices = selection.indices;\n                const isSingle = selection.type === EShapeTableRowSelectionType.SINGLE;\n                const isNotSingle = !isSingle;\n                const originalEvent = \"data\" in e ? e.data.originalEvent : e;\n                const ctrlKey = originalEvent.ctrlKey;\n                const shiftKey = originalEvent.shiftKey;\n                if (isSingle || indices.length <= 0 || !(isNotSingle && (ctrlKey || shiftKey))) {\n                    selection.clearAndAdd(lastRowIndex);\n                }\n                else if (ctrlKey) {\n                    selection.toggle(lastRowIndex);\n                }\n                else if (shiftKey) {\n                    selection.addTo(lastRowIndex);\n                }\n            }\n        }\n    }\n    onDblClick(shape, e, interactionManager) {\n        const result = super.onDblClick(shape, e, interactionManager);\n        // Focus on clicked cell\n        const cell = this.getCell(shape, this.lastRowIndex, this.lastColumnIndex);\n        if (cell != null) {\n            cell.focus();\n        }\n        return result;\n    }\n    onOut(shape, e) {\n        super.onOut(shape, e);\n        // Clear highlight\n        const lastRowIndex = this.lastRowIndex;\n        if (0 <= lastRowIndex) {\n            this.setRowHovered(shape, lastRowIndex, false);\n            this.lastRowIndex = -1;\n        }\n    }\n    onCellTouched(shape, rowIndex, columnIndex) {\n        let isChanged = false;\n        const lastRowTouched = this.lastRowIndex;\n        if (lastRowTouched !== rowIndex) {\n            this.setRowHovered(shape, lastRowTouched, false);\n            this.setRowHovered(shape, rowIndex, true);\n            this.lastRowIndex = rowIndex;\n            isChanged = true;\n        }\n        const lastColumnIndex = this.lastColumnIndex;\n        if (lastColumnIndex !== columnIndex) {\n            this.lastColumnIndex = columnIndex;\n            isChanged = true;\n        }\n        if (isChanged) {\n            const cell = this.getCell(shape, rowIndex, columnIndex);\n            shape.title = (cell && cell.text.value) || \"\";\n            const layer = DApplications.getLayer(shape);\n            if (layer) {\n                layer.view.title = shape.title;\n            }\n        }\n    }\n    getRow(shape, index) {\n        const rows = shape.children;\n        if (0 <= index && index < rows.length) {\n            return rows[index];\n        }\n        return null;\n    }\n    getCell(shape, rowIndex, columnIndex) {\n        const row = this.getRow(shape, rowIndex);\n        if (row != null) {\n            const cells = row.children;\n            if (0 <= columnIndex && columnIndex < cells.length) {\n                return cells[columnIndex];\n            }\n        }\n        return null;\n    }\n    setRowHovered(shape, index, isHovered) {\n        const row = this.getRow(shape, index);\n        if (row != null) {\n            const cells = row.children;\n            for (let i = 0, imax = cells.length; i < imax; ++i) {\n                cells[i].state.isHovered = isHovered;\n            }\n        }\n    }\n}\nEShapeTableBodyRuntime.WORK_POINT = new Point();\n//# sourceMappingURL=e-shape-table-body-runtime.js.map","import { EShapeGroupShadowed } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableBodyRuntime } from \"./e-shape-table-body-runtime\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nexport class EShapeTableBody extends EShapeGroupShadowed {\n    constructor(mode, type = EShapeTableIds.BODY_ID) {\n        super(mode, type);\n    }\n    containsAbs(x, y, ax, ay) {\n        if (this.containsAbsBBox(x, y, ax, ay)) {\n            const children = this.children;\n            if (0 < children.length) {\n                const first = children[0];\n                const rowIndex = ((ay + y) / first.size.y) | 0;\n                if (rowIndex < children.length) {\n                    const cells = first.children;\n                    for (let i = 0, imax = cells.length; i < imax; ++i) {\n                        const cell = cells[i];\n                        const cx = cell.transform.position.x;\n                        const csx = 0.5 * cell.size.x;\n                        if (x < cx + csx) {\n                            const runtime = this.runtime;\n                            if (runtime instanceof EShapeTableBodyRuntime) {\n                                runtime.onCellTouched(this, rowIndex, i);\n                            }\n                            return true;\n                        }\n                    }\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n        return false;\n    }\n    containsText(x, y) {\n        return null;\n    }\n    containsChildren(x, y) {\n        return null;\n    }\n}\n//# sourceMappingURL=e-shape-table-body.js.map","import { NumberFormatters } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nconst toValueDefault = (row, index) => row[index];\nconst fromValueDefault = (row, index, rows, value) => {\n    row[index] = value;\n};\nconst formatterDefault = (value) => String(value);\nexport class EShapeTableColumnValueRuntime {\n    constructor(value) {\n        this.toValue = this.parseToValue(value.getter, toValueDefault, '\"\"');\n        this.fromValue = this.parseFromValue(value.setter, fromValueDefault);\n        if (value.type === EShapeTableColumnValueType.TEXT) {\n            this.formatter = this.parseFormat(value.format, formatterDefault, '\"\"');\n        }\n        else {\n            const format = value.format;\n            if (0 < format.trim().length) {\n                const formatter = NumberFormatters.create(format);\n                this.formatter = (v) => {\n                    return formatter.format(v, 1);\n                };\n            }\n            else {\n                this.formatter = formatterDefault;\n            }\n        }\n    }\n    parseToValue(expression, def, defLiteral) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"row\", \"index\", \"rows\", `try{ return (${expression}); } catch( e ) { return ${defLiteral}; }`);\n        }\n        catch (_a) {\n            return def;\n        }\n    }\n    parseFromValue(expression, def) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"row\", \"index\", \"rows\", \"value\", `try{ ${expression} = value; } catch( e ) {}`);\n        }\n        catch (_a) {\n            return def;\n        }\n    }\n    parseFormat(expression, def, defLiteral) {\n        if (expression.trim().length <= 0) {\n            return def;\n        }\n        try {\n            return Function(\"value\", \"index\", `try{ return (${expression}); } catch( e ) { return ${defLiteral}; }`);\n        }\n        catch (_a) {\n            return def;\n        }\n    }\n}\n//# sourceMappingURL=e-shape-table-column-value-runtime.js.map","import { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nexport class EShapeTableHeaderRuntime extends EShapeRuntimeImpl {\n}\n//# sourceMappingURL=e-shape-table-header-runtime.js.map","import { EShapeGroupShadowed } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nexport class EShapeTableHeader extends EShapeGroupShadowed {\n    constructor(mode, type = EShapeTableIds.HEADER_ID) {\n        super(mode, type);\n    }\n}\n//# sourceMappingURL=e-shape-table-header.js.map","import { EShapeRuntimeImpl } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableActionRuntime } from \"./e-shape-table-action-runtime\";\nimport { EShapeTableColumnValueRuntime } from \"./e-shape-table-column-value-runtime\";\nexport class EShapeTableRuntime extends EShapeRuntimeImpl {\n    constructor(shape) {\n        super(shape);\n        if (shape instanceof EShapeTable) {\n            // Columns\n            const values = shape.column.values;\n            for (let i = 0, imax = values.length; i < imax; ++i) {\n                const value = values[i];\n                value.runtime = new EShapeTableColumnValueRuntime(value);\n            }\n            // Action\n            this.actions.push(new EShapeTableActionRuntime(shape));\n        }\n    }\n}\n//# sourceMappingURL=e-shape-table-runtime.js.map","import { createGroupUploaded, deserializeBase, DThemes, EShapeCapability, EShapeDefaults, EShapeGroupShadowed, EShapeRectangle, EShapeResourceManagerDeserializationMode, EShapeStrokeSide, EShapeTextAlignHorizontal, UtilRgb } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeTable } from \"./e-shape-table\";\nimport { EShapeTableBody } from \"./e-shape-table-body\";\nimport { EShapeTableColumnValue, EShapeTableColumnValueType } from \"./e-shape-table-column-value\";\nimport { EShapeTableColumnValueBody } from \"./e-shape-table-column-value-body\";\nimport { EShapeTableColumnValueHeader } from \"./e-shape-table-column-value-header\";\nimport { EShapeTableHeader } from \"./e-shape-table-header\";\nimport { EShapeExtensions } from \"../e-shape-extensions\";\nimport { EShapeTableIds } from \"./e-shape-table-ids\";\nimport { EEditorShapeTable } from \"./e-editor-shape-table\";\nimport { EShapeTableRuntime } from \"./e-shape-table-runtime\";\nimport { EShapeTableHeaderRuntime } from \"./e-shape-table-header-runtime\";\nimport { EShapeTableBodyRuntime } from \"./e-shape-table-body-runtime\";\nexport class EShapeTables {\n    static getTheme() {\n        return DThemes.get(\"EShapeTable\");\n    }\n    static create(existing) {\n        const mode = EShapeResourceManagerDeserializationMode.EDITOR;\n        const result = new EShapeTable(mode);\n        const header = new EShapeTableHeader(mode).attach(result);\n        const headerCell = new EShapeRectangle().attach(header);\n        headerCell.stroke.side = EShapeStrokeSide.BOTTOM;\n        headerCell.stroke.width = 1;\n        headerCell.stroke.color = UtilRgb.brighten(EShapeDefaults.STROKE_COLOR, 0.65);\n        const body = new EShapeTableBody(mode).attach(result);\n        body.state.isFocusable = true;\n        body.interactive = true;\n        const even = new EShapeGroupShadowed(mode).attach(body);\n        const odd = new EShapeGroupShadowed(mode).attach(body);\n        const cellEven = new EShapeRectangle().attach(even);\n        cellEven.stroke.enable = false;\n        cellEven.text.value = \"-\";\n        cellEven.text.clipping = true;\n        const cellOdd = new EShapeRectangle().attach(odd);\n        cellOdd.fill.color = UtilRgb.darken(EShapeDefaults.FILL_COLOR, 0.05);\n        cellOdd.stroke.enable = false;\n        cellOdd.text.value = \"-\";\n        cellOdd.text.clipping = true;\n        result.column.add(new EShapeTableColumnValue(1, EShapeTableColumnValueType.TEXT, \"\", \"\", \"\", EShapeTextAlignHorizontal.CENTER, new EShapeTableColumnValueHeader(this.getTheme().newHeaderLabel()), new EShapeTableColumnValueBody()));\n        if (existing) {\n            result.copy(existing);\n        }\n        result.onSizeChange();\n        return result;\n    }\n    static load() {\n        const theme = this.getTheme();\n        const name = theme.getName();\n        EShapeExtensions.add({\n            type: EShapeTableIds.ID,\n            name,\n            icon: {\n                width: 24,\n                height: 24,\n                // Material Icons https://material.io/tools/icons/\n                // Available under Apache license version 2.0\n                svg: `<g transform=\"scale(26.6666)\" fill=\"#fff\" stroke=\"none\">` +\n                    `<path d=\"M20 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 2v3H5V5h15z` +\n                    `m-5 14h-5v-9h5v9zM5 10h3v9H5v-9zm12 9v-9h3v9h-3z\"/>` +\n                    `</g>`\n            },\n            title: name,\n            creator: (existing) => EShapeTables.create(existing),\n            deserializer: (item, manager) => EShapeTables.deserialize(item, manager),\n            editor: EEditorShapeTable,\n            runtime: EShapeTableRuntime,\n            uploaded: createGroupUploaded\n        });\n        EShapeExtensions.add({\n            type: EShapeTableIds.HEADER_ID,\n            name: theme.getHeaderName(),\n            deserializer: (item, manager) => EShapeTables.deserializeHeader(item, manager),\n            runtime: EShapeTableHeaderRuntime,\n            capability: EShapeCapability.PRIMITIVE & ~EShapeCapability.CHILDREN\n        });\n        EShapeExtensions.add({\n            type: EShapeTableIds.BODY_ID,\n            name: theme.getBodyName(),\n            deserializer: (item, manager) => EShapeTables.deserializeBody(item, manager),\n            runtime: EShapeTableBodyRuntime,\n            capability: EShapeCapability.PRIMITIVE & ~EShapeCapability.CHILDREN\n        });\n    }\n    static deserialize(item, manager) {\n        const shape = new EShapeTable(manager.mode);\n        const index = item[15];\n        const resources = manager.resources;\n        if (0 <= index && index < resources.length) {\n            let parsed = manager.getExtension(index);\n            if (parsed == null) {\n                parsed = JSON.parse(resources[index]);\n                manager.setExtension(index, parsed);\n            }\n            shape.column.deserialize(parsed[0], manager);\n            shape.row.deserialize(parsed[1], manager);\n            item[15] = parsed[parsed.length - 1];\n        }\n        const result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    }\n    static deserializeHeader(item, manager) {\n        const shape = new EShapeTableHeader(manager.mode);\n        const result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    }\n    static deserializeBody(item, manager) {\n        const shape = new EShapeTableBody(manager.mode);\n        const result = deserializeBase(item, manager, shape);\n        shape.size.init();\n        return result;\n    }\n}\n//# sourceMappingURL=e-shape-tables.js.map","import { EShapeTables } from \"./e-shape-tables\";\nexport const loadShapeExtensionTable = () => {\n    EShapeTables.load();\n};\n//# sourceMappingURL=load-shape-extension-table.js.map","const toIconName = (index) => {\n    return `extension_factory_icon_${index}`;\n};\nexport class EShapeExtensionFactories {\n    static add(factory) {\n        this._factories.push(factory);\n    }\n    static each(iteratee) {\n        const factories = this._factories;\n        for (let i = 0, imax = factories.length; i < imax; ++i) {\n            iteratee(factories[i]);\n        }\n    }\n    static merge(iconBuilder) {\n        const factories = this._factories;\n        for (let i = 0, imax = factories.length; i < imax; ++i) {\n            const factory = factories[i];\n            const icon = factory.icon;\n            iconBuilder.add(toIconName(i), icon.width, icon.height, icon.svg);\n        }\n    }\n    static build(icons) {\n        const factories = this._factories;\n        for (let i = 0, imax = factories.length; i < imax; ++i) {\n            const factory = factories[i];\n            factory.icon.texture = icons[toIconName(i)];\n        }\n    }\n}\nEShapeExtensionFactories._factories = [];\n//# sourceMappingURL=e-shape-extension-factories.js.map","import { DInputSearch, UtilHtmlElement } from \"@wcardinal/wcardinal-ui\";\nexport class EDialogActionKeywordInput extends DInputSearch {\n    getClipperRect(resolution, point, result) {\n        return UtilHtmlElement.getClipperRect(null, this, resolution, point, result);\n    }\n}\n//# sourceMappingURL=e-dialog-action-keyword-input.js.map","import { DBoard, DLayoutVertical, DList, DText, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogActionKeywordInput } from \"./e-dialog-action-keyword-input\";\nexport class EDialogActionKeywordBoard extends DBoard {\n    constructor(options) {\n        super(options);\n        this.addChild(new DLayoutVertical({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            children: [this.input, this.list, this.text]\n        }));\n        this.onInputChange(\"\");\n    }\n    // Input\n    get input() {\n        let result = this._input;\n        if (result == null) {\n            result = this.newInput();\n            this._input = result;\n        }\n        return result;\n    }\n    newInput() {\n        return new EDialogActionKeywordInput({\n            width: \"padding\",\n            on: {\n                input: (value) => {\n                    this.onInputChange(value);\n                }\n            }\n        });\n    }\n    onInputChange(word) {\n        this.list.data.clearAndAddAll(this.newKeywords(word));\n    }\n    newKeywords(word) {\n        var _a;\n        const keywords = ((_a = this._keywords) !== null && _a !== void 0 ? _a : (this._keywords = DThemes.get(\"EDialogAction\").newKeywords()));\n        if (0 < word.trim().length) {\n            const filtered = [];\n            for (let i = 0, imax = keywords.length; i < imax; ++i) {\n                const keyword = keywords[i];\n                if (0 <= keyword.keyword.indexOf(word)) {\n                    filtered.push(keyword);\n                }\n            }\n            return filtered;\n        }\n        else {\n            return keywords;\n        }\n    }\n    // List\n    get list() {\n        let result = this._list;\n        if (result == null) {\n            result = this.newList();\n            this._list = result;\n        }\n        return result;\n    }\n    newList() {\n        return new DList({\n            weight: 1,\n            width: \"padding\",\n            data: {\n                selection: {\n                    on: {\n                        change: () => {\n                            this.onListSelectionChange();\n                        }\n                    }\n                },\n                toLabel: (keyword) => {\n                    return keyword.keyword;\n                },\n                toId: (keyword) => {\n                    return keyword.keyword;\n                }\n            }\n        });\n    }\n    onListSelectionChange() {\n        const first = this.list.data.selection.first;\n        if (first) {\n            this.text.text = `${first.keyword}: ${first.type}\\n${first.description}`;\n        }\n        else {\n            this.text.text = \"\";\n        }\n    }\n    // Text\n    get text() {\n        let result = this._text;\n        if (result == null) {\n            result = this.newText();\n            this._text = result;\n        }\n        return result;\n    }\n    newText() {\n        return new DText({\n            width: \"padding\",\n            height: 120,\n            state: \"READ_ONLY\",\n            text: {\n                style: {\n                    wordWrap: \"NORMAL\"\n                }\n            },\n            theme: \"DInputTextArea\"\n        });\n    }\n    getType() {\n        return \"DDialog\";\n    }\n}\n//# sourceMappingURL=e-dialog-action-keyword-board.js.map","import { DAlignHorizontal, DButtonCheck, DButtonColor, DDialogLayered, DInputInteger, DInputLabel, DInputReal, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DMenu, DSelect, DSelectMultiple, DText, DThemes, EShapeActionValueBlink, EShapeActionValueBlinkType, EShapeActionValueChangeColor, EShapeActionValueChangeColorBrightness, EShapeActionValueChangeColorCode, EShapeActionValueChangeColorTarget, EShapeActionValueChangeColorType, EShapeActionValueChangeColorTypes, EShapeActionValueChangeCursor, EShapeActionValueChangeText, EShapeActionValueChangeTextType, EShapeActionValueEmitEvent, EShapeActionValueMisc, EShapeActionValueMiscEmitEvent, EShapeActionValueGesture, EShapeActionValueGestureType, EShapeActionValueMiscHtmlElement, EShapeActionValueMiscInput, EShapeActionValueShowHideLayer, EShapeActionValueMiscType, EShapeActionValueMiscWrite, EShapeActionValueOnInputAction, EShapeActionValueOpen, EShapeActionValueOpenType, EShapeActionValueShowHideShape, EShapeActionValueShowHideType, EShapeActionValueTransformMove, EShapeActionValueTransformMoveType, EShapeActionValueTransformResize, EShapeActionValueTransformResizeType, EShapeActionValueTransformRotate, EShapeActionValueTransformRotateType, EShapeActionValueTransformType, EShapeActionValueType, UtilHtmlElementWhen, EShapeActionValueGestureOperationType, EShapeActionValueShowHide, EShapeActionValueOpenDialog, EShapeActionValueOpenDialogType, EShapeActionValueOpenExtension, EShapeActionOpenExtensions, EShapeActionValueMiscExecute, EShapeActionValueOpenDialogExtension, EShapeActionOpenDialogExtensions, DButtonAmbient, DApplications, EShapeActionMiscExtensions, EShapeActionValueMiscExtension } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeActionExtensions } from \"../extension\";\nimport { EDialogActionExtensionContainer } from \"./e-dialog-action-extension-container\";\nimport { EDialogActionKeywordBoard } from \"./e-dialog-action-keyword-board\";\nexport class EDialogAction extends DDialogLayered {\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        result.push(this.selectLayout, this.showHideTypeLayout, this.blinkTypeLayout, this.transformTypeLayout, this.changeColorTypeLayout, this.changeColorTargetLayout, this.rotateTypeLayout, this.resizeTypeLayout, this.originXLayout, this.originYLayout, this.moveTypeLayout, this.openTypeLayout, this.openDialogTypeLayout, this.changeTextTypeLayout, this.miscTypeLayout, this.onInputActionLayout, this.whenTypeLayout, this.gestureTypeLayout, this.gestureOperationTypeLayout, this.selectLayerLayout, this.condition, this.intervalLayout, this.size, this.amount, this.targetName, this.colorLayout, this.target, this.argument, this.contents, this.initialization, this.pointerEventsLayout, this.colorCode, this.alphaCode, this.brightness, this.blend, this.initial, this.step, this.min, this.max, this.scaleLayout, this.checkBringToFrontLayout, this.inNewWindowLayout);\n        const onChangeBound = () => {\n            this.onChange();\n        };\n        this.select.on(\"change\", onChangeBound);\n        this.showHideType.on(\"change\", onChangeBound);\n        this.blinkType.on(\"change\", onChangeBound);\n        this.transformType.on(\"change\", onChangeBound);\n        this.resizeType.on(\"change\", onChangeBound);\n        this.changeColorTarget.on(\"change\", onChangeBound);\n        this.openType.on(\"change\", onChangeBound);\n        this.openDialogType.on(\"change\", onChangeBound);\n        this.miscType.on(\"change\", onChangeBound);\n        return result;\n    }\n    newLabel(label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    }\n    newSpace() {\n        return new DLayoutSpace({\n            width: 60\n        });\n    }\n    newLabeled(label, input) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                input,\n                this.newSpace()\n            ]\n        });\n    }\n    // Theme\n    get themeShape() {\n        var _a;\n        return ((_a = this._themeShape) !== null && _a !== void 0 ? _a : (this._themeShape = this.newThemeShape()));\n    }\n    newThemeShape() {\n        return DThemes.get(\"EShapeActionValue\");\n    }\n    // Select\n    get select() {\n        var _a;\n        return ((_a = this._select) !== null && _a !== void 0 ? _a : (this._select = this.newSelect()));\n    }\n    newSelect() {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueType.SHOW_HIDE,\n            menu: {\n                items: this.newSelectMenuItems()\n            }\n        });\n    }\n    newSelectMenuItems() {\n        const themeShape = this.themeShape;\n        const result = [\n            {\n                value: EShapeActionValueType.SHOW_HIDE,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.SHOW_HIDE)\n                }\n            },\n            {\n                value: EShapeActionValueType.BLINK,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.BLINK)\n                }\n            },\n            {\n                value: EShapeActionValueType.TRANSFORM,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.TRANSFORM)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_COLOR,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_COLOR)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_TEXT,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueType.CHANGE_CURSOR,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.CHANGE_CURSOR)\n                }\n            },\n            {\n                value: EShapeActionValueType.OPEN,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.OPEN)\n                }\n            },\n            {\n                value: EShapeActionValueType.GESTURE,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.GESTURE)\n                }\n            },\n            {\n                value: EShapeActionValueType.MISC,\n                text: {\n                    value: themeShape.toTypeLabel(EShapeActionValueType.MISC)\n                }\n            }\n        ];\n        EShapeActionExtensions.each((extension) => {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    }\n    get selectLayout() {\n        var _a;\n        return ((_a = this._selectLayout) !== null && _a !== void 0 ? _a : (this._selectLayout = this.newSelectLayout()));\n    }\n    newSelectLayout() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabel(this.theme.getSelectActionLabel()),\n                this.select,\n                new DLayoutHorizontal({\n                    width: 60,\n                    height: \"auto\",\n                    children: [\n                        new DLayoutSpace({\n                            weight: 1\n                        }),\n                        this.buttonKeyword\n                    ]\n                })\n            ]\n        });\n    }\n    // Keyword button\n    get buttonKeyword() {\n        var _a;\n        return ((_a = this._buttonKeyword) !== null && _a !== void 0 ? _a : (this._buttonKeyword = this.newButtonKeyword()));\n    }\n    newButtonKeyword() {\n        var _a;\n        return new DButtonAmbient({\n            width: 30,\n            toggle: true,\n            image: {\n                source: (_a = this.options) === null || _a === void 0 ? void 0 : _a.icons.action_keyword\n            },\n            title: this.theme.getButtonKeywordTitle(),\n            on: {\n                active: () => {\n                    this.onButtonKeywordActive();\n                },\n                inactive: () => {\n                    this.onButtonKeywordInactive();\n                }\n            }\n        });\n    }\n    onButtonKeywordActive() {\n        const boardKeyword = this.boardKeyword;\n        const offset = this.getBoardKeywordOffset();\n        const width = this.width;\n        const layer = DApplications.getLayer(this);\n        if (layer != null) {\n            const boardKeywordWidth = boardKeyword.width;\n            if (layer.width < this.position.x + width + offset + boardKeywordWidth) {\n                boardKeyword.position.x = -boardKeywordWidth - offset;\n            }\n            else {\n                boardKeyword.position.x = width + offset;\n            }\n        }\n        else {\n            boardKeyword.position.x = width + offset;\n        }\n        boardKeyword.show();\n    }\n    onButtonKeywordInactive() {\n        this.boardKeyword.hide();\n    }\n    // Keyword board\n    get boardKeyword() {\n        var _a;\n        return ((_a = this._boardKeyword) !== null && _a !== void 0 ? _a : (this._boardKeyword = this.newBoardKeyword()));\n    }\n    newBoardKeyword() {\n        // To exclude this board from the automatic height calculation targets,\n        // The width and the height must be functions.\n        return new EDialogActionKeywordBoard({\n            parent: this,\n            x: 0,\n            y: 0,\n            width: () => 300,\n            height: () => 400,\n            padding: 16\n        });\n    }\n    getBoardKeywordOffset() {\n        return 16;\n    }\n    // Select show / hide type\n    get showHideType() {\n        var _a;\n        return ((_a = this._showHideType) !== null && _a !== void 0 ? _a : (this._showHideType = this.newShowHideType()));\n    }\n    newShowHideType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueShowHideType.SHAPE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueShowHideType.SHAPE,\n                        text: {\n                            value: themeShape.toShowHideTypeLabel(EShapeActionValueShowHideType.SHAPE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueShowHideType.LAYER,\n                        text: {\n                            value: themeShape.toShowHideTypeLabel(EShapeActionValueShowHideType.LAYER)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get showHideTypeLayout() {\n        var _a;\n        return ((_a = this._showHideTypeLayout) !== null && _a !== void 0 ? _a : (this._showHideTypeLayout = this.newLabeled(null, this.showHideType)));\n    }\n    onChangeShowHideTypeLayout(select) {\n        const showHideTypeLayout = this.showHideTypeLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            showHideTypeLayout.show();\n        }\n        else {\n            showHideTypeLayout.hide();\n        }\n    }\n    // Select blink type\n    get blinkType() {\n        var _a;\n        return ((_a = this._blinkType) !== null && _a !== void 0 ? _a : (this._blinkType = this.newBlinkType()));\n    }\n    newBlinkType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueBlinkType.VISIBILITY,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueBlinkType.VISIBILITY,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.VISIBILITY)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.BRIGHTEN,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.BRIGHTEN)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.DARKEN,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.DARKEN)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.OPACITY,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.OPACITY)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.COLOR_FILL,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.COLOR_FILL)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueBlinkType.COLOR_STROKE,\n                        text: {\n                            value: themeShape.toBlinkTypeLabel(EShapeActionValueBlinkType.COLOR_STROKE)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get blinkTypeLayout() {\n        var _a;\n        return ((_a = this._blinkTypeLayout) !== null && _a !== void 0 ? _a : (this._blinkTypeLayout = this.newLabeled(null, this.blinkType)));\n    }\n    onChangeBlinkTypeLayout(select) {\n        const blinkTypeLayout = this.blinkTypeLayout;\n        if (select === EShapeActionValueType.BLINK) {\n            blinkTypeLayout.show();\n        }\n        else {\n            blinkTypeLayout.hide();\n        }\n    }\n    // Transform type\n    get transformType() {\n        var _a;\n        return ((_a = this._transformType) !== null && _a !== void 0 ? _a : (this._transformType = this.newTransformType()));\n    }\n    newTransformType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformType.MOVE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformType.MOVE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.MOVE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformType.ROTATE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.ROTATE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformType.RESIZE,\n                        text: {\n                            value: themeShape.toTransformTypeLabel(EShapeActionValueTransformType.RESIZE)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get transformTypeLayout() {\n        var _a;\n        return ((_a = this._transformTypeLayout) !== null && _a !== void 0 ? _a : (this._transformTypeLayout = this.newLabeled(null, this.transformType)));\n    }\n    onChangeTransformTypeLayout(select) {\n        const transformTypeLayout = this.transformTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            transformTypeLayout.show();\n        }\n        else {\n            transformTypeLayout.hide();\n        }\n    }\n    // Select color type\n    get changeColorType() {\n        var _a;\n        return ((_a = this._changeColorType) !== null && _a !== void 0 ? _a : (this._changeColorType = this.newChangeColorType()));\n    }\n    newChangeColorType() {\n        const themeShape = this.themeShape;\n        return new DSelectMultiple({\n            weight: 1,\n            values: [EShapeActionValueChangeColorType.FILL],\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeColorType.FILL,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.FILL)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.STROKE,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.STROKE)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.TEXT,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.TEXT)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueChangeColorType.TEXT_OUTLINE,\n                        text: {\n                            value: themeShape.toChangeColorTypeLabel(EShapeActionValueChangeColorType.TEXT_OUTLINE)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    }\n    get changeColorTypeLayout() {\n        var _a;\n        return ((_a = this._changeColorTypeLayout) !== null && _a !== void 0 ? _a : (this._changeColorTypeLayout = this.newLabeled(null, this.changeColorType)));\n    }\n    onChangeChangeColorTypeLayout(select) {\n        const changeColorTypeLayout = this.changeColorTypeLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            changeColorTypeLayout.show();\n        }\n        else {\n            changeColorTypeLayout.hide();\n        }\n    }\n    // Select color target\n    get changeColorTarget() {\n        var _a;\n        return ((_a = this._changeColorTarget) !== null && _a !== void 0 ? _a : (this._changeColorTarget = this.newChangeColorTarget()));\n    }\n    newChangeColorTarget() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.COLOR,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.COLOR)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.ALPHA,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.ALPHA)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.CODE,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.CODE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeColorTarget.BRIGHTNESS,\n                        text: {\n                            value: themeShape.toChangeColorTargetLabel(EShapeActionValueChangeColorTarget.BRIGHTNESS)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get changeColorTargetLayout() {\n        var _a;\n        return ((_a = this._changeColorTargetLayout) !== null && _a !== void 0 ? _a : (this._changeColorTargetLayout = this.newLabeled(null, this.changeColorTarget)));\n    }\n    onChangeChangeColorTargetLayout(select) {\n        const changeColorTargetLayout = this.changeColorTargetLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            changeColorTargetLayout.show();\n        }\n        else {\n            changeColorTargetLayout.hide();\n        }\n    }\n    // Select rotate type\n    get rotateType() {\n        var _a;\n        return ((_a = this._rotateType) !== null && _a !== void 0 ? _a : (this._rotateType = this.newRotateType()));\n    }\n    newRotateType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformRotateType.RELATIVE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformRotateType.RELATIVE,\n                        text: {\n                            value: themeShape.toTransformRotateTypeLabel(EShapeActionValueTransformRotateType.RELATIVE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformRotateType.ABSOLUTE,\n                        text: {\n                            value: themeShape.toTransformRotateTypeLabel(EShapeActionValueTransformRotateType.ABSOLUTE)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get rotateTypeLayout() {\n        var _a;\n        return ((_a = this._rotateTypeLayout) !== null && _a !== void 0 ? _a : (this._rotateTypeLayout = this.newLabeled(null, this.rotateType)));\n    }\n    onChangeRotateTypeLayout(select) {\n        const rotateTypeLayout = this.rotateTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.ROTATE) {\n                rotateTypeLayout.show();\n            }\n            else {\n                rotateTypeLayout.hide();\n            }\n        }\n        else {\n            rotateTypeLayout.hide();\n        }\n    }\n    // Select resize type\n    get resizeType() {\n        var _a;\n        return ((_a = this._resizeType) !== null && _a !== void 0 ? _a : (this._resizeType = this.newResizeType()));\n    }\n    newResizeType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformResizeType.RELATIVE_SIZE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_SIZE,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_SIZE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_SIZE,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_SIZE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_HEIGHT,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_HEIGHT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformResizeType.RELATIVE_WIDTH,\n                        text: {\n                            value: themeShape.toTransformResizeTypeLabel(EShapeActionValueTransformResizeType.RELATIVE_WIDTH)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get resizeTypeLayout() {\n        var _a;\n        return ((_a = this._resizeTypeLayout) !== null && _a !== void 0 ? _a : (this._resizeTypeLayout = this.newLabeled(null, this.resizeType)));\n    }\n    onChangeResizeTypeLayout(select) {\n        const resizeTypeLayout = this.resizeTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.RESIZE) {\n                resizeTypeLayout.show();\n            }\n            else {\n                resizeTypeLayout.hide();\n            }\n        }\n        else {\n            resizeTypeLayout.hide();\n        }\n    }\n    // X Origin\n    get originX() {\n        var _a;\n        return ((_a = this._originX) !== null && _a !== void 0 ? _a : (this._originX = this.newOriginX()));\n    }\n    newOriginX() {\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0.5\n            },\n            step: 0.1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get originXLayout() {\n        var _a;\n        return ((_a = this._originXLayout) !== null && _a !== void 0 ? _a : (this._originXLayout = this.newLabeled(this.theme.getInputOriginXLabel(), this.originX)));\n    }\n    onChangeOriginXLayout(select) {\n        const originXLayout = this.originXLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            const transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.RESIZE) {\n                const resizeType = this.resizeType.value;\n                if (resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_WIDTH ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_WIDTH) {\n                    originXLayout.show();\n                }\n                else {\n                    originXLayout.hide();\n                }\n            }\n            else if (transformType === EShapeActionValueTransformType.ROTATE) {\n                originXLayout.show();\n            }\n            else {\n                originXLayout.hide();\n            }\n        }\n        else {\n            originXLayout.hide();\n        }\n    }\n    // Y Origin\n    get originY() {\n        var _a;\n        return ((_a = this._originY) !== null && _a !== void 0 ? _a : (this._originY = this.newOriginY()));\n    }\n    newOriginY() {\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0.5\n            },\n            step: 0.1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get originYLayout() {\n        var _a;\n        return ((_a = this._originYLayout) !== null && _a !== void 0 ? _a : (this._originYLayout = this.newLabeled(this.theme.getInputOriginYLabel(), this.originY)));\n    }\n    onChangeOriginYLayout(select) {\n        const originYLayout = this.originYLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            const transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.RESIZE) {\n                const resizeType = this.resizeType.value;\n                if (resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_SIZE ||\n                    resizeType === EShapeActionValueTransformResizeType.ABSOLUTE_HEIGHT ||\n                    resizeType === EShapeActionValueTransformResizeType.RELATIVE_HEIGHT) {\n                    originYLayout.show();\n                }\n                else {\n                    originYLayout.hide();\n                }\n            }\n            else if (transformType === EShapeActionValueTransformType.ROTATE) {\n                originYLayout.show();\n            }\n            else {\n                originYLayout.hide();\n            }\n        }\n        else {\n            originYLayout.hide();\n        }\n    }\n    // Select move type\n    get moveType() {\n        var _a;\n        return ((_a = this._moveType) !== null && _a !== void 0 ? _a : (this._moveType = this.newMoveType()));\n    }\n    newMoveType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueTransformMoveType.RELATIVE_X,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueTransformMoveType.RELATIVE_X,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.RELATIVE_X)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.RELATIVE_Y,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.RELATIVE_Y)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.ABSOLUTE_X,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.ABSOLUTE_X)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.ABSOLUTE_Y,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.ABSOLUTE_Y)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.FORWARD_OR_BACKWARD)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueTransformMoveType.LEFT_OR_RIGHT,\n                        text: {\n                            value: themeShape.toTransformMoveTypeLabel(EShapeActionValueTransformMoveType.LEFT_OR_RIGHT)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get moveTypeLayout() {\n        var _a;\n        return ((_a = this._moveTypeLayout) !== null && _a !== void 0 ? _a : (this._moveTypeLayout = this.newLabeled(null, this.moveType)));\n    }\n    onChangeMoveTypeLayout(select) {\n        const moveTypeLayout = this.moveTypeLayout;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.MOVE) {\n                moveTypeLayout.show();\n            }\n            else {\n                moveTypeLayout.hide();\n            }\n        }\n        else {\n            moveTypeLayout.hide();\n        }\n    }\n    // Select open type\n    get openType() {\n        var _a;\n        return ((_a = this._openType) !== null && _a !== void 0 ? _a : (this._openType = this.newOpenType()));\n    }\n    newOpenType() {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOpenType.DIAGRAM,\n            menu: {\n                items: this.newOpenTypeMenuItems()\n            }\n        });\n    }\n    newOpenTypeMenuItems() {\n        const themeShape = this.themeShape;\n        const result = [\n            {\n                value: EShapeActionValueOpenType.DIAGRAM,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.DIAGRAM)\n                }\n            },\n            {\n                value: EShapeActionValueOpenType.PAGE,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.PAGE)\n                }\n            },\n            {\n                value: EShapeActionValueOpenType.DIALOG,\n                text: {\n                    value: themeShape.toOpenTypeLabel(EShapeActionValueOpenType.DIALOG)\n                }\n            }\n        ];\n        EShapeActionOpenExtensions.each((extension) => {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    }\n    get openTypeLayout() {\n        var _a;\n        return ((_a = this._openTypeLayout) !== null && _a !== void 0 ? _a : (this._openTypeLayout = this.newLabeled(null, this.openType)));\n    }\n    onChangeOpenTypeLayout(select) {\n        const openTypeLayout = this.openTypeLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            openTypeLayout.show();\n        }\n        else {\n            openTypeLayout.hide();\n        }\n    }\n    // Select open dialog type\n    get openDialogType() {\n        var _a;\n        return ((_a = this._openDialogType) !== null && _a !== void 0 ? _a : (this._openDialogType = this.newOpenDialogType()));\n    }\n    newOpenDialogType() {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOpenDialogType.TEXT,\n            menu: {\n                items: this.newOpenDialogTypeMenuItems()\n            }\n        });\n    }\n    newOpenDialogTypeMenuItems() {\n        const themeShape = this.themeShape;\n        const result = [\n            {\n                value: EShapeActionValueOpenDialogType.TEXT,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.INTEGER,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.INTEGER)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.REAL,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.REAL)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.BOOLEAN,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.BOOLEAN)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.DATE,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.DATE)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.TIME,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.TIME)\n                }\n            },\n            {\n                value: EShapeActionValueOpenDialogType.DATETIME,\n                text: {\n                    value: themeShape.toOpenDialogTypeLabel(EShapeActionValueOpenDialogType.DATETIME)\n                }\n            }\n        ];\n        EShapeActionOpenDialogExtensions.each((extension) => {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    }\n    get openDialogTypeLayout() {\n        var _a;\n        return ((_a = this._openDialogTypeLayout) !== null && _a !== void 0 ? _a : (this._openDialogTypeLayout = this.newLabeled(null, this.openDialogType)));\n    }\n    onChangeOpenDialogTypeLayout(select) {\n        const openDialogTypeLayout = this.openDialogTypeLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            if (this.openType.value === EShapeActionValueOpenType.DIALOG) {\n                openDialogTypeLayout.show();\n            }\n            else {\n                openDialogTypeLayout.hide();\n            }\n        }\n        else {\n            openDialogTypeLayout.hide();\n        }\n    }\n    // Select change text type\n    get changeTextType() {\n        var _a;\n        return ((_a = this._changeTextType) !== null && _a !== void 0 ? _a : (this._changeTextType = this.newChangeTextType()));\n    }\n    newChangeTextType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueChangeTextType.TEXT,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueChangeTextType.TEXT,\n                        text: {\n                            value: themeShape.toChangeTextTypeLabel(EShapeActionValueChangeTextType.TEXT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueChangeTextType.NUMBER,\n                        text: {\n                            value: themeShape.toChangeTextTypeLabel(EShapeActionValueChangeTextType.NUMBER)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get changeTextTypeLayout() {\n        var _a;\n        return ((_a = this._changeTextTypeLayout) !== null && _a !== void 0 ? _a : (this._changeTextTypeLayout = this.newLabeled(null, this.changeTextType)));\n    }\n    onChangeChangeTextTypeLayout(select) {\n        const changeTextTypeLayout = this.changeTextTypeLayout;\n        if (select === EShapeActionValueType.CHANGE_TEXT) {\n            changeTextTypeLayout.show();\n        }\n        else {\n            changeTextTypeLayout.hide();\n        }\n    }\n    // Select misc. type\n    get miscType() {\n        var _a;\n        return ((_a = this._miscType) !== null && _a !== void 0 ? _a : (this._miscType = this.newMiscType()));\n    }\n    newMiscType() {\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueMiscType.INPUT_TEXT,\n            menu: {\n                items: this.newMiscTypeMenuItems()\n            }\n        });\n    }\n    newMiscTypeMenuItems() {\n        const themeShape = this.themeShape;\n        const result = [\n            {\n                value: EShapeActionValueMiscType.INPUT_TEXT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_TEXT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.INPUT_INTEGER,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_INTEGER)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.INPUT_REAL,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.INPUT_REAL)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.EMIT_EVENT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.EMIT_EVENT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_BOTH,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_BOTH)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_LOCAL,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_LOCAL)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.WRITE_REMOTE,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.WRITE_REMOTE)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.HTML_ELEMENT,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.HTML_ELEMENT)\n                }\n            },\n            {\n                value: EShapeActionValueMiscType.EXECUTE,\n                text: {\n                    value: themeShape.toMiscTypeLabel(EShapeActionValueMiscType.EXECUTE)\n                }\n            }\n        ];\n        EShapeActionMiscExtensions.each((extension) => {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    }\n    get miscTypeLayout() {\n        var _a;\n        return ((_a = this._miscTypeLayout) !== null && _a !== void 0 ? _a : (this._miscTypeLayout = this.newLabeled(null, this.miscType)));\n    }\n    onChangeMiscTypeLayout(select) {\n        const miscTypeLayout = this.miscTypeLayout;\n        if (select === EShapeActionValueType.MISC) {\n            miscTypeLayout.show();\n        }\n        else {\n            miscTypeLayout.hide();\n        }\n    }\n    // OnInput Action type\n    get onInputAction() {\n        var _a;\n        return ((_a = this._onInputAction) !== null && _a !== void 0 ? _a : (this._onInputAction = this.newOnInputAction()));\n    }\n    newOnInputAction() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueOnInputAction.WRITE_REMOTE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueOnInputAction.EMIT_EVENT,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.EMIT_EVENT)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_BOTH,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_BOTH)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_LOCAL,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_LOCAL)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueOnInputAction.WRITE_REMOTE,\n                        text: {\n                            value: themeShape.toOnInputActionLabel(EShapeActionValueOnInputAction.WRITE_REMOTE)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get onInputActionLayout() {\n        var _a;\n        return ((_a = this._onInputActionLayout) !== null && _a !== void 0 ? _a : (this._onInputActionLayout = this.newLabeled(null, this.onInputAction)));\n    }\n    onChangeOnInputActionLayout(select) {\n        const onInputActionLayout = this.onInputActionLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG_TEXT:\n                case EShapeActionValueOpenType.DIALOG_INTEGER:\n                case EShapeActionValueOpenType.DIALOG_REAL:\n                case EShapeActionValueOpenType.DIALOG_BOOLEAN:\n                    onInputActionLayout.show();\n                    break;\n                case EShapeActionValueOpenType.DIALOG:\n                    const openDialogType = this.openDialogType.value;\n                    if (openDialogType == null) {\n                        onInputActionLayout.hide();\n                    }\n                    else if (EShapeActionValueOpenDialogType.EXTENSION <= openDialogType) {\n                        onInputActionLayout.hide();\n                    }\n                    else {\n                        onInputActionLayout.show();\n                    }\n                    break;\n                default:\n                    onInputActionLayout.hide();\n                    break;\n            }\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                    onInputActionLayout.show();\n                    break;\n                default:\n                    onInputActionLayout.hide();\n                    break;\n            }\n        }\n        else {\n            onInputActionLayout.hide();\n        }\n    }\n    // Select when type\n    get whenType() {\n        var _a;\n        return ((_a = this._whenType) !== null && _a !== void 0 ? _a : (this._whenType = this.newWhenType()));\n    }\n    newWhenType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: UtilHtmlElementWhen.FOCUSED,\n            menu: {\n                items: [\n                    {\n                        value: UtilHtmlElementWhen.CLICKED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.CLICKED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.DOUBLE_CLICKED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.DOUBLE_CLICKED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.FOCUSED,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.FOCUSED)\n                        }\n                    },\n                    {\n                        value: UtilHtmlElementWhen.ALWAYS,\n                        text: {\n                            value: themeShape.toHtmlElementWhenLabel(UtilHtmlElementWhen.ALWAYS)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get whenTypeLayout() {\n        var _a;\n        return ((_a = this._whenTypeLayout) !== null && _a !== void 0 ? _a : (this._whenTypeLayout = this.newLabeled(this.theme.getSelectWhenLabel(), this.whenType)));\n    }\n    toWhenTypeValue(whenType) {\n        switch (whenType) {\n            case UtilHtmlElementWhen.CLICKED:\n                return '\"CLICKED\"';\n            case UtilHtmlElementWhen.DOUBLE_CLICKED:\n                return '\"DOUBLE_CLICKED\"';\n            case UtilHtmlElementWhen.FOCUSED:\n                return '\"FOCUSED\"';\n            case UtilHtmlElementWhen.ALWAYS:\n                return '\"ALWAYS\"';\n        }\n        return '\"FOCUSED\"';\n    }\n    toWhenType(whenTypeValue) {\n        switch (whenTypeValue) {\n            case '\"CLICKED\"':\n                return UtilHtmlElementWhen.CLICKED;\n            case '\"DOUBLE_CLICKED\"':\n                return UtilHtmlElementWhen.DOUBLE_CLICKED;\n            case '\"FOCUSED\"':\n                return UtilHtmlElementWhen.FOCUSED;\n            case '\"ALWAYS\"':\n                return UtilHtmlElementWhen.ALWAYS;\n        }\n        return UtilHtmlElementWhen.FOCUSED;\n    }\n    onChangeWhenTypeLayout(select) {\n        const whenTypeLayout = this.whenTypeLayout;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    whenTypeLayout.show();\n                    break;\n                default:\n                    whenTypeLayout.hide();\n                    break;\n            }\n        }\n        else {\n            whenTypeLayout.hide();\n        }\n    }\n    get gestureType() {\n        var _a;\n        return ((_a = this._gestureType) !== null && _a !== void 0 ? _a : (this._gestureType = this.newGestureType()));\n    }\n    newGestureType() {\n        const themeShape = this.themeShape;\n        return new DSelect({\n            weight: 1,\n            value: EShapeActionValueGestureType.SHAPE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureType.SHAPE,\n                        text: {\n                            value: themeShape.toGestureTypeLabel(EShapeActionValueGestureType.SHAPE)\n                        }\n                    },\n                    {\n                        value: EShapeActionValueGestureType.LAYER,\n                        text: {\n                            value: themeShape.toGestureTypeLabel(EShapeActionValueGestureType.LAYER)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get gestureTypeLayout() {\n        var _a;\n        return ((_a = this._gestureTypeLayout) !== null && _a !== void 0 ? _a : (this._gestureTypeLayout = this.newLabeled(\"\", this.gestureType)));\n    }\n    onChangeGestureTypeLayout(select) {\n        const gestureTypeLayout = this.gestureTypeLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            gestureTypeLayout.show();\n        }\n        else {\n            gestureTypeLayout.hide();\n        }\n    }\n    get gestureOperationType() {\n        var _a;\n        return ((_a = this._gestureOperationType) !== null && _a !== void 0 ? _a : (this._gestureOperationType = this.newGestureOperationType()));\n    }\n    newGestureOperationType() {\n        const themeShape = this.themeShape;\n        return new DSelectMultiple({\n            weight: 1,\n            values: this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL),\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureOperationType.DRAG,\n                        text: {\n                            value: themeShape.toGestureOperationTypeLabel(EShapeActionValueGestureOperationType.DRAG)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueGestureOperationType.PINCH,\n                        text: {\n                            value: themeShape.toGestureOperationTypeLabel(EShapeActionValueGestureOperationType.PINCH)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    }\n    toGestureOperationType(types) {\n        let result = EShapeActionValueGestureOperationType.NONE;\n        for (let i = 0, imax = types.length; i < imax; ++i) {\n            result |= types[i];\n        }\n        return result;\n    }\n    fromGestureOperationType(type) {\n        const result = [];\n        if (type & EShapeActionValueGestureOperationType.DRAG) {\n            result.push(EShapeActionValueGestureOperationType.DRAG);\n        }\n        if (type & EShapeActionValueGestureOperationType.PINCH) {\n            result.push(EShapeActionValueGestureOperationType.PINCH);\n        }\n        return result;\n    }\n    get gestureOperationTypeLayout() {\n        var _a;\n        return ((_a = this._gestureOperationTypeLayout) !== null && _a !== void 0 ? _a : (this._gestureOperationTypeLayout = this.newLabeled(\"\", this.gestureOperationType)));\n    }\n    onChangeGestureOperationTypeLayout(select) {\n        const gestureOperationTypeLayout = this.gestureOperationTypeLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            gestureOperationTypeLayout.show();\n        }\n        else {\n            gestureOperationTypeLayout.hide();\n        }\n    }\n    get selectLayer() {\n        var _a;\n        return ((_a = this._selectLayer) !== null && _a !== void 0 ? _a : (this._selectLayer = this.newSelectLayer()));\n    }\n    newSelectLayer() {\n        return new DSelectMultiple({\n            weight: 1\n        });\n    }\n    newSelectLayerMenuItemOptions() {\n        var _a;\n        const diagram = (_a = this.options) === null || _a === void 0 ? void 0 : _a.diagram;\n        if (diagram != null) {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                const result = [];\n                const layers = canvas.layer.children;\n                for (let i = layers.length - 1; 0 <= i; --i) {\n                    const layer = layers[i];\n                    result.push({\n                        value: i,\n                        text: {\n                            value: layer.name\n                        },\n                        check: true\n                    });\n                }\n                return result;\n            }\n        }\n        return [];\n    }\n    get selectLayerLayout() {\n        var _a;\n        return ((_a = this._selectLayerLayout) !== null && _a !== void 0 ? _a : (this._selectLayerLayout = this.newLabeled(this.theme.getSelectLayerLabel(), this.selectLayer)));\n    }\n    onChangeSelectLayerLayout(select) {\n        const selectLayerLayout = this.selectLayerLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            switch (this.showHideType.value) {\n                case EShapeActionValueShowHideType.LAYER:\n                    selectLayerLayout.show();\n                    break;\n                default:\n                    selectLayerLayout.hide();\n                    break;\n            }\n        }\n        else {\n            selectLayerLayout.hide();\n        }\n    }\n    // Condition\n    get condition() {\n        var _a;\n        return ((_a = this._condition) !== null && _a !== void 0 ? _a : (this._condition = this.newCondition()));\n    }\n    newCondition() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputConditionLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeCondition(select) {\n        const condition = this.condition;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.INPUT_TEXT:\n                case EShapeActionValueMiscType.INPUT_INTEGER:\n                case EShapeActionValueMiscType.INPUT_REAL:\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    condition.hide();\n                    break;\n                default:\n                    condition.show();\n                    break;\n            }\n        }\n        else {\n            condition.show();\n        }\n    }\n    // Interval\n    get interval() {\n        var _a;\n        return ((_a = this._interval) !== null && _a !== void 0 ? _a : (this._interval = this.newInterval()));\n    }\n    newInterval() {\n        return new DInputInteger({\n            weight: 1,\n            text: {\n                value: 1000\n            },\n            min: 0,\n            step: 100,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get intervalLayout() {\n        var _a;\n        return ((_a = this._intervalLayout) !== null && _a !== void 0 ? _a : (this._intervalLayout = this.newIntervalLayout()));\n    }\n    newIntervalLayout() {\n        const theme = this.theme;\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabel(theme.getInputIntervalLabel()),\n                this.interval,\n                new DText({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalUnitLabel(),\n                        align: {\n                            horizontal: DAlignHorizontal.LEFT\n                        }\n                    }\n                })\n            ]\n        });\n    }\n    onChangeIntervalLayout(select) {\n        const intervalLayout = this.intervalLayout;\n        if (select === EShapeActionValueType.BLINK) {\n            intervalLayout.show();\n        }\n        else {\n            intervalLayout.hide();\n        }\n    }\n    // Size\n    get size() {\n        var _a;\n        return ((_a = this._size) !== null && _a !== void 0 ? _a : (this._size = this.newSize()));\n    }\n    newSize() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputSizeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeSize(select) {\n        const size = this.size;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            if (this.transformType.value === EShapeActionValueTransformType.RESIZE) {\n                size.show();\n            }\n            else {\n                size.hide();\n            }\n        }\n        else {\n            size.hide();\n        }\n    }\n    // Move amount\n    get amount() {\n        var _a;\n        return ((_a = this._amount) !== null && _a !== void 0 ? _a : (this._amount = this.newAmount()));\n    }\n    newAmount() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAmountLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeAmount(select) {\n        const amount = this.amount;\n        if (select === EShapeActionValueType.TRANSFORM) {\n            const transformType = this.transformType.value;\n            if (transformType === EShapeActionValueTransformType.MOVE ||\n                transformType === EShapeActionValueTransformType.ROTATE) {\n                amount.show();\n            }\n            else {\n                amount.hide();\n            }\n        }\n        else {\n            amount.hide();\n        }\n    }\n    // Value\n    get contents() {\n        var _a;\n        return ((_a = this._contents) !== null && _a !== void 0 ? _a : (this._contents = this.newContents()));\n    }\n    newContents() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputValueLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeContents(select) {\n        const contents = this.contents;\n        if (select === EShapeActionValueType.CHANGE_TEXT) {\n            contents.show();\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.WRITE_BOTH:\n                case EShapeActionValueMiscType.WRITE_LOCAL:\n                case EShapeActionValueMiscType.WRITE_REMOTE:\n                    contents.show();\n                    break;\n                default:\n                    contents.hide();\n                    break;\n            }\n        }\n        else {\n            contents.hide();\n        }\n    }\n    // Initialization\n    get initialization() {\n        var _a;\n        return ((_a = this._initialization) !== null && _a !== void 0 ? _a : (this._initialization = this.newInitialization()));\n    }\n    newInitialization() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitializationLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeInitialization(select) {\n        const initialization = this.initialization;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    initialization.show();\n                    break;\n                default:\n                    initialization.hide();\n                    break;\n            }\n        }\n        else {\n            initialization.hide();\n        }\n    }\n    // Pointer events layout\n    get pointerEventsLayout() {\n        var _a;\n        return ((_a = this._pointerEventsLayout) !== null && _a !== void 0 ? _a : (this._pointerEventsLayout = this.newLabeled(null, this.pointerEvents)));\n    }\n    onChangePointerEventsLayout(select) {\n        const pointerEventsLayout = this.pointerEventsLayout;\n        if (select === EShapeActionValueType.MISC) {\n            switch (this.miscType.value) {\n                case EShapeActionValueMiscType.HTML_ELEMENT:\n                case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                    pointerEventsLayout.show();\n                    break;\n                default:\n                    pointerEventsLayout.hide();\n                    break;\n            }\n        }\n        else {\n            pointerEventsLayout.hide();\n        }\n    }\n    // Pointer events\n    get pointerEvents() {\n        var _a;\n        return ((_a = this._pointerEvents) !== null && _a !== void 0 ? _a : (this._pointerEvents = this.newPointerEvents()));\n    }\n    newPointerEvents() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckPointEventsLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    // Event Name / Cursor name\n    get targetName() {\n        var _a;\n        return ((_a = this._targetName) !== null && _a !== void 0 ? _a : (this._targetName = this.newTargetName()));\n    }\n    newTargetName() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputTargetNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeTargetName(select) {\n        const targetName = this.targetName;\n        if (select === EShapeActionValueType.EMIT_EVENT ||\n            select === EShapeActionValueType.CHANGE_CURSOR) {\n            targetName.show();\n        }\n        else {\n            targetName.hide();\n        }\n    }\n    // Color\n    get color() {\n        var _a;\n        return ((_a = this._color) !== null && _a !== void 0 ? _a : (this._color = this.newColor()));\n    }\n    newColor() {\n        const result = new DButtonColor({\n            weight: 1\n        });\n        result.dialog.on(\"open\", () => {\n            const dialogNew = result.dialog.new;\n            const dialogCurrent = result.dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    get colorLayout() {\n        var _a;\n        return ((_a = this._colorLayout) !== null && _a !== void 0 ? _a : (this._colorLayout = this.newColorLayout()));\n    }\n    newColorLayout() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getButtonColorLabel()\n                    }\n                }),\n                this.color,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    onChangeColorLayout(select) {\n        const colorLayout = this.colorLayout;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            const changeColorTarget = this.changeColorTarget.value;\n            if (changeColorTarget === EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.COLOR ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.ALPHA) {\n                colorLayout.show();\n            }\n            else {\n                colorLayout.hide();\n            }\n        }\n        else if (select === EShapeActionValueType.BLINK) {\n            const blinkType = this.blinkType.value;\n            if (blinkType === EShapeActionValueBlinkType.COLOR_FILL ||\n                blinkType === EShapeActionValueBlinkType.COLOR_STROKE) {\n                colorLayout.show();\n            }\n            else {\n                colorLayout.hide();\n            }\n        }\n        else {\n            colorLayout.hide();\n        }\n    }\n    // Target\n    get target() {\n        var _a;\n        return ((_a = this._target) !== null && _a !== void 0 ? _a : (this._target = this.newTarget()));\n    }\n    newTarget() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputTargetLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeTarget(select) {\n        const target = this.target;\n        if (select === EShapeActionValueType.OPEN) {\n            target.show();\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            const miscType = this.miscType.value;\n            if (miscType == null) {\n                target.show();\n            }\n            else if (miscType === EShapeActionValueMiscType.HTML_ELEMENT ||\n                miscType === EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS ||\n                EShapeActionValueMiscType.EXTENSION <= miscType) {\n                target.hide();\n            }\n            else {\n                target.show();\n            }\n        }\n        else {\n            target.hide();\n        }\n    }\n    // Argument\n    get argument() {\n        var _a;\n        return ((_a = this._argument) !== null && _a !== void 0 ? _a : (this._argument = this.newArgument()));\n    }\n    newArgument() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputArgumentLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeArgument(select) {\n        const argument = this.argument;\n        if (select === EShapeActionValueType.OPEN) {\n            const openType = this.openType.value;\n            if (openType === EShapeActionValueOpenType.DIALOG) {\n                const openDialogType = this.openDialogType.value;\n                if (openDialogType == null) {\n                    argument.hide();\n                }\n                else if (EShapeActionValueOpenDialogType.EXTENSION <= openDialogType) {\n                    argument.show();\n                }\n                else {\n                    argument.hide();\n                }\n            }\n            else {\n                argument.hide();\n            }\n        }\n        else if (select === EShapeActionValueType.MISC) {\n            const miscType = this.miscType.value;\n            if (miscType != null && EShapeActionValueMiscType.EXTENSION <= miscType) {\n                argument.show();\n            }\n            else {\n                argument.hide();\n            }\n        }\n        else {\n            argument.hide();\n        }\n    }\n    // Color code\n    get colorCode() {\n        var _a;\n        return ((_a = this._colorCode) !== null && _a !== void 0 ? _a : (this._colorCode = this.newColorCode()));\n    }\n    newColorCode() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputColorCodeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeColorCode(select) {\n        const colorCode = this.colorCode;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.CODE) {\n                colorCode.show();\n            }\n            else {\n                colorCode.hide();\n            }\n        }\n        else {\n            colorCode.hide();\n        }\n    }\n    // Alpha code\n    get alphaCode() {\n        var _a;\n        return ((_a = this._alphaCode) !== null && _a !== void 0 ? _a : (this._alphaCode = this.newAlphaCode()));\n    }\n    newAlphaCode() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAlphaCodeLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeAlphaCode(select) {\n        const alphaCode = this.alphaCode;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.CODE) {\n                alphaCode.show();\n            }\n            else {\n                alphaCode.hide();\n            }\n        }\n        else {\n            alphaCode.hide();\n        }\n    }\n    // Brightness\n    get brightness() {\n        var _a;\n        return ((_a = this._brightness) !== null && _a !== void 0 ? _a : (this._brightness = this.newBrightness()));\n    }\n    newBrightness() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputBrightnessLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeBrightness(select) {\n        const brightness = this.brightness;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            if (this.changeColorTarget.value === EShapeActionValueChangeColorTarget.BRIGHTNESS) {\n                brightness.show();\n            }\n            else {\n                brightness.hide();\n            }\n        }\n        else {\n            brightness.hide();\n        }\n    }\n    // Blend\n    get blend() {\n        var _a;\n        return ((_a = this._blend) !== null && _a !== void 0 ? _a : (this._blend = this.newBlend()));\n    }\n    newBlend() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputBlendLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeBlend(select) {\n        const blend = this.blend;\n        if (select === EShapeActionValueType.CHANGE_COLOR) {\n            const changeColorTarget = this.changeColorTarget.value;\n            if (changeColorTarget === EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.COLOR ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.ALPHA ||\n                changeColorTarget === EShapeActionValueChangeColorTarget.CODE) {\n                blend.show();\n            }\n            else {\n                blend.hide();\n            }\n        }\n        else {\n            blend.hide();\n        }\n    }\n    // Initial\n    get initial() {\n        var _a;\n        return ((_a = this._initial) !== null && _a !== void 0 ? _a : (this._initial = this.newInitial()));\n    }\n    newInitial() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeInitial(select) {\n        const initial = this.initial;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.TEXT:\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                        case EShapeActionValueOpenDialogType.BOOLEAN:\n                        case EShapeActionValueOpenDialogType.DATE:\n                        case EShapeActionValueOpenDialogType.TIME:\n                        case EShapeActionValueOpenDialogType.DATETIME:\n                            initial.show();\n                            break;\n                        default:\n                            initial.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    initial.hide();\n                    break;\n            }\n        }\n        else {\n            initial.hide();\n        }\n    }\n    get step() {\n        var _a;\n        return ((_a = this._step) !== null && _a !== void 0 ? _a : (this._step = this.newStep()));\n    }\n    newStep() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputStepLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeStep(select) {\n        const step = this.step;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            step.show();\n                            break;\n                        default:\n                            step.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    step.hide();\n                    break;\n            }\n        }\n        else {\n            step.hide();\n        }\n    }\n    get min() {\n        var _a;\n        return ((_a = this._min) !== null && _a !== void 0 ? _a : (this._min = this.newMin()));\n    }\n    newMin() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputMinLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeMin(select) {\n        const min = this.min;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            min.show();\n                            break;\n                        default:\n                            min.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    min.hide();\n                    break;\n            }\n        }\n        else {\n            min.hide();\n        }\n    }\n    get max() {\n        var _a;\n        return ((_a = this._max) !== null && _a !== void 0 ? _a : (this._max = this.newMax()));\n    }\n    newMax() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputMaxLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onChangeMax(select) {\n        const max = this.max;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    switch (this.openDialogType.value) {\n                        case EShapeActionValueOpenDialogType.INTEGER:\n                        case EShapeActionValueOpenDialogType.REAL:\n                            max.show();\n                            break;\n                        default:\n                            max.hide();\n                            break;\n                    }\n                    break;\n                default:\n                    max.hide();\n                    break;\n            }\n        }\n        else {\n            max.hide();\n        }\n    }\n    // Scale layout\n    get scaleLayout() {\n        var _a;\n        return ((_a = this._scaleLayout) !== null && _a !== void 0 ? _a : (this._scaleLayout = this.newScaleLayout()));\n    }\n    newScaleLayout() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getInputScaleLabel()\n                    }\n                }),\n                this.scaleMin,\n                this.scaleMax,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    onChangeScaleLayout(select) {\n        const scaleLayout = this.scaleLayout;\n        if (select === EShapeActionValueType.GESTURE) {\n            scaleLayout.show();\n        }\n        else {\n            scaleLayout.hide();\n        }\n    }\n    get scaleMin() {\n        var _a;\n        return ((_a = this._scaleMin) !== null && _a !== void 0 ? _a : (this._scaleMin = this.newScaleMin()));\n    }\n    newScaleMin() {\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    // Scale max\n    get scaleMax() {\n        var _a;\n        return ((_a = this._scaleMax) !== null && _a !== void 0 ? _a : (this._scaleMax = this.newScaleMax()));\n    }\n    newScaleMax() {\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get checkBringToFront() {\n        var _a;\n        return ((_a = this._checkBringToFront) !== null && _a !== void 0 ? _a : (this._checkBringToFront = this.newCheckBringToFront()));\n    }\n    newCheckBringToFront() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBringToFrontLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    get checkBringToFrontLayout() {\n        var _a;\n        return ((_a = this._checkBringToFrontLayout) !== null && _a !== void 0 ? _a : (this._checkBringToFrontLayout = this.newLabeled(null, this.checkBringToFront)));\n    }\n    onChangeCheckBringToFrontLayout(select) {\n        const checkBringToFrontLayout = this.checkBringToFrontLayout;\n        if (select === EShapeActionValueType.SHOW_HIDE) {\n            switch (this.showHideType.value) {\n                case EShapeActionValueShowHideType.LAYER:\n                    checkBringToFrontLayout.show();\n                    break;\n                default:\n                    checkBringToFrontLayout.hide();\n                    break;\n            }\n        }\n        else {\n            checkBringToFrontLayout.hide();\n        }\n    }\n    // inNewWindow\n    get inNewWindow() {\n        var _a;\n        return ((_a = this._inNewWindow) !== null && _a !== void 0 ? _a : (this._inNewWindow = this.newInNewWindow()));\n    }\n    newInNewWindow() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckInNewWindowLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    get inNewWindowLayout() {\n        var _a;\n        return ((_a = this._inNewWindowLayout) !== null && _a !== void 0 ? _a : (this._inNewWindowLayout = this.newLabeled(null, this.inNewWindow)));\n    }\n    onChangeInNewWindowLayout(select) {\n        const inNewWindowLayout = this.inNewWindowLayout;\n        if (select === EShapeActionValueType.OPEN) {\n            switch (this.openType.value) {\n                case EShapeActionValueOpenType.DIALOG:\n                    inNewWindowLayout.hide();\n                    break;\n                default:\n                    inNewWindowLayout.show();\n                    break;\n            }\n        }\n        else {\n            inNewWindowLayout.hide();\n        }\n    }\n    get extension() {\n        var _a;\n        return ((_a = this._extension) !== null && _a !== void 0 ? _a : (this._extension = new EDialogActionExtensionContainer(this, this.condition, this.content)));\n    }\n    onChange() {\n        const select = this.select.value;\n        this.onChangeAlphaCode(select);\n        this.onChangeAmount(select);\n        this.onChangeBlend(select);\n        this.onChangeBlinkTypeLayout(select);\n        this.onChangeBrightness(select);\n        this.onChangeChangeColorTargetLayout(select);\n        this.onChangeChangeColorTypeLayout(select);\n        this.onChangeChangeTextTypeLayout(select);\n        this.onChangeCondition(select);\n        this.onChangeColorCode(select);\n        this.onChangeColorLayout(select);\n        this.onChangeInitial(select);\n        this.onChangeStep(select);\n        this.onChangeMin(select);\n        this.onChangeMax(select);\n        this.onChangeIntervalLayout(select);\n        this.onChangeMiscTypeLayout(select);\n        this.onChangeMoveTypeLayout(select);\n        this.onChangeOnInputActionLayout(select);\n        this.onChangeWhenTypeLayout(select);\n        this.onChangeGestureTypeLayout(select);\n        this.onChangeGestureOperationTypeLayout(select);\n        this.onChangeSelectLayerLayout(select);\n        this.onChangeOpenTypeLayout(select);\n        this.onChangeOpenDialogTypeLayout(select);\n        this.onChangeOriginXLayout(select);\n        this.onChangeOriginYLayout(select);\n        this.onChangeResizeTypeLayout(select);\n        this.onChangeRotateTypeLayout(select);\n        this.onChangeShowHideTypeLayout(select);\n        this.onChangeSize(select);\n        this.onChangeTarget(select);\n        this.onChangeArgument(select);\n        this.onChangeTargetName(select);\n        this.onChangeContents(select);\n        this.onChangeInitialization(select);\n        this.onChangePointerEventsLayout(select);\n        this.onChangeTransformTypeLayout(select);\n        this.onChangeScaleLayout(select);\n        this.onChangeCheckBringToFrontLayout(select);\n        this.onChangeInNewWindowLayout(select);\n        this.extension.onChange(select);\n    }\n    reset() {\n        this.select.value = EShapeActionValueType.SHOW_HIDE;\n        this.showHideType.value = EShapeActionValueShowHideType.SHAPE;\n        this.blinkType.value = EShapeActionValueBlinkType.VISIBILITY;\n        this.transformType.value = EShapeActionValueTransformType.MOVE;\n        this.changeColorType.values = [EShapeActionValueChangeColorType.FILL];\n        this.changeColorTarget.value = EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA;\n        this.resizeType.value = EShapeActionValueTransformResizeType.RELATIVE_SIZE;\n        this.originY.value = 0.5;\n        this.originX.value = 0.5;\n        this.moveType.value = EShapeActionValueTransformMoveType.RELATIVE_X;\n        this.rotateType.value = EShapeActionValueTransformRotateType.RELATIVE;\n        this.openType.value = EShapeActionValueOpenType.DIAGRAM;\n        this.openDialogType.value = EShapeActionValueOpenDialogType.TEXT;\n        this.changeTextType.value = EShapeActionValueChangeTextType.TEXT;\n        this.miscType.value = EShapeActionValueMiscType.INPUT_TEXT;\n        this.onInputAction.value = EShapeActionValueOnInputAction.WRITE_REMOTE;\n        this.whenType.value = UtilHtmlElementWhen.FOCUSED;\n        this.gestureType.value = EShapeActionValueGestureType.SHAPE;\n        this.gestureOperationType.values = this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL);\n        this.selectLayer.values = [];\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        this.condition.input.value = \"\";\n        this.size.input.value = \"\";\n        this.amount.input.value = \"\";\n        this.contents.input.value = \"\";\n        this.initialization.input.value = \"\";\n        this.pointerEvents.state.isActive = true;\n        this.targetName.input.value = \"\";\n        this.interval.value = 1000;\n        this.color.value.color = 0xffffff;\n        this.color.value.alpha = 1;\n        this.target.input.value = \"\";\n        this.argument.input.value = \"\";\n        this.colorCode.input.value = \"\";\n        this.alphaCode.input.value = \"\";\n        this.brightness.input.value = \"\";\n        this.blend.input.value = \"\";\n        this.initial.input.value = \"\";\n        this.step.input.value = \"\";\n        this.min.input.value = \"\";\n        this.max.input.value = \"\";\n        this.scaleMin.value = 0.05;\n        this.scaleMax.value = 20;\n        this.checkBringToFront.state.isActive = false;\n        this.inNewWindow.state.isActive = false;\n        this.extension.reset();\n        this.onChange();\n        return this;\n    }\n    get value() {\n        var _a, _b, _c, _d;\n        const select = this.select.value;\n        const condition = this.condition.input.value;\n        if (select != null) {\n            switch (select) {\n                case EShapeActionValueType.SHOW_HIDE:\n                    switch (this.showHideType.value) {\n                        case EShapeActionValueShowHideType.SHAPE:\n                        case null:\n                            return new EShapeActionValueShowHideShape(condition);\n                        case EShapeActionValueShowHideType.LAYER:\n                            return new EShapeActionValueShowHideLayer(condition, this.selectLayer.values.slice(0), this.checkBringToFront.state.isActive);\n                    }\n                    break;\n                case EShapeActionValueType.BLINK:\n                    const blinkType = this.blinkType.value || EShapeActionValueBlinkType.VISIBILITY;\n                    const interval = this.interval.value;\n                    const blinkColor = this.color.value;\n                    return new EShapeActionValueBlink(blinkType, condition, interval, blinkColor.color, blinkColor.alpha);\n                case EShapeActionValueType.CHANGE_COLOR:\n                    const changeColorType = EShapeActionValueChangeColorTypes.pack(this.changeColorType.values);\n                    const changeColorTarget = this.changeColorTarget.value ||\n                        EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA;\n                    switch (changeColorTarget) {\n                        case EShapeActionValueChangeColorTarget.COLOR_AND_ALPHA:\n                        case EShapeActionValueChangeColorTarget.COLOR:\n                        case EShapeActionValueChangeColorTarget.ALPHA:\n                            const changeColor = this.color.value;\n                            return new EShapeActionValueChangeColor(changeColorType, condition, changeColorTarget, changeColor.color, changeColor.alpha, this.blend.input.value);\n                        case EShapeActionValueChangeColorTarget.CODE:\n                            return new EShapeActionValueChangeColorCode(changeColorType, condition, this.colorCode.input.value, this.alphaCode.input.value, this.blend.input.value);\n                        case EShapeActionValueChangeColorTarget.BRIGHTNESS:\n                            return new EShapeActionValueChangeColorBrightness(changeColorType, condition, this.brightness.input.value);\n                    }\n                    break;\n                case EShapeActionValueType.TRANSFORM:\n                    const transformType = this.transformType.value;\n                    const originX = this.originX.value;\n                    const originY = this.originY.value;\n                    switch (transformType) {\n                        case EShapeActionValueTransformType.RESIZE:\n                            const resizeType = this.resizeType.value ||\n                                EShapeActionValueTransformResizeType.RELATIVE_SIZE;\n                            return new EShapeActionValueTransformResize(resizeType, condition, originX, originY, this.size.input.value);\n                        case EShapeActionValueTransformType.MOVE:\n                            const moveType = this.moveType.value ||\n                                EShapeActionValueTransformMoveType.RELATIVE_X;\n                            return new EShapeActionValueTransformMove(moveType, condition, this.amount.input.value);\n                        case EShapeActionValueTransformType.ROTATE:\n                            const rotateType = this.rotateType.value ||\n                                EShapeActionValueTransformRotateType.RELATIVE;\n                            return new EShapeActionValueTransformRotate(rotateType, condition, originX, originY, this.amount.input.value);\n                    }\n                    break;\n                case EShapeActionValueType.CHANGE_TEXT:\n                    const changeTextType = this.changeTextType.value || EShapeActionValueChangeTextType.TEXT;\n                    return new EShapeActionValueChangeText(changeTextType, condition, this.contents.input.value);\n                case EShapeActionValueType.OPEN:\n                    const openType = (_a = this.openType.value) !== null && _a !== void 0 ? _a : EShapeActionValueOpenType.DIAGRAM;\n                    switch (openType) {\n                        case EShapeActionValueOpenType.DIALOG:\n                            const openDialogType = (_b = this.openDialogType.value) !== null && _b !== void 0 ? _b : EShapeActionValueOpenDialogType.TEXT;\n                            switch (openDialogType) {\n                                case EShapeActionValueOpenDialogType.INTEGER:\n                                case EShapeActionValueOpenDialogType.REAL:\n                                    return new EShapeActionValueOpenDialog(condition, this.target.input.value, (_c = this.onInputAction.value) !== null && _c !== void 0 ? _c : EShapeActionValueOnInputAction.EMIT_EVENT, this.initial.input.value, this.step.input.value, this.min.input.value, this.max.input.value, openDialogType);\n                                case EShapeActionValueOpenDialogType.TEXT:\n                                case EShapeActionValueOpenDialogType.BOOLEAN:\n                                case EShapeActionValueOpenDialogType.DATE:\n                                case EShapeActionValueOpenDialogType.TIME:\n                                case EShapeActionValueOpenDialogType.DATETIME:\n                                    return new EShapeActionValueOpenDialog(condition, this.target.input.value, (_d = this.onInputAction.value) !== null && _d !== void 0 ? _d : EShapeActionValueOnInputAction.EMIT_EVENT, this.initial.input.value, \"\", \"\", \"\", openDialogType);\n                                default:\n                                    return new EShapeActionValueOpenDialogExtension(condition, this.target.input.value, this.argument.input.value, openDialogType);\n                            }\n                        case EShapeActionValueOpenType.DIAGRAM:\n                        case EShapeActionValueOpenType.PAGE:\n                            return new EShapeActionValueOpen(openType, condition, this.target.input.value, this.inNewWindow.state.isActive);\n                        default:\n                            return new EShapeActionValueOpenExtension(openType, condition, this.target.input.value, this.inNewWindow.state.isActive);\n                    }\n                case EShapeActionValueType.EMIT_EVENT:\n                    return new EShapeActionValueEmitEvent(condition, this.targetName.input.value);\n                case EShapeActionValueType.CHANGE_CURSOR:\n                    return new EShapeActionValueChangeCursor(condition, this.targetName.input.value);\n                case EShapeActionValueType.GESTURE:\n                    return new EShapeActionValueGesture(condition, this.gestureType.value || EShapeActionValueGestureType.SHAPE, this.toGestureOperationType(this.gestureOperationType.values), this.scaleMin.value, this.scaleMax.value);\n                case EShapeActionValueType.MISC:\n                    const miscType = this.miscType.value || EShapeActionValueMiscType.INPUT_TEXT;\n                    switch (miscType) {\n                        case EShapeActionValueMiscType.INPUT_TEXT:\n                        case EShapeActionValueMiscType.INPUT_REAL:\n                        case EShapeActionValueMiscType.INPUT_INTEGER:\n                            return new EShapeActionValueMiscInput(miscType, this.toWhenTypeValue(this.whenType.value), this.target.input.value, this.onInputAction.value ||\n                                EShapeActionValueOnInputAction.EMIT_EVENT);\n                        case EShapeActionValueMiscType.EMIT_EVENT:\n                            return new EShapeActionValueMiscEmitEvent(condition, this.target.input.value);\n                        case EShapeActionValueMiscType.WRITE_BOTH:\n                        case EShapeActionValueMiscType.WRITE_LOCAL:\n                        case EShapeActionValueMiscType.WRITE_REMOTE:\n                            return new EShapeActionValueMiscWrite(miscType, condition, this.target.input.value, this.contents.input.value);\n                        case EShapeActionValueMiscType.HTML_ELEMENT:\n                            if (this.pointerEvents.state.isActive) {\n                                return new EShapeActionValueMiscHtmlElement(miscType, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                            }\n                            else {\n                                return new EShapeActionValueMiscHtmlElement(EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                            }\n                        case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                            return new EShapeActionValueMiscHtmlElement(miscType, this.toWhenTypeValue(this.whenType.value), this.initialization.input.value);\n                        case EShapeActionValueMiscType.EXECUTE:\n                            return new EShapeActionValueMiscExecute(condition, this.target.input.value);\n                        default:\n                            if (EShapeActionValueMiscType.EXTENSION <= miscType) {\n                                return new EShapeActionValueMiscExtension(miscType, condition, this.argument.input.value);\n                            }\n                    }\n                    break;\n                default:\n                    return this.extension.value;\n            }\n        }\n        return null;\n    }\n    set value(value) {\n        this.selectLayer.menu = new DMenu({\n            fit: true,\n            items: this.newSelectLayerMenuItemOptions()\n        });\n        if (value != null) {\n            this.select.value = value.type;\n            if (value instanceof EShapeActionValueShowHide) {\n                this.condition.input.value = value.condition;\n                this.showHideType.value = EShapeActionValueShowHideType.SHAPE;\n            }\n            else if (value instanceof EShapeActionValueShowHideShape) {\n                this.condition.input.value = value.condition;\n                this.showHideType.value = value.subtype;\n            }\n            else if (value instanceof EShapeActionValueShowHideLayer) {\n                this.condition.input.value = value.condition;\n                this.showHideType.value = value.subtype;\n                this.selectLayer.values = value.layers.slice(0);\n                this.checkBringToFront.state.isActive = value.bringToFront;\n            }\n            else if (value instanceof EShapeActionValueBlink) {\n                this.condition.input.value = value.condition;\n                this.blinkType.value = value.subtype;\n                this.interval.value = value.interval;\n                this.color.value.color = value.color;\n                this.color.value.alpha = value.alpha;\n            }\n            else if (value instanceof EShapeActionValueChangeColor) {\n                this.condition.input.value = value.condition;\n                this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                this.changeColorTarget.value = value.target;\n                this.color.value.color = value.color;\n                this.color.value.alpha = value.alpha;\n                this.blend.input.value = value.blend;\n            }\n            else if (value instanceof EShapeActionValueChangeColorCode) {\n                this.condition.input.value = value.condition;\n                this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                this.changeColorTarget.value = EShapeActionValueChangeColorTarget.CODE;\n                this.colorCode.input.value = value.color;\n                this.alphaCode.input.value = value.alpha;\n                this.blend.input.value = value.blend;\n            }\n            else if (value instanceof EShapeActionValueChangeColorBrightness) {\n                this.condition.input.value = value.condition;\n                this.changeColorType.values = EShapeActionValueChangeColorTypes.unpack(value.subtype);\n                this.changeColorTarget.value = EShapeActionValueChangeColorTarget.BRIGHTNESS;\n                this.brightness.input.value = value.brightness;\n            }\n            else if (value instanceof EShapeActionValueTransformResize) {\n                this.condition.input.value = value.condition;\n                this.transformType.value = EShapeActionValueTransformType.RESIZE;\n                this.resizeType.value = value.opetype;\n                this.originX.value = value.originX;\n                this.originY.value = value.originY;\n                this.size.input.value = value.amount;\n            }\n            else if (value instanceof EShapeActionValueTransformMove) {\n                this.condition.input.value = value.condition;\n                this.transformType.value = EShapeActionValueTransformType.MOVE;\n                this.moveType.value = value.opetype;\n                this.amount.input.value = value.amount;\n            }\n            else if (value instanceof EShapeActionValueTransformRotate) {\n                this.condition.input.value = value.condition;\n                this.transformType.value = EShapeActionValueTransformType.ROTATE;\n                this.rotateType.value = value.opetype;\n                this.originX.value = value.originX;\n                this.originY.value = value.originY;\n                this.amount.input.value = value.amount;\n            }\n            else if (value instanceof EShapeActionValueChangeText) {\n                this.condition.input.value = value.condition;\n                this.changeTextType.value = value.subtype;\n                this.contents.input.value = value.value;\n            }\n            else if (value instanceof EShapeActionValueOpen) {\n                this.condition.input.value = value.condition;\n                this.openType.value = value.subtype;\n                this.target.input.value = value.target;\n                this.inNewWindow.state.isActive = value.inNewWindow;\n            }\n            else if (value instanceof EShapeActionValueOpenDialog) {\n                this.condition.input.value = value.condition;\n                this.openType.value = value.subtype;\n                this.target.input.value = value.target;\n                this.onInputAction.value = value.onInputAction;\n                this.initial.input.value = value.initial;\n                this.step.input.value = value.step;\n                this.min.input.value = value.min;\n                this.max.input.value = value.max;\n                this.openDialogType.value = value.dialogType;\n            }\n            else if (value instanceof EShapeActionValueOpenDialogExtension) {\n                this.condition.input.value = value.condition;\n                this.openType.value = value.subtype;\n                this.target.input.value = value.target;\n                this.argument.input.value = value.argument;\n                this.openDialogType.value = value.dialogType;\n            }\n            else if (value instanceof EShapeActionValueOpenExtension) {\n                this.condition.input.value = value.condition;\n                this.openType.value = value.subtype;\n                this.target.input.value = value.target;\n                this.inNewWindow.state.isActive = value.inNewWindow;\n            }\n            else if (value instanceof EShapeActionValueEmitEvent) {\n                this.condition.input.value = value.condition;\n                this.targetName.input.value = value.name;\n            }\n            else if (value instanceof EShapeActionValueChangeCursor) {\n                this.condition.input.value = value.condition;\n                this.targetName.input.value = value.name;\n            }\n            else if (value instanceof EShapeActionValueGesture) {\n                this.condition.input.value = value.condition;\n                this.gestureType.value = value.subtype;\n                this.gestureOperationType.values = this.fromGestureOperationType(value.operationType);\n                this.scaleMin.value = value.scaleMin;\n                this.scaleMax.value = value.scaleMax;\n            }\n            else if (value instanceof EShapeActionValueMisc) {\n                switch (value.subtype) {\n                    case EShapeActionValueMiscType.INPUT_TEXT:\n                    case EShapeActionValueMiscType.INPUT_REAL:\n                    case EShapeActionValueMiscType.INPUT_INTEGER:\n                        this.miscType.value = value.subtype;\n                        this.whenType.value = this.toWhenType(value.condition);\n                        this.target.input.value = value.target;\n                        this.onInputAction.value = value.onInputAction;\n                        this.contents.input.value = value.value;\n                        break;\n                    case EShapeActionValueMiscType.HTML_ELEMENT:\n                        this.miscType.value = EShapeActionValueMiscType.HTML_ELEMENT;\n                        this.whenType.value = this.toWhenType(value.condition);\n                        this.target.input.value = value.target;\n                        this.onInputAction.value = value.onInputAction;\n                        this.initialization.input.value = value.value;\n                        this.pointerEvents.state.isActive = true;\n                        break;\n                    case EShapeActionValueMiscType.HTML_ELEMENT_WITHOUT_POINTER_EVENTS:\n                        this.miscType.value = EShapeActionValueMiscType.HTML_ELEMENT;\n                        this.whenType.value = this.toWhenType(value.condition);\n                        this.target.input.value = value.target;\n                        this.onInputAction.value = value.onInputAction;\n                        this.initialization.input.value = value.value;\n                        this.pointerEvents.state.isActive = false;\n                        break;\n                    default:\n                        this.condition.input.value = value.condition;\n                        this.miscType.value = value.subtype;\n                        this.target.input.value = value.target;\n                        this.onInputAction.value = value.onInputAction;\n                        this.contents.input.value = value.value;\n                        break;\n                }\n            }\n            else if (value instanceof EShapeActionValueMiscExecute) {\n                this.miscType.value = EShapeActionValueMiscType.EXECUTE;\n                this.condition.input.value = value.condition;\n                this.target.input.value = value.target;\n            }\n            else if (value instanceof EShapeActionValueMiscExtension) {\n                this.miscType.value = EShapeActionValueMiscType.EXTENSION;\n                this.condition.input.value = value.condition;\n                this.argument.input.value = value.argument;\n            }\n            else {\n                this.extension.value = value;\n            }\n            this.onChange();\n        }\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    getType() {\n        return \"EDialogAction\";\n    }\n}\n//# sourceMappingURL=e-dialog-action.js.map","import { DDialogLayered, DInputTextAndLabel, DLayoutSpace, DTable, EShapeDataMapperImpl, EShapeDataValueImpl, EShapeDataValueScope } from \"@wcardinal/wcardinal-ui\";\nexport class EDialogDataMappingValue extends DDialogLayered {\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        result.push(this.inputSource, this.inputDestination, this.inputInitial, new DLayoutSpace({\n            height: 6\n        }), this.table);\n        return result;\n    }\n    get inputSource() {\n        let result = this._inputSource;\n        if (result == null) {\n            result = this.newInputSource();\n            this._inputSource = result;\n        }\n        return result;\n    }\n    newInputSource() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    input: (value) => {\n                        this.onInputSourceChanged(value);\n                    },\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputSourceLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onInputSourceChanged(value) {\n        this._newSource = value;\n        this.updateRows();\n    }\n    get inputDestination() {\n        let result = this._inputDestination;\n        if (result == null) {\n            result = this.newInputDestination();\n            this._inputDestination = result;\n        }\n        return result;\n    }\n    newInputDestination() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    input: (value) => {\n                        this.onInputDestinationChanged(value);\n                    },\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputDestinationLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    onInputDestinationChanged(value) {\n        this._newDestination = value;\n        this.updateRows();\n    }\n    get inputInitial() {\n        let result = this._inputInitial;\n        if (result == null) {\n            result = this.newInputInitial();\n            this._inputInitial = result;\n        }\n        return result;\n    }\n    newInputInitial() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get table() {\n        let result = this._table;\n        if (result == null) {\n            result = this.newTable();\n            this._table = result;\n        }\n        return result;\n    }\n    newTable() {\n        return new DTable({\n            width: \"padding\",\n            height: 300,\n            columns: this.newColumnOptions()\n        });\n    }\n    newColumnOptions() {\n        const theme = this.theme;\n        return [\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnDataIdLabel(),\n                editable: false,\n                sortable: true,\n                getter: (row) => {\n                    return row.id;\n                }\n            },\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnMappedToLabel(),\n                editable: false,\n                sortable: true,\n                getter: (row) => {\n                    return row.mappedId;\n                }\n            }\n        ];\n    }\n    set(value, shape) {\n        let isChanged = false;\n        if (value !== undefined) {\n            if (value != null) {\n                this.inputSource.input.value = value[0];\n                this.inputDestination.input.value = value[1];\n                this.inputInitial.input.value = value[2];\n                this._newSource = value[0];\n                this._newDestination = value[1];\n            }\n            else {\n                this.inputSource.input.value = \"\";\n                this.inputDestination.input.value = \"\";\n                this.inputInitial.input.value = \"\";\n                this._newSource = \"\";\n                this._newDestination = \"\";\n            }\n            isChanged = true;\n        }\n        if (shape !== undefined) {\n            this._ids = this.toIds(shape);\n            isChanged = true;\n        }\n        if (isChanged) {\n            this.updateRows();\n        }\n        return this;\n    }\n    get value() {\n        return [\n            this.inputSource.input.value.trim(),\n            this.inputDestination.input.value.trim(),\n            this.inputInitial.input.value.trim()\n        ];\n    }\n    set value(value) {\n        this.set(value);\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    toIds(shape) {\n        const result = [];\n        if (shape != null) {\n            const ids = new Set();\n            this.newIds(shape.children, ids);\n            ids.forEach((id) => {\n                result.push(id);\n            });\n            result.sort();\n        }\n        return result;\n    }\n    newIds(shapes, result) {\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const data = shape.data;\n            for (let j = 0, jmax = data.size(); j < jmax; ++j) {\n                const value = data.get(j);\n                if (value && value.scope !== EShapeDataValueScope.PRIVATE) {\n                    result.add(value.id);\n                }\n            }\n            const children = shape.children;\n            if (0 < children.length) {\n                this.newIds(children, result);\n            }\n        }\n    }\n    get onUpdateRowsBound() {\n        let result = this._onUpdateRowsBound;\n        if (result == null) {\n            result = this.newOnUpdateRowsBound();\n            this._onUpdateRowsBound = result;\n        }\n        return result;\n    }\n    newOnUpdateRowsBound() {\n        return () => {\n            this.onUpdateRows();\n        };\n    }\n    onUpdateRows() {\n        this._onUpdateRowsTimeout = undefined;\n        if (this._isRowsDirty) {\n            this._isRowsDirty = false;\n            this.table.data.clearAndAddAll(this.newRows());\n            this._onUpdateRowsTimeout = window.setTimeout(this.onUpdateRowsBound, 100);\n        }\n    }\n    newRows() {\n        const ids = this._ids;\n        if (ids == null || ids.length <= 0) {\n            return [];\n        }\n        // Source\n        let mapper = this._mapper;\n        const newSource = this._newSource;\n        if (mapper === undefined || this._lastSource !== newSource) {\n            this._lastSource = newSource;\n            if (newSource != null) {\n                const newSourceTrimmed = newSource.trim();\n                if (0 < newSourceTrimmed.length) {\n                    mapper = new EShapeDataMapperImpl(newSource);\n                }\n                else {\n                    mapper = null;\n                }\n            }\n            else {\n                mapper = null;\n            }\n        }\n        // Destination\n        let destinations = this._destinations;\n        const newDestination = this._newDestination;\n        if (destinations === undefined || this._lastDestination !== newDestination) {\n            this._lastDestination = newDestination;\n            destinations = EShapeDataMapperImpl.split(newDestination);\n        }\n        // Rows\n        const result = [];\n        if (mapper != null) {\n            const value = new EShapeDataValueImpl();\n            value.initial = \"\";\n            for (let i = 0, imax = ids.length; i < imax; ++i) {\n                const id = ids[i];\n                value.id = id;\n                if (mapper.map(value, destinations, \"\")) {\n                    result.push({\n                        id: id,\n                        mappedId: value.id\n                    });\n                }\n            }\n        }\n        else {\n            for (let i = 0, imax = ids.length; i < imax; ++i) {\n                const id = ids[i];\n                result.push({\n                    id: id,\n                    mappedId: id\n                });\n            }\n        }\n        return result;\n    }\n    updateRows() {\n        this._isRowsDirty = true;\n        if (this._onUpdateRowsTimeout == null) {\n            this.onUpdateRows();\n        }\n    }\n    getType() {\n        return \"EDialogDataMappingValue\";\n    }\n}\n//# sourceMappingURL=e-dialog-data-mapping-value.js.map","import { DDialogLayered, DInputInteger, DInputIntegerAndLabel, DInputLabel, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DSelect, EShapeDataValueExtensions, EShapeDataValueImpl, EShapeDataValueOrder, EShapeDataValueRangeType, EShapeDataValueScope, EShapeDataValueType } from \"@wcardinal/wcardinal-ui\";\nexport class EDialogDataValue extends DDialogLayered {\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        result.push(this.layoutType, this.layoutScope, this.inputId, this.inputAs, this.inputInitial, this.layoutInterval, this.inputFormat, this.layoutRangeType, this.inputRangeFrom, this.inputRangeTo, this.inputCapacity, this.layoutOrder);\n        return result;\n    }\n    get inputId() {\n        let result = this._inputId;\n        if (result == null) {\n            result = this.newInputId();\n            this._inputId = result;\n        }\n        return result;\n    }\n    newInputId() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputIdLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get inputAs() {\n        let result = this._inputAs;\n        if (result == null) {\n            result = this.newInputAs();\n            this._inputAs = result;\n        }\n        return result;\n    }\n    newInputAs() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputAsLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutType() {\n        let result = this._layoutType;\n        if (result == null) {\n            result = this.newLayoutType();\n            this._layoutType = result;\n        }\n        return result;\n    }\n    newLayoutType() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectTypeLabel()\n                    }\n                }),\n                this.selectType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    get selectType() {\n        let result = this._selectType;\n        if (result == null) {\n            result = this.newSelectType();\n            result.on(\"change\", () => {\n                this.onChange();\n            });\n            this._selectType = result;\n        }\n        return result;\n    }\n    newSelectType() {\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueType.NUMBER,\n            menu: {\n                items: this.newSelectTypeItems()\n            }\n        });\n    }\n    newSelectTypeItems() {\n        const theme = this.theme;\n        const result = [\n            {\n                value: EShapeDataValueType.BOOLEAN,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.BOOLEAN)\n                }\n            },\n            {\n                value: EShapeDataValueType.BOOLEAN_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.BOOLEAN_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.NUMBER,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.NUMBER)\n                }\n            },\n            {\n                value: EShapeDataValueType.NUMBER_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.NUMBER_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.STRING,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.STRING)\n                }\n            },\n            {\n                value: EShapeDataValueType.STRING_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.STRING_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.OBJECT,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.OBJECT)\n                }\n            },\n            {\n                value: EShapeDataValueType.OBJECT_ARRAY,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.OBJECT_ARRAY)\n                }\n            },\n            {\n                value: EShapeDataValueType.TICKER,\n                text: {\n                    value: theme.getSelectTypeValueLabel(EShapeDataValueType.TICKER)\n                }\n            }\n        ];\n        EShapeDataValueExtensions.each((extension) => {\n            result.push({\n                value: extension.type,\n                text: {\n                    value: extension.label\n                }\n            });\n        });\n        return result;\n    }\n    get layoutScope() {\n        let result = this._layoutScope;\n        if (result == null) {\n            result = this.newLayoutScope();\n            this._layoutScope = result;\n        }\n        return result;\n    }\n    newLayoutScope() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectScopeLabel()\n                    }\n                }),\n                this.selectScope,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    get selectScope() {\n        let result = this._selectScope;\n        if (result == null) {\n            result = this.newSelectScope();\n            this._selectScope = result;\n        }\n        return result;\n    }\n    newSelectScope() {\n        const theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueScope.PUBLIC,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueScope.PUBLIC,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PUBLIC)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueScope.PROTECTED,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PROTECTED)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueScope.PRIVATE,\n                        text: {\n                            value: theme.getSelectScopeValueLabel(EShapeDataValueScope.PRIVATE)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get inputInitial() {\n        let result = this._inputInitial;\n        if (result == null) {\n            result = this.newInputInitial();\n            this._inputInitial = result;\n        }\n        return result;\n    }\n    newInputInitial() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputInitialLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutInterval() {\n        let result = this._layoutInterval;\n        if (result == null) {\n            result = this.newLayoutInterval();\n            this._layoutInterval = result;\n        }\n        return result;\n    }\n    newLayoutInterval() {\n        const theme = this.theme;\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalLabel()\n                    }\n                }),\n                this.inputInterval,\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputIntervalUnitLabel(),\n                        align: {\n                            horizontal: \"LEFT\"\n                        }\n                    }\n                })\n            ]\n        });\n    }\n    get inputInterval() {\n        let result = this._inputInterval;\n        if (result == null) {\n            result = this.newInputInterval();\n            this._inputInterval = result;\n        }\n        return result;\n    }\n    newInputInterval() {\n        return new DInputInteger({\n            weight: 1,\n            text: {\n                value: 1000\n            },\n            step: 1,\n            min: 0,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get inputFormat() {\n        let result = this._inputFormat;\n        if (result == null) {\n            result = this.newInputFormat();\n            this._inputFormat = result;\n        }\n        return result;\n    }\n    newInputFormat() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputFormatLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutRangeType() {\n        let result = this._layoutRangeType;\n        if (result == null) {\n            result = this.newLayoutRangeType();\n            this._layoutRangeType = result;\n        }\n        return result;\n    }\n    newLayoutRangeType() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectRangeTypeLabel()\n                    }\n                }),\n                this.selectRangeType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    get selectRangeType() {\n        let result = this._selectRangeType;\n        if (result == null) {\n            result = this.newSelectRangeType();\n            result.on(\"change\", () => {\n                this.onChange();\n            });\n            this._selectRangeType = result;\n        }\n        return result;\n    }\n    newSelectRangeType() {\n        const theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueRangeType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueRangeType.NONE,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.FROM,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.FROM)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.TO,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.TO)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueRangeType.FROM_TO,\n                        text: {\n                            value: theme.getSelectRangeTypeValueLabel(EShapeDataValueRangeType.FROM_TO)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get inputRangeFrom() {\n        let result = this._inputRangeFrom;\n        if (result == null) {\n            result = this.newInputRangeFrom();\n            this._inputRangeFrom = result;\n        }\n        return result;\n    }\n    newInputRangeFrom() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 90,\n                text: {\n                    value: this.theme.getInputRangeFromLabel()\n                }\n            },\n            space: {\n                width: 90\n            }\n        });\n    }\n    get inputRangeTo() {\n        let result = this._inputRangeTo;\n        if (result == null) {\n            result = this.newInputRangeTo();\n            this._inputRangeTo = result;\n        }\n        return result;\n    }\n    newInputRangeTo() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            input: {\n                weight: 1,\n                text: {\n                    value: 1\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 90,\n                text: {\n                    value: this.theme.getInputRangeToLabel()\n                }\n            },\n            space: {\n                width: 90\n            }\n        });\n    }\n    get inputCapacity() {\n        let result = this._inputCapacity;\n        if (result == null) {\n            result = this.newInputCapacity();\n            this._inputCapacity = result;\n        }\n        return result;\n    }\n    newInputCapacity() {\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            input: {\n                weight: 1,\n                text: {\n                    value: 0\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputCapacityLabel()\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutOrder() {\n        let result = this._layoutOrder;\n        if (result == null) {\n            result = this.newLayoutOrder();\n            this._layoutOrder = result;\n        }\n        return result;\n    }\n    newLayoutOrder() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: this.theme.getSelectOrderLabel()\n                    }\n                }),\n                this.selectOrder,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    get selectOrder() {\n        let result = this._selectOrder;\n        if (result == null) {\n            result = this.newSelectOrder();\n            this._selectOrder = result;\n        }\n        return result;\n    }\n    newSelectOrder() {\n        const theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EShapeDataValueOrder.ASCENDING,\n            menu: {\n                items: [\n                    {\n                        value: EShapeDataValueOrder.ASCENDING,\n                        text: {\n                            value: theme.getSelectOrderValueLabel(EShapeDataValueOrder.ASCENDING)\n                        }\n                    },\n                    {\n                        value: EShapeDataValueOrder.DESCENDING,\n                        text: {\n                            value: theme.getSelectOrderValueLabel(EShapeDataValueOrder.DESCENDING)\n                        }\n                    }\n                ]\n            },\n            on: {\n                init: (self) => {\n                    this._selectOrder = self;\n                }\n            }\n        });\n    }\n    onChange() {\n        const type = this.selectType.value;\n        switch (type) {\n            case EShapeDataValueType.BOOLEAN:\n            case EShapeDataValueType.BOOLEAN_ARRAY:\n            case EShapeDataValueType.NUMBER:\n            case EShapeDataValueType.NUMBER_ARRAY:\n            case EShapeDataValueType.STRING:\n            case EShapeDataValueType.STRING_ARRAY:\n            case EShapeDataValueType.OBJECT:\n            case EShapeDataValueType.OBJECT_ARRAY:\n                this.layoutScope.show();\n                this.inputId.show();\n                this.inputAs.show();\n                this.inputInitial.show();\n                this.layoutInterval.hide();\n                this.inputFormat.show();\n                if (type === EShapeDataValueType.NUMBER) {\n                    this.layoutRangeType.show();\n                    const rangeType = this.selectRangeType.value;\n                    if (rangeType != null && (rangeType & EShapeDataValueRangeType.FROM) !== 0) {\n                        this.inputRangeFrom.show();\n                    }\n                    else {\n                        this.inputRangeFrom.hide();\n                    }\n                    if (rangeType != null && (rangeType & EShapeDataValueRangeType.TO) !== 0) {\n                        this.inputRangeTo.show();\n                    }\n                    else {\n                        this.inputRangeTo.hide();\n                    }\n                }\n                else {\n                    this.layoutRangeType.hide();\n                    this.inputRangeFrom.hide();\n                    this.inputRangeTo.hide();\n                }\n                break;\n            case EShapeDataValueType.TICKER:\n                this.layoutScope.hide();\n                this.inputId.hide();\n                this.inputAs.show();\n                this.inputInitial.hide();\n                this.layoutInterval.show();\n                this.inputFormat.hide();\n                this.layoutRangeType.hide();\n                this.inputRangeFrom.hide();\n                this.inputRangeTo.hide();\n                break;\n            default:\n                this.layoutScope.hide();\n                this.inputId.hide();\n                this.inputAs.show();\n                this.inputInitial.hide();\n                this.layoutInterval.hide();\n                this.inputFormat.hide();\n                this.layoutRangeType.hide();\n                this.inputRangeFrom.hide();\n                this.inputRangeTo.hide();\n                break;\n        }\n    }\n    reset() {\n        this.selectType.value = EShapeDataValueType.NUMBER;\n        this.selectScope.value = EShapeDataValueScope.PUBLIC;\n        this.inputId.input.value = \"\";\n        this.inputAs.input.value = \"\";\n        this.inputInitial.input.value = \"\";\n        this.inputInterval.value = 1000;\n        this.inputFormat.input.value = \"\";\n        this.selectRangeType.value = EShapeDataValueRangeType.NONE;\n        this.inputRangeFrom.input.value = 0;\n        this.inputRangeTo.input.value = 1;\n        this.inputCapacity.input.value = 0;\n        this.selectOrder.value = EShapeDataValueOrder.ASCENDING;\n        this.onChange();\n        return this;\n    }\n    get value() {\n        var _a, _b, _c, _d;\n        const result = new EShapeDataValueImpl();\n        const type = (_a = this.selectType.value) !== null && _a !== void 0 ? _a : EShapeDataValueType.NUMBER;\n        const scope = (_b = this.selectScope.value) !== null && _b !== void 0 ? _b : EShapeDataValueScope.PUBLIC;\n        const order = (_c = this.selectOrder.value) !== null && _c !== void 0 ? _c : EShapeDataValueOrder.ASCENDING;\n        result.type = type;\n        switch (type) {\n            case EShapeDataValueType.BOOLEAN:\n            case EShapeDataValueType.BOOLEAN_ARRAY:\n            case EShapeDataValueType.NUMBER:\n            case EShapeDataValueType.NUMBER_ARRAY:\n            case EShapeDataValueType.STRING:\n            case EShapeDataValueType.STRING_ARRAY:\n            case EShapeDataValueType.OBJECT:\n            case EShapeDataValueType.OBJECT_ARRAY:\n                result.scope = scope;\n                result.id = this.inputId.input.value.trim();\n                result.as = this.inputAs.input.value.trim();\n                result.initial = this.inputInitial.input.value.trim();\n                result.format = this.inputFormat.input.value.trim();\n                if (type === EShapeDataValueType.NUMBER) {\n                    result.range.type = (_d = this.selectRangeType.value) !== null && _d !== void 0 ? _d : EShapeDataValueRangeType.NONE;\n                    result.range.from = this.inputRangeFrom.input.value;\n                    result.range.to = this.inputRangeTo.input.value;\n                }\n                else {\n                    result.range.type = EShapeDataValueRangeType.NONE;\n                    result.range.from = 0;\n                    result.range.to = 1;\n                }\n                result.order = order;\n                break;\n            case EShapeDataValueType.TICKER:\n                result.scope = EShapeDataValueScope.PUBLIC;\n                result.id = \"\";\n                result.as = this.inputAs.input.value.trim();\n                result.initial = `${this.inputInterval.value}`;\n                result.format = \"\";\n                result.range.type = EShapeDataValueRangeType.NONE;\n                result.range.from = 0;\n                result.range.to = 1;\n                result.order = order;\n                break;\n            default:\n                result.scope = EShapeDataValueScope.PUBLIC;\n                result.id = \"\";\n                result.as = this.inputAs.input.value.trim();\n                result.initial = \"\";\n                result.format = \"\";\n                result.range.type = EShapeDataValueRangeType.NONE;\n                result.range.from = 0;\n                result.range.to = 1;\n                result.order = order;\n                break;\n        }\n        return result;\n    }\n    set value(value) {\n        if (value != null) {\n            this.selectType.value = value.type;\n            this.selectScope.value = value.scope;\n            this.inputId.input.value = value.id;\n            this.inputAs.input.value = value.as;\n            if (value.type === EShapeDataValueType.TICKER) {\n                this.inputInitial.input.value = \"\";\n                this.inputInterval.value = this.toInterval(value.initial);\n            }\n            else {\n                this.inputInitial.input.value = value.initial;\n                this.inputInterval.value = 1000;\n            }\n            this.inputFormat.input.value = value.format;\n            this.selectRangeType.value = value.range.type;\n            this.inputRangeFrom.input.value = value.range.from;\n            this.inputRangeTo.input.value = value.range.to;\n            this.inputCapacity.input.value = value.capacity;\n            this.selectOrder.value = value.order;\n            this.onChange();\n        }\n    }\n    toInterval(target) {\n        try {\n            const result = parseInt(target, 10);\n            if (result === result) {\n                return Math.max(0, result);\n            }\n        }\n        catch (_a) {\n            // DO NOTHING\n        }\n        return 1000;\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    getType() {\n        return \"EDialogDataValue\";\n    }\n}\n//# sourceMappingURL=e-dialog-data-value.js.map","import { DButtonCheck, DButtonColor, DDialogLayered, DInputLabel, DInputReal, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DSelectMultiple, EShapeActionValueGestureOperationType } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogLayerValue } from \"./e-dialog-layer-value\";\nimport { EDialogLayerValueBackground } from \"./e-dialog-layer-value-background\";\nexport class EDialogLayer extends DDialogLayered {\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        result.push(this.inputName, this.inputPositionLayout, this.inputSizeLayout, this.checkBackgroundLayout, this.colorBackgroundLayout, this.selectGestureLayout, this.checkVisibleLayout, this.checkInteractiveLayout);\n        return result;\n    }\n    newLabel(label) {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: label\n            }\n        });\n    }\n    newSpace() {\n        return new DLayoutSpace({\n            width: 60\n        });\n    }\n    newLabeled(label, inputA, inputB) {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                label != null ? this.newLabel(label) : this.newSpace(),\n                inputA,\n                inputB,\n                this.newSpace()\n            ]\n        });\n    }\n    get inputName() {\n        let result = this._inputName;\n        if (result == null) {\n            result = this.newInputName();\n            this._inputName = result;\n        }\n        return result;\n    }\n    newInputName() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                width: 60,\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: \"\"\n                },\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get inputX() {\n        let result = this._inputX;\n        if (result == null) {\n            result = this.newInputX();\n            this._inputX = result;\n        }\n        return result;\n    }\n    newInputX() {\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get inputY() {\n        let result = this._inputY;\n        if (result == null) {\n            result = this.newInputY();\n            this._inputY = result;\n        }\n        return result;\n    }\n    newInputY() {\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get inputPositionLayout() {\n        let result = this._inputPositionLayout;\n        if (result == null) {\n            result = this.newLabeled(this.theme.getInputPositionLabel(), this.inputX, this.inputY);\n            this._inputPositionLayout = result;\n        }\n        return result;\n    }\n    get inputWidth() {\n        let result = this._inputWidth;\n        if (result == null) {\n            result = this.newInputWidth();\n            this._inputWidth = result;\n        }\n        return result;\n    }\n    newInputWidth() {\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get inputHeight() {\n        let result = this._inputHeight;\n        if (result == null) {\n            result = this.newInputHeight();\n            this._inputHeight = result;\n        }\n        return result;\n    }\n    newInputHeight() {\n        return new DInputReal({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    get inputSizeLayout() {\n        let result = this._inputSizeLayout;\n        if (result == null) {\n            result = this.newLabeled(this.theme.getInputSizeLabel(), this.inputWidth, this.inputHeight);\n            this._inputSizeLayout = result;\n        }\n        return result;\n    }\n    get checkBackground() {\n        let result = this._checkBackground;\n        if (result == null) {\n            result = this.newCheckBackground();\n            this._checkBackground = result;\n        }\n        return result;\n    }\n    newCheckBackground() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckBackgroundLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            },\n            on: {\n                active: () => {\n                    this.onCheckBackgroundChange(true);\n                },\n                inactive: () => {\n                    this.onCheckBackgroundChange(false);\n                }\n            }\n        });\n    }\n    onCheckBackgroundChange(isActive) {\n        this.colorBackground.state.isDisabled = !isActive;\n    }\n    get checkBackgroundLayout() {\n        let result = this._checkBackgroundLayout;\n        if (result == null) {\n            result = this.newLabeled(this.theme.getTextBackgroundLabel(), this.checkBackground, null);\n            this._checkBackgroundLayout = result;\n        }\n        return result;\n    }\n    get colorBackground() {\n        let result = this._colorBackground;\n        if (result == null) {\n            result = this.newColorBackground();\n            this._colorBackground = result;\n        }\n        return result;\n    }\n    newColorBackground() {\n        return new DButtonColor({\n            weight: 1\n        });\n    }\n    get colorBackgroundLayout() {\n        let result = this._colorBackgroundLayout;\n        if (result == null) {\n            result = this.newLabeled(null, this.colorBackground, null);\n            this._colorBackgroundLayout = result;\n        }\n        return result;\n    }\n    get checkVisible() {\n        let result = this._checkVisible;\n        if (result == null) {\n            result = this.newCheckVisible();\n            this._checkVisible = result;\n        }\n        return result;\n    }\n    newCheckVisible() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckVisibleLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    get checkVisibleLayout() {\n        let result = this._checkVisibleLayout;\n        if (result == null) {\n            result = this.newLabeled(null, this.checkVisible, null);\n            this._checkVisibleLayout = result;\n        }\n        return result;\n    }\n    get checkInteractive() {\n        let result = this._checkInteractive;\n        if (result == null) {\n            result = this.newCheckInteractive();\n            this._checkInteractive = result;\n        }\n        return result;\n    }\n    newCheckInteractive() {\n        return new DButtonCheck({\n            weight: 1,\n            text: {\n                value: this.theme.getCheckInteractiveLabel(),\n                align: {\n                    horizontal: \"LEFT\"\n                }\n            }\n        });\n    }\n    get checkInteractiveLayout() {\n        let result = this._checkInteractiveLayout;\n        if (result == null) {\n            result = this.newLabeled(null, this.checkInteractive, null);\n            this._checkInteractiveLayout = result;\n        }\n        return result;\n    }\n    get selectGesture() {\n        let result = this._selectGesture;\n        if (result == null) {\n            result = this.newSelectGesture();\n            this._selectGesture = result;\n        }\n        return result;\n    }\n    newSelectGesture() {\n        const theme = this.theme;\n        return new DSelectMultiple({\n            weight: 1,\n            values: this.fromGestureOperationType(EShapeActionValueGestureOperationType.ALL),\n            menu: {\n                items: [\n                    {\n                        value: EShapeActionValueGestureOperationType.DRAG,\n                        text: {\n                            value: theme.getSelectGestureValueLabel(EShapeActionValueGestureOperationType.DRAG)\n                        },\n                        check: true\n                    },\n                    {\n                        value: EShapeActionValueGestureOperationType.PINCH,\n                        text: {\n                            value: theme.getSelectGestureValueLabel(EShapeActionValueGestureOperationType.PINCH)\n                        },\n                        check: true\n                    }\n                ]\n            }\n        });\n    }\n    toGestureOperationType(types) {\n        let result = EShapeActionValueGestureOperationType.NONE;\n        for (let i = 0, imax = types.length; i < imax; ++i) {\n            result |= types[i];\n        }\n        return result;\n    }\n    fromGestureOperationType(type) {\n        const result = [];\n        if (type & EShapeActionValueGestureOperationType.DRAG) {\n            result.push(EShapeActionValueGestureOperationType.DRAG);\n        }\n        if (type & EShapeActionValueGestureOperationType.PINCH) {\n            result.push(EShapeActionValueGestureOperationType.PINCH);\n        }\n        return result;\n    }\n    get selectGestureLayout() {\n        let result = this._selectGestureLayout;\n        if (result == null) {\n            result = this.newLabeled(this.theme.getSelectGestureLabel(), this.selectGesture, null);\n            this._selectGestureLayout = result;\n        }\n        return result;\n    }\n    reset(width, height) {\n        this.inputName.input.value = \"\";\n        this.inputX.value = 0;\n        this.inputY.value = 0;\n        this.inputWidth.value = width;\n        this.inputHeight.value = height;\n        this.checkBackground.state.isActive = false;\n        this.colorBackground.value.color = 0xffffff;\n        this.colorBackground.value.alpha = 1;\n        this.checkVisible.state.isActive = true;\n        this.checkInteractive.state.isActive = true;\n        this.selectGesture.values = [];\n        this.onCheckBackgroundChange(false);\n        return this;\n    }\n    get value() {\n        return new EDialogLayerValue(this.inputName.input.value, this.inputX.value, this.inputY.value, this.inputWidth.value, this.inputHeight.value, new EDialogLayerValueBackground(this.checkBackground.state.isActive, this.colorBackground.value.color, this.colorBackground.value.alpha), this.checkVisible.state.isActive, this.checkInteractive.state.isActive, this.toGestureOperationType(this.selectGesture.values));\n    }\n    set value(value) {\n        if (value != null) {\n            this.inputName.input.value = value.name;\n            this.inputX.value = value.x;\n            this.inputY.value = value.y;\n            this.inputWidth.value = value.width;\n            this.inputHeight.value = value.height;\n            this.checkBackground.state.isActive = value.background.enable;\n            this.colorBackground.value.color = value.background.color;\n            this.colorBackground.value.alpha = value.background.alpha;\n            this.checkVisible.state.isActive = value.visible;\n            this.checkInteractive.state.isActive = value.interactive;\n            this.selectGesture.values = this.fromGestureOperationType(value.gesture);\n            this.onCheckBackgroundChange(value.background.enable);\n        }\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    getType() {\n        return \"EDialogLayer\";\n    }\n}\n//# sourceMappingURL=e-dialog-layer.js.map","import { DDialogProcessing } from \"@wcardinal/wcardinal-ui\";\nexport class EDialogProcessing extends DDialogProcessing {\n    toReasonMalformedLabel(target) {\n        switch (target) {\n            case \"uid\":\n                return \"An ID\";\n            case \"password\":\n                return \"A password\";\n            case \"description\":\n                return \"A description\";\n            case \"name\":\n                return \"A name\";\n            case \"label\":\n                return \"A label\";\n            case \"summary\":\n                return \"A summary\";\n            default:\n                return \"Something\";\n        }\n    }\n    toReasonMalformedRange(target) {\n        switch (target) {\n            case \"uid\":\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n            case \"password\":\n                return {\n                    lower: 6,\n                    upper: 32\n                };\n            case \"description\":\n                return {\n                    lower: 0,\n                    upper: 256\n                };\n            case \"name\":\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n            case \"label\":\n                return {\n                    lower: 0,\n                    upper: 16\n                };\n            case \"summary\":\n                return {\n                    lower: 0,\n                    upper: 32\n                };\n            default:\n                return {\n                    lower: 1,\n                    upper: 32\n                };\n        }\n    }\n    toReasonMalformed(at, target, reason) {\n        const label = this.toReasonMalformedLabel(target);\n        switch (reason) {\n            case \"short\":\n            case \"long\":\n                const range = this.toReasonMalformedRange(target);\n                return `Failed to save '${at}'.\\n${label} must be of ${range.lower} to ${range.upper}\\ncharacters long.`;\n            case \"simple\":\n                return `Failed to save '${at}'.\\n${label} must contain letters (A-Za-z_)\\nand digits (0-9).`;\n            case \"slash\":\n                return `Failed to save '${at}'.\\n${label} must not contain the slash mark (/).`;\n            case \"non-alphanumeric\":\n                return (`Failed to save '${at}'.\\n${label} must contain only letters (A-Za-z_),\\n` +\n                    `digits (0-9) and a sharp symbol (#).`);\n            default:\n                return `Failed to save '${at}'.\\n${label} is invalid.`;\n        }\n    }\n    toReasonTarget(at, target, targetLabel) {\n        if (target != null) {\n            return `Failed to save '${at}'.\\n${targetLabel} '${target}' does not exit.`;\n        }\n        else {\n            return `Failed to save '${at}'.\\n${targetLabel} is missing.`;\n        }\n    }\n    toReasonTargetAt(at, target, atLabel, targetLabel) {\n        if (target != null) {\n            return `Failed to save.\\n${atLabel} '${at}'\\nrequires ${targetLabel} '${target}'.`;\n        }\n        else {\n            return `Failed to save.\\n${atLabel} '${at}'\\nrequires ${targetLabel}.`;\n        }\n    }\n    toReason(reason) {\n        if (reason == null) {\n            return undefined;\n        }\n        else {\n            if (0 < reason.length && reason[0] === \"{\") {\n                try {\n                    const parsed = JSON.parse(reason);\n                    switch (parsed.id) {\n                        case \"no-sensor-found\":\n                            return this.toReasonTarget(parsed.at, parsed.target, \"Sensor\");\n                        case \"no-device-model-found\":\n                            return this.toReasonTarget(parsed.at, parsed.target, \"Device model\");\n                        case \"malformed\":\n                            return this.toReasonMalformed(parsed.at, parsed.target, parsed.reason);\n                        case \"invalid-operation-mode\":\n                            return \"Failed to save.\\nInvalid operation mode.\";\n                        case \"no-graphic-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"A graphic sensor mapping\", \"a graphic\");\n                        case \"no-alarm-list-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"An alarm mapping\", \"an alarm list\");\n                        case \"no-trend-graph-found\":\n                            return this.toReasonTargetAt(parsed.at, parsed.target, \"A trend graph sensor mapping\", \"a trend graph\");\n                    }\n                }\n                catch (_a) {\n                    return undefined;\n                }\n            }\n            else {\n                switch (reason) {\n                    case \"duplication\":\n                        return \"Failed to save.\\nThe name has already been used.\";\n                    case \"duplications\":\n                        return \"Failed to save.\\nIDs must be unique.\";\n                    case \"invalid-operation-mode\":\n                        return \"Failed to save.\\nInvalid operation mode.\";\n                    case \"validation\":\n                        return \"A validation error has occurred.\";\n                    case \"validation-fail\":\n                        return \"A validation failed.\";\n                }\n            }\n        }\n        return undefined;\n    }\n    toButtonText(reason) {\n        if (reason === \"validation\" || reason === \"validation-fail\" || reason != undefined) {\n            return \"OK\";\n        }\n        return \"Save\";\n    }\n    reject(reason) {\n        super.reject(this.toReason(reason));\n        // Button text\n        const footer = this.footer;\n        if (footer) {\n            const buttonOk = footer.buttonOk;\n            if (buttonOk) {\n                buttonOk.text = this.toButtonText(reason);\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-dialog-processing.js.map","import { DDialogSelect, DDialogSelectListItem, isString, toSvgTexture } from \"@wcardinal/wcardinal-ui\";\nimport { Texture } from \"pixi.js\";\nlet dialogSelectThumbnailSize = 128;\nexport const getDialogSelectThumbnailSize = () => {\n    return dialogSelectThumbnailSize;\n};\nexport const setDialogSelectThumbnailSize = (size) => {\n    dialogSelectThumbnailSize = size;\n};\nlet dialogSelectTHumbnailNotFound;\nexport const getDialogSelectThumbnailNotFound = () => {\n    let result = dialogSelectTHumbnailNotFound;\n    if (result == null) {\n        result = newDialogTHumbnailNotFound();\n        dialogSelectTHumbnailNotFound = result;\n    }\n    return result;\n};\nexport const newDialogTHumbnailNotFound = () => {\n    const thumbnailSize = getDialogSelectThumbnailSize();\n    const resolution = window.devicePixelRatio || 1;\n    const svgSize = thumbnailSize * resolution;\n    return toSvgTexture(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"${svgSize}px\" width=\"${svgSize}px\" viewBox=\"0 0 24 24\" fill=\"#000000\" fill-opacity=\"0.05\">` +\n        `<path d=\"M19,5v11.17l2,2V5c0-1.1-0.9-2-2-2H5.83l2,2H19z\"/>` +\n        `<path d=\"M2.81,2.81L1.39,4.22L3,5.83V19c0,1.1,0.9,2,2,2h13.17l1.61,1.61l1.41-1.41L2.81,2.81z M5,19V7.83l7.07,7.07L11.25,16 L9,13l-3,4h8.17l2,2H5z\"/>` +\n        `</svg>`, resolution);\n};\nexport const newDialogSelectWithThumbnailsOptions = (controller, toThumbnail, onSelect) => {\n    const thumbnailSize = getDialogSelectThumbnailSize();\n    const thumbnailNotFound = getDialogSelectThumbnailNotFound();\n    const itemPadding = 8;\n    const itemLabelHeight = 30;\n    const itemSize = itemPadding + thumbnailSize + itemLabelHeight + itemPadding;\n    const textures = new Map();\n    const items = new Set();\n    const toImage = (item) => {\n        if (toThumbnail) {\n            const image = toThumbnail(item.id);\n            if (isString(image)) {\n                let texture = textures.get(image);\n                if (texture == null) {\n                    const newTexture = Texture.from(image);\n                    newTexture.baseTexture.on(\"error\", () => {\n                        checkTextures(newTexture, image);\n                    });\n                    texture = newTexture;\n                    textures.set(image, newTexture);\n                }\n                return texture;\n            }\n            else if (image != null) {\n                return image;\n            }\n        }\n        return thumbnailNotFound;\n    };\n    const openTextures = () => {\n        items.forEach((item) => {\n            const value = item.value;\n            if (value != null) {\n                item.image = toImage(value);\n            }\n        });\n    };\n    let clearTimeoutId = null;\n    const clearTextures = () => {\n        items.forEach((item) => {\n            item.image = null;\n        });\n        textures.forEach((texture, url) => {\n            if (texture !== thumbnailNotFound) {\n                const baseTexture = texture.baseTexture;\n                texture.destroy();\n                if (baseTexture) {\n                    baseTexture.destroy();\n                    baseTexture.off(\"error\");\n                }\n            }\n        });\n        textures.clear();\n    };\n    const checkTextures = (texture, url) => {\n        if (texture !== thumbnailNotFound && !texture.valid) {\n            items.forEach((item) => {\n                const image = item.image.get(0);\n                if (image != null && image.source === texture) {\n                    image.source = thumbnailNotFound;\n                }\n            });\n            const baseTexture = texture.baseTexture;\n            texture.destroy();\n            if (baseTexture) {\n                baseTexture.destroy();\n                baseTexture.off(\"error\");\n            }\n            textures.set(url, thumbnailNotFound);\n        }\n    };\n    return {\n        width: \"auto\",\n        height: \"auto\",\n        layout: {\n            width: \"auto\",\n            height: \"auto\"\n        },\n        content: {\n            width: \"auto\",\n            height: \"auto\"\n        },\n        list: {\n            width: itemSize * 3,\n            height: itemSize * 2 + itemPadding * 4,\n            data: {\n                toImage\n            },\n            updater: {\n                newItem: function (data) {\n                    const result = new DDialogSelectListItem(data, {\n                        width: itemSize,\n                        height: itemSize,\n                        padding: itemPadding,\n                        text: {\n                            align: {\n                                vertical: \"BOTTOM\",\n                                horizontal: \"CENTER\"\n                            }\n                        },\n                        image: {\n                            align: {\n                                vertical: \"TOP\",\n                                horizontal: \"CENTER\",\n                                with: \"PADDING\"\n                            },\n                            margin: {\n                                vertical: 0\n                            },\n                            tint: {\n                                color: 0xffffff,\n                                alpha: 1.0\n                            }\n                        }\n                    });\n                    items.add(result);\n                    return result;\n                }\n            }\n        },\n        controller,\n        on: {\n            open: () => {\n                if (clearTimeoutId != null) {\n                    window.clearTimeout(clearTimeoutId);\n                    clearTimeoutId = null;\n                    clearTextures();\n                }\n                openTextures();\n            },\n            close: () => {\n                if (clearTimeoutId == null) {\n                    clearTimeoutId = window.setTimeout(() => {\n                        clearTimeoutId = null;\n                        clearTextures();\n                    }, 1000);\n                }\n            },\n            select: onSelect\n        }\n    };\n};\nexport const newDialogSelectWithThumbnails = (controller, toThumbnail, onSelect) => {\n    return new DDialogSelect(newDialogSelectWithThumbnailsOptions(controller, toThumbnail, onSelect));\n};\n//# sourceMappingURL=e-dialog-select-with-thumbnails.js.map","import { DDialogLayered, DInputLabel, DInputReal, DLayoutHorizontal, DLayoutSpace, DSelect, ESnapperTargetValue, ESnapperTargetValueType } from \"@wcardinal/wcardinal-ui\";\nexport class EDialogSnap extends DDialogLayered {\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getSelectDirectionLabel()\n                    }\n                }),\n                this.selectType,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        result.push(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DInputLabel({\n                    width: 60,\n                    text: {\n                        value: theme.getInputPositionLabel()\n                    }\n                }),\n                this.inputPosition,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        }));\n        return result;\n    }\n    get selectType() {\n        let result = this._selectType;\n        if (result == null) {\n            result = this.newSelectType();\n            this._selectType = result;\n        }\n        return result;\n    }\n    newSelectType() {\n        const theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: ESnapperTargetValueType.VERTICAL,\n            menu: {\n                items: [\n                    {\n                        value: ESnapperTargetValueType.VERTICAL,\n                        text: {\n                            value: theme.getSelectDirectionValueLabel(ESnapperTargetValueType.VERTICAL)\n                        }\n                    },\n                    {\n                        value: ESnapperTargetValueType.HORIZONTAL,\n                        text: {\n                            value: theme.getSelectDirectionValueLabel(ESnapperTargetValueType.HORIZONTAL)\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    get inputPosition() {\n        let result = this._inputPosition;\n        if (result == null) {\n            result = this.newInputPosition();\n            this._inputPosition = result;\n        }\n        return result;\n    }\n    newInputPosition() {\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0\n            },\n            step: 1,\n            on: {\n                enter: () => {\n                    this.ok();\n                }\n            }\n        });\n    }\n    reset() {\n        this.selectType.value = ESnapperTargetValueType.VERTICAL;\n        this.inputPosition.value = 0;\n        return this;\n    }\n    get value() {\n        const type = this.selectType.value;\n        const position = this.inputPosition.value;\n        if (type != null) {\n            return new ESnapperTargetValue(type, position);\n        }\n        return null;\n    }\n    set value(value) {\n        if (value != null) {\n            this.selectType.value = value.type;\n            this.inputPosition.value = value.position;\n        }\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    getType() {\n        return \"EDialogSnap\";\n    }\n}\n//# sourceMappingURL=e-dialog-snap.js.map","import { DBaseState, DButtonAmbient, DButtonCheckRight, DDropdown, DInputText, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, DThemes, EShapeActionValueChangeColor } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogAction } from \"./e-dialog-action\";\nexport class EEditorAction extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        const selection = options.selection;\n        this._selection = selection;\n        this._diagram = options.diagram;\n        this.addChild(new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonNew,\n                this.buttonDelete,\n                this.buttonBringForward,\n                this.buttonSendBackward\n            ]\n        }));\n        this.addChild(this.actionList);\n        this.addChild(this.checkInteractive);\n        this.addChild(this.checkFocusable);\n        this.addChild(this.labelTitle);\n        this.addChild(this.inputTitle);\n        this.addChild(this.labelShortcut);\n        this.addChild(this.inputShortcut);\n        this.addChild(this.labelCursor);\n        this.addChild(this.dropdownCursor);\n        selection.on(\"change\", () => {\n            this.onSelectionChange(selection);\n        });\n        const actionList = this.actionList;\n        actionList.data.selection.on(\"change\", () => {\n            this.onListSelectionChange(actionList);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get buttonNew() {\n        var _a;\n        return ((_a = this._buttonNew) !== null && _a !== void 0 ? _a : (this._buttonNew = this.newButtonNew()));\n    }\n    newButtonNew() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonNewActive(opener) {\n        this.actionDialog\n            .reset()\n            .open(opener)\n            .then((value) => {\n            if (value != null) {\n                this._selection.addActionValue(value);\n            }\n        });\n    }\n    get buttonDelete() {\n        var _a;\n        return ((_a = this._buttonDelete) !== null && _a !== void 0 ? _a : (this._buttonDelete = this.newButtonDelete()));\n    }\n    newButtonDelete() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const first = this.actionList.data.selection.first;\n                    if (first != null) {\n                        this._selection.removeActionValue(first);\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonDelete(actionList) {\n        this.buttonDelete.state.isDisabled = actionList.data.selection.isEmpty();\n    }\n    get buttonBringForward() {\n        var _a;\n        return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n    }\n    newButtonBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const actionList = this.actionList;\n                    const first = actionList.data.selection.first;\n                    const items = actionList.data.items;\n                    if (first != null && items[0] !== first) {\n                        this._selection.bringActionValueForward(first);\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonBringForward(actionList) {\n        const first = actionList.data.selection.first;\n        const items = actionList.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    }\n    get buttonSendBackward() {\n        var _a;\n        return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n    }\n    newButtonSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const actionList = this.actionList;\n                    const first = actionList.data.selection.first;\n                    const items = actionList.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        this._selection.sendActionValueBackward(first);\n                    }\n                }\n            }\n        });\n    }\n    onListSelectionChangeButtonSendBackward(actionList) {\n        const first = actionList.data.selection.first;\n        const items = actionList.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    }\n    get actionDialog() {\n        var _a;\n        return ((_a = this._actionDialog) !== null && _a !== void 0 ? _a : (this._actionDialog = this.newActionDialog()));\n    }\n    newActionDialog() {\n        return new EDialogAction({\n            icons: this._icons,\n            diagram: this._diagram\n        });\n    }\n    get actionList() {\n        var _a;\n        return ((_a = this._actionList) !== null && _a !== void 0 ? _a : (this._actionList = this.newActionList()));\n    }\n    newActionList() {\n        const result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: (item) => {\n                    return item.toLabel();\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        image: {\n                            tint: {\n                                color: null\n                            }\n                        },\n                        on: {\n                            dblclick: (e, _, item) => {\n                                this.onActionListDblClick(e, _, item, result);\n                            },\n                            set: (value, index, item) => {\n                                this.onActionListSet(item, value);\n                            },\n                            unset: (item) => {\n                                this.onActionListUnset(item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    }\n    onActionListDblClick(e, _, item, list) {\n        const oldActionValue = item.value;\n        if (oldActionValue != null) {\n            const actionDialog = this.actionDialog;\n            actionDialog.reset();\n            actionDialog.value = oldActionValue;\n            actionDialog.open(item).then(() => {\n                const newActionValue = actionDialog.value;\n                if (newActionValue != null) {\n                    this._selection.replaceActionValue(oldActionValue, newActionValue, list);\n                }\n            });\n        }\n    }\n    onActionListSet(item, value) {\n        if (value instanceof EShapeActionValueChangeColor) {\n            const image = item.image.get(0);\n            if (image != null) {\n                const theme = DThemes.get(\"DButtonColor\");\n                image.source = theme.getImageSource(item.state);\n                image.tint.color = value.color;\n            }\n        }\n        else {\n            item.image = null;\n        }\n    }\n    onActionListUnset(item) {\n        item.image = null;\n    }\n    onSelectionChangeActionList(selection) {\n        const last = selection.last();\n        const actionList = this.actionList;\n        actionList.data.items = last != null ? last.action.values : [];\n        this.onListSelectionChange(actionList);\n    }\n    get checkInteractive() {\n        var _a;\n        return ((_a = this._checkInteractive) !== null && _a !== void 0 ? _a : (this._checkInteractive = this.newCheckInteractive()));\n    }\n    newCheckInteractive() {\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.theme.getCheckInteractiveLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    this._selection.setInteractive(true);\n                },\n                inactive: () => {\n                    this._selection.setInteractive(false);\n                }\n            }\n        });\n    }\n    onSelectionChangeCheckInteractive(selection) {\n        const last = selection.last();\n        const checkInteractive = this.checkInteractive;\n        if (last != null) {\n            checkInteractive.state.isActive = last.interactive;\n            checkInteractive.state.isDisabled = false;\n        }\n        else {\n            checkInteractive.state.isDisabled = true;\n        }\n    }\n    get checkFocusable() {\n        var _a;\n        return ((_a = this._checkFocusable) !== null && _a !== void 0 ? _a : (this._checkFocusable = this.newCheckFocusable()));\n    }\n    newCheckFocusable() {\n        return new DButtonCheckRight({\n            width: \"padding\",\n            text: {\n                value: this.theme.getCheckFocusableLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    this._selection.setFocusable(true);\n                },\n                inactive: () => {\n                    this._selection.setFocusable(false);\n                }\n            }\n        });\n    }\n    onSelectionChangeCheckFocusable(selection) {\n        const last = selection.last();\n        const checkFocusable = this.checkFocusable;\n        if (last != null) {\n            checkFocusable.state.isActive = last.state.isFocusable;\n            checkFocusable.state.isDisabled = false;\n        }\n        else {\n            checkFocusable.state.isDisabled = true;\n        }\n    }\n    get labelShortcut() {\n        var _a;\n        return ((_a = this._labelShortcut) !== null && _a !== void 0 ? _a : (this._labelShortcut = this.newLabelShortcut()));\n    }\n    newLabelShortcut() {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getInputShortcutLabel()\n            }\n        });\n    }\n    get inputShortcut() {\n        var _a;\n        return ((_a = this._inputShortcut) !== null && _a !== void 0 ? _a : (this._inputShortcut = this.newInputShortcut()));\n    }\n    newInputShortcut() {\n        return new DInputText({\n            width: \"padding\",\n            on: {\n                change: (value) => {\n                    this._selection.setShortcut(this.toNormalizedShortcut(value));\n                }\n            }\n        });\n    }\n    toNormalizedShortcut(value) {\n        const trimmed = value.trim();\n        if (0 < trimmed.length) {\n            return trimmed;\n        }\n    }\n    onSelectionChangeInputShortcut(selection) {\n        var _a;\n        this.inputShortcut.value = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.shortcut) || \"\";\n    }\n    get labelTitle() {\n        var _a;\n        return ((_a = this._labelTitle) !== null && _a !== void 0 ? _a : (this._labelTitle = this.newLabelTitle()));\n    }\n    newLabelTitle() {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getInputTitleLabel()\n            }\n        });\n    }\n    get inputTitle() {\n        var _a;\n        return ((_a = this._inputTitle) !== null && _a !== void 0 ? _a : (this._inputTitle = this.newInputTitle()));\n    }\n    newInputTitle() {\n        return new DInputText({\n            width: \"padding\",\n            on: {\n                change: (value) => {\n                    this._selection.setTitle(this.toNormalizedTitle(value));\n                }\n            }\n        });\n    }\n    toNormalizedTitle(value) {\n        if (0 < value.trim().length) {\n            return value;\n        }\n    }\n    onSelectionChangeInputTitle(selection) {\n        var _a;\n        this.inputTitle.value = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.title) || \"\";\n    }\n    get labelCursor() {\n        var _a;\n        return ((_a = this._labelCursor) !== null && _a !== void 0 ? _a : (this._labelCursor = this.newLabelCursor()));\n    }\n    newLabelCursor() {\n        return new DText({\n            width: \"padding\",\n            text: {\n                value: this.theme.getDropdownCursorLabel()\n            }\n        });\n    }\n    get dropdownCursor() {\n        var _a;\n        return ((_a = this._dropdownCursor) !== null && _a !== void 0 ? _a : (this._dropdownCursor = this.newDropdownCursor()));\n    }\n    newDropdownCursor() {\n        return new DDropdown({\n            width: \"padding\",\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newDropdownCursorMenuItems()\n            },\n            on: {\n                select: (value) => {\n                    var _a;\n                    this.dropdownCursor.text = (_a = this.cursors.get(value)) !== null && _a !== void 0 ? _a : value;\n                    this._selection.setCursor(value);\n                }\n            }\n        });\n    }\n    newDropdownCursorMenuItems() {\n        const result = [];\n        this.cursors.forEach((label, cursor) => {\n            result.push({\n                width: 200,\n                value: cursor,\n                text: {\n                    value: label\n                }\n            });\n        });\n        return result;\n    }\n    get cursors() {\n        var _a;\n        return ((_a = this._cursors) !== null && _a !== void 0 ? _a : (this._cursors = this.theme.getCursors()));\n    }\n    onSelectionChangeDropdownCursor(selection) {\n        var _a, _b, _c;\n        const cursor = (_b = (_a = selection.last()) === null || _a === void 0 ? void 0 : _a.cursor) !== null && _b !== void 0 ? _b : \"\";\n        this.dropdownCursor.text = (_c = this.cursors.get(cursor)) !== null && _c !== void 0 ? _c : cursor;\n    }\n    onSelectionChange(selection) {\n        this.state.isDisabled = selection.isEmpty();\n        this.onSelectionChangeActionList(selection);\n        this.onSelectionChangeCheckInteractive(selection);\n        this.onSelectionChangeCheckFocusable(selection);\n        this.onSelectionChangeInputShortcut(selection);\n        this.onSelectionChangeInputTitle(selection);\n        this.onSelectionChangeDropdownCursor(selection);\n    }\n    onListSelectionChange(actionList) {\n        this.onListSelectionChangeButtonDelete(actionList);\n        this.onListSelectionChangeButtonBringForward(actionList);\n        this.onListSelectionChangeButtonSendBackward(actionList);\n    }\n    getType() {\n        return \"EEditorAction\";\n    }\n}\n//# sourceMappingURL=e-editor-action.js.map","import { DButtonColor, DDialogLayered, DInputIntegerAndLabel, DInputLabel, DInputTextAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutSpace, DMenu, DSelect, isNumber } from \"@wcardinal/wcardinal-ui\";\nexport class EDialogCanvas extends DDialogLayered {\n    constructor(options) {\n        super(options);\n        const canvas = options.canvas;\n        this._canvas = options.canvas;\n        this.onDefaultChange(canvas);\n    }\n    onDefaultChange(def) {\n        const category = def.category;\n        const categoryDefault = category.default;\n        const categoryItems = category.items;\n        const layout = this.layoutCategory;\n        if (categoryDefault != null && 0 < categoryItems.length) {\n            const items = [];\n            for (let i = 0, imax = categoryItems.length; i < imax; ++i) {\n                const categoryItem = categoryItems[i];\n                items.push({\n                    value: categoryItem.id,\n                    text: {\n                        value: categoryItem.label\n                    }\n                });\n            }\n            const selectCategory = this.selectCategory;\n            selectCategory.menu = new DMenu({\n                fit: true,\n                items\n            });\n            selectCategory.value = category.default;\n            layout.state.isEnabled = category.writable;\n            layout.show();\n        }\n        else {\n            layout.hide();\n        }\n    }\n    newContentChildren(theme, options) {\n        const result = super.newContentChildren(theme, options);\n        result.push(this.layoutName, this.layoutLabel, this.layoutWidth, this.layoutHeight, this.layoutCategory, this.layoutSummary, this.layoutDescription, this.layoutBackground);\n        return result;\n    }\n    get layoutName() {\n        let result = this._layoutName;\n        if (result == null) {\n            result = this.newLayoutName();\n            this._layoutName = result;\n        }\n        return result;\n    }\n    newLayoutName() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutLabel() {\n        let result = this._layoutLabel;\n        if (result == null) {\n            result = this.newLayoutLabel();\n            this._layoutLabel = result;\n        }\n        return result;\n    }\n    newLayoutLabel() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutWidth() {\n        let result = this._layoutWidth;\n        if (result == null) {\n            result = this.newLayoutWidth();\n            this._layoutWidth = result;\n        }\n        return result;\n    }\n    newLayoutWidth() {\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutHeight() {\n        let result = this._layoutHeight;\n        if (result == null) {\n            result = this.newLayoutHeight();\n            this._layoutHeight = result;\n        }\n        return result;\n    }\n    newLayoutHeight() {\n        return new DInputIntegerAndLabel({\n            width: \"padding\",\n            label: {\n                text: {\n                    value: this.theme.getInputHeightLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    enter: () => {\n                        this.ok();\n                    }\n                }\n            },\n            space: {\n                width: 60\n            }\n        });\n    }\n    get layoutCategory() {\n        let result = this._layoutCategory;\n        if (result == null) {\n            result = this.newLayoutCategory();\n            this._layoutCategory = result;\n        }\n        return result;\n    }\n    newLayoutCategory() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            visible: false,\n            children: [\n                new DInputLabel({\n                    text: {\n                        value: this.theme.getSelectCategoryLabel()\n                    }\n                }),\n                this.selectCategory,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    get selectCategory() {\n        let result = this._selectCategory;\n        if (result == null) {\n            result = this.newSelectCategory();\n            this._selectCategory = result;\n        }\n        return result;\n    }\n    newSelectCategory() {\n        return new DSelect({\n            weight: 1\n        });\n    }\n    get layoutSummary() {\n        let result = this._layoutSummary;\n        if (result == null) {\n            result = this.newLayoutSummary();\n            this._layoutSummary = result;\n        }\n        return result;\n    }\n    newLayoutSummary() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelSummary(),\n                this.inputSummary,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    newLabelSummary() {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputSummaryLabel()\n            }\n        });\n    }\n    get inputSummary() {\n        let result = this._inputSummary;\n        if (result == null) {\n            result = this.newInputSummary();\n            this._inputSummary = result;\n        }\n        return result;\n    }\n    newInputSummary() {\n        return new DInputTextArea({\n            weight: 1,\n            height: 60\n        });\n    }\n    get layoutDescription() {\n        let result = this._layoutDescription;\n        if (result == null) {\n            result = this.newLayoutDescription();\n            this._layoutDescription = result;\n        }\n        return result;\n    }\n    newLayoutDescription() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelDescription(),\n                this.inputDescription,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    newLabelDescription() {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputDescriptionLabel()\n            }\n        });\n    }\n    get inputDescription() {\n        let result = this._inputDescription;\n        if (result == null) {\n            result = this.newInputDescription();\n            this._inputDescription = result;\n        }\n        return result;\n    }\n    newInputDescription() {\n        return new DInputTextArea({\n            weight: 1,\n            height: 100\n        });\n    }\n    get layoutBackground() {\n        let result = this._layoutBackground;\n        if (result == null) {\n            result = this.newLayoutBackground();\n            this._layoutBackground = result;\n        }\n        return result;\n    }\n    newLayoutBackground() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabelBackground(),\n                this.inputBackground,\n                new DLayoutSpace({\n                    width: 60\n                })\n            ]\n        });\n    }\n    newLabelBackground() {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputBackgroundLabel()\n            }\n        });\n    }\n    get inputBackground() {\n        let result = this._inputBackground;\n        if (result == null) {\n            result = this.newInputBackground();\n            this._inputBackground = result;\n        }\n        return result;\n    }\n    newInputBackground() {\n        const result = new DButtonColor({\n            weight: 1\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    reset(diagram) {\n        const diagramCanvas = diagram === null || diagram === void 0 ? void 0 : diagram.canvas;\n        if (diagramCanvas != null) {\n            const background = diagramCanvas.background;\n            const backgroundColor = background.color;\n            const backgroundAlpha = background.alpha;\n            this.value = {\n                name: diagramCanvas.name,\n                label: diagramCanvas.label,\n                width: diagramCanvas.width,\n                height: diagramCanvas.height,\n                category: diagramCanvas.category,\n                summary: diagramCanvas.summary,\n                description: diagramCanvas.description,\n                background: {\n                    color: isNumber(backgroundColor) ? backgroundColor : 0xffffff,\n                    alpha: isNumber(backgroundAlpha) ? backgroundAlpha : 1\n                }\n            };\n        }\n        else {\n            const canvas = this._canvas;\n            this.value = {\n                name: canvas.name,\n                label: canvas.label,\n                width: canvas.width,\n                height: canvas.height,\n                category: canvas.category.default,\n                summary: canvas.summary,\n                description: canvas.description,\n                background: {\n                    color: canvas.background.color,\n                    alpha: canvas.background.alpha\n                }\n            };\n        }\n        return this;\n    }\n    get value() {\n        return {\n            name: this.layoutName.input.value,\n            label: this.layoutLabel.input.value,\n            width: this.layoutWidth.input.value,\n            height: this.layoutHeight.input.value,\n            category: this.selectCategory.value,\n            summary: this.inputSummary.value,\n            description: this.inputDescription.value,\n            background: this.inputBackground.value\n        };\n    }\n    set value(value) {\n        var _a, _b;\n        this.layoutName.input.value = value.name;\n        this.layoutLabel.input.value = value.label;\n        this.layoutWidth.input.value = value.width;\n        this.layoutHeight.input.value = value.height;\n        this.selectCategory.value = (_b = (_a = value.category) !== null && _a !== void 0 ? _a : this._canvas.category.default) !== null && _b !== void 0 ? _b : null;\n        this.inputSummary.value = value.summary;\n        this.inputDescription.value = value.description;\n        this.inputBackground.value.color = value.background.color;\n        this.inputBackground.value.alpha = value.background.alpha;\n    }\n    getResolvedValue() {\n        return this.value;\n    }\n    getType() {\n        return \"EDialogCanvas\";\n    }\n}\n//# sourceMappingURL=e-dialog-canvas.js.map","import { DBoard, DButtonAmbient, DControllers, DCornerMask, DInputText, DLayoutHorizontal } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentName } from \"../command/e-command-document-name\";\nimport { EDialogCanvas } from \"./e-dialog-canvas\";\nimport { ECommandDocumentAll } from \"../command/e-command-document-all\";\nconst toOptions = (options) => {\n    var _a, _b, _c, _d, _e;\n    (_a = options.width) !== null && _a !== void 0 ? _a : (options.width = 200);\n    (_b = options.height) !== null && _b !== void 0 ? _b : (options.height = 30);\n    (_c = options.padding) !== null && _c !== void 0 ? _c : (options.padding = 0);\n    (_d = options.corner) !== null && _d !== void 0 ? _d : (options.corner = { mask: \"BOTTOM\" });\n    (_e = options.shadow) !== null && _e !== void 0 ? _e : (options.shadow = \"WEAK\");\n    return options;\n};\nexport class EEditorCanvas extends DBoard {\n    constructor(options) {\n        super(toOptions(options));\n        this._icons = options.icons;\n        const diagram = options.diagram;\n        this._diagram = diagram;\n        diagram.on(\"change\", () => {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                this.inputName.value = canvas.name;\n            }\n        });\n        diagram.on(\"set\", (canvas) => {\n            this.inputName.value = canvas.name;\n            this.show();\n        });\n        diagram.on(\"unset\", (canvas) => {\n            this.hide();\n        });\n        this._canvas = options.canvas;\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"padding\",\n            margin: 0,\n            children: [this.inputName, this.buttonEditor]\n        }));\n        this.hide();\n    }\n    get inputName() {\n        let result = this._inputName;\n        if (result == null) {\n            result = this.newInputName();\n            this._inputName = result;\n        }\n        return result;\n    }\n    newInputName() {\n        return new DInputText({\n            weight: 1,\n            background: {\n                color: null\n            },\n            border: {\n                color: null\n            },\n            corner: {\n                mask: DCornerMask.ALL & ~DCornerMask.TOP_LEFT\n            },\n            on: {\n                change: (value) => {\n                    this.onInputNameChange(value);\n                }\n            }\n        });\n    }\n    onInputNameChange(value) {\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        if (canvas != null && canvas.name !== value) {\n            DControllers.getCommandController().push(new ECommandDocumentName(diagram, canvas, value));\n        }\n    }\n    get buttonEditor() {\n        let result = this._buttonEditor;\n        if (result == null) {\n            result = this.newButtonEditor();\n            this._buttonEditor = result;\n        }\n        return result;\n    }\n    newButtonEditor() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_canvas\n            },\n            on: {\n                active: (emitter) => {\n                    this.onButtonEditorActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonEditorActive(opener) {\n        this.dialogEditor.then((dialogEditor) => {\n            const diagram = this._diagram;\n            dialogEditor\n                .reset(diagram)\n                .open(opener)\n                .then((value) => {\n                const canvas = diagram.canvas;\n                if (canvas != null) {\n                    DControllers.getCommandController().push(new ECommandDocumentAll(diagram, canvas, value.name, value.label, value.width, value.height, value.category, value.summary, value.description, value.background.color, value.background.alpha));\n                }\n            });\n        });\n    }\n    get dialogEditor() {\n        let result = this._dialogEditor;\n        if (result == null) {\n            result = this.newDialogEditor();\n            this._dialogEditor = result;\n        }\n        return result;\n    }\n    newDialogEditor() {\n        return this._canvas.get().then((canvas) => {\n            return new EDialogCanvas({\n                canvas\n            });\n        });\n    }\n    render(renderer) {\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        if (canvas != null) {\n            const position = canvas.position;\n            this.position.set(position.x, position.y - this.height);\n            this.updateTransform();\n        }\n        super.render(renderer);\n    }\n    getType() {\n        return \"EEditorCanvas\";\n    }\n}\n//# sourceMappingURL=e-editor-canvas.js.map","import { DButtonAmbient, DButtonCheck, DInputRealAndLabel, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DText, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nconst textFormat = (value) => {\n    return `${+value.toFixed(2)}`;\n};\nconst textFormatDegree = (value) => {\n    return textFormat((value / Math.PI) * 180);\n};\nconst textUnformatDegree = (text) => {\n    return (parseFloat(text) / 180) * Math.PI;\n};\nexport class EEditorCoordinate extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        this._selection = options.selection;\n        this._workRectangle = new Rectangle();\n        // Input updater\n        this._updateInputShape = null;\n        this._updateInputId = null;\n        this._isUpdateInputShapeChanged = false;\n        this._renderInputsBound = () => {\n            this.renderInputs();\n        };\n        //\n        this.addChild(this.newTextLabel());\n        this.addChild(this.inputId);\n        this.addChild(this.inputPositionX);\n        this.addChild(this.inputPositionY);\n        this.addChild(this.inputPositionLeft);\n        this.addChild(this.inputPositionTop);\n        this.addChild(this.inputSizeX);\n        this.addChild(this.inputSizeY);\n        this.addChild(this.inputRotation);\n        this.addChild(this.inputSkew);\n        this.addChild(this.layoutAlignHorizontally);\n        this.addChild(this.layoutAlignVertically);\n        //\n        const selection = this._selection;\n        selection.on(\"change\", () => {\n            this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get inputId() {\n        let result = this._inputId;\n        if (result == null) {\n            result = this.newInputId();\n            this._inputId = result;\n        }\n        return result;\n    }\n    newInputId() {\n        return new DInputTextAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputIdLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: (value) => {\n                        this._selection.setId(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputPositionX() {\n        let result = this._inputPositionX;\n        if (result == null) {\n            result = this.newInputPositionX();\n            this._inputPositionX = result;\n        }\n        return result;\n    }\n    newInputPositionX() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionXLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setPositionX(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputPositionY() {\n        let result = this._inputPositionY;\n        if (result == null) {\n            result = this.newInputPositionY();\n            this._inputPositionY = result;\n        }\n        return result;\n    }\n    newInputPositionY() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionYLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setPositionY(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputPositionLeft() {\n        let result = this._inputPositionLeft;\n        if (result == null) {\n            result = this.newInputPositionLeft();\n            this._inputPositionLeft = result;\n        }\n        return result;\n    }\n    newInputPositionLeft() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionLeftLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setPositionLeft(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputPositionTop() {\n        let result = this._inputPositionTop;\n        if (result == null) {\n            result = this.newInputPositionTop();\n            this._inputPositionTop = result;\n        }\n        return result;\n    }\n    newInputPositionTop() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputPositionTopLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setPositionTop(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputSizeX() {\n        let result = this._inputSizeX;\n        if (result == null) {\n            result = this.newInputSizeX();\n            this._inputSizeX = result;\n        }\n        return result;\n    }\n    newInputSizeX() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSizeXLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setSizeX(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputSizeY() {\n        let result = this._inputSizeY;\n        if (result == null) {\n            result = this.newInputSizeY();\n            this._inputSizeY = result;\n        }\n        return result;\n    }\n    newInputSizeY() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSizeYLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormat\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setSizeY(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputRotation() {\n        let result = this._inputRotation;\n        if (result == null) {\n            result = this.newInputRotation();\n            this._inputRotation = result;\n        }\n        return result;\n    }\n    newInputRotation() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputRotationLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormatDegree\n                },\n                editing: {\n                    unformatter: textUnformatDegree\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setRotation(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputSkew() {\n        let result = this._inputSkew;\n        if (result == null) {\n            result = this.newInputSkew();\n            this._inputSkew = result;\n        }\n        return result;\n    }\n    newInputSkew() {\n        return new DInputRealAndLabel({\n            width: \"padding\",\n            height: \"auto\",\n            label: {\n                text: {\n                    value: this.theme.getInputSkewLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                step: 1,\n                text: {\n                    value: 0,\n                    formatter: textFormatDegree\n                },\n                editing: {\n                    unformatter: textUnformatDegree\n                },\n                on: {\n                    input: (value) => {\n                        this._selection.setSkew(value);\n                    }\n                }\n            }\n        });\n    }\n    get layoutAlignHorizontally() {\n        let result = this._layoutAlignHorizontally;\n        if (result == null) {\n            result = this.newLayoutAlignHorizontally();\n            this._layoutAlignHorizontally = result;\n        }\n        return result;\n    }\n    newLayoutAlignHorizontally() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonAlignLeft,\n                this.buttonAlignCenter,\n                this.buttonAlignRight,\n                this.buttonDistributeHorizontally,\n                this.buttonDistributeVertically,\n                this.buttonLock,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    }\n    get layoutAlignVertically() {\n        let result = this._layoutAlignVertically;\n        if (result == null) {\n            result = this.newLayoutAlignVertically();\n            this._layoutAlignVertically = result;\n        }\n        return result;\n    }\n    newLayoutAlignVertically() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonAlignTop,\n                this.buttonAlignMiddle,\n                this.buttonAlignBottom,\n                this.buttonRotateLeft,\n                this.buttonRotateRight,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    }\n    get buttonAlignLeft() {\n        let result = this._buttonAlignLeft;\n        if (result == null) {\n            result = this.newButtonAlignLeft();\n            this._buttonAlignLeft = result;\n        }\n        return result;\n    }\n    newButtonAlignLeft() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_left\n            },\n            title: this.theme.getButtonAlignLeftTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.alignLeft();\n                }\n            }\n        });\n    }\n    get buttonAlignCenter() {\n        let result = this._buttonAlignCenter;\n        if (result == null) {\n            result = this.newButtonAlignCenter();\n            this._buttonAlignCenter = result;\n        }\n        return result;\n    }\n    newButtonAlignCenter() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_center\n            },\n            title: this.theme.getButtonAlignCenterTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.alignCenter();\n                }\n            }\n        });\n    }\n    get buttonAlignRight() {\n        let result = this._buttonAlignRight;\n        if (result == null) {\n            result = this.newButtonAlignRight();\n            this._buttonAlignRight = result;\n        }\n        return result;\n    }\n    newButtonAlignRight() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_right\n            },\n            title: this.theme.getButtonAlignRightTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.alignRight();\n                }\n            }\n        });\n    }\n    get buttonAlignTop() {\n        let result = this._buttonAlignTop;\n        if (result == null) {\n            result = this.newButtonAlignTop();\n            this._buttonAlignTop = result;\n        }\n        return result;\n    }\n    newButtonAlignTop() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_top\n            },\n            title: this.theme.getButtonAlignTopTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.alignTop();\n                }\n            }\n        });\n    }\n    get buttonAlignMiddle() {\n        let result = this._buttonAlignMiddle;\n        if (result == null) {\n            result = this.newButtonAlignMiddle();\n            this._buttonAlignMiddle = result;\n        }\n        return result;\n    }\n    newButtonAlignMiddle() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_middle\n            },\n            title: this.theme.getButtonAlignMiddleTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.alignMiddle();\n                }\n            }\n        });\n    }\n    get buttonAlignBottom() {\n        let result = this._buttonAlignBottom;\n        if (result == null) {\n            result = this.newButtonAlignBottom();\n            this._buttonAlignBottom = result;\n        }\n        return result;\n    }\n    newButtonAlignBottom() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_align_bottom\n            },\n            title: this.theme.getButtonAlignBottomTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.alignBottom();\n                }\n            }\n        });\n    }\n    get buttonDistributeHorizontally() {\n        let result = this._buttonDistributeHorizontally;\n        if (result == null) {\n            result = this.newButtonDistributeHorizontally();\n            this._buttonDistributeHorizontally = result;\n        }\n        return result;\n    }\n    newButtonDistributeHorizontally() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_distribute_horizontally\n            },\n            title: this.theme.getButtonDistributeHorizontallyTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.distributeHorizontally();\n                }\n            }\n        });\n    }\n    get buttonDistributeVertically() {\n        let result = this._buttonDistributeVertically;\n        if (result == null) {\n            result = this.newButtonDistributeVertically();\n            this._buttonDistributeVertically = result;\n        }\n        return result;\n    }\n    newButtonDistributeVertically() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_distribute_vertically\n            },\n            title: this.theme.getButtonDistributeVerticallyTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    selection.saveForTranslate();\n                    selection.distributeVertically();\n                }\n            }\n        });\n    }\n    get buttonRotateLeft() {\n        let result = this._buttonRotateLeft;\n        if (result == null) {\n            result = this.newButtonRotateLeft();\n            this._buttonRotateLeft = result;\n        }\n        return result;\n    }\n    newButtonRotateLeft() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_rotate_left\n            },\n            title: this.theme.getButtonRotateLeftTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    if (selection.prepareRotate()) {\n                        selection.saveForRotate();\n                        selection.rotate(-0.5 * Math.PI);\n                        selection.finalize();\n                    }\n                }\n            }\n        });\n    }\n    get buttonRotateRight() {\n        let result = this._buttonRotateRight;\n        if (result == null) {\n            result = this.newButtonRotateRight();\n            this._buttonRotateRight = result;\n        }\n        return result;\n    }\n    newButtonRotateRight() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_coordinate_rotate_right\n            },\n            title: this.theme.getButtonRotateRightTitle(),\n            on: {\n                active: () => {\n                    const selection = this._selection;\n                    if (selection.prepareRotate()) {\n                        selection.saveForRotate();\n                        selection.rotate(+0.5 * Math.PI);\n                        selection.finalize();\n                    }\n                }\n            }\n        });\n    }\n    get buttonLock() {\n        let result = this._buttonLock;\n        if (result == null) {\n            result = this.newButtonLock();\n            this._buttonLock = result;\n        }\n        return result;\n    }\n    newButtonLock() {\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: () => {\n                    this._selection.lockCapability(EShapeCapability.COORDINATE);\n                },\n                inactive: () => {\n                    this._selection.unlockCapability(EShapeCapability.COORDINATE);\n                }\n            }\n        });\n    }\n    onSelectionChange(selection) {\n        const last = selection.last();\n        this.state.isDisabled = last == null;\n        const hasPositionCapability = EShapeCapabilities.contains(last, EShapeCapability.POSITION);\n        this.inputPositionX.state.isEnabled = hasPositionCapability;\n        this.inputPositionY.state.isEnabled = hasPositionCapability;\n        this.inputPositionLeft.state.isEnabled = hasPositionCapability;\n        this.inputPositionTop.state.isEnabled = hasPositionCapability;\n        this.inputRotation.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.ROTATION);\n        this.inputSizeX.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.WIDTH);\n        this.inputSizeY.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.HEIGHT);\n        this.inputSkew.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.SKEW);\n        this.buttonLock.state.isActive = this.isLocked(last);\n        this.updateInputs(selection.get());\n    }\n    isLocked(last) {\n        if (last == null) {\n            return false;\n        }\n        const capability = last.getCapability();\n        if (capability == null) {\n            return false;\n        }\n        const target = EShapeCapability.COORDINATE;\n        if (capability.locked & target) {\n            return true;\n        }\n        return false;\n    }\n    renderInputs() {\n        this._updateInputId = null;\n        if (this._isUpdateInputShapeChanged) {\n            this._isUpdateInputShapeChanged = false;\n            const shape = this._updateInputShape;\n            if (shape != null) {\n                const transform = shape.transform;\n                const position = transform.position;\n                const size = shape.size;\n                this.inputId.input.value = shape.id;\n                this.inputPositionX.input.value = position.x;\n                this.inputPositionY.input.value = position.y;\n                this.inputSizeX.input.value = size.x;\n                this.inputSizeY.input.value = size.y;\n                this.inputRotation.input.value = transform.rotation;\n                this.inputSkew.input.value = transform.skew.x;\n                const rectangle = this._workRectangle;\n                shape.getBoundsLocal(false, rectangle);\n                this.inputPositionLeft.input.value = rectangle.x;\n                this.inputPositionTop.input.value = rectangle.y;\n            }\n            this._updateInputId = window.setTimeout(this._renderInputsBound, 100);\n        }\n    }\n    updateInputs(shapes) {\n        const shape = 0 < shapes.length ? shapes[shapes.length - 1] : null;\n        this._updateInputShape = shape;\n        this._isUpdateInputShapeChanged = true;\n        if (this._updateInputId == null) {\n            this.renderInputs();\n        }\n    }\n    getType() {\n        return \"EEditorCoordinate\";\n    }\n}\n//# sourceMappingURL=e-editor-coordinate.js.map","import { DBaseState, DButtonAmbient, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogDataMappingValue } from \"./e-dialog-data-mapping-value\";\nexport class EEditorDataMapping extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        // Selection\n        const selection = options.selection;\n        this._selection = selection;\n        // Icons\n        this._icons = options.icons;\n        // Layout\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonNew,\n                this.buttonDelete,\n                this.buttonBringForward,\n                this.buttonSendBackward\n            ]\n        }));\n        this.addChild(this.listDataMappingValue);\n        // Initialize\n        selection.on(\"change\", () => {\n            this.onSelectionChange(selection);\n        });\n        const listDataMappingValue = this.listDataMappingValue;\n        listDataMappingValue.selection.on(\"change\", () => {\n            this.onListDataMappingValueSelectionChange(listDataMappingValue);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get buttonNew() {\n        let result = this._buttonNew;\n        if (result == null) {\n            result = this.newButtonNew();\n            this._buttonNew = result;\n        }\n        return result;\n    }\n    newButtonNew() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonNewActive(opener) {\n        this.dialogDataMappingValue\n            .set(null, this._selection.last())\n            .open(opener)\n            .then((value) => {\n            if (value != null) {\n                this._selection.addDataMappingValue(value);\n            }\n        });\n    }\n    get buttonDelete() {\n        let result = this._buttonDelete;\n        if (result == null) {\n            result = this.newButtonDelete();\n            this._buttonDelete = result;\n        }\n        return result;\n    }\n    newButtonDelete() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const first = this.listDataMappingValue.selection.first;\n                    if (first != null) {\n                        this._selection.removeDataMappingValue(first);\n                    }\n                }\n            }\n        });\n    }\n    onListDataMappingValueSelectionChangeButtonDelete(listDataMappingValue) {\n        this.buttonDelete.state.isDisabled = listDataMappingValue.data.selection.isEmpty();\n    }\n    get buttonBringForward() {\n        let result = this._buttonBringForward;\n        if (result == null) {\n            result = this.newButtonBringForward();\n            this._buttonBringForward = result;\n        }\n        return result;\n    }\n    newButtonBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const listDataMappingValue = this.listDataMappingValue;\n                    const first = listDataMappingValue.data.selection.first;\n                    const items = listDataMappingValue.data.items;\n                    if (first != null && items[0] !== first) {\n                        this._selection.bringDataMappingValueForward(first);\n                    }\n                }\n            }\n        });\n    }\n    onListDataMappingValueSelectionChangeButtonBringForward(listDataMappingValue) {\n        const first = listDataMappingValue.data.selection.first;\n        const items = listDataMappingValue.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    }\n    get buttonSendBackward() {\n        let result = this._buttonSendBackward;\n        if (result == null) {\n            result = this.newButtonSendBackward();\n            this._buttonSendBackward = result;\n        }\n        return result;\n    }\n    newButtonSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const listDataMappingValue = this.listDataMappingValue;\n                    const first = listDataMappingValue.data.selection.first;\n                    const items = listDataMappingValue.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        this._selection.sendDataMappingValueBackward(first);\n                    }\n                }\n            }\n        });\n    }\n    onListDataMappingValueSelectionChangeButtonSendBackward(listDataMappingValue) {\n        const first = listDataMappingValue.data.selection.first;\n        const items = listDataMappingValue.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    }\n    get dialogDataMappingValue() {\n        let result = this._dialogDataMappingValue;\n        if (result == null) {\n            result = this.newDialogDataMappingValue();\n            this._dialogDataMappingValue = result;\n        }\n        return result;\n    }\n    newDialogDataMappingValue() {\n        return new EDialogDataMappingValue();\n    }\n    get listDataMappingValue() {\n        let result = this._listDataMappingValue;\n        if (result == null) {\n            result = this.newListDataMappingValue();\n            this._listDataMappingValue = result;\n        }\n        return result;\n    }\n    newListDataMappingValue() {\n        const result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: (value) => {\n                    const source = value[0];\n                    const destination = value[1];\n                    const initial = value[2];\n                    if (0 < destination.length) {\n                        if (0 < initial.length) {\n                            return `${source} -> ${destination}, ${initial}`;\n                        }\n                        else {\n                            return `${source} -> ${destination}`;\n                        }\n                    }\n                    else {\n                        if (0 < initial.length) {\n                            return `${source} -> ${initial}`;\n                        }\n                        else {\n                            return `${source}`;\n                        }\n                    }\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: (e, _, item) => {\n                                this.onListDataMappingValueDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    }\n    onListDataMappingValueDblClick(e, _, item, list) {\n        const oldValue = item.value;\n        if (oldValue != null) {\n            this.dialogDataMappingValue\n                .set(oldValue, this._selection.last())\n                .open(item)\n                .then((newValue) => {\n                if (newValue != null) {\n                    this._selection.replaceDataMappingValue(oldValue, newValue, list);\n                }\n            });\n        }\n    }\n    onSelectionChangeListDataMappingValue(selection) {\n        var _a, _b;\n        const listDataMappingValue = this.listDataMappingValue;\n        listDataMappingValue.data.items = ((_b = (_a = selection.last()) === null || _a === void 0 ? void 0 : _a.data.getMapping()) === null || _b === void 0 ? void 0 : _b.values) || [];\n        this.onListDataMappingValueSelectionChange(listDataMappingValue);\n    }\n    onSelectionChange(selection) {\n        this.state.isDisabled = !EShapeCapabilities.contains(selection.last(), EShapeCapability.DATA_MAPPING);\n        this.onSelectionChangeListDataMappingValue(selection);\n    }\n    onListDataMappingValueSelectionChange(listDataMappingValue) {\n        this.onListDataMappingValueSelectionChangeButtonDelete(listDataMappingValue);\n        this.onListDataMappingValueSelectionChangeButtonBringForward(listDataMappingValue);\n        this.onListDataMappingValueSelectionChangeButtonSendBackward(listDataMappingValue);\n    }\n    getType() {\n        return \"EEditorDataMapping\";\n    }\n}\n//# sourceMappingURL=e-editor-data-mapping.js.map","import { DBaseState, DButtonAmbient, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, EShapeDataValueExtensions, EShapeDataValueType } from \"@wcardinal/wcardinal-ui\";\nimport { EDialogDataValue } from \"./e-dialog-data-value\";\nexport class EEditorData extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        // Selection\n        const selection = options.selection;\n        this._selection = selection;\n        // Icons\n        this._icons = options.icons;\n        // Layout\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonNew,\n                this.buttonDelete,\n                this.buttonBringForward,\n                this.buttonSendBackward\n            ]\n        }));\n        this.addChild(this.listDataValue);\n        // Initialize\n        selection.on(\"change\", () => {\n            this.onSelectionChange(selection);\n        });\n        const listDataValue = this.listDataValue;\n        listDataValue.selection.on(\"change\", () => {\n            this.onListDataValueSelectionChange(listDataValue);\n        });\n        this.onSelectionChange(selection);\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get buttonNew() {\n        let result = this._buttonNew;\n        if (result == null) {\n            result = this.newButtonNew();\n            this._buttonNew = result;\n        }\n        return result;\n    }\n    newButtonNew() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonNewActive(opener) {\n        this.dialogDataValue\n            .reset()\n            .open(opener)\n            .then((value) => {\n            if (value != null) {\n                this._selection.addDataValue(value);\n            }\n        });\n    }\n    get buttonDelete() {\n        let result = this._buttonDelete;\n        if (result == null) {\n            result = this.newButtonDelete();\n            this._buttonDelete = result;\n        }\n        return result;\n    }\n    newButtonDelete() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const first = this.listDataValue.selection.first;\n                    if (first != null) {\n                        this._selection.removeDataValue(first);\n                    }\n                }\n            }\n        });\n    }\n    onListDataValueSelectionChangeButtonDelete(listDataValue) {\n        this.buttonDelete.state.isDisabled = listDataValue.data.selection.isEmpty();\n    }\n    get buttonBringForward() {\n        let result = this._buttonBringForward;\n        if (result == null) {\n            result = this.newButtonBringForward();\n            this._buttonBringForward = result;\n        }\n        return result;\n    }\n    newButtonBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const listDataValue = this.listDataValue;\n                    const first = listDataValue.data.selection.first;\n                    const items = listDataValue.data.items;\n                    if (first != null && items[0] !== first) {\n                        this._selection.bringDataValueForward(first);\n                    }\n                }\n            }\n        });\n    }\n    onListDataValueSelectionChangeButtonBringForward(listDataValue) {\n        const first = listDataValue.data.selection.first;\n        const items = listDataValue.data.items;\n        this.buttonBringForward.state.isDisabled = first == null || items[0] === first;\n    }\n    get buttonSendBackward() {\n        let result = this._buttonSendBackward;\n        if (result == null) {\n            result = this.newButtonSendBackward();\n            this._buttonSendBackward = result;\n        }\n        return result;\n    }\n    newButtonSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const listDataValue = this.listDataValue;\n                    const first = listDataValue.data.selection.first;\n                    const items = listDataValue.data.items;\n                    if (first != null && items[items.length - 1] !== first) {\n                        this._selection.sendDataValueBackward(first);\n                    }\n                }\n            }\n        });\n    }\n    onListDataValueSelectionChangeButtonSendBackward(listDataValue) {\n        const first = listDataValue.data.selection.first;\n        const items = listDataValue.data.items;\n        this.buttonSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    }\n    get dialogDataValue() {\n        let result = this._dialogDataValue;\n        if (result == null) {\n            result = this.newDialogDataValue();\n            this._dialogDataValue = result;\n        }\n        return result;\n    }\n    newDialogDataValue() {\n        return new EDialogDataValue();\n    }\n    get listDataValue() {\n        let result = this._listDataValue;\n        if (result == null) {\n            result = this.newListDataValue();\n            this._listDataValue = result;\n        }\n        return result;\n    }\n    newListDataValue() {\n        const result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: (value) => {\n                    const type = value.type;\n                    const as = value.as;\n                    const prefix = 0 < as.length ? `${as}: ` : \"\";\n                    switch (type) {\n                        case EShapeDataValueType.BOOLEAN:\n                        case EShapeDataValueType.BOOLEAN_ARRAY:\n                        case EShapeDataValueType.NUMBER:\n                        case EShapeDataValueType.NUMBER_ARRAY:\n                        case EShapeDataValueType.STRING:\n                        case EShapeDataValueType.STRING_ARRAY:\n                        case EShapeDataValueType.OBJECT:\n                        case EShapeDataValueType.OBJECT_ARRAY:\n                            return prefix + value.id;\n                        case EShapeDataValueType.TICKER:\n                            return prefix + `Ticker ${value.initial} ms`;\n                        default:\n                            const extension = EShapeDataValueExtensions.get(type);\n                            if (extension) {\n                                return prefix + extension.label;\n                            }\n                            return prefix + \"Unknown\";\n                    }\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: (e, _, item) => {\n                                this.onListDataValueDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    }\n    onListDataValueDblClick(e, _, item, list) {\n        const oldValue = item.value;\n        if (oldValue != null) {\n            const dialogDataValue = this.dialogDataValue;\n            dialogDataValue.value = oldValue;\n            dialogDataValue.open(item).then((newValue) => {\n                if (newValue != null) {\n                    this._selection.replaceDataValue(oldValue, newValue, list);\n                }\n            });\n        }\n    }\n    onSelectionChangeListDataValue(selection) {\n        var _a;\n        const listDataValue = this.listDataValue;\n        listDataValue.data.items = ((_a = selection.last()) === null || _a === void 0 ? void 0 : _a.data.values) || [];\n        this.onListDataValueSelectionChange(listDataValue);\n    }\n    onSelectionChange(selection) {\n        this.state.isDisabled = selection.isEmpty();\n        this.onSelectionChangeListDataValue(selection);\n    }\n    onListDataValueSelectionChange(listDataValue) {\n        this.onListDataValueSelectionChangeButtonDelete(listDataValue);\n        this.onListDataValueSelectionChangeButtonBringForward(listDataValue);\n        this.onListDataValueSelectionChangeButtonSendBackward(listDataValue);\n    }\n    getType() {\n        return \"EEditorData\";\n    }\n}\n//# sourceMappingURL=e-editor-data.js.map","import { DListItem, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nexport class EEditorLayerItem extends DListItem {\n    constructor(iconsEye, iconsEyeSlash, work, data, options) {\n        super(data, options);\n        this._iconsEye = iconsEye;\n        this._iconsEyeSlash = iconsEyeSlash;\n        this._iconsWork = work;\n    }\n    onSelect(e, value) {\n        if (e != null) {\n            const local = this._iconsWork;\n            if (\"data\" in e) {\n                this.toLocal(e.data.global, undefined, local);\n                if (local.x <= this._iconsEye.width + this.padding.getLeft()) {\n                    this.emit(\"eyeclick\", e, value, this);\n                    return;\n                }\n            }\n        }\n        super.onSelect(e, value);\n    }\n    onDblClick(e, interactionManager) {\n        const global = UtilPointerEvent.toGlobal(e, interactionManager, this._iconsWork);\n        const local = this.toLocal(global, undefined, global);\n        if (this._iconsEye.width + this.padding.getLeft() < local.x) {\n            return super.onDblClick(e, interactionManager);\n        }\n        else {\n            this.emit(\"eyedblclick\", e, interactionManager, this);\n            return false;\n        }\n    }\n}\n//# sourceMappingURL=e-editor-layer-item.js.map","import { DButtonAmbient, DControllers, DLayoutHorizontal, DLayoutVertical, DList, DText, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandLayerBringForward } from \"../command/e-command-layer-bring-forward\";\nimport { ECommandLayerCreate } from \"../command/e-command-layer-create\";\nimport { ECommandLayerDelete } from \"../command/e-command-layer-delete\";\nimport { ECommandLayerChange } from \"../command/e-command-layer-change\";\nimport { ECommandLayerSendBackward } from \"../command/e-command-layer-send-backward\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { EDialogLayer } from \"./e-dialog-layer\";\nimport { EDialogLayerValue } from \"./e-dialog-layer-value\";\nimport { EEditorLayerItem } from \"./e-editor-layer-item\";\nexport class EEditorLayer extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        this._diagram = options.diagram;\n        this._selection = options.selection;\n        this._isInitialized = false;\n        this._canvas = null;\n    }\n    show() {\n        super.show();\n        this.onShow();\n        return this;\n    }\n    onShow() {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onCanvasChange(this._diagram.canvas, true);\n    }\n    initLayout() {\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonNew,\n                this.buttonDelete,\n                this.buttonBringForward,\n                this.buttonSendBackward\n            ]\n        }));\n        this.addChild(this.list);\n        // Layer change even handling\n        const diagram = this._diagram;\n        diagram.on(\"set\", (newCanvas) => {\n            if (this.isShown()) {\n                this.onCanvasChange(newCanvas, false);\n            }\n        });\n        diagram.on(\"ready\", () => {\n            if (this.isShown()) {\n                this.onLayerChange();\n            }\n        });\n        diagram.on(\"unset\", () => {\n            if (this.isShown()) {\n                this.onCanvasChange(null, false);\n            }\n        });\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get onLayerChangeBound() {\n        let result = this._onLayerChangeBound;\n        if (result == null) {\n            result = () => {\n                this.onLayerChange();\n            };\n            this._onLayerChangeBound = result;\n        }\n        return result;\n    }\n    get dialog() {\n        let result = this._dialog;\n        if (result == null) {\n            result = this.newDialog();\n            this._dialog = result;\n        }\n        return result;\n    }\n    newDialog() {\n        return new EDialogLayer();\n    }\n    get buttonNew() {\n        let result = this._buttonNew;\n        if (result == null) {\n            result = this.newButtonNew();\n            this._buttonNew = result;\n        }\n        return result;\n    }\n    newButtonNew() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonNewTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonNewActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonNewActive(opener) {\n        const canvas = this._canvas;\n        if (canvas) {\n            const dialogLayer = this.dialog;\n            dialogLayer\n                .reset(canvas.width, canvas.height)\n                .open(opener)\n                .then((value) => {\n                if (value) {\n                    DControllers.getCommandController().push(new ECommandLayerCreate(value, canvas.layer, this._selection));\n                }\n            });\n        }\n    }\n    get buttonDelete() {\n        let result = this._buttonDelete;\n        if (result == null) {\n            result = this.newButtonDelete();\n            this._buttonDelete = result;\n        }\n        return result;\n    }\n    newButtonDelete() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonDeleteTitle(),\n            on: {\n                active: () => {\n                    const canvas = this._canvas;\n                    if (canvas) {\n                        const layer = canvas.layer;\n                        const size = layer.size();\n                        const active = layer.active;\n                        if (1 < size && active) {\n                            DControllers.getCommandController().push(new ECommandLayerDelete(active, canvas.layer, this._selection));\n                        }\n                    }\n                }\n            }\n        });\n    }\n    get buttonBringForward() {\n        let result = this._buttonBringForward;\n        if (result == null) {\n            result = this.newButtonBringForward();\n            this._buttonBringForward = result;\n        }\n        return result;\n    }\n    newButtonBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            on: {\n                active: () => {\n                    const canvas = this._canvas;\n                    if (canvas) {\n                        const layer = canvas.layer;\n                        const active = layer.active;\n                        if (active) {\n                            const index = layer.children.indexOf(active);\n                            DControllers.getCommandController().push(new ECommandLayerBringForward(index, layer));\n                        }\n                    }\n                }\n            }\n        });\n    }\n    get buttonSendBackward() {\n        let result = this._buttonSendBackward;\n        if (result == null) {\n            result = this.newButtonSendBackward();\n            this._buttonSendBackward = result;\n        }\n        return result;\n    }\n    newButtonSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            on: {\n                active: () => {\n                    const canvas = this._canvas;\n                    if (canvas) {\n                        const layer = canvas.layer;\n                        const active = layer.active;\n                        if (active) {\n                            const index = layer.children.indexOf(active);\n                            DControllers.getCommandController().push(new ECommandLayerSendBackward(index, layer));\n                        }\n                    }\n                }\n            }\n        });\n    }\n    get list() {\n        let result = this._list;\n        if (result == null) {\n            result = this.newList();\n            this._list = result;\n        }\n        return result;\n    }\n    newList() {\n        const icons = this._icons;\n        const iconsEye = icons.eye;\n        const iconsEyeSlash = icons.eye_slash;\n        const work = new Point();\n        const result = new DList({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            data: {\n                selection: {\n                    on: {\n                        change: () => {\n                            this.onListSelectionChange();\n                        }\n                    }\n                },\n                toImage: (layer) => {\n                    return layer.visible ? iconsEye : iconsEyeSlash;\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new EEditorLayerItem(iconsEye, iconsEyeSlash, work, data, {\n                        on: {\n                            eyeclick: (e, value, item) => {\n                                if (value) {\n                                    if (value.visible) {\n                                        value.visible = false;\n                                        item.image = iconsEyeSlash;\n                                    }\n                                    else {\n                                        value.visible = true;\n                                        item.image = iconsEye;\n                                    }\n                                }\n                            },\n                            dblclick: (e, _, item) => {\n                                this.onListDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            },\n            on: {\n                keydown: (e) => {\n                    if (UtilKeyboardEvent.isDeleteKey(e)) {\n                        const canvas = this._canvas;\n                        if (canvas) {\n                            const layer = canvas.layer;\n                            const size = layer.size();\n                            const active = layer.active;\n                            if (1 < size && active) {\n                                DControllers.getCommandController().push(new ECommandLayerDelete(active, layer, this._selection));\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        return result;\n    }\n    onListDblClick(e, _, item, list) {\n        const canvas = this._canvas;\n        if (canvas) {\n            const layerActive = canvas.layer.active;\n            if (layerActive) {\n                const oldValue = EDialogLayerValue.from(layerActive);\n                const dialogLayer = this.dialog;\n                dialogLayer.value = oldValue;\n                dialogLayer.open(item).then((newValue) => {\n                    if (newValue && !newValue.isEqual(oldValue)) {\n                        DControllers.getCommandController().push(new ECommandLayerChange(layerActive, newValue, canvas.layer));\n                    }\n                });\n            }\n        }\n    }\n    onListLayerChange() {\n        const listLayer = this.list;\n        const canvas = this._canvas;\n        if (canvas) {\n            const layerContainer = canvas.layer;\n            const layers = layerContainer.children;\n            const layerActive = layerContainer.active;\n            const items = listLayer.data.items;\n            for (let i = 0, imax = layers.length; i < imax; ++i) {\n                items[i] = layers[imax - 1 - i];\n            }\n            items.length = layers.length;\n            listLayer.update(true);\n            if (layerActive != null) {\n                listLayer.data.selection.clearAndAdd(layerActive);\n            }\n            else {\n                listLayer.data.selection.clear();\n            }\n        }\n        else {\n            listLayer.data.items = [];\n        }\n    }\n    onListSelectionChange() {\n        const first = this.list.data.selection.first;\n        if (first) {\n            const canvas = this._canvas;\n            if (canvas) {\n                const layerActive = canvas.layer.active;\n                if (layerActive !== first) {\n                    // Unselect\n                    const selection = this._selection;\n                    if (!selection.isEmpty()) {\n                        const before = selection.store();\n                        if (selection.clear()) {\n                            const after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    // Change the active layer\n                    canvas.layer.active = first;\n                }\n            }\n        }\n    }\n    onCanvasChange(newCanvas, forcibly) {\n        const oldCanvas = this._canvas;\n        if (newCanvas !== this._canvas) {\n            const onLayerChangeBound = this.onLayerChangeBound;\n            if (oldCanvas != null) {\n                oldCanvas.layer.off(\"change\", onLayerChangeBound);\n            }\n            this._canvas = newCanvas;\n            if (newCanvas != null) {\n                this.state.isDisabled = false;\n                newCanvas.layer.on(\"change\", onLayerChangeBound);\n            }\n            else {\n                this.state.isDisabled = true;\n            }\n            this.onLayerChange();\n        }\n        else if (forcibly) {\n            this.onLayerChange();\n        }\n    }\n    isActiveDeletable(canvas) {\n        if (canvas) {\n            return 1 < canvas.layer.size();\n        }\n        return false;\n    }\n    isActiveNotLast(canvas) {\n        if (canvas) {\n            const layer = canvas.layer;\n            const layers = layer.children;\n            const active = layer.active;\n            if (active) {\n                return active !== layers[layers.length - 1];\n            }\n        }\n        return false;\n    }\n    isActiveNotFirst(canvas) {\n        if (canvas) {\n            const layer = canvas.layer;\n            const layers = layer.children;\n            const active = layer.active;\n            if (active) {\n                return active !== layers[0];\n            }\n        }\n        return false;\n    }\n    onLayerChange() {\n        // Update buttons\n        const canvas = this._canvas;\n        this.state.isEnabled = canvas != null;\n        this.buttonDelete.state.isEnabled = this.isActiveDeletable(canvas);\n        this.buttonSendBackward.state.isEnabled = this.isActiveNotFirst(canvas);\n        this.buttonBringForward.state.isEnabled = this.isActiveNotLast(canvas);\n        // Update the list\n        this.onListLayerChange();\n        // Update the modifier\n        this._selection.updateModifier();\n    }\n    getType() {\n        return \"EEditorLayer\";\n    }\n}\n//# sourceMappingURL=e-editor-layer.js.map","import { DThemes } from \"@wcardinal/wcardinal-ui\";\nlet shapeTypeTheme;\nexport const getShapeTypeTheme = () => {\n    return (shapeTypeTheme !== null && shapeTypeTheme !== void 0 ? shapeTypeTheme : (shapeTypeTheme = DThemes.get(\"FShapeType\")));\n};\n//# sourceMappingURL=get-shape-type-theme.js.map","import { EShapeEmbedded, EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { getShapeTypeTheme } from \"./get-shape-type-theme\";\nexport const toShapeLabel = (shape) => {\n    const id = shape.id;\n    if (0 < id.length) {\n        return id;\n    }\n    const shapeType = shape.type;\n    if (EShapeType.EXTENSION <= shapeType) {\n        const extension = EShapeExtensions.get(shapeType);\n        if (extension && \"name\" in extension) {\n            const name = extension.name;\n            if (name != null) {\n                return name;\n            }\n        }\n        return getShapeTypeTheme().getLabel(shapeType);\n    }\n    else if (shapeType === EShapeType.EMBEDDED) {\n        if (shape instanceof EShapeEmbedded) {\n            return shape.name;\n        }\n        else {\n            return getShapeTypeTheme().getLabel(shapeType);\n        }\n    }\n    return getShapeTypeTheme().getLabel(shapeType);\n};\n//# sourceMappingURL=to-shape-label.js.map","import { EShapeType } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { getShapeTypeTheme } from \"./get-shape-type-theme\";\nexport const toShapeTypeLabel = (shapeType) => {\n    if (EShapeType.EXTENSION <= shapeType) {\n        const extension = EShapeExtensions.get(shapeType);\n        if (extension && \"name\" in extension) {\n            const name = extension.name;\n            if (name != null) {\n                return name;\n            }\n        }\n        return getShapeTypeTheme().getLabel(shapeType);\n    }\n    return getShapeTypeTheme().getLabel(shapeType);\n};\n//# sourceMappingURL=to-shape-type-label.js.map","import { DButtonPrimary, DControllers, DDialogMessage, DDialogProcessing, DIndicatorProcessing, DInputLabel, DInputSearch, DInputText, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DSelect, DText, EShapeConnectorLine, EShapeType, isArray } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { toShapeLabel } from \"./to-shape-label\";\nimport { EEditorSearchConditionState } from \"./e-editor-search-condition-state\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { EEditorSearchConditionType } from \"./e-editor-search-condition-type\";\nimport { toShapeTypeLabel } from \"./to-shape-type-label\";\nexport class EEditorSearch extends DLayoutVertical {\n    constructor(options) {\n        var _a;\n        super(options);\n        // Selection\n        const selection = options.selection;\n        this._selection = selection;\n        // Icons\n        this._icons = options.icons;\n        // Finder\n        this._finder = options.finder;\n        // Interval\n        this._interval = (_a = options.interval) !== null && _a !== void 0 ? _a : 333;\n        // Diagram\n        const diagram = options.diagram;\n        this._diagram = diagram;\n        this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", () => {\n            this.list.data.clear();\n            this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", () => {\n            this.state.isDisabled = false;\n        });\n        // Layout\n        this.addChild(this.newTextLabel());\n        if (this._finder != null) {\n            this.addChild(this.inputSearch);\n        }\n        else {\n            this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: this.theme.getInputIdLabel()\n                        }\n                    }),\n                    this.inputId\n                ]\n            }));\n            this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: this.theme.getSelectTypeLabel()\n                        }\n                    }),\n                    this.selectType\n                ]\n            }));\n            this.addChild(new DLayoutHorizontal({\n                width: \"padding\",\n                height: \"auto\",\n                children: [\n                    new DInputLabel({\n                        width: 60,\n                        text: {\n                            value: this.theme.getSelectStateLabel()\n                        }\n                    }),\n                    this.selectState\n                ]\n            }));\n            this.addChild(this.buttonExecute);\n        }\n        this.addChild(this.list);\n    }\n    newTextLabel() {\n        return new DText({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get inputSearch() {\n        var _a;\n        return ((_a = this._inputSearch) !== null && _a !== void 0 ? _a : (this._inputSearch = this.newInputSearch()));\n    }\n    newInputSearch() {\n        return new DInputSearch({\n            x: \"padding\",\n            width: \"padding\",\n            on: {\n                input: (newValue) => {\n                    this.search(newValue);\n                },\n                enter: (emitter) => {\n                    this.search(emitter.value);\n                }\n            }\n        });\n    }\n    get inputId() {\n        var _a;\n        return ((_a = this._inputId) !== null && _a !== void 0 ? _a : (this._inputId = this.newInputId()));\n    }\n    newInputId() {\n        return new DInputText({\n            weight: 1,\n            on: {\n                enter: () => {\n                    this.buttonExecute.activate();\n                }\n            }\n        });\n    }\n    get selectType() {\n        var _a;\n        return ((_a = this._selectType) !== null && _a !== void 0 ? _a : (this._selectType = this.newSelectType()));\n    }\n    newSelectType() {\n        return new DSelect({\n            weight: 1,\n            value: EEditorSearchConditionType.NONE,\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newSelectTypeMenuItems()\n            }\n        });\n    }\n    newSelectTypeMenuItems() {\n        const result = [\n            this.newSelectTypeMenuItem(EEditorSearchConditionType.NONE, this.theme.toTypeLabel(EEditorSearchConditionType.NONE)),\n            this.newSelectTypeMenuItemShape(EShapeType.CIRCLE),\n            this.newSelectTypeMenuItemShape(EShapeType.SEMICIRCLE),\n            this.newSelectTypeMenuItemShape(EShapeType.RECTANGLE),\n            this.newSelectTypeMenuItemShape(EShapeType.RECTANGLE_ROUNDED),\n            this.newSelectTypeMenuItemShape(EShapeType.TRIANGLE),\n            this.newSelectTypeMenuItemShape(EShapeType.TRIANGLE_ROUNDED),\n            this.newSelectTypeMenuItemShape(EShapeType.LINE),\n            this.newSelectTypeMenuItemShape(EShapeType.CONNECTOR_LINE),\n            this.newSelectTypeMenuItemShape(EShapeType.CONNECTOR_ELBOW),\n            this.newSelectTypeMenuItemShape(EShapeType.IMAGE),\n            this.newSelectTypeMenuItemShape(EShapeType.GROUP),\n            this.newSelectTypeMenuItemShape(EShapeType.BAR),\n            this.newSelectTypeMenuItemShape(EShapeType.BUTTON),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED_LAYER),\n            this.newSelectTypeMenuItemShape(EShapeType.EMBEDDED_ACCEPTOR_EDGE)\n        ];\n        EShapeExtensions.each((extension) => {\n            if (\"type\" in extension) {\n                result.push(this.newSelectTypeMenuItemShape(extension.type));\n            }\n        });\n        return result;\n    }\n    newSelectTypeMenuItem(type, label) {\n        return {\n            width: 200,\n            value: type,\n            text: {\n                value: label\n            }\n        };\n    }\n    newSelectTypeMenuItemShape(type) {\n        return this.newSelectTypeMenuItem(type, toShapeTypeLabel(type));\n    }\n    getSelectTypeValue() {\n        const selectType = this._selectType;\n        if (selectType != null) {\n            const value = selectType.value;\n            if (value != null && 0 <= value) {\n                return value;\n            }\n        }\n        return null;\n    }\n    get selectState() {\n        var _a;\n        return ((_a = this._selectState) !== null && _a !== void 0 ? _a : (this._selectState = this.newSelectState()));\n    }\n    newSelectState() {\n        const theme = this.theme;\n        return new DSelect({\n            weight: 1,\n            value: EEditorSearchConditionState.NONE,\n            menu: {\n                items: [\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.NONE, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.CONNECTED_FULLY, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.CONNECTED_PARTIALLY, theme),\n                    this.newSelectStateMenuItem(EEditorSearchConditionState.UNCONNECTED, theme)\n                ]\n            }\n        });\n    }\n    newSelectStateMenuItem(state, theme) {\n        return {\n            value: state,\n            text: {\n                value: theme.toStateLabel(state)\n            }\n        };\n    }\n    getSelectStateValue() {\n        const result = this.selectState.value;\n        if (result != null && 0 <= result) {\n            return result;\n        }\n        return null;\n    }\n    get buttonExecute() {\n        var _a;\n        return ((_a = this._buttonExecute) !== null && _a !== void 0 ? _a : (this._buttonExecute = this.newButtonExecute()));\n    }\n    newButtonExecute() {\n        return new DButtonPrimary({\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonExecuteTitle()\n            },\n            image: {\n                source: this._icons.editor_search\n            },\n            on: {\n                active: (emitter) => {\n                    this.onButtonExecuteActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonExecuteActive(opener) {\n        var _a, _b;\n        const indicator = this.indicatorExecute;\n        indicator.start();\n        const shapes = [];\n        const canvas = this._diagram.canvas;\n        if (canvas != null) {\n            const id = this.inputId.value.trim();\n            const type = (_a = this.selectType.value) !== null && _a !== void 0 ? _a : EEditorSearchConditionType.NONE;\n            const state = (_b = this.selectState.value) !== null && _b !== void 0 ? _b : EEditorSearchConditionState.NONE;\n            canvas.shape.each((shape) => {\n                if (0 < id.length && shape.id.indexOf(id) < 0) {\n                    return true;\n                }\n                if (type !== EEditorSearchConditionType.NONE && type !== shape.type) {\n                    return true;\n                }\n                switch (state) {\n                    case EEditorSearchConditionState.CONNECTED_FULLY:\n                        if (shape instanceof EShapeConnectorLine) {\n                            const edge = shape.edge;\n                            const tail = edge.tail.acceptor.shape;\n                            const head = edge.head.acceptor.shape;\n                            if (tail == null || head == null) {\n                                return true;\n                            }\n                        }\n                        else {\n                            if (shape.connector.size() <= 0) {\n                                return true;\n                            }\n                        }\n                        break;\n                    case EEditorSearchConditionState.CONNECTED_PARTIALLY:\n                        if (shape instanceof EShapeConnectorLine) {\n                            const edge = shape.edge;\n                            const tail = edge.tail.acceptor.shape;\n                            const head = edge.head.acceptor.shape;\n                            if ((tail == null && head == null) || (tail != null && head != null)) {\n                                return true;\n                            }\n                        }\n                        else {\n                            return true;\n                        }\n                        break;\n                    case EEditorSearchConditionState.UNCONNECTED:\n                        if (shape instanceof EShapeConnectorLine) {\n                            const edge = shape.edge;\n                            const tail = edge.tail.acceptor.shape;\n                            const head = edge.head.acceptor.shape;\n                            if (tail != null || head != null) {\n                                return true;\n                            }\n                        }\n                        else {\n                            if (0 < shape.connector.size()) {\n                                return true;\n                            }\n                        }\n                        break;\n                }\n                shapes.push(shape);\n                return true;\n            });\n        }\n        this.list.data.clearAndAddAll(shapes);\n        indicator.resolve();\n    }\n    get indicatorExecute() {\n        var _a;\n        return ((_a = this._indicatorExecute) !== null && _a !== void 0 ? _a : (this._indicatorExecute = this.newIndicatorExecute()));\n    }\n    newIndicatorExecute() {\n        return new DIndicatorProcessing(this.buttonExecute);\n    }\n    search(word) {\n        const threshold = 500;\n        const searching = this._searching;\n        const searched = this._searched;\n        const searchedAt = this._searchedAt;\n        if (searching !== searched || (searchedAt != null && Date.now() - searchedAt < threshold)) {\n            this._requested = word;\n            if (this._timeoutId == null) {\n                this._timeoutId = window.setTimeout(() => {\n                    this._timeoutId = null;\n                    const newWord = this._requested;\n                    if (newWord != null) {\n                        this._requested = undefined;\n                        this.search(newWord);\n                    }\n                }, threshold);\n            }\n        }\n        else {\n            const timeoutId = this._timeoutId;\n            if (timeoutId != null) {\n                this._timeoutId = null;\n                window.clearTimeout(timeoutId);\n            }\n            this._searching = word;\n            this.doSearch(word).then((result) => {\n                this.list.data.clearAndAddAll(result.shapes);\n                this._searched = result.word;\n                this._searchedAt = Date.now();\n            });\n        }\n    }\n    doSearch(word) {\n        const finder = this._finder;\n        if (finder == null) {\n            return Promise.resolve({\n                word,\n                shapes: []\n            });\n        }\n        const canvas = this._diagram.canvas;\n        if (canvas == null) {\n            return Promise.resolve({\n                word,\n                shapes: []\n            });\n        }\n        const trimmed = word.trim();\n        if (trimmed.length <= 0) {\n            return Promise.resolve({\n                word,\n                shapes: []\n            });\n        }\n        try {\n            const found = finder(canvas, trimmed);\n            if (isArray(found)) {\n                return Promise.resolve({\n                    word,\n                    shapes: found\n                });\n            }\n            else {\n                return found.then((shapes) => {\n                    return {\n                        word,\n                        shapes\n                    };\n                }, () => {\n                    return {\n                        word,\n                        shapes: []\n                    };\n                });\n            }\n        }\n        catch (_a) {\n            return Promise.resolve({\n                word,\n                shapes: []\n            });\n        }\n    }\n    get list() {\n        var _a;\n        return ((_a = this._list) !== null && _a !== void 0 ? _a : (this._list = this.newList()));\n    }\n    newList() {\n        return new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: (value) => {\n                    return toShapeLabel(value);\n                },\n                toTitle: (value) => {\n                    return undefined;\n                },\n                toImage: (value) => {\n                    return null;\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        on: {\n                            select: (value, item) => {\n                                this.onListItemDown(value, item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    }\n    onListItemDown(value, item) {\n        const shape = value;\n        if (shape != null) {\n            const canvas = this._diagram.canvas;\n            const layer = shape.root.parent;\n            if (canvas != null && layer != null) {\n                // Selection\n                const selection = this._selection;\n                const before = selection.store();\n                if (selection.set(shape)) {\n                    selection.focus();\n                    const after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n                // Change the active layer\n                const layerActive = canvas.layer.active;\n                if (layerActive !== layer) {\n                    canvas.layer.active = layer;\n                }\n            }\n            else {\n                this.dialogError.open(item);\n            }\n        }\n    }\n    get dialogError() {\n        var _a;\n        return ((_a = this._dialogError) !== null && _a !== void 0 ? _a : (this._dialogError = this.newDialogError()));\n    }\n    newDialogError() {\n        return new DDialogMessage({\n            message: this.theme.getDialogErrorLabel()\n        });\n    }\n    get dialogProcessing() {\n        var _a;\n        return ((_a = this._dialogProcessing) !== null && _a !== void 0 ? _a : (this._dialogProcessing = this.newDialogProcessing()));\n    }\n    newDialogProcessing() {\n        return new DDialogProcessing();\n    }\n    getType() {\n        return \"EEditorSearch\";\n    }\n}\n//# sourceMappingURL=e-editor-search.js.map","export const EEditorSearchConditionType = {\n    NONE: -1\n};\n//# sourceMappingURL=e-editor-search-condition-type.js.map","export const EEditorSearchConditionState = {\n    NONE: -1,\n    UNCONNECTED: 0,\n    CONNECTED_PARTIALLY: 1,\n    CONNECTED_FULLY: 2\n};\n//# sourceMappingURL=e-editor-search-condition-state.js.map","import { createLine, DButton, DButtonAmbient, DButtonCheck, DButtonCheckRight, DButtonColor, DButtonColorGradient, DButtonFile, DButtonFileAs, DDialogSelect, DInputReal, DInputRealAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DPane, DSelect, DText, EShapeAcceptorEdgeSide, EShapeCapabilities, EShapeCapability, EShapeCircle, EShapeConnectorElbow, EShapeConnectorLine, EShapeCopyPart, EShapeCorner, EShapeDefaults, EShapeEmbeddeds, EShapeGroup, EShapeImage, EShapeLine, EShapeLockPart, EShapePointsFormatters, EShapePointsMarkerType, EShapePointsStyle, EShapeRectangle, EShapeRectangleRounded, EShapeResourceManagerDeserializationMode, EShapeSemicircle, EShapeStrokeSide, EShapeStrokeStyle, EShapeTriangle, EShapeTriangleRounded, EShapeType, isFunction, isString, toGradientImageUrl, toImageElement } from \"@wcardinal/wcardinal-ui\";\nimport { EShapeExtensionFactories } from \"../extension/e-shape-extension-factories\";\nimport { EShapeExtensions } from \"../extension/e-shape-extensions\";\nimport { newDialogSelectWithThumbnails } from \"./e-dialog-select-with-thumbnails\";\nimport { EEDITOR_BUTTON_COUNT } from \"./e-editors\";\nexport class EEditorShape extends DPane {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        this._canvas = options.canvas;\n        this._selection = options.selection;\n        this._isInitialized = false;\n        const piece = options.piece;\n        if (piece) {\n            this._isPieceEnabled = piece.enable;\n            this._pieceExcluder = piece.exclude;\n            this._controller = piece.controller;\n        }\n        else {\n            this._isPieceEnabled = false;\n        }\n        this._isChangeable = options.changeable;\n    }\n    show() {\n        super.show();\n        this.onShow();\n        return this;\n    }\n    onShow() {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onSelectionChange();\n    }\n    initLayout() {\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.layoutChangeTo,\n                this.buttonFill,\n                this.buttonFillColor,\n                this.layoutTexture,\n                this.buttonStroke,\n                this.buttonStrokeColor,\n                this.inputStrokeWidth,\n                this.inputStrokeAlign,\n                this.layoutStrokeSide,\n                this.textCorner,\n                this.inputCornerRadius,\n                this.layoutCorner,\n                this.layoutLine,\n                this.selectLineStyle,\n                this.selectLineType,\n                this.layoutLineTail,\n                this.selectLineTailType,\n                this.layoutLineTailSize,\n                this.buttonLineTailColor,\n                this.inputLineTailMargin,\n                this.layoutLineHead,\n                this.selectLineHeadType,\n                this.layoutLineHeadSize,\n                this.buttonLineHeadColor,\n                this.inputLineHeadMargin\n            ]\n        });\n        // Selection change handling\n        this._selection.on(\"change\", () => {\n            if (this.isShown()) {\n                this.onSelectionChange();\n            }\n        });\n    }\n    get layoutChangeTo() {\n        let result = this._layoutChangeTo;\n        if (result === undefined) {\n            result = this._isChangeable !== false ? this.newLayoutChangeTo() : null;\n            this._layoutChangeTo = result;\n        }\n        return result;\n    }\n    newLayoutChangeTo() {\n        const children = [\n            this.newTextChangeToLabel(),\n            this.buttonCircle,\n            this.buttonSemicircle,\n            this.buttonRectangle,\n            this.buttonRectangleRounded,\n            this.buttonTriangle,\n            this.buttonTriangleRounded,\n            this.buttonLine,\n            this.buttonLineConnector,\n            this.buttonElbowConnector,\n            this.buttonImage,\n            this.buttonGraphicPiece\n        ];\n        EShapeExtensionFactories.each((factory) => {\n            children.push(this.newButtonExtensionFactory(factory));\n        });\n        EShapeExtensions.each((extension) => {\n            if (this.isExtensionReplacable(extension)) {\n                const creator = extension.creator;\n                if (isFunction(creator)) {\n                    children.push(this.newButtonExtension(extension, creator));\n                }\n            }\n        });\n        children.push(this.buttonGroup, this.buttonUngroup);\n        return new DLayoutVertical({\n            width: \"100%\",\n            height: \"auto\",\n            column: EEDITOR_BUTTON_COUNT,\n            children\n        });\n    }\n    isExtensionReplacable(extension) {\n        if (\"icon\" in extension) {\n            if (\"type\" in extension) {\n                const capability = EShapeCapabilities.get(extension.type);\n                if (capability != null) {\n                    if (capability & EShapeCapability.REPLACING) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    newTextChangeToLabel() {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getTextChangeToLabel()\n            },\n            clear: \"AFTER\"\n        });\n    }\n    newButtonExtensionFactory(factory) {\n        let selectDialog = null;\n        return new DButtonAmbient({\n            image: {\n                source: factory.icon.texture\n            },\n            title: this.toExtensionTitle(factory),\n            theme: \"EButtonEditor\",\n            on: {\n                active: (emitter) => {\n                    selectDialog = selectDialog || this.newDialogSelectExtensionFactory(factory);\n                    selectDialog.open(emitter);\n                }\n            }\n        });\n    }\n    newDialogSelectExtensionFactory(factory) {\n        return new DDialogSelect({\n            controller: factory,\n            list: {\n                data: {\n                    toLabel: factory.item.toLabel\n                }\n            },\n            on: {\n                select: (value) => {\n                    factory.item.toCreator(value).then((creator) => {\n                        this._selection.replace(creator);\n                    });\n                }\n            }\n        });\n    }\n    newButtonExtension(extension, creator) {\n        return new DButtonAmbient({\n            image: {\n                source: extension.icon.texture\n            },\n            title: this.toExtensionTitle(extension),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace(creator);\n                }\n            }\n        });\n    }\n    toExtensionTitle(extension) {\n        const title = extension.title;\n        if (isString(title)) {\n            return title;\n        }\n        return title.change;\n    }\n    get buttonCircle() {\n        var _a;\n        return ((_a = this._buttonCircle) !== null && _a !== void 0 ? _a : (this._buttonCircle = this.newButtonCircle()));\n    }\n    newButtonCircle() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_circle\n            },\n            title: this.theme.getButtonCircleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace((existing) => {\n                        if (existing.type !== EShapeType.CIRCLE) {\n                            return new EShapeCircle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    }\n    get buttonSemicircle() {\n        var _a;\n        return ((_a = this._buttonSemicircle) !== null && _a !== void 0 ? _a : (this._buttonSemicircle = this.newButtonSemicircle()));\n    }\n    newButtonSemicircle() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_semicircle\n            },\n            title: this.theme.getButtonSemicircleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace((existing) => {\n                        if (existing.type !== EShapeType.SEMICIRCLE) {\n                            return new EShapeSemicircle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    }\n    get buttonRectangle() {\n        var _a;\n        return ((_a = this._buttonRectangle) !== null && _a !== void 0 ? _a : (this._buttonRectangle = this.newButtonRectangle()));\n    }\n    newButtonRectangle() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_rectangle\n            },\n            title: this.theme.getButtonRectangleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace((existing) => {\n                        if (existing.type !== EShapeType.RECTANGLE) {\n                            return new EShapeRectangle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    }\n    get buttonRectangleRounded() {\n        var _a;\n        return ((_a = this._buttonRectangleRounded) !== null && _a !== void 0 ? _a : (this._buttonRectangleRounded = this.newButtonRectangleRounded()));\n    }\n    newButtonRectangleRounded() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_rectangle_rounded\n            },\n            title: this.theme.getButtonRectangleRoundedTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace((existing) => {\n                        if (existing.type !== EShapeType.RECTANGLE_ROUNDED) {\n                            return new EShapeRectangleRounded().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    }\n    get buttonTriangle() {\n        var _a;\n        return ((_a = this._buttonTriangle) !== null && _a !== void 0 ? _a : (this._buttonTriangle = this.newButtonTriangle()));\n    }\n    newButtonTriangle() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_triangle\n            },\n            title: this.theme.getButtonTriangleTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace((existing) => {\n                        if (existing.type !== EShapeType.TRIANGLE) {\n                            return new EShapeTriangle().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    }\n    get buttonTriangleRounded() {\n        var _a;\n        return ((_a = this._buttonTriangleRounded) !== null && _a !== void 0 ? _a : (this._buttonTriangleRounded = this.newButtonTriangleRounded()));\n    }\n    newButtonTriangleRounded() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_triangle_rounded\n            },\n            title: this.theme.getButtonTriangleRoundedTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace((existing) => {\n                        if (existing.type !== EShapeType.TRIANGLE_ROUNDED) {\n                            return new EShapeTriangleRounded().copy(existing);\n                        }\n                        return null;\n                    });\n                }\n            }\n        });\n    }\n    get buttonLine() {\n        var _a;\n        return ((_a = this._buttonLine) !== null && _a !== void 0 ? _a : (this._buttonLine = this.newButtonLine()));\n    }\n    newButtonLine() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_line\n            },\n            title: this.theme.getButtonLineTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.replace((existing) => {\n                        return this.replaceLine(existing);\n                    });\n                }\n            }\n        });\n    }\n    replaceLine(existing) {\n        if (existing.type !== EShapeType.LINE) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeLine().copy(existing);\n            }\n            else {\n                const size = existing.size;\n                const sxh = size.x * 0.5;\n                const syh = size.y * 0.5;\n                return createLine([-sxh, -syh, +sxh, +syh], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE).copy(existing, EShapeCopyPart.ALL & ~(EShapeCopyPart.SIZE | EShapeCopyPart.POINTS));\n            }\n        }\n        return null;\n    }\n    isDanglingConnectorAllowed() {\n        var _a, _b, _c;\n        return (_c = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.connector) === null || _b === void 0 ? void 0 : _b.dangling) !== null && _c !== void 0 ? _c : false;\n    }\n    get buttonLineConnector() {\n        var _a;\n        return ((_a = this._buttonLineConnector) !== null && _a !== void 0 ? _a : (this._buttonLineConnector = this.newButtonLineConnector()));\n    }\n    newButtonLineConnector() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_line_connector\n            },\n            title: this.theme.getButtonLineConnectorTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    const isDanglingConnectorAllowed = this.isDanglingConnectorAllowed();\n                    this._selection.replace((existing) => {\n                        return this.replaceLineConnector(existing, isDanglingConnectorAllowed);\n                    });\n                }\n            }\n        });\n    }\n    replaceLineConnector(existing, isDanglingConnectorAllowed) {\n        if (existing.type !== EShapeType.CONNECTOR_LINE) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeConnectorLine().copy(existing);\n            }\n            else if (isDanglingConnectorAllowed) {\n                return this.replaceConnector(existing, new EShapeConnectorLine());\n            }\n        }\n        return null;\n    }\n    get buttonElbowConnector() {\n        var _a;\n        return ((_a = this._buttonElbowConnector) !== null && _a !== void 0 ? _a : (this._buttonElbowConnector = this.newButtonElbowConnector()));\n    }\n    newButtonElbowConnector() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_elbow_connector\n            },\n            title: this.theme.getButtonElbowConnectorTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    const isDanglingConnectorAllowed = this.isDanglingConnectorAllowed();\n                    this._selection.replace((existing) => {\n                        return this.replaceElbowConnector(existing, isDanglingConnectorAllowed);\n                    });\n                }\n            }\n        });\n    }\n    replaceElbowConnector(existing, isDanglingConnectorAllowed) {\n        if (existing.type !== EShapeType.CONNECTOR_ELBOW) {\n            if (existing instanceof EShapeConnectorLine) {\n                return new EShapeConnectorElbow().copy(existing);\n            }\n            else if (isDanglingConnectorAllowed) {\n                return this.replaceConnector(existing, new EShapeConnectorElbow());\n            }\n        }\n        return null;\n    }\n    replaceConnector(existing, result) {\n        result.lock(EShapeLockPart.ALL);\n        result.fill.alpha = 1;\n        const marker = result.points.marker;\n        marker.tail.type = EShapePointsMarkerType.CIRCLE;\n        marker.head.type = EShapePointsMarkerType.TRIANGLE;\n        result.copy(existing, EShapeCopyPart.ALL &\n            ~(EShapeCopyPart.SIZE | EShapeCopyPart.POINTS | EShapeCopyPart.TRANSFORM));\n        const size = existing.size;\n        const sxh = size.x * 0.5;\n        const syh = size.y * 0.5;\n        const localTransform = existing.transform.localTransform;\n        const rx = localTransform.a * sxh + localTransform.c * syh;\n        const ry = localTransform.b * sxh + localTransform.d * syh;\n        const tx = localTransform.tx;\n        const ty = localTransform.ty;\n        const edge = result.edge;\n        edge.lock();\n        edge.tail.set(null, null, null, null, 0, -rx + tx, -ry + ty, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        edge.head.set(null, null, null, null, 0, +rx + tx, +ry + ty, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        edge.unlock();\n        result.unlock(EShapeLockPart.ALL, true);\n        return result;\n    }\n    get buttonImage() {\n        var _a;\n        return ((_a = this._buttonImage) !== null && _a !== void 0 ? _a : (this._buttonImage = this.newButtonImage()));\n    }\n    newButtonImage() {\n        return new DButtonFile({\n            image: {\n                source: this._icons.editor_image\n            },\n            as: DButtonFileAs.DATA_URL,\n            title: this.theme.getButtonImageTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                open: (dataUrl) => {\n                    toImageElement(dataUrl).then((item) => {\n                        this._selection.replace((existing) => {\n                            return new EShapeImage(item).copy(existing, EShapeCopyPart.ALL & ~EShapeCopyPart.IMAGE);\n                        });\n                    });\n                }\n            }\n        });\n    }\n    get buttonGraphicPiece() {\n        let result = this._buttonGraphicPiece;\n        if (result === undefined) {\n            result = this._isPieceEnabled ? this.newButtonGraphicPiece() : null;\n            this._buttonGraphicPiece = result;\n        }\n        return result;\n    }\n    newButtonGraphicPiece() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.graphic_piece\n            },\n            title: this.theme.getButtonGraphicPieceTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: (emitter) => {\n                    this.onButtonGraphicPieceActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonGraphicPieceActive(opener) {\n        this.dialogSelectGraphicPiece.then((dialogSelectGraphicPiece) => {\n            dialogSelectGraphicPiece.open(opener);\n        });\n    }\n    get dialogSelectGraphicPiece() {\n        var _a;\n        return ((_a = this._dialogSelectGraphicPiece) !== null && _a !== void 0 ? _a : (this._dialogSelectGraphicPiece = this.newDialogSelectGraphicPiece()));\n    }\n    newDialogSelectGraphicPiece() {\n        return this._canvas.get().then((canvas) => {\n            const controller = this._controller;\n            if (controller) {\n                if (controller.toPieceThumbnail) {\n                    const result = this.newDialogSelectGraphicPieceImage(controller);\n                    result.categories = canvas.category.items;\n                    return result;\n                }\n                else {\n                    const result = this.newDialogSelectGraphicPieceNoImage(controller);\n                    result.categories = canvas.category.items;\n                    return result;\n                }\n            }\n            else {\n                const result = this.newDialogSelectGraphicPieceNoController();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    }\n    newDialogSelectGraphicPieceNoImage(controller) {\n        return new DDialogSelect({\n            controller: this.newDialogSelectGraphicPieceController(controller),\n            on: {\n                select: (value) => {\n                    this.onDialogSelectGraphicPieceSelect(value, controller);\n                }\n            }\n        });\n    }\n    newDialogSelectGraphicPieceImage(controller) {\n        return newDialogSelectWithThumbnails(this.newDialogSelectGraphicPieceController(controller), controller.toPieceThumbnail, (value) => {\n            this.onDialogSelectGraphicPieceSelect(value, controller);\n        });\n    }\n    newDialogSelectGraphicPieceNoController() {\n        return new DDialogSelect({\n            controller: {\n                search: () => {\n                    return Promise.resolve([]);\n                }\n            }\n        });\n    }\n    newDialogSelectGraphicPieceController(controller) {\n        const graphicPiece = controller.graphic.piece;\n        return {\n            search: (word, categoryId) => {\n                return graphicPiece.search(word, categoryId).then((pieces) => {\n                    return this.toDialogSelectGraphicPieceResult(pieces);\n                });\n            }\n        };\n    }\n    toDialogSelectGraphicPieceResult(targets) {\n        var _a;\n        const pieceId = (_a = this._pieceExcluder) === null || _a === void 0 ? void 0 : _a.call(this);\n        if (pieceId == null) {\n            return targets;\n        }\n        const result = [];\n        for (let i = 0, imax = targets.length; i < imax; ++i) {\n            const target = targets[i];\n            if (target.id !== pieceId) {\n                result.push(target);\n            }\n        }\n        return result;\n    }\n    onDialogSelectGraphicPieceSelect(value, controller) {\n        controller.graphic.piece.get(value.id).then((serialized) => {\n            EShapeEmbeddeds.from(serialized, controller.graphic, EShapeResourceManagerDeserializationMode.EDITOR).then((shape) => {\n                this._selection.replace((existing) => {\n                    return shape.clone().copy(existing);\n                });\n            });\n        });\n    }\n    get buttonGroup() {\n        var _a;\n        return ((_a = this._buttonGroup) !== null && _a !== void 0 ? _a : (this._buttonGroup = this.newButtonGroup()));\n    }\n    newButtonGroup() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_group\n            },\n            title: this.theme.getButtonGroupTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.group();\n                }\n            }\n        });\n    }\n    get buttonUngroup() {\n        var _a;\n        return ((_a = this._buttonUngroup) !== null && _a !== void 0 ? _a : (this._buttonUngroup = this.newButtonUngroup()));\n    }\n    newButtonUngroup() {\n        return new DButtonAmbient({\n            image: {\n                source: this._icons.shape_ungroup\n            },\n            title: this.theme.getButtonUngroupTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.ungroup();\n                }\n            }\n        });\n    }\n    get buttonFill() {\n        var _a;\n        return ((_a = this._buttonFill) !== null && _a !== void 0 ? _a : (this._buttonFill = this.newButtonFill()));\n    }\n    newButtonFill() {\n        const selection = this._selection;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonFillLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    selection.setFillEnabled(true);\n                },\n                inactive: () => {\n                    selection.setFillEnabled(false);\n                }\n            }\n        });\n    }\n    get buttonFillColor() {\n        var _a;\n        return ((_a = this._buttonFillColor) !== null && _a !== void 0 ? _a : (this._buttonFillColor = this.newButtonFillColor()));\n    }\n    newButtonFillColor() {\n        const result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: (value) => {\n                    this._selection.setFill(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    get buttonStroke() {\n        var _a;\n        return ((_a = this._buttonStroke) !== null && _a !== void 0 ? _a : (this._buttonStroke = this.newButtonStroke()));\n    }\n    newButtonStroke() {\n        const selection = this._selection;\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonStrokeLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    selection.setStrokeEnabled(true);\n                },\n                inactive: () => {\n                    selection.setStrokeEnabled(false);\n                }\n            }\n        });\n    }\n    get buttonStrokeColor() {\n        var _a;\n        return ((_a = this._buttonStrokeColor) !== null && _a !== void 0 ? _a : (this._buttonStrokeColor = this.newButtonStrokeColor()));\n    }\n    newButtonStrokeColor() {\n        const result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: (value) => {\n                    this._selection.setStroke(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    get inputStrokeWidth() {\n        var _a;\n        return ((_a = this._inputStrokeWidth) !== null && _a !== void 0 ? _a : (this._inputStrokeWidth = this.newInputStrokeWidth()));\n    }\n    newInputStrokeWidth() {\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputStrokeWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                on: {\n                    change: (value) => {\n                        this._selection.setStrokeWidth(value);\n                    }\n                }\n            }\n        });\n    }\n    get inputStrokeAlign() {\n        var _a;\n        return ((_a = this._inputStrokeAlign) !== null && _a !== void 0 ? _a : (this._inputStrokeAlign = this.newInputStrokeAlign()));\n    }\n    newInputStrokeAlign() {\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputStrokeAlignLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                max: 1,\n                on: {\n                    change: (value) => {\n                        this._selection.setStrokeAlign(value);\n                    }\n                }\n            }\n        });\n    }\n    get layoutStrokeSide() {\n        var _a;\n        return ((_a = this._layoutStrokeSide) !== null && _a !== void 0 ? _a : (this._layoutStrokeSide = this.newLayoutStrokeSide()));\n    }\n    newLayoutStrokeSide() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonStrokeSideTop,\n                this.buttonStrokeSideRight,\n                this.buttonStrokeSideBottom,\n                this.buttonStrokeSideLeft,\n                this.buttonStrokeExpandable,\n                this.buttonStrokeShrinkable,\n                this.buttonStrokeScalableDotDash,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    }\n    get buttonStrokeSideTop() {\n        var _a;\n        return ((_a = this._buttonStrokeSideTop) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideTop = this.newButtonStrokeSideTop()));\n    }\n    newButtonStrokeSideTop() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_top\n            },\n            title: this.theme.getButtonStrokeSideTopTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.TOP, true);\n                },\n                inactive: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.TOP, false);\n                }\n            }\n        });\n    }\n    get buttonStrokeSideRight() {\n        var _a;\n        return ((_a = this._buttonStrokeSideRight) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideRight = this.newButtonStrokeSideRight()));\n    }\n    newButtonStrokeSideRight() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_right\n            },\n            title: this.theme.getButtonStrokeSideRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.RIGHT, true);\n                },\n                inactive: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.RIGHT, false);\n                }\n            }\n        });\n    }\n    get buttonStrokeSideBottom() {\n        var _a;\n        return ((_a = this._buttonStrokeSideBottom) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideBottom = this.newButtonStrokeSideBottom()));\n    }\n    newButtonStrokeSideBottom() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_bottom\n            },\n            title: this.theme.getButtonStrokeSideBottomTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.BOTTOM, true);\n                },\n                inactive: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.BOTTOM, false);\n                }\n            }\n        });\n    }\n    get buttonStrokeSideLeft() {\n        var _a;\n        return ((_a = this._buttonStrokeSideLeft) !== null && _a !== void 0 ? _a : (this._buttonStrokeSideLeft = this.newButtonStrokeSideLeft()));\n    }\n    newButtonStrokeSideLeft() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_side_left\n            },\n            title: this.theme.getButtonStrokeSideLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.LEFT, true);\n                },\n                inactive: () => {\n                    selection.setStrokeSide(EShapeStrokeSide.LEFT, false);\n                }\n            }\n        });\n    }\n    get textCorner() {\n        var _a;\n        return ((_a = this._textCorner) !== null && _a !== void 0 ? _a : (this._textCorner = this.newTextCorner()));\n    }\n    newTextCorner() {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getTextCornerLabel()\n            }\n        });\n    }\n    get inputCornerRadius() {\n        var _a;\n        return ((_a = this._inputCornerRadius) !== null && _a !== void 0 ? _a : (this._inputCornerRadius = this.newInputCornerRadius()));\n    }\n    newInputCornerRadius() {\n        return new DInputReal({\n            width: \"100%\",\n            min: 0,\n            step: 1,\n            max: 100,\n            text: {\n                formatter: (value) => {\n                    return `${+(value * 100).toFixed(2)} %`;\n                }\n            },\n            editing: {\n                formatter: (value) => {\n                    return `${+(value * 100).toFixed(2)}`;\n                },\n                unformatter: (text) => {\n                    return parseFloat(text) * 0.01;\n                }\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setRadius(value);\n                }\n            }\n        });\n    }\n    get layoutCorner() {\n        var _a;\n        return ((_a = this._layoutCorner) !== null && _a !== void 0 ? _a : (this._layoutCorner = this.newLayoutCorner()));\n    }\n    newLayoutCorner() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonCornerTopLeft,\n                this.buttonCornerTopRight,\n                this.buttonCornerBottomRight,\n                this.buttonCornerBottomLeft,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    }\n    get buttonCornerTopLeft() {\n        var _a;\n        return ((_a = this._buttonCornerTopLeft) !== null && _a !== void 0 ? _a : (this._buttonCornerTopLeft = this.newButtonCornerTopLeft()));\n    }\n    newButtonCornerTopLeft() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_top_left\n            },\n            title: this.theme.getButtonCornerTopLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setCorner(EShapeCorner.TOP_LEFT, true);\n                },\n                inactive: () => {\n                    selection.setCorner(EShapeCorner.TOP_LEFT, false);\n                }\n            }\n        });\n    }\n    get buttonCornerTopRight() {\n        var _a;\n        return ((_a = this._buttonCornerTopRight) !== null && _a !== void 0 ? _a : (this._buttonCornerTopRight = this.newButtonCornerTopRight()));\n    }\n    newButtonCornerTopRight() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_top_right\n            },\n            title: this.theme.getButtonCornerTopRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setCorner(EShapeCorner.TOP_RIGHT, true);\n                },\n                inactive: () => {\n                    selection.setCorner(EShapeCorner.TOP_RIGHT, false);\n                }\n            }\n        });\n    }\n    get buttonCornerBottomRight() {\n        var _a;\n        return ((_a = this._buttonCornerBottomRight) !== null && _a !== void 0 ? _a : (this._buttonCornerBottomRight = this.newButtonCornerBottomRight()));\n    }\n    newButtonCornerBottomRight() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_bottom_right\n            },\n            title: this.theme.getButtonCornerBottomRightTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setCorner(EShapeCorner.BOTTOM_RIGHT, true);\n                },\n                inactive: () => {\n                    selection.setCorner(EShapeCorner.BOTTOM_RIGHT, false);\n                }\n            }\n        });\n    }\n    get buttonCornerBottomLeft() {\n        var _a;\n        return ((_a = this._buttonCornerBottomLeft) !== null && _a !== void 0 ? _a : (this._buttonCornerBottomLeft = this.newButtonCornerBottomLeft()));\n    }\n    newButtonCornerBottomLeft() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.corner_bottom_left\n            },\n            title: this.theme.getButtonCornerBottomLeftTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setCorner(EShapeCorner.BOTTOM_LEFT, true);\n                },\n                inactive: () => {\n                    selection.setCorner(EShapeCorner.BOTTOM_LEFT, false);\n                }\n            }\n        });\n    }\n    get layoutLine() {\n        var _a;\n        return ((_a = this._layoutLine) !== null && _a !== void 0 ? _a : (this._layoutLine = this.newLayoutLine()));\n    }\n    newLayoutLine() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLine, this.buttonLineClosed, this.buttonLineLock]\n        });\n    }\n    get textLine() {\n        var _a;\n        return ((_a = this._textLine) !== null && _a !== void 0 ? _a : (this._textLine = this.newTextLine()));\n    }\n    newTextLine() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineLabel()\n            }\n        });\n    }\n    get buttonLineLock() {\n        var _a;\n        return ((_a = this._buttonLineLock) !== null && _a !== void 0 ? _a : (this._buttonLineLock = this.newButtonLineLock()));\n    }\n    newButtonLineLock() {\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: () => {\n                    this._selection.lockCapability(EShapeCapability.LINE);\n                },\n                inactive: () => {\n                    this._selection.unlockCapability(EShapeCapability.LINE);\n                }\n            }\n        });\n    }\n    isLocked(last, target) {\n        if (last == null) {\n            return false;\n        }\n        const capability = last.getCapability();\n        if (capability == null) {\n            return false;\n        }\n        if (capability.locked & target) {\n            return true;\n        }\n        return false;\n    }\n    get selectLineStyle() {\n        var _a;\n        return ((_a = this._selectLineStyle) !== null && _a !== void 0 ? _a : (this._selectLineStyle = this.newSelectLineStyle()));\n    }\n    newSelectLineStyle() {\n        const theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapeStrokeStyle.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapeStrokeStyle.NONE,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.NONE)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED_DENSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED_DENSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DOTTED_LOOSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DOTTED_LOOSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED_DENSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED_DENSELY)\n                        }\n                    },\n                    {\n                        value: EShapeStrokeStyle.DASHED_LOOSELY,\n                        text: {\n                            value: theme.getSelectLineStyleLabel(EShapeStrokeStyle.DASHED_LOOSELY)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setLineStyle(value !== null && value !== void 0 ? value : EShapeStrokeStyle.NONE, EShapeStrokeStyle.DOTTED_MASK | EShapeStrokeStyle.DASHED_MASK);\n                }\n            }\n        });\n    }\n    get selectLineType() {\n        var _a;\n        return ((_a = this._selectLineType) !== null && _a !== void 0 ? _a : (this._selectLineType = this.newSelectLineType()));\n    }\n    newSelectLineType() {\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsStyle.NONE,\n            menu: {\n                items: this.newSelectLineTypeMenuItems()\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setPointsStyle(value !== null && value !== void 0 ? value : EShapePointsStyle.NONE, EShapePointsStyle.FORMATTER_MASK);\n                }\n            }\n        });\n    }\n    newSelectLineTypeMenuItems() {\n        const result = [\n            {\n                value: EShapePointsStyle.NONE,\n                text: {\n                    value: this.theme.getSelectLineTypeLabel(EShapePointsStyle.NONE)\n                }\n            }\n        ];\n        EShapePointsFormatters.each((id, datum) => {\n            result.push({\n                value: id << EShapePointsStyle.FORMATTER_SHIFT,\n                text: {\n                    value: datum.label\n                }\n            });\n        });\n        return result;\n    }\n    get buttonLineClosed() {\n        var _a;\n        return ((_a = this._buttonLineClosed) !== null && _a !== void 0 ? _a : (this._buttonLineClosed = this.newButtonLineClosed()));\n    }\n    newButtonLineClosed() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.line_closed\n            },\n            title: this.theme.getButtonLineClosedTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setPointsStyle(EShapePointsStyle.CLOSED, EShapePointsStyle.NONE);\n                },\n                inactive: () => {\n                    selection.setPointsStyle(EShapePointsStyle.NONE, EShapePointsStyle.CLOSED);\n                }\n            }\n        });\n    }\n    get buttonStrokeExpandable() {\n        var _a;\n        return ((_a = this._buttonStrokeExpandable) !== null && _a !== void 0 ? _a : (this._buttonStrokeExpandable = this.newButtonStrokeExpandable()));\n    }\n    newButtonStrokeExpandable() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_expandable\n            },\n            title: this.theme.getButtonStrokeExpandableTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_EXPANDING_WIDTH);\n                },\n                inactive: () => {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_EXPANDING_WIDTH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    }\n    get buttonStrokeShrinkable() {\n        var _a;\n        return ((_a = this._buttonStrokeShrinkable) !== null && _a !== void 0 ? _a : (this._buttonStrokeShrinkable = this.newButtonStrokeShrinkable()));\n    }\n    newButtonStrokeShrinkable() {\n        const selection = this._selection;\n        return new DButtonCheck({\n            image: {\n                source: this._icons.stroke_shrinkable\n            },\n            title: this.theme.getButtonStrokeShrinkableTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_SHRINKING_WIDTH);\n                },\n                inactive: () => {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_SHRINKING_WIDTH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    }\n    get buttonStrokeScalableDotDash() {\n        var _a;\n        return ((_a = this._buttonStrokeScalableDotDash) !== null && _a !== void 0 ? _a : (this._buttonStrokeScalableDotDash = this.newButtonStrokeScalableDotDash()));\n    }\n    newButtonStrokeScalableDotDash() {\n        const selection = this._selection;\n        return new DButtonCheckRight({\n            image: {\n                source: this._icons.stroke_scalable_dot_dash\n            },\n            title: this.theme.getButtonStrokeScalableDotDashTitle(),\n            theme: \"EButtonEditorCheck\",\n            on: {\n                active: () => {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NONE, EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH);\n                },\n                inactive: () => {\n                    selection.setStrokeStyle(EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH, EShapeStrokeStyle.NONE);\n                }\n            }\n        });\n    }\n    get layoutLineTail() {\n        var _a;\n        return ((_a = this._layoutLineTail) !== null && _a !== void 0 ? _a : (this._layoutLineTail = this.newLayoutLineTail()));\n    }\n    newLayoutLineTail() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLineTail, this.buttonLineTailLock]\n        });\n    }\n    get textLineTail() {\n        var _a;\n        return ((_a = this._textLineTail) !== null && _a !== void 0 ? _a : (this._textLineTail = this.newTextLineTail()));\n    }\n    newTextLineTail() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineTailLabel()\n            }\n        });\n    }\n    get buttonLineTailLock() {\n        var _a;\n        return ((_a = this._buttonLineTailLock) !== null && _a !== void 0 ? _a : (this._buttonLineTailLock = this.newButtonLineTailLock()));\n    }\n    newButtonLineTailLock() {\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: () => {\n                    this._selection.lockCapability(EShapeCapability.LINE_TAIL);\n                },\n                inactive: () => {\n                    this._selection.unlockCapability(EShapeCapability.LINE_TAIL);\n                }\n            }\n        });\n    }\n    get selectLineTailType() {\n        var _a;\n        return ((_a = this._selectLineTailType) !== null && _a !== void 0 ? _a : (this._selectLineTailType = this.newSelectLineTailType()));\n    }\n    newSelectLineTailType() {\n        const theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsMarkerType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapePointsMarkerType.NONE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.CIRCLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.CIRCLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.TRIANGLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.TRIANGLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.RECTANGLE,\n                        text: {\n                            value: theme.getSelectLineTailTypeLabel(EShapePointsMarkerType.RECTANGLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setLineTailType(value !== null && value !== void 0 ? value : EShapePointsMarkerType.NONE);\n                }\n            }\n        });\n    }\n    get layoutLineTailSize() {\n        var _a;\n        return ((_a = this._layoutLineTailSize) !== null && _a !== void 0 ? _a : (this._layoutLineTailSize = this.newLayoutLineTailSize()));\n    }\n    newLayoutLineTailSize() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.inputLineTailSizeX, this.inputLineTailSizeY]\n        });\n    }\n    get inputLineTailSizeX() {\n        var _a;\n        return ((_a = this._inputLineTailSizeX) !== null && _a !== void 0 ? _a : (this._inputLineTailSizeX = this.newInputLineTailSizeX()));\n    }\n    newInputLineTailSizeX() {\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: (value) => {\n                    this._selection.setLineTailSizeX(value);\n                }\n            }\n        });\n    }\n    get inputLineTailSizeY() {\n        var _a;\n        return ((_a = this._inputLineTailSizeY) !== null && _a !== void 0 ? _a : (this._inputLineTailSizeY = this.newInputLineTailSizeY()));\n    }\n    newInputLineTailSizeY() {\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: (value) => {\n                    this._selection.setLineTailSizeY(value);\n                }\n            }\n        });\n    }\n    get buttonLineTailColor() {\n        var _a;\n        return ((_a = this._buttonLineTailColor) !== null && _a !== void 0 ? _a : (this._buttonLineTailColor = this.newButtonLineTailColor()));\n    }\n    newButtonLineTailColor() {\n        const result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: (value) => {\n                    this._selection.setLineTailColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    get inputLineTailMargin() {\n        var _a;\n        return ((_a = this._inputLineTailMargin) !== null && _a !== void 0 ? _a : (this._inputLineTailMargin = this.newInputLineTailMargin()));\n    }\n    newInputLineTailMargin() {\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLineTailMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: (value) => {\n                        this._selection.setLineTailMargin(value);\n                    }\n                }\n            }\n        });\n    }\n    get layoutLineHead() {\n        var _a;\n        return ((_a = this._layoutLineHead) !== null && _a !== void 0 ? _a : (this._layoutLineHead = this.newLayoutLineHead()));\n    }\n    newLayoutLineHead() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.textLineHead, this.buttonLineHeadLock]\n        });\n    }\n    get textLineHead() {\n        var _a;\n        return ((_a = this._textLineHead) !== null && _a !== void 0 ? _a : (this._textLineHead = this.newTextLineHead()));\n    }\n    newTextLineHead() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getTextLineHeadLabel()\n            }\n        });\n    }\n    get buttonLineHeadLock() {\n        var _a;\n        return ((_a = this._buttonLineHeadLock) !== null && _a !== void 0 ? _a : (this._buttonLineHeadLock = this.newButtonLineHeadLock()));\n    }\n    newButtonLineHeadLock() {\n        return new DButtonCheck({\n            theme: \"EButtonEditorLock\",\n            on: {\n                active: () => {\n                    this._selection.lockCapability(EShapeCapability.LINE_HEAD);\n                },\n                inactive: () => {\n                    this._selection.unlockCapability(EShapeCapability.LINE_HEAD);\n                }\n            }\n        });\n    }\n    get selectLineHeadType() {\n        var _a;\n        return ((_a = this._selectLineHeadType) !== null && _a !== void 0 ? _a : (this._selectLineHeadType = this.newSelectLineHeadType()));\n    }\n    newSelectLineHeadType() {\n        const theme = this.theme;\n        return new DSelect({\n            width: \"100%\",\n            value: EShapePointsMarkerType.NONE,\n            menu: {\n                items: [\n                    {\n                        value: EShapePointsMarkerType.NONE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.NONE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.CIRCLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.CIRCLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.TRIANGLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.TRIANGLE)\n                        }\n                    },\n                    {\n                        value: EShapePointsMarkerType.RECTANGLE,\n                        text: {\n                            value: theme.getSelectLineHeadTypeLabel(EShapePointsMarkerType.RECTANGLE)\n                        }\n                    }\n                ]\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setLineHeadType(value !== null && value !== void 0 ? value : EShapePointsMarkerType.NONE);\n                }\n            }\n        });\n    }\n    get layoutLineHeadSize() {\n        var _a;\n        return ((_a = this._layoutLineHeadSize) !== null && _a !== void 0 ? _a : (this._layoutLineHeadSize = this.newLayoutLineHeadSize()));\n    }\n    newLayoutLineHeadSize() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            children: [this.inputLineHeadSizeX, this.inputLineHeadSizeY]\n        });\n    }\n    get inputLineHeadSizeX() {\n        var _a;\n        return ((_a = this._inputLineHeadSizeX) !== null && _a !== void 0 ? _a : (this._inputLineHeadSizeX = this.newInputLineHeadSizeX()));\n    }\n    newInputLineHeadSizeX() {\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: (value) => {\n                    this._selection.setLineHeadSizeX(value);\n                }\n            }\n        });\n    }\n    get inputLineHeadSizeY() {\n        var _a;\n        return ((_a = this._inputLineHeadSizeY) !== null && _a !== void 0 ? _a : (this._inputLineHeadSizeY = this.newInputLineHeadSizeY()));\n    }\n    newInputLineHeadSizeY() {\n        return new DInputReal({\n            weight: 1,\n            min: 0,\n            on: {\n                change: (value) => {\n                    this._selection.setLineHeadSizeY(value);\n                }\n            }\n        });\n    }\n    get buttonLineHeadColor() {\n        var _a;\n        return ((_a = this._buttonLineHeadColor) !== null && _a !== void 0 ? _a : (this._buttonLineHeadColor = this.newButtonLineHeadColor()));\n    }\n    newButtonLineHeadColor() {\n        const result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: (value) => {\n                    this._selection.setLineHeadColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    get inputLineHeadMargin() {\n        var _a;\n        return ((_a = this._inputLineHeadMargin) !== null && _a !== void 0 ? _a : (this._inputLineHeadMargin = this.newInputLineHeadMargin()));\n    }\n    newInputLineHeadMargin() {\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLineHeadMarginLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: (value) => {\n                        this._selection.setLineHeadMargin(value);\n                    }\n                }\n            }\n        });\n    }\n    get layoutTexture() {\n        let result = this._layoutTexture;\n        if (result == null) {\n            result = this.newLayoutTexture();\n            this._layoutTexture = result;\n        }\n        return result;\n    }\n    newLayoutTexture() {\n        return new DLayoutHorizontal({\n            width: \"100%\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonTextureImage,\n                this.buttonTextureGradient,\n                this.buttonTextureFitTo,\n                this.buttonTextureClear,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        });\n    }\n    get buttonTextureImage() {\n        var _a;\n        return ((_a = this._buttonTextureImage) !== null && _a !== void 0 ? _a : (this._buttonTextureImage = this.newButtonTextureImage()));\n    }\n    newButtonTextureImage() {\n        const theme = this.theme;\n        return new DButtonFile({\n            image: {\n                source: this._icons.editor_image\n            },\n            as: DButtonFileAs.DATA_URL,\n            title: theme.getButtonTextureImageTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                open: (dataUrl) => {\n                    toImageElement(dataUrl).then((imageElement) => {\n                        this._selection.setImage(imageElement);\n                    });\n                }\n            }\n        });\n    }\n    get buttonTextureGradient() {\n        var _a;\n        return ((_a = this._buttonTextureGradient) !== null && _a !== void 0 ? _a : (this._buttonTextureGradient = this.newButtonTextureGradient()));\n    }\n    newButtonTextureGradient() {\n        const theme = this.theme;\n        const result = new DButtonColorGradient({\n            image: {\n                source: this._icons.texture_gradient\n            },\n            text: {\n                formatter: () => \"\"\n            },\n            title: theme.getButtonTextureGradientTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                change: (value) => {\n                    const url = toGradientImageUrl(value);\n                    toImageElement(url).then((imageElement) => {\n                        this._selection.setGradient(imageElement, value.toObject());\n                    });\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const last = this._selection.last();\n            if (last != null && last.gradient != null) {\n                result.dialog.value.fromObject(last.gradient);\n            }\n        });\n        return result;\n    }\n    get buttonTextureFitTo() {\n        var _a;\n        return ((_a = this._buttonTextureFitTo) !== null && _a !== void 0 ? _a : (this._buttonTextureFitTo = this.newButtonTextureFitTo()));\n    }\n    newButtonTextureFitTo() {\n        const theme = this.theme;\n        return new DButton({\n            image: {\n                source: this._icons.texture_fit_to\n            },\n            title: theme.getButtonTextureFitToTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.fitToImage();\n                }\n            }\n        });\n    }\n    get buttonTextureClear() {\n        var _a;\n        return ((_a = this._buttonTextureClear) !== null && _a !== void 0 ? _a : (this._buttonTextureClear = this.newButtonTextureClear()));\n    }\n    newButtonTextureClear() {\n        const theme = this.theme;\n        return new DButton({\n            image: {\n                source: this._icons.texture_clear\n            },\n            title: theme.getButtonTextureClearTitle(),\n            theme: \"EButtonEditor\",\n            on: {\n                active: () => {\n                    this._selection.clearImage();\n                }\n            }\n        });\n    }\n    onSelectionChange() {\n        const selection = this._selection;\n        this.state.isDisabled = selection.isEmpty();\n        const last = selection.last();\n        // Shape\n        const layoutChangeTo = this.layoutChangeTo;\n        if (layoutChangeTo) {\n            layoutChangeTo.state.isEnabled = EShapeCapabilities.contains(last, EShapeCapability.REPLACING);\n        }\n        // Grouping\n        let ngroupable = 0;\n        if (2 <= selection.size()) {\n            const shapes = selection.get();\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                if (EShapeCapabilities.contains(shapes[i], EShapeCapability.GROUPING)) {\n                    ngroupable += 1;\n                    if (2 <= ngroupable) {\n                        break;\n                    }\n                }\n            }\n        }\n        this.buttonGroup.state.isEnabled = 2 <= ngroupable;\n        // Ungrouping\n        this.buttonUngroup.state.isEnabled =\n            last instanceof EShapeGroup &&\n                EShapeCapabilities.contains(last, EShapeCapability.CHILDREN) &&\n                EShapeCapabilities.contains(last, EShapeCapability.UNGROUPING);\n        // Fill\n        if (last != null) {\n            this.buttonFill.state.isActive = last.fill.enable;\n            const fill = last.fill;\n            const buttonFillColor = this.buttonFillColor;\n            const value = buttonFillColor.value;\n            value.color = fill.color;\n            value.alpha = fill.alpha;\n            buttonFillColor.state.isEnabled = fill.enable;\n        }\n        // Stroke\n        if (last != null) {\n            const stroke = last.stroke;\n            const strokeEnable = stroke.enable;\n            this.buttonStroke.state.isActive = strokeEnable;\n            // Stroke color\n            const buttonStrokeColor = this.buttonStrokeColor;\n            const value = buttonStrokeColor.value;\n            value.color = stroke.color;\n            value.alpha = stroke.alpha;\n            buttonStrokeColor.state.isEnabled = strokeEnable;\n            // Stroke align\n            const inputStrokeAlign = this.inputStrokeAlign;\n            inputStrokeAlign.input.value = stroke.align;\n            inputStrokeAlign.state.isEnabled = strokeEnable;\n            // Stroke width\n            const inputStrokeWidth = this.inputStrokeWidth;\n            inputStrokeWidth.input.value = stroke.width;\n            inputStrokeWidth.state.isEnabled = strokeEnable;\n            // Stroke side\n            const side = stroke.side;\n            const hasStrokeSide = strokeEnable && EShapeCapabilities.contains(last, EShapeCapability.STROKE_SIDE);\n            const buttonStrokeSideTop = this.buttonStrokeSideTop;\n            const buttonStrokeSideRight = this.buttonStrokeSideRight;\n            const buttonStrokeSideBottom = this.buttonStrokeSideBottom;\n            const buttonStrokeSideLeft = this.buttonStrokeSideLeft;\n            buttonStrokeSideTop.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideRight.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideBottom.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideLeft.state.isEnabled = hasStrokeSide;\n            buttonStrokeSideTop.state.isActive = !!(side & EShapeStrokeSide.TOP);\n            buttonStrokeSideRight.state.isActive = !!(side & EShapeStrokeSide.RIGHT);\n            buttonStrokeSideBottom.state.isActive = !!(side & EShapeStrokeSide.BOTTOM);\n            buttonStrokeSideLeft.state.isActive = !!(side & EShapeStrokeSide.LEFT);\n            // Stroke style\n            const style = stroke.style;\n            const buttonStrokeExpandable = this.buttonStrokeExpandable;\n            const buttonStrokeShrinkable = this.buttonStrokeShrinkable;\n            const buttonStrokeScalableDotDash = this.buttonStrokeScalableDotDash;\n            buttonStrokeExpandable.state.isEnabled = strokeEnable;\n            buttonStrokeShrinkable.state.isEnabled = strokeEnable;\n            buttonStrokeScalableDotDash.state.isEnabled = strokeEnable;\n            buttonStrokeExpandable.state.isActive = !(style & EShapeStrokeStyle.NON_EXPANDING_WIDTH);\n            buttonStrokeShrinkable.state.isActive = !(style & EShapeStrokeStyle.NON_SHRINKING_WIDTH);\n            buttonStrokeScalableDotDash.state.isActive = !(style & EShapeStrokeStyle.NON_SCALING_DOT_AND_DASH);\n        }\n        // Line\n        const layoutLine = this.layoutLine;\n        const buttonLineLock = this.buttonLineLock;\n        const selectLineStyle = this.selectLineStyle;\n        const selectLineType = this.selectLineType;\n        const buttonLineClosed = this.buttonLineClosed;\n        const layoutLineTail = this.layoutLineTail;\n        const buttonLineTailLock = this.buttonLineTailLock;\n        const selectLineTailType = this.selectLineTailType;\n        const inputLineTailSizeX = this.inputLineTailSizeX;\n        const inputLineTailSizeY = this.inputLineTailSizeY;\n        const buttonLineTailColor = this.buttonLineTailColor;\n        const inputLineTailMargin = this.inputLineTailMargin;\n        const layoutLineHead = this.layoutLineHead;\n        const buttonLineHeadLock = this.buttonLineHeadLock;\n        const selectLineHeadType = this.selectLineHeadType;\n        const inputLineHeadSizeX = this.inputLineHeadSizeX;\n        const inputLineHeadSizeY = this.inputLineHeadSizeY;\n        const buttonLineHeadColor = this.buttonLineHeadColor;\n        const inputLineHeadMargin = this.inputLineHeadMargin;\n        if (last != null && last.points != null) {\n            const points = last.points;\n            const hasLine = EShapeCapabilities.contains(last, EShapeCapability.LINE);\n            layoutLine.state.isEnabled = true;\n            buttonLineLock.state.isActive = this.isLocked(last, EShapeCapability.LINE);\n            buttonLineLock.state.isEnabled = true;\n            const lineStrokeMask = EShapeStrokeStyle.DOTTED_MASK | EShapeStrokeStyle.DASHED_MASK;\n            selectLineStyle.value = last.stroke.style & lineStrokeMask;\n            selectLineStyle.state.isEnabled = hasLine;\n            selectLineType.value = points.style & EShapePointsStyle.FORMATTER_MASK;\n            selectLineType.state.isEnabled = hasLine;\n            buttonLineClosed.state.isActive = (points.style & EShapePointsStyle.CLOSED) !== 0;\n            buttonLineClosed.state.isEnabled = hasLine;\n            const hasLineTail = EShapeCapabilities.contains(last, EShapeCapability.LINE_TAIL);\n            layoutLineTail.state.isEnabled = true;\n            buttonLineTailLock.state.isActive = this.isLocked(last, EShapeCapability.LINE_TAIL);\n            buttonLineTailLock.state.isEnabled = true;\n            const markerTail = points.marker.tail;\n            selectLineTailType.value = markerTail.type;\n            selectLineTailType.state.isEnabled = hasLineTail;\n            inputLineTailSizeX.value = markerTail.size.x;\n            inputLineTailSizeX.state.isEnabled = hasLineTail;\n            inputLineTailSizeY.value = markerTail.size.y;\n            inputLineTailSizeY.state.isEnabled = hasLineTail;\n            const markerTailFill = markerTail.fill;\n            const buttonLineTailColorValue = buttonLineTailColor.value;\n            buttonLineTailColorValue.color = markerTailFill.color;\n            buttonLineTailColorValue.alpha = markerTailFill.alpha;\n            buttonLineTailColor.state.isEnabled = markerTailFill.enable && hasLineTail;\n            if (last instanceof EShapeConnectorLine) {\n                inputLineTailMargin.input.value = last.edge.tail.margin;\n                inputLineTailMargin.state.isEnabled = hasLineTail;\n            }\n            else {\n                inputLineTailMargin.state.isEnabled = false;\n            }\n            const hasLineHead = EShapeCapabilities.contains(last, EShapeCapability.LINE_HEAD);\n            layoutLineHead.state.isEnabled = true;\n            buttonLineHeadLock.state.isActive = this.isLocked(last, EShapeCapability.LINE_HEAD);\n            buttonLineHeadLock.state.isEnabled = true;\n            const markerHead = points.marker.head;\n            selectLineHeadType.value = markerHead.type;\n            selectLineHeadType.state.isEnabled = hasLineHead;\n            inputLineHeadSizeX.value = markerHead.size.x;\n            inputLineHeadSizeX.state.isEnabled = hasLineHead;\n            inputLineHeadSizeY.value = markerHead.size.y;\n            inputLineHeadSizeY.state.isEnabled = hasLineHead;\n            const markerHeadFill = markerHead.fill;\n            const buttonLineHeadColorValue = buttonLineHeadColor.value;\n            buttonLineHeadColorValue.color = markerHeadFill.color;\n            buttonLineHeadColorValue.alpha = markerHeadFill.alpha;\n            buttonLineHeadColor.state.isEnabled = markerHeadFill.enable && hasLineHead;\n            if (last instanceof EShapeConnectorLine) {\n                inputLineHeadMargin.input.value = last.edge.head.margin;\n                inputLineHeadMargin.state.isEnabled = hasLineHead;\n            }\n            else {\n                inputLineHeadMargin.state.isEnabled = false;\n            }\n        }\n        else {\n            layoutLine.state.isEnabled = false;\n            buttonLineLock.state.isEnabled = false;\n            selectLineStyle.state.isEnabled = false;\n            selectLineType.state.isEnabled = false;\n            buttonLineClosed.state.isEnabled = false;\n            layoutLineTail.state.isEnabled = false;\n            buttonLineTailLock.state.isEnabled = false;\n            selectLineTailType.state.isEnabled = false;\n            inputLineTailSizeX.state.isEnabled = false;\n            inputLineTailSizeY.state.isEnabled = false;\n            buttonLineTailColor.state.isEnabled = false;\n            inputLineTailMargin.state.isEnabled = false;\n            layoutLineHead.state.isEnabled = false;\n            buttonLineHeadLock.state.isEnabled = false;\n            selectLineHeadType.state.isEnabled = false;\n            inputLineHeadSizeX.state.isEnabled = false;\n            inputLineHeadSizeY.state.isEnabled = false;\n            buttonLineHeadColor.state.isEnabled = false;\n            inputLineHeadMargin.state.isEnabled = false;\n        }\n        // Corner\n        if (last != null) {\n            const hasBorderRadius = EShapeCapabilities.contains(last, EShapeCapability.BORDER_RADIUS);\n            this.textCorner.state.isEnabled = hasBorderRadius;\n            this.inputCornerRadius.value = last.radius;\n            this.inputCornerRadius.state.isEnabled = hasBorderRadius;\n            this.layoutCorner.state.isEnabled = hasBorderRadius;\n            this.buttonCornerBottomLeft.state.isActive = !!(last.corner & EShapeCorner.BOTTOM_LEFT);\n            this.buttonCornerBottomRight.state.isActive = !!(last.corner & EShapeCorner.BOTTOM_RIGHT);\n            this.buttonCornerTopLeft.state.isActive = !!(last.corner & EShapeCorner.TOP_LEFT);\n            this.buttonCornerTopRight.state.isActive = !!(last.corner & EShapeCorner.TOP_RIGHT);\n        }\n        // Texture\n        if (last != null) {\n            this.buttonTextureFitTo.state.isDisabled = last.image == null;\n            this.buttonTextureClear.state.isDisabled = last.image == null;\n        }\n    }\n    getType() {\n        return \"EEditorShape\";\n    }\n}\n//# sourceMappingURL=e-editor-shape.js.map","export const EEDITOR_BUTTON_COUNT = 7;\n//# sourceMappingURL=e-editors.js.map","import { DBaseState, DButtonAmbient, DButtonCheckRight, DControllers, DInputRealAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DList, DListItem } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentSnapBringForward } from \"../command/e-command-document-snap-bring-forward\";\nimport { ECommandDocumentSnapCreate } from \"../command/e-command-document-snap-create\";\nimport { ECommandDocumentSnapDelete } from \"../command/e-command-document-snap-delete\";\nimport { ECommandDocumentSnapGridSize } from \"../command/e-command-document-snap-grid-size\";\nimport { ECommandDocumentSnapGridToggle } from \"../command/e-command-document-snap-grid-toggle\";\nimport { ECommandDocumentSnapGridToggleVisibility } from \"../command/e-command-document-snap-grid-toggle-visibility\";\nimport { ECommandDocumentSnapReplace } from \"../command/e-command-document-snap-replace\";\nimport { ECommandDocumentSnapSendBackward } from \"../command/e-command-document-snap-send-backward\";\nimport { ECommandDocumentSnapTargetToggle } from \"../command/e-command-document-snap-target-toggle\";\nimport { ECommandDocumentSnapTargetToggleVisibility } from \"../command/e-command-document-snap-target-toggle-visibility\";\nimport { ECommandDocumentSnapToggle } from \"../command/e-command-document-snap-toggle\";\nimport { EDialogSnap } from \"../editor/e-dialog-snap\";\nexport class EEditorSnap extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        // Icons\n        this._icons = options.icons;\n        // Diagram\n        const diagram = options.diagram;\n        this._diagram = diagram;\n        this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", () => {\n            this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", () => {\n            this.state.isDisabled = false;\n        });\n        // Snapper\n        const snapper = diagram.snapper;\n        this._snapper = snapper;\n        snapper.on(\"change\", () => {\n            this.onSnapperChange(snapper);\n        });\n        const snapperTarget = snapper.target;\n        snapperTarget.on(\"change\", () => {\n            this.onSnapperTargetChange(snapperTarget);\n        });\n        const snapperGrid = snapper.grid;\n        snapperGrid.on(\"change\", () => {\n            this.onSnapperGridChange(snapperGrid);\n        });\n        // Layout\n        this.addChild(this.buttonLabel);\n        this.addChild(this.buttonGrid);\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.buttonGridEye, this.inputGridSize]\n        }));\n        this.addChild(this.buttonTarget);\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                new DLayoutSpace({ weight: 1 }),\n                this.buttonTargetNew,\n                this.buttonTargetDelete,\n                this.buttonTargetBringForward,\n                this.buttonTargetSendBackward,\n                this.buttonTargetEye,\n                new DLayoutSpace({ weight: 1 })\n            ]\n        }));\n        this.addChild(this.listTarget);\n        // Selection\n        const listSnapTarget = this.listTarget;\n        listSnapTarget.data.selection.on(\"change\", () => {\n            this.onSelectionChange(listSnapTarget);\n        });\n        // Initialization\n        this.onSnapperChange(snapper);\n        this.onSnapperTargetChange(snapperTarget);\n        this.onSnapperGridChange(snapperGrid);\n        this.onSelectionChange(listSnapTarget);\n    }\n    get buttonLabel() {\n        let result = this._buttonLabel;\n        if (result == null) {\n            result = this.newButtonLabel();\n            this._buttonLabel = result;\n        }\n        return result;\n    }\n    newButtonLabel() {\n        const snapper = this._diagram.snapper;\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    if (!snapper.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapToggle(snapper));\n                    }\n                },\n                inactive: () => {\n                    if (snapper.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapToggle(snapper));\n                    }\n                }\n            }\n        });\n    }\n    get buttonTarget() {\n        let result = this._buttonTarget;\n        if (result == null) {\n            result = this.newButtonTarget();\n            this._buttonTarget = result;\n        }\n        return result;\n    }\n    newButtonTarget() {\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonTargetLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    const snapper = this._snapper;\n                    if (!snapper.target.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggle(snapper));\n                    }\n                },\n                inactive: () => {\n                    const snapper = this._snapper;\n                    if (snapper.target.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggle(snapper));\n                    }\n                }\n            }\n        });\n    }\n    get buttonTargetNew() {\n        let result = this._buttonTargetNew;\n        if (result == null) {\n            result = this.newButtonTargetNew();\n            this._buttonTargetNew = result;\n        }\n        return result;\n    }\n    newButtonTargetNew() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.new\n            },\n            title: this.theme.getButtonTargetNewTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonTargetNewActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonTargetNewActive(opener) {\n        this.dialogTarget\n            .reset()\n            .open(opener)\n            .then((value) => {\n            if (value != null) {\n                DControllers.getCommandController().push(new ECommandDocumentSnapCreate(this._snapper, value));\n            }\n        });\n    }\n    get buttonTargetDelete() {\n        let result = this._buttonTargetDelete;\n        if (result == null) {\n            result = this.newButtonTargetDelete();\n            this._buttonTargetDelete = result;\n        }\n        return result;\n    }\n    newButtonTargetDelete() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.delete\n            },\n            title: this.theme.getButtonTargetDeleteTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const listTarget = this.listTarget;\n                    const first = listTarget.data.selection.first;\n                    if (first != null) {\n                        const items = listTarget.data.items;\n                        const index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapDelete(this._snapper, index, first));\n                        }\n                    }\n                }\n            }\n        });\n    }\n    get buttonTargetBringForward() {\n        let result = this._buttonTargetBringForward;\n        if (result == null) {\n            result = this.newButtonTargetBringForward();\n            this._buttonTargetBringForward = result;\n        }\n        return result;\n    }\n    newButtonTargetBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonTargetBringForwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const listTarget = this.listTarget;\n                    const first = listTarget.data.selection.first;\n                    const items = listTarget.data.items;\n                    if (first != null && items[0] !== first) {\n                        const index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapBringForward(this._snapper, index));\n                        }\n                    }\n                }\n            }\n        });\n    }\n    get buttonTargetSendBackward() {\n        let result = this._buttonTargetSendBackward;\n        if (result == null) {\n            result = this.newButtonTargetSendBackward();\n            this._buttonTargetSendBackward = result;\n        }\n        return result;\n    }\n    newButtonTargetSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonTargetSendBackwardTitle(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    const snapper = this._snapper;\n                    const listTarget = this.listTarget;\n                    const first = listTarget.data.selection.first;\n                    const items = listTarget.data.items;\n                    if (first != null && items[items.length] !== first) {\n                        const index = items.indexOf(first);\n                        if (0 <= index) {\n                            DControllers.getCommandController().push(new ECommandDocumentSnapSendBackward(snapper, index));\n                        }\n                    }\n                }\n            }\n        });\n    }\n    get buttonTargetEye() {\n        let result = this._buttonTargetEye;\n        if (result == null) {\n            result = this.newButtonTargetEye();\n            this._buttonTargetEye = result;\n        }\n        return result;\n    }\n    newButtonTargetEye() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.eye\n            },\n            title: this.theme.getButtonTargetEyeTitle(),\n            on: {\n                active: () => {\n                    DControllers.getCommandController().push(new ECommandDocumentSnapTargetToggleVisibility(this._snapper));\n                }\n            }\n        });\n    }\n    get dialogTarget() {\n        let result = this._dialogTarget;\n        if (result == null) {\n            result = this.newDialogTarget();\n            this._dialogTarget = result;\n        }\n        return result;\n    }\n    newDialogTarget() {\n        return new EDialogSnap();\n    }\n    get listTarget() {\n        let result = this._listTarget;\n        if (result == null) {\n            result = this.newListTarget();\n            this._listTarget = result;\n        }\n        return result;\n    }\n    newListTarget() {\n        const theme = this.theme;\n        const result = new DList({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: (value) => {\n                    return theme.getListTargetItemLabel(value);\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        on: {\n                            dblclick: (e, _, item) => {\n                                this.onListTargetDblClick(e, _, item, result);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    }\n    onListTargetDblClick(e, _, item, list) {\n        const oldValue = item.value;\n        if (oldValue != null) {\n            const index = list.data.items.indexOf(oldValue);\n            if (0 <= index) {\n                const dialog = this.dialogTarget;\n                dialog.value = oldValue;\n                dialog.open(item).then((newValue) => {\n                    if (newValue != null) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapReplace(this._snapper, oldValue, newValue, list));\n                    }\n                });\n            }\n        }\n    }\n    get buttonGrid() {\n        let result = this._buttonGrid;\n        if (result == null) {\n            result = this.newButtonGrid();\n            this._buttonGrid = result;\n        }\n        return result;\n    }\n    newButtonGrid() {\n        return new DButtonCheckRight({\n            x: \"padding\",\n            width: \"padding\",\n            text: {\n                value: this.theme.getButtonGridLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    const snapper = this._snapper;\n                    if (!snapper.grid.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridToggle(snapper));\n                    }\n                },\n                inactive: () => {\n                    const snapper = this._snapper;\n                    if (snapper.grid.enable) {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridToggle(snapper));\n                    }\n                }\n            }\n        });\n    }\n    get buttonGridEye() {\n        let result = this._buttonGridEye;\n        if (result == null) {\n            result = this.newButtonGridEye();\n            this._buttonGridEye = result;\n        }\n        return result;\n    }\n    newButtonGridEye() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.eye\n            },\n            title: this.theme.getButtonGridEyeTitle(),\n            on: {\n                active: () => {\n                    DControllers.getCommandController().push(new ECommandDocumentSnapGridToggleVisibility(this._snapper));\n                }\n            }\n        });\n    }\n    get inputGridSize() {\n        let result = this._inputGridSize;\n        if (result == null) {\n            result = this.newInputGridSize();\n            this._inputGridSize = result;\n        }\n        return result;\n    }\n    newInputGridSize() {\n        return new DInputRealAndLabel({\n            weight: 1,\n            label: {\n                text: {\n                    value: this.theme.getInputGridSizeLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                text: {\n                    value: 10\n                },\n                min: 2,\n                on: {\n                    change: (value) => {\n                        DControllers.getCommandController().push(new ECommandDocumentSnapGridSize(this._snapper, value));\n                    }\n                }\n            }\n        });\n    }\n    onSnapperChange(snapper) {\n        this.buttonLabel.state.isActive = snapper.enable;\n    }\n    onSnapperTargetChange(target) {\n        this.buttonTarget.state.isActive = target.enable;\n        const icons = this._icons;\n        this.buttonTargetEye.image = target.visible ? icons.eye : icons.eye_slash;\n        const listTarget = this.listTarget;\n        listTarget.data.items = target.values;\n        this.onSelectionChange(listTarget);\n    }\n    onSnapperGridChange(grid) {\n        this.buttonGrid.state.isActive = grid.enable;\n        const icons = this._icons;\n        this.buttonGridEye.image = grid.visible ? icons.eye : icons.eye_slash;\n        this.inputGridSize.input.value = grid.size;\n    }\n    onSelectionChange(listSnapTarget) {\n        this.buttonTargetDelete.state.isDisabled = listSnapTarget.data.selection.isEmpty();\n        const first = listSnapTarget.data.selection.first;\n        const items = listSnapTarget.data.items;\n        this.buttonTargetBringForward.state.isDisabled = first == null || items[0] === first;\n        this.buttonTargetSendBackward.state.isDisabled =\n            first == null || items[items.length - 1] === first;\n    }\n    getType() {\n        return \"EEditorSnap\";\n    }\n}\n//# sourceMappingURL=e-editor-snap.js.map","import { DButtonAmbient, DButtonCheckRight, DButtonColor, DDropdown, DInputReal, DInputRealAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutVertical, DPane, DText, EShapeTextAlignHorizontal, EShapeTextAlignVertical, EShapeTextDirection, EShapeTextStyle, EShapeTextWeight } from \"@wcardinal/wcardinal-ui\";\nimport { EEDITOR_BUTTON_COUNT } from \"./e-editors\";\nexport class EEditorText extends DPane {\n    constructor(options) {\n        super(options);\n        this._fromShapeTextRegEx = /\\\\+n|\\n/g;\n        this._toShapeTextRegEx = /\\\\+n/g;\n        const selection = options.selection;\n        this._selection = selection;\n        const icons = options.icons;\n        this._icons = icons;\n        const theme = this.theme;\n        new DLayoutVertical({\n            parent: this.content,\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newLabel(theme.getLabel()),\n                this.inputText,\n                this.newLabel(theme.getTextFontLabel()),\n                this.dropdownFontFamily,\n                this.buttonFontColor,\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    height: \"auto\",\n                    children: [\n                        this.inputFontSize,\n                        this.buttonFontSizeDecrease,\n                        this.buttonFontSizeIncrease,\n                        this.buttonFontItalic,\n                        this.buttonFontBold\n                    ]\n                }),\n                this.buttonOutline,\n                this.buttonOutlineColor,\n                this.inputOutlineWidth,\n                this.newLabel(theme.getTextAlignLabel()),\n                new DLayoutVertical({\n                    width: \"100%\",\n                    height: \"auto\",\n                    column: EEDITOR_BUTTON_COUNT,\n                    children: [\n                        this.buttonAlignOutsideLeft,\n                        this.buttonAlignLeft,\n                        this.buttonAlignCenter,\n                        this.buttonAlignRight,\n                        this.buttonAlignOutsideRight,\n                        this.buttonAlignOutsideTop,\n                        this.buttonAlignTop,\n                        this.buttonAlignMiddle,\n                        this.buttonAlignBottom,\n                        this.buttonAlignOutsideBottom,\n                        this.buttonDirectionLeftToRight,\n                        this.buttonDirectionTopToBottom,\n                        this.buttonDirectionBottomToTop,\n                        this.buttonDirectionRightToLeft\n                    ]\n                }),\n                this.buttonClipping,\n                this.buttonFitting,\n                this.newLabel(theme.getTextSpacingLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [this.inputSpacingHorizontal, this.inputSpacingVertical]\n                }),\n                this.newLabel(theme.getTextPaddingLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [this.inputPaddingHorizontal, this.inputPaddingVertical]\n                }),\n                this.newLabel(theme.getTextOffsetLabel()),\n                new DLayoutHorizontal({\n                    width: \"100%\",\n                    children: [this.inputOffsetHorizontal, this.inputOffsetVertical]\n                })\n            ]\n        });\n        selection.on(\"change\", () => {\n            this.onSelectionChange(selection);\n        });\n        this.onSelectionChange(selection);\n    }\n    newLabel(label) {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: label\n            }\n        });\n    }\n    get inputText() {\n        let result = this._inputText;\n        if (result == null) {\n            result = this.newInputText();\n            this._inputText = result;\n        }\n        return result;\n    }\n    newInputText() {\n        return new DInputTextArea({\n            width: \"100%\",\n            height: this.theme.getInputTextHeight(),\n            text: {\n                value: \"\"\n            },\n            on: {\n                input: (value) => {\n                    this._selection.setText(value);\n                }\n            }\n        });\n    }\n    get dropdownFontFamily() {\n        let result = this._dropdownFontFamily;\n        if (result == null) {\n            result = this.newDropdownFontFamily();\n            this._dropdownFontFamily = result;\n        }\n        return result;\n    }\n    newDropdownFontFamily() {\n        return new DDropdown({\n            width: \"100%\",\n            text: {\n                value: this.fontFamilies.get(\"auto\")\n            },\n            menu: {\n                width: \"auto\",\n                column: 3,\n                fit: false,\n                items: this.newDropdownFontFamilyMenuItems()\n            },\n            on: {\n                select: (value) => {\n                    var _a;\n                    this.dropdownFontFamily.text = (_a = this.fontFamilies.get(value)) !== null && _a !== void 0 ? _a : value;\n                    this._selection.setTextFamily(value);\n                }\n            }\n        });\n    }\n    newDropdownFontFamilyMenuItems() {\n        const result = [];\n        this.fontFamilies.forEach((label, fontFamily) => {\n            result.push({\n                width: 200,\n                value: fontFamily,\n                text: {\n                    value: label\n                }\n            });\n        });\n        return result;\n    }\n    get fontFamilies() {\n        let result = this._fontFamilies;\n        if (result == null) {\n            result = this.theme.getFontFamilies();\n            this._fontFamilies = result;\n        }\n        return result;\n    }\n    get buttonFontColor() {\n        let result = this._buttonFontColor;\n        if (result == null) {\n            result = this.newButtonFontColor();\n            this._buttonFontColor = result;\n        }\n        return result;\n    }\n    newButtonFontColor() {\n        const result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: (value) => {\n                    this._selection.setTextColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    get inputFontSize() {\n        let result = this._inputFontSize;\n        if (result == null) {\n            result = this.newInputFontSize();\n            this._inputFontSize = result;\n        }\n        return result;\n    }\n    newInputFontSize() {\n        return new DInputReal({\n            weight: 1,\n            text: {\n                value: 0\n            },\n            min: 0,\n            on: {\n                input: (size) => {\n                    this._selection.setTextSize(size);\n                }\n            }\n        });\n    }\n    get buttonFontSizeDecrease() {\n        let result = this._buttonFontSizeDecrease;\n        if (result == null) {\n            result = this.newButtonFontSizeDecrease();\n            this._buttonFontSizeDecrease = result;\n        }\n        return result;\n    }\n    newButtonFontSizeDecrease() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_font_size_decrease\n            },\n            title: this.theme.getButtonFontSizeDecreaseTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextSizeDelta(-1);\n                }\n            }\n        });\n    }\n    get buttonFontSizeIncrease() {\n        let result = this._buttonFontSizeIncrease;\n        if (result == null) {\n            result = this.newButtonFontSizeIncrease();\n            this._buttonFontSizeIncrease = result;\n        }\n        return result;\n    }\n    newButtonFontSizeIncrease() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.editor_font_size_increase\n            },\n            title: this.theme.getButtonFontSizeIncreaseTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextSizeDelta(+1);\n                }\n            }\n        });\n    }\n    get buttonFontItalic() {\n        let result = this._buttonFontItalic;\n        if (result == null) {\n            result = this.newButtonFontItalic();\n            this._buttonFontItalic = result;\n        }\n        return result;\n    }\n    newButtonFontItalic() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.italic\n            },\n            toggle: true,\n            title: this.theme.getButtonFontItalicTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextStyle(EShapeTextStyle.ITALIC);\n                },\n                inactive: () => {\n                    this._selection.setTextStyle(EShapeTextStyle.NORMAL);\n                }\n            }\n        });\n    }\n    get buttonFontBold() {\n        let result = this._buttonFontBold;\n        if (result == null) {\n            result = this.newButtonFontBold();\n            this._buttonFontBold = result;\n        }\n        return result;\n    }\n    newButtonFontBold() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.bold\n            },\n            toggle: true,\n            title: this.theme.getButtonFontBoldTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextWeight(EShapeTextWeight.BOLD);\n                },\n                inactive: () => {\n                    this._selection.setTextWeight(EShapeTextWeight.NORMAL);\n                }\n            }\n        });\n    }\n    get buttonOutline() {\n        let result = this._buttonOutline;\n        if (result == null) {\n            result = this.newButtonOutline();\n            this._buttonOutline = result;\n        }\n        return result;\n    }\n    newButtonOutline() {\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonOutlineLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    this._selection.setTextOutlineEnabled(true);\n                },\n                inactive: () => {\n                    this._selection.setTextOutlineEnabled(false);\n                }\n            }\n        });\n    }\n    get buttonOutlineColor() {\n        let result = this._buttonOutlineColor;\n        if (result == null) {\n            result = this.newButtonOutlineColor();\n            this._buttonOutlineColor = result;\n        }\n        return result;\n    }\n    newButtonOutlineColor() {\n        const result = new DButtonColor({\n            width: \"100%\",\n            on: {\n                change: (value) => {\n                    this._selection.setTextOutlineColor(value.color, value.alpha);\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        return result;\n    }\n    get inputOutlineWidth() {\n        var _a;\n        return ((_a = this._inputOutlineWidth) !== null && _a !== void 0 ? _a : (this._inputOutlineWidth = this.newInputOutlineWidth()));\n    }\n    newInputOutlineWidth() {\n        return new DInputRealAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputOutlineWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 0,\n                step: 1,\n                max: 100,\n                on: {\n                    change: (value) => {\n                        this._selection.setTextOutlineWidth(value * 0.01);\n                    }\n                }\n            }\n        });\n    }\n    get buttonAlignOutsideLeft() {\n        let result = this._buttonAlignOutsideLeft;\n        if (result == null) {\n            result = this.newButtonAlignOutsideLeft();\n            this._buttonAlignOutsideLeft = result;\n        }\n        return result;\n    }\n    newButtonAlignOutsideLeft() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_left\n            },\n            title: this.theme.getButtonAlignOutsideLeftTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.OUTSIDE_LEFT);\n                }\n            }\n        });\n    }\n    get buttonAlignLeft() {\n        let result = this._buttonAlignLeft;\n        if (result == null) {\n            result = this.newButtonAlignLeft();\n            this._buttonAlignLeft = result;\n        }\n        return result;\n    }\n    newButtonAlignLeft() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_left\n            },\n            title: this.theme.getButtonAlignLeftTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.LEFT);\n                }\n            }\n        });\n    }\n    get buttonAlignCenter() {\n        let result = this._buttonAlignCenter;\n        if (result == null) {\n            result = this.newButtonAlignCenter();\n            this._buttonAlignCenter = result;\n        }\n        return result;\n    }\n    newButtonAlignCenter() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_center\n            },\n            title: this.theme.getButtonAlignCenterTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.CENTER);\n                }\n            }\n        });\n    }\n    get buttonAlignRight() {\n        let result = this._buttonAlignRight;\n        if (result == null) {\n            result = this.newButtonAlignRight();\n            this._buttonAlignRight = result;\n        }\n        return result;\n    }\n    newButtonAlignRight() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_right\n            },\n            title: this.theme.getButtonAlignRightTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.RIGHT);\n                }\n            }\n        });\n    }\n    get buttonAlignOutsideRight() {\n        let result = this._buttonAlignOutsideRight;\n        if (result == null) {\n            result = this.newButtonAlignOutsideRight();\n            this._buttonAlignOutsideRight = result;\n        }\n        return result;\n    }\n    newButtonAlignOutsideRight() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_right\n            },\n            title: this.theme.getButtonAlignOutsideRightTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignHorizontal(EShapeTextAlignHorizontal.OUTSIDE_RIGHT);\n                }\n            }\n        });\n    }\n    get buttonAlignOutsideTop() {\n        let result = this._buttonAlignOutsideTop;\n        if (result == null) {\n            result = this.newButtonAlignOutsideTop();\n            this._buttonAlignOutsideTop = result;\n        }\n        return result;\n    }\n    newButtonAlignOutsideTop() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_top\n            },\n            title: this.theme.getButtonAlignOutsideTopTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignVertical(EShapeTextAlignVertical.OUTSIDE_TOP);\n                }\n            }\n        });\n    }\n    get buttonAlignTop() {\n        let result = this._buttonAlignTop;\n        if (result == null) {\n            result = this.newButtonAlignTop();\n            this._buttonAlignTop = result;\n        }\n        return result;\n    }\n    newButtonAlignTop() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_top\n            },\n            title: this.theme.getButtonAlignTopTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignVertical(EShapeTextAlignVertical.TOP);\n                }\n            }\n        });\n    }\n    get buttonAlignMiddle() {\n        let result = this._buttonAlignMiddle;\n        if (result == null) {\n            result = this.newButtonAlignMiddle();\n            this._buttonAlignMiddle = result;\n        }\n        return result;\n    }\n    newButtonAlignMiddle() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_middle\n            },\n            title: this.theme.getButtonAlignMiddleTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignVertical(EShapeTextAlignVertical.MIDDLE);\n                }\n            }\n        });\n    }\n    get buttonAlignBottom() {\n        let result = this._buttonAlignBottom;\n        if (result == null) {\n            result = this.newButtonAlignBottom();\n            this._buttonAlignBottom = result;\n        }\n        return result;\n    }\n    newButtonAlignBottom() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_bottom\n            },\n            title: this.theme.getButtonAlignBottomTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignVertical(EShapeTextAlignVertical.BOTTOM);\n                }\n            }\n        });\n    }\n    get buttonAlignOutsideBottom() {\n        let result = this._buttonAlignOutsideBottom;\n        if (result == null) {\n            result = this.newButtonAlignOutsideBottom();\n            this._buttonAlignOutsideBottom = result;\n        }\n        return result;\n    }\n    newButtonAlignOutsideBottom() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_align_outside_bottom\n            },\n            title: this.theme.getButtonAlignOutsideBottomTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextAlignVertical(EShapeTextAlignVertical.OUTSIDE_BOTTOM);\n                }\n            }\n        });\n    }\n    get buttonDirectionLeftToRight() {\n        let result = this._buttonDirectionLeftToRight;\n        if (result == null) {\n            result = this.newButtonDirectionLeftToRight();\n            this._buttonDirectionLeftToRight = result;\n        }\n        return result;\n    }\n    newButtonDirectionLeftToRight() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_left_to_right\n            },\n            title: this.theme.getButtonDirectionLeftToRightTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextDirection(EShapeTextDirection.LEFT_TO_RIGHT);\n                }\n            }\n        });\n    }\n    get buttonDirectionTopToBottom() {\n        let result = this._buttonDirectionTopToBottom;\n        if (result == null) {\n            result = this.newButtonDirectionTopToBottom();\n            this._buttonDirectionTopToBottom = result;\n        }\n        return result;\n    }\n    newButtonDirectionTopToBottom() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_top_to_bottom\n            },\n            title: this.theme.getButtonDirectionTopToBottomTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextDirection(EShapeTextDirection.TOP_TO_BOTTOM);\n                }\n            }\n        });\n    }\n    get buttonDirectionBottomToTop() {\n        let result = this._buttonDirectionBottomToTop;\n        if (result == null) {\n            result = this.newButtonDirectionBottomToTop();\n            this._buttonDirectionBottomToTop = result;\n        }\n        return result;\n    }\n    newButtonDirectionBottomToTop() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_bottom_to_top\n            },\n            title: this.theme.getButtonDirectionBottomToTopTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextDirection(EShapeTextDirection.BOTTOM_TO_TOP);\n                }\n            }\n        });\n    }\n    get buttonDirectionRightToLeft() {\n        let result = this._buttonDirectionRightToLeft;\n        if (result == null) {\n            result = this.newButtonDirectionRightToLeft();\n            this._buttonDirectionRightToLeft = result;\n        }\n        return result;\n    }\n    newButtonDirectionRightToLeft() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.text_direction_right_to_left\n            },\n            title: this.theme.getButtonDirectionRightToLeftTitle(),\n            on: {\n                active: () => {\n                    this._selection.setTextDirection(EShapeTextDirection.RIGHT_TO_LEFT);\n                }\n            }\n        });\n    }\n    get buttonClipping() {\n        let result = this._buttonClipping;\n        if (result == null) {\n            result = this.newButtonClipping();\n            this._buttonClipping = result;\n        }\n        return result;\n    }\n    newButtonClipping() {\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonClippingLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    this._selection.setTextClipping(true);\n                },\n                inactive: () => {\n                    this._selection.setTextClipping(false);\n                }\n            }\n        });\n    }\n    get buttonFitting() {\n        let result = this._buttonFitting;\n        if (result == null) {\n            result = this.newButtonFitting();\n            this._buttonFitting = result;\n        }\n        return result;\n    }\n    newButtonFitting() {\n        return new DButtonCheckRight({\n            width: \"100%\",\n            text: {\n                value: this.theme.getButtonFittingLabel()\n            },\n            padding: 0,\n            background: {\n                color: null\n            },\n            on: {\n                active: () => {\n                    this._selection.setTextFitting(true);\n                },\n                inactive: () => {\n                    this._selection.setTextFitting(false);\n                }\n            }\n        });\n    }\n    get inputSpacingHorizontal() {\n        let result = this._inputSpacingHorizontal;\n        if (result == null) {\n            result = this.newInputSpacingHorizontal();\n            this._inputSpacingHorizontal = result;\n        }\n        return result;\n    }\n    newInputSpacingHorizontal() {\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setTextSpacingHorizontal(value);\n                }\n            }\n        });\n    }\n    get inputSpacingVertical() {\n        let result = this._inputSpacingVertical;\n        if (result == null) {\n            result = this.newInputSpacingVertical();\n            this._inputSpacingVertical = result;\n        }\n        return result;\n    }\n    newInputSpacingVertical() {\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setTextSpacingVertical(value);\n                }\n            }\n        });\n    }\n    get inputPaddingHorizontal() {\n        let result = this._inputPaddingHorizontal;\n        if (result == null) {\n            result = this.newInputPaddingHorizontal();\n            this._inputPaddingHorizontal = result;\n        }\n        return result;\n    }\n    newInputPaddingHorizontal() {\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setTextPaddingHorizontal(value);\n                }\n            }\n        });\n    }\n    get inputPaddingVertical() {\n        let result = this._inputTextPaddingVertical;\n        if (result == null) {\n            result = this.newInputPaddingVertical();\n            this._inputTextPaddingVertical = result;\n        }\n        return result;\n    }\n    newInputPaddingVertical() {\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setTextPaddingVertical(value);\n                }\n            }\n        });\n    }\n    get inputOffsetHorizontal() {\n        let result = this._inputOffsetHorizontal;\n        if (result == null) {\n            result = this.newInputOffsetHorizontal();\n            this._inputOffsetHorizontal = result;\n        }\n        return result;\n    }\n    newInputOffsetHorizontal() {\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setTextOffsetHorizontal(value);\n                }\n            }\n        });\n    }\n    get inputOffsetVertical() {\n        let result = this._inputOffsetVertical;\n        if (result == null) {\n            result = this.newInputOffsetVertical();\n            this._inputOffsetVertical = result;\n        }\n        return result;\n    }\n    newInputOffsetVertical() {\n        return new DInputReal({\n            weight: 1,\n            step: 1,\n            text: {\n                value: 0\n            },\n            on: {\n                change: (value) => {\n                    this._selection.setTextOffsetVertical(value);\n                }\n            }\n        });\n    }\n    onSelectionChange(selection) {\n        var _a;\n        this.state.isDisabled = selection.isEmpty();\n        const last = selection.last();\n        if (last != null) {\n            const text = last.text;\n            this.inputText.value = text.value;\n            const textFamily = text.family;\n            this.dropdownFontFamily.text = (_a = this.fontFamilies.get(textFamily)) !== null && _a !== void 0 ? _a : textFamily;\n            const buttonFontColor = this.buttonFontColor.value;\n            buttonFontColor.color = text.color;\n            buttonFontColor.alpha = text.alpha;\n            this.inputFontSize.value = text.size;\n            this.buttonFontItalic.state.isActive = text.style === EShapeTextStyle.ITALIC;\n            this.buttonFontBold.state.isActive = text.weight === EShapeTextWeight.BOLD;\n            const outline = text.outline;\n            this.buttonOutline.state.isActive = outline.enable;\n            const buttonOutlineColor = this.buttonOutlineColor;\n            const buttonOutlineColorValue = buttonOutlineColor.value;\n            buttonOutlineColorValue.color = outline.color;\n            buttonOutlineColorValue.alpha = outline.alpha;\n            buttonOutlineColor.state.isDisabled = !outline.enable;\n            const inputOutlineWidth = this.inputOutlineWidth;\n            inputOutlineWidth.input.value = outline.width * 100;\n            inputOutlineWidth.state.isDisabled = !outline.enable;\n            this.buttonClipping.state.isActive = text.clipping;\n            this.buttonFitting.state.isActive = text.fitting;\n            const spacing = text.spacing;\n            this.inputSpacingHorizontal.value = spacing.horizontal;\n            this.inputSpacingVertical.value = spacing.vertical;\n            const padding = text.padding;\n            this.inputPaddingHorizontal.value = padding.horizontal;\n            this.inputPaddingVertical.value = padding.vertical;\n            const offset = text.offset;\n            this.inputOffsetHorizontal.value = offset.horizontal;\n            this.inputOffsetVertical.value = offset.vertical;\n        }\n    }\n    getType() {\n        return \"EEditorText\";\n    }\n}\n//# sourceMappingURL=e-editor-text.js.map","import { DControllers, DTableDataSelectionType } from \"@wcardinal/wcardinal-ui\";\nimport { utils } from \"pixi.js\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nconst COMPARATOR = (a, b) => {\n    return a[0] - b[0];\n};\nexport class EEditorTreeSelection extends utils.EventEmitter {\n    constructor(parent, selection) {\n        super();\n        this._parent = parent;\n        this._selection = selection;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get indices() {\n        const selection = this._selection;\n        const result = [];\n        this._parent.each((row, index) => {\n            if (selection.contains(row)) {\n                result.push(index);\n            }\n        });\n        return result;\n    }\n    get rows() {\n        const selection = this._selection;\n        const result = [];\n        this._parent.each((row, index) => {\n            if (selection.contains(row)) {\n                result.push(row);\n            }\n        });\n        return result;\n    }\n    get type() {\n        return DTableDataSelectionType.MULTIPLE;\n    }\n    get first() {\n        const row = this._selection.first();\n        if (row) {\n            return this.toIndex(row);\n        }\n        return null;\n    }\n    get last() {\n        const row = this._selection.last();\n        if (row) {\n            return this.toIndex(row);\n        }\n        return null;\n    }\n    onNodeChange(nodes) {\n        // DO NOTHING\n    }\n    toggle(rowIndex) {\n        const row = this._parent.get(rowIndex);\n        if (row) {\n            const selection = this._selection;\n            const before = selection.store();\n            selection.toggle(row);\n            selection.focus();\n            const after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    }\n    add(rowIndex) {\n        const row = this._parent.get(rowIndex);\n        if (row) {\n            const selection = this._selection;\n            if (!selection.contains(row)) {\n                const before = selection.store();\n                selection.toggle(row);\n                selection.focus();\n                const after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    }\n    toIndex(target) {\n        let result = null;\n        this._parent.each((row, index) => {\n            if (target === row) {\n                result = index;\n                return false;\n            }\n            return true;\n        });\n        return result;\n    }\n    addTo(rowIndex) {\n        const last = this._selection.last();\n        if (last != null) {\n            const index = this.toIndex(last);\n            if (index != null) {\n                this.addRange(index, false, rowIndex, true);\n            }\n        }\n    }\n    addRange(from, includeFrom, to, includeTo) {\n        const rows = [];\n        const parent = this._parent;\n        const selection = this._selection;\n        if (from < to) {\n            parent.each((row) => {\n                if (!selection.contains(row)) {\n                    rows.push(row);\n                }\n            }, from + (includeFrom ? 0 : 1), to + (includeTo ? 1 : 0));\n        }\n        else {\n            parent.each((row) => {\n                if (!selection.contains(row)) {\n                    rows.push(row);\n                }\n            }, to + (includeTo ? 0 : 1), from + (includeFrom ? 1 : 0));\n        }\n        if (0 < rows.length) {\n            const before = selection.store();\n            selection.addAll(rows);\n            selection.focus();\n            const after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    }\n    addAll(rowIndices) {\n        if (0 < rowIndices.length) {\n            const rows = [];\n            const parent = this._parent;\n            const selection = this._selection;\n            for (let i = 0, imax = rowIndices.length; i < imax; ++i) {\n                const row = parent.get(rowIndices[i]);\n                if (row && !selection.contains(row)) {\n                    rows.push(row);\n                }\n            }\n            if (0 < rows.length) {\n                const before = selection.store();\n                selection.addAll(rows);\n                selection.focus();\n                const after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    }\n    contains(rowIndex) {\n        const row = this._parent.get(rowIndex);\n        if (row) {\n            return this._selection.contains(row);\n        }\n        return false;\n    }\n    remove(rowIndex) {\n        const row = this._parent.get(rowIndex);\n        if (row) {\n            const selection = this._selection;\n            if (selection.contains(row)) {\n                const before = selection.store();\n                selection.remove(row);\n                selection.focus();\n                const after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    }\n    clear() {\n        const selection = this._selection;\n        if (!selection.isEmpty()) {\n            const before = selection.store();\n            selection.clear();\n            selection.focus();\n            const after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    }\n    clearAndAdd(rowIndex) {\n        const row = this._parent.get(rowIndex);\n        if (row) {\n            const selection = this._selection;\n            if (selection.contains(row)) {\n                if (1 < selection.size()) {\n                    const before = selection.store();\n                    selection.set(row);\n                    selection.focus();\n                    const after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n            }\n            else {\n                const before = selection.store();\n                selection.set(row);\n                selection.focus();\n                const after = selection.store();\n                DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n            }\n        }\n    }\n    clearAndAddAll(rowIndices) {\n        const selection = this._selection;\n        if (!selection.isEmpty() || 0 < rowIndices.length) {\n            const rows = [];\n            const parent = this._parent;\n            for (let i = 0, imax = rowIndices.length; i < imax; ++i) {\n                const row = parent.get(rowIndices[i]);\n                if (row) {\n                    rows.push(row);\n                }\n            }\n            const before = selection.store();\n            selection.clearAndAddAll(rows);\n            selection.focus();\n            const after = selection.store();\n            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n        }\n    }\n    shift(rowIndex, amount) {\n        // DO NOTHING\n    }\n    size() {\n        return this._selection.size();\n    }\n    isEmpty() {\n        return this._selection.isEmpty();\n    }\n    each(iteratee) {\n        const selection = this._selection;\n        this._parent.each((row, index) => {\n            if (selection.contains(row)) {\n                if (iteratee(index) === false) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n    toArray() {\n        const selection = this._selection;\n        const result = [];\n        this._parent.each((row, index) => {\n            if (selection.contains(row)) {\n                result.push([index, row]);\n            }\n        });\n        return result;\n    }\n    toSortedArray() {\n        return this.toArray().sort(COMPARATOR);\n    }\n    toObject() {\n        const selection = this._selection;\n        const result = {};\n        this._parent.each((row, index) => {\n            if (selection.contains(row)) {\n                result[index] = row;\n            }\n        });\n        return result;\n    }\n    toMap() {\n        const selection = this._selection;\n        const result = new Map();\n        this._parent.each((row, index) => {\n            if (selection.contains(row)) {\n                result.set(index, row);\n            }\n        });\n        return result;\n    }\n}\n//# sourceMappingURL=e-editor-tree-selection.js.map","import { DButtonAmbient, DControllers, DLayoutHorizontal, DLayoutVertical, DTable, DTableDataTree, DText, EShapeCapabilities, EShapeCapability, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyId } from \"../command/e-command-shape-property-id\";\nimport { EEditorTreeSelection } from \"./e-editor-tree-selection\";\nimport { EToolSelectSelectionUpdatedPart } from \"../tool/e-tool-select-selection-updated-part\";\nimport { toShapeLabel } from \"./to-shape-label\";\nexport class EEditorTree extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        this._icons = options.icons;\n        const diagram = options.diagram;\n        this._diagram = diagram;\n        this._selection = options.selection;\n        this._isInitialized = false;\n        this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n    }\n    show() {\n        super.show();\n        this.onShow();\n        return this;\n    }\n    onShow() {\n        if (!this._isInitialized) {\n            this._isInitialized = true;\n            this.initLayout();\n        }\n        this.onSelectionChange(EToolSelectSelectionUpdatedPart.NONE);\n    }\n    initLayout() {\n        this.addChild(this.layoutOrder);\n        this.addChild(this.table);\n        // Selection change event handling\n        this._selection.on(\"change\", (parts) => {\n            this.onSelectionChange(parts);\n        });\n        // Layer change even handling\n        const onLayerChangeBound = () => {\n            this.onLayerChange();\n        };\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        if (canvas) {\n            this.state.isDisabled = false;\n            canvas.layer.on(\"change\", onLayerChangeBound);\n        }\n        else {\n            this.state.isDisabled = true;\n        }\n        diagram.on(\"set\", (newCanvas) => {\n            this.state.isDisabled = false;\n            newCanvas.layer.on(\"change\", onLayerChangeBound);\n        });\n        diagram.on(\"ready\", () => {\n            this.onLayerChange();\n        });\n        diagram.on(\"unset\", (oldCanvas) => {\n            this.state.isDisabled = true;\n            this.onLayerChange();\n            oldCanvas.layer.off(\"change\", onLayerChangeBound);\n        });\n        this.onLayerChange();\n    }\n    get layoutOrder() {\n        var _a;\n        return ((_a = this._layerOrder) !== null && _a !== void 0 ? _a : (this._layerOrder = this.newLayoutOrder()));\n    }\n    newLayoutOrder() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [\n                this.newTextLabel(),\n                this.buttonBringToFront,\n                this.buttonBringForward,\n                this.buttonSendBackward,\n                this.buttonSendToBack\n            ]\n        });\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get buttonBringToFront() {\n        var _a;\n        return ((_a = this._buttonBringToFront) !== null && _a !== void 0 ? _a : (this._buttonBringToFront = this.newButtonBringToFront()));\n    }\n    newButtonBringToFront() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_to_top\n            },\n            title: this.theme.getButtonBringToFrontTitle(),\n            on: {\n                active: () => {\n                    this._selection.bringToFront();\n                }\n            }\n        });\n    }\n    get buttonBringForward() {\n        var _a;\n        return ((_a = this._buttonBringForward) !== null && _a !== void 0 ? _a : (this._buttonBringForward = this.newButtonBringForward()));\n    }\n    newButtonBringForward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_up\n            },\n            title: this.theme.getButtonBringForwardTitle(),\n            on: {\n                active: () => {\n                    this._selection.bringForward();\n                }\n            }\n        });\n    }\n    get buttonSendBackward() {\n        var _a;\n        return ((_a = this._buttonSendBackward) !== null && _a !== void 0 ? _a : (this._buttonSendBackward = this.newButtonSendBackward()));\n    }\n    newButtonSendBackward() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_down\n            },\n            title: this.theme.getButtonSendBackwardTitle(),\n            on: {\n                active: () => {\n                    this._selection.sendBackward();\n                }\n            }\n        });\n    }\n    get buttonSendToBack() {\n        var _a;\n        return ((_a = this._buttonSendToBack) !== null && _a !== void 0 ? _a : (this._buttonSendToBack = this.newButtonSendToBack()));\n    }\n    newButtonSendToBack() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.arrow_to_bottom\n            },\n            title: this.theme.getButtonSendToBackTitle(),\n            on: {\n                active: () => {\n                    this._selection.sendToBack();\n                }\n            }\n        });\n    }\n    onSelectionChange(parts) {\n        var _a;\n        if (this.isShown()) {\n            parts |= this._updatedParts;\n            this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n            if (parts & EToolSelectSelectionUpdatedPart.TREE) {\n                this.table.data.nodes = (_a = this._diagram.layer) === null || _a === void 0 ? void 0 : _a.children;\n            }\n            else if (parts & EToolSelectSelectionUpdatedPart.SELECTION) {\n                this.table.data.update();\n            }\n            else if (parts & EToolSelectSelectionUpdatedPart.PROPERTY_ID) {\n                this.table.data.update(true);\n            }\n            this.layoutOrder.state.isEnabled = EShapeCapabilities.contains(this._selection.last(), EShapeCapability.ORDER_IN_LAYER);\n        }\n        else {\n            this._updatedParts |= parts;\n        }\n    }\n    onLayerChange() {\n        var _a;\n        this.table.data.nodes = (_a = this._diagram.layer) === null || _a === void 0 ? void 0 : _a.children;\n    }\n    get table() {\n        var _a;\n        return ((_a = this._table) !== null && _a !== void 0 ? _a : (this._table = this.newTable()));\n    }\n    newTable() {\n        return new DTable({\n            x: \"padding\",\n            width: \"padding\",\n            weight: 1,\n            columns: [\n                {\n                    type: \"TREE\",\n                    editable: true,\n                    getter: (row) => {\n                        return toShapeLabel(row);\n                    },\n                    setter: (row, columnIndex, cell) => {\n                        if (row.id !== cell) {\n                            DControllers.getCommandController().push(new ECommandShapePropertyId(this._selection, cell, [row]));\n                        }\n                    }\n                }\n            ],\n            data: new DTableDataTree({\n                reverse: true,\n                toChildren: (shape) => {\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN)) {\n                        return shape.children;\n                    }\n                    return null;\n                },\n                selection: (parent) => {\n                    return new EEditorTreeSelection(parent, this._selection);\n                }\n            }),\n            on: {\n                keydown: (e) => {\n                    if (UtilKeyboardEvent.isDeleteKey(e)) {\n                        this._selection.delete();\n                        e.preventDefault();\n                    }\n                }\n            }\n        });\n    }\n    getType() {\n        return \"EEditorTree\";\n    }\n}\n//# sourceMappingURL=e-editor-tree.js.map","import { DButtonAmbient, DControllers, DDialogMessage, DDialogProcessing, DLayoutHorizontal, DLayoutVertical, DList, DListItem, DText, isArray } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nexport class EEditorValidation extends DLayoutVertical {\n    constructor(options) {\n        super(options);\n        // Selection\n        const selection = options.selection;\n        this._selection = selection;\n        // Icons\n        this._icons = options.icons;\n        // Verifier\n        this._validator = options.validator;\n        // Diagram\n        const diagram = options.diagram;\n        this._diagram = diagram;\n        this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", () => {\n            this.list.data.clear();\n            this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", () => {\n            this.state.isDisabled = false;\n        });\n        // Layout\n        this.addChild(new DLayoutHorizontal({\n            x: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newTextLabel(), this.buttonRevalidate]\n        }));\n        this.addChild(this.list);\n    }\n    newTextLabel() {\n        return new DText({\n            weight: 1,\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    get buttonRevalidate() {\n        let result = this._buttonRevalidate;\n        if (result == null) {\n            result = this.newButtonRevalidate();\n            this._buttonRevalidate = result;\n        }\n        return result;\n    }\n    newButtonRevalidate() {\n        return new DButtonAmbient({\n            width: 30,\n            image: {\n                source: this._icons.refresh\n            },\n            title: this.theme.getButtonRevalidateTitle(),\n            on: {\n                active: (emitter) => {\n                    this.onButtonValidateActive(emitter);\n                }\n            }\n        });\n    }\n    onButtonValidateActive(opener) {\n        const validator = this._validator;\n        if (validator != null) {\n            const canvas = this._diagram.canvas;\n            if (canvas != null) {\n                const dialogProcessing = this.dialogProcessing;\n                dialogProcessing.open(opener);\n                const data = this.list.data;\n                try {\n                    const result = validator(canvas);\n                    if (isArray(result)) {\n                        data.clearAndAddAll(result);\n                        dialogProcessing.resolve();\n                    }\n                    else {\n                        result.then((results) => {\n                            data.clearAndAddAll(results);\n                            dialogProcessing.resolve();\n                        }, () => {\n                            data.clear();\n                            dialogProcessing.reject();\n                        });\n                    }\n                }\n                catch (_a) {\n                    data.clear();\n                    dialogProcessing.reject();\n                }\n            }\n        }\n    }\n    get list() {\n        let result = this._list;\n        if (result == null) {\n            result = this.newList();\n            this._list = result;\n        }\n        return result;\n    }\n    newList() {\n        const result = new DList({\n            width: \"padding\",\n            weight: 1,\n            data: {\n                toLabel: (value) => {\n                    return value.message;\n                }\n            },\n            updater: {\n                newItem: (data) => {\n                    return new DListItem(data, {\n                        on: {\n                            select: (value, item) => {\n                                this.onListItemDown(value, item);\n                            }\n                        }\n                    });\n                }\n            }\n        });\n        return result;\n    }\n    onListItemDown(value, item) {\n        const shape = value.shape;\n        if (shape != null) {\n            const canvas = this._diagram.canvas;\n            const layer = shape.root.parent;\n            if (canvas != null && layer != null) {\n                // Selection\n                const selection = this._selection;\n                const before = selection.store();\n                if (selection.set(shape)) {\n                    selection.focus();\n                    const after = selection.store();\n                    DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                }\n                else {\n                    selection.focus();\n                }\n                // Change the active layer\n                const layerActive = canvas.layer.active;\n                if (layerActive !== layer) {\n                    canvas.layer.active = layer;\n                }\n            }\n            else {\n                this.dialogError.open(item);\n            }\n        }\n    }\n    get dialogError() {\n        let result = this._dialogError;\n        if (result == null) {\n            result = this.newDialogError();\n            this._dialogError = result;\n        }\n        return result;\n    }\n    newDialogError() {\n        return new DDialogMessage({\n            message: \"No shapes found.\"\n        });\n    }\n    get dialogProcessing() {\n        let result = this._dialogProcessing;\n        if (result == null) {\n            result = this.newDialogProcessing();\n            this._dialogProcessing = result;\n        }\n        return result;\n    }\n    newDialogProcessing() {\n        return new DDialogProcessing({\n            footer: {\n                button: {\n                    ok: \"OK\",\n                    cancel: null\n                }\n            }\n        });\n    }\n    getType() {\n        return \"EEditorValidation\";\n    }\n}\n//# sourceMappingURL=e-editor-validation.js.map","export class EToolGroupImpl {\n    constructor() {\n        this._isSuspended = false;\n        this._active = null;\n        this._activeParameter = null;\n    }\n    activate(target, parameter) {\n        const oldActive = this._active;\n        const oldActiveParameter = this._activeParameter;\n        if (oldActive !== target || oldActiveParameter !== parameter) {\n            this._activeParameter = parameter;\n            if (oldActive !== target) {\n                if (oldActive) {\n                    oldActive.deactivate();\n                }\n                this._active = target;\n                if (!this._isSuspended) {\n                    target.activate();\n                }\n            }\n        }\n    }\n    deactivate(target, parameter) {\n        if (this._active === target && this._activeParameter === parameter) {\n            this._active = null;\n            this._activeParameter = null;\n            target.deactivate();\n        }\n    }\n    suspend() {\n        if (!this._isSuspended) {\n            this._isSuspended = true;\n            const active = this._active;\n            if (active) {\n                active.deactivate();\n            }\n        }\n    }\n    resume() {\n        if (this._isSuspended) {\n            this._isSuspended = false;\n            const active = this._active;\n            if (active) {\n                active.activate();\n            }\n        }\n    }\n    isSuspended() {\n        return this._isSuspended;\n    }\n}\n//# sourceMappingURL=e-tool-group-impl.js.map","import { utils } from \"pixi.js\";\nexport class EToolImpl extends utils.EventEmitter {\n    constructor() {\n        super();\n        this._isActive = false;\n    }\n    activate() {\n        if (!this._isActive) {\n            this._isActive = true;\n            this.onActivate();\n        }\n    }\n    deactivate() {\n        if (this._isActive) {\n            this._isActive = false;\n            this.onDeactivate();\n        }\n    }\n    onActivate() {\n        // DO NOTHING\n    }\n    onDeactivate() {\n        // DO NOTHING\n    }\n    isActive() {\n        return this._isActive;\n    }\n}\n//# sourceMappingURL=e-tool-impl.js.map","import { Graphics, Point } from \"pixi.js\";\nconst FILL_COLOR = 0x1e87f0;\nconst FILL_ALPHA = 0.5;\nexport class EToolSelectArea extends Graphics {\n    constructor() {\n        super();\n        this._size = new Point();\n    }\n    get size() {\n        return this._size;\n    }\n    update() {\n        this.clear();\n        const size = this._size;\n        const x = Math.min(0, size.x);\n        const y = Math.min(0, size.y);\n        const width = Math.abs(size.x);\n        const height = Math.abs(size.y);\n        this.beginFill(FILL_COLOR, FILL_ALPHA);\n        this.drawRect(x, y, width, height);\n        this.endFill();\n    }\n}\n//# sourceMappingURL=e-tool-select-area.js.map","export var EToolSelectMode;\n(function (EToolSelectMode) {\n    EToolSelectMode[EToolSelectMode[\"NONE\"] = 0] = \"NONE\";\n    EToolSelectMode[EToolSelectMode[\"SELECT\"] = 1] = \"SELECT\";\n    EToolSelectMode[EToolSelectMode[\"TRANSLATE\"] = 2] = \"TRANSLATE\";\n    EToolSelectMode[EToolSelectMode[\"SCALE\"] = 3] = \"SCALE\";\n    EToolSelectMode[EToolSelectMode[\"ROTATE\"] = 4] = \"ROTATE\";\n})(EToolSelectMode || (EToolSelectMode = {}));\n//# sourceMappingURL=e-tool-select-mode.js.map","import { Container } from \"pixi.js\";\nexport class EToolSelectModifierContainer extends Container {\n}\n//# sourceMappingURL=e-tool-select-modifier-container.js.map","import { ESnapperModifierAnchor } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nexport class EToolSelectModifierHitArea extends Rectangle {\n    constructor(modifier) {\n        super();\n        this._modifier = modifier;\n    }\n    contains(x, y) {\n        const modifier = this._modifier;\n        const s = modifier.getAnchorSize() * 2;\n        const t = s * 0.5;\n        const w = modifier.width;\n        const h = modifier.height;\n        const p = w * 0.5;\n        const q = h * 0.5;\n        const d = modifier.getAnchorRotationDistance();\n        const r = modifier.getAnchorRotationSize() * 2;\n        // Top left\n        if (0 - t <= x && 0 - t <= y && x <= 0 - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_LEFT);\n            return true;\n        }\n        // Top right\n        if (w - t <= x && 0 - t <= y && x <= w - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_RIGHT);\n            return true;\n        }\n        // Bottom left\n        if (0 - t <= x && h - t <= y && x <= 0 - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_LEFT);\n            return true;\n        }\n        // Bottom right\n        if (w - t <= x && h - t <= y && x <= w - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_RIGHT);\n            return true;\n        }\n        // Top Center\n        if (p - t <= x && 0 - t <= y && x <= p - t + s && y <= 0 - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.TOP_CENTER);\n            return true;\n        }\n        // Middle Right\n        if (w - t <= x && q - t <= y && x <= w - t + s && y <= q - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.MIDDLE_RIGHT);\n            return true;\n        }\n        // Bottom Center\n        if (p - t <= x && h - t <= y && x <= p - t + s && y <= h - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.BOTTOM_CENTER);\n            return true;\n        }\n        // Middle Left\n        if (0 - t <= x && q - t <= y && x <= 0 - t + s && y <= q - t + s) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.MIDDLE_LEFT);\n            return true;\n        }\n        // Rotate\n        if (p - r <= x && d - r <= y && x <= p + r && y <= d + r) {\n            modifier.setLastHitAnchor(ESnapperModifierAnchor.ROTATION);\n            return true;\n        }\n        return false;\n    }\n}\n//# sourceMappingURL=e-tool-select-modifier-hit-area.js.map","import { EShapeCircle, EShapeContainer, EShapeLockPart, EShapeRectangle, ESnapperModifierAnchor } from \"@wcardinal/wcardinal-ui\";\nimport { EToolSelectModifierHitArea } from \"./e-tool-select-modifier-hit-area\";\nexport class EToolSelectModifier extends EShapeContainer {\n    constructor(options) {\n        super();\n        this.selected = false;\n        this.index = 0;\n        this._width = 0;\n        this._height = 0;\n        this._scaleBound = 1;\n        this._scaleBoundInverse = 1;\n        this._isAllowed = true;\n        this._lastHitAnchor = ESnapperModifierAnchor.NONE;\n        if (options == null || options.editable !== false) {\n            this.cursor = \"grab\";\n            this.interactive = true;\n            this.hitArea = new EToolSelectModifierHitArea(this);\n        }\n        else {\n            this.interactive = false;\n        }\n        this.group = false;\n        this._anchorBase = new EShapeRectangle().attach(this);\n        this._anchorsScale = [\n            new EShapeRectangle().attach(this),\n            new EShapeRectangle().attach(this),\n            new EShapeRectangle().attach(this),\n            new EShapeRectangle().attach(this),\n            new EShapeRectangle().attach(this),\n            new EShapeRectangle().attach(this),\n            new EShapeRectangle().attach(this),\n            new EShapeRectangle().attach(this)\n        ];\n        this._anchorRotate = new EShapeCircle().attach(this);\n    }\n    onPrerender() {\n        const scale0 = this.getParentScale();\n        const scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            this.update();\n        }\n    }\n    render(renderer) {\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n            return;\n        }\n        this.onPrerender();\n        super.render(renderer);\n    }\n    getParentScale() {\n        const parent = this.parent;\n        if (parent != null) {\n            const parentParent = parent.parent;\n            if (parentParent != null) {\n                return parentParent.scale.y;\n            }\n        }\n        return 1;\n    }\n    get factor() {\n        return this._scaleBoundInverse;\n    }\n    get width() {\n        return this._width;\n    }\n    set width(width) {\n        this._width = width;\n    }\n    get height() {\n        return this._height;\n    }\n    set height(height) {\n        this._height = height;\n    }\n    getLastHitAnchor() {\n        return this._lastHitAnchor;\n    }\n    setLastHitAnchor(anchor) {\n        const result = this._lastHitAnchor;\n        this._lastHitAnchor = anchor;\n        return result;\n    }\n    getAnchorSize() {\n        return 7 * this._scaleBoundInverse;\n    }\n    getAnchorRotationDistance() {\n        return (0 <= this._height ? -18 : +18) * this._scaleBoundInverse;\n    }\n    getAnchorRotationSize() {\n        return 5 * this._scaleBoundInverse;\n    }\n    update() {\n        const color = this.group ? 0x1ef087 : 0x1e87f0;\n        const width = this._width;\n        const height = this._height;\n        const scaleInverse = this._scaleBoundInverse;\n        const s = this.getAnchorSize();\n        const w = width;\n        const h = height;\n        const p = w * 0.5;\n        const q = h * 0.5;\n        const d = this.getAnchorRotationDistance();\n        const r = 2 * this.getAnchorRotationSize();\n        const l = 2 * scaleInverse;\n        const o = 1.5 * l;\n        // Anchor base\n        const anchorBase = this._anchorBase;\n        anchorBase.lock(EShapeLockPart.UPLOADED);\n        anchorBase.fill.enable = false;\n        anchorBase.stroke.set(true, color, 0.333, l, 2);\n        anchorBase.transform.position.set(width * 0.5, height * 0.5);\n        anchorBase.size.set(width, height);\n        anchorBase.unlock(EShapeLockPart.UPLOADED, true);\n        // Anchor for rotation\n        const anchorRotate = this._anchorRotate;\n        anchorRotate.lock(EShapeLockPart.UPLOADED);\n        anchorRotate.stroke.enable = false;\n        anchorRotate.fill.set(true, color, 1.0);\n        anchorRotate.size.set(r, r);\n        anchorRotate.transform.position.set(p, d);\n        anchorRotate.unlock(EShapeLockPart.UPLOADED, true);\n        // Anchor for scaling\n        const anchorsScale = this._anchorsScale;\n        for (let i = 0, imax = anchorsScale.length; i < imax; ++i) {\n            const anchorScale = anchorsScale[i];\n            anchorScale.lock(EShapeLockPart.UPLOADED);\n            anchorScale.stroke.enable = false;\n            anchorScale.fill.set(true, color, 1.0);\n            anchorScale.size.set(s, s);\n        }\n        anchorsScale[0].transform.position.set(-o, -o);\n        anchorsScale[1].transform.position.set(+o + w, -o);\n        anchorsScale[2].transform.position.set(-o, +o + h);\n        anchorsScale[3].transform.position.set(+o + w, +o + h);\n        anchorsScale[4].transform.position.set(p, -o);\n        anchorsScale[5].transform.position.set(+o + w, q);\n        anchorsScale[6].transform.position.set(p, +o + h);\n        anchorsScale[7].transform.position.set(-o, q);\n        for (let i = 0, imax = anchorsScale.length; i < imax; ++i) {\n            anchorsScale[i].unlock(EShapeLockPart.UPLOADED, true);\n        }\n    }\n    allow() {\n        this._isAllowed = true;\n    }\n    isAllowed() {\n        return this._isAllowed;\n    }\n    disallow() {\n        this._isAllowed = false;\n    }\n    destroy() {\n        const parent = this.parent;\n        if (parent) {\n            parent.removeChild(this);\n        }\n    }\n}\n//# sourceMappingURL=e-tool-select-modifier.js.map","/*\n * Copyright (C) 2019 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { EShapeEditor } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { UtilShapeTransforms } from \"./util-shape-transforms\";\nexport class UtilShapeConnectorTransformData extends EShapeEditor {\n    constructor() {\n        super();\n        this.tailVector = new Point();\n        this.headVector = new Point();\n    }\n}\nexport class UtilShapeConnectorTransforms {\n    static prepare(connector) {\n        let editor = null;\n        if (connector.editor instanceof UtilShapeConnectorTransformData) {\n            editor = connector.editor;\n        }\n        else {\n            editor = new UtilShapeConnectorTransformData();\n            connector.editor = editor;\n        }\n        // Edges\n        const tailVector = editor.tailVector;\n        const headVector = editor.headVector;\n        const edge = connector.edge;\n        edge.tail.local.copyTo(tailVector);\n        edge.head.local.copyTo(headVector);\n        const localTransform = connector.transform.localTransform;\n        localTransform.applyInverse(tailVector, tailVector);\n        localTransform.applyInverse(headVector, headVector);\n        // Other preparations\n        UtilShapeTransforms.prepare(connector);\n    }\n    static finalize(connector) {\n        UtilShapeTransforms.finalize(connector);\n    }\n    static apply(connector, transform) {\n        const editor = connector.editor;\n        if (editor instanceof UtilShapeConnectorTransformData) {\n            const localTransform = editor.localTransform;\n            editor.internalTransformParentInverse\n                .copyTo(localTransform)\n                .append(transform)\n                .append(editor.internalTransform);\n            const a = localTransform.a;\n            const b = localTransform.b;\n            const c = localTransform.c;\n            const d = localTransform.d;\n            const tx = localTransform.tx;\n            const ty = localTransform.ty;\n            const edge = connector.edge;\n            const tail = edge.tail;\n            const head = edge.head;\n            const editorTailVector = editor.tailVector;\n            const editorTailVectorX = editorTailVector.x;\n            const editorTailVectorY = editorTailVector.y;\n            const newTailLocalX = a * editorTailVectorX + c * editorTailVectorY + tx;\n            const newTailLocalY = b * editorTailVectorX + d * editorTailVectorY + ty;\n            const editorHeadVector = editor.headVector;\n            const editorHeadVectorX = editorHeadVector.x;\n            const editorHeadVectorY = editorHeadVector.y;\n            const newHeadLocalX = a * editorHeadVectorX + c * editorHeadVectorY + tx;\n            const newHeadLocalY = b * editorHeadVectorX + d * editorHeadVectorY + ty;\n            edge.lock();\n            tail.local.set(newTailLocalX, newTailLocalY);\n            head.local.set(newHeadLocalX, newHeadLocalY);\n            edge.unlock();\n        }\n    }\n}\n//# sourceMappingURL=util-shape-connector-transforms.js.map","import { EShapeCapabilities, EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandShapePropertyStrokeStyle } from \"./e-command-shape-property-stroke-style\";\nexport class ECommandShapePropertyLineStyle extends ECommandShapePropertyStrokeStyle {\n    toCapability(shape) {\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE)) {\n            return EShapeCapability.LINE;\n        }\n        return EShapeCapability.NONE;\n    }\n}\n//# sourceMappingURL=e-command-shape-property-line-style.js.map","import { DApplications, DControllers, DDiagramEditor, DDiagramLayer, DDiagrams, DDiagramSerializedVersion, EShapeBase, EShapeCapabilities, EShapeCapability, EShapeConnectorLine, EShapeGroup, EShapeResourceManagerDeserialization, EShapeResourceManagerSerialization, ESnapperModifierAnchor, isNumber, deserializeAll, EShapeResourceManagerDeserializationMode, DBase } from \"@wcardinal/wcardinal-ui\";\nimport { Matrix, Point, Rectangle, utils } from \"pixi.js\";\nimport { ECommandComposition } from \"../command/e-command-composition\";\nimport { ECommandShapeActionValueAdd } from \"../command/e-command-shape-action-value-add\";\nimport { ECommandShapeActionValueBringForward } from \"../command/e-command-shape-action-value-bring-forward\";\nimport { ECommandShapeActionValueRemove } from \"../command/e-command-shape-action-value-remove\";\nimport { ECommandShapeActionValueReplace } from \"../command/e-command-shape-action-value-replace\";\nimport { ECommandShapeActionValueSendBackward } from \"../command/e-command-shape-action-value-send-backward\";\nimport { ECommandShapeTreeBringForward } from \"../command/e-command-shape-tree-bring-forward\";\nimport { ECommandShapeTreeBringToFront } from \"../command/e-command-shape-tree-bring-to-front\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { ECommandShapeDelete } from \"../command/e-command-shape-delete\";\nimport { ECommandShapePropertyAll } from \"../command/e-command-shape-property-all\";\nimport { ECommandShapePropertyCornerOff } from \"../command/e-command-shape-property-corner-off\";\nimport { ECommandShapePropertyCursor } from \"../command/e-command-shape-property-cursor\";\nimport { ECommandShapePropertyLineHeadMargin } from \"../command/e-command-shape-property-line-head-margin\";\nimport { ECommandShapePropertyLineTailMargin } from \"../command/e-command-shape-property-line-tail-margin\";\nimport { ECommandShapePropertyFillColor } from \"../command/e-command-shape-property-fill-color\";\nimport { ECommandShapePropertyFillEnable } from \"../command/e-command-shape-property-fill-enable\";\nimport { ECommandShapePropertyFocusable } from \"../command/e-command-shape-property-focusable\";\nimport { ECommandShapePropertyId } from \"../command/e-command-shape-property-id\";\nimport { ECommandShapePropertyImage } from \"../command/e-command-shape-property-image\";\nimport { ECommandShapePropertyImageFitTo } from \"../command/e-command-shape-property-image-fit-to\";\nimport { ECommandShapePropertyInteractive } from \"../command/e-command-shape-property-interactive\";\nimport { ECommandShapePropertyLineHeadColor } from \"../command/e-command-shape-property-line-head-color\";\nimport { ECommandShapePropertyLineHeadSizeX } from \"../command/e-command-shape-property-line-head-size-x\";\nimport { ECommandShapePropertyLineHeadSizeY } from \"../command/e-command-shape-property-line-head-size-y\";\nimport { ECommandShapePropertyLineHeadType } from \"../command/e-command-shape-property-line-head-type\";\nimport { ECommandShapePropertyLineTailColor } from \"../command/e-command-shape-property-line-tail-color\";\nimport { ECommandShapePropertyLineTailSizeX } from \"../command/e-command-shape-property-line-tail-size-x\";\nimport { ECommandShapePropertyLineTailSizeY } from \"../command/e-command-shape-property-line-tail-size-y\";\nimport { ECommandShapePropertyLineTailType } from \"../command/e-command-shape-property-line-tail-type\";\nimport { ECommandShapePropertyPointsStyle } from \"../command/e-command-shape-property-points-style\";\nimport { ECommandShapePropertyPosition } from \"../command/e-command-shape-property-position\";\nimport { ECommandShapePropertyPositionAndRotate } from \"../command/e-command-shape-property-position-and-rotation\";\nimport { ECommandShapePropertyPositionX } from \"../command/e-command-shape-property-position-x\";\nimport { ECommandShapePropertyPositionY } from \"../command/e-command-shape-property-position-y\";\nimport { ECommandShapePropertyRadius } from \"../command/e-command-shape-property-radius\";\nimport { ECommandShapePropertyRotation } from \"../command/e-command-shape-property-rotation\";\nimport { ECommandShapePropertyShortcut } from \"../command/e-command-shape-property-shortcut\";\nimport { ECommandShapePropertySizeX } from \"../command/e-command-shape-property-size-x\";\nimport { ECommandShapePropertySizeY } from \"../command/e-command-shape-property-size-y\";\nimport { ECommandShapePropertySkew } from \"../command/e-command-shape-property-skew\";\nimport { ECommandShapePropertyStrokeAlign } from \"../command/e-command-shape-property-stroke-align\";\nimport { ECommandShapePropertyStrokeColor } from \"../command/e-command-shape-property-stroke-color\";\nimport { ECommandShapePropertyStrokeEnable } from \"../command/e-command-shape-property-stroke-enable\";\nimport { ECommandShapePropertyStrokeSideOff } from \"../command/e-command-shape-property-stroke-side-off\";\nimport { ECommandShapePropertyStrokeStyle } from \"../command/e-command-shape-property-stroke-style\";\nimport { ECommandShapePropertyStrokeWidth } from \"../command/e-command-shape-property-stroke-width\";\nimport { ECommandShapePropertyTextAlignHorizontal } from \"../command/e-command-shape-property-text-align-horizontal\";\nimport { ECommandShapePropertyTextAlignVertical } from \"../command/e-command-shape-property-text-align-vertical\";\nimport { ECommandShapePropertyTextClipping } from \"../command/e-command-shape-property-text-clipping\";\nimport { ECommandShapePropertyTextColor } from \"../command/e-command-shape-property-text-color\";\nimport { ECommandShapePropertyTextDirection } from \"../command/e-command-shape-property-text-direction\";\nimport { ECommandShapePropertyTextFamily } from \"../command/e-command-shape-property-text-family\";\nimport { ECommandShapePropertyTextOffsetHorizontal } from \"../command/e-command-shape-property-text-offset-horizontal\";\nimport { ECommandShapePropertyTextOffsetVertical } from \"../command/e-command-shape-property-text-offset-vertical\";\nimport { ECommandShapePropertyTextOutlineColor } from \"../command/e-command-shape-property-text-outline-color\";\nimport { ECommandShapePropertyTextOutlineEnable } from \"../command/e-command-shape-property-text-outline-enable\";\nimport { ECommandShapePropertyTextOutlineWidth } from \"../command/e-command-shape-property-text-outline-width\";\nimport { ECommandShapePropertyTextPaddingHorizontal } from \"../command/e-command-shape-property-text-padding-horizontal\";\nimport { ECommandShapePropertyTextPaddingVertical } from \"../command/e-command-shape-property-text-padding-vertical\";\nimport { ECommandShapePropertyTextSize } from \"../command/e-command-shape-property-text-size\";\nimport { ECommandShapePropertyTextSpacingHorizontal } from \"../command/e-command-shape-property-text-spacing-horizontal\";\nimport { ECommandShapePropertyTextSpacingVertical } from \"../command/e-command-shape-property-text-spacing-vertical\";\nimport { ECommandShapePropertyTextStyle } from \"../command/e-command-shape-property-text-style\";\nimport { ECommandShapePropertyTextValue } from \"../command/e-command-shape-property-text-value\";\nimport { ECommandShapePropertyTextWeight } from \"../command/e-command-shape-property-text-weight\";\nimport { ECommandShapePropertyTitle } from \"../command/e-command-shape-property-title\";\nimport { ECommandShapeReplace } from \"../command/e-command-shape-replace\";\nimport { ECommandShapeTreeSendBackward } from \"../command/e-command-shape-tree-send-backward\";\nimport { ECommandShapeTreeSendToBack } from \"../command/e-command-shape-tree-send-to-back\";\nimport { ECommandShapeDataValueAdd } from \"../command/e-command-shape-data-value-add\";\nimport { ECommandShapeDataValueBringForward } from \"../command/e-command-shape-data-value-bring-forward\";\nimport { ECommandShapeDataValueRemove } from \"../command/e-command-shape-data-value-remove\";\nimport { ECommandShapeDataValueReplace } from \"../command/e-command-shape-data-value-replace\";\nimport { ECommandShapeDataValueSendBackward } from \"../command/e-command-shape-data-value-send-backward\";\nimport { EToolSelectModifier } from \"./e-tool-select-modifier\";\nimport { EToolSelectModifierContainer } from \"./e-tool-select-modifier-container\";\nimport { EToolSelectSelectionUpdatedPart } from \"./e-tool-select-selection-updated-part\";\nimport { ECommandShapeDataMappingValueAdd } from \"../command/e-command-shape-data-mapping-value-add\";\nimport { ECommandShapeDataMappingValueReplace } from \"../command/e-command-shape-data-mapping-value-replace\";\nimport { ECommandShapeDataMappingValueRemove } from \"../command/e-command-shape-data-mapping-value-remove\";\nimport { ECommandShapeDataMappingValueBringForward } from \"../command/e-command-shape-data-mapping-value-bring-forward\";\nimport { ECommandShapeDataMappingValueSendBackward } from \"../command/e-command-shape-data-mapping-value-send-backward\";\nimport { ECommandShapePropertyCapabilityLock } from \"../command/e-command-shape-property-capability-lock\";\nimport { ECommandShapePropertyCapabilityUnlock } from \"../command/e-command-shape-property-capability-unlock\";\nimport { ECommandShapePropertyPositionTop } from \"../command/e-command-shape-property-position-top\";\nimport { ECommandShapePropertyPositionLeft } from \"../command/e-command-shape-property-position-left\";\nimport { ECommandShapePropertyImageClear } from \"../command/e-command-shape-property-image-clear\";\nimport { ECommandShapePropertyCornerOn } from \"../command/e-command-shape-property-corner-on\";\nimport { ECommandShapePropertyStrokeSideOn } from \"../command/e-command-shape-property-stroke-side-on\";\nimport { ECommandShapeGroup } from \"../command/e-command-shape-group\";\nimport { ECommandShapeUngroup } from \"../command/e-command-shape-ungroup\";\nimport { ECommandShapePropertyTextSizeDelta } from \"../command/e-command-shape-property-text-size-delta\";\nimport { ECommandShapePropertyTextFitting } from \"../command/e-command-shape-property-text-fitting\";\nimport { UtilShapeTransforms } from \"../util/util-shape-transforms\";\nimport { UtilShapeConnectorTransforms } from \"../util/util-shape-connector-transforms\";\nimport { ECommandShapePropertyLineStyle } from \"../command/e-command-shape-property-line-style\";\nimport { UtilShapeDeleter } from \"../util/util-shape-deleter\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nconst initLeft = (rect) => {\n    return rect.x;\n};\nconst initCenter = (rect) => {\n    return rect.x + rect.width * 0.5;\n};\nconst initRight = (rect) => {\n    return rect.x + rect.width;\n};\nconst initTop = (rect) => {\n    return rect.y;\n};\nconst initMiddle = (rect) => {\n    return rect.y + rect.height * 0.5;\n};\nconst initBottom = (rect) => {\n    return rect.y + rect.height;\n};\nconst initWidth = (rect) => {\n    return rect.width;\n};\nconst initHeight = (rect) => {\n    return rect.height;\n};\nconst initZero = (rect) => {\n    return 0;\n};\nconst updateMin = (valueA, valueB) => {\n    return Math.min(valueA, valueB);\n};\nconst updateMax = (valueA, valueB) => {\n    return Math.max(valueA, valueB);\n};\nconst updateSum = (valueA, valueB) => {\n    return valueA + valueB;\n};\nconst finishupIdentity = (value, size) => {\n    return value;\n};\nconst finishupAverage = (value, size) => {\n    return value / size;\n};\nconst assingX = (value, point) => {\n    point.x = value;\n};\nconst assingY = (value, point) => {\n    point.y = value;\n};\nconst applyLeft = (point, diff, scale, shape) => {\n    shape.transform.position.x = point.x + diff / scale.x;\n};\nconst applyCenter = (point, diff, scale, shape) => {\n    shape.transform.position.x = point.x;\n};\nconst applyRight = (point, diff, scale, shape) => {\n    shape.transform.position.x = point.x - diff / scale.x;\n};\nconst applyTop = (point, diff, scale, shape) => {\n    shape.transform.position.y = point.y + diff / scale.y;\n};\nconst applyMiddle = (point, diff, scale, shape) => {\n    shape.transform.position.y = point.y;\n};\nconst applyBottom = (point, diff, scale, shape) => {\n    shape.transform.position.y = point.y - diff / scale.y;\n};\nexport class EToolSelectSelection extends utils.EventEmitter {\n    constructor(options) {\n        super();\n        const diagram = options.diagram;\n        this._diagram = diagram;\n        const modifier = new EToolSelectModifier(options.modifier);\n        this._modifier = modifier;\n        const modifierContainer = new EToolSelectModifierContainer();\n        modifierContainer.addChild(modifier);\n        diagram.on(\"unset\", (canvas) => {\n            if (modifierContainer.parent === canvas) {\n                // Because after this event, a canvas is destroyed.\n                // At that time, all its children also be destroyed.\n                // The modifier container therefore should be removed.\n                canvas.removeChild(modifierContainer);\n            }\n        });\n        this._modifierContainer = modifierContainer;\n        this._originGlobal = new Point();\n        this._originLocal = new Point();\n        this._rotationAxisGlobal = new Point();\n        this._scale = new Point();\n        this._scaleAxis0 = new Point();\n        this._scaleAxis1 = new Point();\n        this._scaleDet = 1;\n        this._scaleDetInverse = 1;\n        this._scaleTransform = new Matrix();\n        this._scaleTransformInverse = new Matrix();\n        this._scaleAnchor = ESnapperModifierAnchor.NONE;\n        this._shapes = [];\n        this._shapeBound = new Rectangle();\n        this._shapeBoundRect = new Rectangle();\n        this._alignPoint = new Point();\n        this._alignRectangle = new Rectangle();\n        this._shiftPoint1 = new Point();\n        this._shiftPoint2 = new Point();\n        this._transform = new Matrix();\n        this._translateDelta = new Point();\n        this._isUpdated = false;\n        this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        this._lockCount = 0;\n    }\n    lock() {\n        this._lockCount += 1;\n        if (this._lockCount === 1) {\n            this._isUpdated = false;\n            this._updatedParts = EToolSelectSelectionUpdatedPart.NONE;\n        }\n    }\n    unlock() {\n        this._lockCount -= 1;\n        if (this._lockCount === 0) {\n            if (this._isUpdated) {\n                this.update(this._updatedParts);\n            }\n        }\n    }\n    update(parts) {\n        let parsed = EToolSelectSelectionUpdatedPart.ALL;\n        if (parts != null) {\n            if (isNumber(parts)) {\n                parsed = parts;\n            }\n            else {\n                // eslint-disable-next-line prefer-rest-params\n                parsed = this.toParts(arguments);\n            }\n        }\n        if (this._lockCount <= 0) {\n            this.updateModifier();\n            this.emit(\"change\", parsed, this);\n        }\n        else {\n            this._isUpdated = true;\n            this._updatedParts |= parsed;\n        }\n    }\n    toParts(parts) {\n        if (isNumber(parts)) {\n            return parts;\n        }\n        let result = EToolSelectSelectionUpdatedPart.NONE;\n        for (let i = 0, imax = parts.length; i < imax; ++i) {\n            result |= EToolSelectSelectionUpdatedPart[parts[i]];\n        }\n        return result;\n    }\n    updateModifier() {\n        const diagram = this._diagram;\n        const modifier = this._modifier;\n        if (modifier.isAllowed()) {\n            const shapes = this._shapes;\n            const canvas = diagram.canvas;\n            const modifierContainer = this._modifierContainer;\n            if (canvas == null || shapes.length <= 0) {\n                modifier.visible = false;\n                DApplications.update(diagram);\n            }\n            else if (shapes.length <= 1) {\n                const shape = shapes[0];\n                if (shape.parent instanceof EShapeBase) {\n                    shape.updateTransform();\n                    const internalTransform = shape.transform.internalTransform;\n                    const a = internalTransform.a;\n                    const b = internalTransform.b;\n                    const c = internalTransform.c;\n                    const d = internalTransform.d;\n                    const pivot = shape.transform.pivot;\n                    const modifierPosition = modifier.position;\n                    modifierPosition.set(a * pivot.x + c * pivot.y + internalTransform.tx, b * pivot.x + d * pivot.y + internalTransform.ty);\n                    const layer = shape.root.parent;\n                    if (layer) {\n                        modifierContainer.transform.position.copyFrom(layer.transform.position);\n                    }\n                    else {\n                        modifierContainer.transform.position.set(0, 0);\n                    }\n                    const width = shape.size.x * Math.sqrt(a * a + b * b);\n                    const height = shape.size.y * Math.sqrt(c * c + d * d);\n                    modifier.width = width;\n                    modifier.height = height;\n                    modifier.pivot.set(width * 0.5, height * 0.5);\n                    const rx = Math.atan2(-c, d);\n                    const ry = Math.atan2(+b, a);\n                    const skew = (ry - rx) * 0.5;\n                    const rotation = (rx + ry) * 0.5;\n                    modifier.rotation = rotation;\n                    modifier.skew.set(skew, skew);\n                }\n                else {\n                    shape.updateTransform();\n                    const internalTransform = shape.transform.internalTransform;\n                    const a = internalTransform.a;\n                    const b = internalTransform.b;\n                    const c = internalTransform.c;\n                    const d = internalTransform.d;\n                    const pivot = shape.transform.pivot;\n                    const modifierPosition = modifier.position;\n                    modifierPosition.set(a * pivot.x + c * pivot.y + internalTransform.tx, b * pivot.x + d * pivot.y + internalTransform.ty);\n                    const layer = shape.root.parent;\n                    if (layer) {\n                        modifierContainer.transform.position.copyFrom(layer.transform.position);\n                    }\n                    else {\n                        modifierContainer.transform.position.set(0, 0);\n                    }\n                    modifier.width = shape.size.x;\n                    modifier.height = shape.size.y;\n                    modifier.pivot.set(shape.size.x * 0.5, shape.size.y * 0.5);\n                    modifier.rotation = shape.transform.rotation;\n                    modifier.skew.copyFrom(shape.transform.skew);\n                }\n                modifier.visible = true;\n                modifier.group =\n                    EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n                        0 < shape.children.length;\n                if (modifierContainer.parent !== canvas) {\n                    canvas.addChild(modifierContainer);\n                }\n                modifier.update();\n                DApplications.update(diagram);\n            }\n            else {\n                const bound = this._shapeBound;\n                const tempRect = this._shapeBoundRect;\n                shapes[0].getBoundsInternal(false, bound);\n                for (let i = 1, imax = shapes.length; i < imax; ++i) {\n                    const shape = shapes[i];\n                    shape.getBoundsInternal(false, tempRect);\n                    bound.enlarge(tempRect);\n                }\n                const layer = shapes[0].root.parent;\n                if (layer) {\n                    modifierContainer.transform.position.copyFrom(layer.transform.position);\n                }\n                else {\n                    modifierContainer.transform.position.set(0, 0);\n                }\n                modifier.position.set(bound.x, bound.y);\n                modifier.width = bound.width;\n                modifier.height = bound.height;\n                modifier.rotation = 0;\n                modifier.pivot.set(0, 0);\n                modifier.skew.set(0, 0);\n                modifier.visible = true;\n                modifier.group = false;\n                if (modifierContainer.parent !== canvas) {\n                    canvas.addChild(modifierContainer);\n                }\n                modifier.update();\n                DApplications.update(diagram);\n            }\n        }\n        else {\n            modifier.visible = false;\n            DApplications.update(diagram);\n        }\n    }\n    toggle(shape) {\n        const shapes = this._shapes;\n        if (shapes.length <= 0) {\n            const root = shape.root;\n            root.selected = true;\n            shapes.push(root);\n        }\n        else {\n            const first = shapes[0];\n            if (UtilShapeSearch.isParent(shape, first)) {\n                first.selected = false;\n                if (EShapeCapabilities.contains(first, EShapeCapability.CHILDREN)) {\n                    const shapeOfParent = UtilShapeSearch.toOfParent(shape, first);\n                    shapeOfParent.selected = true;\n                    shapes[0] = shapeOfParent;\n                }\n                else {\n                    shapes.splice(0, 1);\n                }\n            }\n            else if (first.parent === shape.parent) {\n                if (!shape.selected) {\n                    shape.selected = true;\n                    shapes.push(shape);\n                }\n                else {\n                    shape.selected = false;\n                    shapes.splice(shapes.indexOf(shape), 1);\n                }\n            }\n            else {\n                const sharedParent = UtilShapeSearch.toSharedParent(first, shape);\n                if (first.parent === sharedParent) {\n                    const shapeOfParent = UtilShapeSearch.toOfParent(shape, sharedParent);\n                    if (shapeOfParent.selected) {\n                        shapeOfParent.selected = false;\n                        shapes.splice(shapes.indexOf(shapeOfParent), 1);\n                    }\n                    else {\n                        shapeOfParent.selected = true;\n                        shapes.push(shapeOfParent);\n                    }\n                }\n                else {\n                    let newLength = 0;\n                    for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                        const oldShape = shapes[i];\n                        oldShape.selected = false;\n                        const newShape = UtilShapeSearch.toOfParent(oldShape, sharedParent);\n                        if (!newShape.selected) {\n                            newShape.selected = true;\n                            shapes[newLength] = newShape;\n                            newLength += 1;\n                        }\n                    }\n                    shapes.length = newLength;\n                    const shapeOfParent = UtilShapeSearch.toOfParent(shape, sharedParent);\n                    if (!shapeOfParent.selected) {\n                        shapeOfParent.selected = true;\n                        shapes.push(shapeOfParent);\n                    }\n                }\n            }\n        }\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n    }\n    /**\n     * Please note that the specified targets must be root shapes.\n     *\n     * @param targets root shapes to be added\n     */\n    addAll(targets) {\n        const shapes = this._shapes;\n        let isChanged = false;\n        // Convert to root shapes\n        if (0 < shapes.length) {\n            const first = shapes[0];\n            if (first.root !== first) {\n                const oldShapes = shapes.slice(0);\n                shapes.length = 0;\n                for (let i = 0, imax = oldShapes.length; i < imax; ++i) {\n                    const oldShape = oldShapes[i];\n                    oldShape.selected = false;\n                    const oldShapeRoot = oldShape.root;\n                    if (!oldShapeRoot.selected) {\n                        oldShapeRoot.selected = true;\n                        shapes.push(oldShapeRoot);\n                    }\n                }\n                isChanged = true;\n            }\n        }\n        // Add targets\n        for (let i = 0, imax = targets.length; i < imax; ++i) {\n            const target = targets[i];\n            if (!target.selected) {\n                target.selected = true;\n                shapes.push(target);\n                isChanged = true;\n            }\n        }\n        if (isChanged) {\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n        }\n        return isChanged;\n    }\n    clearAndAddAll(targets) {\n        const shapes = this._shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].selected = false;\n        }\n        shapes.length = 0;\n        for (let i = 0, imax = targets.length; i < imax; ++i) {\n            const target = targets[i];\n            target.selected = true;\n            shapes.push(target);\n        }\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n        return true;\n    }\n    set(target) {\n        const shapes = this._shapes;\n        if (1 < shapes.length) {\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = false;\n            }\n            shapes.length = 0;\n            target.selected = true;\n            shapes.push(target);\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n        else if (shapes.length === 1) {\n            if (shapes[0] === target) {\n                return false;\n            }\n            else {\n                shapes[0].selected = false;\n                target.selected = true;\n                shapes[0] = target;\n                this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n                return true;\n            }\n        }\n        else {\n            target.selected = true;\n            shapes.push(target);\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n    }\n    get() {\n        return this._shapes;\n    }\n    first() {\n        const shapes = this._shapes;\n        return 0 < shapes.length ? shapes[0] : null;\n    }\n    last() {\n        const shapes = this._shapes;\n        return 0 < shapes.length ? shapes[shapes.length - 1] : null;\n    }\n    swapLast(expectedLast, newLast) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const last = shapes[shapes.length - 1];\n            if (last === expectedLast) {\n                last.selected = false;\n                shapes[shapes.length - 1] = newLast;\n                newLast.selected = true;\n                this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n            }\n        }\n    }\n    remove(target) {\n        const shapes = this._shapes;\n        const index = shapes.indexOf(target);\n        if (0 <= index) {\n            target.selected = false;\n            shapes.splice(index, 1);\n            this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n        }\n    }\n    contains(shape) {\n        return shape.selected;\n    }\n    size() {\n        return this._shapes.length;\n    }\n    isEmpty() {\n        return this._shapes.length <= 0;\n    }\n    clear() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                shapes[i].selected = false;\n            }\n            this._shapes.length = 0;\n            this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n            return true;\n        }\n        return false;\n    }\n    focus() {\n        if (this.isEmpty()) {\n            return false;\n        }\n        // Canvas\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        if (canvas == null) {\n            return false;\n        }\n        // Canvas parent\n        const cparent = canvas.parent;\n        if (!(cparent instanceof DBase)) {\n            return false;\n        }\n        // Center\n        const cw = canvas.width;\n        const ch = canvas.height;\n        const p = cparent.padding;\n        const pl = p.getLeft();\n        const pt = p.getTop();\n        const pr = p.getRight();\n        const pb = p.getBottom();\n        const sw = Math.max(0, cparent.width - pl - pr);\n        const sh = Math.max(0, cparent.height - pt - pb);\n        const cx = pl + (sw - cw) * 0.5;\n        const cy = pt + (sh - ch) * 0.5;\n        // Offset\n        const modifier = this._modifier;\n        const point = this._alignPoint;\n        point.set(modifier.width * 0.5, modifier.height * 0.5);\n        modifier.toGlobal(point, point, false);\n        cparent.toLocal(point, undefined, point, false);\n        const cposition = canvas.position;\n        const ox = cw * 0.5 - (point.x - cposition.x);\n        const oy = ch * 0.5 - (point.y - cposition.y);\n        // Move\n        diagram.view.moveTo(cx + ox, cy + oy);\n        return true;\n    }\n    prepare() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                const shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    UtilShapeConnectorTransforms.prepare(shape);\n                }\n                else {\n                    UtilShapeTransforms.prepare(shape);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    prepareTranslateSnap() {\n        const diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForTranslate(this._modifier);\n        }\n    }\n    prepareRotateSnap() {\n        const diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForRotate(this._modifier);\n        }\n    }\n    prepareScaleSnap() {\n        const diagram = this._diagram;\n        if (diagram instanceof DDiagramEditor) {\n            diagram.snapper.prepareForScale(this._modifier, this._scaleAnchor);\n        }\n    }\n    prepareTranslate() {\n        return this.prepare();\n    }\n    prepareRotate(global) {\n        if (this.prepare()) {\n            // Origin\n            const originGlobal = this._originGlobal;\n            const originLocal = this._originLocal;\n            const modifier = this._modifier;\n            originLocal.set(modifier.width * 0.5, modifier.height * 0.5);\n            originGlobal.copyFrom(originLocal);\n            modifier.updateTransform();\n            modifier.transform.localTransform.apply(originLocal, originLocal);\n            modifier.transform.worldTransform.apply(originGlobal, originGlobal);\n            // Axis\n            if (global == null) {\n                return true;\n            }\n            else {\n                const rotationAxisGlobal = this._rotationAxisGlobal;\n                const vx = global.x - originGlobal.x;\n                const vy = global.y - originGlobal.y;\n                const v = Math.sqrt(vx * vx + vy * vy);\n                if (0.001 < v) {\n                    const vi = 1 / v;\n                    rotationAxisGlobal.set(vx * vi, vy * vi);\n                    return true;\n                }\n                else {\n                    this.finalize();\n                    return false;\n                }\n            }\n        }\n        return false;\n    }\n    prepareScale(anchor) {\n        if (this.prepare()) {\n            if (this.prepareScaleOriginAndAxes(anchor)) {\n                const modifier = this._modifier;\n                const rotation = modifier.rotation;\n                const skew = modifier.skew;\n                const originLocal = this._originLocal;\n                const scaleTransform = this._scaleTransform;\n                scaleTransform.setTransform(0, 0, 0, 0, 1, 1, rotation, skew.x, skew.y).invert();\n                scaleTransform.apply(originLocal, originLocal);\n                scaleTransform.translate(-originLocal.x, -originLocal.y);\n                scaleTransform.copyTo(this._scaleTransformInverse).invert();\n                return true;\n            }\n            else {\n                this.finalize();\n                return false;\n            }\n        }\n        return false;\n    }\n    prepareScaleOriginAndAxes(anchor) {\n        const modifier = this._modifier;\n        modifier.updateTransform();\n        const localTransform = modifier.transform.localTransform;\n        const worldTransform = modifier.transform.worldTransform;\n        const width = modifier.width;\n        const height = modifier.height;\n        const originGlobal = this._originGlobal;\n        const originLocal = this._originLocal;\n        this._scaleAnchor = anchor;\n        switch (anchor) {\n            case ESnapperModifierAnchor.TOP_LEFT:\n                originLocal.set(width, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(0, height, width, 0, originGlobal);\n            case ESnapperModifierAnchor.TOP_CENTER:\n                originLocal.set(width * 0.5, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width * 0.5, 0, originGlobal);\n            case ESnapperModifierAnchor.TOP_RIGHT:\n                originLocal.set(0, height);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(width, height, 0, 0, originGlobal);\n            case ESnapperModifierAnchor.MIDDLE_LEFT:\n                originLocal.set(width, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(0, height * 0.5, originGlobal);\n            case ESnapperModifierAnchor.NONE:\n                originLocal.set(width * 0.5, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                if (0.001 < Math.abs(width)) {\n                    this._scaleAxis0.x = width;\n                }\n                else {\n                    return false;\n                }\n                if (0.001 < Math.abs(height)) {\n                    this._scaleAxis0.y = height;\n                }\n                else {\n                    return false;\n                }\n                return true;\n            case ESnapperModifierAnchor.MIDDLE_RIGHT:\n                originLocal.set(0, height * 0.5);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width, height * 0.5, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_LEFT:\n                originLocal.set(width, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(0, 0, width, height, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_CENTER:\n                originLocal.set(width * 0.5, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxis(width * 0.5, height, originGlobal);\n            case ESnapperModifierAnchor.BOTTOM_RIGHT:\n                originLocal.set(0, 0);\n                originGlobal.copyFrom(originLocal);\n                localTransform.apply(originLocal, originLocal);\n                worldTransform.apply(originGlobal, originGlobal);\n                return this.prepareScaleAxes(width, 0, 0, height, originGlobal);\n        }\n        return false;\n    }\n    prepareScaleAxis(x, y, origin) {\n        const axis = this._scaleAxis0;\n        axis.set(x, y);\n        this._modifier.toGlobal(axis, axis, true);\n        axis.x -= origin.x;\n        axis.y -= origin.y;\n        const v = Math.sqrt(axis.x * axis.x + axis.y * axis.y);\n        if (0.001 < v) {\n            const vi = 1 / v;\n            axis.x *= vi;\n            axis.y *= vi;\n            this._scaleDet = v;\n            this._scaleDetInverse = vi;\n            return true;\n        }\n        return false;\n    }\n    prepareScaleAxes(x0, y0, x1, y1, originGlobal) {\n        const modifier = this._modifier;\n        const worldTransform = modifier.transform.worldTransform;\n        // v0\n        const axis0 = this._scaleAxis0;\n        axis0.set(x0, y0);\n        worldTransform.apply(axis0, axis0);\n        axis0.x -= originGlobal.x;\n        axis0.y -= originGlobal.y;\n        // v1\n        const axis1 = this._scaleAxis1;\n        axis1.set(x1, y1);\n        worldTransform.apply(axis1, axis1);\n        axis1.x -= originGlobal.x;\n        axis1.y -= originGlobal.y;\n        const det = axis0.x * axis1.y - axis0.y * axis1.x;\n        if (0.001 < Math.abs(det)) {\n            this._scaleDet = det;\n            this._scaleDetInverse = 1 / det;\n            return true;\n        }\n        return false;\n    }\n    finalize() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                const shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    UtilShapeConnectorTransforms.finalize(shape);\n                }\n                else {\n                    UtilShapeTransforms.finalize(shape);\n                }\n            }\n        }\n    }\n    saveForTranslate() {\n        DControllers.getCommandController().push(new ECommandShapePropertyPosition(this));\n    }\n    saveForRotate() {\n        DControllers.getCommandController().push(new ECommandShapePropertyPositionAndRotate(this));\n    }\n    saveForScale() {\n        DControllers.getCommandController().push(new ECommandShapePropertyAll(this));\n    }\n    alignLeft() {\n        this.align(initLeft, initWidth, updateMin, finishupIdentity, assingX, applyLeft);\n    }\n    alignCenter() {\n        this.align(initCenter, initZero, updateSum, finishupAverage, assingX, applyCenter);\n    }\n    alignRight() {\n        this.align(initRight, initWidth, updateMax, finishupIdentity, assingX, applyRight);\n    }\n    alignTop() {\n        this.align(initTop, initHeight, updateMin, finishupIdentity, assingY, applyTop);\n    }\n    alignMiddle() {\n        this.align(initMiddle, initZero, updateSum, finishupAverage, assingY, applyMiddle);\n    }\n    alignBottom() {\n        this.align(initBottom, initHeight, updateMax, finishupIdentity, assingY, applyBottom);\n    }\n    align(init, initSpace, update, finishup, assing, apply) {\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        const shapes = this._shapes;\n        const shapesLength = shapes.length;\n        if (canvas && 1 <= shapesLength) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                const point = this._alignPoint;\n                const rectangle = this._alignRectangle;\n                let isFirst = true;\n                let value = 0;\n                const data = [];\n                for (let i = 0; i < shapesLength; ++i) {\n                    const shape = shapes[i];\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        shape.getBounds(false, rectangle);\n                        if (isFirst) {\n                            isFirst = false;\n                            value = init(rectangle);\n                        }\n                        else {\n                            value = update(value, init(rectangle));\n                        }\n                        data.push([initSpace(rectangle), shape]);\n                    }\n                }\n                const dataLength = data.length;\n                if (1 <= dataLength) {\n                    if (dataLength <= 1) {\n                        value = init(canvas.getBounds(false, rectangle));\n                    }\n                    value = finishup(value, dataLength);\n                    point.set(0, 0);\n                    assing(value, point);\n                    parent.toLocal(point, undefined, point);\n                    const scale = canvas.scale;\n                    for (let i = 0; i < dataLength; ++i) {\n                        const datum = data[i];\n                        apply(point, datum[0] * 0.5, scale, datum[1]);\n                    }\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n            }\n        }\n    }\n    distributeHorizontally() {\n        this.distribute(initCenter, initWidth, assingX, applyLeft);\n    }\n    distributeVertically() {\n        this.distribute(initMiddle, initHeight, assingY, applyTop);\n    }\n    distribute(init, initSpace, assing, apply) {\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        const shapes = this._shapes;\n        const shapesLength = shapes.length;\n        if (canvas && 1 <= shapesLength) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                const point = this._alignPoint;\n                const rectangle = this._alignRectangle;\n                let spaceTotal = 0;\n                const data = [];\n                for (let i = 0; i < shapesLength; ++i) {\n                    const shape = shapes[i];\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        shape.getBounds(false, rectangle);\n                        const space = initSpace(rectangle);\n                        spaceTotal += space;\n                        data.push([init(rectangle), space, shape]);\n                    }\n                }\n                const dataLength = data.length;\n                if (2 < dataLength) {\n                    data.sort((a, b) => {\n                        return a[0] - b[0];\n                    });\n                    const first = data[0];\n                    const last = data[dataLength - 1];\n                    const spaceLeft = last[0] - first[0] - (spaceTotal - last[1] * 0.5 - first[1] * 0.5);\n                    const margin = spaceLeft / (dataLength - 1);\n                    point.set(0, 0);\n                    assing(first[0], point);\n                    parent.toLocal(point, undefined, point);\n                    let diff = first[1] * 0.5 + margin;\n                    const scale = canvas.scale;\n                    for (let i = 1, imax = dataLength - 1; i < imax; ++i) {\n                        const datum = data[i];\n                        const shape = datum[2];\n                        diff += datum[1] * 0.5;\n                        apply(point, diff, scale, shape);\n                        diff += datum[1] * 0.5 + margin;\n                    }\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n                else if (dataLength === 1) {\n                    point.set(0, 0);\n                    assing(init(canvas.getBounds(false, rectangle)), point);\n                    parent.toLocal(point, undefined, point);\n                    const datum = data[0];\n                    apply(point, 0, canvas.scale, datum[2]);\n                    this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n                }\n            }\n        }\n    }\n    replace(shapeFactory) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                DControllers.getCommandController().push(new ECommandShapeReplace(parent, shapeFactory, this));\n            }\n        }\n    }\n    group() {\n        const shapes = this._shapes;\n        if (2 <= shapes.length) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                DControllers.getCommandController().push(new ECommandShapeGroup(parent, this));\n            }\n        }\n    }\n    hasUngroupable(shapes) {\n        for (let i = shapes.length - 1; 0 <= i; --i) {\n            if (this.isUngroupable(shapes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isUngroupable(shape) {\n        return (shape instanceof EShapeGroup &&\n            EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN) &&\n            EShapeCapabilities.contains(shape, EShapeCapability.UNGROUPING));\n    }\n    ungroup() {\n        const shapes = this._shapes;\n        if (this.hasUngroupable(shapes)) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                DControllers.getCommandController().push(new ECommandShapeUngroup(parent, this));\n            }\n        }\n    }\n    setFill(color, alpha) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillColor(this, [color, alpha]));\n        }\n    }\n    setFillEnabled(enable) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFillEnable(this, enable));\n        }\n    }\n    setStroke(color, alpha) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeColor(this, [color, alpha]));\n        }\n    }\n    setStrokeWidth(width) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeWidth(this, width));\n        }\n    }\n    setStrokeAlign(align) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeAlign(this, align));\n        }\n    }\n    setStrokeSide(side, isOn) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            if (isOn) {\n                DControllers.getCommandController().push(new ECommandShapePropertyStrokeSideOn(this, side));\n            }\n            else {\n                DControllers.getCommandController().push(new ECommandShapePropertyStrokeSideOff(this, side));\n            }\n        }\n    }\n    setStrokeStyle(add, remove) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeStyle(this, add, remove));\n        }\n    }\n    setStrokeEnabled(enable) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyStrokeEnable(this, enable));\n        }\n    }\n    setLineStyle(add, remove) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineStyle(this, add, remove));\n        }\n    }\n    setLineTailType(type) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailType(this, type));\n        }\n    }\n    setLineTailSizeX(size) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailSizeX(this, size));\n        }\n    }\n    setLineTailSizeY(size) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailSizeY(this, size));\n        }\n    }\n    setLineTailColor(color, alpha) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailColor(this, [color, alpha]));\n        }\n    }\n    setLineTailMargin(margin) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineTailMargin(this, margin));\n        }\n    }\n    setLineHeadType(type) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadType(this, type));\n        }\n    }\n    setLineHeadSizeX(size) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadSizeX(this, size));\n        }\n    }\n    setLineHeadSizeY(size) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadSizeY(this, size));\n        }\n    }\n    setLineHeadColor(color, alpha) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadColor(this, [color, alpha]));\n        }\n    }\n    setLineHeadMargin(margin) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyLineHeadMargin(this, margin));\n        }\n    }\n    setPointsStyle(add, remove) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPointsStyle(this, add, remove));\n        }\n    }\n    setText(text) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextValue(this, text));\n        }\n    }\n    setTextColor(color, alpha) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextColor(this, [color, alpha]));\n        }\n    }\n    setTextFamily(family) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextFamily(this, family));\n        }\n    }\n    setTextSize(size) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSize(this, size));\n        }\n    }\n    setTextSizeDelta(delta) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSizeDelta(this, delta));\n        }\n    }\n    setTextWeight(weight) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextWeight(this, weight));\n        }\n    }\n    setTextStyle(style) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextStyle(this, style));\n        }\n    }\n    setTextAlignHorizontal(align) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextAlignHorizontal(this, align));\n        }\n    }\n    setTextAlignVertical(align) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextAlignVertical(this, align));\n        }\n    }\n    setTextPaddingHorizontal(padding) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextPaddingHorizontal(this, padding));\n        }\n    }\n    setTextPaddingVertical(padding) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextPaddingVertical(this, padding));\n        }\n    }\n    setTextOffsetHorizontal(offset) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOffsetHorizontal(this, offset));\n        }\n    }\n    setTextOffsetVertical(offset) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOffsetVertical(this, offset));\n        }\n    }\n    setTextOutlineColor(color, alpha) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineColor(this, [color, alpha]));\n        }\n    }\n    setTextOutlineWidth(width) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineWidth(this, width));\n        }\n    }\n    setTextOutlineEnabled(enable) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextOutlineEnable(this, enable));\n        }\n    }\n    setTextClipping(clipping) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextClipping(this, clipping));\n        }\n    }\n    setTextFitting(fitting) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextFitting(this, fitting));\n        }\n    }\n    setTextSpacingHorizontal(spacing) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSpacingHorizontal(this, spacing));\n        }\n    }\n    setTextSpacingVertical(spacing) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextSpacingVertical(this, spacing));\n        }\n    }\n    setTextDirection(direction) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTextDirection(this, direction));\n        }\n    }\n    setInteractive(interactive) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyInteractive(this, interactive));\n        }\n    }\n    setFocusable(isFocusable) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyFocusable(this, isFocusable));\n        }\n    }\n    setShortcut(shortcut) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyShortcut(this, shortcut));\n        }\n    }\n    setTitle(title) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyTitle(this, title));\n        }\n    }\n    setCursor(cursor) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCursor(this, cursor));\n        }\n    }\n    setRadius(radius) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyRadius(this, radius));\n        }\n    }\n    setCorner(corner, isOn) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            if (isOn) {\n                DControllers.getCommandController().push(new ECommandShapePropertyCornerOn(this, corner));\n            }\n            else {\n                DControllers.getCommandController().push(new ECommandShapePropertyCornerOff(this, corner));\n            }\n        }\n    }\n    setImage(image) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImage(this, image, undefined));\n        }\n    }\n    setGradient(image, gradient) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImage(this, image, gradient));\n        }\n    }\n    fitToImage() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImageFitTo(this));\n        }\n    }\n    clearImage() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyImageClear(this));\n        }\n    }\n    bringToFront() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                const children = parent.children;\n                // Update indices\n                const offset = children.length;\n                const indices = [];\n                for (let i = offset - 1; 0 <= i; --i) {\n                    const child = children[i];\n                    if (child.selected) {\n                        child.index = offset + i;\n                        indices.push(i);\n                    }\n                    else {\n                        child.index = i;\n                    }\n                }\n                // Sort\n                children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n                //\n                let isChanged = false;\n                for (let i = 0, imax = indices.length; i < imax; ++i) {\n                    if (offset - 1 - i !== indices[i]) {\n                        isChanged = true;\n                    }\n                }\n                //\n                if (isChanged) {\n                    parent.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeBringToFront(indices, parent, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    bringForward() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                let isChanged = false;\n                const children = parent.children;\n                const indices = [];\n                let previous = null;\n                for (let i = children.length - 1; 0 <= i; --i) {\n                    const child = children[i];\n                    if (child.selected) {\n                        if (previous) {\n                            children[i] = children[i + 1];\n                            children[i + 1] = child;\n                            indices.push(i);\n                            isChanged = true;\n                        }\n                    }\n                    else {\n                        previous = child;\n                    }\n                }\n                if (isChanged) {\n                    parent.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeBringForward(indices, parent, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return isChanged;\n            }\n        }\n        return false;\n    }\n    sendBackward() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                let isChanged = false;\n                const children = parent.children;\n                const indices = [];\n                let previous = null;\n                for (let i = 0, imax = children.length; i < imax; ++i) {\n                    const child = children[i];\n                    if (child.selected) {\n                        if (previous) {\n                            children[i] = children[i - 1];\n                            children[i - 1] = child;\n                            indices.push(i);\n                            isChanged = true;\n                        }\n                    }\n                    else {\n                        previous = child;\n                    }\n                }\n                if (isChanged) {\n                    parent.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeSendBackward(indices, parent, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return isChanged;\n            }\n        }\n        return false;\n    }\n    sendToBack() {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                const children = parent.children;\n                // Update indices\n                const indices = [];\n                const offset = children.length;\n                for (let i = 0; i < offset; ++i) {\n                    const child = children[i];\n                    if (child.selected) {\n                        child.index = i - offset;\n                        indices.push(i);\n                    }\n                    else {\n                        child.index = i;\n                    }\n                }\n                // Sort\n                children.sort(UtilShapeSearch.COMPARATOR_INDEX);\n                //\n                let isChanged = false;\n                for (let i = 0; i < indices.length; ++i) {\n                    if (i !== indices[i]) {\n                        isChanged = true;\n                    }\n                }\n                //\n                if (isChanged) {\n                    parent.toDirty();\n                    DControllers.getCommandController().push(new ECommandShapeTreeSendToBack(indices, parent, this));\n                    this.update(EToolSelectSelectionUpdatedPart.TREE);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    serialize() {\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        if (canvas == null) {\n            return null;\n        }\n        // Update UUID\n        const manager = new EShapeResourceManagerSerialization();\n        const shapes = this._shapes;\n        const shapesLength = shapes.length;\n        if (0 < shapesLength) {\n            const root = shapes[0].root;\n            if (root != null) {\n                const layer = root.parent;\n                if (layer instanceof DDiagramLayer) {\n                    layer.addUuid(manager);\n                    layer.updateUuid(manager);\n                }\n            }\n        }\n        // Shape set\n        const shapeSet = new Set();\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapeSet.add(shapes[i]);\n        }\n        // Serialize selected shapes\n        const items = [];\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const item = shape.serialize(manager);\n            item[16] = 0;\n            if (shape instanceof EShapeConnectorLine) {\n                let item29 = item[29];\n                if (item29 & EShapeCapability.LINE_TAIL) {\n                    if (!shapeSet.has(shape.edge.tail.acceptor.shape)) {\n                        item29 &= ~EShapeCapability.LINE_TAIL;\n                    }\n                }\n                if (item29 & EShapeCapability.LINE_HEAD) {\n                    if (!shapeSet.has(shape.edge.head.acceptor.shape)) {\n                        item29 &= ~EShapeCapability.LINE_HEAD;\n                    }\n                }\n                item[29] = item29;\n            }\n            items.push(item);\n        }\n        // Done\n        const serialized = {\n            version: DDiagramSerializedVersion,\n            name: canvas.name,\n            label: canvas.label,\n            width: canvas.width,\n            height: canvas.height,\n            summary: canvas.summary,\n            description: canvas.description,\n            resources: manager.resources,\n            data: manager.data,\n            pieces: manager.pieces,\n            items,\n            layers: [\n                [\n                    diagram instanceof DDiagramEditor\n                        ? diagram.theme.getBaseLayerLabel()\n                        : \"Base Layer\"\n                ]\n            ]\n        };\n        return JSON.stringify(serialized);\n    }\n    deserialize(data) {\n        const diagram = this._diagram;\n        const layer = diagram.layer;\n        if (layer != null) {\n            const parsed = DDiagrams.parse(data);\n            if (parsed != null) {\n                DDiagrams.toPieceData(diagram.controller, parsed.pieces, EShapeResourceManagerDeserializationMode.EDITOR).then((pieceData) => {\n                    this.deserialize_(layer, parsed, pieceData);\n                });\n            }\n        }\n    }\n    deserialize_(layer, parsed, pieceData) {\n        const manager = new EShapeResourceManagerDeserialization(parsed, parsed.pieces, pieceData, EShapeResourceManagerDeserializationMode.EDITOR, 0);\n        const shapePromise = deserializeAll(parsed.items, manager);\n        if (shapePromise) {\n            shapePromise.then((shapes) => {\n                const shift = this.calcShift(shapes, layer);\n                const shapesLength = shapes.length;\n                const layerChildren = layer.children;\n                for (let i = 0; i < shapesLength; ++i) {\n                    const shape = shapes[i];\n                    shape.parent = layer;\n                    shape.uploaded = undefined;\n                    layerChildren.push(shape);\n                }\n                layer.onChildTransformChange();\n                layer.toDirty();\n                for (let i = 0; i < shapesLength; ++i) {\n                    shapes[i].onAttach();\n                }\n                this.shift(shapes, shift);\n                DControllers.getCommandController().push(new ECommandShapeCreate(shapes, layer, this, true));\n            });\n        }\n    }\n    calcShift(shapes, parent) {\n        if (shapes.length <= 0) {\n            return null;\n        }\n        const work1 = this._shiftPoint1;\n        const work2 = this._shiftPoint2;\n        const first = shapes[0];\n        first.updateTransform();\n        const firstTransform = first.transform;\n        work1.copyFrom(firstTransform.pivot);\n        firstTransform.worldTransform.apply(work1, work1);\n        parent.transform.worldTransform.apply(work1, work1);\n        const gx = work1.x;\n        const gy = work1.y;\n        let delta = 0;\n        while (true) {\n            work1.set(gx + delta, gy + delta);\n            const found = parent.hitTestBBox(work1, (target) => {\n                if (target.type === first.type) {\n                    target.updateTransform();\n                    const targetTransform = target.transform;\n                    work2.copyFrom(targetTransform.pivot);\n                    targetTransform.worldTransform.apply(work2, work2);\n                    const dx = work2.x - (gx + delta);\n                    const dy = work2.y - (gy + delta);\n                    return Math.abs(dx) <= 0.1 && Math.abs(dy) <= 0.1;\n                }\n                return false;\n            });\n            if (found == null) {\n                work1.set(gx + delta, gy + delta);\n                parent.toLocal(work1, undefined, work1);\n                work2.set(work1.x - firstTransform.position.x, work1.y - firstTransform.position.y);\n                return work2;\n            }\n            delta += 10;\n        }\n    }\n    shift(shapes, amount) {\n        if (shapes.length <= 0 || amount == null) {\n            return;\n        }\n        const ax = amount.x;\n        const ay = amount.y;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                const position = shape.transform.position;\n                position.set(position.x + ax, position.y + ay);\n            }\n            else if (shape instanceof EShapeConnectorLine) {\n                const edge = shape.edge;\n                const head = edge.head;\n                const tail = edge.tail;\n                if (head.acceptor.shape == null && tail.acceptor.shape == null) {\n                    edge.lock();\n                    const headLocal = head.local;\n                    headLocal.set(headLocal.x + ax, headLocal.y + ay);\n                    const tailLocal = tail.local;\n                    tailLocal.set(tailLocal.x + ax, tailLocal.y + ay);\n                    edge.unlock();\n                }\n            }\n        }\n    }\n    setId(id) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyId(this, id));\n        }\n    }\n    addActionValue(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueAdd(value, this));\n        }\n    }\n    replaceActionValue(target, value, list) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueReplace(target, value, this, list));\n        }\n    }\n    removeActionValue(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueRemove(value, this));\n        }\n    }\n    bringActionValueForward(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueBringForward(value, this));\n        }\n    }\n    sendActionValueBackward(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeActionValueSendBackward(value, this));\n        }\n    }\n    addDataValue(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueAdd(value, this));\n        }\n    }\n    replaceDataValue(oldValue, newValue, list) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueReplace(oldValue, newValue, this, list));\n        }\n    }\n    removeDataValue(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueRemove(value, this));\n        }\n    }\n    bringDataValueForward(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueBringForward(value, this));\n        }\n    }\n    sendDataValueBackward(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataValueSendBackward(value, this));\n        }\n    }\n    addDataMappingValue(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueAdd(value, this));\n        }\n    }\n    replaceDataMappingValue(oldValue, newValue, list) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueReplace(oldValue, newValue, this, list));\n        }\n    }\n    removeDataMappingValue(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueRemove(value, this));\n        }\n    }\n    bringDataMappingValueForward(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueBringForward(value, this));\n        }\n    }\n    sendDataMappingValueBackward(value) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapeDataMappingValueSendBackward(value, this));\n        }\n    }\n    setPositionX(x) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionX(this, x));\n        }\n    }\n    setPositionY(y) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionY(this, y));\n        }\n    }\n    setPositionLeft(left) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionLeft(this, left));\n        }\n    }\n    setPositionTop(top) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyPositionTop(this, top));\n        }\n    }\n    setSizeX(x) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySizeX(this, x));\n        }\n    }\n    setSizeY(y) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySizeY(this, y));\n        }\n    }\n    setRotation(rotation) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyRotation(this, rotation));\n        }\n    }\n    setSkew(skew) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertySkew(this, skew));\n        }\n    }\n    toInternalVector(vector, result) {\n        // Convert to the internal coordinate vector\n        // A = modifier.parent.worldTransform\n        // (ndx, ndy)^T = A^-1 (0, 0)^T - A^-1 (dx, dy)^T\n        const modifier = this._modifier;\n        modifier.updateTransform();\n        const worldTransform = modifier.parent.worldTransform;\n        const a = worldTransform.a;\n        const b = worldTransform.b;\n        const c = worldTransform.c;\n        const d = worldTransform.d;\n        const detInverse = 1 / (a * d - c * b);\n        result.set((d * vector.x - c * vector.y) * detInverse, (a * vector.y - b * vector.x) * detInverse);\n        return result;\n    }\n    translate(dx, dy, snap) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const work = this._translateDelta;\n            work.set(dx, dy);\n            this.toInternalVector(work, work);\n            if (snap) {\n                const diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    diagram.snapper.toTranslationSnapped(work, work);\n                }\n            }\n            const transform = this._transform.set(1, 0, 0, 1, work.x, work.y);\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                const shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    const edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    let capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    }\n    rotateTo(global, snap) {\n        const rotationAxisGlobal = this._rotationAxisGlobal;\n        const originGlobal = this._originGlobal;\n        const vx = global.x - originGlobal.x;\n        const vy = global.y - originGlobal.y;\n        const v = Math.sqrt(vx * vx + vy * vy);\n        if (0.001 < v) {\n            const vi = 1 / v;\n            const nx = vx * vi;\n            const ny = vy * vi;\n            const dot = Math.max(-1, Math.min(1, rotationAxisGlobal.x * nx + rotationAxisGlobal.y * ny));\n            const cross = rotationAxisGlobal.x * ny - rotationAxisGlobal.y * nx;\n            let rotation = 0 <= cross ? +Math.acos(dot) : -Math.acos(dot);\n            if (snap) {\n                const diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    const baseRotation = this._modifier.rotation;\n                    rotation = diagram.snapper.toRotationSnapped(baseRotation, rotation);\n                }\n            }\n            this.rotate(rotation);\n        }\n    }\n    rotate(rotation) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const originLocal = this._originLocal;\n            const transform = this._transform\n                .identity()\n                .translate(-originLocal.x, -originLocal.y)\n                .rotate(rotation)\n                .translate(+originLocal.x, +originLocal.y);\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                const shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    const edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    let capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                        capability |= EShapeCapability.ROTATION;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    }\n    getScale(dx, dy, anchor, keepRatio, result) {\n        switch (anchor) {\n            case ESnapperModifierAnchor.TOP_LEFT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.TOP_CENTER:\n                this.getScaleY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.TOP_RIGHT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.MIDDLE_LEFT:\n                this.getScaleX(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.NONE:\n                const axis = this._scaleAxis0;\n                const width = axis.x;\n                const height = axis.y;\n                const scaleX = (width + dx) / width;\n                const scaleY = (height + dy) / height;\n                if (keepRatio) {\n                    result.x = result.y = Math.max(scaleX, scaleY);\n                }\n                else {\n                    result.set(scaleX, scaleY);\n                }\n                break;\n            case ESnapperModifierAnchor.MIDDLE_RIGHT:\n                this.getScaleX(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_LEFT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_CENTER:\n                this.getScaleY(dx, dy, keepRatio, result);\n                break;\n            case ESnapperModifierAnchor.BOTTOM_RIGHT:\n                this.getScaleXY(dx, dy, keepRatio, result);\n                break;\n        }\n    }\n    getScaleX(dx, dy, keepRatio, result) {\n        const scale = this.calcScale(dx, dy);\n        if (keepRatio) {\n            result.set(scale, scale);\n        }\n        else {\n            result.set(scale, 1);\n        }\n    }\n    getScaleY(dx, dy, keepRatio, result) {\n        const scale = this.calcScale(dx, dy);\n        if (keepRatio) {\n            result.set(scale, scale);\n        }\n        else {\n            result.set(1, scale);\n        }\n    }\n    calcScale(dx, dy) {\n        const axis = this._scaleAxis0;\n        const dot = axis.x * dx + axis.y * dy;\n        return (this._scaleDet + dot) * this._scaleDetInverse;\n    }\n    getScaleXY(dx, dy, keepRatio, result) {\n        // v0\n        const axis0 = this._scaleAxis0;\n        const vx0 = axis0.x;\n        const vy0 = axis0.y;\n        // v1\n        const axis1 = this._scaleAxis1;\n        const vx1 = axis1.x;\n        const vy1 = axis1.y;\n        // v2\n        const vx2 = vx0 + vx1 + dx;\n        const vy2 = vy0 + vy1 + dy;\n        // A = | vx0, vx1 |\n        //     | vy0, vy1 |\n        // D = (dx, dy)^T\n        // V0 = (vx0, vy0)^T\n        // V1 = (vx1, vy1)^T\n        // V2 = V0 + V1 + D;\n        // A x = V\n        //\n        // det A = vx0 * vy1 - vy0 * vx1\n        // (det A) A^-1 = |  vy1 -vx1 |\n        //                | -vy0  vx0 |\n        const detInverse = this._scaleDetInverse;\n        const scaleX = (+vy1 * vx2 - vx1 * vy2) * detInverse;\n        const scaleY = (-vy0 * vx2 + vx0 * vy2) * detInverse;\n        this.setScale(scaleX, scaleY, keepRatio, result);\n    }\n    setScale(scaleX, scaleY, keepRatio, result) {\n        if (keepRatio) {\n            if (0 <= scaleX) {\n                if (0 <= scaleY) {\n                    const scale = Math.max(scaleX, scaleY);\n                    result.set(scale, scale);\n                }\n                else {\n                    const scale = Math.max(scaleX, -scaleY);\n                    result.set(scale, -scale);\n                }\n            }\n            else {\n                if (0 <= scaleY) {\n                    const scale = Math.max(-scaleX, scaleY);\n                    result.set(-scale, scale);\n                }\n                else {\n                    const scale = Math.min(scaleX, scaleY);\n                    result.set(scale, scale);\n                }\n            }\n        }\n        else {\n            result.set(scaleX, scaleY);\n        }\n        return result;\n    }\n    makeScaleTransform(scale, result) {\n        return this._scaleTransform\n            .copyTo(result)\n            .scale(scale.x, scale.y)\n            .prepend(this._scaleTransformInverse);\n    }\n    scale(dx, dy, keepRatio, snap) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const scale = this._scale;\n            const scaleAnchor = this._scaleAnchor;\n            this.getScale(dx, dy, scaleAnchor, keepRatio, scale);\n            const transform = this._transform;\n            this.makeScaleTransform(scale, transform);\n            if (snap) {\n                const diagram = this._diagram;\n                if (diagram instanceof DDiagramEditor) {\n                    if (diagram.snapper.toScaleSnapped(transform, scaleAnchor, keepRatio, scale)) {\n                        this.makeScaleTransform(scale, transform);\n                    }\n                }\n            }\n            for (let i = 0, imax = shapes.length; i < imax; ++i) {\n                const shape = shapes[i];\n                if (shape instanceof EShapeConnectorLine) {\n                    const edge = shape.edge;\n                    if (edge.tail.acceptor.shape == null && edge.head.acceptor.shape == null) {\n                        UtilShapeConnectorTransforms.apply(shape, transform);\n                    }\n                }\n                else {\n                    let capability = EShapeCapability.NONE;\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.POSITION)) {\n                        capability |= EShapeCapability.POSITION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.WIDTH)) {\n                        capability |= EShapeCapability.WIDTH;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.HEIGHT)) {\n                        capability |= EShapeCapability.HEIGHT;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.ROTATION)) {\n                        capability |= EShapeCapability.ROTATION;\n                    }\n                    if (EShapeCapabilities.contains(shape, EShapeCapability.SKEW)) {\n                        capability |= EShapeCapability.SKEW;\n                    }\n                    if (capability !== EShapeCapability.NONE) {\n                        UtilShapeTransforms.apply(shape, transform, capability);\n                    }\n                }\n            }\n            this.update(EToolSelectSelectionUpdatedPart.PROPERTY);\n        }\n    }\n    delete(save) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            const parent = shapes[0].parent;\n            if (parent) {\n                if (save !== false) {\n                    const deleteds = UtilShapeDeleter.delete(parent, shapes, true);\n                    if (deleteds) {\n                        const indices = UtilShapeSearch.toIndices(deleteds);\n                        DControllers.getCommandController().push(new ECommandShapeDelete(deleteds, indices, parent, this, true));\n                    }\n                }\n                else {\n                    UtilShapeDeleter.delete(parent, shapes, false);\n                }\n                this.update(EToolSelectSelectionUpdatedPart.TREE | EToolSelectSelectionUpdatedPart.SELECTION);\n            }\n        }\n    }\n    createChildren(creator) {\n        this.lock();\n        const commands = [];\n        const shapes = this._shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const created = creator(shape);\n            if (created) {\n                commands.push(new ECommandShapeCreate(created, shape, this, false));\n            }\n        }\n        if (0 < commands.length) {\n            DControllers.getCommandController().push(new ECommandComposition(commands, this));\n            this.update(EToolSelectSelectionUpdatedPart.TREE);\n        }\n        this.unlock();\n    }\n    deleteChildren(deletor) {\n        this.lock();\n        const commands = [];\n        const shapes = this._shapes;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const targets = deletor(shape);\n            if (targets) {\n                for (let j = 0, jmax = targets.length; j < jmax; ++j) {\n                    targets[j].selected = true;\n                }\n                const deleteds = UtilShapeDeleter.delete(shape, undefined, true);\n                if (deleteds) {\n                    const indices = UtilShapeSearch.toIndices(deleteds);\n                    commands.push(new ECommandShapeDelete(deleteds, indices, shape, this, false));\n                }\n            }\n        }\n        if (0 < commands.length) {\n            DControllers.getCommandController().push(new ECommandComposition(commands, this));\n            this.update(EToolSelectSelectionUpdatedPart.TREE);\n        }\n        this.unlock();\n    }\n    lockCapability(target) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCapabilityLock(this, target));\n        }\n    }\n    unlockCapability(target) {\n        const shapes = this._shapes;\n        if (0 < shapes.length) {\n            DControllers.getCommandController().push(new ECommandShapePropertyCapabilityUnlock(this, target));\n        }\n    }\n    store() {\n        return this._shapes.slice(0);\n    }\n    restore(stored) {\n        const shapes = this._shapes;\n        // Unselect\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            shapes[i].selected = false;\n        }\n        shapes.length = 0;\n        // Select\n        for (let i = 0, imax = stored.length; i < imax; ++i) {\n            const newShape = stored[i];\n            newShape.selected = true;\n            shapes.push(newShape);\n        }\n        // Done\n        this.update(EToolSelectSelectionUpdatedPart.SELECTION);\n    }\n    get modifier() {\n        return this._modifier;\n    }\n}\n//# sourceMappingURL=e-tool-select-selection.js.map","import { Rectangle } from \"pixi.js\";\nexport class UtilShapeAreaSelect {\n    static isShapeIn(shape, rect) {\n        var _a;\n        const bound = shape.getBounds(false, ((_a = this._work) !== null && _a !== void 0 ? _a : (this._work = new Rectangle())));\n        const x = bound.x;\n        const y = bound.y;\n        const w = bound.width;\n        const h = bound.height;\n        return (rect.contains(x, y) &&\n            rect.contains(x + w, y) &&\n            rect.contains(x, y + h) &&\n            rect.contains(x + w, y + h));\n    }\n    static findShapes(container, rect, result) {\n        const children = container.children;\n        for (let i = 0, imax = children.length; i < imax; ++i) {\n            const child = children[i];\n            if (this.isShapeIn(child, rect)) {\n                result.push(child);\n            }\n        }\n    }\n}\n//# sourceMappingURL=util-shape-area-select.js.map","import { Point } from \"pixi.js\";\nexport class UtilHitTest {\n    static execute(global, target, interactionManager) {\n        var _a, _b;\n        const offsets = ((_a = UtilHitTest.OFFSETS) !== null && _a !== void 0 ? _a : (UtilHitTest.OFFSETS = this.newOffsets()));\n        const work = ((_b = UtilHitTest.WORK) !== null && _b !== void 0 ? _b : (UtilHitTest.WORK = new Point()));\n        const x = global.x;\n        const y = global.y;\n        if (interactionManager) {\n            for (let i = 0, imax = offsets.length; i < imax; i += 1) {\n                work.set(x + offsets[i], y + offsets[i + 1]);\n                const result = interactionManager.hitTest(work, target);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        else {\n            for (let i = 0, imax = offsets.length; i < imax; i += 1) {\n                work.set(x + offsets[i], y + offsets[i + 1]);\n                const result = target.hitTest(work);\n                if (result != null) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }\n    static newOffsets() {\n        return [\n            +0, +0, -1, -1, +1, -1, +1, +1, -1, +1, +0, -2, +2, +0, +0, -2, -2, +0, -2, -2, +2, -2,\n            +2, +2, -2, +2, +0, -4, +4, +0, +0, -4, -4, +0\n        ];\n    }\n}\n//# sourceMappingURL=util-hit-test.js.map","import { DApplications, DControllers, EShapeBase, EShapeCapabilities, EShapeCapability, ESnapperModifierAnchor, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point, Rectangle } from \"pixi.js\";\nimport { UtilShapeAreaSelect } from \"../util/util-shape-area-select\";\nimport { ECommandShapeSelect } from \"../command/e-command-shape-select\";\nimport { EToolImpl } from \"./e-tool-impl\";\nimport { EToolSelectArea } from \"./e-tool-select-area\";\nimport { EToolSelectSelection } from \"./e-tool-select-selection\";\nimport { UtilHitTest } from \"../util/util-hit-test\";\nimport { UtilShapeSearch } from \"../util/util-shape-search\";\nconst toSelectionOptions = (options) => {\n    const selection = options.selection;\n    return {\n        diagram: options.diagram,\n        modifier: selection && selection.modifier\n    };\n};\nexport class EToolSelect extends EToolImpl {\n    constructor(options) {\n        super();\n        this._selection = new EToolSelectSelection(toSelectionOptions(options));\n        this._area = new EToolSelectArea();\n        this._diagram = options.diagram;\n        this._applicationLayer = null;\n        this._onDownPoint = new Point();\n        this._onMovePoint = new Point();\n        this._onUpPoint = new Point();\n        this._areaRect = new Rectangle();\n        this._mode = 0 /* EToolSelectMode.NONE */;\n        this._isFirstMove = false;\n        this._childSelectTime = -1;\n        this._childSelectChild = null;\n        const allow = options.allow;\n        if (allow) {\n            this._isTransformationAllowed = allow.transformation !== false;\n            this._isDeletionAllowed = allow.deletion !== false;\n        }\n        else {\n            this._isTransformationAllowed = true;\n            this._isDeletionAllowed = true;\n        }\n        this._onDownBound = (e) => {\n            this.onDown(e);\n        };\n        this._onMoveBound = (e) => {\n            this.onMove(e);\n        };\n        this._onUpBound = (e) => {\n            this.onUp(e);\n        };\n        this._onKeydownBound = (e) => {\n            this.onKeydown(e);\n        };\n        this._onKeyupBound = (e) => {\n            this.onKeyup(e);\n        };\n        this._onDblClickBound = (e) => {\n            this.onDblClick(e);\n        };\n    }\n    get selection() {\n        return this._selection;\n    }\n    onActivate() {\n        const diagram = this._diagram;\n        diagram.on(UtilPointerEvent.down, this._onDownBound);\n        diagram.on(\"dblclick\", this._onDblClickBound);\n        diagram.on(\"keydown\", this._onKeydownBound);\n        diagram.on(\"keyup\", this._onKeyupBound);\n    }\n    onDeactivate() {\n        const diagram = this._diagram;\n        diagram.off(UtilPointerEvent.down, this._onDownBound);\n        diagram.off(\"dblclick\", this._onDblClickBound);\n        diagram.off(\"keydown\", this._onKeydownBound);\n        diagram.off(\"keyup\", this._onKeyupBound);\n    }\n    onDown(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const diagram = this._diagram;\n        const diagramCanvas = diagram.canvas;\n        const diagramLayer = diagram.layer;\n        if (diagramCanvas && diagramLayer) {\n            const isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n            if (this._mode === 1 /* EToolSelectMode.SELECT */) {\n                this._mode = 0 /* EToolSelectMode.NONE */;\n                this.onSelectEnd(diagramCanvas, diagramLayer, isAddMode);\n                return;\n            }\n            const global = e.data.global;\n            const onDownPoint = this._onDownPoint;\n            onDownPoint.copyFrom(global);\n            const selection = this._selection;\n            const modifier = selection.modifier;\n            const hitObject = this.hitTest(global, modifier, diagramLayer);\n            const commandController = DControllers.getCommandController();\n            if (hitObject instanceof EShapeBase) {\n                if (isAddMode) {\n                    const before = selection.store();\n                    selection.toggle(hitObject);\n                    const after = selection.store();\n                    commandController.push(new ECommandShapeSelect(before, after, selection));\n                }\n                else if (!selection.contains(hitObject)) {\n                    const first = selection.first();\n                    if (first == null) {\n                        const before = selection.store();\n                        if (selection.set(hitObject.root)) {\n                            const after = selection.store();\n                            commandController.push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    else {\n                        const selected = UtilShapeSearch.toSelected(hitObject);\n                        if (selected != null) {\n                            if (EShapeCapabilities.contains(selected, EShapeCapability.CHILDREN)) {\n                                this._childSelectTime = Date.now();\n                                this._childSelectChild = UtilShapeSearch.toOfParent(hitObject, selected);\n                            }\n                        }\n                        else {\n                            const sharedParent = UtilShapeSearch.toSharedParent(first, hitObject);\n                            const before = selection.store();\n                            if (selection.set(UtilShapeSearch.toOfParent(hitObject, sharedParent))) {\n                                const after = selection.store();\n                                commandController.push(new ECommandShapeSelect(before, after, selection));\n                            }\n                        }\n                    }\n                }\n                if (this._isTransformationAllowed && selection.prepareTranslate()) {\n                    selection.prepareTranslateSnap();\n                    this._mode = 2 /* EToolSelectMode.TRANSLATE */;\n                    this._isFirstMove = true;\n                }\n            }\n            else if (hitObject === modifier) {\n                switch (modifier.getLastHitAnchor()) {\n                    case ESnapperModifierAnchor.ROTATION:\n                        if (selection.prepareRotate(global)) {\n                            selection.prepareRotateSnap();\n                            this._mode = 4 /* EToolSelectMode.ROTATE */;\n                            this._isFirstMove = true;\n                        }\n                        break;\n                    default:\n                        if (selection.prepareScale(modifier.getLastHitAnchor())) {\n                            selection.prepareScaleSnap();\n                            this._mode = 3 /* EToolSelectMode.SCALE */;\n                            this._isFirstMove = true;\n                        }\n                }\n            }\n            else {\n                // Select area\n                const area = this._area;\n                diagramCanvas.toLocal(global, undefined, onDownPoint);\n                area.x = onDownPoint.x;\n                area.y = onDownPoint.y;\n                area.size.set(0, 0);\n                area.update();\n                diagramCanvas.addChild(area);\n                DApplications.update(diagram);\n                // Select mode\n                this._mode = 1 /* EToolSelectMode.SELECT */;\n            }\n            if (this._mode !== 0 /* EToolSelectMode.NONE */) {\n                const oldApplicationLayer = this._applicationLayer;\n                if (oldApplicationLayer) {\n                    this._applicationLayer = null;\n                    const oldInteractionManager = oldApplicationLayer.renderer.plugins.interaction;\n                    oldInteractionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                    const onUpBound = this._onUpBound;\n                    oldInteractionManager.off(UtilPointerEvent.up, onUpBound);\n                    oldInteractionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                    oldInteractionManager.off(UtilPointerEvent.cancel, onUpBound);\n                }\n                const newApplicationLayer = DApplications.getLayer(diagram);\n                if (newApplicationLayer) {\n                    this._applicationLayer = newApplicationLayer;\n                    const newInteractionManager = newApplicationLayer.renderer.plugins.interaction;\n                    newInteractionManager.on(UtilPointerEvent.move, this._onMoveBound);\n                    const onUpBound = this._onUpBound;\n                    newInteractionManager.on(UtilPointerEvent.up, onUpBound);\n                    newInteractionManager.on(UtilPointerEvent.upoutside, onUpBound);\n                    newInteractionManager.on(UtilPointerEvent.cancel, onUpBound);\n                }\n            }\n        }\n    }\n    onMove(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const diagram = this._diagram;\n        const diagramCanvas = diagram.canvas;\n        const diagramLayer = diagram.layer;\n        const mode = this._mode;\n        const applicationLayer = this._applicationLayer;\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */ && applicationLayer) {\n            const global = e.data.global;\n            applicationLayer.lock();\n            const onDownPoint = this._onDownPoint;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                const area = this._area;\n                const onMovePoint = diagramCanvas.toLocal(global, undefined, this._onMovePoint);\n                area.x = Math.min(onDownPoint.x, onMovePoint.x);\n                area.y = Math.min(onDownPoint.y, onMovePoint.y);\n                area.size.set(Math.max(onDownPoint.x, onMovePoint.x) - area.x, Math.max(onDownPoint.y, onMovePoint.y) - area.y);\n                area.update();\n            }\n            else {\n                const dx = global.x - onDownPoint.x;\n                const dy = global.y - onDownPoint.y;\n                if (1 <= Math.abs(dx) || 1 <= Math.abs(dy)) {\n                    const isFirstMove = this._isFirstMove;\n                    this._isFirstMove = false;\n                    this._childSelectChild = null;\n                    const selection = this._selection;\n                    selection.modifier.disallow();\n                    switch (mode) {\n                        case 2 /* EToolSelectMode.TRANSLATE */:\n                            if (isFirstMove) {\n                                selection.saveForTranslate();\n                            }\n                            selection.translate(dx, dy, true);\n                            break;\n                        case 4 /* EToolSelectMode.ROTATE */:\n                            if (isFirstMove) {\n                                selection.saveForRotate();\n                            }\n                            selection.rotateTo(global, true);\n                            break;\n                        case 3 /* EToolSelectMode.SCALE */:\n                            if (isFirstMove) {\n                                selection.saveForScale();\n                            }\n                            const keepRatio = originalEvent.shiftKey;\n                            selection.scale(dx, dy, keepRatio, true);\n                            break;\n                    }\n                }\n            }\n            applicationLayer.unlock();\n            applicationLayer.update();\n        }\n    }\n    hitTest(global, modifier, diagramLayer) {\n        // Modifier\n        if (this._isTransformationAllowed && modifier.visible) {\n            const applicationLayer = DApplications.getLayer(diagramLayer);\n            if (applicationLayer) {\n                const interactionManager = applicationLayer.renderer.plugins.interaction;\n                const modifierHit = UtilHitTest.execute(global, modifier, interactionManager);\n                if (modifierHit != null) {\n                    return modifierHit;\n                }\n            }\n        }\n        // Layer\n        if (diagramLayer.visible) {\n            return UtilHitTest.execute(global, diagramLayer);\n        }\n        // Found nothing\n        return null;\n    }\n    onSelectEnd(canvas, diagramLayer, isAddMode) {\n        const area = this._area;\n        const selection = this._selection;\n        const commandController = DControllers.getCommandController();\n        if (0 < area.size.x && 0 < area.size.y) {\n            const areaRect = area.getBounds(false, this._areaRect);\n            const foundShapes = [];\n            UtilShapeAreaSelect.findShapes(diagramLayer, areaRect, foundShapes);\n            if (isAddMode) {\n                if (0 < foundShapes.length) {\n                    const before = selection.store();\n                    if (selection.addAll(foundShapes)) {\n                        const after = selection.store();\n                        commandController.push(new ECommandShapeSelect(before, after, selection));\n                    }\n                }\n            }\n            else {\n                if (0 < foundShapes.length || !selection.isEmpty()) {\n                    const before = selection.store();\n                    if (selection.clearAndAddAll(foundShapes)) {\n                        const after = selection.store();\n                        commandController.push(new ECommandShapeSelect(before, after, selection));\n                    }\n                }\n            }\n        }\n        else if (!isAddMode) {\n            if (!selection.isEmpty()) {\n                const before = selection.store();\n                if (selection.clear()) {\n                    const after = selection.store();\n                    commandController.push(new ECommandShapeSelect(before, after, selection));\n                }\n            }\n        }\n        canvas.removeChild(area);\n        DApplications.update(diagramLayer);\n    }\n    onUp(e) {\n        const diagram = this._diagram;\n        const diagramCanvas = diagram.canvas;\n        const diagramLayer = diagram.layer;\n        const mode = this._mode;\n        const applicationLayer = this._applicationLayer;\n        if (applicationLayer) {\n            this._applicationLayer = null;\n            const interactionManager = applicationLayer.renderer.plugins.interaction;\n            interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n            const onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n        }\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            this._mode = 0 /* EToolSelectMode.NONE */;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                const originalEvent = e.data.originalEvent;\n                const isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n                this.onSelectEnd(diagramCanvas, diagramLayer, isAddMode);\n            }\n            else {\n                const selection = this._selection;\n                // Finalize\n                selection.finalize();\n                // Select the child\n                const childSelectChild = this._childSelectChild;\n                if (childSelectChild != null) {\n                    this._childSelectChild = null;\n                    const elapsedTime = Date.now() - this._childSelectTime;\n                    if (elapsedTime < 333) {\n                        const before = selection.store();\n                        if (selection.set(childSelectChild)) {\n                            const after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                }\n                //\n                selection.modifier.allow();\n                selection.updateModifier();\n                if (applicationLayer) {\n                    applicationLayer.update();\n                }\n            }\n        }\n    }\n    getRotateAmount(e) {\n        return (Math.PI * (e.ctrlKey ? 1 : 15)) / 180;\n    }\n    getScaleAmount(e) {\n        return e.ctrlKey ? 1 : 10;\n    }\n    getTranslateAmount(e) {\n        return e.ctrlKey ? 1 : 10;\n    }\n    onKeydown(e) {\n        const selection = this._selection;\n        if (!selection.isEmpty()) {\n            if (this._isTransformationAllowed) {\n                if (UtilKeyboardEvent.isArrowUpKey(e)) {\n                    if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(0, this.getScaleAmount(e), false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(0, -this.getTranslateAmount(e), false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowRightKey(e)) {\n                    if (e.altKey) {\n                        if (selection.prepareRotate()) {\n                            selection.saveForRotate();\n                            selection.rotate(this.getRotateAmount(e));\n                            selection.finalize();\n                        }\n                    }\n                    else if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(this.getScaleAmount(e), 0, false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(this.getTranslateAmount(e), 0, false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowDownKey(e)) {\n                    if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(0, -this.getScaleAmount(e), false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(0, this.getTranslateAmount(e), false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n                else if (UtilKeyboardEvent.isArrowLeftKey(e)) {\n                    if (e.altKey) {\n                        if (selection.prepareRotate()) {\n                            selection.saveForRotate();\n                            selection.rotate(-this.getRotateAmount(e));\n                            selection.finalize();\n                        }\n                    }\n                    else if (e.shiftKey) {\n                        if (selection.prepareScale(ESnapperModifierAnchor.NONE)) {\n                            selection.saveForScale();\n                            selection.scale(-this.getScaleAmount(e), 0, false, false);\n                            selection.finalize();\n                        }\n                    }\n                    else {\n                        if (selection.prepareTranslate()) {\n                            selection.saveForTranslate();\n                            selection.translate(-this.getTranslateAmount(e), 0, false);\n                            selection.finalize();\n                        }\n                    }\n                    e.preventDefault();\n                }\n            }\n            if (this._isDeletionAllowed) {\n                if (UtilKeyboardEvent.isDeleteKey(e)) {\n                    selection.delete();\n                    e.preventDefault();\n                }\n            }\n        }\n        if (UtilKeyboardEvent.isSelectAllKey(e)) {\n            const first = selection.first();\n            const parent = first == null ? this._diagram.layer : first.parent;\n            if (parent != null) {\n                const children = parent.children;\n                if (0 < children.length) {\n                    const before = selection.store();\n                    if (e.altKey) {\n                        const types = new Set();\n                        for (let i = 0, imax = before.length; i < imax; ++i) {\n                            types.add(before[i].type);\n                        }\n                        const after = [];\n                        for (let i = 0, imax = children.length; i < imax; ++i) {\n                            const child = children[i];\n                            if (child.selected) {\n                                after.push(child);\n                            }\n                            else if (types.has(child.type)) {\n                                after.push(child);\n                            }\n                        }\n                        if (selection.clearAndAddAll(after)) {\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                    else {\n                        if (selection.clearAndAddAll(children)) {\n                            const after = selection.store();\n                            DControllers.getCommandController().push(new ECommandShapeSelect(before, after, selection));\n                        }\n                    }\n                }\n            }\n        }\n    }\n    onKeyup(e) {\n        // DO NOTHING\n    }\n    onDblClick(e) {\n        const selection = this._selection;\n        const last = selection.last();\n        if (last != null) {\n            this.emit(\"edit\", last, this);\n        }\n    }\n}\n//# sourceMappingURL=e-tool-select.js.map","import { DApplications, EShapeAcceptorEdgeType, EShapeCircle, EShapeContainer, EShapeDefaults, EShapeLockPart } from \"@wcardinal/wcardinal-ui\";\nexport class EToolShapeAcceptorEdgeRenderer extends EShapeContainer {\n    constructor(edge) {\n        super();\n        this._edge = edge;\n        this._circles = this.newCircles();\n        this._foundEdges = [];\n        this._radius = EShapeDefaults.SIZE_X * 2;\n        this._scaleBound = 1;\n        this._scaleBoundInverse = 1;\n        this._type = EShapeAcceptorEdgeType.TAIL;\n        this._x = 0;\n        this._y = 0;\n        this._ox = 0;\n        this._oy = 0;\n        this._isDirty = false;\n        this._isBegan = false;\n        this._doUpdateBound = () => {\n            this._timeout = null;\n            if (this._isDirty) {\n                this._isDirty = false;\n                if (this._isBegan) {\n                    this.visible = true;\n                    this.doUpdate();\n                }\n            }\n        };\n    }\n    newCircles() {\n        const result = [];\n        const color = EShapeDefaults.STROKE_COLOR;\n        const alpha = EShapeDefaults.STROKE_ALPHA;\n        for (let i = 0, imax = 64; i < imax; ++i) {\n            const shape = new EShapeCircle();\n            shape.stroke.set(false);\n            shape.fill.set(true, color, alpha);\n            shape.visible = false;\n            shape.attach(this);\n            result.push(shape);\n        }\n        return result;\n    }\n    begin(canvas) {\n        canvas.addChild(this);\n        const layer = canvas.layer.active;\n        if (layer != null) {\n            const position = layer.transform.position;\n            this._ox = position.x;\n            this._oy = position.y;\n        }\n        else {\n            this._ox = 0;\n            this._oy = 0;\n        }\n        this.visible = false;\n        this._isBegan = true;\n    }\n    end() {\n        const parent = this.parent;\n        if (parent != null) {\n            parent.removeChild(this);\n        }\n        this.visible = false;\n        this._isBegan = false;\n    }\n    onPrerender() {\n        const scale0 = this.getParentScale();\n        const scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            const size = this.getCircleSize();\n            const circles = this._circles;\n            for (let i = 0, imax = circles.length; i < imax; ++i) {\n                circles[i].size.set(size, size);\n            }\n        }\n    }\n    render(renderer) {\n        if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n            return;\n        }\n        this.onPrerender();\n        super.render(renderer);\n    }\n    getParentScale() {\n        const parent = this.parent;\n        if (parent != null) {\n            return parent.scale.y;\n        }\n        return 1;\n    }\n    getCircleSize() {\n        return 10 * Math.min(1, this._scaleBoundInverse);\n    }\n    update(type, x, y) {\n        if (this._isBegan) {\n            this._type = type;\n            this._x = x;\n            this._y = y;\n            if (this._timeout == null) {\n                this.visible = true;\n                this.doUpdate();\n                this._timeout = window.setTimeout(this._doUpdateBound, 100);\n            }\n            else {\n                this._isDirty = true;\n            }\n        }\n    }\n    doUpdate() {\n        const radius = this._radius;\n        const circles = this._circles;\n        const circlesLength = circles.length;\n        const edges = this._foundEdges;\n        this._edge.findAll(this._type, this._x, this._y, radius, circlesLength, edges);\n        const edgesLength = edges.length;\n        const ox = this._ox;\n        const oy = this._oy;\n        const size = this.getCircleSize();\n        const isize = Math.min(circlesLength, edgesLength);\n        const distance = radius * radius;\n        for (let i = 0; i < isize; ++i) {\n            const edge = edges[i];\n            const edgeCenter = edge.center;\n            const circle = circles[i];\n            circle.lock(EShapeLockPart.UPLOADED);\n            circle.transform.position.set(ox + edgeCenter.x, oy + edgeCenter.y);\n            circle.size.set(size, size);\n            circle.fill.alpha = 0.5 * Math.max(0, 1 - edge.distance / distance);\n            circle.visible = true;\n            circle.unlock(EShapeLockPart.UPLOADED, true);\n        }\n        for (let i = isize; i < circlesLength; ++i) {\n            circles[i].visible = false;\n        }\n        DApplications.update(this);\n    }\n}\n//# sourceMappingURL=e-tool-shape-acceptor-edge-renderer.js.map","import { EShapeAcceptors, EShapeCapabilities, EShapeCapability, EShapeConnectorLine } from \"@wcardinal/wcardinal-ui\";\nimport { Matrix, Point } from \"pixi.js\";\nimport { EToolShapeAcceptorEdgeRenderer } from \"./e-tool-shape-acceptor-edge-renderer\";\nconst SIZE = 10;\nexport class EToolShapeAcceptorEdge {\n    constructor(diagram, canvasMode) {\n        this._diagram = diagram;\n        this._canvasMode = canvasMode;\n        this._renderer = new EToolShapeAcceptorEdgeRenderer(this);\n        this._work = new Set();\n    }\n    begin(canvas, shape) {\n        this.clear();\n        this._shape = shape;\n        if (canvas != null) {\n            this._renderer.begin(canvas);\n        }\n    }\n    end() {\n        this._renderer.end();\n        this.clear();\n    }\n    update(type, x, y) {\n        this._renderer.update(type, x, y);\n    }\n    show() {\n        this._renderer.visible = true;\n    }\n    hide() {\n        this._renderer.visible = false;\n    }\n    get edges() {\n        let result = this._edges;\n        if (result == null) {\n            result = this.newEdges();\n            this._edges = result;\n        }\n        return result;\n    }\n    newEdges() {\n        const result = new Map();\n        const layer = this._diagram.layer;\n        if (layer) {\n            let layerPositionX = 0;\n            let layerPositionY = 0;\n            if (this._canvasMode) {\n                const layerPosition = layer.transform.position;\n                layerPositionX = layerPosition.x;\n                layerPositionY = layerPosition.y;\n            }\n            const shape = this._shape;\n            if (shape != null) {\n                const shapeParent = shape.parent;\n                if (shapeParent != null) {\n                    this.addAll(shapeParent.children, layerPositionX, layerPositionY, result);\n                }\n            }\n            else {\n                this.addAll(layer.children, layerPositionX, layerPositionY, result);\n            }\n        }\n        return result;\n    }\n    addAll(shapes, lx, ly, result) {\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            if (!(shape instanceof EShapeConnectorLine)) {\n                const size = shape.size;\n                const sx = size.x;\n                const sy = size.y;\n                const transform = shape.transform;\n                const internal = transform.internalTransform;\n                const a = internal.a;\n                const b = internal.b;\n                const c = internal.c;\n                const d = internal.d;\n                const pivot = transform.pivot;\n                const px = pivot.x;\n                const py = pivot.y;\n                const matrix = new Matrix(a * sx, b * sx, c * sy, d * sy, internal.tx + lx + (a * px + c * py), internal.ty + ly + (b * px + d * py));\n                EShapeAcceptors.get(shape.type).each(shape, (edge, id) => {\n                    this.add(matrix, id, edge, shape, result);\n                });\n                if (EShapeCapabilities.contains(shape, EShapeCapability.CHILDREN)) {\n                    const children = shape.children;\n                    if (children) {\n                        this.addAll(children, lx, ly, result);\n                    }\n                }\n            }\n        }\n    }\n    add(matrix, id, acceptorEdge, shape, coordinateToEdges) {\n        const aes = acceptorEdge.size;\n        const aesx = aes.x;\n        const aesy = aes.y;\n        const aex = acceptorEdge.x;\n        const aey = acceptorEdge.y;\n        const a = matrix.a;\n        const b = matrix.b;\n        const c = matrix.c;\n        const d = matrix.d;\n        const tx = matrix.tx;\n        const ty = matrix.ty;\n        const x = a * aex + c * aey + tx;\n        const y = b * aex + d * aey + ty;\n        const edge = {\n            shape,\n            id,\n            x: null,\n            y: null,\n            acceptor: acceptorEdge,\n            matrix,\n            local: new Point(x, y),\n            center: new Point(x, y),\n            distance: 0\n        };\n        if (aesx === 0 && aesy === 0) {\n            const gx = this.toGridIndex(x);\n            const gy = this.toGridIndex(y);\n            const coordinate = this.toCoordinate(gx, gy);\n            const edges = coordinateToEdges.get(coordinate);\n            if (edges == null) {\n                coordinateToEdges.set(coordinate, [edge]);\n            }\n            else {\n                edges.push(edge);\n            }\n        }\n        else {\n            const aesxh = aesx * 0.5;\n            const aesyh = aesy * 0.5;\n            const aex0 = aex - aesxh;\n            const aey0 = aey - aesyh;\n            const aex1 = aex + aesxh;\n            const aey1 = aey - aesyh;\n            const aex2 = aex + aesxh;\n            const aey2 = aey + aesyh;\n            const aex3 = aex - aesxh;\n            const aey3 = aey + aesyh;\n            const x0 = a * aex0 + c * aey0;\n            const y0 = b * aex0 + d * aey0;\n            const x1 = a * aex1 + c * aey1;\n            const y1 = b * aex1 + d * aey1;\n            const x2 = a * aex2 + c * aey2;\n            const y2 = b * aex2 + d * aey2;\n            const x3 = a * aex3 + c * aey3;\n            const y3 = b * aex3 + d * aey3;\n            const x4 = Math.min(x0, x1, x2, x3) + tx;\n            const y4 = Math.min(y0, y1, y2, y3) + ty;\n            const x5 = Math.max(x0, x1, x2, x3) + tx;\n            const y5 = Math.max(y0, y1, y2, y3) + ty;\n            const ix0 = Math.floor(x4 / SIZE);\n            const iy0 = Math.floor(y4 / SIZE);\n            const ix1 = Math.ceil(x5 / SIZE);\n            const iy1 = Math.ceil(y5 / SIZE);\n            for (let ix = ix0; ix <= ix1; ++ix) {\n                for (let iy = iy0; iy <= iy1; ++iy) {\n                    const coordinate = this.toCoordinate(ix, iy);\n                    const edges = coordinateToEdges.get(coordinate);\n                    if (edges == null) {\n                        coordinateToEdges.set(coordinate, [edge]);\n                    }\n                    else {\n                        edges.push(edge);\n                    }\n                }\n            }\n        }\n    }\n    toCoordinate(ix, iy) {\n        return (ix % 1024) + (iy % 1024 << 10);\n    }\n    toGridIndex(x) {\n        return Math.round(x / SIZE);\n    }\n    find(type, x, y) {\n        let result = null;\n        let distance = 0;\n        const edges = this.edges;\n        const threshold = SIZE * SIZE;\n        for (let ix = -SIZE; ix <= SIZE; ix += SIZE) {\n            for (let iy = -SIZE; iy <= SIZE; iy += SIZE) {\n                const gix = this.toGridIndex(x + ix);\n                const giy = this.toGridIndex(y + iy);\n                const foundEdges = edges.get(this.toCoordinate(gix, giy));\n                if (foundEdges == null) {\n                    continue;\n                }\n                for (let i = 0, imax = foundEdges.length; i < imax; ++i) {\n                    const foundEdge = foundEdges[i];\n                    const acceptorEdge = foundEdge.acceptor;\n                    if ((acceptorEdge.type & type) === 0) {\n                        continue;\n                    }\n                    const size = acceptorEdge.size;\n                    const sx = size.x;\n                    const sy = size.y;\n                    if (sx === 0 && sy === 0) {\n                        const center = foundEdge.center;\n                        const dx = x - center.x;\n                        const dy = y - center.y;\n                        const dd = dx * dx + dy * dy;\n                        if (dd <= threshold && (result == null || dd < distance)) {\n                            result = foundEdge;\n                            distance = dd;\n                        }\n                    }\n                    else {\n                        const matrix = foundEdge.matrix;\n                        const a = matrix.a;\n                        const b = matrix.b;\n                        const c = matrix.c;\n                        const d = matrix.d;\n                        const tx = matrix.tx;\n                        const ty = matrix.ty;\n                        const det = a * d - c * b;\n                        if (0.0000001 < Math.abs(det)) {\n                            const di = 1 / det;\n                            const xtx = x - tx;\n                            const yty = y - ty;\n                            const lx = (+d * xtx - c * yty) * di;\n                            const ly = (-b * xtx + a * yty) * di;\n                            const sxh = sx * 0.5;\n                            const syh = sy * 0.5;\n                            const aex = acceptorEdge.x;\n                            const aey = acceptorEdge.y;\n                            const lx0 = aex - sxh;\n                            const ly0 = aey - syh;\n                            const lx1 = aex + sxh;\n                            const ly1 = aey + syh;\n                            const lx2 = Math.min(lx1, Math.max(lx0, lx));\n                            const ly2 = Math.min(ly1, Math.max(ly0, ly));\n                            const x0 = a * lx2 + c * ly2 + tx;\n                            const y0 = b * lx2 + d * ly2 + ty;\n                            const dx = x - x0;\n                            const dy = y - y0;\n                            const dd = dx * dx + dy * dy;\n                            if (dd <= threshold && (result == null || dd < distance)) {\n                                result = foundEdge;\n                                result.x = lx2;\n                                result.y = ly2;\n                                result.local.set(x0, y0);\n                                distance = dd;\n                            }\n                        }\n                        else {\n                            const center = foundEdge.center;\n                            const dx = x - center.x;\n                            const dy = y - center.y;\n                            const dd = dx * dx + dy * dy;\n                            if (dd <= threshold && (result == null || dd < distance)) {\n                                result = foundEdge;\n                                distance = dd;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    findAll(type, x, y, range, limit, result) {\n        const edges = this.edges;\n        range = Math.ceil(range / SIZE) * SIZE;\n        const threshold = range * range;\n        const work = this._work;\n        work.clear();\n        this.findAllS1(type, x, y, 0, 0, edges, threshold, work);\n        for (let ir = SIZE; ir <= range && work.size < limit; ir += SIZE) {\n            this.findAllS2(type, x, y, edges, threshold, ir, work);\n        }\n        let iresult = -1;\n        work.forEach((found) => {\n            result[++iresult] = found;\n        });\n        result.length = work.size;\n        result.sort(this.compare);\n        return result;\n    }\n    findAllS2(type, x, y, edges, threshold, radius, result) {\n        for (let dx = -radius; dx <= radius; dx += SIZE) {\n            this.findAllS1(type, x, y, dx, -radius, edges, threshold, result);\n            this.findAllS1(type, x, y, dx, +radius, edges, threshold, result);\n        }\n        for (let dy = -radius + SIZE, iymax = radius - SIZE; dy <= iymax; dy += SIZE) {\n            this.findAllS1(type, x, y, -radius, dy, edges, threshold, result);\n            this.findAllS1(type, x, y, +radius, dy, edges, threshold, result);\n        }\n    }\n    findAllS1(type, x, y, dx, dy, edges, threshold, result) {\n        const gix = this.toGridIndex(x + dx);\n        const giy = this.toGridIndex(y + dy);\n        const foundEdges = edges.get(this.toCoordinate(gix, giy));\n        if (foundEdges) {\n            for (let i = 0, imax = foundEdges.length; i < imax; ++i) {\n                const foundEdge = foundEdges[i];\n                if (foundEdge.acceptor.type & type) {\n                    const foundEdgeLocal = foundEdge.local;\n                    const sx = x - foundEdgeLocal.x;\n                    const sy = y - foundEdgeLocal.y;\n                    const sd = sx * sx + sy * sy;\n                    if (sd <= threshold) {\n                        foundEdge.distance = sd;\n                        result.add(foundEdge);\n                    }\n                }\n            }\n        }\n    }\n    compare(a, b) {\n        const ad = a.distance;\n        const bd = b.distance;\n        return ad < bd ? -1 : ad > bd ? +1 : 0;\n    }\n    clear() {\n        this._edges = undefined;\n    }\n}\n//# sourceMappingURL=e-tool-shape-acceptor-edge.js.map","import { DApplications, DControllers, EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeConnectorLine, EShapePointsMarkerType, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nimport { EToolShapeAcceptorEdge } from \"./e-tool-shape-acceptor-edge\";\nexport const EToolShapeCreateLineConnectorPhase = {\n    OFF: -1,\n    TAIL: 0,\n    HEAD: 1,\n    DONE: 2\n};\nexport class EToolShapeCreateLineConnector extends EToolImpl {\n    constructor(options) {\n        super();\n        this._options = options;\n        this._selection = options.selection;\n        this._diagram = options.diagram;\n        this._edge = new EToolShapeAcceptorEdge(options.diagram, false);\n        this._newShape = options.newShape || (() => this.newShape());\n        this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n        this._work = new Point();\n        this._onDownBound = (e) => {\n            this.onDown(e);\n        };\n        this._onMoveBound = (e) => {\n            this.onMove(e);\n        };\n        this._onUpBound = (e) => {\n            this.onUp(e);\n        };\n        this._onKeyDownBound = (e) => {\n            this.onKeyDown(e);\n        };\n        this._onSetBound = (canvas) => {\n            this.onSet(canvas);\n        };\n        this._onUnsetBound = (canvas) => {\n            this.onUnset(canvas);\n        };\n    }\n    onActivate() {\n        this._phase = EToolShapeCreateLineConnectorPhase.TAIL;\n        const diagram = this._diagram;\n        const layer = DApplications.getLayer(diagram);\n        if (layer) {\n            const interactionManager = layer.renderer.plugins.interaction;\n            diagram.on(UtilPointerEvent.down, this._onDownBound);\n            diagram.on(UtilPointerEvent.move, this._onMoveBound);\n            const onUpBound = this._onUpBound;\n            interactionManager.on(UtilPointerEvent.up, onUpBound);\n            interactionManager.on(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.on(UtilPointerEvent.cancel, onUpBound);\n            diagram.on(\"keydown\", this._onKeyDownBound);\n            diagram.on(\"set\", this._onSetBound);\n            diagram.on(\"unset\", this._onUnsetBound);\n        }\n        this._edge.begin(diagram.canvas, null);\n        const selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    }\n    onDeactivate() {\n        const diagram = this._diagram;\n        const layer = DApplications.getLayer(diagram);\n        if (layer) {\n            const interactionManager = layer.renderer.plugins.interaction;\n            diagram.off(UtilPointerEvent.down, this._onDownBound);\n            diagram.off(UtilPointerEvent.move, this._onMoveBound);\n            const onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n            diagram.off(\"keydown\", this._onKeyDownBound);\n            diagram.off(\"set\", this._onSetBound);\n            diagram.off(\"unset\", this._onUnsetBound);\n        }\n        this._edge.end();\n        const selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n        const connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n    }\n    onSet(canvas) {\n        this._edge.begin(canvas, null);\n    }\n    onUnset(canvas) {\n        this._edge.end();\n        const connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        this._phase = EToolShapeCreateLineConnectorPhase.TAIL;\n    }\n    onDown(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        switch (this._phase) {\n            case EToolShapeCreateLineConnectorPhase.OFF:\n                break;\n            case EToolShapeCreateLineConnectorPhase.TAIL:\n                if (this.onTail(e)) {\n                    this._phase = EToolShapeCreateLineConnectorPhase.HEAD;\n                }\n                break;\n            case EToolShapeCreateLineConnectorPhase.HEAD:\n                if (this.onHead(e)) {\n                    this._phase = EToolShapeCreateLineConnectorPhase.DONE;\n                }\n                break;\n            case EToolShapeCreateLineConnectorPhase.DONE:\n                break;\n        }\n    }\n    onMove(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        switch (this._phase) {\n            case EToolShapeCreateLineConnectorPhase.OFF:\n                break;\n            case EToolShapeCreateLineConnectorPhase.TAIL:\n                this.onTail(e);\n                break;\n            case EToolShapeCreateLineConnectorPhase.HEAD:\n                this.onHead(e);\n                break;\n            case EToolShapeCreateLineConnectorPhase.DONE:\n                break;\n        }\n    }\n    onUp(e) {\n        this.onDone();\n    }\n    onTail(e) {\n        const diagram = this._diagram;\n        const layer = diagram.layer;\n        if (layer) {\n            let connector = this._connector;\n            const global = e.data.global;\n            const local = layer.toLocal(global, undefined, this._work);\n            const edge = this._edge.find(EShapeAcceptorEdgeType.TAIL, local.x, local.y);\n            this._edge.update(EShapeAcceptorEdgeType.TAIL, local.x, local.y);\n            if (this.isTailAccepted(connector, local, edge)) {\n                if (connector == null) {\n                    connector = this._newShape();\n                    connector.fill.alpha = 1;\n                    this._connector = connector;\n                    connector.attach(layer);\n                }\n                this.onTailAccepted(connector, local, edge);\n                DApplications.update(diagram);\n                return true;\n            }\n            else {\n                if (connector != null) {\n                    this.onTailUnaccepted(connector, local);\n                    DApplications.update(diagram);\n                    return false;\n                }\n            }\n        }\n        return false;\n    }\n    isDanglingEdgeAllowed() {\n        var _a;\n        return (_a = this._options.dangling) !== null && _a !== void 0 ? _a : false;\n    }\n    isTailAccepted(connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    }\n    getTailType() {\n        return EShapePointsMarkerType.CIRCLE;\n    }\n    onTailAccepted(connector, local, edge) {\n        connector.points.marker.tail.type = this.getTailType();\n        if (edge != null) {\n            connector.edge.tail.set(edge.shape, edge.id, edge.x, edge.y, 0, edge.local.x, edge.local.y, undefined, undefined, edge.acceptor.side);\n            connector.edge.head.local.copyFrom(edge.local);\n        }\n        else {\n            connector.edge.tail.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n            connector.edge.head.local.copyFrom(local);\n        }\n    }\n    onTailUnaccepted(connector, local) {\n        connector.points.marker.tail.type = EShapePointsMarkerType.NONE;\n        connector.edge.tail.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        connector.edge.head.local.copyFrom(local);\n    }\n    newShape() {\n        const result = new EShapeConnectorLine();\n        result.fill.alpha = 1;\n        return result;\n    }\n    onHead(e) {\n        const diagram = this._diagram;\n        const layer = diagram.layer;\n        if (layer) {\n            const connector = this._connector;\n            if (connector) {\n                const global = e.data.global;\n                const local = layer.toLocal(global, undefined, this._work);\n                const edge = this._edge.find(EShapeAcceptorEdgeType.HEAD, local.x, local.y);\n                this._edge.update(EShapeAcceptorEdgeType.HEAD, local.x, local.y);\n                if (this.isHeadAccepted(connector, local, edge)) {\n                    this.onHeadAccepted(connector, local, edge);\n                    DApplications.update(diagram);\n                    return true;\n                }\n                else {\n                    this.onHeadUnaccepted(connector, local);\n                    DApplications.update(diagram);\n                    return false;\n                }\n            }\n        }\n        return false;\n    }\n    isHeadAccepted(connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return !this.isSameAcceptor(connector.edge.tail.acceptor, edge);\n        }\n    }\n    isSameAcceptor(a, b) {\n        return a.shape === b.shape && a.edge === b.id && a.x === b.x && a.y === b.y;\n    }\n    getHeadType() {\n        return EShapePointsMarkerType.TRIANGLE;\n    }\n    onHeadAccepted(connector, local, edge) {\n        connector.points.marker.head.type = this.getHeadType();\n        if (edge != null) {\n            connector.edge.head.set(edge.shape, edge.id, edge.x, edge.y, 10, edge.local.x, edge.local.y, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.head.set(null, null, null, null, 10, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    }\n    onHeadUnaccepted(connector, local) {\n        connector.points.marker.head.type = EShapePointsMarkerType.NONE;\n        connector.edge.head.set(null, null, null, null, 0, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n    }\n    onDone() {\n        if (this._phase === EToolShapeCreateLineConnectorPhase.DONE) {\n            this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n            const connector = this._connector;\n            if (connector) {\n                this._connector = undefined;\n                const diagram = this._diagram;\n                const layer = diagram.layer;\n                if (layer) {\n                    connector.edge.attach();\n                    DControllers.getCommandController().push(new ECommandShapeCreate([connector], layer, this._selection, true));\n                }\n                else {\n                    connector.detach();\n                    connector.destroy();\n                }\n                this.emit(\"done\", this);\n            }\n        }\n    }\n    onCancel() {\n        const connector = this._connector;\n        if (connector != null) {\n            this._connector = undefined;\n            connector.detach();\n            connector.destroy();\n        }\n        if (this._phase !== EToolShapeCreateLineConnectorPhase.OFF) {\n            this._phase = EToolShapeCreateLineConnectorPhase.OFF;\n            this.emit(\"cancel\", this);\n        }\n    }\n    onKeyDown(e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onCancel();\n        }\n    }\n}\n//# sourceMappingURL=e-tool-shape-create-line-connector.js.map","import { EShapeConnectorElbow } from \"@wcardinal/wcardinal-ui\";\nimport { EToolShapeCreateLineConnector } from \"./e-tool-shape-create-line-connector\";\nexport class EToolShapeCreateElbowConnector extends EToolShapeCreateLineConnector {\n    newShape() {\n        const result = new EShapeConnectorElbow();\n        result.fill.alpha = 1;\n        return result;\n    }\n}\n//# sourceMappingURL=e-tool-shape-create-elbow-connector.js.map","import { createLine, DApplications, DControllers, EShapeDefaults, EShapePointsStyle, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nexport class EToolShapeCreateLine extends EToolImpl {\n    constructor(options) {\n        super();\n        this._options = options;\n        this._selection = options.selection;\n        this._diagram = options.diagram;\n        this._isNewPoint = false;\n        this._onDownPoint = new Point();\n        this._onMovePoint = new Point();\n        this._onDownBound = (e) => {\n            this.onDown(e);\n        };\n        this._onMoveBound = (e) => {\n            this.onMove(e);\n        };\n        this._onDblClickBound = () => {\n            this.onDblClick();\n        };\n        this._onKeydownBound = (e) => {\n            this.onKeydown(e);\n        };\n    }\n    onActivate() {\n        const diagram = this._diagram;\n        diagram.on(UtilPointerEvent.down, this._onDownBound);\n        diagram.on(UtilPointerEvent.move, this._onMoveBound);\n        diagram.on(\"dblclick\", this._onDblClickBound);\n        diagram.on(\"keydown\", this._onKeydownBound);\n        const selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    }\n    onDeactivate() {\n        const diagram = this._diagram;\n        diagram.off(UtilPointerEvent.down, this._onDownBound);\n        diagram.off(UtilPointerEvent.move, this._onMoveBound);\n        diagram.off(\"dblclick\", this._onDblClickBound);\n        diagram.off(\"keydown\", this._onKeydownBound);\n        this.onCancel();\n        const selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n    }\n    onDown(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const diagram = this._diagram;\n        const canvas = diagram.canvas;\n        const layer = diagram.layer;\n        if (canvas && layer) {\n            this._isNewPoint = true;\n            const line = this._line;\n            if (line == null) {\n                const onDownPoint = this._onDownPoint;\n                canvas.toLocal(e.data.global, undefined, onDownPoint);\n                diagram.snapper.toSnapped(onDownPoint, onDownPoint);\n                layer.transform.localTransform.applyInverse(onDownPoint, onDownPoint);\n                const newLine = createLine([onDownPoint.x, onDownPoint.y], [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n                newLine.attach(layer);\n                this._line = newLine;\n            }\n        }\n    }\n    onMove(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const line = this._line;\n        if (line) {\n            const diagram = this._diagram;\n            const canvas = diagram.canvas;\n            if (canvas) {\n                const values = line.points.values;\n                if (this._isNewPoint) {\n                    this._isNewPoint = false;\n                    values.push(0, 0);\n                }\n                const onMovePoint = this._onMovePoint;\n                canvas.toLocal(e.data.global, undefined, onMovePoint);\n                diagram.snapper.toSnapped(onMovePoint, onMovePoint);\n                const parent = line.parent;\n                if (parent) {\n                    parent.transform.localTransform.applyInverse(onMovePoint, onMovePoint);\n                }\n                const position = line.transform.position;\n                const x = onMovePoint.x - position.x;\n                const y = onMovePoint.y - position.y;\n                const length = values.length;\n                if (originalEvent.shiftKey && 4 <= length) {\n                    const px = values[length - 4];\n                    const py = values[length - 3];\n                    const dx = x - px;\n                    const dy = y - py;\n                    const dangle = Math.PI * 0.25;\n                    const angle = Math.round(Math.atan2(dy, dx) / dangle) * dangle;\n                    const d = Math.sqrt(dx * dx + dy * dy) | 0;\n                    values[length - 2] = px + d * Math.cos(angle);\n                    values[length - 1] = py + d * Math.sin(angle);\n                }\n                else {\n                    values[length - 2] = x | 0;\n                    values[length - 1] = y | 0;\n                }\n                line.points.values = values;\n                DApplications.update(diagram);\n            }\n        }\n    }\n    toValues(line) {\n        const position = line.transform.position;\n        const px = position.x;\n        const py = position.y;\n        const values = line.points.values;\n        const result = [];\n        let prevx = NaN;\n        let prevy = NaN;\n        for (let i = 0, imax = values.length; i < imax; i += 2) {\n            const x = values[i + 0];\n            const y = values[i + 1];\n            if (prevx !== x || prevy !== y) {\n                result.push(px + x, py + y);\n                prevx = x;\n                prevy = y;\n            }\n        }\n        return result;\n    }\n    add(values) {\n        const diagram = this._diagram;\n        const layer = diagram.layer;\n        if (layer && 4 <= values.length) {\n            const newLine = createLine(values, [], EShapeDefaults.STROKE_WIDTH, EShapePointsStyle.NONE);\n            newLine.attach(layer);\n            DControllers.getCommandController().push(new ECommandShapeCreate([newLine], layer, this._selection, true));\n        }\n    }\n    onDblClick() {\n        const line = this._line;\n        if (line) {\n            this._line = undefined;\n            line.detach();\n            this.add(this.toValues(line));\n            DApplications.update(this._diagram);\n            this.emit(\"done\", this);\n        }\n    }\n    onCancel() {\n        const line = this._line;\n        if (line) {\n            line.points.values.length -= 2;\n            this.onDblClick();\n        }\n    }\n    onKeydown(e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onCancel();\n        }\n    }\n}\n//# sourceMappingURL=e-tool-shape-create-line.js.map","import { DApplications, DControllers, toResized, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"../command/e-command-shape-create\";\nimport { EToolImpl } from \"./e-tool-impl\";\nexport class EToolShapeCreate extends EToolImpl {\n    constructor(selection, diagram) {\n        super();\n        this._selection = selection;\n        this._diagram = diagram;\n        this._applicationLayer = null;\n        this._onDownPoint = new Point();\n        this._onMovePoint = new Point();\n        this._shape = null;\n        this._creator = undefined;\n        this._onDownBound = (e) => {\n            this.onDown(e);\n        };\n        this._onMoveBound = (e) => {\n            this.onMove(e);\n        };\n        this._onUpBound = (e) => {\n            this.onUp(e);\n        };\n    }\n    get shape() {\n        return this._creator;\n    }\n    set shape(creator) {\n        this._creator = creator;\n    }\n    onActivate() {\n        this._diagram.on(UtilPointerEvent.down, this._onDownBound);\n    }\n    onDeactivate() {\n        this._diagram.off(UtilPointerEvent.down, this._onDownBound);\n        this.onDone();\n    }\n    onDown(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const selection = this._selection;\n        const diagram = this._diagram;\n        const diagramLayer = diagram.layer;\n        const creator = this._creator;\n        if (diagramLayer != null && creator != null && this._shape == null) {\n            const onDownPoint = diagramLayer.toLocal(e.data.global, undefined, this._onDownPoint);\n            diagram.snapper.toSnapped(onDownPoint, onDownPoint);\n            this._onMovePoint.copyFrom(onDownPoint);\n            const shape = (this._shape = creator());\n            toResized(shape, onDownPoint, onDownPoint, originalEvent.ctrlKey, originalEvent.shiftKey);\n            shape.attach(diagramLayer);\n            selection.modifier.disallow();\n            DControllers.getCommandController().push(new ECommandShapeCreate([shape], diagramLayer, this._selection, true));\n            const oldApplicationLayer = this._applicationLayer;\n            if (oldApplicationLayer) {\n                this._applicationLayer = null;\n                const oldInteractionManager = oldApplicationLayer.renderer.plugins.interaction;\n                oldInteractionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                const onUpBound = this._onUpBound;\n                oldInteractionManager.off(UtilPointerEvent.up, onUpBound);\n                oldInteractionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                oldInteractionManager.off(UtilPointerEvent.cancel, onUpBound);\n            }\n            const newApplicationLayer = DApplications.getLayer(diagram);\n            if (newApplicationLayer) {\n                this._applicationLayer = newApplicationLayer;\n                const newInteractionManager = newApplicationLayer.renderer.plugins.interaction;\n                newInteractionManager.on(UtilPointerEvent.move, this._onMoveBound);\n                const onUpBound = this._onUpBound;\n                newInteractionManager.on(UtilPointerEvent.up, onUpBound);\n                newInteractionManager.on(UtilPointerEvent.upoutside, onUpBound);\n                newInteractionManager.on(UtilPointerEvent.cancel, onUpBound);\n            }\n        }\n    }\n    onMove(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const shape = this._shape;\n        if (shape) {\n            const diagram = this._diagram;\n            const diagramLayer = diagram.layer;\n            const selection = this._selection;\n            const applicationLayer = this._applicationLayer;\n            if (diagramLayer && applicationLayer) {\n                applicationLayer.lock();\n                const onDownPoint = this._onDownPoint;\n                const onMovePoint = diagramLayer.toLocal(e.data.global, undefined, this._onMovePoint);\n                diagram.snapper.toSnapped(onMovePoint, onMovePoint);\n                toResized(shape, onDownPoint, onMovePoint, originalEvent.ctrlKey, originalEvent.shiftKey);\n                selection.update(\"PROPERTY\");\n                applicationLayer.unlock();\n                applicationLayer.update();\n            }\n        }\n    }\n    onUp(e) {\n        this.onDone();\n    }\n    onDone() {\n        const shape = this._shape;\n        if (shape) {\n            this._shape = null;\n            const selection = this._selection;\n            const onDownPoint = this._onDownPoint;\n            const onMovePoint = this._onMovePoint;\n            const applicationLayer = this._applicationLayer;\n            if (applicationLayer) {\n                this._applicationLayer = null;\n                const interactionManager = applicationLayer.renderer.plugins.interaction;\n                interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n                const onUpBound = this._onUpBound;\n                interactionManager.off(UtilPointerEvent.up, onUpBound);\n                interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n                interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n                applicationLayer.lock();\n                if (onDownPoint.x === onMovePoint.x && onDownPoint.y === onMovePoint.y) {\n                    onMovePoint.set(onDownPoint.x + 100, onDownPoint.y + 100);\n                    toResized(shape, onDownPoint, onMovePoint, false, false);\n                }\n                selection.modifier.allow();\n                selection.update(\"PROPERTY\");\n                applicationLayer.unlock();\n                applicationLayer.update();\n            }\n            this.emit(\"done\", this);\n        }\n    }\n}\n//# sourceMappingURL=e-tool-shape-create.js.map","import { EShapeCapability } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nexport class EToolShapeEditLineHitArea extends Rectangle {\n    constructor(parent) {\n        super();\n        this._parent = parent;\n        this._capability = EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n    }\n    get capability() {\n        return this._capability;\n    }\n    set capability(capability) {\n        this._capability = capability;\n    }\n    contains(x, y) {\n        const parent = this._parent;\n        if (parent.isEditing()) {\n            return true;\n        }\n        const points = parent.points;\n        const pointsClosed = parent.closed;\n        const capability = this._capability;\n        const hasTail = !!(capability & EShapeCapability.LINE_TAIL);\n        const hasHead = !!(capability & EShapeCapability.LINE_HEAD);\n        // Anchors\n        const s = parent.getAnchorSize() * 2;\n        const thresholdLine = s * s;\n        const thresholdAnchor = thresholdLine * 2;\n        for (let i = hasTail ? 0 : 1, imax = points.length - (hasHead ? 0 : 1); i < imax; ++i) {\n            const point = points[i];\n            const dx = point.x - x;\n            const dy = point.y - y;\n            const d = dx * dx + dy * dy;\n            if (d < thresholdAnchor) {\n                parent.setLastHitAnchor(i);\n                return true;\n            }\n        }\n        // Lines\n        for (let i = 0, imax = points.length - 1; i < imax; ++i) {\n            const p0 = points[i + 0];\n            const p1 = points[i + 1];\n            const hitPoint = this.calcHitPoint(x, y, p0.x, p0.y, p1.x, p1.y, thresholdLine);\n            if (0 <= hitPoint) {\n                parent.setLastHitSegment(i, hitPoint);\n                return true;\n            }\n        }\n        if (hasTail && hasHead && pointsClosed) {\n            const p0 = points[points.length - 1];\n            const p1 = points[0];\n            const hitPoint = this.calcHitPoint(x, y, p0.x, p0.y, p1.x, p1.y, thresholdLine);\n            if (0 <= hitPoint) {\n                parent.setLastHitSegment(points.length - 1, hitPoint);\n                return true;\n            }\n        }\n        parent.setLastHitSegment(-1, -1);\n        return false;\n    }\n    calcHitPoint(x, y, p0x, p0y, p1x, p1y, threshold) {\n        const d0x = p1x - p0x;\n        const d0y = p1y - p0y;\n        const d1x = x - p0x;\n        const d1y = y - p0y;\n        const a = d0x * d0x + d0y * d0y;\n        const b = d0x * d1x + d0y * d1y;\n        const c = d1x * d1x + d1y * d1y;\n        if (0.0001 < a) {\n            const t = Math.max(0, Math.min(1, b / a));\n            const d = a * t * t - 2 * b * t + c;\n            if (d < threshold) {\n                return t;\n            }\n        }\n        return -1;\n    }\n}\n//# sourceMappingURL=e-tool-shape-edit-line-base-hit-area.js.map","import { DApplications, DControllers, EShapeCapability, EShapePointsFormatters, EShapePointsStyle, UtilKeyboardEvent, UtilPointerEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Graphics, Matrix, Point } from \"pixi.js\";\nimport { ECommandShapeReplaceOne } from \"../command/e-command-shape-replace-one\";\nimport { EToolShapeEditLineHitArea } from \"./e-tool-shape-edit-line-base-hit-area\";\nexport class EToolShapeEditLineBase extends Graphics {\n    constructor(options) {\n        super();\n        this._options = options;\n        this._selection = options.selection;\n        this._diagram = options.diagram;\n        this._onDownPoint = new Point();\n        this._points = [];\n        this._pointsStyle = EShapePointsStyle.NONE;\n        this._onMovePoint = new Point();\n        this._isEditing = false;\n        this._isEdited = false;\n        this._isActive = false;\n        this._shape = null;\n        this._capability = EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n        this._scaleBound = 1;\n        this._scaleBoundInverse = 1;\n        this._lastHitAnchor = -1;\n        this._lastHitSegment = -1;\n        this._lastHitSegmentPosition = -1;\n        this._targetCopy = new Point();\n        this._target = null;\n        this._targetIndex = -1;\n        this._onDownBound = (e) => {\n            this.onDown(e);\n        };\n        this._onMoveBound = (e) => {\n            this.onMove(e);\n        };\n        this._onUpBound = (e) => {\n            this.onUp(e);\n        };\n        this._onKeydownBound = (e) => {\n            this.onKeydown(e);\n        };\n        this._onSetBound = (canvas) => {\n            this.onSet(canvas);\n        };\n        this._onUnsetBound = (canvas) => {\n            this.onUnset(canvas);\n        };\n        this.cursor = \"grab\";\n        this.interactive = true;\n        this.hitArea = new EToolShapeEditLineHitArea(this);\n        this._unformatted = {\n            length: 0,\n            plength: 0,\n            values: [],\n            segments: [],\n            style: EShapePointsStyle.NONE\n        };\n        this._formatted = {\n            length: 0,\n            plength: 0,\n            values: [],\n            segments: [],\n            style: EShapePointsStyle.NONE\n        };\n    }\n    onPrerender() {\n        const scale0 = this.getParentScale();\n        const scale1 = this._scaleBound;\n        if (0.001 < Math.abs(scale0 - scale1)) {\n            this._scaleBound = scale0;\n            this._scaleBoundInverse = 1 / scale0;\n            this.reshape();\n        }\n    }\n    getParentScale() {\n        const parent = this.parent;\n        return parent != null ? parent.scale.y : 1;\n    }\n    render(renderer) {\n        this.onPrerender();\n        super.render(renderer);\n    }\n    getAnchorSize() {\n        return 6 * this._scaleBoundInverse;\n    }\n    activate() {\n        if (!this._isActive) {\n            this._isActive = true;\n            this.onActivate();\n        }\n    }\n    onActivate() {\n        this._isEditing = false;\n        this._isEdited = false;\n        this._target = null;\n        this._targetIndex = -1;\n        const diagram = this._diagram;\n        const layer = DApplications.getLayer(diagram);\n        if (layer) {\n            const interactionManager = layer.renderer.plugins.interaction;\n            diagram.on(UtilPointerEvent.down, this._onDownBound);\n            interactionManager.on(UtilPointerEvent.move, this._onMoveBound);\n            const onUpBound = this._onUpBound;\n            interactionManager.on(UtilPointerEvent.up, onUpBound);\n            interactionManager.on(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.on(UtilPointerEvent.cancel, onUpBound);\n            diagram.on(\"keydown\", this._onKeydownBound);\n            diagram.on(\"set\", this._onSetBound);\n            diagram.on(\"unset\", this._onUnsetBound);\n        }\n        const selection = this._selection;\n        selection.modifier.disallow();\n        selection.updateModifier();\n    }\n    deactivate() {\n        if (this._isActive) {\n            this._isActive = false;\n            this.onDeactivate();\n        }\n    }\n    onDeactivate() {\n        this._isEditing = false;\n        this._isEdited = false;\n        this._target = null;\n        this._targetIndex = -1;\n        this.shape = null;\n        const diagram = this._diagram;\n        const layer = DApplications.getLayer(diagram);\n        if (layer) {\n            const interactionManager = layer.renderer.plugins.interaction;\n            diagram.off(UtilPointerEvent.down, this._onDownBound);\n            interactionManager.off(UtilPointerEvent.move, this._onMoveBound);\n            const onUpBound = this._onUpBound;\n            interactionManager.off(UtilPointerEvent.up, onUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onUpBound);\n            diagram.off(\"keydown\", this._onKeydownBound);\n            diagram.off(\"set\", this._onSetBound);\n            diagram.off(\"unset\", this._onUnsetBound);\n        }\n        const selection = this._selection;\n        selection.modifier.allow();\n        selection.updateModifier();\n    }\n    onSet(canvas) {\n        // DO NOTHING\n    }\n    onUnset(canvas) {\n        this.onCancel();\n    }\n    isActive() {\n        return this._isActive;\n    }\n    isEditing() {\n        return this._isEditing;\n    }\n    get points() {\n        return this._points;\n    }\n    get closed() {\n        return (this._pointsStyle & EShapePointsStyle.CLOSED) !== 0;\n    }\n    get shape() {\n        return this._shape;\n    }\n    set shape(shape) {\n        var _a, _b;\n        if (this._shape !== shape) {\n            this._shape = shape;\n            const capability = this.toCapability(shape);\n            this.hitArea.capability = capability;\n            this._capability = capability;\n            this._isEdited = false;\n            if (shape == null) {\n                this._points = [];\n                this._pointsStyle = EShapePointsStyle.NONE;\n                this._formatter = undefined;\n                const parent = this.parent;\n                if (parent) {\n                    parent.removeChild(this);\n                    DApplications.update(this);\n                }\n            }\n            else {\n                const points = shape.points;\n                if (points) {\n                    shape.updateTransform();\n                    this._points = this.toPoints(shape, points, this.toTransform(shape));\n                    const pointsStyle = points.style;\n                    this._pointsStyle = pointsStyle;\n                    this._formatter =\n                        (_a = points.formatter) !== null && _a !== void 0 ? _a : (_b = EShapePointsFormatters.find(pointsStyle)) === null || _b === void 0 ? void 0 : _b.formatter;\n                }\n                else {\n                    this._points = [];\n                    this._pointsStyle = EShapePointsStyle.NONE;\n                    this._formatter = undefined;\n                }\n                this.reshape();\n                const canvas = this._diagram.canvas;\n                if (canvas) {\n                    canvas.addChild(this);\n                }\n            }\n        }\n    }\n    toTransform(shape) {\n        var _a;\n        const result = ((_a = this._workTransform) !== null && _a !== void 0 ? _a : (this._workTransform = new Matrix()));\n        result.copyFrom(shape.transform.internalTransform);\n        // If the layer this shape belongs to has a non-zero position,\n        // we have to take that into consideration.\n        const parent = shape.root.parent;\n        if (parent) {\n            result.prepend(parent.transform.localTransform);\n        }\n        return result;\n    }\n    toPoints(shape, points, transform) {\n        const result = [];\n        const values = points.values;\n        for (let i = 0, imax = values.length; i < imax; i += 2) {\n            const point = new Point(values[i + 0], values[i + 1]);\n            result.push(transform.apply(point, point));\n        }\n        return result;\n    }\n    setLastHitAnchor(index) {\n        if (this._lastHitAnchor !== index || this._lastHitSegment !== -1) {\n            this._lastHitAnchor = index;\n            this._lastHitSegment = -1;\n            this._lastHitSegmentPosition = -1;\n            this.reshape();\n            DApplications.update(this);\n        }\n    }\n    setLastHitSegment(index, position) {\n        this._lastHitSegmentPosition = position;\n        if (this._lastHitAnchor !== -1 || this._lastHitSegment !== index) {\n            this._lastHitAnchor = -1;\n            this._lastHitSegment = index;\n            this.reshape();\n            DApplications.update(this);\n        }\n    }\n    reshape() {\n        const graphics = this;\n        const points = this._points;\n        const pointsLength = points.length;\n        const pointsStyle = this._pointsStyle;\n        const formatter = this._formatter;\n        const pointsClosed = !!(pointsStyle & EShapePointsStyle.CLOSED);\n        const capability = this._capability;\n        const hasTail = !!(capability & EShapeCapability.LINE_TAIL);\n        const hasHead = !!(capability & EShapeCapability.LINE_HEAD);\n        graphics.clear();\n        if (0 < pointsLength) {\n            const s = this.getAnchorSize();\n            const hs = s * 0.5;\n            const color = 0x1e87f0;\n            const colorHit = 0xf36f27;\n            const colorFormatted = 0xaaaaaa;\n            const alpha = 1;\n            const alphaFormatted = 0.5;\n            const anchor = this._lastHitAnchor;\n            const segment = this._lastHitSegment;\n            // Formatted\n            if (formatter != null) {\n                const unformatted = this._unformatted;\n                const uvalues = unformatted.values;\n                const usegments = unformatted.segments;\n                for (let i = 0, j = 0; i < pointsLength; i += 1, j += 2) {\n                    const point = points[i];\n                    uvalues[j] = point.x;\n                    uvalues[j + 1] = point.y;\n                }\n                const formatted = this._formatted;\n                formatter(pointsLength, uvalues, usegments, pointsStyle, formatted);\n                const fvalues = formatted.values;\n                graphics.lineStyle(hs, colorFormatted, alphaFormatted);\n                if (0 < fvalues.length) {\n                    graphics.moveTo(fvalues[0], fvalues[1]);\n                    for (let i = 2, imax = fvalues.length; i < imax; i += 2) {\n                        graphics.lineTo(fvalues[i], fvalues[i + 1]);\n                    }\n                }\n            }\n            // Line\n            for (let i = 0, imax = pointsLength - 1; i < imax; ++i) {\n                const p0 = points[i];\n                const p1 = points[i + 1];\n                const c = segment === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.moveTo(p0.x, p0.y);\n                graphics.lineTo(p1.x, p1.y);\n            }\n            if (hasTail && hasHead && pointsClosed) {\n                const i = points.length - 1;\n                const p0 = points[i];\n                const p1 = points[0];\n                const c = segment === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.moveTo(p0.x, p0.y);\n                graphics.lineTo(p1.x, p1.y);\n            }\n            // Anchors\n            const targetIndex = this._targetIndex;\n            for (let i = hasTail ? 0 : 1, imax = pointsLength - (hasHead ? 0 : 1); i < imax; ++i) {\n                const point = points[i];\n                const c = anchor === i || targetIndex === i ? colorHit : color;\n                graphics.lineStyle(hs, c, alpha);\n                graphics.beginFill(c, alpha);\n                graphics.drawRect(point.x - hs, point.y - hs, s, s);\n                graphics.endFill();\n            }\n        }\n    }\n    replace() {\n        const oldShape = this._shape;\n        const points = this._points;\n        if (oldShape && oldShape.parent && 2 <= points.length) {\n            const values = this.toValues(points, oldShape);\n            if (2 < values.length) {\n                const newShape = this.newShape(values, [], this._pointsStyle, oldShape);\n                DControllers.getCommandController().push(new ECommandShapeReplaceOne(newShape, oldShape, oldShape.parent, this._selection));\n            }\n        }\n    }\n    toValues(points, shape) {\n        shape.updateTransform();\n        const transform = this.toTransform(shape).invert();\n        const result = [];\n        const a = transform.a;\n        const b = transform.b;\n        const c = transform.c;\n        const d = transform.d;\n        const tx = transform.tx;\n        const ty = transform.ty;\n        let pprevx = NaN;\n        let pprevy = NaN;\n        for (let i = 0, imax = points.length; i < imax; ++i) {\n            const point = points[i];\n            const px = point.x;\n            const py = point.y;\n            if (pprevx !== px || pprevy !== py) {\n                const x = a * px + c * py + tx;\n                const y = b * px + d * py + ty;\n                result.push(x, y);\n                pprevx = x;\n                pprevy = y;\n            }\n        }\n        return result;\n    }\n    onDown(e) {\n        if (e.target === this) {\n            const originalEvent = e.data.originalEvent;\n            if (originalEvent.altKey) {\n                return;\n            }\n            const diagram = this._diagram;\n            const canvas = diagram.canvas;\n            if (canvas != null && !this._isEditing) {\n                const lastHitAnchor = this._lastHitAnchor;\n                const points = this._points;\n                const onDownPoint = this._onDownPoint;\n                if (0 <= lastHitAnchor && lastHitAnchor < points.length) {\n                    this._isEditing = true;\n                    canvas.toLocal(e.data.global, undefined, onDownPoint);\n                    this._target = points[lastHitAnchor];\n                    this._targetCopy.copyFrom(this._target);\n                    this._targetIndex = lastHitAnchor;\n                    this.onTargetChange(lastHitAnchor, onDownPoint);\n                    this.reshape();\n                    DApplications.update(this);\n                }\n                else {\n                    const lastHitSegment = this._lastHitSegment;\n                    if (0 <= lastHitSegment) {\n                        this._lastHitSegment = -1;\n                        this._isEditing = true;\n                        canvas.toLocal(e.data.global, undefined, onDownPoint);\n                        const p0 = points[lastHitSegment + 0];\n                        const p1 = points[lastHitSegment < points.length - 1 ? lastHitSegment + 1 : 0];\n                        const t = this._lastHitSegmentPosition;\n                        const ti = 1 - t;\n                        const x = ti * p0.x + t * p1.x;\n                        const y = ti * p0.y + t * p1.y;\n                        const point = new Point(x, y);\n                        points.splice(lastHitSegment + 1, 0, point);\n                        this._target = point;\n                        this._targetCopy.copyFrom(point);\n                        this._targetIndex = lastHitSegment + 1;\n                        this.onTargetChange(this._targetIndex, onDownPoint);\n                        this.reshape();\n                        DApplications.update(this);\n                    }\n                }\n            }\n        }\n        else {\n            this.onDone();\n        }\n    }\n    onTargetChange(targetIndex, point) {\n        // DO NOTHING\n    }\n    onMove(e) {\n        if (this._isEditing) {\n            const originalEvent = e.data.originalEvent;\n            if (originalEvent.altKey) {\n                return;\n            }\n            const diagram = this._diagram;\n            const canvas = diagram.canvas;\n            const target = this._target;\n            const targetCopy = this._targetCopy;\n            if (canvas && target) {\n                this._isEdited = true;\n                const onDownPoint = this._onDownPoint;\n                const onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                target.set(targetCopy.x + onMovePoint.x - onDownPoint.x, targetCopy.y + onMovePoint.y - onDownPoint.y);\n                this.toSnapped(target, diagram, target);\n                if (originalEvent.shiftKey) {\n                    const points = this._points;\n                    const targetIndex = this._targetIndex;\n                    const previousIndex = 0 < targetIndex ? targetIndex - 1 : targetIndex + 1;\n                    if (0 <= previousIndex && previousIndex < points.length) {\n                        const previous = points[previousIndex];\n                        const dx = target.x - previous.x;\n                        const dy = target.y - previous.y;\n                        const dangle = Math.PI * 0.25;\n                        const angle = Math.round(Math.atan2(dy, dx) / dangle) * dangle;\n                        const d = Math.sqrt(dx * dx + dy * dy);\n                        target.set(previous.x + d * Math.cos(angle), previous.y + d * Math.sin(angle));\n                    }\n                }\n                this.onTargetMove(onMovePoint);\n                this.reshape();\n                DApplications.update(this);\n            }\n        }\n        else {\n            this.onTargetNotMove(e);\n        }\n    }\n    onTargetMove(point) {\n        // DO NOTHING\n    }\n    onTargetNotMove(e) {\n        // DO NOTHING\n    }\n    toSnapped(target, diagram, result) {\n        diagram.snapper.toSnapped(target, result);\n    }\n    onUp(e) {\n        if (this._isEditing) {\n            this._isEditing = false;\n            this._target = null;\n        }\n    }\n    onDone() {\n        this._isEditing = false;\n        if (this._isEdited) {\n            this._isEdited = false;\n            this.replace();\n        }\n        this.emit(\"done\", this);\n    }\n    onCancel() {\n        this._isEditing = false;\n        this._isEdited = false;\n        const parent = this.parent;\n        if (parent) {\n            parent.removeChild(this);\n            DApplications.update(this);\n        }\n        this.emit(\"cancel\", this);\n    }\n    onKeydown(e) {\n        if (UtilKeyboardEvent.isCancelKey(e)) {\n            this.onDone();\n        }\n        else if (UtilKeyboardEvent.isDeleteKey(e)) {\n            const targetIndex = this._targetIndex;\n            const points = this._points;\n            if (0 <= targetIndex && targetIndex < points.length && 2 < points.length) {\n                this._isEdited = true;\n                points.splice(targetIndex, 1);\n                if (targetIndex === points.length) {\n                    this._targetIndex -= 1;\n                    this.onTargetChange(this._targetIndex, null);\n                }\n                this.reshape();\n                DApplications.update(this);\n            }\n        }\n    }\n}\n//# sourceMappingURL=e-tool-shape-edit-line-base.js.map","import { EShapeAcceptorEdgeSide, EShapeAcceptorEdgeType, EShapeCapabilities, EShapeCapability, EShapeConnectorBodies, EShapeConnectorLine, EShapeLockPart, toPointsBoundary } from \"@wcardinal/wcardinal-ui\";\nimport { Point } from \"pixi.js\";\nimport { EToolShapeAcceptorEdge } from \"./e-tool-shape-acceptor-edge\";\nimport { EToolShapeEditLineBase } from \"./e-tool-shape-edit-line-base\";\nexport class EToolShapeEditLineConnector extends EToolShapeEditLineBase {\n    constructor(options) {\n        super(options);\n        this._edge = new EToolShapeAcceptorEdge(this._diagram, true);\n        this._work = new Point();\n    }\n    toCapability(shape) {\n        let result = EShapeCapability.NONE;\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_TAIL)) {\n            result |= EShapeCapability.LINE_TAIL;\n        }\n        if (EShapeCapabilities.contains(shape, EShapeCapability.LINE_HEAD)) {\n            result |= EShapeCapability.LINE_HEAD;\n        }\n        return result;\n    }\n    onActivate() {\n        this._edge.begin(this._diagram.canvas, this._shape);\n        this._edgeTail = undefined;\n        this._edgeHead = undefined;\n        super.onActivate();\n    }\n    onDeactivate() {\n        this._edge.end();\n        this._edgeTail = undefined;\n        this._edgeHead = undefined;\n        super.onDeactivate();\n    }\n    onTargetChange(targetIndex, point) {\n        if (targetIndex === 0) {\n            const edge = this._edge;\n            edge.show();\n            if (point != null) {\n                edge.update(EShapeAcceptorEdgeType.TAIL, point.x, point.y);\n            }\n        }\n        else if (targetIndex === this._points.length - 1) {\n            const edge = this._edge;\n            edge.show();\n            if (point != null) {\n                edge.update(EShapeAcceptorEdgeType.HEAD, point.x, point.y);\n            }\n        }\n        else {\n            this._edge.hide();\n        }\n    }\n    onTargetMove(point) {\n        const targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            this._edge.update(EShapeAcceptorEdgeType.TAIL, point.x, point.y);\n        }\n        else if (targetIndex === this._points.length - 1) {\n            this._edge.update(EShapeAcceptorEdgeType.HEAD, point.x, point.y);\n        }\n    }\n    onTargetNotMove(e) {\n        const targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            const canvas = this._diagram.canvas;\n            if (canvas) {\n                const onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                this._edge.update(EShapeAcceptorEdgeType.TAIL, onMovePoint.x, onMovePoint.y);\n            }\n        }\n        else if (targetIndex === this._points.length - 1) {\n            const canvas = this._diagram.canvas;\n            if (canvas) {\n                const onMovePoint = canvas.toLocal(e.data.global, undefined, this._onMovePoint);\n                this._edge.update(EShapeAcceptorEdgeType.HEAD, onMovePoint.x, onMovePoint.y);\n            }\n        }\n    }\n    toSnapped(target, diagram, result) {\n        const targetIndex = this._targetIndex;\n        if (targetIndex === 0) {\n            const edge = this._edge.find(EShapeAcceptorEdgeType.TAIL, target.x, target.y);\n            if (edge != null) {\n                result.copyFrom(edge.local);\n            }\n            this._edgeTail = edge;\n        }\n        else {\n            const points = this._points;\n            const pointsLength = points.length;\n            if (targetIndex === pointsLength - 1) {\n                const edge = this._edge.find(EShapeAcceptorEdgeType.HEAD, target.x, target.y);\n                if (edge != null) {\n                    result.copyFrom(edge.local);\n                }\n                this._edgeHead = edge;\n            }\n            else {\n                diagram.snapper.toSnapped(target, result);\n            }\n        }\n    }\n    toPoints(shape, points, transform) {\n        const result = [];\n        if (shape instanceof EShapeConnectorLine) {\n            const edge = shape.edge;\n            const tailLocal = edge.tail.local;\n            const headLocal = edge.head.local;\n            const transformPosition = shape.transform.position;\n            const px = transformPosition.x;\n            const py = transformPosition.y;\n            const x0 = tailLocal.x - px;\n            const y0 = tailLocal.y - py;\n            const x1 = headLocal.x - px;\n            const y1 = headLocal.y - py;\n            const tailPoint = new Point(x0, y0);\n            result.push(transform.apply(tailPoint, tailPoint));\n            const bodyValues = shape.body.values;\n            const bodyValuesLength = bodyValues.length;\n            if (0 < bodyValuesLength) {\n                const cx = (x1 + x0) * 0.5;\n                const cy = (y1 + y0) * 0.5;\n                const dx = x1 - x0;\n                const dy = y1 - y0;\n                const a = Math.atan2(dy, dx);\n                const l = Math.sqrt(dx * dx + dy * dy);\n                const c = Math.cos(a) * l;\n                const s = Math.sin(a) * l;\n                for (let i = 0; i < bodyValuesLength; i += 2) {\n                    const x = bodyValues[i + 0];\n                    const y = bodyValues[i + 1];\n                    const x2 = cx + c * x - s * y;\n                    const y2 = cy + c * y + s * x;\n                    const middlePoint = new Point(x2, y2);\n                    result.push(transform.apply(middlePoint, middlePoint));\n                }\n            }\n            const headPoint = new Point(x1, y1);\n            result.push(transform.apply(headPoint, headPoint));\n        }\n        return result;\n    }\n    newShape(values, segments, style, oldShape) {\n        const boundary = toPointsBoundary(values, [0, 0, 0, 0]);\n        const cx = (boundary[2] + boundary[0]) * 0.5;\n        const cy = (boundary[3] + boundary[1]) * 0.5;\n        const sx = boundary[2] - boundary[0];\n        const sy = boundary[3] - boundary[1];\n        const result = oldShape.clone();\n        const transform = result.transform;\n        const transformPosition = transform.position;\n        const px = transformPosition.x;\n        const py = transformPosition.y;\n        result.lock(EShapeLockPart.UPLOADED);\n        transformPosition.set(px + cx, py + cy);\n        transform.scale.set(1, 1);\n        transform.rotation = 0;\n        transform.skew.set(0, 0);\n        result.points.toFitted(sx, sy);\n        result.size.set(sx, sy);\n        result.edge.lock();\n        result.body.set(EShapeConnectorBodies.from(values, 0, 0));\n        const local = this._work;\n        if (2 <= values.length) {\n            local.set(px + values[0], py + values[1]);\n        }\n        else {\n            local.set(px, py);\n        }\n        const edgeTail = this._edgeTail;\n        if (edgeTail !== undefined) {\n            if (this.isTailAccepted(result, local, edgeTail)) {\n                this.onTailAccepted(result, local, edgeTail);\n            }\n        }\n        if (2 <= values.length) {\n            const valuesLength = values.length;\n            local.set(px + values[valuesLength - 2], py + values[valuesLength - 1]);\n        }\n        else {\n            local.set(px, py);\n        }\n        const edgeHead = this._edgeHead;\n        if (edgeHead !== undefined) {\n            if (this.isHeadAccepted(result, local, edgeHead)) {\n                this.onHeadAccepted(result, local, edgeHead);\n            }\n        }\n        result.edge.unlock();\n        result.unlock(EShapeLockPart.UPLOADED, true);\n        return result;\n    }\n    isDanglingEdgeAllowed() {\n        var _a;\n        return (_a = this._options.dangling) !== null && _a !== void 0 ? _a : false;\n    }\n    isTailAccepted(connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    }\n    onTailAccepted(connector, local, edge) {\n        if (edge != null) {\n            connector.edge.tail.set(edge.shape, edge.id, edge.x, edge.y, undefined, undefined, undefined, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.tail.set(null, null, null, null, undefined, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    }\n    isHeadAccepted(connector, local, edge) {\n        if (edge == null) {\n            return this.isDanglingEdgeAllowed();\n        }\n        else {\n            return true;\n        }\n    }\n    onHeadAccepted(connector, local, edge) {\n        if (edge != null) {\n            connector.edge.head.set(edge.shape, edge.id, edge.x, edge.y, undefined, undefined, undefined, undefined, undefined, edge.acceptor.side);\n        }\n        else {\n            connector.edge.head.set(null, null, null, null, undefined, local.x, local.y, undefined, undefined, EShapeAcceptorEdgeSide.TOP);\n        }\n    }\n}\n//# sourceMappingURL=e-tool-shape-edit-line-connector.js.map","import { EShapeCapability, EShapeLockPart, toPointsBoundary } from \"@wcardinal/wcardinal-ui\";\nimport { EToolShapeEditLineBase } from \"./e-tool-shape-edit-line-base\";\nexport class EToolShapeEditLine extends EToolShapeEditLineBase {\n    constructor(options) {\n        super(options);\n    }\n    toCapability(shape) {\n        return EShapeCapability.LINE_TAIL | EShapeCapability.LINE_HEAD;\n    }\n    newShape(values, segments, style, oldShape) {\n        const boundary = toPointsBoundary(values, [0, 0, 0, 0]);\n        const cx = (boundary[2] + boundary[0]) * 0.5;\n        const cy = (boundary[3] + boundary[1]) * 0.5;\n        const sx = boundary[2] - boundary[0];\n        const sy = boundary[3] - boundary[1];\n        const result = oldShape.clone();\n        const transform = result.transform;\n        const transformPosition = transform.position;\n        const px = transformPosition.x;\n        const py = transformPosition.y;\n        const localTransform = oldShape.transform.localTransform;\n        const dx = localTransform.a * cx + localTransform.c * cy;\n        const dy = localTransform.b * cx + localTransform.d * cy;\n        const newValues = [];\n        for (let i = 0, imax = values.length; i < imax; i += 2) {\n            newValues.push(values[i + 0] - cx, values[i + 1] - cy);\n        }\n        result.lock(EShapeLockPart.UPLOADED);\n        result.transform.position.set(px + dx, py + dy);\n        result.size.set(sx, sy);\n        const points = result.points;\n        if (points) {\n            points.set(newValues, segments, style);\n        }\n        result.unlock(EShapeLockPart.UPLOADED, true);\n        return result;\n    }\n}\n//# sourceMappingURL=e-tool-shape-edit-line.js.map","/*\n * Copyright (C) 2021 Toshiba Corporation\n * SPDX-License-Identifier: Apache-2.0\n */\nexport const UtilAjax = {\n    send(method, settings) {\n        let isCompleted = false;\n        const makeOnError = (reason) => {\n            return () => {\n                if (!isCompleted) {\n                    isCompleted = true;\n                    settings.error(reason, xhr);\n                }\n            };\n        };\n        const xhr = new XMLHttpRequest();\n        xhr.open(method, settings.url, true);\n        xhr.onload = () => {\n            if (!isCompleted) {\n                isCompleted = true;\n                const status = xhr.status;\n                if ((200 <= status && status < 300) ||\n                    status === 0 ||\n                    status === 304 ||\n                    status === 1223) {\n                    settings.success(xhr.responseText, xhr);\n                }\n                else {\n                    settings.error(xhr.statusText, xhr);\n                }\n            }\n        };\n        const onError = makeOnError(\"error\");\n        xhr.onerror = onError;\n        xhr.onabort = makeOnError(\"abort\");\n        // Headers\n        const headers = settings.headers;\n        if (headers != null) {\n            for (const name in headers) {\n                const header = headers[name];\n                if (header != null) {\n                    xhr.setRequestHeader(name, header);\n                }\n            }\n        }\n        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        // Timeout\n        const timeout = settings.timeout;\n        if (timeout != null) {\n            xhr.timeout = timeout;\n            xhr.ontimeout = makeOnError(\"timeout\");\n            if (0 < timeout) {\n                // For browsers which do not support the `timeout`\n                setTimeout(() => {\n                    xhr.abort();\n                }, timeout);\n            }\n        }\n        // Send\n        try {\n            const data = settings.data;\n            if (data != null) {\n                xhr.send(data);\n            }\n            else {\n                xhr.send();\n            }\n        }\n        catch (_a) {\n            onError();\n        }\n    }\n};\n//# sourceMappingURL=util-ajax.js.map","import { DThemes, isFunction } from \"@wcardinal/wcardinal-ui\";\nexport class UtilCanvasCategory {\n    constructor(options) {\n        this._options = options;\n    }\n    get() {\n        var _a;\n        return ((_a = this._promise) !== null && _a !== void 0 ? _a : (this._promise = this.fetch()));\n    }\n    fetch() {\n        return Promise.all([this.doFetch()]).then((resolveds) => {\n            const resolved = resolveds[0];\n            return this.toFetched(resolved);\n        });\n    }\n    doFetch() {\n        const options = this._options;\n        if (isFunction(options)) {\n            return options();\n        }\n        else {\n            return options;\n        }\n    }\n    toFetched(options) {\n        const theme = DThemes.get(\"EEditorCanvas\");\n        if (options != null) {\n            const items = this.toItems(theme, options);\n            return {\n                default: this.toDefault(items, theme, options),\n                items,\n                writable: this.toWritable(theme, options)\n            };\n        }\n        return {\n            default: theme.getDefaultCategory(),\n            items: [],\n            writable: theme.isCategoryWritable()\n        };\n    }\n    toItems(theme, options) {\n        const result = [];\n        const items = options.items;\n        if (items != null) {\n            for (let i = 0, imax = items.length; i < imax; ++i) {\n                const category = items[i];\n                const id = theme.toCategoryId(category);\n                const label = theme.toCategoryLabel(category);\n                result.push({\n                    id,\n                    label\n                });\n            }\n        }\n        return result;\n    }\n    toDefault(items, theme, options) {\n        if (options.default != null) {\n            return options.default;\n        }\n        else if (0 < items.length) {\n            return items[0].id;\n        }\n        else {\n            return theme.getDefaultCategory();\n        }\n    }\n    toWritable(theme, options) {\n        var _a;\n        return (_a = options.writable) !== null && _a !== void 0 ? _a : theme.isCategoryWritable();\n    }\n}\n//# sourceMappingURL=util-canvas-category.js.map","import { DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { UtilCanvasCategory } from \"./util-canvas-category\";\nexport class UtilCanvas {\n    constructor(options) {\n        this._category = new UtilCanvasCategory(options === null || options === void 0 ? void 0 : options.category);\n        this._options = options;\n    }\n    get() {\n        var _a;\n        return ((_a = this._promise) !== null && _a !== void 0 ? _a : (this._promise = this.fetch()));\n    }\n    fetch() {\n        return this._category.get().then((category) => {\n            return this.toDefault(category);\n        });\n    }\n    toDefault(category) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const theme = DThemes.get(\"EEditorCanvas\");\n        const options = this._options;\n        if (options != null) {\n            return {\n                name: (_a = options.name) !== null && _a !== void 0 ? _a : theme.getDefaultName(),\n                label: (_b = options.label) !== null && _b !== void 0 ? _b : theme.getDefaultLabel(),\n                width: (_c = options.width) !== null && _c !== void 0 ? _c : theme.getDefaultWidth(),\n                height: (_d = options.height) !== null && _d !== void 0 ? _d : theme.getDefaultHeight(),\n                category,\n                summary: (_e = options.summary) !== null && _e !== void 0 ? _e : theme.getDefaultSummary(),\n                description: (_f = options.description) !== null && _f !== void 0 ? _f : theme.getDefaultDescription(),\n                background: {\n                    color: (_h = (_g = options.background) === null || _g === void 0 ? void 0 : _g.color) !== null && _h !== void 0 ? _h : theme.getDefaultBackgroundColor(),\n                    alpha: (_k = (_j = options.background) === null || _j === void 0 ? void 0 : _j.alpha) !== null && _k !== void 0 ? _k : theme.getDefaultBackgroundAlpha()\n                }\n            };\n        }\n        return {\n            name: theme.getDefaultName(),\n            label: theme.getDefaultLabel(),\n            width: theme.getDefaultWidth(),\n            height: theme.getDefaultHeight(),\n            category,\n            summary: theme.getDefaultSummary(),\n            description: theme.getDefaultDescription(),\n            background: {\n                color: theme.getDefaultBackgroundColor(),\n                alpha: theme.getDefaultBackgroundAlpha()\n            }\n        };\n    }\n}\n//# sourceMappingURL=util-canvas.js.map","import { NumberFormatters } from \"@wcardinal/wcardinal-ui\";\nexport class UtilDate {\n    static getFormatter() {\n        if (UtilDate.DATE_FORMATTER == null) {\n            UtilDate.DATE_FORMATTER = NumberFormatters.create(\"%Y%M%D%H%m%s\");\n        }\n        return UtilDate.DATE_FORMATTER;\n    }\n    static format(target) {\n        return this.getFormatter().format(target, 1);\n    }\n}\nUtilDate.DATE_FORMATTER = null;\n//# sourceMappingURL=util-date.js.map","import { DButtonColor, DControllers, DInputIntegerAndLabel, DInputLabel, DInputTextAndLabel, DInputTextArea, DLayoutHorizontal, DLayoutVertical, DMenu, DPane, DSelect, DText, isNumber } from \"@wcardinal/wcardinal-ui\";\nimport { ECommandDocumentBackground } from \"../command/e-command-document-background\";\nimport { ECommandDocumentName } from \"../command/e-command-document-name\";\nimport { ECommandDocumentHeight } from \"../command/e-command-document-height\";\nimport { ECommandDocumentWidth } from \"../command/e-command-document-width\";\nimport { ECommandDocumentLabel } from \"../command/e-command-document-label\";\nimport { ECommandDocumentSummary } from \"../command/e-command-document-summary\";\nimport { ECommandDocumentDescription } from \"../command/e-command-document-description\";\nimport { ECommandDocumentCategory } from \"../command/e-command-document-category\";\nexport class EEditorCanvasLegacy extends DPane {\n    constructor(options) {\n        super(options);\n        const diagram = options.diagram;\n        this._diagram = diagram;\n        this.state.isDisabled = diagram.canvas == null;\n        diagram.on(\"unset\", () => {\n            this.state.isDisabled = true;\n        });\n        diagram.on(\"set\", () => {\n            this.state.isDisabled = false;\n        });\n        this._canvas = options.canvas;\n        this.content.addChild(this.newLayout());\n    }\n    newLayout() {\n        return new DLayoutVertical({\n            x: \"padding\",\n            y: \"padding\",\n            width: \"padding\",\n            height: \"auto\",\n            children: this.newLayoutItems()\n        });\n    }\n    newLayoutItems() {\n        return [\n            this.newTextLabel(),\n            this.newLayoutName(),\n            this.newLayoutLabel(),\n            this.newLayoutWidth(),\n            this.newLayoutHeight(),\n            this.newLayoutCategory(),\n            this.newLayoutSummary(),\n            this.newLayoutDescription(),\n            this.newLayoutBackground()\n        ];\n    }\n    newTextLabel() {\n        return new DText({\n            width: \"100%\",\n            text: {\n                value: this.theme.getLabel()\n            }\n        });\n    }\n    newLayoutName() {\n        const diagram = this._diagram;\n        const result = new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: (value) => {\n                        const canvas = diagram.canvas;\n                        if (canvas != null && canvas.name !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentName(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        const update = () => {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.name;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", (canvas) => {\n            result.input.value = canvas.name;\n        });\n        return result;\n    }\n    newLayoutLabel() {\n        const diagram = this._diagram;\n        const result = new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputLabelLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: (value) => {\n                        const canvas = diagram.canvas;\n                        if (canvas != null && canvas.label !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentLabel(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        const update = () => {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.label;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", (canvas) => {\n            result.input.value = canvas.label;\n        });\n        return result;\n    }\n    newLayoutWidth() {\n        const diagram = this._diagram;\n        const result = new DInputIntegerAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputWidthLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    change: (value) => {\n                        const canvas = diagram.canvas;\n                        if (canvas != null && canvas.width !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentWidth(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        const update = () => {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.width;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", (canvas) => {\n            result.input.value = canvas.width;\n        });\n        return result;\n    }\n    newLayoutHeight() {\n        const diagram = this._diagram;\n        const result = new DInputIntegerAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this.theme.getInputHeightLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                min: 1,\n                on: {\n                    change: (value) => {\n                        const canvas = diagram.canvas;\n                        if (canvas != null && canvas.height !== value) {\n                            DControllers.getCommandController().push(new ECommandDocumentHeight(diagram, canvas, value));\n                        }\n                    }\n                }\n            }\n        });\n        const update = () => {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                result.input.value = canvas.height;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", (canvas) => {\n            result.input.value = canvas.height;\n        });\n        return result;\n    }\n    newLayoutBackground() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelBackground(), this.newInputBackground()]\n        });\n    }\n    newLabelBackground() {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputBackgroundLabel()\n            }\n        });\n    }\n    newInputBackground() {\n        const diagram = this._diagram;\n        const result = new DButtonColor({\n            weight: 1,\n            on: {\n                change: (value) => {\n                    DControllers.getCommandController().push(new ECommandDocumentBackground(diagram, value.color, value.alpha));\n                }\n            }\n        });\n        result.dialog.on(\"open\", () => {\n            const dialog = result.dialog;\n            const dialogNew = dialog.new;\n            const dialogCurrent = dialog.current;\n            dialogNew.color = dialogCurrent.color;\n            dialogNew.alpha = dialogCurrent.alpha;\n        });\n        const update = () => {\n            const value = result.value;\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                const background = canvas.background;\n                const backgroundColor = background.color;\n                const backgroundAlpha = background.alpha;\n                value.color = isNumber(backgroundColor) ? backgroundColor : 0xffffff;\n                value.alpha = isNumber(backgroundAlpha) ? backgroundAlpha : 1;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", update);\n        return result;\n    }\n    newLayoutCategory() {\n        const label = this.newLabelCategory();\n        const select = this.newSelectCategory();\n        const result = new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            visible: false,\n            children: [label, select]\n        });\n        this._canvas.get().then((canvas) => {\n            this.onCanvasValueFetched(canvas, result, select);\n        });\n        return result;\n    }\n    onCanvasValueFetched(canvas, layout, select) {\n        const category = canvas.category;\n        const categoryDefault = category.default;\n        const categoryItems = category.items;\n        if (categoryDefault != null && 0 < categoryItems.length) {\n            const items = [];\n            for (let i = 0, imax = categoryItems.length; i < imax; ++i) {\n                const categoryItem = categoryItems[i];\n                items.push({\n                    value: categoryItem.id,\n                    text: {\n                        value: categoryItem.label\n                    }\n                });\n            }\n            select.menu = new DMenu({\n                fit: true,\n                items\n            });\n            select.value = categoryDefault;\n            const diagram = this._diagram;\n            const update = () => {\n                var _a;\n                const diagramCanvas = diagram.canvas;\n                if (diagramCanvas != null) {\n                    select.value = (_a = diagramCanvas.category) !== null && _a !== void 0 ? _a : canvas.category.default;\n                }\n            };\n            update();\n            diagram.on(\"change\", update);\n            diagram.on(\"set\", (diagramCanvas) => {\n                var _a;\n                select.value = (_a = diagramCanvas.category) !== null && _a !== void 0 ? _a : canvas.category.default;\n            });\n            layout.state.isEnabled = category.writable;\n            layout.show();\n        }\n        else {\n            select.value = null;\n            layout.hide();\n        }\n    }\n    newLabelCategory() {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getSelectCategoryLabel()\n            }\n        });\n    }\n    newSelectCategory() {\n        return new DSelect({\n            weight: 1,\n            on: {\n                change: (value) => {\n                    const diagram = this._diagram;\n                    const canvas = diagram.canvas;\n                    if (canvas != null && canvas.category !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentCategory(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n    }\n    newLayoutSummary() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelSummary(), this.newInputSummary()]\n        });\n    }\n    newLabelSummary() {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputSummaryLabel()\n            }\n        });\n    }\n    newInputSummary() {\n        const diagram = this._diagram;\n        const result = new DInputTextArea({\n            weight: 1,\n            height: 60,\n            on: {\n                change: (value) => {\n                    const canvas = diagram.canvas;\n                    if (canvas != null && canvas.summary !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentSummary(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n        const update = () => {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                result.value = canvas.summary;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", (canvas) => {\n            result.value = canvas.summary;\n        });\n        return result;\n    }\n    newLayoutDescription() {\n        return new DLayoutHorizontal({\n            width: \"padding\",\n            height: \"auto\",\n            children: [this.newLabelDescription(), this.newInputDescription()]\n        });\n    }\n    newLabelDescription() {\n        return new DInputLabel({\n            width: 60,\n            text: {\n                value: this.theme.getInputDescriptionLabel()\n            }\n        });\n    }\n    newInputDescription() {\n        const diagram = this._diagram;\n        const result = new DInputTextArea({\n            weight: 1,\n            height: 100,\n            on: {\n                change: (value) => {\n                    const canvas = diagram.canvas;\n                    if (canvas != null && canvas.description !== value) {\n                        DControllers.getCommandController().push(new ECommandDocumentDescription(diagram, canvas, value));\n                    }\n                }\n            }\n        });\n        const update = () => {\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                result.value = canvas.description;\n            }\n        };\n        update();\n        diagram.on(\"change\", update);\n        diagram.on(\"set\", (canvas) => {\n            result.value = canvas.description;\n        });\n        return result;\n    }\n    getType() {\n        return \"EEditorCanvasLegacy\";\n    }\n}\n//# sourceMappingURL=e-editor-canvas-legacy.js.map","import { createImage, DApplication, DBase, DBaseState, DButton, DButtonFile, DButtonFileAs, DButtonGroup, DButtonRedo, DButtonUndo, DCommandSave, DControllers, DDiagramEditor, DDiagrams, DDialogConfirmDelete, DDialogConfirmDiscard, DDialogSaveAs, DDialogSelect, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DThemes, EShapeCircle, EShapeConnectorLine, EShapeEmbeddeds, EShapeLine, EShapeRectangle, EShapeRectangleRounded, EShapeResourceManagerDeserializationMode, EShapeSemicircle, EShapeTriangle, EShapeTriangleRounded, isArray, isFunction, isString, UtilClipboard, UtilFileDownloader, UtilGestureModifier, UtilGestureModifiers, UtilKeyboardEvent } from \"@wcardinal/wcardinal-ui\";\nimport { Rectangle } from \"pixi.js\";\nimport { ECommandShapeCreate } from \"./command/e-command-shape-create\";\nimport { EDialogProcessing } from \"./editor/e-dialog-processing\";\nimport { getDialogSelectThumbnailSize, newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { EEditorAction } from \"./editor/e-editor-action\";\nimport { EEditorCanvas } from \"./editor/e-editor-canvas\";\nimport { EEditorCanvasLegacy } from \"./editor/e-editor-canvas-legacy\";\nimport { EEditorCoordinate } from \"./editor/e-editor-coordinate\";\nimport { EEditorLayer } from \"./editor/e-editor-layer\";\nimport { EEditorShape } from \"./editor/e-editor-shape\";\nimport { EEditorSnap } from \"./editor/e-editor-snap\";\nimport { EEditorData } from \"./editor/e-editor-data\";\nimport { EEditorText } from \"./editor/e-editor-text\";\nimport { EEditorTree } from \"./editor/e-editor-tree\";\nimport { EShapeExtensionFactories } from \"./extension/e-shape-extension-factories\";\nimport { EShapeExtensions } from \"./extension/e-shape-extensions\";\nimport { EToolGroupImpl } from \"./tool/e-tool-group-impl\";\nimport { EToolSelect } from \"./tool/e-tool-select\";\nimport { EToolShapeCreate } from \"./tool/e-tool-shape-create\";\nimport { EToolShapeCreateLine } from \"./tool/e-tool-shape-create-line\";\nimport { EToolShapeEditLine } from \"./tool/e-tool-shape-edit-line\";\nimport { EToolShapeCreateLineConnector } from \"./tool/e-tool-shape-create-line-connector\";\nimport { EToolShapeEditLineConnector } from \"./tool/e-tool-shape-edit-line-connector\";\nimport { EEditorDataMapping } from \"./editor/e-editor-data-mapping\";\nimport { EToolShapeCreateElbowConnector } from \"./tool/e-tool-shape-create-elbow-connector\";\nimport { EEditorValidation } from \"./editor/e-editor-validation\";\nimport { EEditorSearch } from \"./editor/e-editor-search\";\nimport { ECommandDocumentCreate } from \"./command/e-command-document-create\";\nimport { ECommandDocumentOpen } from \"./command/e-command-document-open\";\nimport { EDialogCanvas } from \"./editor/e-dialog-canvas\";\nimport { UtilCanvas } from \"./util/util-canvas\";\nexport class FGraphicEditor {\n    constructor(options) {\n        var _a, _b, _c;\n        // Options\n        this._options = options;\n        const theme = this.toTheme(options);\n        this._theme = theme;\n        this._margin = (_a = options.margin) !== null && _a !== void 0 ? _a : theme.getMargin();\n        const piece = options.piece;\n        this._isPieceEnabled = (_b = piece === null || piece === void 0 ? void 0 : piece.enable) !== null && _b !== void 0 ? _b : true;\n        this._toPieceId = (_c = piece === null || piece === void 0 ? void 0 : piece.toId) !== null && _c !== void 0 ? _c : (() => null);\n        this._isEditable = options.editable !== false;\n        this._icons = this.toIcons(theme);\n        this._validation = this.toValidation(options);\n        this._search = this.toSearch(options);\n        this._controller = options.controller;\n        this._canvas = new UtilCanvas(options.canvas);\n        // Application\n        this._application = new DApplication(options.application);\n        // Others\n        this._editorButtonGroup = null;\n        this.init();\n    }\n    get application() {\n        return this._application;\n    }\n    get controller() {\n        return this._controller;\n    }\n    toIcons(theme) {\n        const iconBuilder = theme.getIconBuilder();\n        EShapeExtensions.merge(iconBuilder);\n        EShapeExtensionFactories.merge(iconBuilder);\n        const result = iconBuilder.build();\n        EShapeExtensions.build(result);\n        EShapeExtensionFactories.build(result);\n        return result;\n    }\n    toValidation(options) {\n        const validation = options.validation;\n        if (validation != null) {\n            return {\n                validator: validation.validator,\n                force: validation.force === true\n            };\n        }\n        return {\n            validator: undefined,\n            force: false\n        };\n    }\n    toSearch(options) {\n        const search = options.search;\n        if (search != null) {\n            return {\n                finder: search.finder\n            };\n        }\n        return {\n            finder: undefined\n        };\n    }\n    init() {\n        this.initDiagram();\n        this.initHeader();\n        this.initTools();\n        this.initEditors();\n        this.initCopyAndPaste();\n        this.initShortcut();\n    }\n    initDiagram() {\n        const diagram = this.diagram;\n        this.getDiagramContainer().addChild(diagram);\n        DControllers.setDocumentController(diagram);\n    }\n    initHeader() {\n        const header = this.newHeader(this._options);\n        if (header) {\n            this.getHeaderContainer().addChild(header);\n            this._header = header;\n        }\n    }\n    initTools() {\n        this.getToolButtonLayoutContainer().addChild(this.newToolButtonLayout());\n        // Activates the select tool and then disables all the tools.\n        // Otherwise, toolShapeButtonSelect.activate() won't work\n        // because toolShapeButtonSelect.state.isActionable is not true.\n        this.toolShapeButtonSelect.activate();\n        this.toolShapeButtonGroup.disable();\n    }\n    initEditors() {\n        this.getEditorLayoutContainer().addChild(this.newEditorLayout());\n        if (!this.isEditorCanvasCompatible()) {\n            this.diagram.addChild(this.editorCanvas);\n        }\n        // Activate the coordinate editor\n        this.editorButtonCoordinate.activate();\n    }\n    initCopyAndPaste() {\n        new UtilClipboard()\n            .on(\"copy\", (clipboardData) => {\n            const serialized = this.toolShapeSelect.selection.serialize();\n            if (serialized != null) {\n                clipboardData.setData(\"text\", serialized);\n            }\n        })\n            .on(\"cut\", (clipboardData) => {\n            const serialized = this.toolShapeSelect.selection.serialize();\n            if (serialized != null) {\n                clipboardData.setData(\"text\", serialized);\n                this.toolShapeSelect.selection.delete();\n            }\n        })\n            .on(\"paste\", (clipboardData) => {\n            const serialized = clipboardData.getData(\"text\");\n            this.toolShapeSelect.selection.deserialize(serialized);\n        });\n    }\n    initShortcut() {\n        this.initShortcutShape();\n        this.initShortcutTree();\n    }\n    initShortcutShape() {\n        const theme = DThemes.get(\"EEditorShape\");\n        const groupShortcut = theme.getButtonGroupShortcut();\n        if (groupShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, groupShortcut, (e) => {\n                this.toolShapeSelect.selection.group();\n            });\n        }\n        const ungroupShortcut = theme.getButtonUngroupShortcut();\n        if (ungroupShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, ungroupShortcut, (e) => {\n                this.toolShapeSelect.selection.ungroup();\n            });\n        }\n    }\n    initShortcutTree() {\n        const theme = DThemes.get(\"EEditorTree\");\n        const bringToFrontShortcut = theme.getButtonBringToFrontShortcut();\n        if (bringToFrontShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, bringToFrontShortcut, (e) => {\n                this.toolShapeSelect.selection.bringToFront();\n            });\n        }\n        const bringToForwardShortcut = theme.getButtonBringForwardShortcut();\n        if (bringToForwardShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, bringToForwardShortcut, (e) => {\n                this.toolShapeSelect.selection.bringForward();\n            });\n        }\n        const sendBackwardShortcut = theme.getButtonSendBackwardShortcut();\n        if (sendBackwardShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, sendBackwardShortcut, (e) => {\n                this.toolShapeSelect.selection.sendBackward();\n            });\n        }\n        const sendToBackShortcut = theme.getButtonSendToBackShortcut();\n        if (sendToBackShortcut != null) {\n            UtilKeyboardEvent.on(this.diagram, sendToBackShortcut, (e) => {\n                this.toolShapeSelect.selection.sendToBack();\n            });\n        }\n    }\n    newHeader(options) {\n        const header = options.header;\n        if (header != null) {\n            const result = header(this.newToolFileButtons());\n            if (result) {\n                const margin = this._margin;\n                result.x = margin;\n                result.y = margin;\n                result.setWidth((p) => p - 2 * margin);\n                return result;\n            }\n        }\n        return null;\n    }\n    getHeaderContainer() {\n        return this._application.stage;\n    }\n    get toolFileButtonCreate() {\n        var _a;\n        return ((_a = this._toolFileButtonCreate) !== null && _a !== void 0 ? _a : (this._toolFileButtonCreate = this.newToolFileButtonCreate()));\n    }\n    newToolFileButtonCreate() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.new\n            },\n            title: theme.getToolFileButtonCreateTitle(),\n            shortcut: theme.getToolFileButtonCreateShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: this._isEditable ? undefined : DBaseState.DISABLED,\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonCreateActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonCreateActive(opener) {\n        if (this.diagram.isChanged()) {\n            this.dialogDiscard.open(opener).then(() => {\n                this.dialogCreate.then((dialogCreate) => {\n                    dialogCreate.reset().open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogCreate.then((dialogCreate) => {\n                dialogCreate.reset().open(opener);\n            });\n        }\n    }\n    get toolFileButtonOpen() {\n        var _a;\n        return ((_a = this._toolFileButtonOpen) !== null && _a !== void 0 ? _a : (this._toolFileButtonOpen = this.newToolFileButtonOpen()));\n    }\n    newToolFileButtonOpen() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonOpenTitle(),\n            shortcut: theme.getToolFileButtonOpenShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonOpenActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonOpenActive(opener) {\n        if (this.diagram.isChanged()) {\n            this.dialogDiscard.open(opener).then(() => {\n                this.dialogSelect.then((dialogSelect) => {\n                    dialogSelect.open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogSelect.then((dialogSelect) => {\n                dialogSelect.open(opener);\n            });\n        }\n    }\n    get toolFileButtonSave() {\n        var _a;\n        return ((_a = this._toolFileButtonSave) !== null && _a !== void 0 ? _a : (this._toolFileButtonSave = this.newToolFileButtonSave()));\n    }\n    newToolFileButtonSave() {\n        const theme = this._theme;\n        const result = new DButton({\n            image: {\n                source: this._icons.save\n            },\n            title: theme.getToolFileButtonSaveTitle(),\n            shortcut: theme.getToolFileButtonSaveShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    this.onToolFileButtonSaveActive();\n                }\n            }\n        });\n        if (this._isEditable) {\n            const diagram = this.diagram;\n            diagram.on(\"change\", () => {\n                result.state.isDisabled = !diagram.isChanged();\n            });\n        }\n        return result;\n    }\n    onToolFileButtonSaveActive() {\n        this.validate().then(() => {\n            DControllers.getCommandController().push(new DCommandSave());\n        });\n    }\n    validate() {\n        const validation = this._validation;\n        const validator = validation.validator;\n        if (validator != null && validation.force) {\n            const canvas = this.diagram.canvas;\n            if (canvas) {\n                try {\n                    const result = validator(canvas);\n                    if (result != null) {\n                        const dialogSaveProcessing = this.dialogSaveProcessing;\n                        dialogSaveProcessing.open(this.toolFileButtonSave);\n                        if (isArray(result)) {\n                            if (0 < result.length) {\n                                const editorValidation = this.editorValidation;\n                                editorValidation.list.data.clearAndAddAll(result);\n                                const editorButtonValidation = this.editorButtonValidation;\n                                if (!editorButtonValidation.state.isActive) {\n                                    editorButtonValidation.activate();\n                                }\n                                dialogSaveProcessing.reject(\"validation\");\n                                return Promise.reject();\n                            }\n                            else {\n                                return Promise.resolve();\n                            }\n                        }\n                        else {\n                            return result.then((results) => {\n                                if (0 < results.length) {\n                                    const editorValidation = this.editorValidation;\n                                    editorValidation.list.data.clearAndAddAll(results);\n                                    const editorButtonValidation = this.editorButtonValidation;\n                                    if (!editorButtonValidation.state.isActive) {\n                                        editorButtonValidation.activate();\n                                    }\n                                    dialogSaveProcessing.reject(\"validation\");\n                                    return Promise.reject();\n                                }\n                                else {\n                                    return Promise.resolve();\n                                }\n                            }, () => {\n                                dialogSaveProcessing.reject(\"validation-fail\");\n                                return Promise.reject();\n                            });\n                        }\n                    }\n                }\n                catch (_a) {\n                    const dialogSaveProcessing = this.dialogSaveProcessing;\n                    dialogSaveProcessing.open(this.toolFileButtonSave);\n                    dialogSaveProcessing.reject(\"validation-fail\");\n                    return Promise.reject();\n                }\n            }\n        }\n        return Promise.resolve();\n    }\n    get toolFileButtonSaveAs() {\n        var _a;\n        return ((_a = this._toolFileButtonSaveAs) !== null && _a !== void 0 ? _a : (this._toolFileButtonSaveAs = this.newToolFileButtonSaveAs()));\n    }\n    newToolFileButtonSaveAs() {\n        const theme = this._theme;\n        const result = new DButton({\n            image: {\n                source: this._icons.save_as\n            },\n            title: theme.getToolFileButtonSaveAsTitle(),\n            shortcut: theme.getToolFileButtonSaveAsShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    this.onToolFileButtonSaveAsActive();\n                }\n            }\n        });\n        if (this._isEditable) {\n            const diagram = this.diagram;\n            diagram.on(\"set\", () => {\n                result.state.isDisabled = false;\n            });\n            diagram.on(\"unset\", () => {\n                result.state.isDisabled = true;\n            });\n        }\n        return result;\n    }\n    onToolFileButtonSaveAsActive() {\n        this.validate().then(() => {\n            this.dialogSaveAs.open(this.toolFileButtonSaveAs);\n        });\n    }\n    get toolFileButtonUpload() {\n        var _a;\n        return ((_a = this._toolFileButtonUpload) !== null && _a !== void 0 ? _a : (this._toolFileButtonUpload = this.newToolFileButtonUpload()));\n    }\n    newToolFileButtonUpload() {\n        const theme = this._theme;\n        const result = new DButtonFile({\n            image: {\n                source: this._icons.upload\n            },\n            title: theme.getToolFileButtonUploadTitle(),\n            shortcut: theme.getToolFileButtonUploadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            as: DButtonFileAs.TEXT,\n            checker: () => {\n                if (this.diagram.isChanged()) {\n                    return this.dialogDiscard.open(result);\n                }\n                else {\n                    return true;\n                }\n            },\n            on: {\n                open: (data) => {\n                    this.onToolFileButtonUploadOpen(data);\n                }\n            }\n        });\n        return result;\n    }\n    onToolFileButtonUploadOpen(data) {\n        const parsed = DDiagrams.parse(data);\n        if (parsed != null) {\n            parsed.id = undefined;\n            this.diagram.set(parsed);\n        }\n    }\n    get toolFileButtonDownload() {\n        var _a;\n        return ((_a = this._toolFileButtonDownload) !== null && _a !== void 0 ? _a : (this._toolFileButtonDownload = this.newToolFileButtonDownload()));\n    }\n    newToolFileButtonDownload() {\n        const theme = this._theme;\n        const result = new DButton({\n            image: {\n                source: this._icons.download\n            },\n            title: theme.getToolFileButtonDownloadTitle(),\n            shortcut: theme.getToolFileButtonDownloadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: () => {\n                    this.onToolFileButtonDownloadActive();\n                }\n            }\n        });\n        const diagram = this.diagram;\n        diagram.on(\"set\", () => {\n            result.state.isDisabled = false;\n        });\n        diagram.on(\"unset\", () => {\n            result.state.isDisabled = true;\n        });\n        return result;\n    }\n    onToolFileButtonDownloadActive() {\n        const serialized = this.diagram.serialize();\n        if (serialized != null) {\n            UtilFileDownloader.download(`${serialized.name}.json`, JSON.stringify(serialized));\n        }\n    }\n    get toolFileButtonUndo() {\n        var _a;\n        return ((_a = this._toolFileButtonUndo) !== null && _a !== void 0 ? _a : (this._toolFileButtonUndo = this.newToolFileButtonUndo()));\n    }\n    newToolFileButtonUndo() {\n        const theme = this._theme;\n        return new DButtonUndo({\n            title: theme.getToolFileButtonUndoTitle(),\n            shortcut: theme.getToolFileButtonUndoShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            image: {\n                source: this._icons.undo\n            }\n        });\n    }\n    get toolFileButtonRedo() {\n        var _a;\n        return ((_a = this._toolFileButtonRedo) !== null && _a !== void 0 ? _a : (this._toolFileButtonRedo = this.newToolFileButtonRedo()));\n    }\n    newToolFileButtonRedo() {\n        const theme = this._theme;\n        return new DButtonRedo({\n            title: theme.getToolFileButtonRedoTitle(),\n            shortcut: theme.getToolFileButtonRedoShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            image: {\n                source: this._icons.redo\n            }\n        });\n    }\n    get toolFileButtonDelete() {\n        var _a;\n        return ((_a = this._toolFileButtonDelete) !== null && _a !== void 0 ? _a : (this._toolFileButtonDelete = this.newToolFileButtonDelete()));\n    }\n    newToolFileButtonDelete() {\n        const theme = this._theme;\n        const result = new DButton({\n            image: {\n                source: this._icons.delete\n            },\n            title: theme.getToolFileButtonDeleteTitle(),\n            shortcut: theme.getToolFileButtonDeleteShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            state: DBaseState.DISABLED,\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonDelete(emitter);\n                }\n            }\n        });\n        if (this._isEditable) {\n            const diagram = this.diagram;\n            diagram.on(\"set\", () => {\n                result.state.isDisabled = false;\n            });\n            diagram.on(\"unset\", () => {\n                result.state.isDisabled = true;\n            });\n        }\n        return result;\n    }\n    onToolFileButtonDelete(opener) {\n        this.dialogDelete.open(opener);\n    }\n    get toolShapeButtonGroup() {\n        var _a;\n        return ((_a = this._toolShapeButtonGroup) !== null && _a !== void 0 ? _a : (this._toolShapeButtonGroup = this.newToolShapeButtonGroup()));\n    }\n    newToolShapeButtonGroup() {\n        const result = new DButtonGroup();\n        const diagram = this.diagram;\n        diagram.on(\"set\", () => {\n            result.enable();\n        });\n        diagram.on(\"unset\", () => {\n            result.disable();\n        });\n        return result;\n    }\n    get toolShapeButtonSelect() {\n        var _a;\n        return ((_a = this._toolShapeButtonSelect) !== null && _a !== void 0 ? _a : (this._toolShapeButtonSelect = this.newToolShapeButtonSelect()));\n    }\n    newToolShapeButtonSelect() {\n        const theme = this._theme;\n        const result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonSelectTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.select\n            },\n            on: {\n                active: () => {\n                    this.onToolShapeButtonSelectActive();\n                },\n                inactive: () => {\n                    this.onToolShapeButtonSelectInactive();\n                }\n            }\n        });\n        return result;\n    }\n    onToolShapeButtonSelectActive() {\n        this.toolGroup.activate(this.toolShapeSelect);\n    }\n    onToolShapeButtonSelectInactive() {\n        this.toolGroup.deactivate(this.toolShapeSelect);\n    }\n    newToolShapeButtonCreate(title, icon, constructor) {\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title,\n            theme: this._theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons[icon]\n            },\n            on: {\n                active: () => {\n                    this.onToolShapeButtonCreateActive(constructor);\n                },\n                inactive: () => {\n                    this.onToolShapeButtonCreateInactive();\n                }\n            }\n        });\n    }\n    onToolShapeButtonCreateActive(constructor) {\n        const toolShapeCreate = this.toolShapeCreate;\n        toolShapeCreate.shape = () => new constructor();\n        this.toolGroup.activate(toolShapeCreate, constructor);\n    }\n    onToolShapeButtonCreateInactive() {\n        this.toolGroup.deactivate(this.toolShapeCreate);\n    }\n    get toolShapeButtonCircle() {\n        var _a;\n        return ((_a = this._toolShapeButtonCircle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonCircle = this.newToolShapeButtonCircle()));\n    }\n    newToolShapeButtonCircle() {\n        const theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonCircleTitle(), \"shape_circle\", EShapeCircle);\n    }\n    get toolShapeButtonSemicircle() {\n        var _a;\n        return ((_a = this._toolShapeButtonSemicircle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonSemicircle = this.newToolShapeButtonSemicircle()));\n    }\n    newToolShapeButtonSemicircle() {\n        const theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonSemicircleTitle(), \"shape_semicircle\", EShapeSemicircle);\n    }\n    get toolShapeButtonRectangle() {\n        var _a;\n        return ((_a = this._toolShapeButtonRectangle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonRectangle = this.newToolShapeButtonRectangle()));\n    }\n    newToolShapeButtonRectangle() {\n        const theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonRectangleTitle(), \"shape_rectangle\", EShapeRectangle);\n    }\n    get toolShapeButtonRectangleRounded() {\n        var _a;\n        return ((_a = this._toolShapeButtonRectangleRounded) !== null && _a !== void 0 ? _a : (this._toolShapeButtonRectangleRounded = this.newToolShapeButtonRectangleRounded()));\n    }\n    newToolShapeButtonRectangleRounded() {\n        const theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonRectangleRoundedTitle(), \"shape_rectangle_rounded\", EShapeRectangleRounded);\n    }\n    get toolShapeButtonTriangle() {\n        var _a;\n        return ((_a = this._toolShapeButtonTriangle) !== null && _a !== void 0 ? _a : (this._toolShapeButtonTriangle = this.newToolShapeButtonTriangle()));\n    }\n    newToolShapeButtonTriangle() {\n        const theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonTriangleTitle(), \"shape_triangle\", EShapeTriangle);\n    }\n    get toolShapeButtonTriangleRounded() {\n        var _a;\n        return ((_a = this._toolShapeButtonTriangleRounded) !== null && _a !== void 0 ? _a : (this._toolShapeButtonTriangleRounded = this.newToolShapeButtonTriangleRounded()));\n    }\n    newToolShapeButtonTriangleRounded() {\n        const theme = this._theme;\n        return this.newToolShapeButtonCreate(theme.getToolShapeButtonTriangleRoundedTitle(), \"shape_triangle_rounded\", EShapeTriangleRounded);\n    }\n    get toolShapeButtonLine() {\n        var _a;\n        return ((_a = this._toolShapeButtonLine) !== null && _a !== void 0 ? _a : (this._toolShapeButtonLine = this.newToolShapeButtonLine()));\n    }\n    newToolShapeButtonLine() {\n        const theme = this._theme;\n        const result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonLineTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_line\n            },\n            on: {\n                active: () => {\n                    this.onToolShapeButtonLineActive();\n                },\n                inactive: () => {\n                    this.onToolShapeButtonLineInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", (shape) => {\n            if (shape instanceof EShapeLine) {\n                const toolShapeEditLine = this.toolShapeEditLine;\n                toolShapeEditLine.shape = shape;\n                this.toolGroup.activate(toolShapeEditLine);\n            }\n        });\n        return result;\n    }\n    onToolShapeButtonLineActive() {\n        this.toolGroup.activate(this.toolShapeCreateLine);\n    }\n    onToolShapeButtonLineInactive() {\n        this.toolGroup.deactivate(this.toolShapeCreateLine);\n    }\n    get toolShapeButtonLineConnector() {\n        var _a;\n        return ((_a = this._toolShapeButtonLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeButtonLineConnector = this.newToolShapeButtonLineConnector()));\n    }\n    newToolShapeButtonLineConnector() {\n        const theme = this._theme;\n        const result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonLineConnectorTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_line_connector\n            },\n            on: {\n                active: () => {\n                    this.onToolShapeButtonLineConnectorActive();\n                },\n                inactive: () => {\n                    this.onToolShapeButtonLineConnectorInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", (shape) => {\n            if (shape instanceof EShapeConnectorLine) {\n                const toolShapeEditLineConnector = this.toolShapeEditLineConnector;\n                toolShapeEditLineConnector.shape = shape;\n                this.toolGroup.activate(toolShapeEditLineConnector);\n            }\n        });\n        return result;\n    }\n    onToolShapeButtonLineConnectorActive() {\n        this.toolGroup.activate(this.toolShapeCreateLineConnector);\n    }\n    onToolShapeButtonLineConnectorInactive() {\n        this.toolGroup.deactivate(this.toolShapeCreateLineConnector);\n    }\n    get toolShapeButtonElbowConnector() {\n        var _a;\n        return ((_a = this._toolShapeButtonElbowConnector) !== null && _a !== void 0 ? _a : (this._toolShapeButtonElbowConnector = this.newToolShapeButtonElbowConnector()));\n    }\n    newToolShapeButtonElbowConnector() {\n        const theme = this._theme;\n        const result = new DButton({\n            group: this.toolShapeButtonGroup,\n            toggle: true,\n            title: theme.getToolShapeButtonElbowConnectorTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.shape_elbow_connector\n            },\n            on: {\n                active: () => {\n                    this.onToolShapeButtonElbowConnectorActive();\n                },\n                inactive: () => {\n                    this.onToolShapeButtonElbowConnectorInactive();\n                }\n            }\n        });\n        this.toolShapeSelect.on(\"edit\", (shape) => {\n            if (shape instanceof EShapeConnectorLine) {\n                const toolShapeEditLineConnector = this.toolShapeEditLineConnector;\n                toolShapeEditLineConnector.shape = shape;\n                this.toolGroup.activate(toolShapeEditLineConnector);\n            }\n        });\n        return result;\n    }\n    onToolShapeButtonElbowConnectorActive() {\n        this.toolGroup.activate(this.toolShapeCreateElbowConnector);\n    }\n    onToolShapeButtonElbowConnectorInactive() {\n        this.toolGroup.deactivate(this.toolShapeCreateElbowConnector);\n    }\n    get toolShapeButtonImage() {\n        var _a;\n        return ((_a = this._toolShapeButtonImage) !== null && _a !== void 0 ? _a : (this._toolShapeButtonImage = this.newToolShapeButtonImage()));\n    }\n    newToolShapeButtonImage() {\n        const theme = this._theme;\n        return new DButtonFile({\n            group: this.toolShapeButtonGroup,\n            title: theme.getToolShapeButtonImageTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            as: DButtonFileAs.DATA_URL,\n            image: {\n                source: this._icons.editor_image\n            },\n            on: {\n                open: (dataUrl) => {\n                    this.onToolShapeButtonImageOpen(dataUrl);\n                }\n            }\n        });\n    }\n    onToolShapeButtonImageOpen(dataUrl) {\n        const diagram = this.diagram;\n        const layer = diagram.layer;\n        const canvas = diagram.canvas;\n        if (canvas != null && layer != null) {\n            createImage(dataUrl).then((shape) => {\n                shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                shape.attach(layer);\n                DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, this.toolShapeSelect.selection, true));\n            });\n        }\n    }\n    get toolShapeButtonGraphicPiece() {\n        var _a;\n        return ((_a = this._toolShapeButtonGraphicPiece) !== null && _a !== void 0 ? _a : (this._toolShapeButtonGraphicPiece = this.newToolShapeButtonGraphicPiece()));\n    }\n    newToolShapeButtonGraphicPiece() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            title: theme.getToolShapeButtonGraphicPieceTitle(),\n            theme: theme.getToolShapeButtonTheme(),\n            image: {\n                source: this._icons.graphic_piece\n            },\n            on: {\n                active: (emitter) => {\n                    this.onToolShapeButtonGraphicPieceActive(emitter);\n                }\n            }\n        });\n    }\n    onToolShapeButtonGraphicPieceActive(opener) {\n        this.dialogSelectPiece.then((dialogSelectPiece) => {\n            dialogSelectPiece.open(opener);\n        });\n    }\n    newToolShapeButtonExtensionFactory(factory) {\n        let dialogSelect = null;\n        return new DButton({\n            group: this.toolShapeButtonGroup,\n            title: this.toExtensionTitle(factory),\n            theme: this._theme.getToolShapeButtonTheme(),\n            image: {\n                source: factory.icon.texture\n            },\n            on: {\n                active: (emitter) => {\n                    (dialogSelect !== null && dialogSelect !== void 0 ? dialogSelect : (dialogSelect = this.newDialogSelectExtensionFactory(factory))).open(emitter);\n                }\n            }\n        });\n    }\n    newToolShapeButtonExtension(extension) {\n        let creatorOrTool = null;\n        const result = new DButton({\n            group: this.toolShapeButtonGroup,\n            title: this.toExtensionTitle(extension),\n            theme: this._theme.getToolShapeButtonTheme(),\n            toggle: true,\n            image: {\n                source: extension.icon.texture\n            },\n            on: {\n                active: () => {\n                    if (creatorOrTool == null) {\n                        creatorOrTool = this.toExtensionCreatorOrTool(extension);\n                    }\n                    this.onToolShapeButtonExtensionActive(creatorOrTool);\n                },\n                inactive: () => {\n                    if (creatorOrTool == null) {\n                        creatorOrTool = this.toExtensionCreatorOrTool(extension);\n                    }\n                    this.onToolShapeButtonExtensionInactive(creatorOrTool);\n                }\n            }\n        });\n        if (\"type\" in extension) {\n            const updaterCreatorOrOptions = extension.updater;\n            if (updaterCreatorOrOptions != null) {\n                const type = extension.type;\n                let updater = null;\n                this.toolShapeSelect.on(\"edit\", (shape) => {\n                    if (shape.type === type) {\n                        if (updater == null) {\n                            updater = this.toExtensionUpdater(updaterCreatorOrOptions);\n                        }\n                        updater.shape = shape;\n                        this.toolGroup.activate(updater);\n                    }\n                });\n            }\n        }\n        return result;\n    }\n    toExtensionUpdater(updaterCreatorOrOptions) {\n        const updaterCreator = isFunction(updaterCreatorOrOptions)\n            ? updaterCreatorOrOptions\n            : updaterCreatorOrOptions.tool;\n        const result = updaterCreator(this.toolShapeSelect.selection, this.diagram);\n        result.on(\"done\", () => {\n            this.toolGroup.activate(this.toolShapeSelect);\n        });\n        result.on(\"cancel\", () => {\n            this.toolGroup.activate(this.toolShapeSelect);\n        });\n        return result;\n    }\n    toExtensionCreatorOrTool(extension) {\n        const creator = extension.creator;\n        if (isFunction(creator)) {\n            return creator;\n        }\n        else {\n            const result = creator.tool(this.toolShapeSelect.selection, this.diagram);\n            result.on(\"done\", () => {\n                this.toolShapeButtonSelect.activate();\n            });\n            result.on(\"cancel\", () => {\n                this.toolShapeButtonSelect.activate();\n            });\n            return result;\n        }\n    }\n    onToolShapeButtonExtensionActive(creatorOrTool) {\n        const toolGroup = this.toolGroup;\n        if (isFunction(creatorOrTool)) {\n            const toolShapeCreate = this.toolShapeCreate;\n            toolShapeCreate.shape = creatorOrTool;\n            toolGroup.activate(toolShapeCreate, creatorOrTool);\n        }\n        else {\n            toolGroup.activate(creatorOrTool);\n        }\n    }\n    onToolShapeButtonExtensionInactive(creatorOrTool) {\n        const toolGroup = this.toolGroup;\n        if (isFunction(creatorOrTool)) {\n            toolGroup.deactivate(this.toolShapeCreate, creatorOrTool);\n        }\n        else {\n            toolGroup.deactivate(creatorOrTool);\n        }\n    }\n    toExtensionTitle(extension) {\n        const title = extension.title;\n        if (isString(title)) {\n            return title;\n        }\n        return title.create;\n    }\n    newDialogSelectExtensionFactory(factory) {\n        return new DDialogSelect({\n            controller: factory,\n            list: {\n                data: {\n                    toLabel: factory.item.toLabel\n                }\n            },\n            on: {\n                select: (value) => {\n                    this.onDialogSelectExtensionFactorySelect(value, factory);\n                }\n            }\n        });\n    }\n    onDialogSelectExtensionFactorySelect(value, factory) {\n        const diagram = this.diagram;\n        const layer = diagram.layer;\n        const canvas = diagram.canvas;\n        if (canvas && layer) {\n            factory.item.toCreator(value).then((creator) => {\n                const shape = creator();\n                shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                shape.attach(layer);\n                DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, this.toolShapeSelect.selection, true));\n            });\n        }\n    }\n    newToolFileButtons() {\n        return [\n            this.toolFileButtonCreate,\n            this.toolFileButtonOpen,\n            this.toolFileButtonSave,\n            this.toolFileButtonSaveAs,\n            this.toolFileButtonUpload,\n            this.toolFileButtonDownload,\n            this.toolFileButtonUndo,\n            this.toolFileButtonRedo,\n            this.toolFileButtonDelete\n        ];\n    }\n    newToolShapeButtons() {\n        const result = [\n            this.toolShapeButtonSelect,\n            this.toolShapeButtonLine,\n            this.toolShapeButtonCircle,\n            this.toolShapeButtonSemicircle,\n            this.toolShapeButtonRectangle,\n            this.toolShapeButtonRectangleRounded,\n            this.toolShapeButtonTriangle,\n            this.toolShapeButtonTriangleRounded,\n            this.toolShapeButtonLineConnector,\n            this.toolShapeButtonElbowConnector,\n            this.toolShapeButtonImage\n        ];\n        if (this._isPieceEnabled) {\n            result.push(this.toolShapeButtonGraphicPiece);\n        }\n        return result;\n    }\n    newToolShapeButtonsExtension() {\n        const result = [];\n        EShapeExtensions.each((extension) => {\n            if (\"icon\" in extension) {\n                result.push(this.newToolShapeButtonExtension(extension));\n            }\n        });\n        EShapeExtensionFactories.each((factory) => {\n            result.push(this.newToolShapeButtonExtensionFactory(factory));\n        });\n        return result;\n    }\n    getToolButtonLayoutContainer() {\n        return this._application.stage;\n    }\n    newToolButtonLayout() {\n        const margin = this._margin;\n        return new DLayoutVertical({\n            x: margin,\n            y: this.getToolButtonLayoutY(margin),\n            theme: \"EButtonToolLayout\",\n            children: this.newToolButtons()\n        });\n    }\n    getToolButtonLayoutY(margin) {\n        const header = this._header;\n        if (header != null) {\n            return margin + header.height + margin;\n        }\n        return margin;\n    }\n    newToolButtons() {\n        const toolFileButtonCreate = this._toolFileButtonCreate;\n        if (toolFileButtonCreate == null || toolFileButtonCreate.parent == null) {\n            return this.newToolFileButtons()\n                .concat(new DLayoutSpace({ height: 10 }))\n                .concat(this.newToolShapeButtons())\n                .concat(this.newToolShapeButtonsExtension());\n        }\n        else {\n            return this.newToolShapeButtons().concat(this.newToolShapeButtonsExtension());\n        }\n    }\n    get editorButtonGroup() {\n        var _a;\n        return ((_a = this._editorButtonGroup) !== null && _a !== void 0 ? _a : (this._editorButtonGroup = this.newEditorButtonGroup()));\n    }\n    newEditorButtonGroup() {\n        return undefined;\n    }\n    get editorButtonCoordinate() {\n        var _a;\n        return ((_a = this._editorButtonCoordinate) !== null && _a !== void 0 ? _a : (this._editorButtonCoordinate = this.newEditorButtonCoordinate()));\n    }\n    newEditorButtonCoordinate() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_coordinate\n            },\n            title: theme.getEditorButtonCoordinateTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorCoordinate.show();\n                },\n                inactive: () => {\n                    this.editorCoordinate.hide();\n                }\n            }\n        });\n    }\n    get editorCoordinate() {\n        var _a;\n        return ((_a = this._editorCoordinate) !== null && _a !== void 0 ? _a : (this._editorCoordinate = this.newEditorCoordinate()));\n    }\n    newEditorCoordinate() {\n        return this.initEditor(0, new EEditorCoordinate({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    }\n    initEditor(zIndex, editor) {\n        editor.zIndex = zIndex;\n        editor.parent.sortChildren();\n        editor.interactive = true;\n        if (editor instanceof DBase) {\n            editor.state.isFocusable = false;\n        }\n        return editor;\n    }\n    get editorButtonShape() {\n        var _a;\n        return ((_a = this._editorButtonShape) !== null && _a !== void 0 ? _a : (this._editorButtonShape = this.newEditorButtonShape()));\n    }\n    newEditorButtonShape() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_shape\n            },\n            title: theme.getEditorButtonShapeTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorShape.show();\n                },\n                inactive: () => {\n                    this.editorShape.hide();\n                }\n            }\n        });\n    }\n    get editorShape() {\n        var _a;\n        return ((_a = this._editorShape) !== null && _a !== void 0 ? _a : (this._editorShape = this.newEditorShape()));\n    }\n    newEditorShape() {\n        return this.initEditor(1, new EEditorShape({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            canvas: this._canvas,\n            content: {\n                theme: \"EEditorPaneContent\"\n            },\n            piece: {\n                enable: this._isPieceEnabled,\n                controller: this._options.controller,\n                exclude: () => {\n                    return this._toPieceId(this.diagram);\n                }\n            },\n            connector: {\n                dangling: this.isDanglingConnectorAllowed()\n            }\n        }));\n    }\n    get editorButtonText() {\n        var _a;\n        return ((_a = this._editorButtonText) !== null && _a !== void 0 ? _a : (this._editorButtonText = this.newEditorButtonText()));\n    }\n    newEditorButtonText() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_text\n            },\n            title: theme.getEditorButtonTextTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorText.show();\n                },\n                inactive: () => {\n                    this.editorText.hide();\n                }\n            }\n        });\n    }\n    get editorText() {\n        var _a;\n        return ((_a = this._editorText) !== null && _a !== void 0 ? _a : (this._editorText = this.newEditorText()));\n    }\n    newEditorText() {\n        return this.initEditor(2, new EEditorText({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            content: {\n                theme: \"EEditorPaneContent\"\n            }\n        }));\n    }\n    get editorButtonData() {\n        var _a;\n        return ((_a = this._editorButtonData) !== null && _a !== void 0 ? _a : (this._editorButtonData = this.newEditorButtonData()));\n    }\n    newEditorButtonData() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_data\n            },\n            title: theme.getEditorButtonDataTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorData.show();\n                },\n                inactive: () => {\n                    this.editorData.hide();\n                }\n            }\n        });\n    }\n    get editorData() {\n        var _a;\n        return ((_a = this._editorData) !== null && _a !== void 0 ? _a : (this._editorData = this.newEditorData()));\n    }\n    newEditorData() {\n        return this.initEditor(3, new EEditorData({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    }\n    get editorButtonDataMapping() {\n        var _a;\n        return ((_a = this._editorButtonDataMapping) !== null && _a !== void 0 ? _a : (this._editorButtonDataMapping = this.newEditorButtonDataMapping()));\n    }\n    newEditorButtonDataMapping() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_data_mapping\n            },\n            title: theme.getEditorButtonDataMappingTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorDataMapping.show();\n                },\n                inactive: () => {\n                    this.editorDataMapping.hide();\n                }\n            }\n        });\n    }\n    get editorDataMapping() {\n        var _a;\n        return ((_a = this._editorDataMapping) !== null && _a !== void 0 ? _a : (this._editorDataMapping = this.newEditorDataMapping()));\n    }\n    newEditorDataMapping() {\n        return this.initEditor(4, new EEditorDataMapping({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons\n        }));\n    }\n    get editorButtonAction() {\n        var _a;\n        return ((_a = this._editorButtonAction) !== null && _a !== void 0 ? _a : (this._editorButtonAction = this.newEditorButtonAction()));\n    }\n    newEditorButtonAction() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_action\n            },\n            title: theme.getEditorButtonActionTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorAction.show();\n                },\n                inactive: () => {\n                    this.editorAction.hide();\n                }\n            }\n        });\n    }\n    get editorAction() {\n        var _a;\n        return ((_a = this._editorAction) !== null && _a !== void 0 ? _a : (this._editorAction = this.newEditorAction()));\n    }\n    newEditorAction() {\n        return this.initEditor(5, new EEditorAction({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    }\n    get editorButtonTree() {\n        var _a;\n        return ((_a = this._editorButtonTree) !== null && _a !== void 0 ? _a : (this._editorButtonTree = this.newEditorButtonTree()));\n    }\n    newEditorButtonTree() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_tree\n            },\n            title: theme.getEditorButtonTreeTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorTree.show();\n                },\n                inactive: () => {\n                    this.editorTree.hide();\n                }\n            }\n        });\n    }\n    get editorTree() {\n        var _a;\n        return ((_a = this._editorTree) !== null && _a !== void 0 ? _a : (this._editorTree = this.newEditorTree()));\n    }\n    newEditorTree() {\n        return this.initEditor(6, new EEditorTree({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    }\n    get editorButtonLayer() {\n        var _a;\n        return ((_a = this._editorButtonLayer) !== null && _a !== void 0 ? _a : (this._editorButtonLayer = this.newEditorButtonLayer()));\n    }\n    newEditorButtonLayer() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_layer\n            },\n            title: theme.getEditorButtonLayerTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorLayer.show();\n                },\n                inactive: () => {\n                    this.editorLayer.hide();\n                }\n            }\n        });\n    }\n    get editorLayer() {\n        var _a;\n        return ((_a = this._editorLayer) !== null && _a !== void 0 ? _a : (this._editorLayer = this.newEditorLayer()));\n    }\n    newEditorLayer() {\n        return this.initEditor(7, new EEditorLayer({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    }\n    get editorButtonSnap() {\n        var _a;\n        return ((_a = this._editorButtonSnap) !== null && _a !== void 0 ? _a : (this._editorButtonSnap = this.newEditorButtonSnap()));\n    }\n    newEditorButtonSnap() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_snap\n            },\n            title: theme.getEditorButtonSnapTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorSnap.show();\n                },\n                inactive: () => {\n                    this.editorSnap.hide();\n                }\n            }\n        });\n    }\n    get editorSnap() {\n        var _a;\n        return ((_a = this._editorSnap) !== null && _a !== void 0 ? _a : (this._editorSnap = this.newEditorSnap()));\n    }\n    newEditorSnap() {\n        return this.initEditor(8, new EEditorSnap({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram\n        }));\n    }\n    get editorButtonValidation() {\n        var _a;\n        return ((_a = this._editorButtonValidation) !== null && _a !== void 0 ? _a : (this._editorButtonValidation = this.newEditorButtonValidation()));\n    }\n    newEditorButtonValidation() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_validation\n            },\n            title: theme.getEditorButtonValidationTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorValidation.show();\n                },\n                inactive: () => {\n                    this.editorValidation.hide();\n                }\n            }\n        });\n    }\n    get editorValidation() {\n        var _a;\n        return ((_a = this._editorValidation) !== null && _a !== void 0 ? _a : (this._editorValidation = this.newEditorValidation()));\n    }\n    newEditorValidation() {\n        return this.initEditor(9, new EEditorValidation({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram,\n            validator: this._validation.validator\n        }));\n    }\n    get editorButtonSearch() {\n        var _a;\n        return ((_a = this._editorButtonSearch) !== null && _a !== void 0 ? _a : (this._editorButtonSearch = this.newEditorButtonSearch()));\n    }\n    newEditorButtonSearch() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_search\n            },\n            title: theme.getEditorButtonSearchTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorSearch.show();\n                },\n                inactive: () => {\n                    this.editorSearch.hide();\n                }\n            }\n        });\n    }\n    get editorSearch() {\n        var _a;\n        return ((_a = this._editorSearch) !== null && _a !== void 0 ? _a : (this._editorSearch = this.newEditorSearch()));\n    }\n    newEditorSearch() {\n        return this.initEditor(9, new EEditorSearch({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            icons: this._icons,\n            diagram: this.diagram,\n            finder: this._search.finder,\n            interval: this._search.interval\n        }));\n    }\n    get editorCanvas() {\n        var _a;\n        return ((_a = this._editorCanvas) !== null && _a !== void 0 ? _a : (this._editorCanvas = this.newEditorCanvas()));\n    }\n    newEditorCanvas() {\n        return new EEditorCanvas({\n            icons: this._icons,\n            diagram: this.diagram,\n            canvas: this._canvas\n        });\n    }\n    isEditorCanvasCompatible() {\n        var _a, _b;\n        return !!((_b = (_a = this._options.compatibility) === null || _a === void 0 ? void 0 : _a.editor) === null || _b === void 0 ? void 0 : _b.canvas);\n    }\n    get editorButtonCanvasLegacy() {\n        var _a;\n        return ((_a = this._editorButtonCanvasLegacy) !== null && _a !== void 0 ? _a : (this._editorButtonCanvasLegacy = this.newEditorButtonCanvasLegacy()));\n    }\n    newEditorButtonCanvasLegacy() {\n        const theme = this._theme;\n        return new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: this._icons.editor_canvas_legacy\n            },\n            title: theme.getEditorButtonCanvasLegacyTitle(),\n            theme: theme.getEditorButtonTheme(),\n            on: {\n                active: () => {\n                    this.editorCanvasLegacy.show();\n                },\n                inactive: () => {\n                    this.editorCanvasLegacy.hide();\n                }\n            }\n        });\n    }\n    get editorCanvasLegacy() {\n        var _a;\n        return ((_a = this._editorCanvasLegacy) !== null && _a !== void 0 ? _a : (this._editorCanvasLegacy = this.newEditorCanvasLegacy()));\n    }\n    newEditorCanvasLegacy() {\n        return this.initEditor(10, new EEditorCanvasLegacy({\n            parent: this.editorContainer,\n            diagram: this.diagram,\n            canvas: this._canvas,\n            content: {\n                theme: \"EEditorPaneContent\"\n            }\n        }));\n    }\n    newEditorButtonExtension(extension, editor) {\n        let editorInstance = null;\n        const result = new DButton({\n            group: this.editorButtonGroup,\n            toggle: true,\n            image: {\n                source: extension.icon.texture\n            },\n            title: editor.title,\n            theme: this._theme.getEditorButtonTheme(),\n            visible: false,\n            on: {\n                active: () => {\n                    editorInstance !== null && editorInstance !== void 0 ? editorInstance : (editorInstance = this.newEditorExtension(editor));\n                    editorInstance.show();\n                },\n                inactive: () => {\n                    if (editorInstance) {\n                        editorInstance.hide();\n                    }\n                }\n            }\n        });\n        const selection = this.toolShapeSelect.selection;\n        selection.on(\"change\", () => {\n            this.onEditorButtonExtensionSelectionChange(result, extension.type);\n        });\n        return result;\n    }\n    newEditorExtension(editor) {\n        return this.initEditor(11, new editor.constructor({\n            parent: this.editorContainer,\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            icons: this._icons,\n            content: {\n                theme: \"EEditorPaneContent\"\n            },\n            theme: editor.theme\n        }));\n    }\n    onEditorButtonExtensionSelectionChange(button, extensionType) {\n        const selection = this.toolShapeSelect.selection;\n        const last = selection.last();\n        const buttonLast = this._editorButtonExtensionLast;\n        if (last != null && last.type === extensionType && buttonLast !== button) {\n            let wasActive = false;\n            if (buttonLast != null) {\n                buttonLast.hide();\n                if (buttonLast.state.isActive) {\n                    buttonLast.activate();\n                    wasActive = true;\n                }\n            }\n            button.show();\n            this._editorButtonExtensionLast = button;\n            if (wasActive && !button.state.isActive) {\n                button.activate();\n            }\n        }\n    }\n    get viewButtonZoomOut() {\n        var _a;\n        return ((_a = this._viewButtonZoomOut) !== null && _a !== void 0 ? _a : (this._viewButtonZoomOut = this.newViewButtonZoomOut()));\n    }\n    newViewButtonZoomOut() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.zoomOut();\n                }\n            }\n        });\n    }\n    get viewButtonZoomIn() {\n        var _a;\n        return ((_a = this._viewButtonZoomIn) !== null && _a !== void 0 ? _a : (this._viewButtonZoomIn = this.newViewButtonZoomIn()));\n    }\n    newViewButtonZoomIn() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.zoomIn();\n                }\n            }\n        });\n    }\n    get viewButtonDragAndPinch() {\n        var _a;\n        return ((_a = this._viewButtonDragAndPinch) !== null && _a !== void 0 ? _a : (this._viewButtonDragAndPinch = this.newViewButtonDragAndPinch()));\n    }\n    newViewButtonDragAndPinch() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.camera\n            },\n            toggle: true,\n            title: theme.getViewButtonDragAndPinchTitle(),\n            shortcut: theme.getViewButtonDragAndPinchShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.toolGroup.suspend();\n                },\n                inactive: () => {\n                    this.toolGroup.resume();\n                }\n            }\n        });\n    }\n    get viewButtonReset() {\n        var _a;\n        return ((_a = this._viewButtonReset) !== null && _a !== void 0 ? _a : (this._viewButtonReset = this.newViewButtonReset()));\n    }\n    newViewButtonReset() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.reset();\n                }\n            }\n        });\n    }\n    get viewButtonFit() {\n        var _a;\n        return ((_a = this._viewButtonFit) !== null && _a !== void 0 ? _a : (this._viewButtonFit = this.newViewButtonFit()));\n    }\n    newViewButtonFit() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.fit();\n                }\n            }\n        });\n    }\n    newEditorButtons() {\n        const result = [\n            this.editorButtonCoordinate,\n            this.editorButtonShape,\n            this.editorButtonText,\n            this.editorButtonData,\n            this.editorButtonDataMapping,\n            this.editorButtonAction,\n            this.editorButtonTree,\n            this.editorButtonLayer,\n            this.editorButtonSnap\n        ];\n        if (this._validation.validator != null) {\n            result.push(this.editorButtonValidation);\n        }\n        result.push(this.editorButtonSearch);\n        if (this.isEditorCanvasCompatible()) {\n            result.push(this.editorButtonCanvasLegacy);\n        }\n        EShapeExtensions.each((extension) => {\n            if (\"editor\" in extension) {\n                const editor = this.toEditorExtentionConstructorOptions(extension);\n                if (editor) {\n                    result.push(this.newEditorButtonExtension(extension, editor));\n                }\n            }\n        });\n        result.push(new DLayoutSpace({\n            weight: 1\n        }), this.viewButtonZoomOut, this.viewButtonZoomIn, this.viewButtonDragAndPinch, this.viewButtonReset, this.viewButtonFit);\n        return result;\n    }\n    toEditorExtentionConstructorOptions(extension) {\n        var _a, _b;\n        const editor = extension.editor;\n        if (isFunction(editor)) {\n            return {\n                constructor: editor,\n                title: extension.name || \"\",\n                theme: \"EEditorPane\"\n            };\n        }\n        else if (editor.constructor) {\n            return {\n                constructor: editor.constructor,\n                title: (_a = editor.title) !== null && _a !== void 0 ? _a : (extension.name || \"\"),\n                theme: (_b = editor.theme) !== null && _b !== void 0 ? _b : \"EEditorPane\"\n            };\n        }\n    }\n    get editorContainer() {\n        var _a;\n        return ((_a = this._editorContainer) !== null && _a !== void 0 ? _a : (this._editorContainer = this.newEditorContainer()));\n    }\n    newEditorContainer() {\n        return new DLayoutHorizontal({\n            width: \"auto\",\n            height: \"padding\"\n        });\n    }\n    getEditorLayoutContainer() {\n        return this._application.stage;\n    }\n    newEditorLayout() {\n        const margin = this._margin;\n        const y = this.getToolButtonLayoutY(margin);\n        return new DLayoutHorizontal({\n            x: (p, s) => p - s - margin,\n            y,\n            width: \"auto\",\n            height: (p) => p - y - margin,\n            theme: \"EEditorLayout\",\n            children: [this.editorContainer, this.newEditorButtonLayout()],\n            on: {\n                resize: (width, height) => {\n                    this.onEditorLayoutResized(width, height);\n                }\n            }\n        });\n    }\n    newEditorButtonLayout() {\n        return new DLayoutVertical({\n            theme: \"EEditorButtonLayout\",\n            children: this.newEditorButtons()\n        });\n    }\n    onEditorLayoutResized(width, height) {\n        // The tool layout width is `margin + 65`.\n        // The editor layout width is `width`.\n        // Therefore here shifts the diagram `(margin + 65 - width) * 0.5` along the X axis.\n        const diagram = this.diagram;\n        const theme = diagram.theme;\n        const padding = diagram.padding;\n        const margin = this._margin;\n        const os = padding.getLeft() - padding.getRight();\n        padding.left = theme.getPaddingLeft() + margin + 65;\n        padding.right = theme.getPaddingRight() + margin + width;\n        const canvas = diagram.canvas;\n        if (canvas != null) {\n            const ns = padding.getLeft() - padding.getRight();\n            canvas.position.x += (ns - os) * 0.5;\n        }\n    }\n    get toolShapeSelect() {\n        var _a;\n        return ((_a = this._toolShapeSelect) !== null && _a !== void 0 ? _a : (this._toolShapeSelect = this.newToolShapeSelect()));\n    }\n    newToolShapeSelect() {\n        const diagram = this.diagram;\n        const result = new EToolSelect({ diagram });\n        diagram.on(\"set\", () => {\n            result.selection.clear();\n        });\n        diagram.on(\"unset\", () => {\n            result.selection.clear();\n        });\n        return result;\n    }\n    get toolShapeCreate() {\n        var _a;\n        return ((_a = this._toolShapeCreate) !== null && _a !== void 0 ? _a : (this._toolShapeCreate = this.newToolShapeCreate()));\n    }\n    newToolShapeCreate() {\n        const result = new EToolShapeCreate(this.toolShapeSelect.selection, this.diagram);\n        result.on(\"done\", () => {\n            this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    }\n    get toolShapeCreateLine() {\n        var _a;\n        return ((_a = this._toolShapeCreateLine) !== null && _a !== void 0 ? _a : (this._toolShapeCreateLine = this.newToolShapeCreateLine()));\n    }\n    newToolShapeCreateLine() {\n        const result = new EToolShapeCreateLine({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", () => {\n            this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", () => {\n            this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    }\n    get toolShapeCreateLineConnector() {\n        var _a;\n        return ((_a = this._toolShapeCreateLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeCreateLineConnector = this.newToolShapeCreateLineConnector()));\n    }\n    newToolShapeCreateLineConnector() {\n        const result = new EToolShapeCreateLineConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", () => {\n            this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", () => {\n            this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    }\n    get toolShapeCreateElbowConnector() {\n        var _a;\n        return ((_a = this._toolShapeCreateElbowConnector) !== null && _a !== void 0 ? _a : (this._toolShapeCreateElbowConnector = this.newToolShapeCreateElbowConnector()));\n    }\n    newToolShapeCreateElbowConnector() {\n        const result = new EToolShapeCreateElbowConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", () => {\n            this.toolShapeButtonSelect.activate();\n        });\n        result.on(\"cancel\", () => {\n            this.toolShapeButtonSelect.activate();\n        });\n        return result;\n    }\n    isDanglingConnectorAllowed() {\n        var _a;\n        return (_a = this._options.connector) === null || _a === void 0 ? void 0 : _a.dangling;\n    }\n    get toolShapeEditLine() {\n        var _a;\n        return ((_a = this._toolShapeEditLine) !== null && _a !== void 0 ? _a : (this._toolShapeEditLine = this.newToolShapeEditLine()));\n    }\n    newToolShapeEditLine() {\n        const result = new EToolShapeEditLine({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram\n        });\n        result.on(\"done\", () => {\n            this.toolGroup.activate(this.toolShapeSelect);\n        });\n        result.on(\"cancel\", () => {\n            this.toolGroup.activate(this.toolShapeSelect);\n        });\n        return result;\n    }\n    get toolShapeEditLineConnector() {\n        var _a;\n        return ((_a = this._toolShapeEditLineConnector) !== null && _a !== void 0 ? _a : (this._toolShapeEditLineConnector = this.newToolShapeEditLineConnector()));\n    }\n    newToolShapeEditLineConnector() {\n        const result = new EToolShapeEditLineConnector({\n            selection: this.toolShapeSelect.selection,\n            diagram: this.diagram,\n            dangling: this.isDanglingConnectorAllowed()\n        });\n        result.on(\"done\", () => {\n            this.toolGroup.activate(this.toolShapeSelect);\n        });\n        result.on(\"cancel\", () => {\n            this.toolGroup.activate(this.toolShapeSelect);\n        });\n        return result;\n    }\n    get toolGroup() {\n        var _a;\n        return ((_a = this._toolGroup) !== null && _a !== void 0 ? _a : (this._toolGroup = this.newToolGroup()));\n    }\n    newToolGroup() {\n        return new EToolGroupImpl();\n    }\n    get diagram() {\n        var _a;\n        return ((_a = this._diagram) !== null && _a !== void 0 ? _a : (this._diagram = this.newDiagram()));\n    }\n    newDiagram() {\n        return new DDiagramEditor(this.toDiagramOptions(this._options));\n    }\n    getDiagramContainer() {\n        return this._application.stage;\n    }\n    toDiagramOptions(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6;\n        const result = options.diagram || {};\n        // Controller\n        (_a = result.controller) !== null && _a !== void 0 ? _a : (result.controller = this._controller.graphic);\n        // Coordinate\n        (_b = result.x) !== null && _b !== void 0 ? _b : (result.x = 0);\n        (_c = result.y) !== null && _c !== void 0 ? _c : (result.y = 0);\n        (_d = result.width) !== null && _d !== void 0 ? _d : (result.width = \"100%\");\n        (_e = result.height) !== null && _e !== void 0 ? _e : (result.height = \"100%\");\n        // Outline\n        const outline = ((_f = result.outline) !== null && _f !== void 0 ? _f : (result.outline = {}));\n        (_g = outline.color) !== null && _g !== void 0 ? _g : (outline.color = null);\n        // View settings\n        const view = ((_h = result.view) !== null && _h !== void 0 ? _h : (result.view = {}));\n        const gesture = ((_j = view.gesture) !== null && _j !== void 0 ? _j : (view.gesture = {}));\n        (_k = gesture.modifier) !== null && _k !== void 0 ? _k : (gesture.modifier = UtilGestureModifier.ALT);\n        const checker = ((_l = gesture.checker) !== null && _l !== void 0 ? _l : (gesture.checker = {}));\n        (_m = checker.start) !== null && _m !== void 0 ? _m : (checker.start = (e, modifier) => {\n            return UtilGestureModifiers.match(e, modifier) || this.toolGroup.isSuspended();\n        });\n        (_o = checker.move) !== null && _o !== void 0 ? _o : (checker.move = (e, modifier) => {\n            return UtilGestureModifiers.match(e, modifier) || this.diagram.state.isGesturing;\n        });\n        const zoom = ((_p = view.zoom) !== null && _p !== void 0 ? _p : (view.zoom = {}));\n        const dblclick = ((_q = zoom.dblclick) !== null && _q !== void 0 ? _q : (zoom.dblclick = {}));\n        (_r = dblclick.checker) !== null && _r !== void 0 ? _r : (dblclick.checker = (e, modifier) => {\n            return this.toolGroup.isSuspended();\n        });\n        const viewOn = ((_s = view.on) !== null && _s !== void 0 ? _s : (view.on = {}));\n        (_t = viewOn.gesturestart) !== null && _t !== void 0 ? _t : (viewOn.gesturestart = () => {\n            this.onDiagramViewOnStart();\n        });\n        (_u = viewOn.transformstart) !== null && _u !== void 0 ? _u : (viewOn.transformstart = () => {\n            this.onDiagramViewOnStart();\n        });\n        (_v = viewOn.wheeltranslationstart) !== null && _v !== void 0 ? _v : (viewOn.wheeltranslationstart = () => {\n            this.onDiagramViewOnStart();\n        });\n        (_w = view.constraint) !== null && _w !== void 0 ? _w : (view.constraint = (target, x, y, scaleX, scaleY) => {\n            this.onDiagramViewConstraint(target, x, y, scaleX, scaleY);\n        });\n        // Thumbnail settings\n        const thumbnail = result.thumbnail;\n        if (thumbnail === null || thumbnail === void 0 ? void 0 : thumbnail.enable) {\n            (_x = thumbnail.size) !== null && _x !== void 0 ? _x : (thumbnail.size = getDialogSelectThumbnailSize() * 2);\n        }\n        // Event settings\n        const on = ((_y = result.on) !== null && _y !== void 0 ? _y : (result.on = {}));\n        (_z = on.saving) !== null && _z !== void 0 ? _z : (on.saving = () => {\n            this.onDiagramSaving(this._toolFileButtonSave);\n        });\n        (_0 = on.saved) !== null && _0 !== void 0 ? _0 : (on.saved = (reason) => {\n            this.onDiagramSaved(reason, this._toolFileButtonSave);\n        });\n        (_1 = on.deleting) !== null && _1 !== void 0 ? _1 : (on.deleting = () => {\n            this.onDiagramDeleting(this._toolFileButtonDelete);\n        });\n        (_2 = on.deleted) !== null && _2 !== void 0 ? _2 : (on.deleted = (reason) => {\n            this.onDiagramDeleted(reason, this._toolFileButtonDelete);\n        });\n        // Snapshot event settings\n        const snapshot = ((_3 = result.snapshot) !== null && _3 !== void 0 ? _3 : (result.snapshot = {}));\n        const snapshotOn = ((_4 = snapshot.on) !== null && _4 !== void 0 ? _4 : (snapshot.on = {}));\n        (_5 = snapshotOn.taking) !== null && _5 !== void 0 ? _5 : (snapshotOn.taking = () => {\n            this.onDiagramSnapshotTaking();\n        });\n        (_6 = snapshotOn.took) !== null && _6 !== void 0 ? _6 : (snapshotOn.took = () => {\n            this.onDiagramSnapshotTook();\n        });\n        // Done\n        return result;\n    }\n    onDiagramViewOnStart() {\n        var _a, _b;\n        const diagram = this._diagram;\n        if (diagram != null) {\n            const d = ((_a = this._localBoundsDiagram) !== null && _a !== void 0 ? _a : (this._localBoundsDiagram = new Rectangle()));\n            const p = diagram.padding;\n            const l = p.getLeft() - 65 - this._margin;\n            const t = p.getTop();\n            const r = diagram.width - p.getRight();\n            const b = diagram.height - p.getBottom();\n            d.x = l;\n            d.y = t;\n            d.width = Math.max(0, r - l);\n            d.height = Math.max(0, b - t);\n            const canvas = diagram.canvas;\n            if (canvas != null) {\n                const c = ((_b = this._localBoundsCanvas) !== null && _b !== void 0 ? _b : (this._localBoundsCanvas = new Rectangle()));\n                canvas.getLocalBounds(c);\n            }\n        }\n    }\n    onDiagramViewConstraint(target, x, y, sx, sy) {\n        const d = this._localBoundsDiagram;\n        const c = this._localBoundsCanvas;\n        if (d != null && c != null) {\n            target.position.set(Math.max(d.x - (c.x + c.width) * sx, Math.min(d.x + d.width - c.x * sx, x)), Math.max(d.y - (c.y + c.height) * sy, Math.min(d.y + d.height - c.y * sy, y)));\n            target.scale.set(sx, sy);\n        }\n    }\n    onDiagramSaving(opener) {\n        this.dialogSaveProcessing.open(opener);\n    }\n    onDiagramSaved(reason, opener) {\n        const dialogSaveProcessing = this.dialogSaveProcessing;\n        if (reason == null) {\n            dialogSaveProcessing.resolve();\n        }\n        else {\n            if (reason === \"duplication\") {\n                dialogSaveProcessing.once(\"close\", () => {\n                    this.dialogSaveAs.open(opener);\n                });\n            }\n            dialogSaveProcessing.reject(reason);\n        }\n    }\n    onDiagramDeleting(opener) {\n        this.dialogDeleteProcessing.open(opener);\n    }\n    onDiagramDeleted(reason, opener) {\n        const dialogDeleteProcessing = this.dialogDeleteProcessing;\n        if (reason == null) {\n            dialogDeleteProcessing.resolve();\n        }\n        else {\n            dialogDeleteProcessing.reject(reason);\n        }\n    }\n    onDiagramSnapshotTaking() {\n        this.toolShapeSelect.selection.modifier.renderable = false;\n    }\n    onDiagramSnapshotTook() {\n        this.toolShapeSelect.selection.modifier.renderable = true;\n    }\n    get dialogSaveProcessing() {\n        var _a;\n        return ((_a = this._dialogSaveProcessing) !== null && _a !== void 0 ? _a : (this._dialogSaveProcessing = this.newDialogSaveProcessing()));\n    }\n    newDialogSaveProcessing() {\n        return new EDialogProcessing();\n    }\n    get dialogDeleteProcessing() {\n        var _a;\n        return ((_a = this._dialogDeleteProcessing) !== null && _a !== void 0 ? _a : (this._dialogDeleteProcessing = this.newDialogDeleteProcessing()));\n    }\n    newDialogDeleteProcessing() {\n        return new EDialogProcessing();\n    }\n    get dialogSaveAs() {\n        var _a;\n        return ((_a = this._dialogSaveAs) !== null && _a !== void 0 ? _a : (this._dialogSaveAs = this.newDialogSaveAs()));\n    }\n    newDialogSaveAs() {\n        return new DDialogSaveAs();\n    }\n    get dialogCreate() {\n        var _a;\n        return ((_a = this._dialogCreate) !== null && _a !== void 0 ? _a : (this._dialogCreate = this.newDialogCreate()));\n    }\n    newDialogCreate() {\n        return this._canvas.get().then((canvas) => {\n            return new EDialogCanvas({\n                canvas,\n                on: {\n                    ok: (value, emitter) => {\n                        this.onDialogCreateOk(value, emitter);\n                    }\n                }\n            });\n        });\n    }\n    onDialogCreateOk(value, opener) {\n        this.diagram.create(value).then((canvas) => {\n            DControllers.getCommandController().push(new ECommandDocumentCreate(this.diagram, canvas));\n        });\n    }\n    get dialogDiscard() {\n        var _a;\n        return ((_a = this._dialogDiscard) !== null && _a !== void 0 ? _a : (this._dialogDiscard = this.newDialogDiscard()));\n    }\n    newDialogDiscard() {\n        return new DDialogConfirmDiscard();\n    }\n    get dialogSelect() {\n        var _a;\n        return ((_a = this._dialogSelect) !== null && _a !== void 0 ? _a : (this._dialogSelect = this.newDialogSelect()));\n    }\n    newDialogSelect() {\n        return this._canvas.get().then((canvas) => {\n            var _a, _b;\n            if ((_b = (_a = this._options.diagram) === null || _a === void 0 ? void 0 : _a.thumbnail) === null || _b === void 0 ? void 0 : _b.enable) {\n                const result = this.newDialogSelectImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n            else {\n                const result = this.newDialogSelectNoImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    }\n    newDialogSelectNoImage() {\n        return new DDialogSelect({\n            controller: this._controller.graphic,\n            on: {\n                select: (value) => {\n                    this.onDialogSelectSelect(value);\n                }\n            }\n        });\n    }\n    onDialogSelectSelect(value) {\n        this.diagram.open(value.id).then((canvas) => {\n            DControllers.getCommandController().push(new ECommandDocumentOpen(this.diagram, canvas));\n        });\n    }\n    newDialogSelectImage() {\n        return newDialogSelectWithThumbnails(this._options.controller.graphic, this._controller.toThumbnail, (value) => {\n            this.onDialogSelectSelect(value);\n        });\n    }\n    get dialogSelectPiece() {\n        var _a;\n        return ((_a = this._dialogSelectPiece) !== null && _a !== void 0 ? _a : (this._dialogSelectPiece = this.newDialogSelectPiece()));\n    }\n    newDialogSelectPiece() {\n        return this._canvas.get().then((canvas) => {\n            var _a, _b;\n            if ((_b = (_a = this._options.diagram) === null || _a === void 0 ? void 0 : _a.thumbnail) === null || _b === void 0 ? void 0 : _b.enable) {\n                const result = this.newDialogSelectPieceImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n            else {\n                const result = this.newDialogSelectPieceNoImage();\n                result.categories = canvas.category.items;\n                return result;\n            }\n        });\n    }\n    newDialogSelectPieceNoImage() {\n        return new DDialogSelect({\n            controller: this.newDialogSelectPieceController(),\n            on: {\n                select: (value) => {\n                    this.onDialogSelectPieceSelect(value);\n                }\n            }\n        });\n    }\n    newDialogSelectPieceImage() {\n        return newDialogSelectWithThumbnails(this.newDialogSelectPieceController(), this._options.controller.toPieceThumbnail, (value) => {\n            this.onDialogSelectPieceSelect(value);\n        });\n    }\n    newDialogSelectPieceController() {\n        const graphicPiece = this._options.controller.graphic.piece;\n        return {\n            search: (word, categoryId) => {\n                if (categoryId === undefined) {\n                    return graphicPiece.search(word).then((pieces) => {\n                        return this.toDialogSelectPieceResult(pieces);\n                    });\n                }\n                else {\n                    return graphicPiece.search(word, categoryId).then((pieces) => {\n                        return this.toDialogSelectPieceResult(pieces);\n                    });\n                }\n            }\n        };\n    }\n    toDialogSelectPieceResult(targets) {\n        const pieceId = this._toPieceId(this.diagram);\n        if (pieceId == null) {\n            return targets;\n        }\n        const result = [];\n        for (let i = 0, imax = targets.length; i < imax; ++i) {\n            const target = targets[i];\n            if (target.id !== pieceId) {\n                result.push(target);\n            }\n        }\n        return result;\n    }\n    onDialogSelectPieceSelect(value) {\n        const diagram = this.diagram;\n        const layer = diagram.layer;\n        const canvas = diagram.canvas;\n        if (canvas && layer) {\n            const graphic = this._options.controller.graphic;\n            graphic.piece.get(value.id).then((serialized) => {\n                EShapeEmbeddeds.from(serialized, graphic, EShapeResourceManagerDeserializationMode.EDITOR).then((shape) => {\n                    shape.transform.position.set(canvas.width * 0.5, canvas.height * 0.5);\n                    shape.attach(layer);\n                    DControllers.getCommandController().push(new ECommandShapeCreate([shape], layer, this.toolShapeSelect.selection, true));\n                });\n            });\n        }\n    }\n    get dialogDelete() {\n        var _a;\n        return ((_a = this._dialogDelete) !== null && _a !== void 0 ? _a : (this._dialogDelete = this.newDialogDelete()));\n    }\n    newDialogDelete() {\n        return new DDialogConfirmDelete({\n            on: {\n                ok: (value, emitter) => {\n                    this.onDialogDeleteOk(emitter);\n                }\n            }\n        });\n    }\n    onDialogDeleteOk(opener) {\n        this.diagram.delete().then(() => {\n            DControllers.getCommandController().clear();\n        });\n    }\n    toTheme(options) {\n        const theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    }\n    getThemeDefault() {\n        return DThemes.getInstance().get(this.getType());\n    }\n    getType() {\n        return \"FGraphicEditor\";\n    }\n}\n//# sourceMappingURL=f-graphic-editor.js.map","import { DApplication, DApplications, DBoard, DButton, DButtonFile, DButtonFileAs, DDiagram, DDiagrams, DDialogConfirmDelete, DDialogConfirmDiscard, DDialogInputText, DDialogSelect, DInputTextAndLabel, DLayoutHorizontal, DLayoutSpace, DLayoutVertical, DTable, EShapeBase, EShapeCapabilities, EShapeCapability, UtilFileDownloader, UtilGestureModifier, UtilGestureModifiers, UtilKeyboardEvent, UtilPointerEvent, DInputSearch, EShapeEmbedded, DThemes, isString } from \"@wcardinal/wcardinal-ui\";\nimport { Point, Rectangle } from \"pixi.js\";\nimport { newGraphicTester } from \"./data/new-graphic-tester\";\nimport { toGraphicTesterObject } from \"./data/to-graphic-tester-object\";\nimport { toGraphicTesterSerialized } from \"./data/to-graphic-tester-serialized\";\nimport { toGraphicTesterSimple } from \"./data/to-graphic-tester-simple\";\nimport { EDialogProcessing } from \"./editor/e-dialog-processing\";\nimport { newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { EToolSelectArea } from \"./tool/e-tool-select-area\";\nimport { EToolSelectSelection } from \"./tool/e-tool-select-selection\";\nimport { UtilCsv } from \"./util/util-csv\";\nimport { UtilDate } from \"./util/util-date\";\nimport { UtilShapeAreaSelect } from \"./util/util-shape-area-select\";\nimport { UtilHitTest } from \"./util/util-hit-test\";\nimport { UtilCanvasCategory } from \"./util/util-canvas-category\";\nimport { UtilShapeSearch } from \"./util/util-shape-search\";\nexport class FGraphicTester {\n    constructor(options) {\n        var _a, _b;\n        this._options = options;\n        const theme = this.toTheme(options);\n        this._theme = theme;\n        this._controller = options.controller;\n        this._category = new UtilCanvasCategory((_a = options.canvas) === null || _a === void 0 ? void 0 : _a.category);\n        this._icons = theme.getIconBuilder().build();\n        const margin = (_b = options.margin) !== null && _b !== void 0 ? _b : theme.getMargin();\n        this._margin = margin;\n        this._isEditable = options.editable !== false;\n        this._isChanged = false;\n        this._onDiagramMoveBound = (e) => {\n            this.onDiagramMove(e);\n        };\n        this._onDiagramUpBound = (e) => {\n            this.onDiagramUp(e);\n        };\n        this._onDiagramDownPoint = new Point();\n        this._onDiagramMovePoint = new Point();\n        this._selectAreaRect = new Rectangle();\n        this._selectMode = 0 /* EToolSelectMode.NONE */;\n        this._childSelectTime = 0;\n        this._childSelectChild = null;\n        this._isSelectSuspended = false;\n        this._expressionMap = new Map();\n        this._appliedValues = new Map();\n        this._isMappingsDirty = false;\n        // Application\n        const application = new DApplication(options.application);\n        this._application = application;\n        // Panes\n        application.stage.addChild(this.newPanes(options));\n        this.onChange();\n        const onMappingsChangeBound = () => {\n            if (this._isMappingsDirty) {\n                this._isMappingsDirty = false;\n                this.onMappingsChange();\n            }\n            setTimeout(onMappingsChangeBound, 100);\n        };\n        onMappingsChangeBound();\n    }\n    get application() {\n        return this._application;\n    }\n    get controller() {\n        return this._controller;\n    }\n    newHeader(options) {\n        const header = options.header;\n        if (header) {\n            const result = header();\n            if (result) {\n                const margin = this._margin;\n                result.x = margin;\n                result.y = margin;\n                result.setWidth((p) => p);\n                return result;\n            }\n        }\n        return null;\n    }\n    newPanes(options) {\n        const margin = this._margin;\n        return new DLayoutVertical({\n            x: margin,\n            y: margin,\n            width: (p) => p - 2 * margin,\n            height: (p) => p - 2 * margin,\n            margin: margin,\n            children: [\n                this.newHeader(options),\n                new DLayoutHorizontal({\n                    weight: 1,\n                    width: \"padding\",\n                    margin: this._margin * 0.5,\n                    children: [this.leftPane, this.rightPane]\n                })\n            ]\n        });\n    }\n    get leftPane() {\n        let result = this._paneLeft;\n        if (result == null) {\n            result = this.newLeftPane();\n            this._paneLeft = result;\n        }\n        return result;\n    }\n    newLeftPane() {\n        return new DBoard({\n            weight: 1,\n            height: \"padding\",\n            shadow: \"WEAK\",\n            children: [this.diagram, this.toolFileButtonGraphicOpen, this.layoutViewButton]\n        });\n    }\n    get toolFileButtonGraphicOpen() {\n        let result = this._toolFileButtonGraphicOpen;\n        if (result == null) {\n            result = this.newToolFileButtonGraphicOpen();\n            this._toolFileButtonGraphicOpen = result;\n        }\n        return result;\n    }\n    newToolFileButtonGraphicOpen() {\n        const theme = this._theme;\n        const margin = this._margin * 0.5;\n        return new DButton({\n            x: margin,\n            y: margin,\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonGraphicOpenTitle(),\n            shortcut: theme.getToolFileButtonGraphicOpenShortcut(),\n            theme: theme.getToolFileButtonGraphicTheme(),\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonGraphicOpenActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonGraphicOpenActive(opener) {\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(() => {\n                this.dialogSelectGraphic.then((dialogSelectGraphic) => {\n                    dialogSelectGraphic.open(opener);\n                });\n            });\n        }\n        else {\n            this.dialogSelectGraphic.then((dialogSelectGraphic) => {\n                dialogSelectGraphic.open(opener);\n            });\n        }\n    }\n    get layoutViewButton() {\n        let result = this._layoutViewButton;\n        if (result == null) {\n            result = this.newLayoutViewButton();\n            this._layoutViewButton = result;\n        }\n        return result;\n    }\n    newLayoutViewButton() {\n        const margin = this._margin * 0.5;\n        const position = (p, s) => p - s - margin;\n        return new DLayoutHorizontal({\n            x: position,\n            y: position,\n            width: \"auto\",\n            height: \"auto\",\n            margin: 0,\n            padding: 0,\n            children: this.newViewButtons()\n        });\n    }\n    newViewButtons() {\n        return [\n            this.viewButtonZoomOut,\n            this.viewButtonZoomIn,\n            this.viewButtonDragAndPinch,\n            this.viewButtonReset,\n            this.viewButtonFit\n        ];\n    }\n    get viewButtonZoomOut() {\n        let result = this._viewButtonZoomOut;\n        if (result == null) {\n            result = this.newViewButtonZoomOut();\n            this._viewButtonZoomOut = result;\n        }\n        return result;\n    }\n    newViewButtonZoomOut() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.zoomOut();\n                }\n            }\n        });\n    }\n    get viewButtonZoomIn() {\n        let result = this._viewButtonZoomIn;\n        if (result == null) {\n            result = this.newViewButtonZoomIn();\n            this._viewButtonZoomIn = result;\n        }\n        return result;\n    }\n    newViewButtonZoomIn() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.zoomIn();\n                }\n            }\n        });\n    }\n    get viewButtonReset() {\n        let result = this._viewButtonReset;\n        if (result == null) {\n            result = this.newViewButtonReset();\n            this._viewButtonReset = result;\n        }\n        return result;\n    }\n    newViewButtonReset() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.reset();\n                }\n            }\n        });\n    }\n    get viewButtonDragAndPinch() {\n        let result = this._viewButtonDragAndPinch;\n        if (result == null) {\n            result = this.newViewButtonDragAndPinch();\n            this._viewButtonDragAndPinch = result;\n        }\n        return result;\n    }\n    newViewButtonDragAndPinch() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.camera\n            },\n            toggle: true,\n            title: theme.getViewButtonDragAndPinchTitle(),\n            shortcut: theme.getViewButtonDragAndPinchShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this._isSelectSuspended = true;\n                },\n                inactive: () => {\n                    this._isSelectSuspended = false;\n                }\n            }\n        });\n    }\n    get viewButtonFit() {\n        let result = this._viewButtonFit;\n        if (result == null) {\n            result = this.newViewButtonFit();\n            this._viewButtonFit = result;\n        }\n        return result;\n    }\n    newViewButtonFit() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.fit();\n                }\n            }\n        });\n    }\n    get rightPane() {\n        let result = this._paneRight;\n        if (result == null) {\n            result = this.newRightPane();\n            this._paneRight = result;\n        }\n        return result;\n    }\n    newRightPane() {\n        return new DLayoutVertical({\n            width: 400,\n            height: \"padding\",\n            margin: this._margin * 0.5,\n            children: [\n                new DLayoutHorizontal({\n                    width: \"padding\",\n                    height: \"auto\",\n                    children: [\n                        new DLayoutSpace({\n                            weight: 1\n                        }),\n                        this.toolFileButtonCreate,\n                        this.toolFileButtonOpen,\n                        this.toolFileButtonSave,\n                        this.toolFileButtonDelete\n                    ]\n                }),\n                this.inputName,\n                new DLayoutHorizontal({\n                    width: \"padding\",\n                    height: \"auto\",\n                    children: [\n                        this.tableFilterInput,\n                        this.toolFileButtonUpload,\n                        this.toolFileButtonDownload\n                    ]\n                }),\n                this.table\n            ]\n        });\n    }\n    get dialogProcessing() {\n        let result = this._dialogProcessing;\n        if (result == null) {\n            result = this.newDialogProcessing();\n            this._dialogProcessing = result;\n        }\n        return result;\n    }\n    newDialogProcessing() {\n        return new EDialogProcessing();\n    }\n    get dialogDelete() {\n        let result = this._dialogConfirmDelete;\n        if (result == null) {\n            result = this.newDialogDelete();\n            this._dialogConfirmDelete = result;\n        }\n        return result;\n    }\n    newDialogDelete() {\n        return new DDialogConfirmDelete({\n            on: {\n                ok: () => {\n                    const tester = this._tester;\n                    if (tester) {\n                        if (tester.id != null) {\n                            this._controller.graphicTester.delete(tester.id);\n                        }\n                        this.tester = undefined;\n                    }\n                }\n            }\n        });\n    }\n    get tableFilterInput() {\n        let result = this._tableFilterInput;\n        if (result == null) {\n            result = this.newTableFilterInput();\n            this._tableFilterInput = result;\n        }\n        return result;\n    }\n    newTableFilterInput() {\n        return new DInputSearch({\n            weight: 1,\n            on: {\n                input: (value) => {\n                    const word = value.trim();\n                    this.tableFilter.word = word;\n                    const filter = this.table.data.filter;\n                    if (0 < word.length) {\n                        filter.apply();\n                    }\n                    else {\n                        filter.unapply();\n                    }\n                }\n            }\n        });\n    }\n    get toolFileButtonCreate() {\n        let result = this._toolFileButtonCreate;\n        if (result == null) {\n            result = this.newToolFileButtonCreate();\n            this._toolFileButtonCreate = result;\n        }\n        return result;\n    }\n    newToolFileButtonCreate() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.new\n            },\n            title: theme.getToolFileButtonCreateTitle(),\n            shortcut: theme.getToolFileButtonCreateShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonCreateActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonCreateActive(opener) {\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(() => {\n                this.dialogCreate.open(opener);\n            });\n        }\n        else {\n            this.dialogCreate.open(opener);\n        }\n    }\n    get toolFileButtonOpen() {\n        let result = this._toolFileButtonOpen;\n        if (result == null) {\n            result = this.newToolFileButtonOpen();\n            this._toolFileButtonOpen = result;\n        }\n        return result;\n    }\n    newToolFileButtonOpen() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.open\n            },\n            title: theme.getToolFileButtonOpenTitle(),\n            shortcut: theme.getToolFileButtonOpenShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonOpenActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonOpenActive(opener) {\n        if (this.isChanged) {\n            this.dialogDiscard.open(opener).then(() => {\n                this.dialogSelectMapping.open(opener);\n            });\n        }\n        else {\n            this.dialogSelectMapping.open(opener);\n        }\n    }\n    get toolFileButtonUpload() {\n        let result = this._toolFileButtonUpload;\n        if (result == null) {\n            result = this.newToolFileButtonUpload();\n            this._toolFileButtonUpload = result;\n        }\n        return result;\n    }\n    newToolFileButtonUpload() {\n        const theme = this._theme;\n        return new DButtonFile({\n            image: {\n                source: this.icons.upload\n            },\n            title: theme.getToolFileButtonUploadTitle(),\n            shortcut: theme.getToolFileButtonUploadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            as: DButtonFileAs.TEXT,\n            on: {\n                open: (data, file) => {\n                    this.onToolFileButtonUploadOpen(data, file);\n                }\n            }\n        });\n    }\n    onToolFileButtonUploadOpen(data, file) {\n        const tester = this._tester;\n        if (tester) {\n            tester.mappings = toGraphicTesterObject(data);\n            this.onDiagramSelectionChange();\n            this.toDirty();\n            this.toMappingsDirty();\n        }\n    }\n    get toolFileButtonDownload() {\n        let result = this._toolFileButtonDownload;\n        if (result == null) {\n            result = this.newToolFileButtonDownload();\n            this._toolFileButtonDownload = result;\n        }\n        return result;\n    }\n    newToolFileButtonDownload() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.download\n            },\n            title: theme.getToolFileButtonDownloadTitle(),\n            shortcut: theme.getToolFileButtonDownloadShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: () => {\n                    this.onToolFileButtonDownloadActive();\n                }\n            }\n        });\n    }\n    onToolFileButtonDownloadActive() {\n        const graphic = this._graphic;\n        const tester = this._tester;\n        if (graphic && tester) {\n            const diagram = this.diagram;\n            const canvas = diagram.canvas;\n            if (canvas) {\n                const layers = canvas.layer.children;\n                const uuidToDataValueIds = new Map();\n                const rows = [];\n                for (let i = 0, imax = layers.length; i < imax; ++i) {\n                    this.toCsvRows(layers[i].children, tester.mappings, null, uuidToDataValueIds, rows);\n                }\n                rows.sort((a, b) => {\n                    return a[0] - b[0];\n                });\n                UtilFileDownloader.download(this.getFilename(), UtilCsv.stringify(rows));\n            }\n        }\n    }\n    toCsvRows(shapes, mappings, dataShape, uuidToDataValueIds, result) {\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const uuid = (dataShape || shape).uuid;\n            const object = mappings.get(uuid);\n            const data = shape.data;\n            let dataValueIds = uuidToDataValueIds.get(uuid);\n            if (dataValueIds == null) {\n                dataValueIds = new Set();\n                uuidToDataValueIds.set(uuid, dataValueIds);\n            }\n            for (let j = 0, jmax = data.size(); j < jmax; ++j) {\n                const dataValue = data.get(j);\n                if (dataValue) {\n                    const dataValueId = dataValue.id;\n                    if (!dataValueIds.has(dataValueId)) {\n                        dataValueIds.add(dataValueId);\n                        const value = (object && object[dataValueId]) || \"\";\n                        result.push([uuid, dataValueId, value]);\n                    }\n                }\n            }\n            this.toCsvRows(shape.children, mappings, this.toDataShape(dataShape, shape), uuidToDataValueIds, result);\n        }\n        return result;\n    }\n    get toolFileButtonSave() {\n        let result = this._toolFileButtonSave;\n        if (result == null) {\n            result = this.newToolFileButtonSave();\n            this._toolFileButtonSave = result;\n        }\n        return result;\n    }\n    newToolFileButtonSave() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.save\n            },\n            title: theme.getToolFileButtonSaveTitle(),\n            shortcut: theme.getToolFileButtonSaveShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonSaveActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonSaveActive(opener) {\n        const graphic = this._graphic;\n        const tester = this._tester;\n        if (graphic && tester) {\n            tester.name = this.inputName.input.value;\n            const simple = toGraphicTesterSimple(tester);\n            const dialogProcessing = this.dialogProcessing;\n            dialogProcessing.open(opener);\n            this._controller.graphicTester.save(simple).then((id) => {\n                simple.id = id;\n                this.tester = toGraphicTesterSerialized(simple);\n                dialogProcessing.resolve();\n            }, (reason) => {\n                dialogProcessing.reject(reason);\n            });\n        }\n    }\n    get toolFileButtonDelete() {\n        let result = this._toolFileButtonDelete;\n        if (result == null) {\n            result = this.newToolFileButtonDelete();\n            this._toolFileButtonDelete = result;\n        }\n        return result;\n    }\n    newToolFileButtonDelete() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this.icons.delete\n            },\n            title: theme.getToolFileButtonDeleteTitle(),\n            shortcut: theme.getToolFileButtonDeleteShortcut(),\n            theme: theme.getToolFileButtonTheme(),\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonDeleteActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonDeleteActive(opener) {\n        this.dialogDelete.open(opener);\n    }\n    get inputName() {\n        let result = this._inputName;\n        if (result == null) {\n            result = this.newInputName();\n            this._inputName = result;\n        }\n        return result;\n    }\n    newInputName() {\n        return new DInputTextAndLabel({\n            width: \"100%\",\n            label: {\n                text: {\n                    value: this._theme.getInputNameLabel()\n                }\n            },\n            input: {\n                weight: 1,\n                on: {\n                    change: () => {\n                        this.toDirty();\n                    }\n                }\n            }\n        });\n    }\n    get icons() {\n        return this._icons;\n    }\n    get diagram() {\n        let result = this._diagram;\n        if (result == null) {\n            result = this.newDiagram();\n            this._diagram = result;\n        }\n        return result;\n    }\n    newDiagram() {\n        const result = new DDiagram(this.toDiagramOptions(this._options));\n        result.on(\"down\", (e, diagram) => {\n            this.onDiagramDown(e, diagram);\n        });\n        result.on(\"keydown\", (e) => {\n            this.onDiagramKeydown(e);\n        });\n        return result;\n    }\n    toDiagramOptions(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        const result = options.diagram || {};\n        (_a = result.controller) !== null && _a !== void 0 ? _a : (result.controller = this._controller.graphic);\n        (_b = result.width) !== null && _b !== void 0 ? _b : (result.width = \"100%\");\n        (_c = result.height) !== null && _c !== void 0 ? _c : (result.height = \"100%\");\n        (_d = result.mask) !== null && _d !== void 0 ? _d : (result.mask = true);\n        (_e = result.ambient) !== null && _e !== void 0 ? _e : (result.ambient = true);\n        const view = ((_f = result.view) !== null && _f !== void 0 ? _f : (result.view = {}));\n        const gesture = ((_g = view.gesture) !== null && _g !== void 0 ? _g : (view.gesture = {}));\n        (_h = gesture.modifier) !== null && _h !== void 0 ? _h : (gesture.modifier = UtilGestureModifier.ALT);\n        const checker = ((_j = gesture.checker) !== null && _j !== void 0 ? _j : (gesture.checker = {}));\n        (_k = checker.start) !== null && _k !== void 0 ? _k : (checker.start = (e, modifier) => {\n            return UtilGestureModifiers.match(e, modifier) || this._isSelectSuspended;\n        });\n        (_l = checker.move) !== null && _l !== void 0 ? _l : (checker.move = (e, modifier) => {\n            const diagram = this._diagram;\n            return (UtilGestureModifiers.match(e, modifier) || !!(diagram && diagram.state.isGesturing));\n        });\n        const zoom = ((_m = view.zoom) !== null && _m !== void 0 ? _m : (view.zoom = {}));\n        const dblclick = ((_o = zoom.dblclick) !== null && _o !== void 0 ? _o : (zoom.dblclick = {}));\n        (_p = dblclick.checker) !== null && _p !== void 0 ? _p : (dblclick.checker = (e, modifier) => {\n            return this._isSelectSuspended;\n        });\n        return result;\n    }\n    get selection() {\n        let result = this._selection;\n        if (result == null) {\n            result = new EToolSelectSelection({\n                diagram: this.diagram,\n                modifier: {\n                    editable: false\n                }\n            });\n            result.on(\"change\", () => {\n                this.onDiagramSelectionChange();\n            });\n            this._selection = result;\n        }\n        return result;\n    }\n    toDataMappingRows(shapes, mappings, dataShape, dataValueIdToRow, result) {\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            const uuid = (dataShape || shape).uuid;\n            const object = mappings.get(uuid);\n            const data = shape.data;\n            for (let j = 0, jmax = data.size(); j < jmax; ++j) {\n                const dataValue = data.get(j);\n                if (dataValue != null) {\n                    const dataValueId = dataValue.id;\n                    const value = (object && object[dataValueId]) || \"\";\n                    let row = dataValueIdToRow.get(dataValueId);\n                    if (row == null) {\n                        row = {\n                            uuids: [uuid],\n                            id: dataValueId,\n                            value\n                        };\n                        dataValueIdToRow.set(dataValueId, row);\n                        result.push(row);\n                    }\n                    else {\n                        row.uuids.push(uuid);\n                        row.value = value;\n                    }\n                }\n            }\n            this.toDataMappingRows(shape.children, mappings, this.toDataShape(dataShape, shape), dataValueIdToRow, result);\n        }\n        return result;\n    }\n    toDataShape(dataShape, shape) {\n        if (dataShape) {\n            return dataShape;\n        }\n        if (shape instanceof EShapeEmbedded) {\n            return shape;\n        }\n        return null;\n    }\n    onDiagramSelectionChange() {\n        const selection = this._selection;\n        const tester = this._tester;\n        const table = this.table;\n        if (selection && tester) {\n            const shapes = selection.get();\n            if (0 < shapes.length) {\n                const rows = [];\n                this.toDataMappingRows(shapes, tester.mappings, null, new Map(), rows);\n                table.data.clearAndAddAll(rows);\n            }\n            else {\n                table.data.clear();\n            }\n        }\n        else {\n            table.data.clear();\n        }\n    }\n    onDiagramDown(e, diagram) {\n        if (this._isSelectSuspended) {\n            return;\n        }\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const diagramCanvas = diagram.canvas;\n        if (diagramCanvas) {\n            const isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n            if (this._selectMode === 1 /* EToolSelectMode.SELECT */) {\n                this._selectMode = 0 /* EToolSelectMode.NONE */;\n                this.onDiagramSelectEnd(diagramCanvas, isAddMode);\n                return;\n            }\n            const global = e.data.global;\n            const onDownPoint = this._onDiagramDownPoint;\n            onDownPoint.copyFrom(global);\n            const selection = this.selection;\n            const hitObject = this.hitTest(global, diagramCanvas);\n            if (hitObject instanceof EShapeBase) {\n                if (isAddMode) {\n                    selection.toggle(hitObject);\n                }\n                else if (!selection.contains(hitObject)) {\n                    const first = selection.first();\n                    if (first == null) {\n                        selection.set(hitObject.root);\n                    }\n                    else {\n                        const selected = UtilShapeSearch.toSelected(hitObject);\n                        if (selected != null) {\n                            if (EShapeCapabilities.contains(selected, EShapeCapability.CHILDREN)) {\n                                this._childSelectTime = Date.now();\n                                this._childSelectChild = UtilShapeSearch.toOfParent(hitObject, selected);\n                            }\n                        }\n                        else {\n                            const sharedParent = UtilShapeSearch.toSharedParent(first, hitObject);\n                            selection.set(UtilShapeSearch.toOfParent(hitObject, sharedParent));\n                        }\n                    }\n                }\n                this._selectMode = 2 /* EToolSelectMode.TRANSLATE */;\n            }\n            else {\n                // Select area\n                const area = this.selectArea;\n                diagramCanvas.toLocal(global, undefined, onDownPoint);\n                area.x = onDownPoint.x;\n                area.y = onDownPoint.y;\n                area.size.set(0, 0);\n                area.update();\n                diagramCanvas.addChild(area);\n                DApplications.update(diagram);\n                // Select mode\n                this._selectMode = 1 /* EToolSelectMode.SELECT */;\n            }\n            const oldInteractionManager = this._interactionManager;\n            if (oldInteractionManager) {\n                this._interactionManager = null;\n                oldInteractionManager.off(UtilPointerEvent.move, this._onDiagramMoveBound);\n                const onDiagramUpBound = this._onDiagramUpBound;\n                oldInteractionManager.off(UtilPointerEvent.up, onDiagramUpBound);\n                oldInteractionManager.off(UtilPointerEvent.upoutside, onDiagramUpBound);\n                oldInteractionManager.off(UtilPointerEvent.cancel, onDiagramUpBound);\n            }\n            const applicationLayer = DApplications.getLayer(diagram);\n            if (applicationLayer) {\n                const newInteractionManager = applicationLayer.renderer.plugins.interaction;\n                this._interactionManager = newInteractionManager;\n                newInteractionManager.on(UtilPointerEvent.move, this._onDiagramMoveBound);\n                const onDiagramUpBound = this._onDiagramUpBound;\n                newInteractionManager.on(UtilPointerEvent.up, onDiagramUpBound);\n                newInteractionManager.on(UtilPointerEvent.upoutside, onDiagramUpBound);\n                newInteractionManager.on(UtilPointerEvent.cancel, onDiagramUpBound);\n            }\n        }\n    }\n    get selectArea() {\n        let result = this._selectArea;\n        if (result == null) {\n            result = new EToolSelectArea();\n            this._selectArea = result;\n        }\n        return result;\n    }\n    onDiagramMove(e) {\n        const originalEvent = e.data.originalEvent;\n        if (originalEvent.altKey) {\n            return;\n        }\n        const diagram = this.diagram;\n        const diagramCanvas = diagram.canvas;\n        const diagramLayer = diagram.layer;\n        const mode = this._selectMode;\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            const global = e.data.global;\n            const onDownPoint = this._onDiagramDownPoint;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                const area = this.selectArea;\n                const onMovePoint = diagramCanvas.toLocal(global, undefined, this._onDiagramMovePoint);\n                area.x = Math.min(onDownPoint.x, onMovePoint.x);\n                area.y = Math.min(onDownPoint.y, onMovePoint.y);\n                area.size.set(Math.max(onDownPoint.x, onMovePoint.x) - area.x, Math.max(onDownPoint.y, onMovePoint.y) - area.y);\n                area.update();\n                DApplications.update(diagram);\n            }\n            else {\n                const dx = global.x - onDownPoint.x;\n                const dy = global.y - onDownPoint.y;\n                if (1 <= Math.abs(dx) || 1 <= Math.abs(dy)) {\n                    this._childSelectChild = null;\n                }\n            }\n        }\n    }\n    onDiagramUp(e) {\n        const diagram = this.diagram;\n        const diagramCanvas = diagram.canvas;\n        const diagramLayer = diagram.layer;\n        const mode = this._selectMode;\n        const interactionManager = this._interactionManager;\n        if (interactionManager) {\n            this._interactionManager = null;\n            interactionManager.off(UtilPointerEvent.move, this._onDiagramMoveBound);\n            const onDiagramUpBound = this._onDiagramUpBound;\n            interactionManager.off(UtilPointerEvent.up, onDiagramUpBound);\n            interactionManager.off(UtilPointerEvent.upoutside, onDiagramUpBound);\n            interactionManager.off(UtilPointerEvent.cancel, onDiagramUpBound);\n        }\n        if (diagramCanvas && diagramLayer && mode !== 0 /* EToolSelectMode.NONE */) {\n            this._selectMode = 0 /* EToolSelectMode.NONE */;\n            if (mode === 1 /* EToolSelectMode.SELECT */) {\n                const originalEvent = e.data.originalEvent;\n                const isAddMode = originalEvent.ctrlKey || originalEvent.shiftKey;\n                this.onDiagramSelectEnd(diagramCanvas, isAddMode);\n            }\n            else {\n                // Select the child\n                const selection = this.selection;\n                const childSelectChild = this._childSelectChild;\n                if (childSelectChild != null) {\n                    this._childSelectChild = null;\n                    const elapsedTime = Date.now() - this._childSelectTime;\n                    if (elapsedTime < 333) {\n                        selection.set(childSelectChild);\n                    }\n                }\n                DApplications.update(diagram);\n            }\n        }\n    }\n    onDiagramSelectEnd(canvas, isAddMode) {\n        const area = this.selectArea;\n        const selection = this.selection;\n        if (0 < area.size.x && 0 < area.size.y) {\n            const areaRect = area.getBounds(false, this._selectAreaRect);\n            const foundShapes = [];\n            const layers = canvas.layer.children;\n            for (let i = layers.length - 1; 0 <= i; --i) {\n                UtilShapeAreaSelect.findShapes(layers[i], areaRect, foundShapes);\n            }\n            if (isAddMode) {\n                if (0 < foundShapes.length) {\n                    selection.addAll(foundShapes);\n                }\n            }\n            else {\n                if (0 < foundShapes.length || !selection.isEmpty()) {\n                    selection.clearAndAddAll(foundShapes);\n                }\n            }\n        }\n        else if (!isAddMode) {\n            if (!selection.isEmpty()) {\n                selection.clear();\n            }\n        }\n        canvas.removeChild(area);\n        DApplications.update(canvas);\n    }\n    hitTest(global, canvas) {\n        const layers = canvas.layer.children;\n        for (let i = layers.length - 1; 0 <= i; --i) {\n            const result = UtilHitTest.execute(global, layers[i]);\n            if (result != null) {\n                return result;\n            }\n        }\n        return null;\n    }\n    onDiagramKeydown(e) {\n        if (UtilKeyboardEvent.isSelectAllKey(e)) {\n            const canvas = this.diagram.canvas;\n            if (canvas != null) {\n                const selection = this.selection;\n                selection.clear();\n                const layers = canvas.layer.children;\n                for (let i = 0, imax = layers.length; i < imax; ++i) {\n                    const children = layers[i].children;\n                    if (0 < children.length) {\n                        selection.addAll(children);\n                    }\n                }\n            }\n        }\n    }\n    get table() {\n        let result = this._table;\n        if (result == null) {\n            result = this.newTable();\n            this._table = result;\n        }\n        return result;\n    }\n    newTable() {\n        return new DTable({\n            weight: 1,\n            width: \"padding\",\n            columns: this.newColumnOptions(),\n            data: {\n                filter: this.tableFilter\n            }\n        });\n    }\n    get tableFilter() {\n        let result = this._tableFilter;\n        if (result == null) {\n            result = this.newTableFilter();\n            this._tableFilter = result;\n        }\n        return result;\n    }\n    newTableFilter() {\n        return {\n            word: \"\",\n            test(row) {\n                const word = this.word;\n                return (word.length <= 0 ||\n                    0 <= row.id.indexOf(word) ||\n                    0 <= row.value[0].indexOf(word) ||\n                    0 <= row.value[1].indexOf(word));\n            }\n        };\n    }\n    get dialogSelectGraphic() {\n        let result = this._dialogSelectGraphic;\n        if (result == null) {\n            result = this.newDialogSelectGraphic();\n            this._dialogSelectGraphic = result;\n        }\n        return result;\n    }\n    newDialogSelectGraphic() {\n        return this._category.get().then((category) => {\n            if (this._options.controller.toThumbnail != null) {\n                const result = this.newDialogSelectGraphicImage();\n                result.categories = category.items;\n                return result;\n            }\n            else {\n                const result = this.newDialogSelectGraphicNoImage();\n                result.categories = category.items;\n                return result;\n            }\n        });\n    }\n    newDialogSelectGraphicNoImage() {\n        return new DDialogSelect({\n            controller: this._controller.graphic,\n            on: {\n                select: (value) => {\n                    this.onDialogSelectGraphicSelect(value);\n                }\n            }\n        });\n    }\n    newDialogSelectGraphicImage() {\n        return newDialogSelectWithThumbnails(this._options.controller.graphic, this._controller.toThumbnail, (value) => {\n            this.onDialogSelectGraphicSelect(value);\n        });\n    }\n    onDialogSelectGraphicSelect(value) {\n        this._controller.graphic.get(value.id).then((serialized) => {\n            this.graphic = DDiagrams.toSerialized(serialized);\n        });\n    }\n    get graphic() {\n        return this._graphic;\n    }\n    set graphic(graphic) {\n        this._graphic = graphic;\n        const diagram = this.diagram;\n        if (graphic != null) {\n            diagram.set(graphic);\n        }\n        else {\n            diagram.set(null);\n        }\n        this._appliedValues.clear();\n        this.tester = undefined;\n    }\n    get dialogSelectMapping() {\n        let result = this._dialogSelectTester;\n        if (result == null) {\n            result = this.newDialogSelectMapping();\n            this._dialogSelectTester = result;\n        }\n        return result;\n    }\n    newDialogSelectMapping() {\n        const controller = this._controller;\n        return new DDialogSelect({\n            controller: {\n                search: (word) => {\n                    const graphic = this._graphic;\n                    if (graphic) {\n                        return controller.graphicTester.search(graphic.name, word);\n                    }\n                    return Promise.resolve([]);\n                }\n            },\n            on: {\n                select: (selected) => {\n                    controller.graphicTester.get(selected.id).then((serialized) => {\n                        const graphic = this._graphic;\n                        if (graphic) {\n                            this.tester = toGraphicTesterSerialized(serialized);\n                        }\n                    });\n                }\n            }\n        });\n    }\n    get dialogDiscard() {\n        let result = this._dialogDiscard;\n        if (result == null) {\n            result = new DDialogConfirmDiscard();\n            this._dialogDiscard = result;\n        }\n        return result;\n    }\n    get dialogCreate() {\n        let result = this._dialogCreate;\n        if (result == null) {\n            result = this.newDialogCreate();\n            this._dialogCreate = result;\n        }\n        return result;\n    }\n    newDialogCreate() {\n        const result = new DDialogInputText({\n            on: {\n                open: () => {\n                    result.value = this._theme.newDialogCreateTextValue();\n                },\n                ok: (value) => {\n                    const graphic = this._graphic;\n                    if (graphic) {\n                        this.tester = newGraphicTester(value, graphic);\n                    }\n                }\n            }\n        });\n        return result;\n    }\n    get tester() {\n        return this._tester;\n    }\n    set tester(tester) {\n        this._isChanged = false;\n        const inputName = this.inputName.input;\n        this._tester = tester;\n        inputName.value = tester ? tester.name : \"\";\n        this.onDiagramSelectionChange();\n        this.onChange();\n        this.toMappingsDirty();\n    }\n    get isNew() {\n        const tester = this._tester;\n        return tester != null && tester.id == null;\n    }\n    get isChanged() {\n        return this._isChanged || this.isNew;\n    }\n    onChange() {\n        const hasNoGraphc = this._graphic == null;\n        const hasNoMapping = this._tester == null;\n        const hasNoChanges = !this.isChanged;\n        const isNotEditable = !this._isEditable;\n        this.table.state.isDisabled = hasNoMapping;\n        this.tableFilterInput.state.isDisabled = hasNoMapping;\n        this.inputName.state.isDisabled = hasNoMapping || isNotEditable;\n        this.toolFileButtonCreate.state.isDisabled = hasNoGraphc || isNotEditable;\n        this.toolFileButtonOpen.state.isDisabled = hasNoGraphc;\n        this.toolFileButtonUpload.state.isDisabled = hasNoMapping || isNotEditable;\n        this.toolFileButtonDownload.state.isDisabled = hasNoMapping;\n        this.toolFileButtonSave.state.isDisabled = hasNoMapping || hasNoChanges || isNotEditable;\n        this.toolFileButtonDelete.state.isDisabled = hasNoMapping || isNotEditable;\n    }\n    evaluate(expression) {\n        return Function(`try { return (${expression}); } catch( e ) { return 0; }`)();\n    }\n    onMappingsChange() {\n        const tester = this._tester;\n        if (tester) {\n            const mappings = tester.mappings;\n            const diagram = this.diagram;\n            const canvas = diagram.canvas;\n            if (canvas) {\n                let isChanged = false;\n                const layers = canvas.layer.children;\n                for (let i = 0, imax = layers.length; i < imax; ++i) {\n                    if (this.applyMappings(layers[i].children, mappings, null)) {\n                        isChanged = true;\n                    }\n                }\n                if (isChanged) {\n                    DApplications.update(diagram);\n                }\n            }\n        }\n    }\n    applyMappings(shapes, mappings, dataShape) {\n        let isChanged = false;\n        for (let i = 0, imax = shapes.length; i < imax; ++i) {\n            const shape = shapes[i];\n            // Apply the mappings\n            const uuid = (dataShape || shape).uuid;\n            const mapping = mappings.get(uuid);\n            if (mapping) {\n                const data = shape.data;\n                for (let j = 0, jmax = data.size(); j < jmax; ++j) {\n                    const dataValue = data.get(j);\n                    if (dataValue != null && this.applyMapping(dataValue, mapping[dataValue.id])) {\n                        isChanged = true;\n                    }\n                }\n            }\n            // Children\n            if (this.applyMappings(shape.children, mappings, this.toDataShape(dataShape, shape))) {\n                isChanged = true;\n            }\n        }\n        // Done\n        return isChanged;\n    }\n    applyMapping(dataValue, expression) {\n        if (expression != null) {\n            const expressionMap = this._expressionMap;\n            if (expressionMap.has(expression)) {\n                return this.applyMappingIfChanged(dataValue, expressionMap.get(expression));\n            }\n            else if (0 < expression.length) {\n                try {\n                    const evaluated = this.evaluate(expression);\n                    expressionMap.set(expression, evaluated);\n                    return this.applyMappingIfChanged(dataValue, evaluated);\n                }\n                catch (_a) {\n                    // DO NOTHING\n                }\n            }\n        }\n        return false;\n    }\n    applyMappingIfChanged(dataValue, value) {\n        const appliedValues = this._appliedValues;\n        if (appliedValues.has(dataValue)) {\n            const appliedValue = appliedValues.get(dataValue);\n            if (appliedValue !== value) {\n                appliedValues.set(dataValue, value);\n                dataValue.value = value;\n                return true;\n            }\n        }\n        else {\n            appliedValues.set(dataValue, value);\n            dataValue.value = value;\n            return true;\n        }\n        return false;\n    }\n    toDirty() {\n        if (!this._isChanged) {\n            this._isChanged = true;\n            this.onChange();\n        }\n    }\n    toMappingsDirty() {\n        this._isMappingsDirty = true;\n    }\n    getFilename() {\n        const name = this.inputName.input.value.toLowerCase();\n        const date = UtilDate.format(Date.now());\n        return `graphic-tester-${name}-${date}.csv`;\n    }\n    newColumnOptions() {\n        const isEditable = this._isEditable;\n        const theme = this._theme;\n        return [\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnDataLabel(),\n                editable: false,\n                sortable: true,\n                getter: (row) => {\n                    return row.id;\n                },\n                setter: (row, index, value) => {\n                    row.id = value;\n                    this.toDirty();\n                }\n            },\n            {\n                type: \"TEXT\",\n                label: theme.getTableColumnValueLabel(),\n                align: \"LEFT\",\n                editable: isEditable,\n                sortable: true,\n                formatter: (value) => {\n                    return value || \"\";\n                },\n                getter: (row) => {\n                    return row.value;\n                },\n                setter: (row, index, value) => {\n                    const tester = this._tester;\n                    if (tester) {\n                        const uuids = row.uuids;\n                        const mappings = tester.mappings;\n                        const id = row.id;\n                        if (0 < value.length) {\n                            for (let i = 0, imax = uuids.length; i < imax; ++i) {\n                                const uuid = uuids[i];\n                                let object = mappings.get(uuid);\n                                if (object == null) {\n                                    object = {};\n                                    mappings.set(uuid, object);\n                                }\n                                object[id] = value;\n                            }\n                        }\n                        else {\n                            for (let i = 0, imax = uuids.length; i < imax; ++i) {\n                                const uuid = uuids[i];\n                                const object = mappings.get(uuid);\n                                if (object != null) {\n                                    delete object[id];\n                                }\n                            }\n                        }\n                    }\n                    row.value = value;\n                    this.toDirty();\n                    this.toMappingsDirty();\n                }\n            }\n        ];\n    }\n    toTheme(options) {\n        const theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    }\n    getThemeDefault() {\n        return DThemes.getInstance().get(this.getType());\n    }\n    getType() {\n        return \"FGraphicTester\";\n    }\n}\n//# sourceMappingURL=f-graphic-tester.js.map","import { DApplication, DButton, DDiagram, DDiagrams, DDialogSelect, DLayoutHorizontal, isString, DThemes } from \"@wcardinal/wcardinal-ui\";\nimport { newDialogSelectWithThumbnails } from \"./editor/e-dialog-select-with-thumbnails\";\nimport { UtilCanvasCategory } from \"./util/util-canvas-category\";\nexport class FGraphicViewer {\n    constructor(options) {\n        var _a, _b;\n        // Options\n        this._options = options;\n        const theme = this.toTheme(options);\n        this._theme = theme;\n        const margin = (_a = options.margin) !== null && _a !== void 0 ? _a : theme.getMargin();\n        this._margin = margin;\n        const icons = theme.getIconBuilder().build();\n        this._icons = icons;\n        this._category = new UtilCanvasCategory((_b = options.canvas) === null || _b === void 0 ? void 0 : _b.category);\n        // Application\n        const application = new DApplication(options.application);\n        this._application = application;\n        const stage = application.stage;\n        // Diagram\n        const diagram = this.diagram;\n        stage.addChild(diagram);\n        // Header\n        const header = this.header;\n        if (header != null) {\n            stage.addChild(header);\n        }\n        // View operations\n        const button = options.button;\n        if (button == null || button.view !== false) {\n            stage.addChild(this.layoutViewButton);\n        }\n    }\n    get application() {\n        return this._application;\n    }\n    get diagram() {\n        let result = this._diagram;\n        if (result == null) {\n            result = this.newDiagram();\n            this._diagram = result;\n        }\n        return result;\n    }\n    newDiagram() {\n        const controller = this._options.controller;\n        return new DDiagram({\n            x: 0,\n            y: 0,\n            width: \"100%\",\n            height: \"100%\",\n            outline: {\n                color: null\n            },\n            controller: controller.graphic,\n            data: {\n                mapper: this.newDataMapper(),\n                remote: {\n                    controller: controller.remote\n                }\n            }\n        });\n    }\n    get header() {\n        let result = this._header;\n        if (result === undefined) {\n            result = this.newHeader();\n            this._header = result;\n        }\n        return result;\n    }\n    newHeader() {\n        const header = this._options.header;\n        if (header != null) {\n            const result = header(this.newToolFileButtons());\n            if (result != null) {\n                const margin = this._margin;\n                result.x = margin;\n                result.y = margin;\n                result.setWidth((p) => p - 2 * margin);\n                return result;\n            }\n        }\n        return null;\n    }\n    newToolFileButtons() {\n        const result = [];\n        const button = this._options.button;\n        if (button == null || button.open !== false) {\n            result.push(this.toolFileButtonGraphicOpen);\n        }\n        return result;\n    }\n    get toolFileButtonGraphicOpen() {\n        let result = this._toolFileButtonGraphicOpen;\n        if (result == null) {\n            result = this.newToolFileButtonGraphicOpen();\n            this._toolFileButtonGraphicOpen = result;\n        }\n        return result;\n    }\n    newToolFileButtonGraphicOpen() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.open\n            },\n            title: theme.getToolFileButtonGraphicOpenTitle(),\n            shortcut: theme.getToolFileButtonGraphicOpenShortcut(),\n            theme: theme.getToolFileButtonGraphicTheme(),\n            on: {\n                active: (emitter) => {\n                    this.onToolFileButtonGraphicOpenActive(emitter);\n                }\n            }\n        });\n    }\n    onToolFileButtonGraphicOpenActive(opener) {\n        this.dialogSelect.then((dialogSelect) => {\n            dialogSelect.open(opener);\n        });\n    }\n    get layoutViewButton() {\n        let result = this._layoutViewButton;\n        if (result == null) {\n            result = this.newLayoutViewButton();\n            this._layoutViewButton = result;\n        }\n        return result;\n    }\n    newLayoutViewButton() {\n        const margin = this._margin;\n        const position = (p, s) => p - s - margin;\n        return new DLayoutHorizontal({\n            x: position,\n            y: position,\n            width: \"auto\",\n            height: \"auto\",\n            margin: 0,\n            children: this.newViewButtons()\n        });\n    }\n    newViewButtons() {\n        return [\n            this.viewButtonZoomOut,\n            this.viewButtonZoomIn,\n            this.viewButtonReset,\n            this.viewButtonFit\n        ];\n    }\n    get viewButtonZoomOut() {\n        let result = this._viewButtonZoomOut;\n        if (result == null) {\n            result = this.newViewButtonZoomOut();\n            this._viewButtonZoomOut = result;\n        }\n        return result;\n    }\n    newViewButtonZoomOut() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_out\n            },\n            title: theme.getViewButtonZoomOutTitle(),\n            shortcut: theme.getViewButtonZoomOutShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.zoomOut();\n                }\n            }\n        });\n    }\n    get viewButtonZoomIn() {\n        let result = this._viewButtonZoomIn;\n        if (result == null) {\n            result = this.newViewButtonZoomIn();\n            this._viewButtonZoomIn = result;\n        }\n        return result;\n    }\n    newViewButtonZoomIn() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_zoom_in\n            },\n            title: theme.getViewButtonZoomInTitle(),\n            shortcut: theme.getViewButtonZoomInShortcut(),\n            shortcuts: theme.getViewButtonZoomInShortcuts(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.zoomIn();\n                }\n            }\n        });\n    }\n    get viewButtonReset() {\n        let result = this._viewButtonReset;\n        if (result == null) {\n            result = this.newViewButtonReset();\n            this._viewButtonReset = result;\n        }\n        return result;\n    }\n    newViewButtonReset() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_reset\n            },\n            title: theme.getViewButtonResetTitle(),\n            shortcut: theme.getViewButtonResetShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.reset();\n                }\n            }\n        });\n    }\n    get viewButtonFit() {\n        let result = this._viewButtonFit;\n        if (result == null) {\n            result = this.newViewButtonFit();\n            this._viewButtonFit = result;\n        }\n        return result;\n    }\n    newViewButtonFit() {\n        const theme = this._theme;\n        return new DButton({\n            image: {\n                source: this._icons.view_fit\n            },\n            title: theme.getViewButtonFitTitle(),\n            shortcut: theme.getViewButtonFitShortcut(),\n            theme: theme.getViewButtonTheme(),\n            on: {\n                active: () => {\n                    this.diagram.view.fit();\n                }\n            }\n        });\n    }\n    get dialogSelect() {\n        let result = this._dialogSelect;\n        if (result == null) {\n            result = this.newDialogSelect();\n            this._dialogSelect = result;\n        }\n        return result;\n    }\n    newDialogSelect() {\n        return this._category.get().then((category) => {\n            if (this._options.controller.toThumbnail != null) {\n                const result = this.newDialogSelectImage();\n                result.categories = category.items;\n                return result;\n            }\n            else {\n                const result = this.newDialogSelectNoImage();\n                result.categories = category.items;\n                return result;\n            }\n        });\n    }\n    newDialogSelectNoImage() {\n        return new DDialogSelect({\n            controller: this._options.controller.graphic,\n            on: {\n                select: (value) => {\n                    this.onDialogSelectSelect(value);\n                }\n            }\n        });\n    }\n    newDialogSelectImage() {\n        const controller = this._options.controller;\n        return newDialogSelectWithThumbnails(controller.graphic, controller.toThumbnail, (value) => {\n            this.onDialogSelectSelect(value);\n        });\n    }\n    onDialogSelectSelect(value) {\n        this._options.controller.graphic.get(value.id).then((serialized) => {\n            this.diagram.set(DDiagrams.toSerialized(serialized));\n        });\n    }\n    newDataMapper() {\n        return undefined;\n    }\n    toTheme(options) {\n        const theme = options === null || options === void 0 ? void 0 : options.theme;\n        if (theme) {\n            if (isString(theme)) {\n                return DThemes.getInstance().get(theme);\n            }\n            return theme;\n        }\n        return this.getThemeDefault();\n    }\n    getThemeDefault() {\n        return DThemes.getInstance().get(this.getType());\n    }\n    getType() {\n        return \"FGraphicViewer\";\n    }\n}\n//# sourceMappingURL=f-graphic-viewer.js.map","export class UtilDataValues {\n    constructor(parent) {\n        this.parent = parent;\n        this.mappings = {};\n    }\n    set(mappings) {\n        this.mappings = mappings;\n        const parent = this.parent;\n        const parentData = parent.data;\n        for (const id in mappings) {\n            const value = mappings[id];\n            if (value) {\n                parentData.set(id, value.value, value.time, value.state);\n            }\n        }\n        parent.update();\n    }\n    retain(ids) {\n        const retained = {};\n        const mapping = this.mappings;\n        for (let i = 0, imax = ids.length; i < imax; ++i) {\n            const id = ids[i];\n            if (id in mapping) {\n                retained[id] = mapping[id];\n            }\n        }\n        this.set(retained);\n    }\n}\n//# sourceMappingURL=util-data-values.js.map","import { EShapeButtons } from \"./e-shape-buttons\";\nexport const loadShapeExtensionButton = () => {\n    EShapeButtons.load();\n};\n//# sourceMappingURL=load-shape-extension-button.js.map","import { EShapeButtonLayers } from \"./e-shape-button-layers\";\nexport const loadShapeExtensionButtonLayer = () => {\n    EShapeButtonLayers.load();\n};\n//# sourceMappingURL=load-shape-extension-button-layer.js.map","import { EShapeChartLines } from \"./e-shape-chart-lines\";\nexport const loadShapeExtensionChartLine = () => {\n    EShapeChartLines.load();\n};\n//# sourceMappingURL=load-shape-extension-chart-line.js.map","import { EShapeEmbeddedAcceptorEdges } from \"./e-shape-embedded-acceptor-edges\";\nexport const loadShapeExtensionEmbeddedAcceptorEdge = () => {\n    EShapeEmbeddedAcceptorEdges.load();\n};\n//# sourceMappingURL=load-shape-extension-embedded-acceptor-edge.js.map","import { EShapeInputs } from \"./e-shape-inputs\";\nexport const loadShapeExtensionInput = () => {\n    EShapeInputs.load();\n};\n//# sourceMappingURL=load-shape-extension-input.js.map","import * as geditor from \"./wcardinal/geditor/index.browser\";\nconst global = window;\nglobal.wcardinal = global.wcardinal || {};\nglobal.wcardinal.geditor = geditor;\n//# sourceMappingURL=wcardinal-geditor.browser.js.map"],"names":["ECommandComposition","DCommandBase","constructor","commands","selection","super","this","_commands","_selection","execute","redo","lock","i","imax","length","unlock","undo","destroy","ECommandDocumentAll","diagram","canvas","name","label","width","height","category","summary","description","backgroundColor","backgroundAlpha","_diagram","_canvas","_name","_label","_width","_height","_category","_summary","_description","_backgroundColor","_backgroundAlpha","state","DBaseStateSetImpl","background","getColor","getAlpha","color","alpha","emit","ECommandDocumentBackground","_color","_alpha","ECommandDocumentCategory","ECommandDocumentCreate","DCommandCreate","ECommandDocumentDescription","ECommandDocumentHeight","y","ECommandDocumentLabel","ECommandDocumentName","ECommandDocumentOpen","ECommandDocumentSnapBringForward","snapper","index","_snapper","_index","target","swap","ECommandDocumentSnapCreate","_target","add","remove","size","ECommandDocumentSnapDelete","ECommandDocumentSnapGridSize","_size","grid","ECommandDocumentSnapGridToggleVisibility","visible","ECommandDocumentSnapGridToggle","enable","ECommandDocumentSnapReplace","oldValue","newValue","list","_oldValue","_newValue","values","indexOf","_list","data","contains","replace","clearAndAdd","ECommandDocumentSnapSendBackward","ECommandDocumentSnapTargetToggleVisibility","ECommandDocumentSnapTargetToggle","ECommandDocumentSnapToggle","ECommandDocumentSummary","ECommandDocumentWidth","x","ECommandLayerBringForward","layerContainer","_layerContainer","children","tmp","onChildrenChange","DApplications","update","EDialogLayerValueBackground","isEqual","from","layer","EDialogLayerValue","interactive","gesture","copyTo","position","set","copy","EShapeLayerState","INVISIBLE","INTERACTIVE","DRAGGABLE","EShapeActionValueGestureOperationType","DRAG","PINCHABLE","PINCH","is","NONE","ECommandLayerChange","value","_layer","ECommandLayerCreate","_value","_layerActive","active","_layerCreated","_selectionStored","newLayer","result","create","layerActive","layerCreated","selectionStored","isEmpty","store","clear","reference","attach","detach","restore","parent","ECommandLayerDelete","_layerIndex","layerIndex","delete","attachAt","ECommandLayerSendBackward","ECommandShapeActionValueAdd","shapes","get","action","shape","ECommandShapeActionValueBringForward","_indices","indices","push","ECommandShapeActionValueRemove","ECommandShapeActionValueReplace","_oldValues","oldValues","ECommandShapeActionValueSendBackward","ECommandShapeCreate","select","_shapes","_parent","_select","clearAndAddAll","ECommandShapeDataMappingValueAdd","EShapeCapabilities","EShapeCapability","DATA_MAPPING","mapping","getMapping","ECommandShapeDataMappingValueBringForward","ECommandShapeDataMappingValueRemove","ECommandShapeDataMappingValueReplace","ECommandShapeDataMappingValueSendBackward","ECommandShapeDataValueAdd","ECommandShapeDataValueBringForward","ECommandShapeDataValueRemove","ECommandShapeDataValueReplace","ECommandShapeDataValueSendBackward","UtilShapeSearch","toIndices","toDepth","EShapeBase","toSharedParent","shapeA","shapeB","isParent","toOfParent","shapeParent","toSelected","selected","findChildById","id","recursively","child","findChildByType","type","findChild","matcher","findChildrenByType","findChildren","COMPARATOR_INDEX","a","b","UtilShapeDeleter","addAll","generateDeletedShapeList","deletedShapeSet","_a","EXCEPTIONS","Set","sort","splice","onChildTransformChange","toDirty","uploaded","undefined","onDetach","ECommandShapeDelete","ECommandShapeGroup","_before","_deleteds","_createds","before","deleteds","createds","GROUPING","deletedSet","modifier","w","h","group","EShapeGroup","EShapeResourceManagerDeserializationMode","EDITOR","transform","groupChildren","clone","EShapeLockPart","ALL","clonePosition","EShapeConnectorLine","edge","tail","tailAcceptor","acceptor","tailAcceptorShape","tailLocal","local","has","head","headAcceptor","headAcceptorShape","headLocal","EShapeConnectors","moveAll","onAttach","deleted","created","EToolSelectSelectionUpdatedPart","PROPERTY","PROPERTY_ID","SELECTION","TREE","ECommandShapeProperty","property","targets","_capabilities","_data","_property","_targets","_isMerged","capabilities","toCapability","isRecursive","isMergeable","isClassMergeable","initProperty","getParts","init","recursive","CHILDREN","capability","getProperty","merge","isMerged","datum","setProperty","ECommandShapePropertyAll","POSITION","WIDTH","HEIGHT","ROTATION","SKEW","skew","rotation","ECommandShapePropertyCapability","shapeCapability","getCapability","locked","ECommandShapePropertyCapabilityLock","ECommandShapePropertyCapabilityUnlock","ECommandShapePropertyCornerOff","corner","ECommandShapePropertyCornerOn","ECommandShapePropertySimple","ECommandShapePropertyCursor","cursor","ECommandShapePropertyRecursive","ECommandShapePropertyRecursiveSimple","ECommandShapePropertyFillColor","fill","ECommandShapePropertyFillEnable","ECommandShapePropertyFocusable","isFocusable","ECommandShapePropertyId","ECommandShapePropertyImageClear","image","gradient","ECommandShapePropertyImageFitTo","ECommandShapePropertyImage","ECommandShapePropertyInteractive","ECommandShapePropertyLineHeadColor","LINE_HEAD","points","marker","ECommandShapePropertyLineHeadMargin","margin","ECommandShapePropertyLineHeadSizeX","ECommandShapePropertyLineHeadSizeY","ECommandShapePropertyLineHeadType","EShapePointsMarkerType","ECommandShapePropertyLineTailColor","LINE_TAIL","ECommandShapePropertyLineTailMargin","ECommandShapePropertyLineTailSizeX","ECommandShapePropertyLineTailSizeY","ECommandShapePropertyLineTailType","ECommandShapePropertyPointsStyle","added","removed","LINE","style","EShapePointsStyle","ECommandShapePropertyPositionAndRotate","ECommandShapePropertyPositionLeft","rectangle","WORK","Rectangle","getBoundsLocal","ECommandShapePropertyPositionTop","ECommandShapePropertyPositionX","ECommandShapePropertyPositionY","ECommandShapePropertyPosition","ECommandShapePropertyRadius","radius","ECommandShapePropertyRotation","ECommandShapePropertyShortcut","shortcut","ECommandShapePropertySizeX","ECommandShapePropertySizeY","ECommandShapePropertySkew","ECommandShapePropertyStrokeAlign","stroke","align","ECommandShapePropertyStrokeColor","ECommandShapePropertyStrokeEnable","ECommandShapePropertyStrokeSideOff","side","ECommandShapePropertyStrokeSideOn","ECommandShapePropertyStrokeStyle","ECommandShapePropertyStrokeWidth","ECommandShapePropertyTextAlignHorizontal","text","horizontal","ECommandShapePropertyTextAlignVertical","vertical","ECommandShapePropertyTextClipping","clipping","ECommandShapePropertyTextColor","ECommandShapePropertyTextDirection","direction","ECommandShapePropertyTextFamily","family","ECommandShapePropertyTextFitting","fitting","ECommandShapePropertyTextOffsetHorizontal","offset","ECommandShapePropertyTextOffsetVertical","ECommandShapePropertyTextOutlineColor","outline","ECommandShapePropertyTextOutlineEnable","ECommandShapePropertyTextOutlineWidth","ECommandShapePropertyTextPaddingHorizontal","padding","ECommandShapePropertyTextPaddingVertical","ECommandShapePropertyTextSizeDelta","Math","max","ECommandShapePropertyTextSize","ECommandShapePropertyTextSpacingHorizontal","spacing","ECommandShapePropertyTextSpacingVertical","ECommandShapePropertyTextStyle","ECommandShapePropertyTextValue","ECommandShapePropertyTextWeight","weight","ECommandShapePropertyTitle","title","ECommandShapeReplaceOne","newShape","oldShape","_newShape","_oldShape","swapLast","ECommandShapeReplace","factory","_factory","_newShapes","_oldShapes","oldShapes","newShapes","REPLACING","pivot","pivotX","pivotY","TRANSFORM","ECommandShapeSelect","after","_after","isClean","ECommandShapeTreeBringForward","SHAPE_COMPARATOR","ECommandShapeTreeBringToFront","indexSize","indexIndex","indexCurrent","indexOffset","Number","MAX_SAFE_INTEGER","ECommandShapeTreeSendBackward","ECommandShapeTreeSendToBack","UtilShapeTransforms","prepare","editor","EShapeEditor","updateTransform","internalTransform","internalTransformParentInverse","invert","identity","copyFrom","TRANSFORM_CHILD","finalize","apply","newLocalTransform","localTransform","append","applyLocal","c","d","tx","ty","UPLOADED","cposition","crotation","cskew","cwidth","cheight","rx","atan2","ry","px","py","toSizeNormalized","sqrt","s","ECommandShapeUngroup","isUngroupable","targetLocalTransform","targetChildren","clones","j","jmax","prepend","tailLocalX","tailLocalY","tailNormal","normal","tailNormalX","tailNormalY","ndx","ndy","nd","f","headLocalX","headLocalY","headNormal","headNormalX","headNormalY","UNGROUPING","newGraphicTester","graphic","graphicId","mappings","Map","UtilCsvState","lines","linesLength","line","lineLength","next","newCursor","nextLine","UtilCsv","parseLine","icomma","charAt","k","unescape","substring","parse","str","split","row","stringifyLine","delimiter","escape","String","stringify","toGraphicTesterObject","rows","uuid","parseInt","original","object","toGraphicTesterSerialized","simple","parsed","JSON","uuids","objects","min","toGraphicTesterSimple","serialized","forEach","key","EShapeActionExtensions","extension","_b","_typeToExtension","_extensions","EShapeActionValueDeserializers","deserializer","typeToExtension","each","iteratee","extensions","EShapeActionExtensionInputType","TEXT","EDialogActionExtension","dialog","condition","layout","_extension","_dialog","_condition","_layout","newSelect","extensionItems","items","DSelect","menu","newSelectMenuItems","item","selectLayout","_selectLayout","newSelectLayout","conditionIndex","getChildIndex","addChildAt","addChild","newLabeled","inputs","_inputs","newInputs","extensionInputs","inputText","newInputText","DInputText","on","enter","ok","newLabel","DInputLabel","newSpace","DLayoutSpace","input","DLayoutHorizontal","inputLayouts","_inputLayouts","newInputLayouts","labeled","toValue","fromValue","show","onShow","hide","reset","initial","EDialogActionExtensionContainer","_selected","e","onChange","toIconName","EShapeExtensions","EShapeDeserializers","onDeserialized","EShapeOnDeserializeds","runtime","EShapeRuntimes","EShapeUploadeds","createGroupUploaded","iconBuilder","icon","svg","build","icons","texture","ECommandShapeEmbeddedAcceptorEdgePropertySide","EShapeEmbeddedAcceptorEdge","EShapeAcceptorEdgeSide","ECommandShapeEmbeddedAcceptorEdgePropertySubtype","subtype","EShapeAcceptorEdgeType","HEAD","ECommandShapeEmbeddedAcceptorEdgePropertyVvisible","vvisible","EEditorShapeEmbeddedAcceptorEdge","DPane","options","_icons","initLayout","content","setHeight","DLayoutVertical","newTextLabel","selectSubtype","selectSide","checkVvisible","isDisabled","onSelectionChange","DText","subtheme","getLabel","_selectSubtype","newSelectSubtype","toSelectSubtypeLabel","TAIL","change","onSelectSubtypeChanged","DControllers","getCommandController","_selectSide","newSelectSide","DSelectMultiple","LEFT","toSelectSideLabel","check","TOP","RIGHT","BOTTOM","onSelectSideChange","fromSelectSideValues","toSelectSideValues","_checkVvisible","newCheckIsVvisible","DButtonCheckRight","getCheckIsVvisibleLabel","onCheckVvisibleChanged","inactive","isVvisible","last","isEnabled","isActive","_subtheme","newSubtheme","DThemes","EShapeEmbeddedAcceptorEdges","getTheme","existing","load","getName","EShapeType","EMBEDDED_ACCEPTOR_EDGE","creator","ECommandShapeButtonPropertyIsActive","EShapeButton","ECommandShapeButtonPropertyIsGrouped","isGrouped","ECommandShapeButtonPropertyIsToggle","isToggle","EEditorShapeButton","checkIsToggle","checkIsGrouped","checkIsActive","_checkIsToggle","newCheckIsToggle","getCheckIsToggleLabel","onCheckIsToggleChanged","onSelectionChangeCheckIsToggle","_checkIsGrouped","newCheckIsGrouped","getCheckIsGroupedLabel","onCheckIsGroupedChanged","onSelectionChangeCheckIsGrouped","_checkIsActive","newCheckIsActive","getCheckIsActiveLabel","onCheckIsActiveChanged","onSelectionChangeCheckIsActive","EShapeButtons","BUTTON","EShapeButtonLayerButtonValue","layers","bringToFront","EShapeActionValueShowHideLayer","isEquals","layersLength","targetLayers","serizlize","manager","layersId","serializedLayers","addResource","deserialize","resources","getExtension","setExtension","deserializeLayers","resourcesLength","EShapeButtonLayerButtonValueContainer","_values","_sizeX","_margin","_onChange","at","indexA","indexB","source","sourceValues","sourceValuesLength","serialize","isChanged","EShapeButtonLayerIds","ID","EXTENSION","EShapeButtonLayer","EShapeGroupShadowed","mode","_button","onButtonValueChange","_corner","EShapeCorner","button","updateUploaded","newButtons","layoutButtons","onSizeChange","shapeButton","buttonCount","childrenLength","master","toCorner","buttonValues","buttonValuesLength","buttonMargin","sizeX","sizeY","totalWeight","buttonSpaceFactor","part","EShapeCopyPart","resource","ECommandShapeButtonLayerValueAdd","ECommandShapeButtonLayerValueBringForward","ECommandShapeButtonLayerValueMargin","ECommandShapeButtonLayerValueRemove","ECommandShapeButtonLayerValueReplace","ECommandShapeButtonLayerValueSendBackward","EDialogShapeButtonLayerValue","DDialogLayered","newContentChildren","theme","inputLabel","inputWidth","newLayoutOf","getSelectLayerLabel","selectLayer","checkBringToFront","newLayoutLabel","newLayoutSpace","_inputLabel","newInputLabel","DInputTextAndLabel","getInputLabelLabel","space","_inputWidth","newInputWidth","DInputRealAndLabel","getInputWidthLabel","_selectLayer","newSelectLayer","newSelectLayerMenuItemOptions","_checkBringToFront","newCheckBringToFront","DButtonCheck","getCheckBringToFromLabel","DMenu","fit","slice","getResolvedValue","getType","EEditorShapeButtonLayer","buttonNew","buttonDelete","buttonBringForward","buttonSendBackward","columnList","inputMargin","onListSelectionChange","_buttonNew","newButtonNew","DButtonAmbient","new","getButtonNewTitle","emitter","onButtonNewActive","opener","dialogButton","open","then","onSelectionChangeButtonNew","_buttonDelete","newButtonDelete","getButtonDeleteTitle","first","onListSelectionChangeButtonDelete","_buttonBringForward","newButtonBringForward","arrow_up","getButtonBringForwardTitle","onListSelectionChangeButtonBringForward","_buttonSendBackward","newButtonSendBackward","arrow_down","getButtonSendBackwardTitle","onListSelectionChangeButtonSendBackward","_dialogButton","newDialogButton","_columnList","newColumnList","DList","toLabel","updater","newItem","DListItem","dblclick","_","onColumnListDblClick","columnDialog","onSelectionChangeColumnList","_inputMargin","newInputMargin","getInputMarginLabel","onSelectionChangeInputRowHeight","EShapeButtonLayers","PRIMITIVE","STROKE_SIDE","BORDER_RADIUS","deserializeBase","EShapeChartTick","major","minor","EShapeChartTickMajor","count","EShapeChartTickMinor","EShapeChartAxisX","tick","EShapeChartAxisY","EShapeChartAxis","EShapeChartLineIds","PLOT_AREA_ID","LINE_ID","X_AXIS_ID","X_AXIS_TICK_MAJOR_ID","X_AXIS_TICK_MINOR_ID","Y_AXIS_ID","Y_AXIS_TICK_MAJOR_ID","Y_AXIS_TICK_MINOR_ID","EShapeChartLine","axis","ECommandChartAxisXPadding","ECommandChartAxisYPadding","ECommandChartTickXMajorCount","ECommandChartTickXMinorCount","ECommandChartTickYMajorCount","ECommandChartTickYMinorCount","EShapeChartAxes","getPlotArea","newPlotArea","EShapeRectangle","EShapeDefaults","FILL_ALPHA","newPlotAreaLabel","EShapeTextAlignVertical","OUTSIDE_TOP","getLine","newLine","sxh","syh","createLine","STROKE_WIDTH","getXAxis","getXAxisTickMajor","getXAxisTickMinor","newXAxis","EShapeBar","EShapeBarPosition","newXAxisLabel","OUTSIDE_BOTTOM","createXAxis","createChildren","deleteXAxis","deleteChildren","setXAxisPadding","newXAxisTickMajor","newXAxisTickMinor","createXAxisTickMajor","deleteXAxisTickMajor","setXAxisTickMajorCount","createXAxisTickMinor","deleteXAxisTickMinor","setXAxisTickMinorCount","getYAxis","getYAxisTickMajor","getYAxisTickMinor","newYAxis","newYAxisLabel","EShapeTextAlignHorizontal","OUTSIDE_LEFT","EShapeTextDirection","BOTTOM_TO_TOP","createYAxis","deleteYAxis","setYAxisPadding","newYAxisTickMajor","newYAxisTickMinor","createYAxisTickMajor","deleteYAxisTickMajor","setYAxisTickMajorCount","createYAxisTickMinor","deleteYAxisTickMinor","setYAxisTickMinorCount","EEditorShapeChartLine","getCheckXAxisLabel","self","getCheckXAxisMajorTickLabel","top","right","left","bottom","getCheckXAxisMinorTickLabel","getCheckYAxisLabel","getCheckYAxisMajorTickLabel","getCheckYAxisMinorTickLabel","getTextMajorTickCountLabel","DInputInteger","getTextMinorTickCountLabel","getTextPaddingLabel","EShapeChartLineActionRuntime","EShapeActionRuntimeBase","cloned","xmajorCount","ymajorCount","xminorCount","yminorCount","xmajors","initTicks","ymajors","xminors","yminors","workMajorPositions","Float64Array","xtick","xformatter","NumberFormatters","ytick","yformatter","plotArea","xpadding","ypadding","ticks","toStepScale","scale","getStep","span","power","floor","log","LN10","base","pow","getTickPositions","step","ratio","NaN","start","istart","ceil","stop","istop","nticks","updateTicksXMinor","mstep","lmin","lmax","mticks","minorCount","mtick","toStepMinor","updateTicksX","positions","format","updateTicksYMinor","updateTicksY","updateLines","xmin","xratio","lxmin","ymin","yratio","lymax","pointsValues","valueValues","valueValuesLength","valueTimes","times","time","xmax","ymax","valuesLength","timesLength","t","v","xspan","yspan","sx","sy","lxmax","lymin","EShapeChartLineRuntime","EShapeRuntimeImpl","actions","EShapeChartLines","EShapeInputs","EShapeRectangleRounded","STROKE_COLOR","EShapeActionValueMiscInput","EShapeActionValueMiscType","INPUT_TEXT","EShapeActionValueOnInputAction","EMIT_EVENT","EShapeActionValueChangeColor","EShapeActionValueChangeColorType","STROKE","EShapeActionValueChangeColorTarget","COLOR","HIGHLIGHT_COLOR","ALPHA","EShapeTableCell","columnValues","column","columnValueRuntime","EShapeTableColumnValueBody","EShapeTableColumnValueHeader","labelId","EShapeTableColumnValueType","NUMBER","EShapeTableColumnValue","getter","setter","header","body","getterId","setterId","formatterId","headerId","bodyId","EShapeTableColumn","EShapeTableIds","HEADER_ID","BODY_ID","EShapeTableRowSelectionType","SINGLE","MULTIPLE","EShapeTableRowSelection","toggle","getBody","setRowActive","addTo","lastIndex","getRow","cells","EShapeTableRow","_isCellUpdateAllowed","_isCellUpdateCalled","updateCells","disallowCellUpdate","allowCellUpdate","invoke","isCellUpdatedCalled","selectionId","EShapeTable","_columnWidths","_columnXs","onColumnChange","onRowChange","cell","newCellsHeader","newCellsBody","layoutCells","columnCount","toRowCountRequired","abs","isColumnDirty","rowsLength","rowCountRequired","rowCount","masterEven","masterOdd","irow","ACTION","masterCellEven","masterCellOdd","columnCountRequired","cellsLength","icolumn","rowHeight","rowHeightHalf","columnValuesLength","columnWidths","columnXs","columnWidthFactor","columnX","columnWidth","hcells","hcellsLength","hcell","ECommandShapeTableColumnValueAdd","ECommandShapeTableColumnValueBringForward","ECommandShapeTableColumnValueRemove","ECommandShapeTableColumnValueReplace","ECommandShapeTableColumnValueSendBackward","ECommandShapeTableRowHeight","ECommandShapeTableRowSelectionType","EDialogTableColumn","getSelectColumnValueTypeLabel","toSelectColumnValueTypeLabel","_selectType","DInputReal","getInputGetterLabel","_inputGetter","getInputSetterLabel","_inputSetter","getInputFormatLabel","_inputFormat","getSelectTextAlignLabel","CENTER","toTextAlignLabel","_selectAlign","EEditorShapeTable","getInputRowHeightLabel","inputRowHeight","getSelectRowSelectionTypeLabel","selectRowSelectionType","_columnDialog","newColumnDialog","_inputRowHeight","newInputRowHeight","_selectRowSelectionType","newSelectRowSelectionType","toSelectRowSelectionTypeLabel","onSelectionChangeSelectRowSelectionType","EShapeTableActionRuntime","table","imin","jmin","columnRuntime","formatter","EShapeTableCellActionValueChangeColor","EShapeActionValueChangeColorCode","FILL","getColorCode","activeHoverColor","UtilRgb","brighten","activeColor","hoverColor","darken","FILL_COLOR","EShapeTableBodyRuntime","lastRowIndex","lastColumnIndex","onClick","isSingle","isNotSingle","originalEvent","ctrlKey","shiftKey","onDblClick","interactionManager","getCell","focus","onOut","setRowHovered","onCellTouched","rowIndex","columnIndex","lastRowTouched","getLayer","view","isHovered","WORK_POINT","Point","EShapeTableBody","containsAbs","ax","ay","containsAbsBBox","containsText","containsChildren","toValueDefault","fromValueDefault","formatterDefault","EShapeTableColumnValueRuntime","parseToValue","parseFromValue","parseFormat","trim","expression","def","defLiteral","Function","EShapeTableHeaderRuntime","EShapeTableHeader","EShapeTableRuntime","EShapeTables","headerCell","EShapeStrokeSide","even","odd","cellEven","cellOdd","newHeaderLabel","getHeaderName","deserializeHeader","getBodyName","deserializeBody","EShapeExtensionFactories","_factories","factories","EDialogActionKeywordInput","DInputSearch","getClipperRect","resolution","point","UtilHtmlElement","EDialogActionKeywordBoard","DBoard","onInputChange","_input","newInput","word","newKeywords","keywords","_keywords","filtered","keyword","newList","toId","_text","newText","wordWrap","EDialogAction","showHideTypeLayout","blinkTypeLayout","transformTypeLayout","changeColorTypeLayout","changeColorTargetLayout","rotateTypeLayout","resizeTypeLayout","originXLayout","originYLayout","moveTypeLayout","openTypeLayout","openDialogTypeLayout","changeTextTypeLayout","miscTypeLayout","onInputActionLayout","whenTypeLayout","gestureTypeLayout","gestureOperationTypeLayout","selectLayerLayout","intervalLayout","amount","targetName","colorLayout","argument","contents","initialization","pointerEventsLayout","colorCode","alphaCode","brightness","blend","scaleLayout","checkBringToFrontLayout","inNewWindowLayout","onChangeBound","showHideType","blinkType","transformType","resizeType","changeColorTarget","openType","openDialogType","miscType","themeShape","_themeShape","newThemeShape","EShapeActionValueType","SHOW_HIDE","toTypeLabel","BLINK","CHANGE_COLOR","CHANGE_TEXT","CHANGE_CURSOR","OPEN","GESTURE","MISC","getSelectActionLabel","buttonKeyword","_buttonKeyword","newButtonKeyword","action_keyword","getButtonKeywordTitle","onButtonKeywordActive","onButtonKeywordInactive","boardKeyword","getBoardKeywordOffset","boardKeywordWidth","_boardKeyword","newBoardKeyword","_showHideType","newShowHideType","EShapeActionValueShowHideType","SHAPE","toShowHideTypeLabel","LAYER","_showHideTypeLayout","onChangeShowHideTypeLayout","_blinkType","newBlinkType","EShapeActionValueBlinkType","VISIBILITY","toBlinkTypeLabel","BRIGHTEN","DARKEN","OPACITY","COLOR_FILL","COLOR_STROKE","_blinkTypeLayout","onChangeBlinkTypeLayout","_transformType","newTransformType","EShapeActionValueTransformType","MOVE","toTransformTypeLabel","ROTATE","RESIZE","_transformTypeLayout","onChangeTransformTypeLayout","changeColorType","_changeColorType","newChangeColorType","toChangeColorTypeLabel","TEXT_OUTLINE","_changeColorTypeLayout","onChangeChangeColorTypeLayout","_changeColorTarget","newChangeColorTarget","COLOR_AND_ALPHA","toChangeColorTargetLabel","CODE","BRIGHTNESS","_changeColorTargetLayout","onChangeChangeColorTargetLayout","rotateType","_rotateType","newRotateType","EShapeActionValueTransformRotateType","RELATIVE","toTransformRotateTypeLabel","ABSOLUTE","_rotateTypeLayout","onChangeRotateTypeLayout","_resizeType","newResizeType","EShapeActionValueTransformResizeType","RELATIVE_SIZE","ABSOLUTE_SIZE","toTransformResizeTypeLabel","ABSOLUTE_HEIGHT","RELATIVE_HEIGHT","ABSOLUTE_WIDTH","RELATIVE_WIDTH","_resizeTypeLayout","onChangeResizeTypeLayout","originX","_originX","newOriginX","_originXLayout","getInputOriginXLabel","onChangeOriginXLayout","originY","_originY","newOriginY","_originYLayout","getInputOriginYLabel","onChangeOriginYLayout","moveType","_moveType","newMoveType","EShapeActionValueTransformMoveType","RELATIVE_X","toTransformMoveTypeLabel","RELATIVE_Y","ABSOLUTE_X","ABSOLUTE_Y","FORWARD_OR_BACKWARD","LEFT_OR_RIGHT","_moveTypeLayout","onChangeMoveTypeLayout","_openType","newOpenType","EShapeActionValueOpenType","DIAGRAM","newOpenTypeMenuItems","toOpenTypeLabel","PAGE","DIALOG","EShapeActionOpenExtensions","_openTypeLayout","onChangeOpenTypeLayout","_openDialogType","newOpenDialogType","EShapeActionValueOpenDialogType","newOpenDialogTypeMenuItems","toOpenDialogTypeLabel","INTEGER","REAL","BOOLEAN","DATE","TIME","DATETIME","EShapeActionOpenDialogExtensions","_openDialogTypeLayout","onChangeOpenDialogTypeLayout","changeTextType","_changeTextType","newChangeTextType","EShapeActionValueChangeTextType","toChangeTextTypeLabel","_changeTextTypeLayout","onChangeChangeTextTypeLayout","_miscType","newMiscType","newMiscTypeMenuItems","toMiscTypeLabel","INPUT_INTEGER","INPUT_REAL","WRITE_BOTH","WRITE_LOCAL","WRITE_REMOTE","HTML_ELEMENT","EXECUTE","EShapeActionMiscExtensions","_miscTypeLayout","onChangeMiscTypeLayout","onInputAction","_onInputAction","newOnInputAction","toOnInputActionLabel","_onInputActionLayout","onChangeOnInputActionLayout","DIALOG_TEXT","DIALOG_INTEGER","DIALOG_REAL","DIALOG_BOOLEAN","whenType","_whenType","newWhenType","UtilHtmlElementWhen","FOCUSED","CLICKED","toHtmlElementWhenLabel","DOUBLE_CLICKED","ALWAYS","_whenTypeLayout","getSelectWhenLabel","toWhenTypeValue","toWhenType","whenTypeValue","onChangeWhenTypeLayout","HTML_ELEMENT_WITHOUT_POINTER_EVENTS","gestureType","_gestureType","newGestureType","EShapeActionValueGestureType","toGestureTypeLabel","_gestureTypeLayout","onChangeGestureTypeLayout","gestureOperationType","_gestureOperationType","newGestureOperationType","fromGestureOperationType","toGestureOperationTypeLabel","toGestureOperationType","types","_gestureOperationTypeLayout","onChangeGestureOperationTypeLayout","_selectLayerLayout","onChangeSelectLayerLayout","newCondition","getInputConditionLabel","onChangeCondition","interval","_interval","newInterval","_intervalLayout","newIntervalLayout","getInputIntervalLabel","getInputIntervalUnitLabel","DAlignHorizontal","onChangeIntervalLayout","newSize","getInputSizeLabel","onChangeSize","_amount","newAmount","getInputAmountLabel","onChangeAmount","_contents","newContents","getInputValueLabel","onChangeContents","_initialization","newInitialization","getInputInitializationLabel","onChangeInitialization","_pointerEventsLayout","pointerEvents","onChangePointerEventsLayout","_pointerEvents","newPointerEvents","getCheckPointEventsLabel","_targetName","newTargetName","getInputTargetNameLabel","onChangeTargetName","newColor","DButtonColor","dialogNew","dialogCurrent","current","_colorLayout","newColorLayout","getButtonColorLabel","onChangeColorLayout","newTarget","getInputTargetLabel","onChangeTarget","_argument","newArgument","getInputArgumentLabel","onChangeArgument","_colorCode","newColorCode","getInputColorCodeLabel","onChangeColorCode","_alphaCode","newAlphaCode","getInputAlphaCodeLabel","onChangeAlphaCode","_brightness","newBrightness","getInputBrightnessLabel","onChangeBrightness","_blend","newBlend","getInputBlendLabel","onChangeBlend","_initial","newInitial","getInputInitialLabel","onChangeInitial","_step","newStep","getInputStepLabel","onChangeStep","_min","newMin","getInputMinLabel","onChangeMin","_max","newMax","getInputMaxLabel","onChangeMax","_scaleLayout","newScaleLayout","getInputScaleLabel","scaleMin","scaleMax","onChangeScaleLayout","_scaleMin","newScaleMin","_scaleMax","newScaleMax","getCheckBringToFrontLabel","_checkBringToFrontLayout","onChangeCheckBringToFrontLayout","inNewWindow","_inNewWindow","newInNewWindow","getCheckInNewWindowLabel","_inNewWindowLayout","onChangeInNewWindowLayout","_c","_d","EShapeActionValueShowHideShape","blinkColor","EShapeActionValueBlink","EShapeActionValueChangeColorTypes","pack","changeColor","EShapeActionValueChangeColorBrightness","EShapeActionValueTransformResize","EShapeActionValueTransformMove","EShapeActionValueTransformRotate","EShapeActionValueChangeText","EShapeActionValueOpenDialog","EShapeActionValueOpenDialogExtension","EShapeActionValueOpen","EShapeActionValueOpenExtension","EShapeActionValueEmitEvent","EShapeActionValueChangeCursor","EShapeActionValueGesture","EShapeActionValueMiscEmitEvent","EShapeActionValueMiscWrite","EShapeActionValueMiscHtmlElement","EShapeActionValueMiscExecute","EShapeActionValueMiscExtension","EShapeActionValueShowHide","unpack","opetype","dialogType","operationType","EShapeActionValueMisc","EDialogDataMappingValue","inputSource","inputDestination","inputInitial","_inputSource","newInputSource","onInputSourceChanged","getInputSourceLabel","_newSource","updateRows","_inputDestination","newInputDestination","onInputDestinationChanged","getInputDestinationLabel","_newDestination","_inputInitial","newInputInitial","_table","newTable","DTable","columns","newColumnOptions","getTableColumnDataIdLabel","editable","sortable","getTableColumnMappedToLabel","mappedId","_ids","toIds","ids","newIds","scope","EShapeDataValueScope","PRIVATE","onUpdateRowsBound","_onUpdateRowsBound","newOnUpdateRowsBound","onUpdateRows","_onUpdateRowsTimeout","_isRowsDirty","newRows","window","setTimeout","mapper","_mapper","newSource","_lastSource","EShapeDataMapperImpl","destinations","_destinations","newDestination","_lastDestination","EShapeDataValueImpl","map","EDialogDataValue","layoutType","layoutScope","inputId","inputAs","layoutInterval","inputFormat","layoutRangeType","inputRangeFrom","inputRangeTo","inputCapacity","layoutOrder","_inputId","newInputId","getInputIdLabel","_inputAs","newInputAs","getInputAsLabel","_layoutType","newLayoutType","getSelectTypeLabel","selectType","newSelectType","EShapeDataValueType","newSelectTypeItems","getSelectTypeValueLabel","BOOLEAN_ARRAY","NUMBER_ARRAY","STRING","STRING_ARRAY","OBJECT","OBJECT_ARRAY","TICKER","EShapeDataValueExtensions","_layoutScope","newLayoutScope","getSelectScopeLabel","selectScope","_selectScope","newSelectScope","PUBLIC","getSelectScopeValueLabel","PROTECTED","_layoutInterval","newLayoutInterval","inputInterval","_inputInterval","newInputInterval","newInputFormat","_layoutRangeType","newLayoutRangeType","getSelectRangeTypeLabel","selectRangeType","_selectRangeType","newSelectRangeType","EShapeDataValueRangeType","getSelectRangeTypeValueLabel","FROM","TO","FROM_TO","_inputRangeFrom","newInputRangeFrom","getInputRangeFromLabel","_inputRangeTo","newInputRangeTo","getInputRangeToLabel","_inputCapacity","newInputCapacity","DInputIntegerAndLabel","getInputCapacityLabel","_layoutOrder","newLayoutOrder","getSelectOrderLabel","selectOrder","_selectOrder","newSelectOrder","EShapeDataValueOrder","ASCENDING","getSelectOrderValueLabel","DESCENDING","rangeType","order","as","range","to","toInterval","capacity","EDialogLayer","inputName","inputPositionLayout","inputSizeLayout","checkBackgroundLayout","colorBackgroundLayout","selectGestureLayout","checkVisibleLayout","checkInteractiveLayout","inputA","inputB","_inputName","newInputName","getInputNameLabel","inputX","_inputX","newInputX","inputY","_inputY","newInputY","_inputPositionLayout","getInputPositionLabel","inputHeight","_inputHeight","newInputHeight","_inputSizeLayout","checkBackground","_checkBackground","newCheckBackground","getCheckBackgroundLabel","onCheckBackgroundChange","colorBackground","_checkBackgroundLayout","getTextBackgroundLabel","_colorBackground","newColorBackground","_colorBackgroundLayout","checkVisible","_checkVisible","newCheckVisible","getCheckVisibleLabel","_checkVisibleLayout","checkInteractive","_checkInteractive","newCheckInteractive","getCheckInteractiveLabel","_checkInteractiveLayout","selectGesture","_selectGesture","newSelectGesture","getSelectGestureValueLabel","_selectGestureLayout","getSelectGestureLabel","EDialogProcessing","DDialogProcessing","toReasonMalformedLabel","toReasonMalformedRange","lower","upper","toReasonMalformed","reason","toReasonTarget","targetLabel","toReasonTargetAt","atLabel","toReason","toButtonText","reject","footer","buttonOk","dialogSelectThumbnailSize","getDialogSelectThumbnailSize","dialogSelectTHumbnailNotFound","getDialogSelectThumbnailNotFound","newDialogTHumbnailNotFound","thumbnailSize","devicePixelRatio","svgSize","toSvgTexture","newDialogSelectWithThumbnailsOptions","controller","toThumbnail","onSelect","thumbnailNotFound","itemSize","textures","toImage","isString","newTexture","Texture","baseTexture","checkTextures","clearTimeoutId","clearTextures","url","off","valid","itemPadding","DDialogSelectListItem","with","tint","clearTimeout","close","newDialogSelectWithThumbnails","DDialogSelect","EDialogSnap","getSelectDirectionLabel","inputPosition","ESnapperTargetValueType","VERTICAL","getSelectDirectionValueLabel","HORIZONTAL","_inputPosition","newInputPosition","ESnapperTargetValue","EEditorAction","actionList","checkFocusable","labelTitle","inputTitle","labelShortcut","inputShortcut","labelCursor","dropdownCursor","actionDialog","addActionValue","DBaseState","DISABLED","removeActionValue","bringActionValueForward","sendActionValueBackward","_actionDialog","newActionDialog","_actionList","newActionList","onActionListDblClick","onActionListSet","unset","onActionListUnset","oldActionValue","newActionValue","replaceActionValue","getImageSource","onSelectionChangeActionList","setInteractive","onSelectionChangeCheckInteractive","_checkFocusable","newCheckFocusable","getCheckFocusableLabel","setFocusable","onSelectionChangeCheckFocusable","_labelShortcut","newLabelShortcut","getInputShortcutLabel","_inputShortcut","newInputShortcut","setShortcut","toNormalizedShortcut","trimmed","onSelectionChangeInputShortcut","_labelTitle","newLabelTitle","getInputTitleLabel","_inputTitle","newInputTitle","setTitle","toNormalizedTitle","onSelectionChangeInputTitle","_labelCursor","newLabelCursor","getDropdownCursorLabel","_dropdownCursor","newDropdownCursor","DDropdown","newDropdownCursorMenuItems","cursors","setCursor","_cursors","getCursors","onSelectionChangeDropdownCursor","EDialogCanvas","onDefaultChange","categoryDefault","default","categoryItems","layoutCategory","categoryItem","selectCategory","writable","layoutName","layoutLabel","layoutWidth","layoutHeight","layoutSummary","layoutDescription","layoutBackground","_layoutName","newLayoutName","_layoutLabel","_layoutWidth","newLayoutWidth","_layoutHeight","newLayoutHeight","getInputHeightLabel","_layoutCategory","newLayoutCategory","getSelectCategoryLabel","_selectCategory","newSelectCategory","_layoutSummary","newLayoutSummary","newLabelSummary","inputSummary","getInputSummaryLabel","_inputSummary","newInputSummary","DInputTextArea","_layoutDescription","newLayoutDescription","newLabelDescription","inputDescription","getInputDescriptionLabel","_inputDescription","newInputDescription","_layoutBackground","newLayoutBackground","newLabelBackground","inputBackground","getInputBackgroundLabel","_inputBackground","newInputBackground","diagramCanvas","isNumber","EEditorCanvas","_e","mask","shadow","toOptions","buttonEditor","border","DCornerMask","TOP_LEFT","onInputNameChange","_buttonEditor","newButtonEditor","editor_canvas","onButtonEditorActive","dialogEditor","_dialogEditor","newDialogEditor","render","renderer","textFormat","toFixed","textFormatDegree","PI","textUnformatDegree","parseFloat","EEditorCoordinate","_workRectangle","_updateInputShape","_updateInputId","_isUpdateInputShapeChanged","_renderInputsBound","renderInputs","inputPositionX","inputPositionY","inputPositionLeft","inputPositionTop","inputSizeX","inputSizeY","inputRotation","inputSkew","layoutAlignHorizontally","layoutAlignVertically","setId","_inputPositionX","newInputPositionX","getInputPositionXLabel","setPositionX","_inputPositionY","newInputPositionY","getInputPositionYLabel","setPositionY","_inputPositionLeft","newInputPositionLeft","getInputPositionLeftLabel","setPositionLeft","_inputPositionTop","newInputPositionTop","getInputPositionTopLabel","setPositionTop","_inputSizeX","newInputSizeX","getInputSizeXLabel","setSizeX","_inputSizeY","newInputSizeY","getInputSizeYLabel","setSizeY","_inputRotation","newInputRotation","getInputRotationLabel","editing","unformatter","setRotation","_inputSkew","newInputSkew","getInputSkewLabel","setSkew","_layoutAlignHorizontally","newLayoutAlignHorizontally","buttonAlignLeft","buttonAlignCenter","buttonAlignRight","buttonDistributeHorizontally","buttonDistributeVertically","buttonLock","_layoutAlignVertically","newLayoutAlignVertically","buttonAlignTop","buttonAlignMiddle","buttonAlignBottom","buttonRotateLeft","buttonRotateRight","_buttonAlignLeft","newButtonAlignLeft","editor_coordinate_align_left","getButtonAlignLeftTitle","saveForTranslate","alignLeft","_buttonAlignCenter","newButtonAlignCenter","editor_coordinate_align_center","getButtonAlignCenterTitle","alignCenter","_buttonAlignRight","newButtonAlignRight","editor_coordinate_align_right","getButtonAlignRightTitle","alignRight","_buttonAlignTop","newButtonAlignTop","editor_coordinate_align_top","getButtonAlignTopTitle","alignTop","_buttonAlignMiddle","newButtonAlignMiddle","editor_coordinate_align_middle","getButtonAlignMiddleTitle","alignMiddle","_buttonAlignBottom","newButtonAlignBottom","editor_coordinate_align_bottom","getButtonAlignBottomTitle","alignBottom","_buttonDistributeHorizontally","newButtonDistributeHorizontally","editor_coordinate_distribute_horizontally","getButtonDistributeHorizontallyTitle","distributeHorizontally","_buttonDistributeVertically","newButtonDistributeVertically","editor_coordinate_distribute_vertically","getButtonDistributeVerticallyTitle","distributeVertically","_buttonRotateLeft","newButtonRotateLeft","editor_coordinate_rotate_left","getButtonRotateLeftTitle","prepareRotate","saveForRotate","rotate","_buttonRotateRight","newButtonRotateRight","editor_coordinate_rotate_right","getButtonRotateRightTitle","_buttonLock","newButtonLock","lockCapability","COORDINATE","unlockCapability","hasPositionCapability","isLocked","updateInputs","EEditorDataMapping","listDataMappingValue","onListDataMappingValueSelectionChange","dialogDataMappingValue","addDataMappingValue","removeDataMappingValue","onListDataMappingValueSelectionChangeButtonDelete","bringDataMappingValueForward","onListDataMappingValueSelectionChangeButtonBringForward","sendDataMappingValueBackward","onListDataMappingValueSelectionChangeButtonSendBackward","_dialogDataMappingValue","newDialogDataMappingValue","_listDataMappingValue","newListDataMappingValue","destination","onListDataMappingValueDblClick","replaceDataMappingValue","onSelectionChangeListDataMappingValue","EEditorData","listDataValue","onListDataValueSelectionChange","dialogDataValue","addDataValue","removeDataValue","onListDataValueSelectionChangeButtonDelete","bringDataValueForward","onListDataValueSelectionChangeButtonBringForward","sendDataValueBackward","onListDataValueSelectionChangeButtonSendBackward","_dialogDataValue","newDialogDataValue","_listDataValue","newListDataValue","prefix","onListDataValueDblClick","replaceDataValue","onSelectionChangeListDataValue","EEditorLayerItem","iconsEye","iconsEyeSlash","work","_iconsEye","_iconsEyeSlash","_iconsWork","toLocal","global","getLeft","UtilPointerEvent","toGlobal","EEditorLayer","_isInitialized","onCanvasChange","newCanvas","isShown","onLayerChange","onLayerChangeBound","_onLayerChangeBound","newDialog","eye","eye_slash","eyeclick","onListDblClick","keydown","UtilKeyboardEvent","isDeleteKey","dialogLayer","onListLayerChange","listLayer","forcibly","oldCanvas","isActiveDeletable","isActiveNotLast","isActiveNotFirst","updateModifier","shapeTypeTheme","getShapeTypeTheme","toShapeLabel","shapeType","EMBEDDED","EShapeEmbedded","toShapeTypeLabel","EEditorSearch","_finder","finder","inputSearch","getSelectStateLabel","selectState","buttonExecute","_inputSearch","newInputSearch","search","activate","newSelectTypeMenuItems","newSelectTypeMenuItem","newSelectTypeMenuItemShape","CIRCLE","SEMICIRCLE","RECTANGLE","RECTANGLE_ROUNDED","TRIANGLE","TRIANGLE_ROUNDED","CONNECTOR_LINE","CONNECTOR_ELBOW","IMAGE","GROUP","BAR","EMBEDDED_LAYER","getSelectTypeValue","_selectState","newSelectState","newSelectStateMenuItem","toStateLabel","getSelectStateValue","_buttonExecute","newButtonExecute","DButtonPrimary","getButtonExecuteTitle","editor_search","onButtonExecuteActive","indicator","indicatorExecute","connector","resolve","_indicatorExecute","newIndicatorExecute","DIndicatorProcessing","searching","_searching","searched","_searched","searchedAt","_searchedAt","Date","now","_requested","_timeoutId","newWord","timeoutId","doSearch","Promise","found","isArray","toTitle","onListItemDown","root","dialogError","_dialogError","newDialogError","DDialogMessage","message","getDialogErrorLabel","dialogProcessing","_dialogProcessing","newDialogProcessing","EEditorShape","piece","_isPieceEnabled","_pieceExcluder","exclude","_controller","_isChangeable","changeable","layoutChangeTo","buttonFill","buttonFillColor","layoutTexture","buttonStroke","buttonStrokeColor","inputStrokeWidth","inputStrokeAlign","layoutStrokeSide","textCorner","inputCornerRadius","layoutCorner","layoutLine","selectLineStyle","selectLineType","layoutLineTail","selectLineTailType","layoutLineTailSize","buttonLineTailColor","inputLineTailMargin","layoutLineHead","selectLineHeadType","layoutLineHeadSize","buttonLineHeadColor","inputLineHeadMargin","_layoutChangeTo","newLayoutChangeTo","newTextChangeToLabel","buttonCircle","buttonSemicircle","buttonRectangle","buttonRectangleRounded","buttonTriangle","buttonTriangleRounded","buttonLine","buttonLineConnector","buttonElbowConnector","buttonImage","buttonGraphicPiece","newButtonExtensionFactory","isExtensionReplacable","isFunction","newButtonExtension","buttonGroup","buttonUngroup","getTextChangeToLabel","selectDialog","toExtensionTitle","newDialogSelectExtensionFactory","toCreator","_buttonCircle","newButtonCircle","shape_circle","getButtonCircleTitle","EShapeCircle","_buttonSemicircle","newButtonSemicircle","shape_semicircle","getButtonSemicircleTitle","EShapeSemicircle","_buttonRectangle","newButtonRectangle","shape_rectangle","getButtonRectangleTitle","_buttonRectangleRounded","newButtonRectangleRounded","shape_rectangle_rounded","getButtonRectangleRoundedTitle","_buttonTriangle","newButtonTriangle","shape_triangle","getButtonTriangleTitle","EShapeTriangle","_buttonTriangleRounded","newButtonTriangleRounded","shape_triangle_rounded","getButtonTriangleRoundedTitle","EShapeTriangleRounded","_buttonLine","newButtonLine","shape_line","getButtonLineTitle","replaceLine","EShapeLine","SIZE","POINTS","isDanglingConnectorAllowed","dangling","_buttonLineConnector","newButtonLineConnector","shape_line_connector","getButtonLineConnectorTitle","replaceLineConnector","replaceConnector","_buttonElbowConnector","newButtonElbowConnector","shape_elbow_connector","getButtonElbowConnectorTitle","replaceElbowConnector","EShapeConnectorElbow","_buttonImage","newButtonImage","DButtonFile","editor_image","DButtonFileAs","DATA_URL","getButtonImageTitle","dataUrl","toImageElement","EShapeImage","_buttonGraphicPiece","newButtonGraphicPiece","graphic_piece","getButtonGraphicPieceTitle","onButtonGraphicPieceActive","dialogSelectGraphicPiece","_dialogSelectGraphicPiece","newDialogSelectGraphicPiece","toPieceThumbnail","newDialogSelectGraphicPieceImage","categories","newDialogSelectGraphicPieceNoImage","newDialogSelectGraphicPieceNoController","newDialogSelectGraphicPieceController","onDialogSelectGraphicPieceSelect","graphicPiece","categoryId","pieces","toDialogSelectGraphicPieceResult","pieceId","call","EShapeEmbeddeds","_buttonGroup","newButtonGroup","shape_group","getButtonGroupTitle","_buttonUngroup","newButtonUngroup","shape_ungroup","getButtonUngroupTitle","ungroup","_buttonFill","newButtonFill","getButtonFillLabel","setFillEnabled","_buttonFillColor","newButtonFillColor","setFill","_buttonStroke","newButtonStroke","getButtonStrokeLabel","setStrokeEnabled","_buttonStrokeColor","newButtonStrokeColor","setStroke","_inputStrokeWidth","newInputStrokeWidth","getInputStrokeWidthLabel","setStrokeWidth","_inputStrokeAlign","newInputStrokeAlign","getInputStrokeAlignLabel","setStrokeAlign","_layoutStrokeSide","newLayoutStrokeSide","buttonStrokeSideTop","buttonStrokeSideRight","buttonStrokeSideBottom","buttonStrokeSideLeft","buttonStrokeExpandable","buttonStrokeShrinkable","buttonStrokeScalableDotDash","_buttonStrokeSideTop","newButtonStrokeSideTop","stroke_side_top","getButtonStrokeSideTopTitle","setStrokeSide","_buttonStrokeSideRight","newButtonStrokeSideRight","stroke_side_right","getButtonStrokeSideRightTitle","_buttonStrokeSideBottom","newButtonStrokeSideBottom","stroke_side_bottom","getButtonStrokeSideBottomTitle","_buttonStrokeSideLeft","newButtonStrokeSideLeft","stroke_side_left","getButtonStrokeSideLeftTitle","_textCorner","newTextCorner","getTextCornerLabel","_inputCornerRadius","newInputCornerRadius","setRadius","_layoutCorner","newLayoutCorner","buttonCornerTopLeft","buttonCornerTopRight","buttonCornerBottomRight","buttonCornerBottomLeft","_buttonCornerTopLeft","newButtonCornerTopLeft","corner_top_left","getButtonCornerTopLeftTitle","setCorner","_buttonCornerTopRight","newButtonCornerTopRight","corner_top_right","getButtonCornerTopRightTitle","TOP_RIGHT","_buttonCornerBottomRight","newButtonCornerBottomRight","corner_bottom_right","getButtonCornerBottomRightTitle","BOTTOM_RIGHT","_buttonCornerBottomLeft","newButtonCornerBottomLeft","corner_bottom_left","getButtonCornerBottomLeftTitle","BOTTOM_LEFT","_layoutLine","newLayoutLine","textLine","buttonLineClosed","buttonLineLock","_textLine","newTextLine","getTextLineLabel","_buttonLineLock","newButtonLineLock","_selectLineStyle","newSelectLineStyle","EShapeStrokeStyle","getSelectLineStyleLabel","DOTTED","DOTTED_DENSELY","DOTTED_LOOSELY","DASHED","DASHED_DENSELY","DASHED_LOOSELY","setLineStyle","DOTTED_MASK","DASHED_MASK","_selectLineType","newSelectLineType","newSelectLineTypeMenuItems","setPointsStyle","FORMATTER_MASK","getSelectLineTypeLabel","EShapePointsFormatters","FORMATTER_SHIFT","_buttonLineClosed","newButtonLineClosed","line_closed","getButtonLineClosedTitle","CLOSED","_buttonStrokeExpandable","newButtonStrokeExpandable","stroke_expandable","getButtonStrokeExpandableTitle","setStrokeStyle","NON_EXPANDING_WIDTH","_buttonStrokeShrinkable","newButtonStrokeShrinkable","stroke_shrinkable","getButtonStrokeShrinkableTitle","NON_SHRINKING_WIDTH","_buttonStrokeScalableDotDash","newButtonStrokeScalableDotDash","stroke_scalable_dot_dash","getButtonStrokeScalableDotDashTitle","NON_SCALING_DOT_AND_DASH","_layoutLineTail","newLayoutLineTail","textLineTail","buttonLineTailLock","_textLineTail","newTextLineTail","getTextLineTailLabel","_buttonLineTailLock","newButtonLineTailLock","_selectLineTailType","newSelectLineTailType","getSelectLineTailTypeLabel","setLineTailType","_layoutLineTailSize","newLayoutLineTailSize","inputLineTailSizeX","inputLineTailSizeY","_inputLineTailSizeX","newInputLineTailSizeX","setLineTailSizeX","_inputLineTailSizeY","newInputLineTailSizeY","setLineTailSizeY","_buttonLineTailColor","newButtonLineTailColor","setLineTailColor","_inputLineTailMargin","newInputLineTailMargin","getInputLineTailMarginLabel","setLineTailMargin","_layoutLineHead","newLayoutLineHead","textLineHead","buttonLineHeadLock","_textLineHead","newTextLineHead","getTextLineHeadLabel","_buttonLineHeadLock","newButtonLineHeadLock","_selectLineHeadType","newSelectLineHeadType","getSelectLineHeadTypeLabel","setLineHeadType","_layoutLineHeadSize","newLayoutLineHeadSize","inputLineHeadSizeX","inputLineHeadSizeY","_inputLineHeadSizeX","newInputLineHeadSizeX","setLineHeadSizeX","_inputLineHeadSizeY","newInputLineHeadSizeY","setLineHeadSizeY","_buttonLineHeadColor","newButtonLineHeadColor","setLineHeadColor","_inputLineHeadMargin","newInputLineHeadMargin","getInputLineHeadMarginLabel","setLineHeadMargin","_layoutTexture","newLayoutTexture","buttonTextureImage","buttonTextureGradient","buttonTextureFitTo","buttonTextureClear","_buttonTextureImage","newButtonTextureImage","getButtonTextureImageTitle","imageElement","setImage","_buttonTextureGradient","newButtonTextureGradient","DButtonColorGradient","texture_gradient","getButtonTextureGradientTitle","toGradientImageUrl","setGradient","toObject","fromObject","_buttonTextureFitTo","newButtonTextureFitTo","DButton","texture_fit_to","getButtonTextureFitToTitle","fitToImage","_buttonTextureClear","newButtonTextureClear","texture_clear","getButtonTextureClearTitle","clearImage","ngroupable","strokeEnable","hasStrokeSide","hasLine","lineStrokeMask","hasLineTail","markerTail","markerTailFill","buttonLineTailColorValue","hasLineHead","markerHead","markerHeadFill","buttonLineHeadColorValue","hasBorderRadius","EEditorSnap","onSnapperChange","snapperTarget","onSnapperTargetChange","snapperGrid","onSnapperGridChange","buttonLabel","buttonGrid","buttonGridEye","inputGridSize","buttonTarget","buttonTargetNew","buttonTargetDelete","buttonTargetBringForward","buttonTargetSendBackward","buttonTargetEye","listTarget","listSnapTarget","_buttonLabel","newButtonLabel","_buttonTarget","newButtonTarget","getButtonTargetLabel","_buttonTargetNew","newButtonTargetNew","getButtonTargetNewTitle","onButtonTargetNewActive","dialogTarget","_buttonTargetDelete","newButtonTargetDelete","getButtonTargetDeleteTitle","_buttonTargetBringForward","newButtonTargetBringForward","getButtonTargetBringForwardTitle","_buttonTargetSendBackward","newButtonTargetSendBackward","getButtonTargetSendBackwardTitle","_buttonTargetEye","newButtonTargetEye","getButtonTargetEyeTitle","_dialogTarget","newDialogTarget","_listTarget","newListTarget","getListTargetItemLabel","onListTargetDblClick","_buttonGrid","newButtonGrid","getButtonGridLabel","_buttonGridEye","newButtonGridEye","getButtonGridEyeTitle","_inputGridSize","newInputGridSize","getInputGridSizeLabel","EEditorText","_fromShapeTextRegEx","_toShapeTextRegEx","getTextFontLabel","dropdownFontFamily","buttonFontColor","inputFontSize","buttonFontSizeDecrease","buttonFontSizeIncrease","buttonFontItalic","buttonFontBold","buttonOutline","buttonOutlineColor","inputOutlineWidth","getTextAlignLabel","buttonAlignOutsideLeft","buttonAlignOutsideRight","buttonAlignOutsideTop","buttonAlignOutsideBottom","buttonDirectionLeftToRight","buttonDirectionTopToBottom","buttonDirectionBottomToTop","buttonDirectionRightToLeft","buttonClipping","buttonFitting","getTextSpacingLabel","inputSpacingHorizontal","inputSpacingVertical","inputPaddingHorizontal","inputPaddingVertical","getTextOffsetLabel","inputOffsetHorizontal","inputOffsetVertical","_inputText","getInputTextHeight","setText","_dropdownFontFamily","newDropdownFontFamily","fontFamilies","newDropdownFontFamilyMenuItems","setTextFamily","fontFamily","_fontFamilies","getFontFamilies","_buttonFontColor","newButtonFontColor","setTextColor","_inputFontSize","newInputFontSize","setTextSize","_buttonFontSizeDecrease","newButtonFontSizeDecrease","editor_font_size_decrease","getButtonFontSizeDecreaseTitle","setTextSizeDelta","_buttonFontSizeIncrease","newButtonFontSizeIncrease","editor_font_size_increase","getButtonFontSizeIncreaseTitle","_buttonFontItalic","newButtonFontItalic","italic","getButtonFontItalicTitle","setTextStyle","EShapeTextStyle","ITALIC","NORMAL","_buttonFontBold","newButtonFontBold","bold","getButtonFontBoldTitle","setTextWeight","EShapeTextWeight","BOLD","_buttonOutline","newButtonOutline","getButtonOutlineLabel","setTextOutlineEnabled","_buttonOutlineColor","newButtonOutlineColor","setTextOutlineColor","_inputOutlineWidth","newInputOutlineWidth","getInputOutlineWidthLabel","setTextOutlineWidth","_buttonAlignOutsideLeft","newButtonAlignOutsideLeft","text_align_outside_left","getButtonAlignOutsideLeftTitle","setTextAlignHorizontal","text_align_left","text_align_center","text_align_right","_buttonAlignOutsideRight","newButtonAlignOutsideRight","text_align_outside_right","getButtonAlignOutsideRightTitle","OUTSIDE_RIGHT","_buttonAlignOutsideTop","newButtonAlignOutsideTop","text_align_outside_top","getButtonAlignOutsideTopTitle","setTextAlignVertical","text_align_top","text_align_middle","MIDDLE","text_align_bottom","_buttonAlignOutsideBottom","newButtonAlignOutsideBottom","text_align_outside_bottom","getButtonAlignOutsideBottomTitle","_buttonDirectionLeftToRight","newButtonDirectionLeftToRight","text_direction_left_to_right","getButtonDirectionLeftToRightTitle","setTextDirection","LEFT_TO_RIGHT","_buttonDirectionTopToBottom","newButtonDirectionTopToBottom","text_direction_top_to_bottom","getButtonDirectionTopToBottomTitle","TOP_TO_BOTTOM","_buttonDirectionBottomToTop","newButtonDirectionBottomToTop","text_direction_bottom_to_top","getButtonDirectionBottomToTopTitle","_buttonDirectionRightToLeft","newButtonDirectionRightToLeft","text_direction_right_to_left","getButtonDirectionRightToLeftTitle","RIGHT_TO_LEFT","_buttonClipping","newButtonClipping","getButtonClippingLabel","setTextClipping","_buttonFitting","newButtonFitting","getButtonFittingLabel","setTextFitting","_inputSpacingHorizontal","newInputSpacingHorizontal","setTextSpacingHorizontal","_inputSpacingVertical","newInputSpacingVertical","setTextSpacingVertical","_inputPaddingHorizontal","newInputPaddingHorizontal","setTextPaddingHorizontal","_inputTextPaddingVertical","newInputPaddingVertical","setTextPaddingVertical","_inputOffsetHorizontal","newInputOffsetHorizontal","setTextOffsetHorizontal","_inputOffsetVertical","newInputOffsetVertical","setTextOffsetVertical","textFamily","buttonOutlineColorValue","COMPARATOR","EEditorTreeSelection","utils","EventEmitter","DTableDataSelectionType","toIndex","onNodeChange","nodes","addRange","includeFrom","includeTo","rowIndices","shift","toArray","toSortedArray","toMap","EEditorTree","_updatedParts","parts","_layerOrder","buttonBringToFront","buttonSendToBack","_buttonBringToFront","newButtonBringToFront","arrow_to_top","getButtonBringToFrontTitle","bringForward","sendBackward","_buttonSendToBack","newButtonSendToBack","arrow_to_bottom","getButtonSendToBackTitle","sendToBack","ORDER_IN_LAYER","DTableDataTree","reverse","toChildren","preventDefault","EEditorValidation","_validator","validator","buttonRevalidate","_buttonRevalidate","newButtonRevalidate","refresh","getButtonRevalidateTitle","onButtonValidateActive","results","cancel","EToolGroupImpl","_isSuspended","_active","_activeParameter","parameter","oldActive","oldActiveParameter","deactivate","suspend","resume","isSuspended","EToolImpl","_isActive","onActivate","onDeactivate","EToolSelectArea","Graphics","beginFill","drawRect","endFill","EToolSelectMode","EToolSelectModifierContainer","Container","EToolSelectModifierHitArea","_modifier","getAnchorSize","p","q","getAnchorRotationDistance","r","getAnchorRotationSize","setLastHitAnchor","ESnapperModifierAnchor","TOP_CENTER","MIDDLE_RIGHT","BOTTOM_CENTER","MIDDLE_LEFT","EToolSelectModifier","EShapeContainer","_scaleBound","_scaleBoundInverse","_isAllowed","_lastHitAnchor","hitArea","_anchorBase","_anchorsScale","_anchorRotate","onPrerender","scale0","getParentScale","scale1","worldAlpha","renderable","parentParent","factor","getLastHitAnchor","anchor","scaleInverse","l","o","anchorBase","anchorRotate","anchorsScale","anchorScale","allow","isAllowed","disallow","removeChild","UtilShapeConnectorTransformData","tailVector","headVector","UtilShapeConnectorTransforms","applyInverse","editorTailVector","editorTailVectorX","editorTailVectorY","newTailLocalX","newTailLocalY","editorHeadVector","editorHeadVectorX","editorHeadVectorY","newHeadLocalX","newHeadLocalY","ECommandShapePropertyLineStyle","initLeft","rect","initCenter","initRight","initTop","initMiddle","initBottom","initWidth","initHeight","initZero","updateMin","valueA","valueB","updateMax","updateSum","finishupIdentity","finishupAverage","assingX","assingY","applyLeft","diff","applyCenter","applyRight","applyTop","applyMiddle","applyBottom","EToolSelectSelection","modifierContainer","_modifierContainer","_originGlobal","_originLocal","_rotationAxisGlobal","_scale","_scaleAxis0","_scaleAxis1","_scaleDet","_scaleDetInverse","_scaleTransform","Matrix","_scaleTransformInverse","_scaleAnchor","_shapeBound","_shapeBoundRect","_alignPoint","_alignRectangle","_shiftPoint1","_shiftPoint2","_transform","_translateDelta","_isUpdated","_lockCount","toParts","arguments","bound","tempRect","getBoundsInternal","enlarge","shapeOfParent","sharedParent","newLength","oldShapeRoot","expectedLast","newLast","cparent","DBase","cw","ch","pl","pt","getTop","pr","getRight","pb","getBottom","cx","cy","ox","oy","moveTo","prepareTranslateSnap","DDiagramEditor","prepareForTranslate","prepareRotateSnap","prepareForRotate","prepareScaleSnap","prepareForScale","prepareTranslate","originGlobal","originLocal","worldTransform","rotationAxisGlobal","vx","vy","vi","prepareScale","prepareScaleOriginAndAxes","scaleTransform","setTransform","translate","prepareScaleAxes","prepareScaleAxis","origin","x0","y0","x1","y1","axis0","axis1","det","saveForScale","initSpace","finishup","assing","shapesLength","isFirst","getBounds","dataLength","distribute","spaceTotal","shapeFactory","hasUngroupable","isOn","delta","previous","EShapeResourceManagerSerialization","DDiagramLayer","addUuid","updateUuid","shapeSet","item29","version","DDiagramSerializedVersion","getBaseLayerLabel","DDiagrams","toPieceData","pieceData","deserialize_","EShapeResourceManagerDeserialization","shapePromise","deserializeAll","calcShift","layerChildren","work1","work2","firstTransform","gx","gy","hitTestBBox","targetTransform","dx","dy","toInternalVector","vector","detInverse","snap","toTranslationSnapped","rotateTo","nx","ny","dot","acos","baseRotation","toRotationSnapped","getScale","keepRatio","getScaleXY","getScaleY","getScaleX","scaleX","scaleY","calcScale","vx0","vy0","vx1","vy1","vx2","vy2","setScale","makeScaleTransform","scaleAnchor","toScaleSnapped","save","deletor","stored","UtilShapeAreaSelect","isShapeIn","_work","findShapes","container","UtilHitTest","offsets","OFFSETS","newOffsets","hitTest","EToolSelect","toSelectionOptions","_area","_applicationLayer","_onDownPoint","_onMovePoint","_onUpPoint","_areaRect","_mode","_isFirstMove","_childSelectTime","_childSelectChild","_isTransformationAllowed","transformation","_isDeletionAllowed","deletion","_onDownBound","onDown","_onMoveBound","onMove","_onUpBound","onUp","_onKeydownBound","onKeydown","_onKeyupBound","onKeyup","_onDblClickBound","down","altKey","diagramLayer","isAddMode","onSelectEnd","onDownPoint","hitObject","commandController","area","oldApplicationLayer","oldInteractionManager","plugins","interaction","move","onUpBound","up","upoutside","newApplicationLayer","newInteractionManager","applicationLayer","onMovePoint","isFirstMove","modifierHit","areaRect","foundShapes","childSelectChild","getRotateAmount","getScaleAmount","getTranslateAmount","isArrowUpKey","isArrowRightKey","isArrowDownKey","isArrowLeftKey","isSelectAllKey","EToolShapeAcceptorEdgeRenderer","_edge","_circles","newCircles","_foundEdges","_radius","SIZE_X","_type","_x","_y","_ox","_oy","_isDirty","_isBegan","_doUpdateBound","_timeout","doUpdate","STROKE_ALPHA","begin","end","getCircleSize","circles","circlesLength","edges","findAll","edgesLength","isize","distance","edgeCenter","center","circle","EToolShapeAcceptorEdge","canvasMode","_canvasMode","_renderer","_shape","_edges","newEdges","layerPositionX","layerPositionY","layerPosition","lx","ly","internal","matrix","EShapeAcceptors","acceptorEdge","coordinateToEdges","aes","aesx","aesy","aex","aey","toGridIndex","coordinate","toCoordinate","aesxh","aesyh","aex0","aey0","aex1","aey1","aex2","aey2","aex3","aey3","x2","y2","x3","y3","x4","y4","x5","y5","ix0","iy0","ix1","iy1","ix","iy","round","find","gix","giy","foundEdges","foundEdge","dd","di","xtx","yty","lx0","ly0","lx1","ly1","lx2","ly2","limit","threshold","findAllS1","ir","findAllS2","iresult","compare","iymax","foundEdgeLocal","sd","ad","bd","EToolShapeCreateLineConnectorPhase","OFF","DONE","EToolShapeCreateLineConnector","_options","_phase","_onKeyDownBound","onKeyDown","_onSetBound","onSet","_onUnsetBound","onUnset","_connector","onTail","onHead","onDone","isTailAccepted","onTailAccepted","onTailUnaccepted","isDanglingEdgeAllowed","getTailType","isHeadAccepted","onHeadAccepted","onHeadUnaccepted","isSameAcceptor","getHeadType","onCancel","isCancelKey","EToolShapeCreateElbowConnector","EToolShapeCreateLine","_isNewPoint","_line","toSnapped","dangle","angle","cos","sin","toValues","prevx","prevy","EToolShapeCreate","_creator","toResized","EToolShapeEditLineHitArea","_capability","isEditing","pointsClosed","closed","hasTail","hasHead","thresholdLine","thresholdAnchor","p0","p1","hitPoint","calcHitPoint","setLastHitSegment","p0x","p0y","p1x","p1y","d0x","d0y","d1x","d1y","EToolShapeEditLineBase","_points","_pointsStyle","_isEditing","_isEdited","_lastHitSegment","_lastHitSegmentPosition","_targetCopy","_targetIndex","_unformatted","plength","segments","_formatted","reshape","_formatter","toPoints","toTransform","pointsStyle","_workTransform","graphics","pointsLength","hs","colorHit","colorFormatted","alphaFormatted","segment","unformatted","uvalues","usegments","formatted","fvalues","lineStyle","lineTo","targetIndex","pprevx","pprevy","lastHitAnchor","onTargetChange","lastHitSegment","ti","targetCopy","previousIndex","onTargetMove","onTargetNotMove","EToolShapeEditLineConnector","_edgeTail","_edgeHead","transformPosition","tailPoint","bodyValues","bodyValuesLength","middlePoint","headPoint","boundary","toPointsBoundary","toFitted","EShapeConnectorBodies","edgeTail","edgeHead","EToolShapeEditLine","newValues","UtilAjax","send","method","settings","isCompleted","makeOnError","error","xhr","XMLHttpRequest","onload","status","success","responseText","statusText","onError","onerror","onabort","headers","setRequestHeader","timeout","ontimeout","abort","UtilCanvasCategory","_promise","fetch","all","doFetch","resolveds","resolved","toFetched","toItems","toDefault","toWritable","getDefaultCategory","isCategoryWritable","toCategoryId","toCategoryLabel","UtilCanvas","_f","_g","_h","_j","_k","getDefaultName","getDefaultLabel","getDefaultWidth","getDefaultHeight","getDefaultSummary","getDefaultDescription","getDefaultBackgroundColor","getDefaultBackgroundAlpha","UtilDate","getFormatter","DATE_FORMATTER","EEditorCanvasLegacy","newLayout","newLayoutItems","newLabelCategory","onCanvasValueFetched","toTheme","_theme","getMargin","_toPieceId","_isEditable","toIcons","_validation","toValidation","_search","toSearch","_application","DApplication","application","_editorButtonGroup","getIconBuilder","validation","force","initDiagram","initHeader","initTools","initEditors","initCopyAndPaste","initShortcut","getDiagramContainer","setDocumentController","newHeader","getHeaderContainer","_header","getToolButtonLayoutContainer","newToolButtonLayout","toolShapeButtonSelect","toolShapeButtonGroup","disable","getEditorLayoutContainer","newEditorLayout","isEditorCanvasCompatible","editorCanvas","editorButtonCoordinate","UtilClipboard","clipboardData","toolShapeSelect","setData","getData","initShortcutShape","initShortcutTree","groupShortcut","getButtonGroupShortcut","ungroupShortcut","getButtonUngroupShortcut","bringToFrontShortcut","getButtonBringToFrontShortcut","bringToForwardShortcut","getButtonBringForwardShortcut","sendBackwardShortcut","getButtonSendBackwardShortcut","sendToBackShortcut","getButtonSendToBackShortcut","newToolFileButtons","setWidth","stage","toolFileButtonCreate","_toolFileButtonCreate","newToolFileButtonCreate","getToolFileButtonCreateTitle","getToolFileButtonCreateShortcut","getToolFileButtonTheme","onToolFileButtonCreateActive","dialogDiscard","dialogCreate","toolFileButtonOpen","_toolFileButtonOpen","newToolFileButtonOpen","getToolFileButtonOpenTitle","getToolFileButtonOpenShortcut","onToolFileButtonOpenActive","dialogSelect","toolFileButtonSave","_toolFileButtonSave","newToolFileButtonSave","getToolFileButtonSaveTitle","getToolFileButtonSaveShortcut","onToolFileButtonSaveActive","validate","DCommandSave","dialogSaveProcessing","editorValidation","editorButtonValidation","toolFileButtonSaveAs","_toolFileButtonSaveAs","newToolFileButtonSaveAs","save_as","getToolFileButtonSaveAsTitle","getToolFileButtonSaveAsShortcut","onToolFileButtonSaveAsActive","dialogSaveAs","toolFileButtonUpload","_toolFileButtonUpload","newToolFileButtonUpload","upload","getToolFileButtonUploadTitle","getToolFileButtonUploadShortcut","checker","onToolFileButtonUploadOpen","toolFileButtonDownload","_toolFileButtonDownload","newToolFileButtonDownload","download","getToolFileButtonDownloadTitle","getToolFileButtonDownloadShortcut","onToolFileButtonDownloadActive","UtilFileDownloader","toolFileButtonUndo","_toolFileButtonUndo","newToolFileButtonUndo","DButtonUndo","getToolFileButtonUndoTitle","getToolFileButtonUndoShortcut","toolFileButtonRedo","_toolFileButtonRedo","newToolFileButtonRedo","DButtonRedo","getToolFileButtonRedoTitle","getToolFileButtonRedoShortcut","toolFileButtonDelete","_toolFileButtonDelete","newToolFileButtonDelete","getToolFileButtonDeleteTitle","getToolFileButtonDeleteShortcut","onToolFileButtonDelete","dialogDelete","_toolShapeButtonGroup","newToolShapeButtonGroup","DButtonGroup","_toolShapeButtonSelect","newToolShapeButtonSelect","getToolShapeButtonSelectTitle","getToolShapeButtonTheme","onToolShapeButtonSelectActive","onToolShapeButtonSelectInactive","toolGroup","newToolShapeButtonCreate","onToolShapeButtonCreateActive","onToolShapeButtonCreateInactive","toolShapeCreate","toolShapeButtonCircle","_toolShapeButtonCircle","newToolShapeButtonCircle","getToolShapeButtonCircleTitle","toolShapeButtonSemicircle","_toolShapeButtonSemicircle","newToolShapeButtonSemicircle","getToolShapeButtonSemicircleTitle","toolShapeButtonRectangle","_toolShapeButtonRectangle","newToolShapeButtonRectangle","getToolShapeButtonRectangleTitle","toolShapeButtonRectangleRounded","_toolShapeButtonRectangleRounded","newToolShapeButtonRectangleRounded","getToolShapeButtonRectangleRoundedTitle","toolShapeButtonTriangle","_toolShapeButtonTriangle","newToolShapeButtonTriangle","getToolShapeButtonTriangleTitle","toolShapeButtonTriangleRounded","_toolShapeButtonTriangleRounded","newToolShapeButtonTriangleRounded","getToolShapeButtonTriangleRoundedTitle","toolShapeButtonLine","_toolShapeButtonLine","newToolShapeButtonLine","getToolShapeButtonLineTitle","onToolShapeButtonLineActive","onToolShapeButtonLineInactive","toolShapeEditLine","toolShapeCreateLine","toolShapeButtonLineConnector","_toolShapeButtonLineConnector","newToolShapeButtonLineConnector","getToolShapeButtonLineConnectorTitle","onToolShapeButtonLineConnectorActive","onToolShapeButtonLineConnectorInactive","toolShapeEditLineConnector","toolShapeCreateLineConnector","toolShapeButtonElbowConnector","_toolShapeButtonElbowConnector","newToolShapeButtonElbowConnector","getToolShapeButtonElbowConnectorTitle","onToolShapeButtonElbowConnectorActive","onToolShapeButtonElbowConnectorInactive","toolShapeCreateElbowConnector","toolShapeButtonImage","_toolShapeButtonImage","newToolShapeButtonImage","getToolShapeButtonImageTitle","onToolShapeButtonImageOpen","createImage","toolShapeButtonGraphicPiece","_toolShapeButtonGraphicPiece","newToolShapeButtonGraphicPiece","getToolShapeButtonGraphicPieceTitle","onToolShapeButtonGraphicPieceActive","dialogSelectPiece","newToolShapeButtonExtensionFactory","newToolShapeButtonExtension","creatorOrTool","toExtensionCreatorOrTool","onToolShapeButtonExtensionActive","onToolShapeButtonExtensionInactive","updaterCreatorOrOptions","toExtensionUpdater","tool","onDialogSelectExtensionFactorySelect","newToolShapeButtons","newToolShapeButtonsExtension","getToolButtonLayoutY","newToolButtons","concat","editorButtonGroup","newEditorButtonGroup","_editorButtonCoordinate","newEditorButtonCoordinate","editor_coordinate","getEditorButtonCoordinateTitle","getEditorButtonTheme","editorCoordinate","_editorCoordinate","newEditorCoordinate","initEditor","editorContainer","zIndex","sortChildren","editorButtonShape","_editorButtonShape","newEditorButtonShape","editor_shape","getEditorButtonShapeTitle","editorShape","_editorShape","newEditorShape","editorButtonText","_editorButtonText","newEditorButtonText","editor_text","getEditorButtonTextTitle","editorText","_editorText","newEditorText","editorButtonData","_editorButtonData","newEditorButtonData","editor_data","getEditorButtonDataTitle","editorData","_editorData","newEditorData","editorButtonDataMapping","_editorButtonDataMapping","newEditorButtonDataMapping","editor_data_mapping","getEditorButtonDataMappingTitle","editorDataMapping","_editorDataMapping","newEditorDataMapping","editorButtonAction","_editorButtonAction","newEditorButtonAction","editor_action","getEditorButtonActionTitle","editorAction","_editorAction","newEditorAction","editorButtonTree","_editorButtonTree","newEditorButtonTree","editor_tree","getEditorButtonTreeTitle","editorTree","_editorTree","newEditorTree","editorButtonLayer","_editorButtonLayer","newEditorButtonLayer","editor_layer","getEditorButtonLayerTitle","editorLayer","_editorLayer","newEditorLayer","editorButtonSnap","_editorButtonSnap","newEditorButtonSnap","editor_snap","getEditorButtonSnapTitle","editorSnap","_editorSnap","newEditorSnap","_editorButtonValidation","newEditorButtonValidation","editor_validation","getEditorButtonValidationTitle","_editorValidation","newEditorValidation","editorButtonSearch","_editorButtonSearch","newEditorButtonSearch","getEditorButtonSearchTitle","editorSearch","_editorSearch","newEditorSearch","_editorCanvas","newEditorCanvas","compatibility","editorButtonCanvasLegacy","_editorButtonCanvasLegacy","newEditorButtonCanvasLegacy","editor_canvas_legacy","getEditorButtonCanvasLegacyTitle","editorCanvasLegacy","_editorCanvasLegacy","newEditorCanvasLegacy","newEditorButtonExtension","editorInstance","newEditorExtension","onEditorButtonExtensionSelectionChange","extensionType","buttonLast","_editorButtonExtensionLast","wasActive","viewButtonZoomOut","_viewButtonZoomOut","newViewButtonZoomOut","view_zoom_out","getViewButtonZoomOutTitle","getViewButtonZoomOutShortcut","getViewButtonTheme","zoomOut","viewButtonZoomIn","_viewButtonZoomIn","newViewButtonZoomIn","view_zoom_in","getViewButtonZoomInTitle","getViewButtonZoomInShortcut","shortcuts","getViewButtonZoomInShortcuts","zoomIn","viewButtonDragAndPinch","_viewButtonDragAndPinch","newViewButtonDragAndPinch","camera","getViewButtonDragAndPinchTitle","getViewButtonDragAndPinchShortcut","viewButtonReset","_viewButtonReset","newViewButtonReset","view_reset","getViewButtonResetTitle","getViewButtonResetShortcut","viewButtonFit","_viewButtonFit","newViewButtonFit","view_fit","getViewButtonFitTitle","getViewButtonFitShortcut","newEditorButtons","toEditorExtentionConstructorOptions","_editorContainer","newEditorContainer","newEditorButtonLayout","resize","onEditorLayoutResized","os","getPaddingLeft","getPaddingRight","ns","_toolShapeSelect","newToolShapeSelect","_toolShapeCreate","newToolShapeCreate","_toolShapeCreateLine","newToolShapeCreateLine","_toolShapeCreateLineConnector","newToolShapeCreateLineConnector","_toolShapeCreateElbowConnector","newToolShapeCreateElbowConnector","_toolShapeEditLine","newToolShapeEditLine","_toolShapeEditLineConnector","newToolShapeEditLineConnector","_toolGroup","newToolGroup","newDiagram","toDiagramOptions","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_z","_0","_1","_2","_3","_4","_5","_6","UtilGestureModifier","ALT","UtilGestureModifiers","match","isGesturing","zoom","viewOn","gesturestart","onDiagramViewOnStart","transformstart","wheeltranslationstart","constraint","onDiagramViewConstraint","thumbnail","saving","onDiagramSaving","saved","onDiagramSaved","deleting","onDiagramDeleting","onDiagramDeleted","snapshot","snapshotOn","taking","onDiagramSnapshotTaking","took","onDiagramSnapshotTook","_localBoundsDiagram","_localBoundsCanvas","getLocalBounds","once","dialogDeleteProcessing","_dialogSaveProcessing","newDialogSaveProcessing","_dialogDeleteProcessing","newDialogDeleteProcessing","_dialogSaveAs","newDialogSaveAs","DDialogSaveAs","_dialogCreate","newDialogCreate","onDialogCreateOk","_dialogDiscard","newDialogDiscard","DDialogConfirmDiscard","_dialogSelect","newDialogSelect","newDialogSelectImage","newDialogSelectNoImage","onDialogSelectSelect","_dialogSelectPiece","newDialogSelectPiece","newDialogSelectPieceImage","newDialogSelectPieceNoImage","newDialogSelectPieceController","onDialogSelectPieceSelect","toDialogSelectPieceResult","_dialogDelete","newDialogDelete","DDialogConfirmDelete","onDialogDeleteOk","getInstance","getThemeDefault","_isChanged","_onDiagramMoveBound","onDiagramMove","_onDiagramUpBound","onDiagramUp","_onDiagramDownPoint","_onDiagramMovePoint","_selectAreaRect","_selectMode","_isSelectSuspended","_expressionMap","_appliedValues","_isMappingsDirty","newPanes","onMappingsChangeBound","onMappingsChange","leftPane","rightPane","_paneLeft","newLeftPane","toolFileButtonGraphicOpen","layoutViewButton","_toolFileButtonGraphicOpen","newToolFileButtonGraphicOpen","getToolFileButtonGraphicOpenTitle","getToolFileButtonGraphicOpenShortcut","getToolFileButtonGraphicTheme","onToolFileButtonGraphicOpenActive","dialogSelectGraphic","_layoutViewButton","newLayoutViewButton","newViewButtons","_paneRight","newRightPane","tableFilterInput","_dialogConfirmDelete","tester","_tester","graphicTester","_tableFilterInput","newTableFilterInput","tableFilter","filter","unapply","dialogSelectMapping","file","onDiagramSelectionChange","toMappingsDirty","_graphic","uuidToDataValueIds","toCsvRows","getFilename","dataShape","dataValueIds","dataValue","dataValueId","toDataShape","onToolFileButtonDeleteActive","DDiagram","onDiagramDown","onDiagramKeydown","ambient","toDataMappingRows","dataValueIdToRow","onDiagramSelectEnd","selectArea","_interactionManager","onDiagramUpBound","_selectArea","_tableFilter","newTableFilter","test","_dialogSelectGraphic","newDialogSelectGraphic","newDialogSelectGraphicImage","newDialogSelectGraphicNoImage","onDialogSelectGraphicSelect","toSerialized","_dialogSelectTester","newDialogSelectMapping","DDialogInputText","newDialogCreateTextValue","isNew","hasNoGraphc","hasNoMapping","hasNoChanges","isNotEditable","evaluate","applyMappings","applyMapping","expressionMap","applyMappingIfChanged","evaluated","appliedValues","toLowerCase","isEditable","getTableColumnDataLabel","getTableColumnValueLabel","newDataMapper","remote","parentData","retain","retained","wcardinal","geditor"],"mappings":"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"}